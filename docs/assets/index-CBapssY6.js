(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Bb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var kv={exports:{}},_c={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qb=Symbol.for("react.transitional.element"),Hb=Symbol.for("react.fragment");function Pv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:qb,type:e,key:i,ref:t!==void 0?t:null,props:n}}_c.Fragment=Hb;_c.jsx=Pv;_c.jsxs=Pv;kv.exports=_c;var A=kv.exports,Lv={exports:{}},tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ud=Symbol.for("react.transitional.element"),Gb=Symbol.for("react.portal"),Fb=Symbol.for("react.fragment"),Qb=Symbol.for("react.strict_mode"),Kb=Symbol.for("react.profiler"),Yb=Symbol.for("react.consumer"),Xb=Symbol.for("react.context"),$b=Symbol.for("react.forward_ref"),Zb=Symbol.for("react.suspense"),Wb=Symbol.for("react.memo"),Uv=Symbol.for("react.lazy"),Op=Symbol.iterator;function Jb(e){return e===null||typeof e!="object"?null:(e=Op&&e[Op]||e["@@iterator"],typeof e=="function"?e:null)}var jv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zv=Object.assign,Bv={};function Ws(e,t,n){this.props=e,this.context=t,this.refs=Bv,this.updater=n||jv}Ws.prototype.isReactComponent={};Ws.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ws.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qv(){}qv.prototype=Ws.prototype;function jd(e,t,n){this.props=e,this.context=t,this.refs=Bv,this.updater=n||jv}var zd=jd.prototype=new qv;zd.constructor=jd;zv(zd,Ws.prototype);zd.isPureReactComponent=!0;var Vp=Array.isArray,Dt={H:null,A:null,T:null,S:null,V:null},Hv=Object.prototype.hasOwnProperty;function Bd(e,t,n,i,r,s){return n=s.ref,{$$typeof:Ud,type:e,key:t,ref:n!==void 0?n:null,props:s}}function t1(e,t){return Bd(e.type,t,void 0,void 0,void 0,e.props)}function qd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ud}function e1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Mp=/\/+/g;function Sh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?e1(""+e.key):t.toString(36)}function kp(){}function n1(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(kp,kp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Wr(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ud:case Gb:a=!0;break;case Uv:return a=e._init,Wr(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+Sh(e,0):i,Vp(r)?(n="",a!=null&&(n=a.replace(Mp,"$&/")+"/"),Wr(r,t,n,"",function(h){return h})):r!=null&&(qd(r)&&(r=t1(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(Mp,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(Vp(e))for(var u=0;u<e.length;u++)i=e[u],s=l+Sh(i,u),a+=Wr(i,t,n,s,r);else if(u=Jb(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+Sh(i,u++),a+=Wr(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return Wr(n1(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Dl(e,t,n){if(e==null)return e;var i=[],r=0;return Wr(e,i,"","",function(s){return t.call(n,s,r++)}),i}function i1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pp=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function r1(){}tt.Children={map:Dl,forEach:function(e,t,n){Dl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Dl(e,function(){t++}),t},toArray:function(e){return Dl(e,function(t){return t})||[]},only:function(e){if(!qd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};tt.Component=Ws;tt.Fragment=Fb;tt.Profiler=Kb;tt.PureComponent=jd;tt.StrictMode=Qb;tt.Suspense=Zb;tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Dt;tt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Dt.H.useMemoCache(e)}};tt.cache=function(e){return function(){return e.apply(null,arguments)}};tt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=zv({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!Hv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Bd(e.type,r,void 0,void 0,s,i)};tt.createContext=function(e){return e={$$typeof:Xb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:Yb,_context:e},e};tt.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)Hv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return Bd(e,s,void 0,void 0,null,r)};tt.createRef=function(){return{current:null}};tt.forwardRef=function(e){return{$$typeof:$b,render:e}};tt.isValidElement=qd;tt.lazy=function(e){return{$$typeof:Uv,_payload:{_status:-1,_result:e},_init:i1}};tt.memo=function(e,t){return{$$typeof:Wb,type:e,compare:t===void 0?null:t}};tt.startTransition=function(e){var t=Dt.T,n={};Dt.T=n;try{var i=e(),r=Dt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(r1,Pp)}catch(s){Pp(s)}finally{Dt.T=t}};tt.unstable_useCacheRefresh=function(){return Dt.H.useCacheRefresh()};tt.use=function(e){return Dt.H.use(e)};tt.useActionState=function(e,t,n){return Dt.H.useActionState(e,t,n)};tt.useCallback=function(e,t){return Dt.H.useCallback(e,t)};tt.useContext=function(e){return Dt.H.useContext(e)};tt.useDebugValue=function(){};tt.useDeferredValue=function(e,t){return Dt.H.useDeferredValue(e,t)};tt.useEffect=function(e,t,n){var i=Dt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};tt.useId=function(){return Dt.H.useId()};tt.useImperativeHandle=function(e,t,n){return Dt.H.useImperativeHandle(e,t,n)};tt.useInsertionEffect=function(e,t){return Dt.H.useInsertionEffect(e,t)};tt.useLayoutEffect=function(e,t){return Dt.H.useLayoutEffect(e,t)};tt.useMemo=function(e,t){return Dt.H.useMemo(e,t)};tt.useOptimistic=function(e,t){return Dt.H.useOptimistic(e,t)};tt.useReducer=function(e,t,n){return Dt.H.useReducer(e,t,n)};tt.useRef=function(e){return Dt.H.useRef(e)};tt.useState=function(e){return Dt.H.useState(e)};tt.useSyncExternalStore=function(e,t,n){return Dt.H.useSyncExternalStore(e,t,n)};tt.useTransition=function(){return Dt.H.useTransition()};tt.version="19.1.1";Lv.exports=tt;var F=Lv.exports;const s1=Bb(F);var Gv={exports:{}},vc={},Fv={exports:{}},Qv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,Z){var X=B.length;B.push(Z);t:for(;0<X;){var gt=X-1>>>1,nt=B[gt];if(0<r(nt,Z))B[gt]=Z,B[X]=nt,X=gt;else break t}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var Z=B[0],X=B.pop();if(X!==Z){B[0]=X;t:for(var gt=0,nt=B.length,hn=nt>>>1;gt<hn;){var Ht=2*(gt+1)-1,wt=B[Ht],J=Ht+1,St=B[J];if(0>r(wt,X))J<nt&&0>r(St,wt)?(B[gt]=St,B[J]=X,gt=J):(B[gt]=wt,B[Ht]=X,gt=Ht);else if(J<nt&&0>r(St,X))B[gt]=St,B[J]=X,gt=J;else break t}}return Z}function r(B,Z){var X=B.sortIndex-Z.sortIndex;return X!==0?X:B.id-Z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,y=!1,D=!1,V=!1,M=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function x(B){for(var Z=n(h);Z!==null;){if(Z.callback===null)i(h);else if(Z.startTime<=B)i(h),Z.sortIndex=Z.expirationTime,t(u,Z);else break;Z=n(h)}}function U(B){if(V=!1,x(B),!D)if(n(u)!==null)D=!0,q||(q=!0,C());else{var Z=n(h);Z!==null&&De(U,Z.startTime-B)}}var q=!1,E=-1,_=5,T=-1;function S(){return M?!0:!(e.unstable_now()-T<_)}function I(){if(M=!1,q){var B=e.unstable_now();T=B;var Z=!0;try{t:{D=!1,V&&(V=!1,v(E),E=-1),y=!0;var X=m;try{e:{for(x(B),g=n(u);g!==null&&!(g.expirationTime>B&&S());){var gt=g.callback;if(typeof gt=="function"){g.callback=null,m=g.priorityLevel;var nt=gt(g.expirationTime<=B);if(B=e.unstable_now(),typeof nt=="function"){g.callback=nt,x(B),Z=!0;break e}g===n(u)&&i(u),x(B)}else i(u);g=n(u)}if(g!==null)Z=!0;else{var hn=n(h);hn!==null&&De(U,hn.startTime-B),Z=!1}}break t}finally{g=null,m=X,y=!1}Z=void 0}}finally{Z?C():q=!1}}}var C;if(typeof R=="function")C=function(){R(I)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,me=w.port2;w.port1.onmessage=I,C=function(){me.postMessage(null)}}else C=function(){b(I,0)};function De(B,Z){E=b(function(){B(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(B){switch(m){case 1:case 2:case 3:var Z=3;break;default:Z=m}var X=m;m=Z;try{return B()}finally{m=X}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(B,Z){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=m;m=B;try{return Z()}finally{m=X}},e.unstable_scheduleCallback=function(B,Z,X){var gt=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?gt+X:gt):X=gt,B){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=X+nt,B={id:d++,callback:Z,priorityLevel:B,startTime:X,expirationTime:nt,sortIndex:-1},X>gt?(B.sortIndex=X,t(h,B),n(u)===null&&B===n(h)&&(V?(v(E),E=-1):V=!0,De(U,X-gt))):(B.sortIndex=nt,t(u,B),D||y||(D=!0,q||(q=!0,C()))),B},e.unstable_shouldYield=S,e.unstable_wrapCallback=function(B){var Z=m;return function(){var X=m;m=Z;try{return B.apply(this,arguments)}finally{m=X}}}})(Qv);Fv.exports=Qv;var a1=Fv.exports,Kv={exports:{}},Ne={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o1=F;function Yv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function gi(){}var Ce={d:{f:gi,r:function(){throw Error(Yv(522))},D:gi,C:gi,L:gi,m:gi,X:gi,S:gi,M:gi},p:0,findDOMNode:null},l1=Symbol.for("react.portal");function u1(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l1,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Ga=o1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ec(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ne.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ce;Ne.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Yv(299));return u1(e,t,null,n)};Ne.flushSync=function(e){var t=Ga.T,n=Ce.p;try{if(Ga.T=null,Ce.p=2,e)return e()}finally{Ga.T=t,Ce.p=n,Ce.d.f()}};Ne.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Ce.d.C(e,t))};Ne.prefetchDNS=function(e){typeof e=="string"&&Ce.d.D(e)};Ne.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Ec(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Ce.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Ce.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ne.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Ec(t.as,t.crossOrigin);Ce.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Ce.d.M(e)};Ne.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Ec(n,t.crossOrigin);Ce.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ne.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Ec(t.as,t.crossOrigin);Ce.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Ce.d.m(e)};Ne.requestFormReset=function(e){Ce.d.r(e)};Ne.unstable_batchedUpdates=function(e,t){return e(t)};Ne.useFormState=function(e,t,n){return Ga.H.useFormState(e,t,n)};Ne.useFormStatus=function(){return Ga.H.useHostTransitionStatus()};Ne.version="19.1.1";function Xv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xv)}catch(e){console.error(e)}}Xv(),Kv.exports=Ne;var c1=Kv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wt=a1,$v=F,h1=c1;function L(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Zv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Wv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lp(e){if(Lo(e)!==e)throw Error(L(188))}function f1(e){var t=e.alternate;if(!t){if(t=Lo(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Lp(r),e;if(s===i)return Lp(r),t;s=s.sibling}throw Error(L(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(L(189))}}if(n.alternate!==i)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function Jv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Jv(e),t!==null)return t;e=e.sibling}return null}var Ct=Object.assign,d1=Symbol.for("react.element"),xl=Symbol.for("react.transitional.element"),Ma=Symbol.for("react.portal"),as=Symbol.for("react.fragment"),tE=Symbol.for("react.strict_mode"),pf=Symbol.for("react.profiler"),m1=Symbol.for("react.provider"),eE=Symbol.for("react.consumer"),qn=Symbol.for("react.context"),Hd=Symbol.for("react.forward_ref"),yf=Symbol.for("react.suspense"),_f=Symbol.for("react.suspense_list"),Gd=Symbol.for("react.memo"),vi=Symbol.for("react.lazy"),vf=Symbol.for("react.activity"),g1=Symbol.for("react.memo_cache_sentinel"),Up=Symbol.iterator;function Ra(e){return e===null||typeof e!="object"?null:(e=Up&&e[Up]||e["@@iterator"],typeof e=="function"?e:null)}var p1=Symbol.for("react.client.reference");function Ef(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===p1?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case as:return"Fragment";case pf:return"Profiler";case tE:return"StrictMode";case yf:return"Suspense";case _f:return"SuspenseList";case vf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Ma:return"Portal";case qn:return(e.displayName||"Context")+".Provider";case eE:return(e._context.displayName||"Context")+".Consumer";case Hd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gd:return t=e.displayName||null,t!==null?t:Ef(e.type)||"Memo";case vi:t=e._payload,e=e._init;try{return Ef(e(t))}catch{}}return null}var ka=Array.isArray,$=$v.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt=h1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_r={pending:!1,data:null,method:null,action:null},Tf=[],os=-1;function Mn(e){return{current:e}}function re(e){0>os||(e.current=Tf[os],Tf[os]=null,os--)}function xt(e,t){os++,Tf[os]=e.current,e.current=t}var wn=Mn(null),fo=Mn(null),Mi=Mn(null),Tu=Mn(null);function Au(e,t){switch(xt(Mi,t),xt(fo,e),xt(wn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Hy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Hy(t),e=_0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}re(wn),xt(wn,e)}function Vs(){re(wn),re(fo),re(Mi)}function Af(e){e.memoizedState!==null&&xt(Tu,e);var t=wn.current,n=_0(t,e.type);t!==n&&(xt(fo,e),xt(wn,n))}function Su(e){fo.current===e&&(re(wn),re(fo)),Tu.current===e&&(re(Tu),So._currentValue=_r)}var Sf=Object.prototype.hasOwnProperty,Fd=Wt.unstable_scheduleCallback,bh=Wt.unstable_cancelCallback,y1=Wt.unstable_shouldYield,_1=Wt.unstable_requestPaint,Rn=Wt.unstable_now,v1=Wt.unstable_getCurrentPriorityLevel,nE=Wt.unstable_ImmediatePriority,iE=Wt.unstable_UserBlockingPriority,bu=Wt.unstable_NormalPriority,E1=Wt.unstable_LowPriority,rE=Wt.unstable_IdlePriority,T1=Wt.log,A1=Wt.unstable_setDisableYieldValue,Uo=null,Qe=null;function Ni(e){if(typeof T1=="function"&&A1(e),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(Uo,e)}catch{}}var Ke=Math.clz32?Math.clz32:w1,S1=Math.log,b1=Math.LN2;function w1(e){return e>>>=0,e===0?32:31-(S1(e)/b1|0)|0}var Ol=256,Vl=4194304;function dr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Tc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=dr(i):(a&=l,a!==0?r=dr(a):n||(n=l&~e,n!==0&&(r=dr(n))))):(l=i&~s,l!==0?r=dr(l):a!==0?r=dr(a):n||(n=i&~e,n!==0&&(r=dr(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function jo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function R1(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sE(){var e=Ol;return Ol<<=1,!(Ol&4194048)&&(Ol=256),e}function aE(){var e=Vl;return Vl<<=1,!(Vl&62914560)&&(Vl=4194304),e}function wh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function I1(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-Ke(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var y=m[d];y!==null&&(y.lane&=-536870913)}n&=~g}i!==0&&oE(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function oE(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Ke(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function lE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Ke(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Qd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Kd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function uE(){var e=dt.p;return e!==0?e:(e=window.event,e===void 0?32:C0(e.type))}function C1(e,t){var n=dt.p;try{return dt.p=e,t()}finally{dt.p=n}}var ir=Math.random().toString(36).slice(2),Te="__reactFiber$"+ir,ke="__reactProps$"+ir,Js="__reactContainer$"+ir,bf="__reactEvents$"+ir,N1="__reactListeners$"+ir,D1="__reactHandles$"+ir,jp="__reactResources$"+ir,Bo="__reactMarker$"+ir;function Yd(e){delete e[Te],delete e[ke],delete e[bf],delete e[N1],delete e[D1]}function ls(e){var t=e[Te];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Js]||n[Te]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Qy(e);e!==null;){if(n=e[Te])return n;e=Qy(e)}return t}e=n,n=e.parentNode}return null}function ta(e){if(e=e[Te]||e[Js]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Pa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(L(33))}function Es(e){var t=e[jp];return t||(t=e[jp]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ee(e){e[Bo]=!0}var cE=new Set,hE={};function Pr(e,t){Ms(e,t),Ms(e+"Capture",t)}function Ms(e,t){for(hE[e]=t,e=0;e<t.length;e++)cE.add(t[e])}var x1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zp={},Bp={};function O1(e){return Sf.call(Bp,e)?!0:Sf.call(zp,e)?!1:x1.test(e)?Bp[e]=!0:(zp[e]=!0,!1)}function Zl(e,t,n){if(O1(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ml(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Un(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Rh,qp;function Jr(e){if(Rh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Rh=t&&t[1]||"",qp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rh+e+qp}var Ih=!1;function Ch(e,t){if(!e||Ih)return"";Ih=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(y){var m=y}Reflect.construct(e,[],g)}else{try{g.call()}catch(y){m=y}e.call(g.prototype)}}else{try{throw Error()}catch(y){m=y}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(y){if(y&&m&&typeof y.stack=="string")return[y.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{Ih=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Jr(n):""}function V1(e){switch(e.tag){case 26:case 27:case 5:return Jr(e.type);case 16:return Jr("Lazy");case 13:return Jr("Suspense");case 19:return Jr("SuspenseList");case 0:case 15:return Ch(e.type,!1);case 11:return Ch(e.type.render,!1);case 1:return Ch(e.type,!0);case 31:return Jr("Activity");default:return""}}function Hp(e){try{var t="";do t+=V1(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function en(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function M1(e){var t=fE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wu(e){e._valueTracker||(e._valueTracker=M1(e))}function dE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=fE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Ru(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var k1=/[\n"\\]/g;function sn(e){return e.replace(k1,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function wf(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+en(t)):e.value!==""+en(t)&&(e.value=""+en(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Rf(e,a,en(t)):n!=null?Rf(e,a,en(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+en(l):e.removeAttribute("name")}function mE(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+en(n):"",t=t!=null?""+en(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Rf(e,t,n){t==="number"&&Ru(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ts(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+en(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function gE(e,t,n){if(t!=null&&(t=""+en(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+en(n):""}function pE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(L(92));if(ka(i)){if(1<i.length)throw Error(L(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=en(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function ks(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var P1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||P1.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function yE(e,t,n){if(t!=null&&typeof t!="object")throw Error(L(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Gp(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&Gp(e,s,t[s])}function Xd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var L1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),U1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wl(e){return U1.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var If=null;function $d(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var us=null,As=null;function Fp(e){var t=ta(e);if(t&&(e=t.stateNode)){var n=e[ke]||null;t:switch(e=t.stateNode,t.type){case"input":if(wf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+sn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[ke]||null;if(!r)throw Error(L(90));wf(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&dE(i)}break t;case"textarea":gE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Ts(e,!!n.multiple,t,!1)}}}var Nh=!1;function _E(e,t,n){if(Nh)return e(t,n);Nh=!0;try{var i=e(t);return i}finally{if(Nh=!1,(us!==null||As!==null)&&(xc(),us&&(t=us,e=As,As=us=null,Fp(t),e)))for(t=0;t<e.length;t++)Fp(e[t])}}function mo(e,t){var n=e.stateNode;if(n===null)return null;var i=n[ke]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cf=!1;if(Jn)try{var Ia={};Object.defineProperty(Ia,"passive",{get:function(){Cf=!0}}),window.addEventListener("test",Ia,Ia),window.removeEventListener("test",Ia,Ia)}catch{Cf=!1}var Di=null,Zd=null,Jl=null;function vE(){if(Jl)return Jl;var e,t=Zd,n=t.length,i,r="value"in Di?Di.value:Di.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return Jl=r.slice(e,1<i?1-i:void 0)}function tu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kl(){return!0}function Qp(){return!1}function Pe(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?kl:Qp,this.isPropagationStopped=Qp,this}return Ct(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kl)},persist:function(){},isPersistent:kl}),t}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ac=Pe(Lr),qo=Ct({},Lr,{view:0,detail:0}),j1=Pe(qo),Dh,xh,Ca,Sc=Ct({},qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ca&&(Ca&&e.type==="mousemove"?(Dh=e.screenX-Ca.screenX,xh=e.screenY-Ca.screenY):xh=Dh=0,Ca=e),Dh)},movementY:function(e){return"movementY"in e?e.movementY:xh}}),Kp=Pe(Sc),z1=Ct({},Sc,{dataTransfer:0}),B1=Pe(z1),q1=Ct({},qo,{relatedTarget:0}),Oh=Pe(q1),H1=Ct({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),G1=Pe(H1),F1=Ct({},Lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Q1=Pe(F1),K1=Ct({},Lr,{data:0}),Yp=Pe(K1),Y1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$1[e])?!!t[e]:!1}function Wd(){return Z1}var W1=Ct({},qo,{key:function(e){if(e.key){var t=Y1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?X1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wd,charCode:function(e){return e.type==="keypress"?tu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),J1=Pe(W1),tw=Ct({},Sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xp=Pe(tw),ew=Ct({},qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wd}),nw=Pe(ew),iw=Ct({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),rw=Pe(iw),sw=Ct({},Sc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),aw=Pe(sw),ow=Ct({},Lr,{newState:0,oldState:0}),lw=Pe(ow),uw=[9,13,27,32],Jd=Jn&&"CompositionEvent"in window,Fa=null;Jn&&"documentMode"in document&&(Fa=document.documentMode);var cw=Jn&&"TextEvent"in window&&!Fa,EE=Jn&&(!Jd||Fa&&8<Fa&&11>=Fa),$p=" ",Zp=!1;function TE(e,t){switch(e){case"keyup":return uw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cs=!1;function hw(e,t){switch(e){case"compositionend":return AE(t);case"keypress":return t.which!==32?null:(Zp=!0,$p);case"textInput":return e=t.data,e===$p&&Zp?null:e;default:return null}}function fw(e,t){if(cs)return e==="compositionend"||!Jd&&TE(e,t)?(e=vE(),Jl=Zd=Di=null,cs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return EE&&t.locale!=="ko"?null:t.data;default:return null}}var dw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dw[e.type]:t==="textarea"}function SE(e,t,n,i){us?As?As.push(i):As=[i]:us=i,t=Gu(t,"onChange"),0<t.length&&(n=new Ac("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Qa=null,go=null;function mw(e){g0(e,0)}function bc(e){var t=Pa(e);if(dE(t))return e}function Jp(e,t){if(e==="change")return t}var bE=!1;if(Jn){var Vh;if(Jn){var Mh="oninput"in document;if(!Mh){var ty=document.createElement("div");ty.setAttribute("oninput","return;"),Mh=typeof ty.oninput=="function"}Vh=Mh}else Vh=!1;bE=Vh&&(!document.documentMode||9<document.documentMode)}function ey(){Qa&&(Qa.detachEvent("onpropertychange",wE),go=Qa=null)}function wE(e){if(e.propertyName==="value"&&bc(go)){var t=[];SE(t,go,e,$d(e)),_E(mw,t)}}function gw(e,t,n){e==="focusin"?(ey(),Qa=t,go=n,Qa.attachEvent("onpropertychange",wE)):e==="focusout"&&ey()}function pw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bc(go)}function yw(e,t){if(e==="click")return bc(t)}function _w(e,t){if(e==="input"||e==="change")return bc(t)}function vw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var We=typeof Object.is=="function"?Object.is:vw;function po(e,t){if(We(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Sf.call(t,r)||!We(e[r],t[r]))return!1}return!0}function ny(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function iy(e,t){var n=ny(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=ny(n)}}function RE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?RE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function IE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ru(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ru(e.document)}return t}function tm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Ew=Jn&&"documentMode"in document&&11>=document.documentMode,hs=null,Nf=null,Ka=null,Df=!1;function ry(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Df||hs==null||hs!==Ru(i)||(i=hs,"selectionStart"in i&&tm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ka&&po(Ka,i)||(Ka=i,i=Gu(Nf,"onSelect"),0<i.length&&(t=new Ac("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=hs)))}function fr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fs={animationend:fr("Animation","AnimationEnd"),animationiteration:fr("Animation","AnimationIteration"),animationstart:fr("Animation","AnimationStart"),transitionrun:fr("Transition","TransitionRun"),transitionstart:fr("Transition","TransitionStart"),transitioncancel:fr("Transition","TransitionCancel"),transitionend:fr("Transition","TransitionEnd")},kh={},CE={};Jn&&(CE=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function Ur(e){if(kh[e])return kh[e];if(!fs[e])return e;var t=fs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in CE)return kh[e]=t[n];return e}var NE=Ur("animationend"),DE=Ur("animationiteration"),xE=Ur("animationstart"),Tw=Ur("transitionrun"),Aw=Ur("transitionstart"),Sw=Ur("transitioncancel"),OE=Ur("transitionend"),VE=new Map,xf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xf.push("scrollEnd");function En(e,t){VE.set(e,t),Pr(t,[e])}var sy=new WeakMap;function an(e,t){if(typeof e=="object"&&e!==null){var n=sy.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Hp(t)},sy.set(e,t),t)}return{value:e,source:t,stack:Hp(t)}}var tn=[],ds=0,em=0;function wc(){for(var e=ds,t=em=ds=0;t<e;){var n=tn[t];tn[t++]=null;var i=tn[t];tn[t++]=null;var r=tn[t];tn[t++]=null;var s=tn[t];if(tn[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&ME(n,r,s)}}function Rc(e,t,n,i){tn[ds++]=e,tn[ds++]=t,tn[ds++]=n,tn[ds++]=i,em|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function nm(e,t,n,i){return Rc(e,t,n,i),Iu(e)}function ea(e,t){return Rc(e,null,null,t),Iu(e)}function ME(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-Ke(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function Iu(e){if(50<io)throw io=0,Wf=null,Error(L(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ms={};function bw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function He(e,t,n,i){return new bw(e,t,n,i)}function im(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xn(e,t){var n=e.alternate;return n===null?(n=He(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function kE(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function eu(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")im(e)&&(a=1);else if(typeof e=="string")a=RR(e,n,wn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case vf:return e=He(31,n,t,r),e.elementType=vf,e.lanes=s,e;case as:return vr(n.children,r,s,t);case tE:a=8,r|=24;break;case pf:return e=He(12,n,t,r|2),e.elementType=pf,e.lanes=s,e;case yf:return e=He(13,n,t,r),e.elementType=yf,e.lanes=s,e;case _f:return e=He(19,n,t,r),e.elementType=_f,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case m1:case qn:a=10;break t;case eE:a=9;break t;case Hd:a=11;break t;case Gd:a=14;break t;case vi:a=16,i=null;break t}a=29,n=Error(L(130,e===null?"null":typeof e,"")),i=null}return t=He(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function vr(e,t,n,i){return e=He(7,e,i,t),e.lanes=n,e}function Ph(e,t,n){return e=He(6,e,null,t),e.lanes=n,e}function Lh(e,t,n){return t=He(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var gs=[],ps=0,Cu=null,Nu=0,nn=[],rn=0,Er=null,Hn=1,Gn="";function mr(e,t){gs[ps++]=Nu,gs[ps++]=Cu,Cu=e,Nu=t}function PE(e,t,n){nn[rn++]=Hn,nn[rn++]=Gn,nn[rn++]=Er,Er=e;var i=Hn;e=Gn;var r=32-Ke(i)-1;i&=~(1<<r),n+=1;var s=32-Ke(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Hn=1<<32-Ke(t)+r|n<<r|i,Gn=s+e}else Hn=1<<s|n<<r|i,Gn=e}function rm(e){e.return!==null&&(mr(e,1),PE(e,1,0))}function sm(e){for(;e===Cu;)Cu=gs[--ps],gs[ps]=null,Nu=gs[--ps],gs[ps]=null;for(;e===Er;)Er=nn[--rn],nn[rn]=null,Gn=nn[--rn],nn[rn]=null,Hn=nn[--rn],nn[rn]=null}var Re=null,Ut=null,ft=!1,Tr=null,Sn=!1,Of=Error(L(519));function wr(e){var t=Error(L(418,""));throw yo(an(t,e)),Of}function ay(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Te]=e,t[ke]=i,n){case"dialog":it("cancel",t),it("close",t);break;case"iframe":case"object":case"embed":it("load",t);break;case"video":case"audio":for(n=0;n<Eo.length;n++)it(Eo[n],t);break;case"source":it("error",t);break;case"img":case"image":case"link":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"input":it("invalid",t),mE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),wu(t);break;case"select":it("invalid",t);break;case"textarea":it("invalid",t),pE(t,i.value,i.defaultValue,i.children),wu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||y0(t.textContent,n)?(i.popover!=null&&(it("beforetoggle",t),it("toggle",t)),i.onScroll!=null&&it("scroll",t),i.onScrollEnd!=null&&it("scrollend",t),i.onClick!=null&&(t.onclick=Mc),t=!0):t=!1,t||wr(e)}function oy(e){for(Re=e.return;Re;)switch(Re.tag){case 5:case 13:Sn=!1;return;case 27:case 3:Sn=!0;return;default:Re=Re.return}}function Na(e){if(e!==Re)return!1;if(!ft)return oy(e),ft=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||rd(e.type,e.memoizedProps)),n=!n),n&&Ut&&wr(e),oy(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Ut=yn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Ut=null}}else t===27?(t=Ut,rr(e.type)?(e=od,od=null,Ut=e):Ut=t):Ut=Re?yn(e.stateNode.nextSibling):null;return!0}function Ho(){Ut=Re=null,ft=!1}function ly(){var e=Tr;return e!==null&&(Ve===null?Ve=e:Ve.push.apply(Ve,e),Tr=null),e}function yo(e){Tr===null?Tr=[e]:Tr.push(e)}var Vf=Mn(null),jr=null,Fn=null;function Ti(e,t,n){xt(Vf,t._currentValue),t._currentValue=n}function $n(e){e._currentValue=Vf.current,re(Vf)}function Mf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function kf(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Mf(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(L(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Mf(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Go(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(L(387));if(a=a.memoizedProps,a!==null){var l=r.type;We(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===Tu.current){if(a=r.alternate,a===null)throw Error(L(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(So):e=[So])}r=r.return}e!==null&&kf(t,e,n,i),t.flags|=262144}function Du(e){for(e=e.firstContext;e!==null;){if(!We(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Rr(e){jr=e,Fn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ae(e){return LE(jr,e)}function Pl(e,t){return jr===null&&Rr(e),LE(e,t)}function LE(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Fn===null){if(e===null)throw Error(L(308));Fn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Fn=Fn.next=t;return n}var ww=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Rw=Wt.unstable_scheduleCallback,Iw=Wt.unstable_NormalPriority,Xt={$$typeof:qn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function am(){return{controller:new ww,data:new Map,refCount:0}}function Fo(e){e.refCount--,e.refCount===0&&Rw(Iw,function(){e.controller.abort()})}var Ya=null,Pf=0,Ps=0,Ss=null;function Cw(e,t){if(Ya===null){var n=Ya=[];Pf=0,Ps=Nm(),Ss={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Pf++,t.then(uy,uy),t}function uy(){if(--Pf===0&&Ya!==null){Ss!==null&&(Ss.status="fulfilled");var e=Ya;Ya=null,Ps=0,Ss=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Nw(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var cy=$.S;$.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Cw(e,t),cy!==null&&cy(e,t)};var Ar=Mn(null);function om(){var e=Ar.current;return e!==null?e:bt.pooledCache}function nu(e,t){t===null?xt(Ar,Ar.current):xt(Ar,t.pool)}function UE(){var e=om();return e===null?null:{parent:Xt._currentValue,pool:e}}var Qo=Error(L(460)),jE=Error(L(474)),Ic=Error(L(542)),Lf={then:function(){}};function hy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ll(){}function zE(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ll,Ll),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,dy(e),e;default:if(typeof t.status=="string")t.then(Ll,Ll);else{if(e=bt,e!==null&&100<e.shellSuspendCounter)throw Error(L(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,dy(e),e}throw Xa=t,Qo}}var Xa=null;function fy(){if(Xa===null)throw Error(L(459));var e=Xa;return Xa=null,e}function dy(e){if(e===Qo||e===Ic)throw Error(L(483))}var Ei=!1;function lm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ki(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Pi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,yt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Iu(e),ME(e,null,n),t}return Rc(e,i,t,n),Iu(e)}function $a(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,lE(e,n)}}function Uh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var jf=!1;function Za(){if(jf){var e=Ss;if(e!==null)throw e}}function Wa(e,t,n,i){jf=!1;var r=e.updateQueue;Ei=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,y=m!==l.lane;if(y?(ut&m)===m:(i&m)===m){m!==0&&m===Ps&&(jf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var D=e,V=l;m=t;var M=n;switch(V.tag){case 1:if(D=V.payload,typeof D=="function"){g=D.call(M,g,m);break t}g=D;break t;case 3:D.flags=D.flags&-65537|128;case 0:if(D=V.payload,m=typeof D=="function"?D.call(M,g,m):D,m==null)break t;g=Ct({},g,m);break t;case 2:Ei=!0}}m=l.callback,m!==null&&(e.flags|=64,y&&(e.flags|=8192),y=r.callbacks,y===null?r.callbacks=[m]:y.push(m))}else y={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=y,u=g):d=d.next=y,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;y=l,l=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(!0);d===null&&(u=g),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),$i|=a,e.lanes=a,e.memoizedState=g}}function BE(e,t){if(typeof e!="function")throw Error(L(191,e));e.call(t)}function qE(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)BE(n[e],t)}var Ls=Mn(null),xu=Mn(0);function my(e,t){e=ni,xt(xu,e),xt(Ls,t),ni=e|t.baseLanes}function zf(){xt(xu,ni),xt(Ls,Ls.current)}function um(){ni=xu.current,re(Ls),re(xu)}var Yi=0,et=null,vt=null,Ft=null,Ou=!1,bs=!1,Ir=!1,Vu=0,_o=0,ws=null,Dw=0;function zt(){throw Error(L(321))}function cm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!We(e[n],t[n]))return!1;return!0}function hm(e,t,n,i,r,s){return Yi=s,et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$.H=e===null||e.memoizedState===null?vT:ET,Ir=!1,s=n(i,r),Ir=!1,bs&&(s=GE(t,n,i,r)),HE(e),s}function HE(e){$.H=Mu;var t=vt!==null&&vt.next!==null;if(Yi=0,Ft=vt=et=null,Ou=!1,_o=0,ws=null,t)throw Error(L(300));e===null||ie||(e=e.dependencies,e!==null&&Du(e)&&(ie=!0))}function GE(e,t,n,i){et=e;var r=0;do{if(bs&&(ws=null),_o=0,bs=!1,25<=r)throw Error(L(301));if(r+=1,Ft=vt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}$.H=Lw,s=t(n,i)}while(bs);return s}function xw(){var e=$.H,t=e.useState()[0];return t=typeof t.then=="function"?Ko(t):t,e=e.useState()[0],(vt!==null?vt.memoizedState:null)!==e&&(et.flags|=1024),t}function fm(){var e=Vu!==0;return Vu=0,e}function dm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function mm(e){if(Ou){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ou=!1}Yi=0,Ft=vt=et=null,bs=!1,_o=Vu=0,ws=null}function xe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?et.memoizedState=Ft=e:Ft=Ft.next=e,Ft}function Yt(){if(vt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=vt.next;var t=Ft===null?et.memoizedState:Ft.next;if(t!==null)Ft=t,vt=e;else{if(e===null)throw et.alternate===null?Error(L(467)):Error(L(310));vt=e,e={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Ft===null?et.memoizedState=Ft=e:Ft=Ft.next=e}return Ft}function gm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ko(e){var t=_o;return _o+=1,ws===null&&(ws=[]),e=zE(ws,e,t),t=et,(Ft===null?t.memoizedState:Ft.next)===null&&(t=t.alternate,$.H=t===null||t.memoizedState===null?vT:ET),e}function Cc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ko(e);if(e.$$typeof===qn)return Ae(e)}throw Error(L(438,String(e)))}function pm(e){var t=null,n=et.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=et.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=gm(),et.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=g1;return t.index++,n}function ti(e,t){return typeof t=="function"?t(e):t}function iu(e){var t=Yt();return ym(t,vt,e)}function ym(e,t,n){var i=e.queue;if(i===null)throw Error(L(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(ut&g)===g:(Yi&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Ps&&(d=!0);else if((Yi&m)===m){h=h.next,m===Ps&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=s):u=u.next=g,et.lanes|=m,$i|=m;g=h.action,Ir&&n(s,g),s=h.hasEagerState?h.eagerState:n(s,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,et.lanes|=g,$i|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!We(s,e.memoizedState)&&(ie=!0,d&&(n=Ss,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function jh(e){var t=Yt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);We(s,t.memoizedState)||(ie=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function FE(e,t,n){var i=et,r=Yt(),s=ft;if(s){if(n===void 0)throw Error(L(407));n=n()}else n=t();var a=!We((vt||r).memoizedState,n);a&&(r.memoizedState=n,ie=!0),r=r.queue;var l=YE.bind(null,i,r,e);if(Yo(2048,8,l,[e]),r.getSnapshot!==t||a||Ft!==null&&Ft.memoizedState.tag&1){if(i.flags|=2048,Us(9,Nc(),KE.bind(null,i,r,n,t),null),bt===null)throw Error(L(349));s||Yi&124||QE(i,t,n)}return n}function QE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=et.updateQueue,t===null?(t=gm(),et.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function KE(e,t,n,i){t.value=n,t.getSnapshot=i,XE(t)&&$E(e)}function YE(e,t,n){return n(function(){XE(t)&&$E(e)})}function XE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!We(e,n)}catch{return!0}}function $E(e){var t=ea(e,2);t!==null&&Xe(t,e,2)}function Bf(e){var t=xe();if(typeof e=="function"){var n=e;if(e=n(),Ir){Ni(!0);try{n()}finally{Ni(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:e},t}function ZE(e,t,n,i){return e.baseState=n,ym(e,vt,typeof i=="function"?i:ti)}function Ow(e,t,n,i,r){if(Dc(e))throw Error(L(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};$.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,WE(t,s)):(s.next=n.next,t.pending=n.next=s)}}function WE(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=$.T,a={};$.T=a;try{var l=n(r,i),u=$.S;u!==null&&u(a,l),gy(e,t,l)}catch(h){qf(e,t,h)}finally{$.T=s}}else try{s=n(r,i),gy(e,t,s)}catch(h){qf(e,t,h)}}function gy(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){py(e,t,i)},function(i){return qf(e,t,i)}):py(e,t,n)}function py(e,t,n){t.status="fulfilled",t.value=n,JE(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,WE(e,n)))}function qf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,JE(t),t=t.next;while(t!==i)}e.action=null}function JE(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function tT(e,t){return t}function yy(e,t){if(ft){var n=bt.formState;if(n!==null){t:{var i=et;if(ft){if(Ut){e:{for(var r=Ut,s=Sn;r.nodeType!==8;){if(!s){r=null;break e}if(r=yn(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Ut=yn(r.nextSibling),i=r.data==="F!";break t}}wr(i)}i=!1}i&&(t=n[0])}}return n=xe(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tT,lastRenderedState:t},n.queue=i,n=pT.bind(null,et,i),i.dispatch=n,i=Bf(!1),s=Tm.bind(null,et,!1,i.queue),i=xe(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=Ow.bind(null,et,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function _y(e){var t=Yt();return eT(t,vt,e)}function eT(e,t,n){if(t=ym(e,t,tT)[0],e=iu(ti)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Ko(t)}catch(a){throw a===Qo?Ic:a}else i=t;t=Yt();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(et.flags|=2048,Us(9,Nc(),Vw.bind(null,r,n),null)),[i,s,e]}function Vw(e,t){e.action=t}function vy(e){var t=Yt(),n=vt;if(n!==null)return eT(t,n,e);Yt(),t=t.memoizedState,n=Yt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Us(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=et.updateQueue,t===null&&(t=gm(),et.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Nc(){return{destroy:void 0,resource:void 0}}function nT(){return Yt().memoizedState}function ru(e,t,n,i){var r=xe();i=i===void 0?null:i,et.flags|=e,r.memoizedState=Us(1|t,Nc(),n,i)}function Yo(e,t,n,i){var r=Yt();i=i===void 0?null:i;var s=r.memoizedState.inst;vt!==null&&i!==null&&cm(i,vt.memoizedState.deps)?r.memoizedState=Us(t,s,n,i):(et.flags|=e,r.memoizedState=Us(1|t,s,n,i))}function Ey(e,t){ru(8390656,8,e,t)}function iT(e,t){Yo(2048,8,e,t)}function rT(e,t){return Yo(4,2,e,t)}function sT(e,t){return Yo(4,4,e,t)}function aT(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function oT(e,t,n){n=n!=null?n.concat([e]):null,Yo(4,4,aT.bind(null,t,e),n)}function _m(){}function lT(e,t){var n=Yt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&cm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function uT(e,t){var n=Yt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&cm(t,i[1]))return i[0];if(i=e(),Ir){Ni(!0);try{e()}finally{Ni(!1)}}return n.memoizedState=[i,t],i}function vm(e,t,n){return n===void 0||Yi&1073741824?e.memoizedState=t:(e.memoizedState=n,e=JT(),et.lanes|=e,$i|=e,n)}function cT(e,t,n,i){return We(n,t)?n:Ls.current!==null?(e=vm(e,n,i),We(e,t)||(ie=!0),e):Yi&42?(e=JT(),et.lanes|=e,$i|=e,t):(ie=!0,e.memoizedState=n)}function hT(e,t,n,i,r){var s=dt.p;dt.p=s!==0&&8>s?s:8;var a=$.T,l={};$.T=l,Tm(e,!1,t,n);try{var u=r(),h=$.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=Nw(u,i);Ja(e,t,d,Ye(e))}else Ja(e,t,i,Ye(e))}catch(g){Ja(e,t,{then:function(){},status:"rejected",reason:g},Ye())}finally{dt.p=s,$.T=a}}function Mw(){}function Hf(e,t,n,i){if(e.tag!==5)throw Error(L(476));var r=fT(e).queue;hT(e,r,t,_r,n===null?Mw:function(){return dT(e),n(i)})}function fT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:_r,baseState:_r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:_r},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function dT(e){var t=fT(e).next.queue;Ja(e,t,{},Ye())}function Em(){return Ae(So)}function mT(){return Yt().memoizedState}function gT(){return Yt().memoizedState}function kw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ye();e=ki(n);var i=Pi(t,e,n);i!==null&&(Xe(i,t,n),$a(i,t,n)),t={cache:am()},e.payload=t;return}t=t.return}}function Pw(e,t,n){var i=Ye();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Dc(e)?yT(t,n):(n=nm(e,t,n,i),n!==null&&(Xe(n,e,i),_T(n,t,i)))}function pT(e,t,n){var i=Ye();Ja(e,t,n,i)}function Ja(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dc(e))yT(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,We(l,a))return Rc(e,t,r,0),bt===null&&wc(),!1}catch{}finally{}if(n=nm(e,t,r,i),n!==null)return Xe(n,e,i),_T(n,t,i),!0}return!1}function Tm(e,t,n,i){if(i={lane:2,revertLane:Nm(),action:i,hasEagerState:!1,eagerState:null,next:null},Dc(e)){if(t)throw Error(L(479))}else t=nm(e,n,i,2),t!==null&&Xe(t,e,2)}function Dc(e){var t=e.alternate;return e===et||t!==null&&t===et}function yT(e,t){bs=Ou=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function _T(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,lE(e,n)}}var Mu={readContext:Ae,use:Cc,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt},vT={readContext:Ae,use:Cc,useCallback:function(e,t){return xe().memoizedState=[e,t===void 0?null:t],e},useContext:Ae,useEffect:Ey,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,ru(4194308,4,aT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ru(4194308,4,e,t)},useInsertionEffect:function(e,t){ru(4,2,e,t)},useMemo:function(e,t){var n=xe();t=t===void 0?null:t;var i=e();if(Ir){Ni(!0);try{e()}finally{Ni(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=xe();if(n!==void 0){var r=n(t);if(Ir){Ni(!0);try{n(t)}finally{Ni(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Pw.bind(null,et,e),[i.memoizedState,e]},useRef:function(e){var t=xe();return e={current:e},t.memoizedState=e},useState:function(e){e=Bf(e);var t=e.queue,n=pT.bind(null,et,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:_m,useDeferredValue:function(e,t){var n=xe();return vm(n,e,t)},useTransition:function(){var e=Bf(!1);return e=hT.bind(null,et,e.queue,!0,!1),xe().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=et,r=xe();if(ft){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),bt===null)throw Error(L(349));ut&124||QE(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Ey(YE.bind(null,i,s,e),[e]),i.flags|=2048,Us(9,Nc(),KE.bind(null,i,s,n,t),null),n},useId:function(){var e=xe(),t=bt.identifierPrefix;if(ft){var n=Gn,i=Hn;n=(i&~(1<<32-Ke(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=Vu++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=Dw++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Em,useFormState:yy,useActionState:yy,useOptimistic:function(e){var t=xe();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Tm.bind(null,et,!0,n),n.dispatch=t,[e,t]},useMemoCache:pm,useCacheRefresh:function(){return xe().memoizedState=kw.bind(null,et)}},ET={readContext:Ae,use:Cc,useCallback:lT,useContext:Ae,useEffect:iT,useImperativeHandle:oT,useInsertionEffect:rT,useLayoutEffect:sT,useMemo:uT,useReducer:iu,useRef:nT,useState:function(){return iu(ti)},useDebugValue:_m,useDeferredValue:function(e,t){var n=Yt();return cT(n,vt.memoizedState,e,t)},useTransition:function(){var e=iu(ti)[0],t=Yt().memoizedState;return[typeof e=="boolean"?e:Ko(e),t]},useSyncExternalStore:FE,useId:mT,useHostTransitionStatus:Em,useFormState:_y,useActionState:_y,useOptimistic:function(e,t){var n=Yt();return ZE(n,vt,e,t)},useMemoCache:pm,useCacheRefresh:gT},Lw={readContext:Ae,use:Cc,useCallback:lT,useContext:Ae,useEffect:iT,useImperativeHandle:oT,useInsertionEffect:rT,useLayoutEffect:sT,useMemo:uT,useReducer:jh,useRef:nT,useState:function(){return jh(ti)},useDebugValue:_m,useDeferredValue:function(e,t){var n=Yt();return vt===null?vm(n,e,t):cT(n,vt.memoizedState,e,t)},useTransition:function(){var e=jh(ti)[0],t=Yt().memoizedState;return[typeof e=="boolean"?e:Ko(e),t]},useSyncExternalStore:FE,useId:mT,useHostTransitionStatus:Em,useFormState:vy,useActionState:vy,useOptimistic:function(e,t){var n=Yt();return vt!==null?ZE(n,vt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:pm,useCacheRefresh:gT},Rs=null,vo=0;function Ul(e){var t=vo;return vo+=1,Rs===null&&(Rs=[]),zE(Rs,e,t)}function Da(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function jl(e,t){throw t.$$typeof===d1?Error(L(525)):(e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ty(e){var t=e._init;return t(e._payload)}function TT(e){function t(b,v){if(e){var R=b.deletions;R===null?(b.deletions=[v],b.flags|=16):R.push(v)}}function n(b,v){if(!e)return null;for(;v!==null;)t(b,v),v=v.sibling;return null}function i(b){for(var v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function r(b,v){return b=Xn(b,v),b.index=0,b.sibling=null,b}function s(b,v,R){return b.index=R,e?(R=b.alternate,R!==null?(R=R.index,R<v?(b.flags|=67108866,v):R):(b.flags|=67108866,v)):(b.flags|=1048576,v)}function a(b){return e&&b.alternate===null&&(b.flags|=67108866),b}function l(b,v,R,x){return v===null||v.tag!==6?(v=Ph(R,b.mode,x),v.return=b,v):(v=r(v,R),v.return=b,v)}function u(b,v,R,x){var U=R.type;return U===as?d(b,v,R.props.children,x,R.key):v!==null&&(v.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===vi&&Ty(U)===v.type)?(v=r(v,R.props),Da(v,R),v.return=b,v):(v=eu(R.type,R.key,R.props,null,b.mode,x),Da(v,R),v.return=b,v)}function h(b,v,R,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==R.containerInfo||v.stateNode.implementation!==R.implementation?(v=Lh(R,b.mode,x),v.return=b,v):(v=r(v,R.children||[]),v.return=b,v)}function d(b,v,R,x,U){return v===null||v.tag!==7?(v=vr(R,b.mode,x,U),v.return=b,v):(v=r(v,R),v.return=b,v)}function g(b,v,R){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=Ph(""+v,b.mode,R),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case xl:return R=eu(v.type,v.key,v.props,null,b.mode,R),Da(R,v),R.return=b,R;case Ma:return v=Lh(v,b.mode,R),v.return=b,v;case vi:var x=v._init;return v=x(v._payload),g(b,v,R)}if(ka(v)||Ra(v))return v=vr(v,b.mode,R,null),v.return=b,v;if(typeof v.then=="function")return g(b,Ul(v),R);if(v.$$typeof===qn)return g(b,Pl(b,v),R);jl(b,v)}return null}function m(b,v,R,x){var U=v!==null?v.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return U!==null?null:l(b,v,""+R,x);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case xl:return R.key===U?u(b,v,R,x):null;case Ma:return R.key===U?h(b,v,R,x):null;case vi:return U=R._init,R=U(R._payload),m(b,v,R,x)}if(ka(R)||Ra(R))return U!==null?null:d(b,v,R,x,null);if(typeof R.then=="function")return m(b,v,Ul(R),x);if(R.$$typeof===qn)return m(b,v,Pl(b,R),x);jl(b,R)}return null}function y(b,v,R,x,U){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return b=b.get(R)||null,l(v,b,""+x,U);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case xl:return b=b.get(x.key===null?R:x.key)||null,u(v,b,x,U);case Ma:return b=b.get(x.key===null?R:x.key)||null,h(v,b,x,U);case vi:var q=x._init;return x=q(x._payload),y(b,v,R,x,U)}if(ka(x)||Ra(x))return b=b.get(R)||null,d(v,b,x,U,null);if(typeof x.then=="function")return y(b,v,R,Ul(x),U);if(x.$$typeof===qn)return y(b,v,R,Pl(v,x),U);jl(v,x)}return null}function D(b,v,R,x){for(var U=null,q=null,E=v,_=v=0,T=null;E!==null&&_<R.length;_++){E.index>_?(T=E,E=null):T=E.sibling;var S=m(b,E,R[_],x);if(S===null){E===null&&(E=T);break}e&&E&&S.alternate===null&&t(b,E),v=s(S,v,_),q===null?U=S:q.sibling=S,q=S,E=T}if(_===R.length)return n(b,E),ft&&mr(b,_),U;if(E===null){for(;_<R.length;_++)E=g(b,R[_],x),E!==null&&(v=s(E,v,_),q===null?U=E:q.sibling=E,q=E);return ft&&mr(b,_),U}for(E=i(E);_<R.length;_++)T=y(E,b,_,R[_],x),T!==null&&(e&&T.alternate!==null&&E.delete(T.key===null?_:T.key),v=s(T,v,_),q===null?U=T:q.sibling=T,q=T);return e&&E.forEach(function(I){return t(b,I)}),ft&&mr(b,_),U}function V(b,v,R,x){if(R==null)throw Error(L(151));for(var U=null,q=null,E=v,_=v=0,T=null,S=R.next();E!==null&&!S.done;_++,S=R.next()){E.index>_?(T=E,E=null):T=E.sibling;var I=m(b,E,S.value,x);if(I===null){E===null&&(E=T);break}e&&E&&I.alternate===null&&t(b,E),v=s(I,v,_),q===null?U=I:q.sibling=I,q=I,E=T}if(S.done)return n(b,E),ft&&mr(b,_),U;if(E===null){for(;!S.done;_++,S=R.next())S=g(b,S.value,x),S!==null&&(v=s(S,v,_),q===null?U=S:q.sibling=S,q=S);return ft&&mr(b,_),U}for(E=i(E);!S.done;_++,S=R.next())S=y(E,b,_,S.value,x),S!==null&&(e&&S.alternate!==null&&E.delete(S.key===null?_:S.key),v=s(S,v,_),q===null?U=S:q.sibling=S,q=S);return e&&E.forEach(function(C){return t(b,C)}),ft&&mr(b,_),U}function M(b,v,R,x){if(typeof R=="object"&&R!==null&&R.type===as&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case xl:t:{for(var U=R.key;v!==null;){if(v.key===U){if(U=R.type,U===as){if(v.tag===7){n(b,v.sibling),x=r(v,R.props.children),x.return=b,b=x;break t}}else if(v.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===vi&&Ty(U)===v.type){n(b,v.sibling),x=r(v,R.props),Da(x,R),x.return=b,b=x;break t}n(b,v);break}else t(b,v);v=v.sibling}R.type===as?(x=vr(R.props.children,b.mode,x,R.key),x.return=b,b=x):(x=eu(R.type,R.key,R.props,null,b.mode,x),Da(x,R),x.return=b,b=x)}return a(b);case Ma:t:{for(U=R.key;v!==null;){if(v.key===U)if(v.tag===4&&v.stateNode.containerInfo===R.containerInfo&&v.stateNode.implementation===R.implementation){n(b,v.sibling),x=r(v,R.children||[]),x.return=b,b=x;break t}else{n(b,v);break}else t(b,v);v=v.sibling}x=Lh(R,b.mode,x),x.return=b,b=x}return a(b);case vi:return U=R._init,R=U(R._payload),M(b,v,R,x)}if(ka(R))return D(b,v,R,x);if(Ra(R)){if(U=Ra(R),typeof U!="function")throw Error(L(150));return R=U.call(R),V(b,v,R,x)}if(typeof R.then=="function")return M(b,v,Ul(R),x);if(R.$$typeof===qn)return M(b,v,Pl(b,R),x);jl(b,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,v!==null&&v.tag===6?(n(b,v.sibling),x=r(v,R),x.return=b,b=x):(n(b,v),x=Ph(R,b.mode,x),x.return=b,b=x),a(b)):n(b,v)}return function(b,v,R,x){try{vo=0;var U=M(b,v,R,x);return Rs=null,U}catch(E){if(E===Qo||E===Ic)throw E;var q=He(29,E,null,b.mode);return q.lanes=x,q.return=b,q}finally{}}}var js=TT(!0),AT=TT(!1),un=Mn(null),In=null;function Ai(e){var t=e.alternate;xt($t,$t.current&1),xt(un,e),In===null&&(t===null||Ls.current!==null||t.memoizedState!==null)&&(In=e)}function ST(e){if(e.tag===22){if(xt($t,$t.current),xt(un,e),In===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(In=e)}}else Si()}function Si(){xt($t,$t.current),xt(un,un.current)}function Qn(e){re(un),In===e&&(In=null),re($t)}var $t=Mn(0);function ku(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||ad(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function zh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Ct({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Gf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ye(),r=ki(i);r.payload=t,n!=null&&(r.callback=n),t=Pi(e,r,i),t!==null&&(Xe(t,e,i),$a(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ye(),r=ki(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Pi(e,r,i),t!==null&&(Xe(t,e,i),$a(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ye(),i=ki(n);i.tag=2,t!=null&&(i.callback=t),t=Pi(e,i,n),t!==null&&(Xe(t,e,n),$a(t,e,n))}};function Ay(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!po(n,i)||!po(r,s):!0}function Sy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Gf.enqueueReplaceState(t,t.state,null)}function Cr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Ct({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var Pu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function bT(e){Pu(e)}function wT(e){console.error(e)}function RT(e){Pu(e)}function Lu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function by(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ff(e,t,n){return n=ki(n),n.tag=3,n.payload={element:null},n.callback=function(){Lu(e,t)},n}function IT(e){return e=ki(e),e.tag=3,e}function CT(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){by(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){by(t,n,i),typeof r!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Uw(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Go(t,n,r,!0),n=un.current,n!==null){switch(n.tag){case 13:return In===null?Jf():n.alternate===null&&jt===0&&(jt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Lf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Zh(e,i,r)),!1;case 22:return n.flags|=65536,i===Lf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Zh(e,i,r)),!1}throw Error(L(435,n.tag))}return Zh(e,i,r),Jf(),!1}if(ft)return t=un.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==Of&&(e=Error(L(422),{cause:i}),yo(an(e,n)))):(i!==Of&&(t=Error(L(423),{cause:i}),yo(an(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=an(i,n),r=Ff(e.stateNode,i,r),Uh(e,r),jt!==4&&(jt=2)),!1;var s=Error(L(520),{cause:i});if(s=an(s,n),no===null?no=[s]:no.push(s),jt!==4&&(jt=2),t===null)return!0;i=an(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Ff(n.stateNode,i,e),Uh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Li===null||!Li.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=IT(r),CT(r,e,n,i),Uh(n,r),!1}n=n.return}while(n!==null);return!1}var NT=Error(L(461)),ie=!1;function oe(e,t,n,i){t.child=e===null?AT(t,null,n,i):js(t,e.child,n,i)}function wy(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Rr(t),i=hm(e,t,n,a,s,r),l=fm(),e!==null&&!ie?(dm(e,t,r),ei(e,t,r)):(ft&&l&&rm(t),t.flags|=1,oe(e,t,i,r),t.child)}function Ry(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!im(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,DT(e,t,s,i,r)):(e=eu(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Am(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:po,n(a,i)&&e.ref===t.ref)return ei(e,t,r)}return t.flags|=1,e=Xn(s,i),e.ref=t.ref,e.return=t,t.child=e}function DT(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(po(s,i)&&e.ref===t.ref)if(ie=!1,t.pendingProps=i=s,Am(e,r))e.flags&131072&&(ie=!0);else return t.lanes=e.lanes,ei(e,t,r)}return Qf(e,t,n,i,r)}function xT(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return Iy(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&nu(t,s!==null?s.cachePool:null),s!==null?my(t,s):zf(),ST(t);else return t.lanes=t.childLanes=536870912,Iy(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(nu(t,s.cachePool),my(t,s),Si(),t.memoizedState=null):(e!==null&&nu(t,null),zf(),Si());return oe(e,t,r,n),t.child}function Iy(e,t,n,i){var r=om();return r=r===null?null:{parent:Xt._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&nu(t,null),zf(),ST(t),e!==null&&Go(e,t,i,!0),null}function su(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(L(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Qf(e,t,n,i,r){return Rr(t),n=hm(e,t,n,i,void 0,r),i=fm(),e!==null&&!ie?(dm(e,t,r),ei(e,t,r)):(ft&&i&&rm(t),t.flags|=1,oe(e,t,n,r),t.child)}function Cy(e,t,n,i,r,s){return Rr(t),t.updateQueue=null,n=GE(t,i,n,r),HE(e),i=fm(),e!==null&&!ie?(dm(e,t,s),ei(e,t,s)):(ft&&i&&rm(t),t.flags|=1,oe(e,t,n,s),t.child)}function Ny(e,t,n,i,r){if(Rr(t),t.stateNode===null){var s=ms,a=n.contextType;typeof a=="object"&&a!==null&&(s=Ae(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Gf,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},lm(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?Ae(a):ms,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(zh(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Gf.enqueueReplaceState(s,s.state,null),Wa(t,i,s,r),Za(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=Cr(n,l);s.props=u;var h=s.context,d=n.contextType;a=ms,typeof d=="object"&&d!==null&&(a=Ae(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&Sy(t,s,i,a),Ei=!1;var m=t.memoizedState;s.state=m,Wa(t,i,s,r),Za(),h=t.memoizedState,l||m!==h||Ei?(typeof g=="function"&&(zh(t,n,g,i),h=t.memoizedState),(u=Ei||Ay(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Uf(e,t),a=t.memoizedProps,d=Cr(n,a),s.props=d,g=t.pendingProps,m=s.context,h=n.contextType,u=ms,typeof h=="object"&&h!==null&&(u=Ae(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==g||m!==u)&&Sy(t,s,i,u),Ei=!1,m=t.memoizedState,s.state=m,Wa(t,i,s,r),Za();var y=t.memoizedState;a!==g||m!==y||Ei||e!==null&&e.dependencies!==null&&Du(e.dependencies)?(typeof l=="function"&&(zh(t,n,l,i),y=t.memoizedState),(d=Ei||Ay(t,n,d,i,m,y,u)||e!==null&&e.dependencies!==null&&Du(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,y,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,y,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=y),s.props=i,s.state=y,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,su(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=js(t,e.child,null,r),t.child=js(t,null,n,r)):oe(e,t,n,r),t.memoizedState=s.state,e=t.child):e=ei(e,t,r),e}function Dy(e,t,n,i){return Ho(),t.flags|=256,oe(e,t,n,i),t.child}var Bh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qh(e){return{baseLanes:e,cachePool:UE()}}function Hh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=ln),e}function OT(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:($t.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(ft){if(r?Ai(t):Si(),ft){var l=Ut,u;if(u=l){t:{for(u=l,l=Sn;u.nodeType!==8;){if(!l){l=null;break t}if(u=yn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Er!==null?{id:Hn,overflow:Gn}:null,retryLane:536870912,hydrationErrors:null},u=He(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Re=t,Ut=null,u=!0):u=!1}u||wr(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return ad(l)?t.lanes=32:t.lanes=536870912,null;Qn(t)}return l=i.children,i=i.fallback,r?(Si(),r=t.mode,l=Uu({mode:"hidden",children:l},r),i=vr(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=qh(n),r.childLanes=Hh(e,a,n),t.memoizedState=Bh,i):(Ai(t),Kf(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(Ai(t),t.flags&=-257,t=Gh(e,t,n)):t.memoizedState!==null?(Si(),t.child=e.child,t.flags|=128,t=null):(Si(),r=i.fallback,l=t.mode,i=Uu({mode:"visible",children:i.children},l),r=vr(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,js(t,e.child,null,n),i=t.child,i.memoizedState=qh(n),i.childLanes=Hh(e,a,n),t.memoizedState=Bh,t=r);else if(Ai(t),ad(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(L(419)),i.stack="",i.digest=a,yo({value:i,source:null,stack:null}),t=Gh(e,t,n)}else if(ie||Go(e,t,n,!1),a=(n&e.childLanes)!==0,ie||a){if(a=bt,a!==null&&(i=n&-n,i=i&42?1:Qd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,ea(e,i),Xe(a,e,i),NT;l.data==="$?"||Jf(),t=Gh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Ut=yn(l.nextSibling),Re=t,ft=!0,Tr=null,Sn=!1,e!==null&&(nn[rn++]=Hn,nn[rn++]=Gn,nn[rn++]=Er,Hn=e.id,Gn=e.overflow,Er=t),t=Kf(t,i.children),t.flags|=4096);return t}return r?(Si(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=Xn(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=Xn(h,r):(r=vr(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=qh(n):(u=l.cachePool,u!==null?(h=Xt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=UE(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=Hh(e,a,n),t.memoizedState=Bh,i):(Ai(t),n=e.child,e=n.sibling,n=Xn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Kf(e,t){return t=Uu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Uu(e,t){return e=He(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Gh(e,t,n){return js(t,e.child,null,n),e=Kf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Mf(e.return,t,n)}function Fh(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function VT(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(oe(e,t,i.children,n),i=$t.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xy(e,n,t);else if(e.tag===19)xy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(xt($t,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&ku(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Fh(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&ku(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Fh(t,!0,n,null,s);break;case"together":Fh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ei(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$i|=t.lanes,!(n&t.childLanes))if(e!==null){if(Go(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=Xn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Xn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Am(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Du(e)))}function jw(e,t,n){switch(t.tag){case 3:Au(t,t.stateNode.containerInfo),Ti(t,Xt,e.memoizedState.cache),Ho();break;case 27:case 5:Af(t);break;case 4:Au(t,t.stateNode.containerInfo);break;case 10:Ti(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ai(t),t.flags|=128,null):n&t.child.childLanes?OT(e,t,n):(Ai(t),e=ei(e,t,n),e!==null?e.sibling:null);Ai(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Go(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return VT(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),xt($t,$t.current),i)break;return null;case 22:case 23:return t.lanes=0,xT(e,t,n);case 24:Ti(t,Xt,e.memoizedState.cache)}return ei(e,t,n)}function MT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ie=!0;else{if(!Am(e,n)&&!(t.flags&128))return ie=!1,jw(e,t,n);ie=!!(e.flags&131072)}else ie=!1,ft&&t.flags&1048576&&PE(t,Nu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")im(i)?(e=Cr(i,e),t.tag=1,t=Ny(null,t,i,e,n)):(t.tag=0,t=Qf(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===Hd){t.tag=11,t=wy(null,t,i,e,n);break t}else if(r===Gd){t.tag=14,t=Ry(null,t,i,e,n);break t}}throw t=Ef(i)||i,Error(L(306,t,""))}}return t;case 0:return Qf(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Cr(i,t.pendingProps),Ny(e,t,i,r,n);case 3:t:{if(Au(t,t.stateNode.containerInfo),e===null)throw Error(L(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,Uf(e,t),Wa(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Ti(t,Xt,i),i!==s.cache&&kf(t,[Xt],n,!0),Za(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Dy(e,t,i,n);break t}else if(i!==r){r=an(Error(L(424)),t),yo(r),t=Dy(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ut=yn(e.firstChild),Re=t,ft=!0,Tr=null,Sn=!0,n=AT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ho(),i===r){t=ei(e,t,n);break t}oe(e,t,i,n)}t=t.child}return t;case 26:return su(e,t),e===null?(n=Yy(t.type,null,t.pendingProps,null))?t.memoizedState=n:ft||(n=t.type,e=t.pendingProps,i=Fu(Mi.current).createElement(n),i[Te]=t,i[ke]=e,fe(i,n,e),ee(i),t.stateNode=i):t.memoizedState=Yy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Af(t),e===null&&ft&&(i=t.stateNode=E0(t.type,t.pendingProps,Mi.current),Re=t,Sn=!0,r=Ut,rr(t.type)?(od=r,Ut=yn(i.firstChild)):Ut=r),oe(e,t,t.pendingProps.children,n),su(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ft&&((r=i=Ut)&&(i=dR(i,t.type,t.pendingProps,Sn),i!==null?(t.stateNode=i,Re=t,Ut=yn(i.firstChild),Sn=!1,r=!0):r=!1),r||wr(t)),Af(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,rd(r,s)?i=null:a!==null&&rd(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=hm(e,t,xw,null,null,n),So._currentValue=r),su(e,t),oe(e,t,i,n),t.child;case 6:return e===null&&ft&&((e=n=Ut)&&(n=mR(n,t.pendingProps,Sn),n!==null?(t.stateNode=n,Re=t,Ut=null,e=!0):e=!1),e||wr(t)),null;case 13:return OT(e,t,n);case 4:return Au(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=js(t,null,i,n):oe(e,t,i,n),t.child;case 11:return wy(e,t,t.type,t.pendingProps,n);case 7:return oe(e,t,t.pendingProps,n),t.child;case 8:return oe(e,t,t.pendingProps.children,n),t.child;case 12:return oe(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Ti(t,t.type,i.value),oe(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Rr(t),r=Ae(r),i=i(r),t.flags|=1,oe(e,t,i,n),t.child;case 14:return Ry(e,t,t.type,t.pendingProps,n);case 15:return DT(e,t,t.type,t.pendingProps,n);case 19:return VT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Uu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Xn(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return xT(e,t,n);case 24:return Rr(t),i=Ae(Xt),e===null?(r=om(),r===null&&(r=bt,s=am(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},lm(t),Ti(t,Xt,r)):(e.lanes&n&&(Uf(e,t),Wa(t,null,null,n),Za()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Ti(t,Xt,i)):(i=s.cache,Ti(t,Xt,i),i!==r.cache&&kf(t,[Xt],n,!0))),oe(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(L(156,t.tag))}function jn(e){e.flags|=4}function Oy(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!S0(t)){if(t=un.current,t!==null&&((ut&4194048)===ut?In!==null:(ut&62914560)!==ut&&!(ut&536870912)||t!==In))throw Xa=Lf,jE;e.flags|=8192}}function zl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?aE():536870912,e.lanes|=t,zs|=t)}function xa(e,t){if(!ft)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function zw(e,t,n){var i=t.pendingProps;switch(sm(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(t),null;case 1:return Vt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),$n(Xt),Vs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Na(t)?jn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ly())),Vt(t),null;case 26:return n=t.memoizedState,e===null?(jn(t),n!==null?(Vt(t),Oy(t,n)):(Vt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(jn(t),Vt(t),Oy(t,n)):(Vt(t),t.flags&=-16777217):(e.memoizedProps!==i&&jn(t),Vt(t),t.flags&=-16777217),null;case 27:Su(t),n=Mi.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&jn(t);else{if(!i){if(t.stateNode===null)throw Error(L(166));return Vt(t),null}e=wn.current,Na(t)?ay(t):(e=E0(r,i,n),t.stateNode=e,jn(t))}return Vt(t),null;case 5:if(Su(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&jn(t);else{if(!i){if(t.stateNode===null)throw Error(L(166));return Vt(t),null}if(e=wn.current,Na(t))ay(t);else{switch(r=Fu(Mi.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Te]=t,e[ke]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(fe(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&jn(t)}}return Vt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&jn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(L(166));if(e=Mi.current,Na(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Re,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Te]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||y0(e.nodeValue,n)),e||wr(t)}else e=Fu(e).createTextNode(i),e[Te]=t,t.stateNode=e}return Vt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Na(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(L(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(L(317));r[Te]=t}else Ho(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vt(t),r=!1}else r=ly(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Qn(t),t):(Qn(t),null)}if(Qn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),zl(t,t.updateQueue),Vt(t),null;case 4:return Vs(),e===null&&Dm(t.stateNode.containerInfo),Vt(t),null;case 10:return $n(t.type),Vt(t),null;case 19:if(re($t),r=t.memoizedState,r===null)return Vt(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)xa(r,!1);else{if(jt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=ku(e),s!==null){for(t.flags|=128,xa(r,!1),e=s.updateQueue,t.updateQueue=e,zl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)kE(n,e),n=n.sibling;return xt($t,$t.current&1|2),t.child}e=e.sibling}r.tail!==null&&Rn()>zu&&(t.flags|=128,i=!0,xa(r,!1),t.lanes=4194304)}else{if(!i)if(e=ku(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,zl(t,e),xa(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!ft)return Vt(t),null}else 2*Rn()-r.renderingStartTime>zu&&n!==536870912&&(t.flags|=128,i=!0,xa(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Rn(),t.sibling=null,e=$t.current,xt($t,i?e&1|2:e&1),t):(Vt(t),null);case 22:case 23:return Qn(t),um(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Vt(t),t.subtreeFlags&6&&(t.flags|=8192)):Vt(t),n=t.updateQueue,n!==null&&zl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&re(Ar),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),$n(Xt),Vt(t),null;case 25:return null;case 30:return null}throw Error(L(156,t.tag))}function Bw(e,t){switch(sm(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $n(Xt),Vs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Su(t),null;case 13:if(Qn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));Ho()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return re($t),null;case 4:return Vs(),null;case 10:return $n(t.type),null;case 22:case 23:return Qn(t),um(),e!==null&&re(Ar),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return $n(Xt),null;case 25:return null;default:return null}}function kT(e,t){switch(sm(t),t.tag){case 3:$n(Xt),Vs();break;case 26:case 27:case 5:Su(t);break;case 4:Vs();break;case 13:Qn(t);break;case 19:re($t);break;case 10:$n(t.type);break;case 22:case 23:Qn(t),um(),e!==null&&re(Ar);break;case 24:$n(Xt)}}function Xo(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){At(t,t.return,l)}}function Xi(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){At(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){At(t,t.return,d)}}function PT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{qE(t,n)}catch(i){At(e,e.return,i)}}}function LT(e,t,n){n.props=Cr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){At(e,t,i)}}function to(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){At(e,t,r)}}function bn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){At(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){At(e,t,r)}else n.current=null}function UT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){At(e,e.return,r)}}function Qh(e,t,n){try{var i=e.stateNode;lR(i,e.type,n,t),i[ke]=t}catch(r){At(e,e.return,r)}}function jT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&rr(e.type)||e.tag===4}function Kh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||jT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&rr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Mc));else if(i!==4&&(i===27&&rr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Yf(e,t,n),e=e.sibling;e!==null;)Yf(e,t,n),e=e.sibling}function ju(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&rr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(ju(e,t,n),e=e.sibling;e!==null;)ju(e,t,n),e=e.sibling}function zT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);fe(t,i,n),t[Te]=e,t[ke]=n}catch(s){At(e,e.return,s)}}var Bn=!1,Bt=!1,Yh=!1,Vy=typeof WeakSet=="function"?WeakSet:Set,te=null;function qw(e,t){if(e=e.containerInfo,nd=Xu,e=IE(e),tm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var y;g!==n||r!==0&&g.nodeType!==3||(l=a+r),g!==s||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(y=g.firstChild)!==null;)m=g,g=y;for(;;){if(g===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(y=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(id={focusedElem:e,selectionRange:n},Xu=!1,te=t;te!==null;)if(t=te,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,te=e;else for(;te!==null;){switch(t=te,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var D=Cr(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(D,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(V){At(n,n.return,V)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)sd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":sd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(L(163))}if(e=t.sibling,e!==null){e.return=t.return,te=e;break}te=t.return}}function BT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:pi(e,n),i&4&&Xo(5,n);break;case 1:if(pi(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){At(n,n.return,a)}else{var r=Cr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){At(n,n.return,a)}}i&64&&PT(n),i&512&&to(n,n.return);break;case 3:if(pi(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{qE(e,t)}catch(a){At(n,n.return,a)}}break;case 27:t===null&&i&4&&zT(n);case 26:case 5:pi(e,n),t===null&&i&4&&UT(n),i&512&&to(n,n.return);break;case 12:pi(e,n);break;case 13:pi(e,n),i&4&&GT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Zw.bind(null,n),gR(e,n))));break;case 22:if(i=n.memoizedState!==null||Bn,!i){t=t!==null&&t.memoizedState!==null||Bt,r=Bn;var s=Bt;Bn=i,(Bt=t)&&!s?_i(e,n,(n.subtreeFlags&8772)!==0):pi(e,n),Bn=r,Bt=s}break;case 30:break;default:pi(e,n)}}function qT(e){var t=e.alternate;t!==null&&(e.alternate=null,qT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Yd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Nt=null,Oe=!1;function zn(e,t,n){for(n=n.child;n!==null;)HT(e,t,n),n=n.sibling}function HT(e,t,n){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(Uo,n)}catch{}switch(n.tag){case 26:Bt||bn(n,t),zn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Bt||bn(n,t);var i=Nt,r=Oe;rr(n.type)&&(Nt=n.stateNode,Oe=!1),zn(e,t,n),ro(n.stateNode),Nt=i,Oe=r;break;case 5:Bt||bn(n,t);case 6:if(i=Nt,r=Oe,Nt=null,zn(e,t,n),Nt=i,Oe=r,Nt!==null)if(Oe)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(n.stateNode)}catch(s){At(n,t,s)}else try{Nt.removeChild(n.stateNode)}catch(s){At(n,t,s)}break;case 18:Nt!==null&&(Oe?(e=Nt,Fy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Ro(e)):Fy(Nt,n.stateNode));break;case 4:i=Nt,r=Oe,Nt=n.stateNode.containerInfo,Oe=!0,zn(e,t,n),Nt=i,Oe=r;break;case 0:case 11:case 14:case 15:Bt||Xi(2,n,t),Bt||Xi(4,n,t),zn(e,t,n);break;case 1:Bt||(bn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&LT(n,t,i)),zn(e,t,n);break;case 21:zn(e,t,n);break;case 22:Bt=(i=Bt)||n.memoizedState!==null,zn(e,t,n),Bt=i;break;default:zn(e,t,n)}}function GT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ro(e)}catch(n){At(t,t.return,n)}}function Hw(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Vy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Vy),t;default:throw Error(L(435,e.tag))}}function Xh(e,t){var n=Hw(e);t.forEach(function(i){var r=Ww.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function je(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(rr(l.type)){Nt=l.stateNode,Oe=!1;break t}break;case 5:Nt=l.stateNode,Oe=!1;break t;case 3:case 4:Nt=l.stateNode.containerInfo,Oe=!0;break t}l=l.return}if(Nt===null)throw Error(L(160));HT(s,a,r),Nt=null,Oe=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)FT(t,e),t=t.sibling}var mn=null;function FT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:je(t,e),ze(e),i&4&&(Xi(3,e,e.return),Xo(3,e),Xi(5,e,e.return));break;case 1:je(t,e),ze(e),i&512&&(Bt||n===null||bn(n,n.return)),i&64&&Bn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=mn;if(je(t,e),ze(e),i&512&&(Bt||n===null||bn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Bo]||s[Te]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),fe(s,i,n),s[Te]=e,ee(s),i=s;break t;case"link":var a=$y("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),fe(s,i,n),r.head.appendChild(s);break;case"meta":if(a=$y("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),fe(s,i,n),r.head.appendChild(s);break;default:throw Error(L(468,i))}s[Te]=e,ee(s),i=s}e.stateNode=i}else Zy(r,e.type,e.stateNode);else e.stateNode=Xy(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?Zy(r,e.type,e.stateNode):Xy(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Qh(e,e.memoizedProps,n.memoizedProps)}break;case 27:je(t,e),ze(e),i&512&&(Bt||n===null||bn(n,n.return)),n!==null&&i&4&&Qh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(je(t,e),ze(e),i&512&&(Bt||n===null||bn(n,n.return)),e.flags&32){r=e.stateNode;try{ks(r,"")}catch(y){At(e,e.return,y)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,Qh(e,r,n!==null?n.memoizedProps:r)),i&1024&&(Yh=!0);break;case 6:if(je(t,e),ze(e),i&4){if(e.stateNode===null)throw Error(L(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(y){At(e,e.return,y)}}break;case 3:if(lu=null,r=mn,mn=Qu(t.containerInfo),je(t,e),mn=r,ze(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ro(t.containerInfo)}catch(y){At(e,e.return,y)}Yh&&(Yh=!1,QT(e));break;case 4:i=mn,mn=Qu(e.stateNode.containerInfo),je(t,e),ze(e),mn=i;break;case 12:je(t,e),ze(e);break;case 13:je(t,e),ze(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Im=Rn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Xh(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Bn,d=Bt;if(Bn=h||r,Bt=d||u,je(t,e),Bt=d,Bn=h,ze(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||Bn||Bt||gr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(y){At(u,u.return,y)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(y){At(u,u.return,y)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Xh(e,n))));break;case 19:je(t,e),ze(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Xh(e,i)));break;case 30:break;case 21:break;default:je(t,e),ze(e)}}function ze(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(jT(i)){n=i;break}i=i.return}if(n==null)throw Error(L(160));switch(n.tag){case 27:var r=n.stateNode,s=Kh(e);ju(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(ks(a,""),n.flags&=-33);var l=Kh(e);ju(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Kh(e);Yf(e,h,u);break;default:throw Error(L(161))}}catch(d){At(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function QT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;QT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function pi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)BT(e,t.alternate,t),t=t.sibling}function gr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Xi(4,t,t.return),gr(t);break;case 1:bn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&LT(t,t.return,n),gr(t);break;case 27:ro(t.stateNode);case 26:case 5:bn(t,t.return),gr(t);break;case 22:t.memoizedState===null&&gr(t);break;case 30:gr(t);break;default:gr(t)}e=e.sibling}}function _i(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:_i(r,s,n),Xo(4,s);break;case 1:if(_i(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){At(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)BE(u[r],l)}catch(h){At(i,i.return,h)}}n&&a&64&&PT(s),to(s,s.return);break;case 27:zT(s);case 26:case 5:_i(r,s,n),n&&i===null&&a&4&&UT(s),to(s,s.return);break;case 12:_i(r,s,n);break;case 13:_i(r,s,n),n&&a&4&&GT(r,s);break;case 22:s.memoizedState===null&&_i(r,s,n),to(s,s.return);break;case 30:break;default:_i(r,s,n)}t=t.sibling}}function Sm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Fo(n))}function bm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Fo(e))}function Tn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)KT(e,t,n,i),t=t.sibling}function KT(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Tn(e,t,n,i),r&2048&&Xo(9,t);break;case 1:Tn(e,t,n,i);break;case 3:Tn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Fo(e)));break;case 12:if(r&2048){Tn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){At(t,t.return,u)}}else Tn(e,t,n,i);break;case 13:Tn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?Tn(e,t,n,i):eo(e,t):s._visibility&2?Tn(e,t,n,i):(s._visibility|=2,ts(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&Sm(a,t);break;case 24:Tn(e,t,n,i),r&2048&&bm(t.alternate,t);break;default:Tn(e,t,n,i)}}function ts(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:ts(s,a,l,u,r),Xo(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?ts(s,a,l,u,r):eo(s,a):(d._visibility|=2,ts(s,a,l,u,r)),r&&h&2048&&Sm(a.alternate,a);break;case 24:ts(s,a,l,u,r),r&&h&2048&&bm(a.alternate,a);break;default:ts(s,a,l,u,r)}t=t.sibling}}function eo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:eo(n,i),r&2048&&Sm(i.alternate,i);break;case 24:eo(n,i),r&2048&&bm(i.alternate,i);break;default:eo(n,i)}t=t.sibling}}var La=8192;function $r(e){if(e.subtreeFlags&La)for(e=e.child;e!==null;)YT(e),e=e.sibling}function YT(e){switch(e.tag){case 26:$r(e),e.flags&La&&e.memoizedState!==null&&CR(mn,e.memoizedState,e.memoizedProps);break;case 5:$r(e);break;case 3:case 4:var t=mn;mn=Qu(e.stateNode.containerInfo),$r(e),mn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=La,La=16777216,$r(e),La=t):$r(e));break;default:$r(e)}}function XT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Oa(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];te=i,ZT(i,e)}XT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$T(e),e=e.sibling}function $T(e){switch(e.tag){case 0:case 11:case 15:Oa(e),e.flags&2048&&Xi(9,e,e.return);break;case 3:Oa(e);break;case 12:Oa(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,au(e)):Oa(e);break;default:Oa(e)}}function au(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];te=i,ZT(i,e)}XT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Xi(8,t,t.return),au(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,au(t));break;default:au(t)}e=e.sibling}}function ZT(e,t){for(;te!==null;){var n=te;switch(n.tag){case 0:case 11:case 15:Xi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Fo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,te=i;else t:for(n=e;te!==null;){i=te;var r=i.sibling,s=i.return;if(qT(i),i===n){te=null;break t}if(r!==null){r.return=s,te=r;break t}te=s}}}var Gw={getCacheForType:function(e){var t=Ae(Xt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Fw=typeof WeakMap=="function"?WeakMap:Map,yt=0,bt=null,rt=null,ut=0,pt=0,Be=null,xi=!1,na=!1,wm=!1,ni=0,jt=0,$i=0,Sr=0,Rm=0,ln=0,zs=0,no=null,Ve=null,Xf=!1,Im=0,zu=1/0,Bu=null,Li=null,ue=0,Ui=null,Bs=null,Is=0,$f=0,Zf=null,WT=null,io=0,Wf=null;function Ye(){if(yt&2&&ut!==0)return ut&-ut;if($.T!==null){var e=Ps;return e!==0?e:Nm()}return uE()}function JT(){ln===0&&(ln=!(ut&536870912)||ft?sE():536870912);var e=un.current;return e!==null&&(e.flags|=32),ln}function Xe(e,t,n){(e===bt&&(pt===2||pt===9)||e.cancelPendingCommit!==null)&&(qs(e,0),Oi(e,ut,ln,!1)),zo(e,n),(!(yt&2)||e!==bt)&&(e===bt&&(!(yt&2)&&(Sr|=n),jt===4&&Oi(e,ut,ln,!1)),kn(e))}function t0(e,t,n){if(yt&6)throw Error(L(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||jo(e,t),r=i?Yw(e,t):$h(e,t,!0),s=i;do{if(r===0){na&&!i&&Oi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Qw(n)){r=$h(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=no;var u=l.current.memoizedState.isDehydrated;if(u&&(qs(l,a).flags|=256),a=$h(l,a,!1),a!==2){if(wm&&!u){l.errorRecoveryDisabledLanes|=s,Sr|=s,r=4;break t}s=Ve,Ve=r,s!==null&&(Ve===null?Ve=s:Ve.push.apply(Ve,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){qs(e,0),Oi(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(L(345));case 4:if((t&4194048)!==t)break;case 6:Oi(i,t,ln,!xi);break t;case 2:Ve=null;break;case 3:case 5:break;default:throw Error(L(329))}if((t&62914560)===t&&(r=Im+300-Rn(),10<r)){if(Oi(i,t,ln,!xi),Tc(i,0,!0)!==0)break t;i.timeoutHandle=v0(My.bind(null,i,n,Ve,Bu,Xf,t,ln,Sr,zs,xi,s,2,-0,0),r);break t}My(i,n,Ve,Bu,Xf,t,ln,Sr,zs,xi,s,0,-0,0)}}break}while(!0);kn(e)}function My(e,t,n,i,r,s,a,l,u,h,d,g,m,y){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(Ao={stylesheets:null,count:0,unsuspend:IR},YT(t),g=NR(),g!==null)){e.cancelPendingCommit=g(Py.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,y)),Oi(e,s,a,!h);return}Py(e,t,s,n,i,r,a,l,u)}function Qw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!We(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Oi(e,t,n,i){t&=~Rm,t&=~Sr,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-Ke(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&oE(e,n,t)}function xc(){return yt&6?!0:($o(0),!1)}function Cm(){if(rt!==null){if(pt===0)var e=rt.return;else e=rt,Fn=jr=null,mm(e),Rs=null,vo=0,e=rt;for(;e!==null;)kT(e.alternate,e),e=e.return;rt=null}}function qs(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,cR(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Cm(),bt=e,rt=n=Xn(e.current,null),ut=t,pt=0,Be=null,xi=!1,na=jo(e,t),wm=!1,zs=ln=Rm=Sr=$i=jt=0,Ve=no=null,Xf=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-Ke(i),s=1<<r;t|=e[r],i&=~s}return ni=t,wc(),n}function e0(e,t){et=null,$.H=Mu,t===Qo||t===Ic?(t=fy(),pt=3):t===jE?(t=fy(),pt=4):pt=t===NT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Be=t,rt===null&&(jt=1,Lu(e,an(t,e.current)))}function n0(){var e=$.H;return $.H=Mu,e===null?Mu:e}function i0(){var e=$.A;return $.A=Gw,e}function Jf(){jt=4,xi||(ut&4194048)!==ut&&un.current!==null||(na=!0),!($i&134217727)&&!(Sr&134217727)||bt===null||Oi(bt,ut,ln,!1)}function $h(e,t,n){var i=yt;yt|=2;var r=n0(),s=i0();(bt!==e||ut!==t)&&(Bu=null,qs(e,t)),t=!1;var a=jt;t:do try{if(pt!==0&&rt!==null){var l=rt,u=Be;switch(pt){case 8:Cm(),a=6;break t;case 3:case 2:case 9:case 6:un.current===null&&(t=!0);var h=pt;if(pt=0,Be=null,ys(e,l,u,h),n&&na){a=0;break t}break;default:h=pt,pt=0,Be=null,ys(e,l,u,h)}}Kw(),a=jt;break}catch(d){e0(e,d)}while(!0);return t&&e.shellSuspendCounter++,Fn=jr=null,yt=i,$.H=r,$.A=s,rt===null&&(bt=null,ut=0,wc()),a}function Kw(){for(;rt!==null;)r0(rt)}function Yw(e,t){var n=yt;yt|=2;var i=n0(),r=i0();bt!==e||ut!==t?(Bu=null,zu=Rn()+500,qs(e,t)):na=jo(e,t);t:do try{if(pt!==0&&rt!==null){t=rt;var s=Be;e:switch(pt){case 1:pt=0,Be=null,ys(e,t,s,1);break;case 2:case 9:if(hy(s)){pt=0,Be=null,ky(t);break}t=function(){pt!==2&&pt!==9||bt!==e||(pt=7),kn(e)},s.then(t,t);break t;case 3:pt=7;break t;case 4:pt=5;break t;case 7:hy(s)?(pt=0,Be=null,ky(t)):(pt=0,Be=null,ys(e,t,s,7));break;case 5:var a=null;switch(rt.tag){case 26:a=rt.memoizedState;case 5:case 27:var l=rt;if(!a||S0(a)){pt=0,Be=null;var u=l.sibling;if(u!==null)rt=u;else{var h=l.return;h!==null?(rt=h,Oc(h)):rt=null}break e}}pt=0,Be=null,ys(e,t,s,5);break;case 6:pt=0,Be=null,ys(e,t,s,6);break;case 8:Cm(),jt=6;break t;default:throw Error(L(462))}}Xw();break}catch(d){e0(e,d)}while(!0);return Fn=jr=null,$.H=i,$.A=r,yt=n,rt!==null?0:(bt=null,ut=0,wc(),jt)}function Xw(){for(;rt!==null&&!y1();)r0(rt)}function r0(e){var t=MT(e.alternate,e,ni);e.memoizedProps=e.pendingProps,t===null?Oc(e):rt=t}function ky(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Cy(n,t,t.pendingProps,t.type,void 0,ut);break;case 11:t=Cy(n,t,t.pendingProps,t.type.render,t.ref,ut);break;case 5:mm(t);default:kT(n,t),t=rt=kE(t,ni),t=MT(n,t,ni)}e.memoizedProps=e.pendingProps,t===null?Oc(e):rt=t}function ys(e,t,n,i){Fn=jr=null,mm(t),Rs=null,vo=0;var r=t.return;try{if(Uw(e,r,t,n,ut)){jt=1,Lu(e,an(n,e.current)),rt=null;return}}catch(s){if(r!==null)throw rt=r,s;jt=1,Lu(e,an(n,e.current)),rt=null;return}t.flags&32768?(ft||i===1?e=!0:na||ut&536870912?e=!1:(xi=e=!0,(i===2||i===9||i===3||i===6)&&(i=un.current,i!==null&&i.tag===13&&(i.flags|=16384))),s0(t,e)):Oc(t)}function Oc(e){var t=e;do{if(t.flags&32768){s0(t,xi);return}e=t.return;var n=zw(t.alternate,t,ni);if(n!==null){rt=n;return}if(t=t.sibling,t!==null){rt=t;return}rt=t=e}while(t!==null);jt===0&&(jt=5)}function s0(e,t){do{var n=Bw(e.alternate,e);if(n!==null){n.flags&=32767,rt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){rt=e;return}rt=e=n}while(e!==null);jt=6,rt=null}function Py(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do Vc();while(ue!==0);if(yt&6)throw Error(L(327));if(t!==null){if(t===e.current)throw Error(L(177));if(s=t.lanes|t.childLanes,s|=em,I1(e,n,s,a,l,u),e===bt&&(rt=bt=null,ut=0),Bs=t,Ui=e,Is=n,$f=s,Zf=r,WT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Jw(bu,function(){return c0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=$.T,$.T=null,r=dt.p,dt.p=2,a=yt,yt|=4;try{qw(e,t,n)}finally{yt=a,dt.p=r,$.T=i}}ue=1,a0(),o0(),l0()}}function a0(){if(ue===1){ue=0;var e=Ui,t=Bs,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=$.T,$.T=null;var i=dt.p;dt.p=2;var r=yt;yt|=4;try{FT(t,e);var s=id,a=IE(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&RE(l.ownerDocument.documentElement,l)){if(u!==null&&tm(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var y=m.getSelection(),D=l.textContent.length,V=Math.min(u.start,D),M=u.end===void 0?V:Math.min(u.end,D);!y.extend&&V>M&&(a=M,M=V,V=a);var b=iy(l,V),v=iy(l,M);if(b&&v&&(y.rangeCount!==1||y.anchorNode!==b.node||y.anchorOffset!==b.offset||y.focusNode!==v.node||y.focusOffset!==v.offset)){var R=g.createRange();R.setStart(b.node,b.offset),y.removeAllRanges(),V>M?(y.addRange(R),y.extend(v.node,v.offset)):(R.setEnd(v.node,v.offset),y.addRange(R))}}}}for(g=[],y=l;y=y.parentNode;)y.nodeType===1&&g.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var x=g[l];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}Xu=!!nd,id=nd=null}finally{yt=r,dt.p=i,$.T=n}}e.current=t,ue=2}}function o0(){if(ue===2){ue=0;var e=Ui,t=Bs,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=$.T,$.T=null;var i=dt.p;dt.p=2;var r=yt;yt|=4;try{BT(e,t.alternate,t)}finally{yt=r,dt.p=i,$.T=n}}ue=3}}function l0(){if(ue===4||ue===3){ue=0,_1();var e=Ui,t=Bs,n=Is,i=WT;t.subtreeFlags&10256||t.flags&10256?ue=5:(ue=0,Bs=Ui=null,u0(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Li=null),Kd(n),t=t.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(Uo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=$.T,r=dt.p,dt.p=2,$.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{$.T=t,dt.p=r}}Is&3&&Vc(),kn(e),r=e.pendingLanes,n&4194090&&r&42?e===Wf?io++:(io=0,Wf=e):io=0,$o(0)}}function u0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Fo(t)))}function Vc(e){return a0(),o0(),l0(),c0()}function c0(){if(ue!==5)return!1;var e=Ui,t=$f;$f=0;var n=Kd(Is),i=$.T,r=dt.p;try{dt.p=32>n?32:n,$.T=null,n=Zf,Zf=null;var s=Ui,a=Is;if(ue=0,Bs=Ui=null,Is=0,yt&6)throw Error(L(331));var l=yt;if(yt|=4,$T(s.current),KT(s,s.current,a,n),yt=l,$o(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(Uo,s)}catch{}return!0}finally{dt.p=r,$.T=i,u0(e,t)}}function Ly(e,t,n){t=an(n,t),t=Ff(e.stateNode,t,2),e=Pi(e,t,2),e!==null&&(zo(e,2),kn(e))}function At(e,t,n){if(e.tag===3)Ly(e,e,n);else for(;t!==null;){if(t.tag===3){Ly(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Li===null||!Li.has(i))){e=an(n,e),n=IT(2),i=Pi(t,n,2),i!==null&&(CT(n,i,t,e),zo(i,2),kn(i));break}}t=t.return}}function Zh(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Fw;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(wm=!0,r.add(n),e=$w.bind(null,e,t,n),t.then(e,e))}function $w(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,bt===e&&(ut&n)===n&&(jt===4||jt===3&&(ut&62914560)===ut&&300>Rn()-Im?!(yt&2)&&qs(e,0):Rm|=n,zs===ut&&(zs=0)),kn(e)}function h0(e,t){t===0&&(t=aE()),e=ea(e,t),e!==null&&(zo(e,t),kn(e))}function Zw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),h0(e,n)}function Ww(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(L(314))}i!==null&&i.delete(t),h0(e,n)}function Jw(e,t){return Fd(e,t)}var qu=null,es=null,td=!1,Hu=!1,Wh=!1,br=0;function kn(e){e!==es&&e.next===null&&(es===null?qu=es=e:es=es.next=e),Hu=!0,td||(td=!0,eR())}function $o(e,t){if(!Wh&&Hu){Wh=!0;do for(var n=!1,i=qu;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-Ke(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Uy(i,s))}else s=ut,s=Tc(i,i===bt?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||jo(i,s)||(n=!0,Uy(i,s));i=i.next}while(n);Wh=!1}}function tR(){f0()}function f0(){Hu=td=!1;var e=0;br!==0&&(uR()&&(e=br),br=0);for(var t=Rn(),n=null,i=qu;i!==null;){var r=i.next,s=d0(i,t);s===0?(i.next=null,n===null?qu=r:n.next=r,r===null&&(es=n)):(n=i,(e!==0||s&3)&&(Hu=!0)),i=r}$o(e)}function d0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-Ke(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=R1(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=bt,n=ut,n=Tc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(pt===2||pt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&bh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||jo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&bh(i),Kd(n)){case 2:case 8:n=iE;break;case 32:n=bu;break;case 268435456:n=rE;break;default:n=bu}return i=m0.bind(null,e),n=Fd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&bh(i),e.callbackPriority=2,e.callbackNode=null,2}function m0(e,t){if(ue!==0&&ue!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Vc()&&e.callbackNode!==n)return null;var i=ut;return i=Tc(e,e===bt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(t0(e,i,t),d0(e,Rn()),e.callbackNode!=null&&e.callbackNode===n?m0.bind(null,e):null)}function Uy(e,t){if(Vc())return null;t0(e,t,!0)}function eR(){hR(function(){yt&6?Fd(nE,tR):f0()})}function Nm(){return br===0&&(br=sE()),br}function jy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Wl(""+e)}function zy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function nR(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=jy((r[ke]||null).action),a=i.submitter;a&&(t=(t=a[ke]||null)?jy(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new Ac("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(br!==0){var u=a?zy(r,a):new FormData(r);Hf(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?zy(r,a):new FormData(r),Hf(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var Jh=0;Jh<xf.length;Jh++){var tf=xf[Jh],iR=tf.toLowerCase(),rR=tf[0].toUpperCase()+tf.slice(1);En(iR,"on"+rR)}En(NE,"onAnimationEnd");En(DE,"onAnimationIteration");En(xE,"onAnimationStart");En("dblclick","onDoubleClick");En("focusin","onFocus");En("focusout","onBlur");En(Tw,"onTransitionRun");En(Aw,"onTransitionStart");En(Sw,"onTransitionCancel");En(OE,"onTransitionEnd");Ms("onMouseEnter",["mouseout","mouseover"]);Ms("onMouseLeave",["mouseout","mouseover"]);Ms("onPointerEnter",["pointerout","pointerover"]);Ms("onPointerLeave",["pointerout","pointerover"]);Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eo));function g0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Pu(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Pu(d)}r.currentTarget=null,s=u}}}}function it(e,t){var n=t[bf];n===void 0&&(n=t[bf]=new Set);var i=e+"__bubble";n.has(i)||(p0(t,e,2,!1),n.add(i))}function ef(e,t,n){var i=0;t&&(i|=4),p0(n,e,i,t)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function Dm(e){if(!e[Bl]){e[Bl]=!0,cE.forEach(function(n){n!=="selectionchange"&&(sR.has(n)||ef(n,!1,e),ef(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bl]||(t[Bl]=!0,ef("selectionchange",!1,t))}}function p0(e,t,n,i){switch(C0(t)){case 2:var r=OR;break;case 8:r=VR;break;default:r=Mm}n=r.bind(null,t,n,e),r=void 0,!Cf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function nf(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=ls(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}_E(function(){var h=s,d=$d(n),g=[];t:{var m=VE.get(e);if(m!==void 0){var y=Ac,D=e;switch(e){case"keypress":if(tu(n)===0)break t;case"keydown":case"keyup":y=J1;break;case"focusin":D="focus",y=Oh;break;case"focusout":D="blur",y=Oh;break;case"beforeblur":case"afterblur":y=Oh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=B1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=nw;break;case NE:case DE:case xE:y=G1;break;case OE:y=rw;break;case"scroll":case"scrollend":y=j1;break;case"wheel":y=aw;break;case"copy":case"cut":case"paste":y=Q1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Xp;break;case"toggle":case"beforetoggle":y=lw}var V=(t&4)!==0,M=!V&&(e==="scroll"||e==="scrollend"),b=V?m!==null?m+"Capture":null:m;V=[];for(var v=h,R;v!==null;){var x=v;if(R=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||R===null||b===null||(x=mo(v,b),x!=null&&V.push(To(v,x,R))),M)break;v=v.return}0<V.length&&(m=new y(m,D,null,n,d),g.push({event:m,listeners:V}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&n!==If&&(D=n.relatedTarget||n.fromElement)&&(ls(D)||D[Js]))break t;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(D=n.relatedTarget||n.toElement,y=h,D=D?ls(D):null,D!==null&&(M=Lo(D),V=D.tag,D!==M||V!==5&&V!==27&&V!==6)&&(D=null)):(y=null,D=h),y!==D)){if(V=Kp,x="onMouseLeave",b="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(V=Xp,x="onPointerLeave",b="onPointerEnter",v="pointer"),M=y==null?m:Pa(y),R=D==null?m:Pa(D),m=new V(x,v+"leave",y,n,d),m.target=M,m.relatedTarget=R,x=null,ls(d)===h&&(V=new V(b,v+"enter",D,n,d),V.target=R,V.relatedTarget=M,x=V),M=x,y&&D)e:{for(V=y,b=D,v=0,R=V;R;R=Zr(R))v++;for(R=0,x=b;x;x=Zr(x))R++;for(;0<v-R;)V=Zr(V),v--;for(;0<R-v;)b=Zr(b),R--;for(;v--;){if(V===b||b!==null&&V===b.alternate)break e;V=Zr(V),b=Zr(b)}V=null}else V=null;y!==null&&By(g,m,y,V,!1),D!==null&&M!==null&&By(g,M,D,V,!0)}}t:{if(m=h?Pa(h):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var U=Jp;else if(Wp(m))if(bE)U=_w;else{U=pw;var q=gw}else y=m.nodeName,!y||y.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&Xd(h.elementType)&&(U=Jp):U=yw;if(U&&(U=U(e,h))){SE(g,U,n,d);break t}q&&q(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Rf(m,"number",m.value)}switch(q=h?Pa(h):window,e){case"focusin":(Wp(q)||q.contentEditable==="true")&&(hs=q,Nf=h,Ka=null);break;case"focusout":Ka=Nf=hs=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,ry(g,n,d);break;case"selectionchange":if(Ew)break;case"keydown":case"keyup":ry(g,n,d)}var E;if(Jd)t:{switch(e){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else cs?TE(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(EE&&n.locale!=="ko"&&(cs||_!=="onCompositionStart"?_==="onCompositionEnd"&&cs&&(E=vE()):(Di=d,Zd="value"in Di?Di.value:Di.textContent,cs=!0)),q=Gu(h,_),0<q.length&&(_=new Yp(_,e,null,n,d),g.push({event:_,listeners:q}),E?_.data=E:(E=AE(n),E!==null&&(_.data=E)))),(E=cw?hw(e,n):fw(e,n))&&(_=Gu(h,"onBeforeInput"),0<_.length&&(q=new Yp("onBeforeInput","beforeinput",null,n,d),g.push({event:q,listeners:_}),q.data=E)),nR(g,e,h,n,d)}g0(g,t)})}function To(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gu(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=mo(e,n),r!=null&&i.unshift(To(e,r,s)),r=mo(e,t),r!=null&&i.push(To(e,r,s))),e.tag===3)return i;e=e.return}return[]}function Zr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function By(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=mo(n,s),h!=null&&a.unshift(To(n,h,u))):r||(h=mo(n,s),h!=null&&a.push(To(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var aR=/\r\n?/g,oR=/\u0000|\uFFFD/g;function qy(e){return(typeof e=="string"?e:""+e).replace(aR,`
`).replace(oR,"")}function y0(e,t){return t=qy(t),qy(e)===t}function Mc(){}function _t(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ks(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ks(e,""+i);break;case"className":Ml(e,"class",i);break;case"tabIndex":Ml(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Ml(e,n,i);break;case"style":yE(e,i,s);break;case"data":if(t!=="object"){Ml(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Wl(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&_t(e,t,"name",r.name,r,null),_t(e,t,"formEncType",r.formEncType,r,null),_t(e,t,"formMethod",r.formMethod,r,null),_t(e,t,"formTarget",r.formTarget,r,null)):(_t(e,t,"encType",r.encType,r,null),_t(e,t,"method",r.method,r,null),_t(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Wl(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Mc);break;case"onScroll":i!=null&&it("scroll",e);break;case"onScrollEnd":i!=null&&it("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(L(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(L(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Wl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":it("beforetoggle",e),it("toggle",e),Zl(e,"popover",i);break;case"xlinkActuate":Un(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Un(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Un(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Un(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Un(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Un(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Un(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Un(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Un(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Zl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=L1.get(n)||n,Zl(e,n,i))}}function ed(e,t,n,i,r,s){switch(n){case"style":yE(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(L(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(L(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ks(e,i):(typeof i=="number"||typeof i=="bigint")&&ks(e,""+i);break;case"onScroll":i!=null&&it("scroll",e);break;case"onScrollEnd":i!=null&&it("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Mc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hE.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[ke]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Zl(e,n,i)}}}function fe(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",e),it("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(L(137,t));default:_t(e,t,s,a,n,null)}}r&&_t(e,t,"srcSet",n.srcSet,n,null),i&&_t(e,t,"src",n.src,n,null);return;case"input":it("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(L(137,t));break;default:_t(e,t,i,d,n,null)}}mE(e,s,l,u,h,a,r,!1),wu(e);return;case"select":it("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:_t(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?Ts(e,!!i,t,!1):n!=null&&Ts(e,!!i,n,!0);return;case"textarea":it("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(L(91));break;default:_t(e,t,a,l,n,null)}pE(e,i,r,s),wu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:_t(e,t,u,i,n,null)}return;case"dialog":it("beforetoggle",e),it("toggle",e),it("cancel",e),it("close",e);break;case"iframe":case"object":it("load",e);break;case"video":case"audio":for(i=0;i<Eo.length;i++)it(Eo[i],e);break;case"image":it("error",e),it("load",e);break;case"details":it("toggle",e);break;case"embed":case"source":case"link":it("error",e),it("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(L(137,t));default:_t(e,t,h,i,n,null)}return;default:if(Xd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&ed(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&_t(e,t,l,i,n,null))}function lR(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(y in n){var g=n[y];if(n.hasOwnProperty(y)&&g!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(y)||_t(e,t,y,null,i,g)}}for(var m in i){var y=i[m];if(g=n[m],i.hasOwnProperty(m)&&(y!=null||g!=null))switch(m){case"type":s=y;break;case"name":r=y;break;case"checked":h=y;break;case"defaultChecked":d=y;break;case"value":a=y;break;case"defaultValue":l=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(L(137,t));break;default:y!==g&&_t(e,t,m,y,i,g)}}wf(e,a,l,u,h,d,s,r);return;case"select":y=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":y=u;default:i.hasOwnProperty(s)||_t(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&_t(e,t,r,s,i,u)}t=l,n=a,i=y,m!=null?Ts(e,!!n,m,!1):!!i!=!!n&&(t!=null?Ts(e,!!n,t,!0):Ts(e,!!n,n?[]:"",!1));return;case"textarea":y=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:_t(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":y=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(L(91));break;default:r!==s&&_t(e,t,a,r,i,s)}gE(e,m,y);return;case"option":for(var D in n)if(m=n[D],n.hasOwnProperty(D)&&m!=null&&!i.hasOwnProperty(D))switch(D){case"selected":e.selected=!1;break;default:_t(e,t,D,null,i,m)}for(u in i)if(m=i[u],y=n[u],i.hasOwnProperty(u)&&m!==y&&(m!=null||y!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:_t(e,t,u,m,i,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!=null&&!i.hasOwnProperty(V)&&_t(e,t,V,null,i,m);for(h in i)if(m=i[h],y=n[h],i.hasOwnProperty(h)&&m!==y&&(m!=null||y!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(L(137,t));break;default:_t(e,t,h,m,i,y)}return;default:if(Xd(t)){for(var M in n)m=n[M],n.hasOwnProperty(M)&&m!==void 0&&!i.hasOwnProperty(M)&&ed(e,t,M,void 0,i,m);for(d in i)m=i[d],y=n[d],!i.hasOwnProperty(d)||m===y||m===void 0&&y===void 0||ed(e,t,d,m,i,y);return}}for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!=null&&!i.hasOwnProperty(b)&&_t(e,t,b,null,i,m);for(g in i)m=i[g],y=n[g],!i.hasOwnProperty(g)||m===y||m==null&&y==null||_t(e,t,g,m,i,y)}var nd=null,id=null;function Fu(e){return e.nodeType===9?e:e.ownerDocument}function Hy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function rd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rf=null;function uR(){var e=window.event;return e&&e.type==="popstate"?e===rf?!1:(rf=e,!0):(rf=null,!1)}var v0=typeof setTimeout=="function"?setTimeout:void 0,cR=typeof clearTimeout=="function"?clearTimeout:void 0,Gy=typeof Promise=="function"?Promise:void 0,hR=typeof queueMicrotask=="function"?queueMicrotask:typeof Gy<"u"?function(e){return Gy.resolve(null).then(e).catch(fR)}:v0;function fR(e){setTimeout(function(){throw e})}function rr(e){return e==="head"}function Fy(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&ro(a.documentElement),n&2&&ro(a.body),n&4)for(n=a.head,ro(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[Bo]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),Ro(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);Ro(t)}function sd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":sd(n),Yd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function dR(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Bo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=yn(e.nextSibling),e===null)break}return null}function mR(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=yn(e.nextSibling),e===null))return null;return e}function ad(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function gR(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function yn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var od=null;function Qy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function E0(e,t,n){switch(t=Fu(n),e){case"html":if(e=t.documentElement,!e)throw Error(L(452));return e;case"head":if(e=t.head,!e)throw Error(L(453));return e;case"body":if(e=t.body,!e)throw Error(L(454));return e;default:throw Error(L(451))}}function ro(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Yd(e)}var cn=new Map,Ky=new Set;function Qu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var li=dt.d;dt.d={f:pR,r:yR,D:_R,C:vR,L:ER,m:TR,X:SR,S:AR,M:bR};function pR(){var e=li.f(),t=xc();return e||t}function yR(e){var t=ta(e);t!==null&&t.tag===5&&t.type==="form"?dT(t):li.r(e)}var ia=typeof document>"u"?null:document;function T0(e,t,n){var i=ia;if(i&&typeof t=="string"&&t){var r=sn(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Ky.has(r)||(Ky.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),fe(t,"link",e),ee(t),i.head.appendChild(t)))}}function _R(e){li.D(e),T0("dns-prefetch",e,null)}function vR(e,t){li.C(e,t),T0("preconnect",e,t)}function ER(e,t,n){li.L(e,t,n);var i=ia;if(i&&e&&t){var r='link[rel="preload"][as="'+sn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+sn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+sn(n.imageSizes)+'"]')):r+='[href="'+sn(e)+'"]';var s=r;switch(t){case"style":s=Hs(e);break;case"script":s=ra(e)}cn.has(s)||(e=Ct({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),cn.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Zo(s))||t==="script"&&i.querySelector(Wo(s))||(t=i.createElement("link"),fe(t,"link",e),ee(t),i.head.appendChild(t)))}}function TR(e,t){li.m(e,t);var n=ia;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+sn(i)+'"][href="'+sn(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=ra(e)}if(!cn.has(s)&&(e=Ct({rel:"modulepreload",href:e},t),cn.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Wo(s)))return}i=n.createElement("link"),fe(i,"link",e),ee(i),n.head.appendChild(i)}}}function AR(e,t,n){li.S(e,t,n);var i=ia;if(i&&e){var r=Es(i).hoistableStyles,s=Hs(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Zo(s)))l.loading=5;else{e=Ct({rel:"stylesheet",href:e,"data-precedence":t},n),(n=cn.get(s))&&xm(e,n);var u=a=i.createElement("link");ee(u),fe(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,ou(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function SR(e,t){li.X(e,t);var n=ia;if(n&&e){var i=Es(n).hoistableScripts,r=ra(e),s=i.get(r);s||(s=n.querySelector(Wo(r)),s||(e=Ct({src:e,async:!0},t),(t=cn.get(r))&&Om(e,t),s=n.createElement("script"),ee(s),fe(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function bR(e,t){li.M(e,t);var n=ia;if(n&&e){var i=Es(n).hoistableScripts,r=ra(e),s=i.get(r);s||(s=n.querySelector(Wo(r)),s||(e=Ct({src:e,async:!0,type:"module"},t),(t=cn.get(r))&&Om(e,t),s=n.createElement("script"),ee(s),fe(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Yy(e,t,n,i){var r=(r=Mi.current)?Qu(r):null;if(!r)throw Error(L(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Hs(n.href),n=Es(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Hs(n.href);var s=Es(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(Zo(e)))&&!s._p&&(a.instance=s,a.state.loading=5),cn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},cn.set(e,n),s||wR(r,e,n,a.state))),t&&i===null)throw Error(L(528,""));return a}if(t&&i!==null)throw Error(L(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ra(n),n=Es(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(L(444,e))}}function Hs(e){return'href="'+sn(e)+'"'}function Zo(e){return'link[rel="stylesheet"]['+e+"]"}function A0(e){return Ct({},e,{"data-precedence":e.precedence,precedence:null})}function wR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),fe(t,"link",n),ee(t),e.head.appendChild(t))}function ra(e){return'[src="'+sn(e)+'"]'}function Wo(e){return"script[async]"+e}function Xy(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+sn(n.href)+'"]');if(i)return t.instance=i,ee(i),i;var r=Ct({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ee(i),fe(i,"style",r),ou(i,n.precedence,e),t.instance=i;case"stylesheet":r=Hs(n.href);var s=e.querySelector(Zo(r));if(s)return t.state.loading|=4,t.instance=s,ee(s),s;i=A0(n),(r=cn.get(r))&&xm(i,r),s=(e.ownerDocument||e).createElement("link"),ee(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),fe(s,"link",i),t.state.loading|=4,ou(s,n.precedence,e),t.instance=s;case"script":return s=ra(n.src),(r=e.querySelector(Wo(s)))?(t.instance=r,ee(r),r):(i=n,(r=cn.get(s))&&(i=Ct({},n),Om(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),ee(r),fe(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(L(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,ou(i,n.precedence,e));return t.instance}function ou(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function xm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Om(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var lu=null;function $y(e,t,n){if(lu===null){var i=new Map,r=lu=new Map;r.set(n,i)}else r=lu,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Bo]||s[Te]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function Zy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function RR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function S0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Ao=null;function IR(){}function CR(e,t,n){if(Ao===null)throw Error(L(475));var i=Ao;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Hs(n.href),s=e.querySelector(Zo(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Ku.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,ee(s);return}s=e.ownerDocument||e,n=A0(n),(r=cn.get(r))&&xm(n,r),s=s.createElement("link"),ee(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),fe(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Ku.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function NR(){if(Ao===null)throw Error(L(475));var e=Ao;return e.stylesheets&&e.count===0&&ld(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Ku(){if(this.count--,this.count===0){if(this.stylesheets)ld(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yu=null;function ld(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yu=new Map,t.forEach(DR,e),Yu=null,Ku.call(e))}function DR(e,t){if(!(t.state.loading&4)){var n=Yu.get(e);if(n)var i=n.get(null);else{n=new Map,Yu.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Ku.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var So={$$typeof:qn,Provider:null,Consumer:null,_currentValue:_r,_currentValue2:_r,_threadCount:0};function xR(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wh(0),this.hiddenUpdates=wh(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function b0(e,t,n,i,r,s,a,l,u,h,d,g){return e=new xR(e,t,n,a,l,u,h,g),t=1,s===!0&&(t|=24),s=He(3,null,null,t),e.current=s,s.stateNode=e,t=am(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},lm(s),e}function w0(e){return e?(e=ms,e):ms}function R0(e,t,n,i,r,s){r=w0(r),i.context===null?i.context=r:i.pendingContext=r,i=ki(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Pi(e,i,t),n!==null&&(Xe(n,e,t),$a(n,e,t))}function Wy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Vm(e,t){Wy(e,t),(e=e.alternate)&&Wy(e,t)}function I0(e){if(e.tag===13){var t=ea(e,67108864);t!==null&&Xe(t,e,67108864),Vm(e,67108864)}}var Xu=!0;function OR(e,t,n,i){var r=$.T;$.T=null;var s=dt.p;try{dt.p=2,Mm(e,t,n,i)}finally{dt.p=s,$.T=r}}function VR(e,t,n,i){var r=$.T;$.T=null;var s=dt.p;try{dt.p=8,Mm(e,t,n,i)}finally{dt.p=s,$.T=r}}function Mm(e,t,n,i){if(Xu){var r=ud(i);if(r===null)nf(e,t,i,$u,n),Jy(e,i);else if(kR(r,e,t,n,i))i.stopPropagation();else if(Jy(e,i),t&4&&-1<MR.indexOf(e)){for(;r!==null;){var s=ta(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=dr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-Ke(a);l.entanglements[1]|=u,a&=~u}kn(s),!(yt&6)&&(zu=Rn()+500,$o(0))}}break;case 13:l=ea(s,2),l!==null&&Xe(l,s,2),xc(),Vm(s,2)}if(s=ud(i),s===null&&nf(e,t,i,$u,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else nf(e,t,i,null,n)}}function ud(e){return e=$d(e),km(e)}var $u=null;function km(e){if($u=null,e=ls(e),e!==null){var t=Lo(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Wv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return $u=e,null}function C0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(v1()){case nE:return 2;case iE:return 8;case bu:case E1:return 32;case rE:return 268435456;default:return 32}default:return 32}}var cd=!1,ji=null,zi=null,Bi=null,bo=new Map,wo=new Map,bi=[],MR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jy(e,t){switch(e){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":Bi=null;break;case"pointerover":case"pointerout":bo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wo.delete(t.pointerId)}}function Va(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=ta(t),t!==null&&I0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function kR(e,t,n,i,r){switch(t){case"focusin":return ji=Va(ji,e,t,n,i,r),!0;case"dragenter":return zi=Va(zi,e,t,n,i,r),!0;case"mouseover":return Bi=Va(Bi,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return bo.set(s,Va(bo.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,wo.set(s,Va(wo.get(s)||null,e,t,n,i,r)),!0}return!1}function N0(e){var t=ls(e.target);if(t!==null){var n=Lo(t);if(n!==null){if(t=n.tag,t===13){if(t=Wv(n),t!==null){e.blockedOn=t,C1(e.priority,function(){if(n.tag===13){var i=Ye();i=Qd(i);var r=ea(n,i);r!==null&&Xe(r,n,i),Vm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ud(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);If=i,n.target.dispatchEvent(i),If=null}else return t=ta(n),t!==null&&I0(t),e.blockedOn=n,!1;t.shift()}return!0}function t_(e,t,n){uu(e)&&n.delete(t)}function PR(){cd=!1,ji!==null&&uu(ji)&&(ji=null),zi!==null&&uu(zi)&&(zi=null),Bi!==null&&uu(Bi)&&(Bi=null),bo.forEach(t_),wo.forEach(t_)}function ql(e,t){e.blockedOn===t&&(e.blockedOn=null,cd||(cd=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,PR)))}var Hl=null;function e_(e){Hl!==e&&(Hl=e,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,function(){Hl===e&&(Hl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(km(i||n)===null)continue;break}var s=ta(n);s!==null&&(e.splice(t,3),t-=3,Hf(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Ro(e){function t(u){return ql(u,e)}ji!==null&&ql(ji,e),zi!==null&&ql(zi,e),Bi!==null&&ql(Bi,e),bo.forEach(t),wo.forEach(t);for(var n=0;n<bi.length;n++){var i=bi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<bi.length&&(n=bi[0],n.blockedOn===null);)N0(n),n.blockedOn===null&&bi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[ke]||null;if(typeof s=="function")a||e_(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[ke]||null)l=a.formAction;else if(km(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),e_(n)}}}function Pm(e){this._internalRoot=e}kc.prototype.render=Pm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));var n=t.current,i=Ye();R0(n,i,e,t,null,null)};kc.prototype.unmount=Pm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;R0(e.current,2,null,e,null,null),xc(),t[Js]=null}};function kc(e){this._internalRoot=e}kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=uE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<bi.length&&t!==0&&t<bi[n].priority;n++);bi.splice(n,0,e),n===0&&N0(e)}};var n_=$v.version;if(n_!=="19.1.1")throw Error(L(527,n_,"19.1.1"));dt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=f1(t),e=e!==null?Jv(e):null,e=e===null?null:e.stateNode,e};var LR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{Uo=Gl.inject(LR),Qe=Gl}catch{}}vc.createRoot=function(e,t){if(!Zv(e))throw Error(L(299));var n=!1,i="",r=bT,s=wT,a=RT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=b0(e,1,!1,null,null,n,i,r,s,a,l,null),e[Js]=t.current,Dm(e),new Pm(t)};vc.hydrateRoot=function(e,t,n){if(!Zv(e))throw Error(L(299));var i=!1,r="",s=bT,a=wT,l=RT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=b0(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=w0(null),n=t.current,i=Ye(),i=Qd(i),r=ki(i),r.callback=null,Pi(n,r,i),n=i,t.current.lanes=n,zo(t,n),kn(t),e[Js]=t.current,Dm(e),new kc(t)};vc.version="19.1.1";function D0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D0)}catch(e){console.error(e)}}D0(),Gv.exports=vc;var UR=Gv.exports;const jR=()=>{};var i_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},zR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},O0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,y=h&63;u||(y=64,a||(m=64)),i.push(n[d],n[g],n[m],n[y])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(x0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):zR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const g=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||g==null)throw new BR;const m=s<<2|l>>4;if(i.push(m),h!==64){const y=l<<4&240|h>>2;if(i.push(y),g!==64){const D=h<<6&192|g;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class BR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qR=function(e){const t=x0(e);return O0.encodeByteArray(t,!0)},Zu=function(e){return qR(e).replace(/\./g,"")},V0=function(e){try{return O0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=()=>HR().__FIREBASE_DEFAULTS__,FR=()=>{if(typeof process>"u"||typeof i_>"u")return;const e=i_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},QR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&V0(e[1]);return t&&JSON.parse(t)},Pc=()=>{try{return jR()||GR()||FR()||QR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},M0=e=>{var t,n;return(n=(t=Pc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},KR=e=>{const t=M0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},k0=()=>{var e;return(e=Pc())==null?void 0:e.config},P0=e=>{var t;return(t=Pc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function L0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Zu(JSON.stringify(n)),Zu(JSON.stringify(a)),""].join(".")}const so={};function $R(){const e={prod:[],emulator:[]};for(const t of Object.keys(so))so[t]?e.emulator.push(t):e.prod.push(t);return e}function ZR(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let r_=!1;function U0(e,t){if(typeof window>"u"||typeof document>"u"||!sa(window.location.host)||so[e]===t||so[e]||r_)return;so[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=$R().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{r_=!0,a()},m}function d(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=ZR(i),y=n("text"),D=document.getElementById(y)||document.createElement("span"),V=n("learnmore"),M=document.getElementById(V)||document.createElement("a"),b=n("preprendIcon"),v=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(M,V);const x=h();u(v,b),R.append(v,D,M,x),document.body.appendChild(R)}s?(D.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function JR(){var t;const e=(t=Pc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function e2(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function n2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i2(){const e=Se();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function r2(){return!JR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s2(){try{return typeof indexedDB=="object"}catch{return!1}}function a2(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="FirebaseError";class ui extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=o2,Object.setPrototypeOf(this,ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jo.prototype.create)}}class Jo{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?l2(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new ui(r,l,i)}}function l2(e,t){return e.replace(u2,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const u2=/\{\$([^}]+)}/g;function c2(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Nr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(s_(s)&&s_(a)){if(!Nr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function s_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Ua(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(s)}}),t}function ja(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function h2(e,t){const n=new f2(e,t);return n.subscribe.bind(n)}class f2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");d2(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=sf),r.error===void 0&&(r.error=sf),r.complete===void 0&&(r.complete=sf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function d2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function sf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(e){return e&&e._delegate?e._delegate:e}class Dr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new YR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(p2(t))try{this.getOrInitializeService({instanceIdentifier:pr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=pr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=pr){return this.instances.has(t)}getOptions(t=pr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:g2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=pr){return this.component?this.component.multipleInstances?t:pr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g2(e){return e===pr?void 0:e}function p2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new m2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(st||(st={}));const _2={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},v2=st.INFO,E2={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},T2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=E2[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Lm{constructor(t){this.name=t,this._logLevel=v2,this._logHandler=T2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in st))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?_2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...t),this._logHandler(this,st.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...t),this._logHandler(this,st.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,st.INFO,...t),this._logHandler(this,st.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,st.WARN,...t),this._logHandler(this,st.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...t),this._logHandler(this,st.ERROR,...t)}}const A2=(e,t)=>t.some(n=>e instanceof n);let a_,o_;function S2(){return a_||(a_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b2(){return o_||(o_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const j0=new WeakMap,hd=new WeakMap,z0=new WeakMap,af=new WeakMap,Um=new WeakMap;function w2(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(qi(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&j0.set(n,e)}).catch(()=>{}),Um.set(t,e),t}function R2(e){if(hd.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});hd.set(e,t)}let fd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return hd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||z0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function I2(e){fd=e(fd)}function C2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(of(this),t,...n);return z0.set(i,t.sort?t.sort():[t]),qi(i)}:b2().includes(e)?function(...t){return e.apply(of(this),t),qi(j0.get(this))}:function(...t){return qi(e.apply(of(this),t))}}function N2(e){return typeof e=="function"?C2(e):(e instanceof IDBTransaction&&R2(e),A2(e,S2())?new Proxy(e,fd):e)}function qi(e){if(e instanceof IDBRequest)return w2(e);if(af.has(e))return af.get(e);const t=N2(e);return t!==e&&(af.set(e,t),Um.set(t,e)),t}const of=e=>Um.get(e);function D2(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=qi(a);return i&&a.addEventListener("upgradeneeded",u=>{i(qi(a.result),u.oldVersion,u.newVersion,qi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const x2=["get","getKey","getAll","getAllKeys","count"],O2=["put","add","delete","clear"],lf=new Map;function l_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(lf.get(t))return lf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=O2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||x2.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return lf.set(t,s),s}I2(e=>({...e,get:(t,n,i)=>l_(t,n)||e.get(t,n,i),has:(t,n)=>!!l_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(M2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function M2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const dd="@firebase/app",u_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new Lm("@firebase/app"),k2="@firebase/app-compat",P2="@firebase/analytics-compat",L2="@firebase/analytics",U2="@firebase/app-check-compat",j2="@firebase/app-check",z2="@firebase/auth",B2="@firebase/auth-compat",q2="@firebase/database",H2="@firebase/data-connect",G2="@firebase/database-compat",F2="@firebase/functions",Q2="@firebase/functions-compat",K2="@firebase/installations",Y2="@firebase/installations-compat",X2="@firebase/messaging",$2="@firebase/messaging-compat",Z2="@firebase/performance",W2="@firebase/performance-compat",J2="@firebase/remote-config",tI="@firebase/remote-config-compat",eI="@firebase/storage",nI="@firebase/storage-compat",iI="@firebase/firestore",rI="@firebase/ai",sI="@firebase/firestore-compat",aI="firebase",oI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="[DEFAULT]",lI={[dd]:"fire-core",[k2]:"fire-core-compat",[L2]:"fire-analytics",[P2]:"fire-analytics-compat",[j2]:"fire-app-check",[U2]:"fire-app-check-compat",[z2]:"fire-auth",[B2]:"fire-auth-compat",[q2]:"fire-rtdb",[H2]:"fire-data-connect",[G2]:"fire-rtdb-compat",[F2]:"fire-fn",[Q2]:"fire-fn-compat",[K2]:"fire-iid",[Y2]:"fire-iid-compat",[X2]:"fire-fcm",[$2]:"fire-fcm-compat",[Z2]:"fire-perf",[W2]:"fire-perf-compat",[J2]:"fire-rc",[tI]:"fire-rc-compat",[eI]:"fire-gcs",[nI]:"fire-gcs-compat",[iI]:"fire-fst",[sI]:"fire-fst-compat",[rI]:"fire-vertex","fire-js":"fire-js",[aI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=new Map,uI=new Map,gd=new Map;function c_(e,t){try{e.container.addComponent(t)}catch(n){ii.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Gs(e){const t=e.name;if(gd.has(t))return ii.debug(`There were multiple attempts to register component ${t}.`),!1;gd.set(t,e);for(const n of Wu.values())c_(n,e);for(const n of uI.values())c_(n,e);return!0}function jm(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function on(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hi=new Jo("app","Firebase",cI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=oI;function B0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:md,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Hi.create("bad-app-name",{appName:String(r)});if(n||(n=k0()),!n)throw Hi.create("no-options");const s=Wu.get(r);if(s){if(Nr(n,s.options)&&Nr(i,s.config))return s;throw Hi.create("duplicate-app",{appName:r})}const a=new y2(r);for(const u of gd.values())a.addComponent(u);const l=new hI(n,i,a);return Wu.set(r,l),l}function q0(e=md){const t=Wu.get(e);if(!t&&e===md&&k0())return B0();if(!t)throw Hi.create("no-app",{appName:e});return t}function Gi(e,t,n){let i=lI[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ii.warn(a.join(" "));return}Gs(new Dr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="firebase-heartbeat-database",dI=1,Io="firebase-heartbeat-store";let uf=null;function H0(){return uf||(uf=D2(fI,dI,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Io)}catch(n){console.warn(n)}}}}).catch(e=>{throw Hi.create("idb-open",{originalErrorMessage:e.message})})),uf}async function mI(e){try{const n=(await H0()).transaction(Io),i=await n.objectStore(Io).get(G0(e));return await n.done,i}catch(t){if(t instanceof ui)ii.warn(t.message);else{const n=Hi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ii.warn(n.message)}}}async function h_(e,t){try{const i=(await H0()).transaction(Io,"readwrite");await i.objectStore(Io).put(t,G0(e)),await i.done}catch(n){if(n instanceof ui)ii.warn(n.message);else{const i=Hi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ii.warn(i.message)}}}function G0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=1024,pI=30;class yI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=f_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>pI){const a=EI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ii.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=f_(),{heartbeatsToSend:i,unsentEntries:r}=_I(this._heartbeatsCache.heartbeats),s=Zu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ii.warn(n),""}}}function f_(){return new Date().toISOString().substring(0,10)}function _I(e,t=gI){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),d_(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),d_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class vI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s2()?a2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return h_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return h_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function d_(e){return Zu(JSON.stringify({version:2,heartbeats:e})).length}function EI(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(e){Gs(new Dr("platform-logger",t=>new V2(t),"PRIVATE")),Gs(new Dr("heartbeat",t=>new yI(t),"PRIVATE")),Gi(dd,u_,e),Gi(dd,u_,"esm2020"),Gi("fire-js","")}TI("");function F0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AI=F0,Q0=new Jo("auth","Firebase",F0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=new Lm("@firebase/auth");function SI(e,...t){Ju.logLevel<=st.WARN&&Ju.warn(`Auth (${aa}): ${e}`,...t)}function cu(e,...t){Ju.logLevel<=st.ERROR&&Ju.error(`Auth (${aa}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(e,...t){throw zm(e,...t)}function Cn(e,...t){return zm(e,...t)}function K0(e,t,n){const i={...AI(),[t]:n};return new Jo("auth","Firebase",i).create(t,{appName:e.name})}function Zn(e){return K0(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zm(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return Q0.create(e,...t)}function Y(e,t,...n){if(!e)throw zm(t,...n)}function Kn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw cu(t),new Error(t)}function ri(e,t){e||Kn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function bI(){return m_()==="http:"||m_()==="https:"}function m_(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bI()||e2()||"connection"in navigator)?navigator.onLine:!0}function RI(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(t,n){this.shortDelay=t,this.longDelay=n,ri(n>t,"Short delay should be less than long delay!"),this.isMobile=WR()||n2()}get(){return wI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(e,t){ri(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NI=new el(3e4,6e4);function sr(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function ci(e,t,n,i,r={}){return X0(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=tl({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return t2()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&sa(e.emulatorConfig.host)&&(h.credentials="include"),Y0.fetch()(await $0(e,e.config.apiHost,n,l),h)})}async function X0(e,t,n){e._canInitEmulator=!1;const i={...II,...t};try{const r=new xI(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Fl(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fl(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Fl(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw Fl(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw K0(e,d,h);_n(e,d)}}catch(r){if(r instanceof ui)throw r;_n(e,"network-request-failed",{message:String(r)})}}async function nl(e,t,n,i,r={}){const s=await ci(e,t,n,i,r);return"mfaPendingCredential"in s&&_n(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function $0(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?Bm(e.config,r):`${e.config.apiScheme}://${r}`;return CI.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function DI(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Cn(this.auth,"network-request-failed")),NI.get())})}}function Fl(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Cn(e,t,i);return r.customData._tokenResponse=n,r}function g_(e){return e!==void 0&&e.enterprise!==void 0}class OI{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return DI(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VI(e,t){return ci(e,"GET","/v2/recaptchaConfig",sr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(e,t){return ci(e,"POST","/v1/accounts:delete",t)}async function tc(e,t){return ci(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function kI(e,t=!1){const n=kt(e),i=await n.getIdToken(t),r=qm(i);Y(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ao(cf(r.auth_time)),issuedAtTime:ao(cf(r.iat)),expirationTime:ao(cf(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function cf(e){return Number(e)*1e3}function qm(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return cu("JWT malformed, contained fewer than 3 sections"),null;try{const r=V0(n);return r?JSON.parse(r):(cu("Failed to decode base64 JWT payload"),null)}catch(r){return cu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function p_(e){const t=qm(e);return Y(t,"internal-error"),Y(typeof t.exp<"u","internal-error"),Y(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fs(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof ui&&PI(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function PI({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ao(this.lastLoginAt),this.creationTime=ao(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(e){var g;const t=e.auth,n=await e.getIdToken(),i=await Fs(e,tc(t,{idToken:n}));Y(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(g=r.providerUserInfo)!=null&&g.length?Z0(r.providerUserInfo):[],a=jI(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new yd(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function UI(e){const t=kt(e);await ec(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function jI(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function Z0(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(e,t){const n=await X0(e,{},async()=>{const i=tl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await $0(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&sa(e.emulatorConfig.host)&&(u.credentials="include"),Y0.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BI(e,t){return ci(e,"POST","/v2/accounts:revokeToken",sr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Y(t.idToken,"internal-error"),Y(typeof t.idToken<"u","internal-error"),Y(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):p_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Y(t.length!==0,"internal-error");const n=p_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await zI(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Cs;return i&&(Y(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(Y(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(Y(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Cs,this.toJSON())}_performRefresh(){return Kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(e,t){Y(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class pn{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new LI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new yd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Fs(this,this.stsTokenManager.getToken(this.auth,t));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return kI(this,t)}reload(){return UI(this)}_assign(t){this!==t&&(Y(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new pn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await ec(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(on(this.auth.app))return Promise.reject(Zn(this.auth));const t=await this.getIdToken();return await Fs(this,MI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:y,providerData:D,stsTokenManager:V}=n;Y(g&&V,t,"internal-error");const M=Cs.fromJSON(this.name,V);Y(typeof g=="string",t,"internal-error"),yi(i,t.name),yi(r,t.name),Y(typeof m=="boolean",t,"internal-error"),Y(typeof y=="boolean",t,"internal-error"),yi(s,t.name),yi(a,t.name),yi(l,t.name),yi(u,t.name),yi(h,t.name),yi(d,t.name);const b=new pn({uid:g,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:y,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:M,createdAt:h,lastLoginAt:d});return D&&Array.isArray(D)&&(b.providerData=D.map(v=>({...v}))),u&&(b._redirectEventId=u),b}static async _fromIdTokenResponse(t,n,i=!1){const r=new Cs;r.updateFromServerResponse(n);const s=new pn({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await ec(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];Y(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?Z0(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new Cs;l.updateFromIdToken(i);const u=new pn({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new yd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=new Map;function Yn(e){ri(e instanceof Function,"Expected a class definition");let t=y_.get(e);return t?(ri(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,y_.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}W0.type="NONE";const __=W0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(e,t,n){return`firebase:${e}:${t}:${n}`}class Ns{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=hu(this.userKey,r.apiKey,s),this.fullPersistenceKey=hu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await tc(this.auth,{idToken:t}).catch(()=>{});return n?pn._fromGetAccountInfoResponse(this.auth,n,t):null}return pn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Ns(Yn(__),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||Yn(__);const a=hu(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await tc(t,{idToken:d}).catch(()=>{});if(!m)break;g=await pn._fromGetAccountInfoResponse(t,m,d)}else g=pn._fromJSON(t,d);h!==s&&(l=g),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Ns(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Ns(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(nA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(J0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(rA(t))return"Blackberry";if(sA(t))return"Webos";if(tA(t))return"Safari";if((t.includes("chrome/")||eA(t))&&!t.includes("edge/"))return"Chrome";if(iA(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function J0(e=Se()){return/firefox\//i.test(e)}function tA(e=Se()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function eA(e=Se()){return/crios\//i.test(e)}function nA(e=Se()){return/iemobile/i.test(e)}function iA(e=Se()){return/android/i.test(e)}function rA(e=Se()){return/blackberry/i.test(e)}function sA(e=Se()){return/webos/i.test(e)}function Hm(e=Se()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function qI(e=Se()){var t;return Hm(e)&&!!((t=window.navigator)!=null&&t.standalone)}function HI(){return i2()&&document.documentMode===10}function aA(e=Se()){return Hm(e)||iA(e)||sA(e)||rA(e)||/windows phone/i.test(e)||nA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(e,t=[]){let n;switch(e){case"Browser":n=v_(Se());break;case"Worker":n=`${v_(Se())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${aa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(e,t={}){return ci(e,"GET","/v2/passwordPolicy",sr(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=6;class KI{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??QI,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E_(this),this.idTokenSubscription=new E_(this),this.beforeStateQueue=new GI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Q0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Yn(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Ns.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await tc(this,{idToken:t}),i=await pn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(on(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await ec(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=RI()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(on(this.app))return Promise.reject(Zn(this));const n=t?kt(t):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Y(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return on(this.app)?Promise.reject(Zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return on(this.app)?Promise.reject(Zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await FI(this),n=new KI(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Jo("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await BI(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Yn(t)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await Ns.create(this,[Yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=oA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(on(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&SI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function zr(e){return kt(e)}class E_{constructor(t){this.auth=t,this.observer=null,this.addObserver=h2(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XI(e){Lc=e}function lA(e){return Lc.loadJS(e)}function $I(){return Lc.recaptchaEnterpriseScript}function ZI(){return Lc.gapiScript}function WI(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class JI{constructor(){this.enterprise=new tC}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class tC{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const eC="recaptcha-enterprise",uA="NO_RECAPTCHA";class nC{constructor(t){this.type=eC,this.auth=zr(t)}async verify(t="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{VI(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new OI(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(u=>{l(u)})})}function r(s,a,l){const u=window.grecaptcha;g_(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:t}).then(h=>{a(h)}).catch(()=>{a(uA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JI().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(l=>{if(!n&&g_(window.grecaptcha))r(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=$I();u.length!==0&&(u+=l),lA(u).then(()=>{r(l,s,a)}).catch(h=>{a(h)})}}).catch(l=>{a(l)})})}}async function T_(e,t,n,i=!1,r=!1){const s=new nC(e);let a;if(r)a=uA;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const l={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function _d(e,t,n,i,r){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await T_(e,t,n,n==="getOobCode");return i(e,a)}else return i(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await T_(e,t,n,n==="getOobCode");return i(e,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(e,t){const n=jm(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Nr(s,t??{}))return r;_n(r,"already-initialized")}return n.initialize({options:t})}function rC(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Yn);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function sC(e,t,n){const i=zr(e);Y(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=cA(t),{host:a,port:l}=aC(t),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Y(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Y(Nr(h,i.config.emulator)&&Nr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,sa(a)?(L0(`${s}//${a}${u}`),U0("Auth",!0)):oC()}function cA(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function aC(e){const t=cA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:A_(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:A_(a)}}}function A_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function oC(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Kn("not implemented")}_getIdTokenResponse(t){return Kn("not implemented")}_linkToIdToken(t,n){return Kn("not implemented")}_getReauthenticationResolver(t){return Kn("not implemented")}}async function lC(e,t){return ci(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(e,t){return nl(e,"POST","/v1/accounts:signInWithPassword",sr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cC(e,t){return nl(e,"POST","/v1/accounts:signInWithEmailLink",sr(e,t))}async function hC(e,t){return nl(e,"POST","/v1/accounts:signInWithEmailLink",sr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends Gm{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new Co(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new Co(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(t,n,"signInWithPassword",uC);case"emailLink":return cC(t,{email:this._email,oobCode:this._password});default:_n(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(t,i,"signUpPassword",lC);case"emailLink":return hC(t,{idToken:n,email:this._email,oobCode:this._password});default:_n(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ds(e,t){return nl(e,"POST","/v1/accounts:signInWithIdp",sr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="http://localhost";class xr extends Gm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new xr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):_n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new xr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Ds(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Ds(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ds(t,n)}buildRequest(){const t={requestUri:fC,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=tl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mC(e){const t=Ua(ja(e)).link,n=t?Ua(ja(t)).deep_link_id:null,i=Ua(ja(e)).deep_link_id;return(i?Ua(ja(i)).link:null)||i||n||t||e}class Fm{constructor(t){const n=Ua(ja(t)),i=n.apiKey??null,r=n.oobCode??null,s=dC(n.mode??null);Y(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=mC(t);try{return new Fm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.providerId=oa.PROVIDER_ID}static credential(t,n){return Co._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=Fm.parseLink(n);return Y(i,"argument-error"),Co._fromEmailAndCode(t,i.code,i.tenantId)}}oa.PROVIDER_ID="password";oa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il extends hA{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends il{constructor(){super("facebook.com")}static credential(t){return xr._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return wi.credentialFromTaggedObject(t)}static credentialFromError(t){return wi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return wi.credential(t.oauthAccessToken)}catch{return null}}}wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends il{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return xr._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ri.credentialFromTaggedObject(t)}static credentialFromError(t){return Ri.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Ri.credential(n,i)}catch{return null}}}Ri.GOOGLE_SIGN_IN_METHOD="google.com";Ri.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends il{constructor(){super("github.com")}static credential(t){return xr._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ii.credentialFromTaggedObject(t)}static credentialFromError(t){return Ii.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ii.credential(t.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends il{constructor(){super("twitter.com")}static credential(t,n){return xr._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ci.credentialFromTaggedObject(t)}static credentialFromError(t){return Ci.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Ci.credential(n,i)}catch{return null}}}Ci.TWITTER_SIGN_IN_METHOD="twitter.com";Ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(e,t){return nl(e,"POST","/v1/accounts:signUp",sr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await pn._fromIdTokenResponse(t,i,r),a=S_(i);return new Or({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=S_(i);return new Or({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function S_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends ui{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,nc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new nc(t,n,i,r)}}function fA(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?nc._fromErrorAndOperation(e,s,t,i):s})}async function pC(e,t,n=!1){const i=await Fs(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Or._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yC(e,t,n=!1){const{auth:i}=e;if(on(i.app))return Promise.reject(Zn(i));const r="reauthenticate";try{const s=await Fs(e,fA(i,r,t,e),n);Y(s.idToken,i,"internal-error");const a=qm(s.idToken);Y(a,i,"internal-error");const{sub:l}=a;return Y(e.uid===l,i,"user-mismatch"),Or._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&_n(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(e,t,n=!1){if(on(e.app))return Promise.reject(Zn(e));const i="signIn",r=await fA(e,i,t),s=await Or._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function _C(e,t){return dA(zr(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mA(e){const t=zr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function vC(e,t,n){if(on(e.app))return Promise.reject(Zn(e));const i=zr(e),a=await _d(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gC).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&mA(e),u}),l=await Or._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function EC(e,t,n){return on(e.app)?Promise.reject(Zn(e)):_C(kt(e),oa.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&mA(e),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(e,t){return ci(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(e,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const i=kt(e),s={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},a=await Fs(i,TC(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const l=i.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(e,t){return kt(e).setPersistence(t)}function bC(e,t,n,i){return kt(e).onIdTokenChanged(t,n,i)}function wC(e,t,n){return kt(e).beforeAuthStateChanged(t,n)}function RC(e,t,n,i){return kt(e).onAuthStateChanged(t,n,i)}function IC(e){return kt(e).signOut()}const ic="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ic,"1"),this.storage.removeItem(ic),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=1e3,NC=10;class pA extends gA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);HI()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,NC):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},CC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}pA.type="LOCAL";const yA=pA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A extends gA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}_A.type="SESSION";const vA=_A;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new Uc(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await DC(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=Qm("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return window}function OC(e){Nn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function VC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MC(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function kC(){return EA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="firebaseLocalStorageDb",PC=1,rc="firebaseLocalStorage",AA="fbase_key";class rl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function jc(e,t){return e.transaction([rc],t?"readwrite":"readonly").objectStore(rc)}function LC(){const e=indexedDB.deleteDatabase(TA);return new rl(e).toPromise()}function vd(){const e=indexedDB.open(TA,PC);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(rc,{keyPath:AA})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(rc)?t(i):(i.close(),await LC(),t(await vd()))})})}async function b_(e,t,n){const i=jc(e,!0).put({[AA]:t,value:n});return new rl(i).toPromise()}async function UC(e,t){const n=jc(e,!1).get(t),i=await new rl(n).toPromise();return i===void 0?null:i.value}function w_(e,t){const n=jc(e,!0).delete(t);return new rl(n).toPromise()}const jC=800,zC=3;class SA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>zC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return EA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uc._getInstance(kC()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await VC(),!this.activeServiceWorker)return;this.sender=new xC(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||MC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await vd();return await b_(t,ic,"1"),await w_(t,ic),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>b_(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>UC(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>w_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=jc(r,!1).getAll();return new rl(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SA.type="LOCAL";const BC=SA;new el(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(e,t){return t?Yn(t):(Y(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends Gm{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ds(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ds(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ds(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function HC(e){return dA(e.auth,new Km(e),e.bypassAuthState)}function GC(e){const{auth:t,user:n}=e;return Y(n,t,"internal-error"),yC(n,new Km(e),e.bypassAuthState)}async function FC(e){const{auth:t,user:n}=e;return Y(n,t,"internal-error"),pC(n,new Km(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return HC;case"linkViaPopup":case"linkViaRedirect":return FC;case"reauthViaPopup":case"reauthViaRedirect":return GC;default:_n(this.auth,"internal-error")}}resolve(t){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=new el(2e3,1e4);class _s extends bA{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,_s.currentPopupAction&&_s.currentPopupAction.cancel(),_s.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Y(t,this.auth,"internal-error"),t}async onExecution(){ri(this.filter.length===1,"Popup operations only handle one event");const t=Qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_s.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,QC.get())};t()}}_s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="pendingRedirect",fu=new Map;class YC extends bA{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=fu.get(this.auth._key());if(!t){try{const i=await XC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}fu.set(this.auth._key(),t)}return this.bypassAuthState||fu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XC(e,t){const n=WC(t),i=ZC(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function $C(e,t){fu.set(e._key(),t)}function ZC(e){return Yn(e._redirectPersistence)}function WC(e){return hu(KC,e.config.apiKey,e.name)}async function JC(e,t,n=!1){if(on(e.app))return Promise.reject(Zn(e));const i=zr(e),r=qC(i,t),a=await new YC(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=10*60*1e3;class eN{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!nN(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!wA(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Cn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=tN&&this.cachedEventUids.clear(),this.cachedEventUids.has(R_(t))}saveEventToCache(t){this.cachedEventUids.add(R_(t)),this.lastProcessedEventTime=Date.now()}}function R_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function wA({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function nN(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wA(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(e,t={}){return ci(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sN=/^https?/;async function aN(e){if(e.config.emulator)return;const{authorizedDomains:t}=await iN(e);for(const n of t)try{if(oN(n))return}catch{}_n(e,"unauthorized-domain")}function oN(e){const t=pd(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!sN.test(n))return!1;if(rN.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=new el(3e4,6e4);function I_(){const e=Nn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function uN(e){return new Promise((t,n)=>{var r,s,a;function i(){I_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{I_(),n(Cn(e,"network-request-failed"))},timeout:lN.get()})}if((s=(r=Nn().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=Nn().gapi)!=null&&a.load)i();else{const l=WI("iframefcb");return Nn()[l]=()=>{gapi.load?i():n(Cn(e,"network-request-failed"))},lA(`${ZI()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw du=null,t})}let du=null;function cN(e){return du=du||uN(e),du}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=new el(5e3,15e3),fN="__/auth/iframe",dN="emulator/auth/iframe",mN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pN(e){const t=e.config;Y(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Bm(t,dN):`https://${e.config.authDomain}/${fN}`,i={apiKey:t.apiKey,appName:e.name,v:aa},r=gN.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${tl(i).slice(1)}`}async function yN(e){const t=await cN(e),n=Nn().gapi;return Y(n,e,"internal-error"),t.open({where:document.body,url:pN(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mN,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Cn(e,"network-request-failed"),l=Nn().setTimeout(()=>{s(a)},hN.get());function u(){Nn().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vN=500,EN=600,TN="_blank",AN="http://localhost";class C_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SN(e,t,n,i=vN,r=EN){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={..._N,width:i.toString(),height:r.toString(),top:s,left:a},h=Se().toLowerCase();n&&(l=eA(h)?TN:n),J0(h)&&(t=t||AN,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[y,D])=>`${m}${y}=${D},`,"");if(qI(h)&&l!=="_self")return bN(t||"",l),new C_(null);const g=window.open(t||"",l,d);Y(g,e,"popup-blocked");try{g.focus()}catch{}return new C_(g)}function bN(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="__/auth/handler",RN="emulator/auth/handler",IN=encodeURIComponent("fac");async function N_(e,t,n,i,r,s){Y(e.config.authDomain,e,"auth-domain-config-required"),Y(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:aa,eventId:r};if(t instanceof hA){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",c2(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof il){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${IN}=${encodeURIComponent(u)}`:"";return`${CN(e)}?${tl(l).slice(1)}${h}`}function CN({config:e}){return e.emulator?Bm(e,RN):`https://${e.authDomain}/${wN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf="webStorageSupport";class NN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vA,this._completeRedirectFn=JC,this._overrideRedirectResult=$C}async _openPopup(t,n,i,r){var a;ri((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await N_(t,n,i,pd(),r);return SN(t,s,Qm())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await N_(t,n,i,pd(),r);return OC(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ri(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await yN(t),i=new eN(t);return n.register("authEvent",r=>(Y(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(hf,{type:hf},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[hf];s!==void 0&&n(!!s),_n(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aN(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return aA()||tA()||Hm()}}const DN=NN;var D_="@firebase/auth",x_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VN(e){Gs(new Dr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;Y(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oA(e)},h=new YI(i,r,s,u);return rC(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Gs(new Dr("auth-internal",t=>{const n=zr(t.getProvider("auth").getImmediate());return(i=>new xN(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gi(D_,x_,ON(e)),Gi(D_,x_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=5*60,kN=P0("authIdTokenMaxAge")||MN;let O_=null;const PN=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>kN)return;const r=n==null?void 0:n.token;O_!==r&&(O_=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function LN(e=q0()){const t=jm(e,"auth");if(t.isInitialized())return t.getImmediate();const n=iC(e,{popupRedirectResolver:DN,persistence:[BC,yA,vA]}),i=P0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=PN(s.toString());wC(n,a,()=>a(n.currentUser)),bC(n,l=>a(l))}}const r=M0("auth");return r&&sC(n,`http://${r}`),n}function UN(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}XI({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=Cn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",UN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VN("Browser");var V_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fi,RA;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,_){function T(){}T.prototype=_.prototype,E.D=_.prototype,E.prototype=new T,E.prototype.constructor=E,E.C=function(S,I,C){for(var w=Array(arguments.length-2),me=2;me<arguments.length;me++)w[me-2]=arguments[me];return _.prototype[I].apply(S,w)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,_,T){T||(T=0);var S=Array(16);if(typeof _=="string")for(var I=0;16>I;++I)S[I]=_.charCodeAt(T++)|_.charCodeAt(T++)<<8|_.charCodeAt(T++)<<16|_.charCodeAt(T++)<<24;else for(I=0;16>I;++I)S[I]=_[T++]|_[T++]<<8|_[T++]<<16|_[T++]<<24;_=E.g[0],T=E.g[1],I=E.g[2];var C=E.g[3],w=_+(C^T&(I^C))+S[0]+3614090360&4294967295;_=T+(w<<7&4294967295|w>>>25),w=C+(I^_&(T^I))+S[1]+3905402710&4294967295,C=_+(w<<12&4294967295|w>>>20),w=I+(T^C&(_^T))+S[2]+606105819&4294967295,I=C+(w<<17&4294967295|w>>>15),w=T+(_^I&(C^_))+S[3]+3250441966&4294967295,T=I+(w<<22&4294967295|w>>>10),w=_+(C^T&(I^C))+S[4]+4118548399&4294967295,_=T+(w<<7&4294967295|w>>>25),w=C+(I^_&(T^I))+S[5]+1200080426&4294967295,C=_+(w<<12&4294967295|w>>>20),w=I+(T^C&(_^T))+S[6]+2821735955&4294967295,I=C+(w<<17&4294967295|w>>>15),w=T+(_^I&(C^_))+S[7]+4249261313&4294967295,T=I+(w<<22&4294967295|w>>>10),w=_+(C^T&(I^C))+S[8]+1770035416&4294967295,_=T+(w<<7&4294967295|w>>>25),w=C+(I^_&(T^I))+S[9]+2336552879&4294967295,C=_+(w<<12&4294967295|w>>>20),w=I+(T^C&(_^T))+S[10]+4294925233&4294967295,I=C+(w<<17&4294967295|w>>>15),w=T+(_^I&(C^_))+S[11]+2304563134&4294967295,T=I+(w<<22&4294967295|w>>>10),w=_+(C^T&(I^C))+S[12]+1804603682&4294967295,_=T+(w<<7&4294967295|w>>>25),w=C+(I^_&(T^I))+S[13]+4254626195&4294967295,C=_+(w<<12&4294967295|w>>>20),w=I+(T^C&(_^T))+S[14]+2792965006&4294967295,I=C+(w<<17&4294967295|w>>>15),w=T+(_^I&(C^_))+S[15]+1236535329&4294967295,T=I+(w<<22&4294967295|w>>>10),w=_+(I^C&(T^I))+S[1]+4129170786&4294967295,_=T+(w<<5&4294967295|w>>>27),w=C+(T^I&(_^T))+S[6]+3225465664&4294967295,C=_+(w<<9&4294967295|w>>>23),w=I+(_^T&(C^_))+S[11]+643717713&4294967295,I=C+(w<<14&4294967295|w>>>18),w=T+(C^_&(I^C))+S[0]+3921069994&4294967295,T=I+(w<<20&4294967295|w>>>12),w=_+(I^C&(T^I))+S[5]+3593408605&4294967295,_=T+(w<<5&4294967295|w>>>27),w=C+(T^I&(_^T))+S[10]+38016083&4294967295,C=_+(w<<9&4294967295|w>>>23),w=I+(_^T&(C^_))+S[15]+3634488961&4294967295,I=C+(w<<14&4294967295|w>>>18),w=T+(C^_&(I^C))+S[4]+3889429448&4294967295,T=I+(w<<20&4294967295|w>>>12),w=_+(I^C&(T^I))+S[9]+568446438&4294967295,_=T+(w<<5&4294967295|w>>>27),w=C+(T^I&(_^T))+S[14]+3275163606&4294967295,C=_+(w<<9&4294967295|w>>>23),w=I+(_^T&(C^_))+S[3]+4107603335&4294967295,I=C+(w<<14&4294967295|w>>>18),w=T+(C^_&(I^C))+S[8]+1163531501&4294967295,T=I+(w<<20&4294967295|w>>>12),w=_+(I^C&(T^I))+S[13]+2850285829&4294967295,_=T+(w<<5&4294967295|w>>>27),w=C+(T^I&(_^T))+S[2]+4243563512&4294967295,C=_+(w<<9&4294967295|w>>>23),w=I+(_^T&(C^_))+S[7]+1735328473&4294967295,I=C+(w<<14&4294967295|w>>>18),w=T+(C^_&(I^C))+S[12]+2368359562&4294967295,T=I+(w<<20&4294967295|w>>>12),w=_+(T^I^C)+S[5]+4294588738&4294967295,_=T+(w<<4&4294967295|w>>>28),w=C+(_^T^I)+S[8]+2272392833&4294967295,C=_+(w<<11&4294967295|w>>>21),w=I+(C^_^T)+S[11]+1839030562&4294967295,I=C+(w<<16&4294967295|w>>>16),w=T+(I^C^_)+S[14]+4259657740&4294967295,T=I+(w<<23&4294967295|w>>>9),w=_+(T^I^C)+S[1]+2763975236&4294967295,_=T+(w<<4&4294967295|w>>>28),w=C+(_^T^I)+S[4]+1272893353&4294967295,C=_+(w<<11&4294967295|w>>>21),w=I+(C^_^T)+S[7]+4139469664&4294967295,I=C+(w<<16&4294967295|w>>>16),w=T+(I^C^_)+S[10]+3200236656&4294967295,T=I+(w<<23&4294967295|w>>>9),w=_+(T^I^C)+S[13]+681279174&4294967295,_=T+(w<<4&4294967295|w>>>28),w=C+(_^T^I)+S[0]+3936430074&4294967295,C=_+(w<<11&4294967295|w>>>21),w=I+(C^_^T)+S[3]+3572445317&4294967295,I=C+(w<<16&4294967295|w>>>16),w=T+(I^C^_)+S[6]+76029189&4294967295,T=I+(w<<23&4294967295|w>>>9),w=_+(T^I^C)+S[9]+3654602809&4294967295,_=T+(w<<4&4294967295|w>>>28),w=C+(_^T^I)+S[12]+3873151461&4294967295,C=_+(w<<11&4294967295|w>>>21),w=I+(C^_^T)+S[15]+530742520&4294967295,I=C+(w<<16&4294967295|w>>>16),w=T+(I^C^_)+S[2]+3299628645&4294967295,T=I+(w<<23&4294967295|w>>>9),w=_+(I^(T|~C))+S[0]+4096336452&4294967295,_=T+(w<<6&4294967295|w>>>26),w=C+(T^(_|~I))+S[7]+1126891415&4294967295,C=_+(w<<10&4294967295|w>>>22),w=I+(_^(C|~T))+S[14]+2878612391&4294967295,I=C+(w<<15&4294967295|w>>>17),w=T+(C^(I|~_))+S[5]+4237533241&4294967295,T=I+(w<<21&4294967295|w>>>11),w=_+(I^(T|~C))+S[12]+1700485571&4294967295,_=T+(w<<6&4294967295|w>>>26),w=C+(T^(_|~I))+S[3]+2399980690&4294967295,C=_+(w<<10&4294967295|w>>>22),w=I+(_^(C|~T))+S[10]+4293915773&4294967295,I=C+(w<<15&4294967295|w>>>17),w=T+(C^(I|~_))+S[1]+2240044497&4294967295,T=I+(w<<21&4294967295|w>>>11),w=_+(I^(T|~C))+S[8]+1873313359&4294967295,_=T+(w<<6&4294967295|w>>>26),w=C+(T^(_|~I))+S[15]+4264355552&4294967295,C=_+(w<<10&4294967295|w>>>22),w=I+(_^(C|~T))+S[6]+2734768916&4294967295,I=C+(w<<15&4294967295|w>>>17),w=T+(C^(I|~_))+S[13]+1309151649&4294967295,T=I+(w<<21&4294967295|w>>>11),w=_+(I^(T|~C))+S[4]+4149444226&4294967295,_=T+(w<<6&4294967295|w>>>26),w=C+(T^(_|~I))+S[11]+3174756917&4294967295,C=_+(w<<10&4294967295|w>>>22),w=I+(_^(C|~T))+S[2]+718787259&4294967295,I=C+(w<<15&4294967295|w>>>17),w=T+(C^(I|~_))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(I+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+C&4294967295}i.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var T=_-this.blockSize,S=this.B,I=this.h,C=0;C<_;){if(I==0)for(;C<=T;)r(this,E,C),C+=this.blockSize;if(typeof E=="string"){for(;C<_;)if(S[I++]=E.charCodeAt(C++),I==this.blockSize){r(this,S),I=0;break}}else for(;C<_;)if(S[I++]=E[C++],I==this.blockSize){r(this,S),I=0;break}}this.h=I,this.o+=_},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var T=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=T&255,T/=256;for(this.u(E),E=Array(16),_=T=0;4>_;++_)for(var S=0;32>S;S+=8)E[T++]=this.g[_]>>>S&255;return E};function s(E,_){var T=l;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=_(E)}function a(E,_){this.h=_;for(var T=[],S=!0,I=E.length-1;0<=I;I--){var C=E[I]|0;S&&C==_||(T[I]=C,S=!1)}this.g=T}var l={};function u(E){return-128<=E&&128>E?s(E,function(_){return new a([_|0],0>_?-1:0)}):new a([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return M(h(-E));for(var _=[],T=1,S=0;E>=T;S++)_[S]=E/T|0,T*=4294967296;return new a(_,0)}function d(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return M(d(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(_,8)),S=g,I=0;I<E.length;I+=8){var C=Math.min(8,E.length-I),w=parseInt(E.substring(I,I+C),_);8>C?(C=h(Math.pow(_,C)),S=S.j(C).add(h(w))):(S=S.j(T),S=S.add(h(w)))}return S}var g=u(0),m=u(1),y=u(16777216);e=a.prototype,e.m=function(){if(V(this))return-M(this).m();for(var E=0,_=1,T=0;T<this.g.length;T++){var S=this.i(T);E+=(0<=S?S:4294967296+S)*_,_*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(V(this))return"-"+M(this).toString(E);for(var _=h(Math.pow(E,6)),T=this,S="";;){var I=x(T,_).g;T=b(T,I.j(_));var C=((0<T.g.length?T.g[0]:T.h)>>>0).toString(E);if(T=I,D(T))return C+S;for(;6>C.length;)C="0"+C;S=C+S}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function V(E){return E.h==-1}e.l=function(E){return E=b(this,E),V(E)?-1:D(E)?0:1};function M(E){for(var _=E.g.length,T=[],S=0;S<_;S++)T[S]=~E.g[S];return new a(T,~E.h).add(m)}e.abs=function(){return V(this)?M(this):this},e.add=function(E){for(var _=Math.max(this.g.length,E.g.length),T=[],S=0,I=0;I<=_;I++){var C=S+(this.i(I)&65535)+(E.i(I)&65535),w=(C>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);S=w>>>16,C&=65535,w&=65535,T[I]=w<<16|C}return new a(T,T[T.length-1]&-2147483648?-1:0)};function b(E,_){return E.add(M(_))}e.j=function(E){if(D(this)||D(E))return g;if(V(this))return V(E)?M(this).j(M(E)):M(M(this).j(E));if(V(E))return M(this.j(M(E)));if(0>this.l(y)&&0>E.l(y))return h(this.m()*E.m());for(var _=this.g.length+E.g.length,T=[],S=0;S<2*_;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var I=0;I<E.g.length;I++){var C=this.i(S)>>>16,w=this.i(S)&65535,me=E.i(I)>>>16,De=E.i(I)&65535;T[2*S+2*I]+=w*De,v(T,2*S+2*I),T[2*S+2*I+1]+=C*De,v(T,2*S+2*I+1),T[2*S+2*I+1]+=w*me,v(T,2*S+2*I+1),T[2*S+2*I+2]+=C*me,v(T,2*S+2*I+2)}for(S=0;S<_;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=_;S<2*_;S++)T[S]=0;return new a(T,0)};function v(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function R(E,_){this.g=E,this.h=_}function x(E,_){if(D(_))throw Error("division by zero");if(D(E))return new R(g,g);if(V(E))return _=x(M(E),_),new R(M(_.g),M(_.h));if(V(_))return _=x(E,M(_)),new R(M(_.g),_.h);if(30<E.g.length){if(V(E)||V(_))throw Error("slowDivide_ only works with positive integers.");for(var T=m,S=_;0>=S.l(E);)T=U(T),S=U(S);var I=q(T,1),C=q(S,1);for(S=q(S,2),T=q(T,2);!D(S);){var w=C.add(S);0>=w.l(E)&&(I=I.add(T),C=w),S=q(S,1),T=q(T,1)}return _=b(E,I.j(_)),new R(I,_)}for(I=g;0<=E.l(_);){for(T=Math.max(1,Math.floor(E.m()/_.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),C=h(T),w=C.j(_);V(w)||0<w.l(E);)T-=S,C=h(T),w=C.j(_);D(C)&&(C=m),I=I.add(C),E=b(E,w)}return new R(I,E)}e.A=function(E){return x(this,E).h},e.and=function(E){for(var _=Math.max(this.g.length,E.g.length),T=[],S=0;S<_;S++)T[S]=this.i(S)&E.i(S);return new a(T,this.h&E.h)},e.or=function(E){for(var _=Math.max(this.g.length,E.g.length),T=[],S=0;S<_;S++)T[S]=this.i(S)|E.i(S);return new a(T,this.h|E.h)},e.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),T=[],S=0;S<_;S++)T[S]=this.i(S)^E.i(S);return new a(T,this.h^E.h)};function U(E){for(var _=E.g.length+1,T=[],S=0;S<_;S++)T[S]=E.i(S)<<1|E.i(S-1)>>>31;return new a(T,E.h)}function q(E,_){var T=_>>5;_%=32;for(var S=E.g.length-T,I=[],C=0;C<S;C++)I[C]=0<_?E.i(C+T)>>>_|E.i(C+T+1)<<32-_:E.i(C+T);return new a(I,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,RA=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Fi=a}).apply(typeof V_<"u"?V_:typeof self<"u"?self:typeof window<"u"?window:{});var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IA,za,CA,mu,Ed,NA,DA,xA;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ql=="object"&&Ql];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var N=o[p];if(!(N in f))break t;f=f[N]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,p=!1,N={next:function(){if(!p&&f<o.length){var O=f++;return{value:c(O,o[O]),done:!1}}return p=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,p),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function y(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function D(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,N,O){for(var j=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)j[Tt-2]=arguments[Tt];return c.prototype[N].apply(p,j)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function M(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const N=o.length||0,O=p.length||0;o.length=N+O;for(let j=0;j<O;j++)o[N+j]=p[j]}else o.push(p)}}class b{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function x(o){return x[" "](o),o}x[" "]=function(){};var U=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function q(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function E(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function _(o){const c={};for(const f in o)c[f]=o[f];return c}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(o,c){let f,p;for(let N=1;N<arguments.length;N++){p=arguments[N];for(f in p)o[f]=p[f];for(let O=0;O<T.length;O++)f=T[O],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function I(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function C(o){l.setTimeout(()=>{throw o},0)}function w(){var o=gt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class me{constructor(){this.h=this.g=null}add(c,f){const p=De.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var De=new b(()=>new B,o=>o.reset());class B{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,X=!1,gt=new me,nt=()=>{const o=l.Promise.resolve(void 0);Z=()=>{o.then(hn)}};var hn=()=>{for(var o;o=w();){try{o.h.call(o.g)}catch(f){C(f)}var c=De;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}X=!1};function Ht(){this.s=this.s,this.C=this.C}Ht.prototype.s=!1,Ht.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ht.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function wt(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}wt.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function St(o,c){if(wt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(U){t:{try{x(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:se[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&St.aa.h.call(this)}}D(St,wt);var se={2:"touch",3:"pen",4:"mouse"};St.prototype.h=function(){St.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Je="closure_listenable_"+(1e6*Math.random()|0),ge=0;function mt(o,c,f,p,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=N,this.key=++ge,this.da=this.fa=!1}function Ot(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Le(o){this.src=o,this.g={},this.h=0}Le.prototype.add=function(o,c,f,p,N){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var j=hi(o,c,p,N);return-1<j?(c=o[j],f||(c.fa=!1)):(c=new mt(c,this.src,O,!!p,N),c.fa=f,o.push(c)),c};function fn(o,c){var f=c.type;if(f in o.g){var p=o.g[f],N=Array.prototype.indexOf.call(p,c,void 0),O;(O=0<=N)&&Array.prototype.splice.call(p,N,1),O&&(Ot(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function hi(o,c,f,p){for(var N=0;N<o.length;++N){var O=o[N];if(!O.da&&O.listener==c&&O.capture==!!f&&O.ha==p)return N}return-1}var Gr="closure_lm_"+(1e6*Math.random()|0),Fr={};function Vg(o,c,f,p,N){if(Array.isArray(c)){for(var O=0;O<c.length;O++)Vg(o,c[O],f,p,N);return null}return f=Pg(f),o&&o[Je]?o.K(c,f,h(p)?!!p.capture:!1,N):fb(o,c,f,!1,p,N)}function fb(o,c,f,p,N,O){if(!c)throw Error("Invalid event type");var j=h(N)?!!N.capture:!!N,Tt=sh(o);if(Tt||(o[Gr]=Tt=new Le(o)),f=Tt.add(c,f,p,j,O),f.proxy)return f;if(p=db(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)J||(N=j),N===void 0&&(N=!1),o.addEventListener(c.toString(),p,N);else if(o.attachEvent)o.attachEvent(kg(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function db(){function o(f){return c.call(o.src,o.listener,f)}const c=mb;return o}function Mg(o,c,f,p,N){if(Array.isArray(c))for(var O=0;O<c.length;O++)Mg(o,c[O],f,p,N);else p=h(p)?!!p.capture:!!p,f=Pg(f),o&&o[Je]?(o=o.i,c=String(c).toString(),c in o.g&&(O=o.g[c],f=hi(O,f,p,N),-1<f&&(Ot(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete o.g[c],o.h--)))):o&&(o=sh(o))&&(c=o.g[c.toString()],o=-1,c&&(o=hi(c,f,p,N)),(f=-1<o?c[o]:null)&&rh(f))}function rh(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Je])fn(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(kg(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=sh(c))?(fn(f,o),f.h==0&&(f.src=null,c[Gr]=null)):Ot(o)}}}function kg(o){return o in Fr?Fr[o]:Fr[o]="on"+o}function mb(o,c){if(o.da)o=!0;else{c=new St(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&rh(o),o=f.call(p,c)}return o}function sh(o){return o=o[Gr],o instanceof Le?o:null}var ah="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pg(o){return typeof o=="function"?o:(o[ah]||(o[ah]=function(c){return o.handleEvent(c)}),o[ah])}function pe(){Ht.call(this),this.i=new Le(this),this.M=this,this.F=null}D(pe,Ht),pe.prototype[Je]=!0,pe.prototype.removeEventListener=function(o,c,f,p){Mg(this,o,c,f,p)};function be(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new wt(c,o);else if(c instanceof wt)c.target=c.target||o;else{var N=c;c=new wt(p,o),S(c,N)}if(N=!0,f)for(var O=f.length-1;0<=O;O--){var j=c.g=f[O];N=ml(j,p,!0,c)&&N}if(j=c.g=o,N=ml(j,p,!0,c)&&N,N=ml(j,p,!1,c)&&N,f)for(O=0;O<f.length;O++)j=c.g=f[O],N=ml(j,p,!1,c)&&N}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)Ot(f[p]);delete o.g[c],o.h--}}this.F=null},pe.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},pe.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function ml(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,O=0;O<c.length;++O){var j=c[O];if(j&&!j.da&&j.capture==f){var Tt=j.listener,ae=j.ha||j.src;j.fa&&fn(o.i,j),N=Tt.call(ae,p)!==!1&&N}}return N&&!p.defaultPrevented}function Lg(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Ug(o){o.g=Lg(()=>{o.g=null,o.i&&(o.i=!1,Ug(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class gb extends Ht{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Ug(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function da(o){Ht.call(this),this.h=o,this.g={}}D(da,Ht);var jg=[];function zg(o){q(o.g,function(c,f){this.g.hasOwnProperty(f)&&rh(c)},o),o.g={}}da.prototype.N=function(){da.aa.N.call(this),zg(this)},da.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oh=l.JSON.stringify,pb=l.JSON.parse,yb=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function lh(){}lh.prototype.h=null;function Bg(o){return o.h||(o.h=o.i())}function qg(){}var ma={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function uh(){wt.call(this,"d")}D(uh,wt);function ch(){wt.call(this,"c")}D(ch,wt);var lr={},Hg=null;function gl(){return Hg=Hg||new pe}lr.La="serverreachability";function Gg(o){wt.call(this,lr.La,o)}D(Gg,wt);function ga(o){const c=gl();be(c,new Gg(c))}lr.STAT_EVENT="statevent";function Fg(o,c){wt.call(this,lr.STAT_EVENT,o),this.stat=c}D(Fg,wt);function we(o){const c=gl();be(c,new Fg(c,o))}lr.Ma="timingevent";function Qg(o,c){wt.call(this,lr.Ma,o),this.size=c}D(Qg,wt);function pa(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function ya(){this.g=!0}ya.prototype.xa=function(){this.g=!1};function _b(o,c,f,p,N,O){o.info(function(){if(o.g)if(O)for(var j="",Tt=O.split("&"),ae=0;ae<Tt.length;ae++){var ht=Tt[ae].split("=");if(1<ht.length){var ye=ht[0];ht=ht[1];var _e=ye.split("_");j=2<=_e.length&&_e[1]=="type"?j+(ye+"="+ht+"&"):j+(ye+"=redacted&")}}else j=null;else j=O;return"XMLHTTP REQ ("+p+") [attempt "+N+"]: "+c+`
`+f+`
`+j})}function vb(o,c,f,p,N,O,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+N+"]: "+c+`
`+f+`
`+O+" "+j})}function Qr(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Tb(o,f)+(p?" "+p:"")})}function Eb(o,c){o.info(function(){return"TIMEOUT: "+c})}ya.prototype.info=function(){};function Tb(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var N=p[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var j=1;j<N.length;j++)N[j]=""}}}}return oh(f)}catch{return c}}var pl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hh;function yl(){}D(yl,lh),yl.prototype.g=function(){return new XMLHttpRequest},yl.prototype.i=function(){return{}},hh=new yl;function fi(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new da(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yg}function Yg(){this.i=null,this.g="",this.h=!1}var Xg={},fh={};function dh(o,c,f){o.L=1,o.v=Tl(Pn(c)),o.m=f,o.P=!0,$g(o,null)}function $g(o,c){o.F=Date.now(),_l(o),o.A=Pn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),cp(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Yg,o.g=Cp(o.j,f?c:null,!o.m),0<o.O&&(o.M=new gb(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(jg[0]=N.toString()),N=jg);for(var O=0;O<N.length;O++){var j=Vg(f,N[O],p||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.H?_(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),ga(),_b(o.i,o.u,o.A,o.l,o.R,o.m)}fi.prototype.ca=function(o){o=o.target;const c=this.M;c&&Ln(o)==3?c.j():this.Y(o)},fi.prototype.Y=function(o){try{if(o==this.g)t:{const _e=Ln(this.g);var c=this.g.Ba();const Xr=this.g.Z();if(!(3>_e)&&(_e!=3||this.g&&(this.h.h||this.g.oa()||yp(this.g)))){this.J||_e!=4||c==7||(c==8||0>=Xr?ga(3):ga(2)),mh(this);var f=this.g.Z();this.X=f;e:if(Zg(this)){var p=yp(this.g);o="";var N=p.length,O=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ur(this),_a(this);var j="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(O&&c==N-1)});p.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,vb(this.i,this.u,this.A,this.l,this.R,_e,f),this.o){if(this.T&&!this.K){e:{if(this.g){var Tt,ae=this.g;if((Tt=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Tt)){var ht=Tt;break e}}ht=null}if(f=ht)Qr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gh(this,f);else{this.o=!1,this.s=3,we(12),ur(this),_a(this);break t}}if(this.P){f=!0;let dn;for(;!this.J&&this.C<j.length;)if(dn=Ab(this,j),dn==fh){_e==4&&(this.s=4,we(14),f=!1),Qr(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==Xg){this.s=4,we(15),Qr(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Qr(this.i,this.l,dn,null),gh(this,dn);if(Zg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||j.length!=0||this.h.h||(this.s=1,we(16),f=!1),this.o=this.o&&f,!f)Qr(this.i,this.l,j,"[Invalid Chunked Response]"),ur(this),_a(this);else if(0<j.length&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.ba&&!ye.M&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Th(ye),ye.M=!0,we(11))}}else Qr(this.i,this.l,j,null),gh(this,j);_e==4&&ur(this),this.o&&!this.J&&(_e==4?bp(this.j,this):(this.o=!1,_l(this)))}else jb(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,we(12)):(this.s=0,we(13)),ur(this),_a(this)}}}catch{}finally{}};function Zg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Ab(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?fh:(f=Number(c.substring(f,p)),isNaN(f)?Xg:(p+=1,p+f>c.length?fh:(c=c.slice(p,p+f),o.C=p+f,c)))}fi.prototype.cancel=function(){this.J=!0,ur(this)};function _l(o){o.S=Date.now()+o.I,Wg(o,o.I)}function Wg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=pa(m(o.ba,o),c)}function mh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}fi.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Eb(this.i,this.A),this.L!=2&&(ga(),we(17)),ur(this),this.s=2,_a(this)):Wg(this,this.S-o)};function _a(o){o.j.G==0||o.J||bp(o.j,o)}function ur(o){mh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,zg(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function gh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||ph(f.h,o))){if(!o.K&&ph(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var N=p;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Il(f),wl(f);else break t;Eh(f),we(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=pa(m(f.Za,f),6e3));if(1>=ep(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else hr(f,11)}else if((o.K||f.g==o)&&Il(f),!v(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let ht=N[c];if(f.T=ht[0],ht=ht[1],f.G==2)if(ht[0]=="c"){f.K=ht[1],f.ia=ht[2];const ye=ht[3];ye!=null&&(f.la=ye,f.j.info("VER="+f.la));const _e=ht[4];_e!=null&&(f.Aa=_e,f.j.info("SVER="+f.Aa));const Xr=ht[5];Xr!=null&&typeof Xr=="number"&&0<Xr&&(p=1.5*Xr,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const dn=o.g;if(dn){const Nl=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nl){var O=p.h;O.g||Nl.indexOf("spdy")==-1&&Nl.indexOf("quic")==-1&&Nl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(yh(O,O.h),O.h=null))}if(p.D){const Ah=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ah&&(p.ya=Ah,Rt(p.I,p.D,Ah))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var j=o;if(p.qa=Ip(p,p.J?p.ia:null,p.W),j.K){np(p.h,j);var Tt=j,ae=p.L;ae&&(Tt.I=ae),Tt.B&&(mh(Tt),_l(Tt)),p.g=j}else Ap(p);0<f.i.length&&Rl(f)}else ht[0]!="stop"&&ht[0]!="close"||hr(f,7);else f.G==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?hr(f,7):vh(f):ht[0]!="noop"&&f.l&&f.l.ta(ht),f.v=0)}}ga(4)}catch{}}var Sb=class{constructor(o,c){this.g=o,this.map=c}};function Jg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tp(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function ep(o){return o.h?1:o.g?o.g.size:0}function ph(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function yh(o,c){o.g?o.g.add(c):o.h=c}function np(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Jg.prototype.cancel=function(){if(this.i=ip(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function ip(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function bb(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function wb(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function rp(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=wb(o),p=bb(o),N=p.length,O=0;O<N;O++)c.call(void 0,p[O],f&&f[O],o)}var sp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rb(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),N=null;if(0<=p){var O=o[f].substring(0,p);N=o[f].substring(p+1)}else O=o[f];c(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function cr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof cr){this.h=o.h,vl(this,o.j),this.o=o.o,this.g=o.g,El(this,o.s),this.l=o.l;var c=o.i,f=new Ta;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),ap(this,f),this.m=o.m}else o&&(c=String(o).match(sp))?(this.h=!1,vl(this,c[1]||"",!0),this.o=va(c[2]||""),this.g=va(c[3]||"",!0),El(this,c[4]),this.l=va(c[5]||"",!0),ap(this,c[6]||"",!0),this.m=va(c[7]||"")):(this.h=!1,this.i=new Ta(null,this.h))}cr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Ea(c,op,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Ea(c,op,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Ea(f,f.charAt(0)=="/"?Nb:Cb,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Ea(f,xb)),o.join("")};function Pn(o){return new cr(o)}function vl(o,c,f){o.j=f?va(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function El(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function ap(o,c,f){c instanceof Ta?(o.i=c,Ob(o.i,o.h)):(f||(c=Ea(c,Db)),o.i=new Ta(c,o.h))}function Rt(o,c,f){o.i.set(c,f)}function Tl(o){return Rt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function va(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ea(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,Ib),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Ib(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var op=/[#\/\?@]/g,Cb=/[#\?:]/g,Nb=/[#\?]/g,Db=/[#\?@]/g,xb=/#/g;function Ta(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function di(o){o.g||(o.g=new Map,o.h=0,o.i&&Rb(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=Ta.prototype,e.add=function(o,c){di(this),this.i=null,o=Kr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function lp(o,c){di(o),c=Kr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function up(o,c){return di(o),c=Kr(o,c),o.g.has(c)}e.forEach=function(o,c){di(this),this.g.forEach(function(f,p){f.forEach(function(N){o.call(c,N,p,this)},this)},this)},e.na=function(){di(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const N=o[p];for(let O=0;O<N.length;O++)f.push(c[p])}return f},e.V=function(o){di(this);let c=[];if(typeof o=="string")up(this,o)&&(c=c.concat(this.g.get(Kr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return di(this),this.i=null,o=Kr(this,o),up(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function cp(o,c,f){lp(o,c),0<f.length&&(o.i=null,o.g.set(Kr(o,c),V(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const O=encodeURIComponent(String(p)),j=this.V(p);for(p=0;p<j.length;p++){var N=O;j[p]!==""&&(N+="="+encodeURIComponent(String(j[p]))),o.push(N)}}return this.i=o.join("&")};function Kr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function Ob(o,c){c&&!o.j&&(di(o),o.i=null,o.g.forEach(function(f,p){var N=p.toLowerCase();p!=N&&(lp(this,p),cp(this,N,f))},o)),o.j=c}function Vb(o,c){const f=new ya;if(l.Image){const p=new Image;p.onload=y(mi,f,"TestLoadImage: loaded",!0,c,p),p.onerror=y(mi,f,"TestLoadImage: error",!1,c,p),p.onabort=y(mi,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=y(mi,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function Mb(o,c){const f=new ya,p=new AbortController,N=setTimeout(()=>{p.abort(),mi(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(O=>{clearTimeout(N),O.ok?mi(f,"TestPingServer: ok",!0,c):mi(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),mi(f,"TestPingServer: error",!1,c)})}function mi(o,c,f,p,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),p(f)}catch{}}function kb(){this.g=new yb}function Pb(o,c,f){const p=f||"";try{rp(o,function(N,O){let j=N;h(N)&&(j=oh(N)),c.push(p+O+"="+encodeURIComponent(j))})}catch(N){throw c.push(p+"type="+encodeURIComponent("_badmap")),N}}function Al(o){this.l=o.Ub||null,this.j=o.eb||!1}D(Al,lh),Al.prototype.g=function(){return new Sl(this.l,this.j)},Al.prototype.i=function(o){return function(){return o}}({});function Sl(o,c){pe.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Sl,pe),e=Sl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Sa(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Aa(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Sa(this)),this.g&&(this.readyState=3,Sa(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hp(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function hp(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Aa(this):Sa(this),this.readyState==3&&hp(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Aa(this))},e.Qa=function(o){this.g&&(this.response=o,Aa(this))},e.ga=function(){this.g&&Aa(this)};function Aa(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Sa(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Sa(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function fp(o){let c="";return q(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function _h(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=fp(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Rt(o,c,f))}function Lt(o){pe.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Lt,pe);var Lb=/^https?$/i,Ub=["POST","PUT"];e=Lt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hh.g(),this.v=this.o?Bg(this.o):Bg(hh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(O){dp(this,O);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var N in p)f.set(N,p[N]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const O of p.keys())f.set(O,p.get(O));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ub,c,void 0))||p||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,j]of f)this.g.setRequestHeader(O,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pp(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){dp(this,O)}};function dp(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,mp(o),bl(o)}function mp(o){o.A||(o.A=!0,be(o,"complete"),be(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,be(this,"complete"),be(this,"abort"),bl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bl(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?gp(this):this.bb())},e.bb=function(){gp(this)};function gp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Ln(o)!=4||o.Z()!=2)){if(o.u&&Ln(o)==4)Lg(o.Ea,0,o);else if(be(o,"readystatechange"),Ln(o)==4){o.h=!1;try{const j=o.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=j===0){var N=String(o.D).match(sp)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),p=!Lb.test(N?N.toLowerCase():"")}f=p}if(f)be(o,"complete"),be(o,"success");else{o.m=6;try{var O=2<Ln(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",mp(o)}}finally{bl(o)}}}}function bl(o,c){if(o.g){pp(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||be(o,"ready");try{f.onreadystatechange=p}catch{}}}function pp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Ln(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),pb(c)}};function yp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function jb(o){const c={};o=(o.g&&2<=Ln(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(v(o[p]))continue;var f=I(o[p]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=c[N]||[];c[N]=O,O.push(f)}E(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ba(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function _p(o){this.Aa=0,this.i=[],this.j=new ya,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ba("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ba("baseRetryDelayMs",5e3,o),this.cb=ba("retryDelaySeedMs",1e4,o),this.Wa=ba("forwardChannelMaxRetries",2,o),this.wa=ba("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Jg(o&&o.concurrentRequestLimit),this.Da=new kb,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=_p.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){we(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=Ip(this,null,this.W),Rl(this)};function vh(o){if(vp(o),o.G==3){var c=o.U++,f=Pn(o.I);if(Rt(f,"SID",o.K),Rt(f,"RID",c),Rt(f,"TYPE","terminate"),wa(o,f),c=new fi(o,o.j,c),c.L=2,c.v=Tl(Pn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Cp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),_l(c)}Rp(o)}function wl(o){o.g&&(Th(o),o.g.cancel(),o.g=null)}function vp(o){wl(o),o.u&&(l.clearTimeout(o.u),o.u=null),Il(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Rl(o){if(!tp(o.h)&&!o.s){o.s=!0;var c=o.Ga;Z||nt(),X||(Z(),X=!0),gt.add(c,o),o.B=0}}function zb(o,c){return ep(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=pa(m(o.Ga,o,c),wp(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new fi(this,this.j,o);let O=this.o;if(this.S&&(O?(O=_(O),S(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=Tp(this,N,c),f=Pn(this.I),Rt(f,"RID",o),Rt(f,"CVER",22),this.D&&Rt(f,"X-HTTP-Session-Id",this.D),wa(this,f),O&&(this.O?c="headers="+encodeURIComponent(String(fp(O)))+"&"+c:this.m&&_h(f,this.m,O)),yh(this.h,N),this.Ua&&Rt(f,"TYPE","init"),this.P?(Rt(f,"$req",c),Rt(f,"SID","null"),N.T=!0,dh(N,f,null)):dh(N,f,c),this.G=2}}else this.G==3&&(o?Ep(this,o):this.i.length==0||tp(this.h)||Ep(this))};function Ep(o,c){var f;c?f=c.l:f=o.U++;const p=Pn(o.I);Rt(p,"SID",o.K),Rt(p,"RID",f),Rt(p,"AID",o.T),wa(o,p),o.m&&o.o&&_h(p,o.m,o.o),f=new fi(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Tp(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),yh(o.h,f),dh(f,p,c)}function wa(o,c){o.H&&q(o.H,function(f,p){Rt(c,p,f)}),o.l&&rp({},function(f,p){Rt(c,p,f)})}function Tp(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let O=-1;for(;;){const j=["count="+f];O==-1?0<f?(O=N[0].g,j.push("ofs="+O)):O=0:j.push("ofs="+O);let Tt=!0;for(let ae=0;ae<f;ae++){let ht=N[ae].g;const ye=N[ae].map;if(ht-=O,0>ht)O=Math.max(0,N[ae].g-100),Tt=!1;else try{Pb(ye,j,"req"+ht+"_")}catch{p&&p(ye)}}if(Tt){p=j.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function Ap(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;Z||nt(),X||(Z(),X=!0),gt.add(c,o),o.v=0}}function Eh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=pa(m(o.Fa,o),wp(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Sp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=pa(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,we(10),wl(this),Sp(this))};function Th(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Sp(o){o.g=new fi(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Pn(o.qa);Rt(c,"RID","rpc"),Rt(c,"SID",o.K),Rt(c,"AID",o.T),Rt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Rt(c,"TO",o.ja),Rt(c,"TYPE","xmlhttp"),wa(o,c),o.m&&o.o&&_h(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Tl(Pn(c)),f.m=null,f.P=!0,$g(f,o)}e.Za=function(){this.C!=null&&(this.C=null,wl(this),Eh(this),we(19))};function Il(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function bp(o,c){var f=null;if(o.g==c){Il(o),Th(o),o.g=null;var p=2}else if(ph(o.h,c))f=c.D,np(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;p=gl(),be(p,new Qg(p,f)),Rl(o)}else Ap(o);else if(N=c.s,N==3||N==0&&0<c.X||!(p==1&&zb(o,c)||p==2&&Eh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:hr(o,5);break;case 4:hr(o,10);break;case 3:hr(o,6);break;default:hr(o,2)}}}function wp(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function hr(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const N=!p;p=new cr(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||vl(p,"https"),Tl(p),N?Vb(p.toString(),f):Mb(p.toString(),f)}else we(2);o.G=0,o.l&&o.l.sa(c),Rp(o),vp(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))};function Rp(o){if(o.G=0,o.ka=[],o.l){const c=ip(o.h);(c.length!=0||o.i.length!=0)&&(M(o.ka,c),M(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Ip(o,c,f){var p=f instanceof cr?Pn(f):new cr(f);if(p.g!="")c&&(p.g=c+"."+p.g),El(p,p.s);else{var N=l.location;p=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var O=new cr(null);p&&vl(O,p),c&&(O.g=c),N&&El(O,N),f&&(O.l=f),p=O}return f=o.D,c=o.ya,f&&c&&Rt(p,f,c),Rt(p,"VER",o.la),wa(o,p),p}function Cp(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Lt(new Al({eb:f})):new Lt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Np(){}e=Np.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Cl(){}Cl.prototype.g=function(o,c){return new Ue(o,c)};function Ue(o,c){pe.call(this),this.g=new _p(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Yr(this)}D(Ue,pe),Ue.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ue.prototype.close=function(){vh(this.g)},Ue.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=oh(o),o=f);c.i.push(new Sb(c.Ya++,o)),c.G==3&&Rl(c)},Ue.prototype.N=function(){this.g.l=null,delete this.j,vh(this.g),delete this.g,Ue.aa.N.call(this)};function Dp(o){uh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}D(Dp,uh);function xp(){ch.call(this),this.status=1}D(xp,ch);function Yr(o){this.g=o}D(Yr,Np),Yr.prototype.ua=function(){be(this.g,"a")},Yr.prototype.ta=function(o){be(this.g,new Dp(o))},Yr.prototype.sa=function(o){be(this.g,new xp)},Yr.prototype.ra=function(){be(this.g,"b")},Cl.prototype.createWebChannel=Cl.prototype.g,Ue.prototype.send=Ue.prototype.o,Ue.prototype.open=Ue.prototype.m,Ue.prototype.close=Ue.prototype.close,xA=function(){return new Cl},DA=function(){return gl()},NA=lr,Ed={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pl.NO_ERROR=0,pl.TIMEOUT=8,pl.HTTP_ERROR=6,mu=pl,Kg.COMPLETE="complete",CA=Kg,qg.EventType=ma,ma.OPEN="a",ma.CLOSE="b",ma.ERROR="c",ma.MESSAGE="d",pe.prototype.listen=pe.prototype.K,za=qg,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,IA=Lt}).apply(typeof Ql<"u"?Ql:typeof self<"u"?self:typeof window<"u"?window:{});const M_="@firebase/firestore",k_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ee.UNAUTHENTICATED=new Ee(null),Ee.GOOGLE_CREDENTIALS=new Ee("google-credentials-uid"),Ee.FIRST_PARTY=new Ee("first-party-uid"),Ee.MOCK_USER=new Ee("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let la="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new Lm("@firebase/firestore");function ns(){return Vr.logLevel}function H(e,...t){if(Vr.logLevel<=st.DEBUG){const n=t.map(Ym);Vr.debug(`Firestore (${la}): ${e}`,...n)}}function si(e,...t){if(Vr.logLevel<=st.ERROR){const n=t.map(Ym);Vr.error(`Firestore (${la}): ${e}`,...n)}}function Qs(e,...t){if(Vr.logLevel<=st.WARN){const n=t.map(Ym);Vr.warn(`Firestore (${la}): ${e}`,...n)}}function Ym(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,OA(e,i,n)}function OA(e,t,n){let i=`FIRESTORE (${la}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw si(i),new Error(i)}function ct(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||OA(t,r,i)}function W(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends ui{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class jN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ee.UNAUTHENTICATED))}shutdown(){}}class zN{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BN{constructor(t){this.t=t,this.currentUser=Ee.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ct(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wn,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ct(typeof i.accessToken=="string",31837,{l:i}),new VA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ct(t===null||typeof t=="string",2055,{h:t}),new Ee(t)}}class qN{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Ee.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HN{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new qN(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Ee.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class P_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GN{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,on(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ct(this.o===void 0,3512);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new P_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new P_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=FN(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function at(e,t){return e<t?-1:e>t?1:0}function Td(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return ff(r)===ff(s)?at(r,s):ff(r)?1:-1}return at(e.length,t.length)}const QN=55296,KN=57343;function ff(e){const t=e.charCodeAt(0);return t>=QN&&t<=KN}function Ks(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="__name__";class An{constructor(t,n,i){n===void 0?n=0:n>t.length&&Q(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Q(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return An.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof An?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=An.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return at(t.length,n.length)}static compareSegments(t,n){const i=An.isNumericId(t),r=An.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?An.extractNumericId(t).compare(An.extractNumericId(n)):Td(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Fi.fromString(t.substring(4,t.length-2))}}class Et extends An{construct(t,n,i){return new Et(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Et(n)}static emptyPath(){return new Et([])}}const YN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ce extends An{construct(t,n,i){return new ce(t,n,i)}static isValidIdentifier(t){return YN.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ce.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===L_}static keyField(){return new ce([L_])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ce(n)}static emptyPath(){return new ce([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.path=t}static fromPath(t){return new G(Et.fromString(t))}static fromName(t){return new G(Et.fromString(t).popFirst(5))}static empty(){return new G(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Et.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Et.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new G(new Et(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(e,t,n){if(!n)throw new z(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function XN(e,t,n,i){if(t===!0&&i===!0)throw new z(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function U_(e){if(!G.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function j_(e){if(G.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function kA(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function zc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Q(12329,{type:typeof e})}function $e(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zc(e);throw new z(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(e,t){const n={typeString:e};return t&&(n.value=t),n}function sl(e,t){if(!kA(e))throw new z(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new z(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=-62135596800,B_=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(t){return It.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*B_);return new It(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<z_)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/B_}_compareTo(t){return this.seconds===t.seconds?at(this.nanoseconds,t.nanoseconds):at(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(sl(t,It._jsonSchema))return new It(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-z_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:Kt("string",It._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{static fromTimestamp(t){return new K(t)}static min(){return new K(new It(0,0))}static max(){return new K(new It(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=-1;function $N(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=K.fromTimestamp(i===1e9?new It(n+1,0):new It(n,i));return new Zi(r,G.empty(),t)}function ZN(e){return new Zi(e.readTime,e.key,No)}class Zi{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Zi(K.min(),G.empty(),No)}static max(){return new Zi(K.max(),G.empty(),No)}}function WN(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=G.comparator(e.documentKey,t.documentKey),n!==0?n:at(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==JN)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(r=>r?P.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new P((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new P((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function eD(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ca(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Bc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=-1;function al(e){return e==null}function sc(e){return e===0&&1/e==-1/0}function nD(e){return typeof e=="number"&&Number.isInteger(e)&&!sc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="";function iD(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=q_(t)),t=rD(e.get(n),t);return q_(t)}function rD(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case PA:n+="";break;default:n+=s}}return n}function q_(e){return e+PA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ar(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function LA(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(t,n){this.comparator=t,this.root=n||le.EMPTY}insert(t,n){return new Pt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,le.BLACK,null,null))}remove(t){return new Pt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,le.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Kl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Kl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Kl(this.root,t,this.comparator,!0)}}class Kl{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class le{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??le.RED,this.left=r??le.EMPTY,this.right=s??le.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new le(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return le.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return le.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,le.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,le.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Q(27949);return t+(this.isRed()?0:1)}}le.EMPTY=null,le.RED=!0,le.BLACK=!1;le.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new le(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.comparator=t,this.data=new Pt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new G_(this.data.getIterator())}getIteratorFrom(t){return new G_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Zt)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Zt(this.comparator);return n.data=t,n}}class G_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t){this.fields=t,t.sort(ce.comparator)}static empty(){return new Fe([])}unionWith(t){let n=new Zt(ce.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Fe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ks(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new UA("Invalid base64 string: "+s):s}}(t);return new de(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new de(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return at(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}de.EMPTY_BYTE_STRING=new de("");const sD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wi(e){if(ct(!!e,39018),typeof e=="string"){let t=0;const n=sD.exec(e);if(ct(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:qt(e.seconds),nanos:qt(e.nanos)}}function qt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Ji(e){return typeof e=="string"?de.fromBase64String(e):de.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="server_timestamp",zA="__type__",BA="__previous_value__",qA="__local_write_time__";function Zm(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[zA])==null?void 0:i.stringValue)===jA}function qc(e){const t=e.mapValue.fields[BA];return Zm(t)?qc(t):t}function Do(e){const t=Wi(e.mapValue.fields[qA].timestampValue);return new It(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const ac="(default)";class xo{constructor(t,n){this.projectId=t,this.database=n||ac}static empty(){return new xo("","")}get isDefaultDatabase(){return this.database===ac}isEqual(t){return t instanceof xo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="__type__",oD="__max__",Yl={mapValue:{}},GA="__vector__",oc="value";function tr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zm(e)?4:uD(e)?9007199254740991:lD(e)?10:11:Q(28295,{value:e})}function Vn(e,t){if(e===t)return!0;const n=tr(e);if(n!==tr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Do(e).isEqual(Do(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Wi(r.timestampValue),l=Wi(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return Ji(r.bytesValue).isEqual(Ji(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return qt(r.geoPointValue.latitude)===qt(s.geoPointValue.latitude)&&qt(r.geoPointValue.longitude)===qt(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return qt(r.integerValue)===qt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=qt(r.doubleValue),l=qt(s.doubleValue);return a===l?sc(a)===sc(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return Ks(e.arrayValue.values||[],t.arrayValue.values||[],Vn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(H_(a)!==H_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Vn(a[u],l[u])))return!1;return!0}(e,t);default:return Q(52216,{left:e})}}function Oo(e,t){return(e.values||[]).find(n=>Vn(n,t))!==void 0}function Ys(e,t){if(e===t)return 0;const n=tr(e),i=tr(t);if(n!==i)return at(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return at(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=qt(s.integerValue||s.doubleValue),u=qt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return F_(e.timestampValue,t.timestampValue);case 4:return F_(Do(e),Do(t));case 5:return Td(e.stringValue,t.stringValue);case 6:return function(s,a){const l=Ji(s),u=Ji(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=at(l[h],u[h]);if(d!==0)return d}return at(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=at(qt(s.latitude),qt(a.latitude));return l!==0?l:at(qt(s.longitude),qt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Q_(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,y,D,V;const l=s.fields||{},u=a.fields||{},h=(m=l[oc])==null?void 0:m.arrayValue,d=(y=u[oc])==null?void 0:y.arrayValue,g=at(((D=h==null?void 0:h.values)==null?void 0:D.length)||0,((V=d==null?void 0:d.values)==null?void 0:V.length)||0);return g!==0?g:Q_(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===Yl.mapValue&&a===Yl.mapValue)return 0;if(s===Yl.mapValue)return 1;if(a===Yl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=Td(u[g],d[g]);if(m!==0)return m;const y=Ys(l[u[g]],h[d[g]]);if(y!==0)return y}return at(u.length,d.length)}(e.mapValue,t.mapValue);default:throw Q(23264,{he:n})}}function F_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return at(e,t);const n=Wi(e),i=Wi(t),r=at(n.seconds,i.seconds);return r!==0?r:at(n.nanos,i.nanos)}function Q_(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Ys(n[r],i[r]);if(s)return s}return at(n.length,i.length)}function Xs(e){return Ad(e)}function Ad(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Wi(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Ji(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return G.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Ad(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${Ad(n.fields[a])}`;return r+"}"}(e.mapValue):Q(61005,{value:e})}function gu(e){switch(tr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=qc(e);return t?16+gu(t):16;case 5:return 2*e.stringValue.length;case 6:return Ji(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+gu(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return ar(i.fields,(s,a)=>{r+=s.length+gu(a)}),r}(e.mapValue);default:throw Q(13486,{value:e})}}function K_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Sd(e){return!!e&&"integerValue"in e}function Wm(e){return!!e&&"arrayValue"in e}function Y_(e){return!!e&&"nullValue"in e}function X_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function pu(e){return!!e&&"mapValue"in e}function lD(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[HA])==null?void 0:i.stringValue)===GA}function oo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return ar(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=oo(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=oo(e.arrayValue.values[n]);return t}return{...e}}function uD(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===oD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.value=t}static empty(){return new Ie({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!pu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=oo(n)}setAll(t){let n=ce.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=oo(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());pu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Vn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];pu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){ar(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Ie(oo(this.value))}}function FA(e){const t=[];return ar(e.fields,(n,i)=>{const r=new ce([n]);if(pu(i)){const s=FA(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new Fe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ne(t,0,K.min(),K.min(),K.min(),Ie.empty(),0)}static newFoundDocument(t,n,i,r){return new ne(t,1,n,K.min(),i,r,0)}static newNoDocument(t,n){return new ne(t,2,n,K.min(),K.min(),Ie.empty(),0)}static newUnknownDocument(t,n){return new ne(t,3,n,K.min(),K.min(),Ie.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ie.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ie.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ne&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ne(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(t,n){this.position=t,this.inclusive=n}}function $_(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=G.comparator(G.fromName(a.referenceValue),n.key):i=Ys(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Z_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Vn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(t,n="asc"){this.field=t,this.dir=n}}function cD(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{}class Qt extends QA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new fD(t,n,i):n==="array-contains"?new gD(t,i):n==="in"?new pD(t,i):n==="not-in"?new yD(t,i):n==="array-contains-any"?new _D(t,i):new Qt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new dD(t,i):new mD(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ys(n,this.value)):n!==null&&tr(this.value)===tr(n)&&this.matchesComparison(Ys(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vn extends QA{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new vn(t,n)}matches(t){return KA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function KA(e){return e.op==="and"}function YA(e){return hD(e)&&KA(e)}function hD(e){for(const t of e.filters)if(t instanceof vn)return!1;return!0}function bd(e){if(e instanceof Qt)return e.field.canonicalString()+e.op.toString()+Xs(e.value);if(YA(e))return e.filters.map(t=>bd(t)).join(",");{const t=e.filters.map(n=>bd(n)).join(",");return`${e.op}(${t})`}}function XA(e,t){return e instanceof Qt?function(i,r){return r instanceof Qt&&i.op===r.op&&i.field.isEqual(r.field)&&Vn(i.value,r.value)}(e,t):e instanceof vn?function(i,r){return r instanceof vn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&XA(a,r.filters[l]),!0):!1}(e,t):void Q(19439)}function $A(e){return e instanceof Qt?function(n){return`${n.field.canonicalString()} ${n.op} ${Xs(n.value)}`}(e):e instanceof vn?function(n){return n.op.toString()+" {"+n.getFilters().map($A).join(" ,")+"}"}(e):"Filter"}class fD extends Qt{constructor(t,n,i){super(t,n,i),this.key=G.fromName(i.referenceValue)}matches(t){const n=G.comparator(t.key,this.key);return this.matchesComparison(n)}}class dD extends Qt{constructor(t,n){super(t,"in",n),this.keys=ZA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class mD extends Qt{constructor(t,n){super(t,"not-in",n),this.keys=ZA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function ZA(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>G.fromName(i.referenceValue))}class gD extends Qt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Wm(n)&&Oo(n.arrayValue,this.value)}}class pD extends Qt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Oo(this.value.arrayValue,n)}}class yD extends Qt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Oo(this.value.arrayValue,n)}}class _D extends Qt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Wm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Oo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function W_(e,t=null,n=[],i=[],r=null,s=null,a=null){return new vD(e,t,n,i,r,s,a)}function Jm(e){const t=W(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>bd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),al(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Xs(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Xs(i)).join(",")),t.Te=n}return t.Te}function tg(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!cD(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!XA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Z_(e.startAt,t.startAt)&&Z_(e.endAt,t.endAt)}function wd(e){return G.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ED(e,t,n,i,r,s,a,l){return new ha(e,t,n,i,r,s,a,l)}function Hc(e){return new ha(e)}function J_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function WA(e){return e.collectionGroup!==null}function lo(e){const t=W(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Zt(ce.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Vo(s,i))}),n.has(ce.keyField().canonicalString())||t.Ie.push(new Vo(ce.keyField(),i))}return t.Ie}function Dn(e){const t=W(e);return t.Ee||(t.Ee=TD(t,lo(e))),t.Ee}function TD(e,t){if(e.limitType==="F")return W_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Vo(r.field,s)});const n=e.endAt?new lc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new lc(e.startAt.position,e.startAt.inclusive):null;return W_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Rd(e,t){const n=e.filters.concat([t]);return new ha(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Id(e,t,n){return new ha(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Gc(e,t){return tg(Dn(e),Dn(t))&&e.limitType===t.limitType}function JA(e){return`${Jm(Dn(e))}|lt:${e.limitType}`}function is(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>$A(r)).join(", ")}]`),al(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Xs(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Xs(r)).join(",")),`Target(${i})`}(Dn(e))}; limitType=${e.limitType})`}function Fc(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):G.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of lo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=$_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,lo(i),r)||i.endAt&&!function(a,l,u){const h=$_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,lo(i),r))}(e,t)}function AD(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function tS(e){return(t,n)=>{let i=!1;for(const r of lo(e)){const s=SD(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function SD(e,t,n){const i=e.field.isKeyField()?G.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ys(u,h):Q(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Q(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ar(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return LA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=new Pt(G.comparator);function ai(){return bD}const eS=new Pt(G.comparator);function Ba(...e){let t=eS;for(const n of e)t=t.insert(n.key,n);return t}function nS(e){let t=eS;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function yr(){return uo()}function iS(){return uo()}function uo(){return new Br(e=>e.toString(),(e,t)=>e.isEqual(t))}const wD=new Pt(G.comparator),RD=new Zt(G.comparator);function ot(...e){let t=RD;for(const n of e)t=t.add(n);return t}const ID=new Zt(at);function CD(){return ID}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sc(t)?"-0":t}}function rS(e){return{integerValue:""+e}}function ND(e,t){return nD(t)?rS(t):eg(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(){this._=void 0}}function DD(e,t,n){return e instanceof Mo?function(r,s){const a={fields:{[zA]:{stringValue:jA},[qA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Zm(s)&&(s=qc(s)),s&&(a.fields[BA]=s),{mapValue:a}}(n,t):e instanceof ko?aS(e,t):e instanceof Po?oS(e,t):function(r,s){const a=sS(r,s),l=tv(a)+tv(r.Ae);return Sd(a)&&Sd(r.Ae)?rS(l):eg(r.serializer,l)}(e,t)}function xD(e,t,n){return e instanceof ko?aS(e,t):e instanceof Po?oS(e,t):n}function sS(e,t){return e instanceof uc?function(i){return Sd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class Mo extends Qc{}class ko extends Qc{constructor(t){super(),this.elements=t}}function aS(e,t){const n=lS(t);for(const i of e.elements)n.some(r=>Vn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Po extends Qc{constructor(t){super(),this.elements=t}}function oS(e,t){let n=lS(t);for(const i of e.elements)n=n.filter(r=>!Vn(r,i));return{arrayValue:{values:n}}}class uc extends Qc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function tv(e){return qt(e.integerValue||e.doubleValue)}function lS(e){return Wm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(t,n){this.field=t,this.transform=n}}function VD(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof ko&&r instanceof ko||i instanceof Po&&r instanceof Po?Ks(i.elements,r.elements,Vn):i instanceof uc&&r instanceof uc?Vn(i.Ae,r.Ae):i instanceof Mo&&r instanceof Mo}(e.transform,t.transform)}class MD{constructor(t,n){this.version=t,this.transformResults=n}}class he{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new he}static exists(t){return new he(void 0,t)}static updateTime(t){return new he(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function yu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Kc{}function uS(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Yc(e.key,he.none()):new ol(e.key,e.data,he.none());{const n=e.data,i=Ie.empty();let r=new Zt(ce.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new or(e.key,i,new Fe(r.toArray()),he.none())}}function kD(e,t,n){e instanceof ol?function(r,s,a){const l=r.value.clone(),u=nv(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof or?function(r,s,a){if(!yu(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=nv(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(cS(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function co(e,t,n,i){return e instanceof ol?function(s,a,l,u){if(!yu(s.precondition,a))return l;const h=s.value.clone(),d=iv(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof or?function(s,a,l,u){if(!yu(s.precondition,a))return l;const h=iv(s.fieldTransforms,u,a),d=a.data;return d.setAll(cS(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(s,a,l){return yu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function PD(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=sS(i.transform,r||null);s!=null&&(n===null&&(n=Ie.empty()),n.set(i.field,s))}return n||null}function ev(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ks(i,r,(s,a)=>VD(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ol extends Kc{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class or extends Kc{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function cS(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function nv(e,t,n){const i=new Map;ct(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,xD(a,l,n[r]))}return i}function iv(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,DD(s,a,t))}return i}class Yc extends Kc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hS extends Kc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&kD(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=co(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=co(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=iS();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=uS(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(K.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ot())}isEqual(t){return this.batchId===t.batchId&&Ks(this.mutations,t.mutations,(n,i)=>ev(n,i))&&Ks(this.baseMutations,t.baseMutations,(n,i)=>ev(n,i))}}class ng{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){ct(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return wD}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new ng(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,lt;function fS(e){switch(e){case k.OK:return Q(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return Q(15467,{code:e})}}function dS(e){if(e===void 0)return si("GRPC error has no .code"),k.UNKNOWN;switch(e){case Gt.OK:return k.OK;case Gt.CANCELLED:return k.CANCELLED;case Gt.UNKNOWN:return k.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return k.INTERNAL;case Gt.UNAVAILABLE:return k.UNAVAILABLE;case Gt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Gt.NOT_FOUND:return k.NOT_FOUND;case Gt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Gt.ABORTED:return k.ABORTED;case Gt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Gt.DATA_LOSS:return k.DATA_LOSS;default:return Q(39323,{code:e})}}(lt=Gt||(Gt={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=new Fi([4294967295,4294967295],0);function rv(e){const t=zD().encode(e),n=new RA;return n.update(t),new Uint8Array(n.digest())}function sv(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Fi([n,i],0),new Fi([r,s],0)]}class ig{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new qa(`Invalid padding: ${n}`);if(i<0)throw new qa(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new qa(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new qa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Fi.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(Fi.fromNumber(i)));return r.compare(BD)===1&&(r=new Fi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=rv(t),[i,r]=sv(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new ig(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=rv(t),[i,r]=sv(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,ll.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Xc(K.min(),r,new Pt(at),ai(),ot())}}class ll{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new ll(i,n,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class mS{constructor(t,n){this.targetId=t,this.Ce=n}}class gS{constructor(t,n,i=de.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class av{constructor(){this.ve=0,this.Fe=ov(),this.Me=de.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ot(),n=ot(),i=ot();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Q(38017,{changeType:s})}}),new ll(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=ov()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qD{constructor(t){this.Ge=t,this.ze=new Map,this.je=ai(),this.Je=Xl(),this.He=Xl(),this.Ye=new Pt(at)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Q(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(wd(s))if(i===0){const a=new G(s.path);this.et(n,a,ne.newNoDocument(a,K.min()))}else ct(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=Ji(i).toUint8Array()}catch(u){if(u instanceof UA)return Qs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new ig(a,r,s)}catch(u){return Qs(u instanceof qa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&wd(l.target)){const u=new G(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,ne.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ot();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new Xc(t,n,this.Ye,this.je,i);return this.je=ai(),this.Je=Xl(),this.He=Xl(),this.Ye=new Pt(at),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new av,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Zt(at),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Zt(at),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new av),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Xl(){return new Pt(G.comparator)}function ov(){return new Pt(G.comparator)}const HD={asc:"ASCENDING",desc:"DESCENDING"},GD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FD={and:"AND",or:"OR"};class QD{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Cd(e,t){return e.useProto3Json||al(t)?t:{value:t}}function cc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function pS(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function KD(e,t){return cc(e,t.toTimestamp())}function Ze(e){return ct(!!e,49232),K.fromTimestamp(function(n){const i=Wi(n);return new It(i.seconds,i.nanos)}(e))}function rg(e,t){return Nd(e,t).canonicalString()}function Nd(e,t){const n=function(r){return new Et(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function yS(e){const t=Et.fromString(e);return ct(SS(t),10190,{key:t.toString()}),t}function hc(e,t){return rg(e.databaseId,t.path)}function ho(e,t){const n=yS(t);if(n.get(1)!==e.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new G(vS(n))}function _S(e,t){return rg(e.databaseId,t)}function YD(e){const t=yS(e);return t.length===4?Et.emptyPath():vS(t)}function Dd(e){return new Et(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function vS(e){return ct(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function lv(e,t,n){return{name:hc(e,t),fields:n.value.mapValue.fields}}function XD(e,t){return"found"in t?function(i,r){ct(!!r.found,43571),r.found.name,r.found.updateTime;const s=ho(i,r.found.name),a=Ze(r.found.updateTime),l=r.found.createTime?Ze(r.found.createTime):K.min(),u=new Ie({mapValue:{fields:r.found.fields}});return ne.newFoundDocument(s,a,l,u)}(e,t):"missing"in t?function(i,r){ct(!!r.missing,3894),ct(!!r.readTime,22933);const s=ho(i,r.missing),a=Ze(r.readTime);return ne.newNoDocument(s,a)}(e,t):Q(7234,{result:t})}function $D(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Q(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(ct(d===void 0||typeof d=="string",58123),de.fromBase64String(d||"")):(ct(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),de.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?k.UNKNOWN:dS(h.code);return new z(d,h.message||"")}(a);n=new gS(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=ho(e,i.document.name),s=Ze(i.document.updateTime),a=i.document.createTime?Ze(i.document.createTime):K.min(),l=new Ie({mapValue:{fields:i.document.fields}}),u=ne.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new _u(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=ho(e,i.document),s=i.readTime?Ze(i.readTime):K.min(),a=ne.newNoDocument(r,s),l=i.removedTargetIds||[];n=new _u([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=ho(e,i.document),s=i.removedTargetIds||[];n=new _u([],s,r,null)}else{if(!("filter"in t))return Q(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new jD(r,s),l=i.targetId;n=new mS(l,a)}}return n}function ES(e,t){let n;if(t instanceof ol)n={update:lv(e,t.key,t.value)};else if(t instanceof Yc)n={delete:hc(e,t.key)};else if(t instanceof or)n={update:lv(e,t.key,t.data),updateMask:sx(t.fieldMask)};else{if(!(t instanceof hS))return Q(16599,{Vt:t.type});n={verify:hc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Mo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ko)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Po)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof uc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Q(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:KD(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q(27497)}(e,t.precondition)),n}function ZD(e,t){return e&&e.length>0?(ct(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?Ze(r.updateTime):Ze(s);return a.isEqual(K.min())&&(a=Ze(s)),new MD(a,r.transformResults||[])}(n,t))):[]}function WD(e,t){return{documents:[_S(e,t.path)]}}function JD(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=_S(e,r);const s=function(h){if(h.length!==0)return AS(vn.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:rs(m.field),direction:nx(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Cd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function tx(e){let t=YD(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ct(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(g){const m=TS(g);return m instanceof vn&&YA(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(D){return new Vo(ss(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,al(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,y=g.values||[];return new lc(y,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,y=g.values||[];return new lc(y,m)}(n.endAt)),ED(t,r,a,s,l,"F",u,h)}function ex(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function TS(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ss(n.unaryFilter.field);return Qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ss(n.unaryFilter.field);return Qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ss(n.unaryFilter.field);return Qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ss(n.unaryFilter.field);return Qt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(e):e.fieldFilter!==void 0?function(n){return Qt.create(ss(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return vn.create(n.compositeFilter.filters.map(i=>TS(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(e):Q(30097,{filter:e})}function nx(e){return HD[e]}function ix(e){return GD[e]}function rx(e){return FD[e]}function rs(e){return{fieldPath:e.canonicalString()}}function ss(e){return ce.fromServerFormat(e.fieldPath)}function AS(e){return e instanceof Qt?function(n){if(n.op==="=="){if(X_(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NAN"}};if(Y_(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(X_(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NOT_NAN"}};if(Y_(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rs(n.field),op:ix(n.op),value:n.value}}}(e):e instanceof vn?function(n){const i=n.getFilters().map(r=>AS(r));return i.length===1?i[0]:{compositeFilter:{op:rx(n.op),filters:i}}}(e):Q(54877,{filter:e})}function sx(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function SS(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t,n,i,r,s=K.min(),a=K.min(),l=de.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Vi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(t){this.yt=t}}function ox(e){const t=tx({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Id(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(){this.Cn=new ux}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(Zi.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(Zi.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class ux{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new Zt(Et.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Zt(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bS=41943040;class Me{static withCacheSize(t){return new Me(t,Me.DEFAULT_COLLECTION_PERCENTILE,Me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Me.DEFAULT_COLLECTION_PERCENTILE=10,Me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Me.DEFAULT=new Me(bS,Me.DEFAULT_COLLECTION_PERCENTILE,Me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Me.DISABLED=new Me(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new $s(0)}static cr(){return new $s(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="LruGarbageCollector",cx=1048576;function hv([e,t],[n,i]){const r=at(e,n);return r===0?at(t,i):r}class hx{constructor(t){this.Ir=t,this.buffer=new Zt(hv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();hv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fx{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(cv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ca(n)?H(cv,"Ignoring IndexedDB error during garbage collection: ",n):await ua(n)}await this.Vr(3e5)})}}class dx{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(Bc.ce);const i=new hx(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(uv)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uv):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(t,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),ns()<=st.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function mx(e,t){return new dx(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.changes=new Br(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ne.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&co(i.mutation,r,Fe.empty(),It.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ot()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ot()){const r=yr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=Ba();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=yr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ot()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=ai();const a=uo(),l=function(){return uo()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof or)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),co(d.mutation,h,d.mutation.getFieldMask(),It.now())):a.set(h.key,Fe.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new px(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=uo();let r=new Pt((a,l)=>a-l),s=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||Fe.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(r.get(l.batchId)||ot()).add(u);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=iS();d.forEach(m=>{if(!s.has(m)){const y=uS(n.get(m),i.get(m));y!==null&&g.set(m,y),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):WA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):P.resolve(yr());let l=No,u=s;return a.next(h=>P.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,ot())).next(d=>({batchId:l,changes:nS(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new G(n)).next(i=>{let r=Ba();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=Ba();return this.indexManager.getCollectionParents(t,s).next(l=>P.forEach(l,u=>{const h=function(g,m){return new ha(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,ne.newInvalidDocument(d)))});let l=Ba();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&co(d.mutation,h,Fe.empty(),It.now()),Fc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ze(r.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:ox(r.bundledQuery),readTime:Ze(r.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(){this.overlays=new Pt(G.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=yr();return P.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const r=yr(),s=n.length+1,a=new G(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return P.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Pt((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=yr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=yr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return P.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new UD(n,i));let s=this.qr.get(n);s===void 0&&(s=ot(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.sessionToken=de.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(){this.Qr=new Zt(Jt.$r),this.Ur=new Zt(Jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new Jt(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new Jt(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new G(new Et([])),i=new Jt(n,t),r=new Jt(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new G(new Et([])),i=new Jt(n,t),r=new Jt(n,t+1);let s=ot();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new Jt(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Jt{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return G.comparator(t.key,n.key)||at(t.Yr,n.Yr)}static Kr(t,n){return at(t.Yr,n.Yr)||G.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Zt(Jt.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new LD(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new Jt(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?$m:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Jt(n,0),r=new Jt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Zt(at);return n.forEach(r=>{const s=new Jt(r,0),a=new Jt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;G.isDocumentKey(s)||(s=s.child(""));const a=new Jt(new G(s),0);let l=new Zt(at);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){ct(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,r=>{const s=new Jt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new Jt(n,0),r=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(t){this.ri=t,this.docs=function(){return new Pt(G.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():ne.newInvalidDocument(n))}getEntries(t,n){let i=ai();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ne.newInvalidDocument(r))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=ai();const a=n.path,l=new G(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||WN(ZN(d),i)<=0||(r.has(d.key)||Fc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(t,n,i,r){Q(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new Sx(this)}getSize(t){return P.resolve(this.size)}}class Sx extends gx{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(t){this.persistence=t,this.si=new Br(n=>Jm(n),tg),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.oi=0,this._i=new sg,this.targetCount=0,this.ai=$s.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new $s(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),P.waitFor(s).next(()=>r)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(t,n){this.ui={},this.overlays={},this.ci=new Bc(0),this.li=!1,this.li=!0,this.hi=new Ex,this.referenceDelegate=t(this),this.Pi=new bx(this),this.indexManager=new lx,this.remoteDocumentCache=function(r){return new Ax(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new ax(n),this.Ii=new _x(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new vx,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new Tx(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){H("MemoryPersistence","Starting transaction:",t);const r=new wx(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class wx extends tD{constructor(t){super(),this.currentSequenceNumber=t}}class ag{constructor(t){this.persistence=t,this.Ri=new sg,this.Vi=null}static mi(t){return new ag(t)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const r=G.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,K.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class fc{constructor(t,n){this.persistence=t,this.pi=new Br(i=>iD(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=mx(this,n)}static mi(t,n){return new fc(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?P.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,K.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=gu(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return P.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=ot(),r=ot();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new og(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return r2()?8:eD(Se())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Rx;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(ns()<=st.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(ns()<=st.DEBUG&&H("QueryEngine","Query:",is(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(ns()<=st.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Dn(n))):P.resolve())}ys(t,n){if(J_(n))return P.resolve(null);let i=Dn(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Id(n,null,"F"),i=Dn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=ot(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,Id(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return J_(n)||r.isEqual(K.min())?P.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?P.resolve(null):(ns()<=st.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),is(n)),this.vs(t,a,n,$N(r,No)).next(l=>l))})}Ds(t,n){let i=new Zt(tS(t));return n.forEach((r,s)=>{Fc(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return ns()<=st.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",is(n)),this.ps.getDocumentsMatchingQuery(t,n,Zi.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="LocalStore",Cx=3e8;class Nx{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Pt(at),this.xs=new Br(s=>Jm(s),tg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new yx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function Dx(e,t,n,i){return new Nx(e,t,n,i)}async function RS(e,t){const n=W(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=ot();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function xx(e,t){const n=W(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let y=P.resolve();return m.forEach(D=>{y=y.next(()=>d.getEntry(u,D)).next(V=>{const M=h.docVersions.get(D);ct(M!==null,48541),V.version.compareTo(M)<0&&(g.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ot();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function IS(e){const t=W(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function Ox(e,t){const n=W(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=r.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,g)));let y=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?y=y.withResumeToken(de.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,i)),r=r.insert(g,y),function(V,M,b){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=Cx?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,y,d)&&l.push(n.Pi.updateTargetData(s,y))});let u=ai(),h=ot();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(Vx(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual(K.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(g=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function Vx(e,t,n){let i=ot(),r=ot();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=ai();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(K.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(lg,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function Mx(e,t){const n=W(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=$m),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function kx(e,t){const n=W(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,P.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Vi(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function xd(e,t,n){const i=W(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ca(a))throw a;H(lg,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function fv(e,t,n){const i=W(e);let r=K.min(),s=ot();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=W(u),m=g.xs.get(d);return m!==void 0?P.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,Dn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:K.min(),n?s:ot())).next(l=>(Px(i,AD(t),l),{documents:l,Qs:s})))}function Px(e,t,n){let i=e.Os.get(t)||K.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class dv{constructor(){this.activeTargetIds=CD()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Lx{constructor(){this.Mo=new dv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new dv,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="ConnectivityMonitor";class gv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(mv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H(mv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l=null;function Od(){return $l===null?$l=function(){return 268435456+Math.round(2147483648*Math.random())}():$l++,"0x"+$l.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="RestConnection",jx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zx{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===ac?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=Od(),l=this.zo(t,n.toUriEncodedString());H(df,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=sa(h);return this.Jo(t,l,u,i,d).then(g=>(H(df,`Received RPC '${t}' ${a}: `,g),g),g=>{throw Qs(df,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+la}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=jx[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve="WebChannelConnection";class qx extends zx{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=Od();return new Promise((l,u)=>{const h=new IA;h.setWithCredentials(!0),h.listenOnce(CA.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case mu.NO_ERROR:const g=h.getResponseJson();H(ve,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case mu.TIMEOUT:H(ve,`RPC '${t}' ${a} timed out`),u(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case mu.HTTP_ERROR:const m=h.getStatus();if(H(ve,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const D=y==null?void 0:y.error;if(D&&D.status&&D.message){const V=function(b){const v=b.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(v)>=0?v:k.UNKNOWN}(D.status);u(new z(V,D.message))}else u(new z(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new z(k.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(ve,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);H(ve,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=Od(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=xA(),l=DA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");H(ve,`Creating RPC '${t}' stream ${r}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,y=!1;const D=new Bx({Yo:M=>{y?H(ve,`Not sending because RPC '${t}' stream ${r} is closed:`,M):(m||(H(ve,`Opening RPC '${t}' stream ${r} transport.`),g.open(),m=!0),H(ve,`RPC '${t}' stream ${r} sending:`,M),g.send(M))},Zo:()=>g.close()}),V=(M,b,v)=>{M.listen(b,R=>{try{v(R)}catch(x){setTimeout(()=>{throw x},0)}})};return V(g,za.EventType.OPEN,()=>{y||(H(ve,`RPC '${t}' stream ${r} transport opened.`),D.o_())}),V(g,za.EventType.CLOSE,()=>{y||(y=!0,H(ve,`RPC '${t}' stream ${r} transport closed`),D.a_(),this.E_(g))}),V(g,za.EventType.ERROR,M=>{y||(y=!0,Qs(ve,`RPC '${t}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),D.a_(new z(k.UNAVAILABLE,"The operation could not be completed")))}),V(g,za.EventType.MESSAGE,M=>{var b;if(!y){const v=M.data[0];ct(!!v,16349);const R=v,x=(R==null?void 0:R.error)||((b=R[0])==null?void 0:b.error);if(x){H(ve,`RPC '${t}' stream ${r} received error:`,x);const U=x.status;let q=function(T){const S=Gt[T];if(S!==void 0)return dS(S)}(U),E=x.message;q===void 0&&(q=k.INTERNAL,E="Unknown error status: "+U+" with message "+x.message),y=!0,D.a_(new z(q,E)),g.close()}else H(ve,`RPC '${t}' stream ${r} received:`,v),D.u_(v)}}),V(l,NA.STAT_EVENT,M=>{M.stat===Ed.PROXY?H(ve,`RPC '${t}' stream ${r} detected buffering proxy`):M.stat===Ed.NOPROXY&&H(ve,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function mf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(e){return new QD(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="PersistentStream";class CS{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ug(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(si(n.toString()),si("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new z(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return H(pv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(H(pv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Hx extends CS{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=$D(this.serializer,t),i=function(s){if(!("targetChange"in s))return K.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?K.min():a.readTime?Ze(a.readTime):K.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Dd(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=wd(u)?{documents:WD(s,u)}:{query:JD(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=pS(s,a.resumeToken);const h=Cd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(K.min())>0){l.readTime=cc(s,a.snapshotVersion.toTimestamp());const h=Cd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=ex(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Dd(this.serializer),n.removeTarget=t,this.q_(n)}}class Gx extends CS{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ct(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ct(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ct(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=ZD(t.writeResults,t.commitTime),i=Ze(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Dd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>ES(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{}class Qx extends Fx{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,Nd(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(k.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Nd(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Kx{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(si(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="RemoteStore";class Yx{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{qr(this)&&(H(Mr,"Restarting streams for network reachability change."),await async function(u){const h=W(u);h.Ea.add(4),await ul(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Zc(h)}(this))})}),this.Ra=new Kx(i,r)}}async function Zc(e){if(qr(e))for(const t of e.da)await t(!0)}async function ul(e){for(const t of e.da)await t(!1)}function NS(e,t){const n=W(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),dg(n)?fg(n):fa(n).O_()&&hg(n,t))}function cg(e,t){const n=W(e),i=fa(n);n.Ia.delete(t),i.O_()&&DS(n,t),n.Ia.size===0&&(i.O_()?i.L_():qr(n)&&n.Ra.set("Unknown"))}function hg(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(K.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fa(e).Y_(t)}function DS(e,t){e.Va.Ue(t),fa(e).Z_(t)}function fg(e){e.Va=new qD({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),fa(e).start(),e.Ra.ua()}function dg(e){return qr(e)&&!fa(e).x_()&&e.Ia.size>0}function qr(e){return W(e).Ea.size===0}function xS(e){e.Va=void 0}async function Xx(e){e.Ra.set("Online")}async function $x(e){e.Ia.forEach((t,n)=>{hg(e,t)})}async function Zx(e,t){xS(e),dg(e)?(e.Ra.ha(t),fg(e)):e.Ra.set("Unknown")}async function Wx(e,t,n){if(e.Ra.set("Online"),t instanceof gS&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){H(Mr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await dc(e,i)}else if(t instanceof _u?e.Va.Ze(t):t instanceof mS?e.Va.st(t):e.Va.tt(t),!n.isEqual(K.min()))try{const i=await IS(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(de.EMPTY_BYTE_STRING,d.snapshotVersion)),DS(s,u);const g=new Vi(d.target,u,h,d.sequenceNumber);hg(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){H(Mr,"Failed to raise snapshot:",i),await dc(e,i)}}async function dc(e,t,n){if(!ca(t))throw t;e.Ea.add(1),await ul(e),e.Ra.set("Offline"),n||(n=()=>IS(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{H(Mr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Zc(e)})}function OS(e,t){return t().catch(n=>dc(e,n,t))}async function Wc(e){const t=W(e),n=er(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:$m;for(;Jx(t);)try{const r=await Mx(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,t4(t,r)}catch(r){await dc(t,r)}VS(t)&&MS(t)}function Jx(e){return qr(e)&&e.Ta.length<10}function t4(e,t){e.Ta.push(t);const n=er(e);n.O_()&&n.X_&&n.ea(t.mutations)}function VS(e){return qr(e)&&!er(e).x_()&&e.Ta.length>0}function MS(e){er(e).start()}async function e4(e){er(e).ra()}async function n4(e){const t=er(e);for(const n of e.Ta)t.ea(n.mutations)}async function i4(e,t,n){const i=e.Ta.shift(),r=ng.from(i,t,n);await OS(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Wc(e)}async function r4(e,t){t&&er(e).X_&&await async function(i,r){if(function(a){return fS(a)&&a!==k.ABORTED}(r.code)){const s=i.Ta.shift();er(i).B_(),await OS(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Wc(i)}}(e,t),VS(e)&&MS(e)}async function yv(e,t){const n=W(e);n.asyncQueue.verifyOperationInProgress(),H(Mr,"RemoteStore received new credentials");const i=qr(n);n.Ea.add(3),await ul(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Zc(n)}async function s4(e,t){const n=W(e);t?(n.Ea.delete(2),await Zc(n)):t||(n.Ea.add(2),await ul(n),n.Ra.set("Unknown"))}function fa(e){return e.ma||(e.ma=function(n,i,r){const s=W(n);return s.sa(),new Hx(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:Xx.bind(null,e),t_:$x.bind(null,e),r_:Zx.bind(null,e),H_:Wx.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),dg(e)?fg(e):e.Ra.set("Unknown")):(await e.ma.stop(),xS(e))})),e.ma}function er(e){return e.fa||(e.fa=function(n,i,r){const s=W(n);return s.sa(),new Gx(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:e4.bind(null,e),r_:r4.bind(null,e),ta:n4.bind(null,e),na:i4.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Wc(e)):(await e.fa.stop(),e.Ta.length>0&&(H(Mr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new mg(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(e,t){if(si("AsyncQueue",`${t}: ${e}`),ca(e))return new z(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{static emptySet(t){return new xs(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||G.comparator(n.key,i.key):(n,i)=>G.comparator(n.key,i.key),this.keyedMap=Ba(),this.sortedSet=new Pt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof xs)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new xs;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(){this.ga=new Pt(G.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Q(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class Zs{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Zs(t,n,xs.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Gc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class o4{constructor(){this.queries=vv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=W(n),s=r.queries;r.queries=vv(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new z(k.ABORTED,"Firestore shutting down"))}}function vv(){return new Br(e=>JA(e),Gc)}async function kS(e,t){const n=W(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new a4,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=gg(a,`Initialization of query '${is(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&pg(n)}async function PS(e,t){const n=W(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function l4(e,t){const n=W(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&pg(n)}function u4(e,t,n){const i=W(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function pg(e){e.Ca.forEach(t=>{t.next()})}var Vd,Ev;(Ev=Vd||(Vd={})).Ma="default",Ev.Cache="cache";class LS{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Zs(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Zs.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Vd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(t){this.key=t}}class jS{constructor(t){this.key=t}}class c4{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ot(),this.mutatedKeys=ot(),this.eu=tS(t),this.tu=new xs(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new _v,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,g)=>{const m=r.get(d),y=Fc(this.query,g)?g:null,D=!!m&&this.mutatedKeys.has(m.key),V=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?D!==V&&(i.track({type:3,doc:y}),M=!0):this.su(m,y)||(i.track({type:2,doc:y}),M=!0,(u&&this.eu(y,u)>0||h&&this.eu(y,h)<0)&&(l=!0)):!m&&y?(i.track({type:0,doc:y}),M=!0):m&&!y&&(i.track({type:1,doc:m}),M=!0,(u||h)&&(l=!0)),M&&(y?(a=a.add(y),s=V?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(y,D){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Rt:M})}};return V(y)-V(D)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new Zs(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _v,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ot(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new jS(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new US(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ot();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Zs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yg="SyncEngine";class h4{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class f4{constructor(t){this.key=t,this.hu=!1}}class d4{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Br(l=>JA(l),Gc),this.Iu=new Map,this.Eu=new Set,this.du=new Pt(G.comparator),this.Au=new Map,this.Ru=new sg,this.Vu={},this.mu=new Map,this.fu=$s.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function m4(e,t,n=!0){const i=FS(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await zS(i,t,n,!0),r}async function g4(e,t){const n=FS(e);await zS(n,t,!0,!1)}async function zS(e,t,n,i){const r=await kx(e.localStore,Dn(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await p4(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&NS(e.remoteStore,r),l}async function p4(e,t,n,i,r){e.pu=(g,m,y)=>async function(V,M,b,v){let R=M.view.ru(b);R.Cs&&(R=await fv(V.localStore,M.query,!1).then(({documents:E})=>M.view.ru(E,R)));const x=v&&v.targetChanges.get(M.targetId),U=v&&v.targetMismatches.get(M.targetId)!=null,q=M.view.applyChanges(R,V.isPrimaryClient,x,U);return Av(V,M.targetId,q.au),q.snapshot}(e,g,m,y);const s=await fv(e.localStore,t,!0),a=new c4(t,s.Qs),l=a.ru(s.documents),u=ll.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);Av(e,n,h.au);const d=new h4(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function y4(e,t,n){const i=W(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!Gc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await xd(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&cg(i.remoteStore,r.targetId),Md(i,r.targetId)}).catch(ua)):(Md(i,r.targetId),await xd(i.localStore,r.targetId,!0))}async function _4(e,t){const n=W(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),cg(n.remoteStore,i.targetId))}async function v4(e,t,n){const i=R4(e);try{const r=await function(a,l){const u=W(a),h=It.now(),d=l.reduce((y,D)=>y.add(D.key),ot());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=ai(),V=ot();return u.Ns.getEntries(y,d).next(M=>{D=M,D.forEach((b,v)=>{v.isValidDocument()||(V=V.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(M=>{g=M;const b=[];for(const v of l){const R=PD(v,g.get(v.key).overlayedDocument);R!=null&&b.push(new or(v.key,R,FA(R.value.mapValue),he.exists(!0)))}return u.mutationQueue.addMutationBatch(y,h,b,l)}).next(M=>{m=M;const b=M.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(y,M.batchId,b)})}).then(()=>({batchId:m.batchId,changes:nS(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Pt(at)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await cl(i,r.changes),await Wc(i.remoteStore)}catch(r){const s=gg(r,"Failed to persist write");n.reject(s)}}async function BS(e,t){const n=W(e);try{const i=await Ox(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(ct(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?ct(a.hu,14607):r.removedDocuments.size>0&&(ct(a.hu,42227),a.hu=!1))}),await cl(n,i,t)}catch(i){await ua(i)}}function Tv(e,t,n){const i=W(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=W(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&pg(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function E4(e,t,n){const i=W(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Pt(G.comparator);a=a.insert(s,ne.newNoDocument(s,K.min()));const l=ot().add(s),u=new Xc(K.min(),new Map,new Pt(at),a,l);await BS(i,u),i.du=i.du.remove(s),i.Au.delete(t),_g(i)}else await xd(i.localStore,t,!1).then(()=>Md(i,t,n)).catch(ua)}async function T4(e,t){const n=W(e),i=t.batch.batchId;try{const r=await xx(n.localStore,t);HS(n,i,null),qS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await cl(n,r)}catch(r){await ua(r)}}async function A4(e,t,n){const i=W(e);try{const r=await function(a,l){const u=W(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ct(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);HS(i,t,n),qS(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await cl(i,r)}catch(r){await ua(r)}}function qS(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function HS(e,t,n){const i=W(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Md(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||GS(e,i)})}function GS(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(cg(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),_g(e))}function Av(e,t,n){for(const i of n)i instanceof US?(e.Ru.addReference(i.key,t),S4(e,i)):i instanceof jS?(H(yg,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||GS(e,i.key)):Q(19791,{wu:i})}function S4(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(H(yg,"New document in limbo: "+n),e.Eu.add(i),_g(e))}function _g(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new G(Et.fromString(t)),i=e.fu.next();e.Au.set(i,new f4(n)),e.du=e.du.insert(n,i),NS(e.remoteStore,new Vi(Dn(Hc(n.path)),i,"TargetPurposeLimboResolution",Bc.ce))}}async function cl(e,t,n){const i=W(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){r.push(h);const g=og.As(u.targetId,h);s.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=W(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,m=>P.forEach(m.Es,y=>d.persistence.referenceDelegate.addReference(g,m.targetId,y)).next(()=>P.forEach(m.ds,y=>d.persistence.referenceDelegate.removeReference(g,m.targetId,y)))))}catch(g){if(!ca(g))throw g;H(lg,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const y=d.Ms.get(m),D=y.snapshotVersion,V=y.withLastLimboFreeSnapshotVersion(D);d.Ms=d.Ms.insert(m,V)}}}(i.localStore,s))}async function b4(e,t){const n=W(e);if(!n.currentUser.isEqual(t)){H(yg,"User change. New user:",t.toKey());const i=await RS(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new z(k.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await cl(n,i.Ls)}}function w4(e,t){const n=W(e),i=n.Au.get(t);if(i&&i.hu)return ot().add(i.key);{let r=ot();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function FS(e){const t=W(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=BS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=w4.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=E4.bind(null,t),t.Pu.H_=l4.bind(null,t.eventManager),t.Pu.yu=u4.bind(null,t.eventManager),t}function R4(e){const t=W(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=T4.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=A4.bind(null,t),t}class mc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=$c(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return Dx(this.persistence,new Ix,t.initialUser,this.serializer)}Cu(t){return new wS(ag.mi,this.serializer)}Du(t){return new Lx}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mc.provider={build:()=>new mc};class I4 extends mc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ct(this.persistence.referenceDelegate instanceof fc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new fx(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Me.withCacheSize(this.cacheSizeBytes):Me.DEFAULT;return new wS(i=>fc.mi(i,n),this.serializer)}}class kd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Tv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=b4.bind(null,this.syncEngine),await s4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new o4}()}createDatastore(t){const n=$c(t.databaseInfo.databaseId),i=function(s){return new qx(s)}(t.databaseInfo);return function(s,a,l,u){return new Qx(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new Yx(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Tv(this.syncEngine,n,0),function(){return gv.v()?new gv:new Ux}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const g=new d4(r,s,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=W(r);H(Mr,"RemoteStore shutting down."),s.Ea.add(5),await ul(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}kd.provider={build:()=>new kd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):si("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=W(r),l={documents:s.map(g=>hc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,Et.emptyPath(),l,s.length),h=new Map;u.forEach(g=>{const m=XD(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return s.forEach(g=>{const m=h.get(g.toString());ct(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Yc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=G.fromPath(i);this.mutations.push(new hS(r,this.precondition(r)))}),await async function(i,r){const s=W(i),a={writes:r.map(l=>ES(s.serializer,l))};await s.Go("Commit",s.serializer.databaseId,Et.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Q(50498,{Gu:t.constructor.name});n=K.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new z(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(K.min())?he.exists(!1):he.updateTime(n):he.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(K.min()))throw new z(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return he.updateTime(n)}return he.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new ug(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new C4(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!al(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!fS(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="FirestoreClient";class D4{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ee.UNAUTHENTICATED,this.clientId=Xm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{H(nr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(nr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=gg(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function gf(e,t){e.asyncQueue.verifyOperationInProgress(),H(nr,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await RS(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Sv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await x4(e);H(nr,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>yv(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>yv(t.remoteStore,r)),e._onlineComponents=t}async function x4(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(nr,"Using user provided OfflineComponentProvider");try{await gf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===k.FAILED_PRECONDITION||r.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Qs("Error using user provided cache. Falling back to memory cache: "+n),await gf(e,new mc)}}else H(nr,"Using default OfflineComponentProvider"),await gf(e,new I4(void 0));return e._offlineComponents}async function vg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(nr,"Using user provided OnlineComponentProvider"),await Sv(e,e._uninitializedComponentsProvider._online)):(H(nr,"Using default OnlineComponentProvider"),await Sv(e,new kd))),e._onlineComponents}function O4(e){return vg(e).then(t=>t.syncEngine)}function V4(e){return vg(e).then(t=>t.datastore)}async function Pd(e){const t=await vg(e),n=t.eventManager;return n.onListen=m4.bind(null,t.syncEngine),n.onUnlisten=y4.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=g4.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=_4.bind(null,t.syncEngine),n}function M4(e,t,n={}){const i=new Wn;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new QS({next:m=>{d.Nu(),a.enqueueAndForget(()=>PS(s,g));const y=m.docs.has(l);!y&&m.fromCache?h.reject(new z(k.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?h.reject(new z(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new LS(Hc(l.path),d,{includeMetadataChanges:!0,qa:!0});return kS(s,g)}(await Pd(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="firestore.googleapis.com",wv=!0;class Rv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YS,this.ssl=wv}else this.host=t.host,this.ssl=t.ssl??wv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=bS;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<cx)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}XN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KS(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Jc{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new jN;switch(i.type){case"firstParty":return new HN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=bv.get(n);i&&(H("ComponentProvider","Removing Datastore"),bv.delete(n),i.terminate())}(this),Promise.resolve()}}function k4(e,t,n,i={}){var h;e=$e(e,Jc);const r=sa(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(L0(`https://${l}`),U0("Firestore",!0)),s.host!==YS&&s.host!==l&&Qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!Nr(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=Ee.MOCK_USER;else{d=XR(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ee(m)}e._authCredentials=new zN(new VA(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Hr(this.firestore,t,this._query)}}class Mt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Mt(this.firestore,t,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(sl(n,Mt._jsonSchema))return new Mt(t,i||null,new G(Et.fromString(n.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Kt("string",Mt._jsonSchemaVersion),referencePath:Kt("string")};class Qi extends Hr{constructor(t,n,i){super(t,n,Hc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Mt(this.firestore,null,new G(t))}withConverter(t){return new Qi(this.firestore,t,this._path)}}function Iv(e,t,...n){if(e=kt(e),MA("collection","path",t),e instanceof Jc){const i=Et.fromString(t,...n);return j_(i),new Qi(e,null,i)}{if(!(e instanceof Mt||e instanceof Qi))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Et.fromString(t,...n));return j_(i),new Qi(e.firestore,null,i)}}function gn(e,t,...n){if(e=kt(e),arguments.length===1&&(t=Xm.newId()),MA("doc","path",t),e instanceof Jc){const i=Et.fromString(t,...n);return U_(i),new Mt(e,null,new G(i))}{if(!(e instanceof Mt||e instanceof Qi))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Et.fromString(t,...n));return U_(i),new Mt(e.firestore,e instanceof Qi?e.converter:null,new G(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="AsyncQueue";class Nv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ug(this,"async_queue_retry"),this._c=()=>{const i=mf();i&&H(Cv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=mf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=mf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Wn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ca(t))throw t;H(Cv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,si("INTERNAL UNHANDLED ERROR: ",Dv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=mg.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&Q(47125,{Pc:Dv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Dv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class oi extends Jc{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new Nv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Nv(t),this._firestoreClient=void 0,await t}}}function P4(e,t){const n=typeof e=="object"?e:q0(),i=typeof e=="string"?e:ac,r=jm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=KR("firestore");s&&k4(r,...s)}return r}function th(e){if(e._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||L4(e),e._firestoreClient}function L4(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new aD(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,KS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new D4(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ge(de.fromBase64String(t))}catch(n){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ge(de.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ge._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(sl(t,Ge._jsonSchema))return Ge.fromBase64String(t.bytes)}}Ge._jsonSchemaVersion="firestore/bytes/1.0",Ge._jsonSchema={type:Kt("string",Ge._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ce(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return at(this._lat,t._lat)||at(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xn._jsonSchemaVersion}}static fromJSON(t){if(sl(t,xn._jsonSchema))return new xn(t.latitude,t.longitude)}}xn._jsonSchemaVersion="firestore/geoPoint/1.0",xn._jsonSchema={type:Kt("string",xn._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:On._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(sl(t,On._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new On(t.vectorValues);throw new z(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}On._jsonSchemaVersion="firestore/vectorValue/1.0",On._jsonSchema={type:Kt("string",On._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=/^__.*__$/;class j4{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new or(t,this.data,this.fieldMask,n,this.fieldTransforms):new ol(t,this.data,n,this.fieldTransforms)}}class XS{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new or(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function $S(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ac:e})}}class Eg{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Eg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return gc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if($S(this.Ac)&&U4.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class z4{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||$c(t)}Cc(t,n,i,r=!1){return new Eg({Ac:t,methodName:n,Dc:i,path:ce.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fl(e){const t=e._freezeSettings(),n=$c(e._databaseId);return new z4(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Tg(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);Sg("Data must be an object, but it was:",a,i);const l=JS(i,a);let u,h;if(s.merge)u=new Fe(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=Ld(t,g,n);if(!a.contains(m))throw new z(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);eb(d,m)||d.push(m)}u=new Fe(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new j4(new Ie(l),u,h)}class nh extends eh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof nh}}class Ag extends eh{_toFieldTransform(t){return new OD(t.path,new Mo)}isEqual(t){return t instanceof Ag}}function ZS(e,t,n,i){const r=e.Cc(1,t,n);Sg("Data must be an object, but it was:",r,i);const s=[],a=Ie.empty();ar(i,(u,h)=>{const d=bg(t,u,n);h=kt(h);const g=r.yc(d);if(h instanceof nh)s.push(d);else{const m=dl(h,g);m!=null&&(s.push(d),a.set(d,m))}});const l=new Fe(s);return new XS(a,l,r.fieldTransforms)}function WS(e,t,n,i,r,s){const a=e.Cc(1,t,n),l=[Ld(t,i,n)],u=[r];if(s.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(Ld(t,s[m])),u.push(s[m+1]);const h=[],d=Ie.empty();for(let m=l.length-1;m>=0;--m)if(!eb(h,l[m])){const y=l[m];let D=u[m];D=kt(D);const V=a.yc(y);if(D instanceof nh)h.push(y);else{const M=dl(D,V);M!=null&&(h.push(y),d.set(y,M))}}const g=new Fe(h);return new XS(d,g,a.fieldTransforms)}function B4(e,t,n,i=!1){return dl(n,e.Cc(i?4:3,t))}function dl(e,t){if(tb(e=kt(e)))return Sg("Unsupported field value:",t,e),JS(e,t);if(e instanceof eh)return function(i,r){if(!$S(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=dl(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=kt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ND(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=It.fromDate(i);return{timestampValue:cc(r.serializer,s)}}if(i instanceof It){const s=new It(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:cc(r.serializer,s)}}if(i instanceof xn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ge)return{bytesValue:pS(r.serializer,i._byteString)};if(i instanceof Mt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof On)return function(a,l){return{mapValue:{fields:{[HA]:{stringValue:GA},[oc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return eg(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${zc(i)}`)}(e,t)}function JS(e,t){const n={};return LA(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ar(e,(i,r)=>{const s=dl(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function tb(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof It||e instanceof xn||e instanceof Ge||e instanceof Mt||e instanceof eh||e instanceof On)}function Sg(e,t,n){if(!tb(n)||!kA(n)){const i=zc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Ld(e,t,n){if((t=kt(t))instanceof hl)return t._internalPath;if(typeof t=="string")return bg(e,t);throw gc("Field path arguments must be of type string or ",e,!1,void 0,n)}const q4=new RegExp("[~\\*/\\[\\]]");function bg(e,t,n){if(t.search(q4)>=0)throw gc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new hl(...t.split("."))._internalPath}catch{throw gc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function gc(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new z(k.INVALID_ARGUMENT,l+e+u)}function eb(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new H4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(wg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class H4 extends pc{data(){return super.data()}}function wg(e,t){return typeof t=="string"?bg(e,t):t instanceof hl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rg{}class nb extends Rg{}function F4(e,t,...n){let i=[];t instanceof Rg&&i.push(t),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof Cg).length,l=s.filter(u=>u instanceof Ig).length;if(a>1||a>0&&l>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class Ig extends nb{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Ig(t,n,i)}_apply(t){const n=this._parse(t);return ib(t._query,n),new Hr(t.firestore,t.converter,Rd(t._query,n))}_parse(t){const n=fl(t.firestore);return function(s,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Vv(g,d);const D=[];for(const V of g)D.push(Ov(u,s,V));m={arrayValue:{values:D}}}else m=Ov(u,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Vv(g,d),m=B4(l,a,g,d==="in"||d==="not-in");return Qt.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Cg extends Rg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Cg(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:vn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)ib(a,u),a=Rd(a,u)}(t._query,n),new Hr(t.firestore,t.converter,Rd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ng extends nb{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Ng(t,n)}_apply(t){const n=function(r,s,a){if(r.startAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vo(s,a)}(t._query,this._field,this._direction);return new Hr(t.firestore,t.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new ha(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}}function Q4(e,t="asc"){const n=t,i=wg("orderBy",e);return Ng._create(i,n)}function Ov(e,t,n){if(typeof(n=kt(n))=="string"){if(n==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WA(t)&&n.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Et.fromString(n));if(!G.isDocumentKey(i))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return K_(e,new G(i))}if(n instanceof Mt)return K_(e,n._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zc(n)}.`)}function Vv(e,t){if(!Array.isArray(e)||e.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ib(e,t){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class rb{convertValue(t,n="none"){switch(tr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return qt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Ji(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Q(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return ar(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[oc].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>qt(a.doubleValue));return new On(n)}convertGeoPoint(t){return new xn(qt(t.latitude),qt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=qc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Do(t));default:return null}}convertTimestamp(t){const n=Wi(t);return new It(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Et.fromString(t);ct(SS(i),9688,{name:t});const r=new xo(i.get(1),i.get(3)),s=new G(i.popFirst(5));return r.isEqual(n)||si(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class K4 extends rb{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ge(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}class vs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ki extends pc{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(wg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ki._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ki._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ki._jsonSchema={type:Kt("string",Ki._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class vu extends Ki{data(t={}){return super.data(t)}}class Os{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new vs(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new vu(this._firestore,this._userDataWriter,i.key,i,new vs(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new vu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new vs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new vu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new vs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:Y4(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Os._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Xm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Y4(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(e){e=$e(e,Mt);const t=$e(e.firestore,oi);return M4(th(t),e._key).then(n=>sb(t,e,n))}Os._jsonSchemaVersion="firestore/querySnapshot/1.0",Os._jsonSchema={type:Kt("string",Os._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class xg extends rb{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ge(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function Mv(e,t,n){e=$e(e,Mt);const i=$e(e.firestore,oi),r=Dg(e.converter,t,n);return ih(i,[Tg(fl(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,he.none())])}function $4(e,t,n,...i){e=$e(e,Mt);const r=$e(e.firestore,oi),s=fl(r);let a;return a=typeof(t=kt(t))=="string"||t instanceof hl?WS(s,"updateDoc",e._key,t,n,i):ZS(s,"updateDoc",e._key,t),ih(r,[a.toMutation(e._key,he.exists(!0))])}function Z4(e){return ih($e(e.firestore,oi),[new Yc(e._key,he.none())])}function W4(e,t){const n=$e(e.firestore,oi),i=gn(e),r=Dg(e.converter,t);return ih(n,[Tg(fl(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,he.exists(!1))]).then(()=>i)}function yc(e,...t){var u,h,d;e=kt(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||xv(t[i])||(n=t[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(xv(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let s,a,l;if(e instanceof Mt)a=$e(e.firestore,oi),l=Hc(e._key.path),s={next:g=>{t[i]&&t[i](sb(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=$e(e,Hr);a=$e(g.firestore,oi),l=g._query;const m=new xg(a);s={next:y=>{t[i]&&t[i](new Os(a,m,g,y))},error:t[i+1],complete:t[i+2]},G4(e._query)}return function(m,y,D,V){const M=new QS(V),b=new LS(y,M,D);return m.asyncQueue.enqueueAndForget(async()=>kS(await Pd(m),b)),()=>{M.Nu(),m.asyncQueue.enqueueAndForget(async()=>PS(await Pd(m),b))}}(th(a),l,r,s)}function ih(e,t){return function(i,r){const s=new Wn;return i.asyncQueue.enqueueAndForget(async()=>v4(await O4(i),r,s)),s.promise}(th(e),t)}function sb(e,t,n){const i=n.docs.get(t._key),r=new xg(e);return new Ki(e,r,t._key,i,new vs(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4={maxAttempts:5};function Ha(e,t){if((e=kt(e)).firestore!==t)throw new z(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=fl(t)}get(t){const n=Ha(t,this._firestore),i=new K4(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return Q(24041);const s=r[0];if(s.isFoundDocument())return new pc(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new pc(this._firestore,i,n._key,null,n.converter);throw Q(18433,{doc:s})})}set(t,n,i){const r=Ha(t,this._firestore),s=Dg(r.converter,n,i),a=Tg(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(t,n,i,...r){const s=Ha(t,this._firestore);let a;return a=typeof(n=kt(n))=="string"||n instanceof hl?WS(this._dataReader,"Transaction.update",s._key,n,i,r):ZS(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(t){const n=Ha(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO extends tO{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=Ha(t,this._firestore),i=new xg(this._firestore);return super.get(t).then(r=>new Ki(this._firestore,i,n._key,r._document,new vs(!1,!1),n.converter))}}function nO(e,t,n){e=$e(e,oi);const i={...J4,...n};return function(s){if(s.maxAttempts<1)throw new z(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,l){const u=new Wn;return s.asyncQueue.enqueueAndForget(async()=>{const h=await V4(s);new N4(s.asyncQueue,h,l,a,u).ju()}),u.promise}(th(e),r=>t(new eO(e,r)),i)}function iO(){return new Ag("serverTimestamp")}(function(t,n=!0){(function(r){la=r})(aa),Gs(new Dr("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new oi(new BN(i.getProvider("auth-internal")),new GN(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xo(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Gi(M_,k_,t),Gi(M_,k_,"esm2020")})();var rO="firebase",sO="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gi(rO,sO,"app");const aO={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},ab=B0(aO),qe=P4(ab),Eu=LN(ab);SC(Eu,yA);const oO=({auth:e})=>{const[t,n]=F.useState(!1),[i,r]=F.useState(""),[s,a]=F.useState(""),[l,u]=F.useState(""),[h,d]=F.useState(""),g=async y=>{if(y.preventDefault(),d(""),t){if(!l.trim()){d("Пожалуйста, введите имя.");return}try{const D=await vC(e,i,s);await AC(D.user,{displayName:l})}catch(D){d(m(D.code))}}else try{await EC(e,i,s)}catch(D){d(m(D.code))}},m=y=>{switch(y){case"auth/invalid-email":return"Неверный формат электронной почты.";case"auth/user-not-found":case"auth/wrong-password":return"Неверный email или пароль.";case"auth/email-already-in-use":return"Этот email уже зарегистрирован.";case"auth/weak-password":return"Пароль слишком слабый. Используйте не менее 6 символов.";default:return"Произошла ошибка. Пожалуйста, попробуйте еще раз."}};return A.jsxs("div",{className:"space-y-4",children:[A.jsxs("form",{onSubmit:g,className:"space-y-4",children:[t&&A.jsx("input",{type:"text",value:l,onChange:y=>u(y.target.value),placeholder:"Ваше имя",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),A.jsx("input",{type:"email",value:i,onChange:y=>r(y.target.value),placeholder:"Email",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),A.jsx("input",{type:"password",value:s,onChange:y=>a(y.target.value),placeholder:"Пароль",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),h&&A.jsx("p",{className:"text-red-500 text-sm text-center",children:h}),A.jsx("button",{type:"submit",className:"w-full py-3 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-transform hover:scale-105",children:t?"Зарегистрироваться":"Войти"})]}),A.jsx("div",{className:"flex items-center justify-center",children:A.jsx("button",{onClick:()=>{n(!t),d("")},className:"text-sm text-accent hover:underline",children:t?"У меня уже есть аккаунт":"Создать новый аккаунт"})})]})},lO=({auth:e})=>A.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main p-4",children:A.jsxs("div",{className:"w-full max-w-sm text-center",children:[A.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Добро пожаловать"}),A.jsx("p",{className:"text-text-main/70 mb-8",children:"Войдите или создайте аккаунт, чтобы продолжить."}),A.jsx("div",{className:"bg-component-bg p-6 rounded-2xl border border-border-color shadow-lg",children:A.jsx(oO,{auth:e})})]})}),uO=({className:e=""})=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:A.jsx("path",{d:"m9 18 6-6-6-6"})}),cO=({className:e=""})=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[A.jsx("path",{d:"M19 12H5"}),A.jsx("polyline",{points:"12 19 5 12 12 5"})]}),ob=({className:e="",filled:t=!1})=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[A.jsx("circle",{cx:"11",cy:"11",r:"8"}),A.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),hO=({className:e=""})=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[A.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),A.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),fO=({className:e=""})=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:A.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),lb=({className:e="",filled:t=!1})=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:A.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),ub=({className:e=""})=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[A.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),A.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),cb=({className:e="",filled:t=!1})=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:A.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),dO=({className:e="",filled:t=!1})=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[A.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),A.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),mO=({className:e="",filled:t=!1})=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[A.jsx("path",{d:"M4 22h16"}),A.jsx("path",{d:"M7 22V2h10v20"}),A.jsx("path",{d:"M7 12h4"})]}),gO=({className:e=""})=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:A.jsx("path",{d:"m15 18-6-6 6-6"})}),pO=({className:e=""})=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:A.jsx("path",{d:"m9 18 6-6-6-6"})}),yO=({className:e=""})=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[A.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),A.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),_O=({className:e=""})=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[A.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),A.jsx("polyline",{points:"16 17 21 12 16 7"}),A.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),vO=()=>A.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main",children:[A.jsx(lb,{className:"animate-pulse-heart text-accent",filled:!0}),A.jsx("p",{className:"mt-4 text-lg opacity-70",children:"Загрузка новелл..."})]}),EO=({activeTab:e,setActiveTab:t})=>{const n=[{id:"library",label:"Библиотека",icon:mO},{id:"search",label:"Поиск",icon:ob},{id:"bookmarks",label:"Закладки",icon:cb},{id:"profile",label:"Профиль",icon:dO}];return A.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:A.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>A.jsxs("button",{onClick:()=>t(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===i.id?"text-accent":"text-text-main opacity-60"}`,children:[A.jsx(i.icon,{filled:e===i.id}),A.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},Og=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>A.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:e.length>0?e.map((r,s)=>A.jsx("div",{onClick:()=>t(r),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${s*50}ms`},children:A.jsxs("div",{className:"relative transition-all duration-300",children:[A.jsx("button",{onClick:a=>{a.stopPropagation(),i(r.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(r.id)?"text-accent":""}`,children:A.jsx(cb,{filled:n.includes(r.id),width:"20",height:"20"})}),A.jsx("img",{src:`/tene/${r.coverUrl}`,alt:r.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),A.jsx("h2",{className:"mt-2 font-semibold text-xs truncate",children:r.title})]})},r.id)):A.jsx("p",{className:"col-span-3 text-center opacity-70",children:"Ничего не найдено."})}),kr=({title:e,onBack:t,children:n})=>A.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[t&&A.jsx("button",{onClick:t,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:A.jsx(cO,{})}),A.jsx("h1",{className:"text-xl font-bold flex-grow",children:e}),n]}),TO=({novel:e,onSelectChapter:t,onGenreSelect:n,subscription:i,chapters:r,isLoadingChapters:s,lastReadData:a,onBack:l})=>{if(!e)return A.jsxs("div",{children:[A.jsx(kr,{title:"Загрузка...",onBack:l}),A.jsx("div",{className:"p-4 text-center",children:"Загрузка данных о новелле..."})]});const u=a==null?void 0:a[e.id],h=i&&new Date(i.endDate.seconds*1e3)>new Date;return A.jsxs("div",{className:"animate-slide-in-right",children:[A.jsx(kr,{title:e.title,onBack:l}),A.jsxs("div",{className:"p-4",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 mb-5",children:[A.jsx("img",{src:`/tene/${e.coverUrl}`,alt:e.title,className:"w-32 h-auto mx-auto sm:mx-0 rounded-lg shadow-lg border border-border-color"}),A.jsxs("div",{className:"text-center sm:text-left",children:[A.jsx("h1",{className:"text-2xl font-bold text-text-main",children:e.title}),A.jsx("p",{className:"text-sm opacity-80 mt-1",children:e.author}),A.jsx("div",{className:"flex flex-wrap justify-center sm:justify-start gap-2 mt-3",children:e.genres.map(d=>A.jsx("button",{onClick:()=>n(d),className:"px-3 py-1 text-xs font-medium rounded-full bg-background border border-border-color hover:bg-border-color transition-colors",children:d},d))})]})]}),A.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap opacity-90",children:e.description})]}),A.jsxs("div",{className:"px-4 pb-4",children:[u&&A.jsxs("button",{onClick:()=>t(e.id,u.chapterId),className:"flex items-center justify-between w-full p-4 mb-4 rounded-lg bg-accent/10 border border-accent/20 hover:bg-accent/20 transition-colors",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold text-accent",children:"Продолжить чтение"}),A.jsx("p",{className:"text-sm opacity-80",children:u.chapterTitle})]}),A.jsx(uO,{className:"text-accent"})]}),A.jsx("h3",{className:"text-lg font-bold mb-3",children:"Главы"}),A.jsx("div",{className:"border border-border-color rounded-lg overflow-hidden",children:s?A.jsx("div",{className:"p-4 text-center opacity-70",children:"Загрузка глав..."}):r.map((d,g)=>{const m=d.paid&&!h;return A.jsxs("button",{onClick:()=>t(e.id,d.id),disabled:m,className:`flex items-center justify-between w-full text-left p-4 transition-colors duration-200 ${m?"bg-background text-text-main/50 cursor-not-allowed":"hover:bg-background"} ${g!==r.length-1?"border-b border-border-color":""}`,children:[A.jsx("span",{children:d.title}),m&&A.jsx(hO,{})]},d.id)})})]})]})},AO=e=>{const t={},n=[];return e.forEach(i=>{i.replies=[],t[i.id]=i,i.parentId?t[i.parentId]&&t[i.parentId].replies.push(i):n.push(i)}),n},hb=s1.memo(({comment:e,onReply:t,onLike:n,onEdit:i,onDelete:r,onUpdate:s,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:d,replyingTo:g,replyText:m,setReplyText:y,onCommentSubmit:D,isLiked:V})=>{const M=u===e.id,b=g===e.id,v=a||l===e.userId;return A.jsxs("div",{className:"flex flex-col",children:[A.jsxs("div",{className:"flex items-start space-x-3",children:[A.jsx("div",{className:"w-8 h-8 rounded-full bg-border-color flex-shrink-0"}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-semibold text-sm",children:e.userName}),M?A.jsx("input",{value:h,onChange:R=>d(R.target.value),className:"w-full p-1 bg-background border border-border-color rounded"}):A.jsx("p",{className:"text-sm opacity-90",children:e.text}),A.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs opacity-70",children:[A.jsxs("button",{onClick:n,className:`flex items-center space-x-1 ${V?"text-accent":""}`,children:[A.jsx(lb,{filled:V,width:"16",height:"16"}),A.jsx("span",{children:e.likes})]}),A.jsx("button",{onClick:()=>t(e.id),children:"Ответить"}),v&&A.jsxs(A.Fragment,{children:[M?A.jsx("button",{onClick:()=>s(e.id,h),children:"Сохранить"}):A.jsx("button",{onClick:()=>i(e.id,e.text),children:"Изменить"}),A.jsx("button",{onClick:r,children:"Удалить"})]})]})]})]}),b&&A.jsxs("div",{className:"ml-11 mt-2 flex items-center gap-2",children:[A.jsx("input",{value:m,onChange:R=>y(R.target.value),type:"text",placeholder:`Ответ ${e.userName}...`,className:"w-full p-2 text-sm bg-background border border-border-color rounded-lg focus:outline-none focus:ring-1 focus:ring-accent"}),A.jsx("button",{onClick:()=>D(m,e.id),className:"p-2 rounded-full bg-accent text-white",children:A.jsx(ub,{width:"20",height:"20"})})]}),e.replies&&e.replies.length>0&&A.jsx("div",{className:"ml-11 mt-3 space-y-3 pl-3 border-l-2 border-border-color",children:e.replies.map(R=>A.jsx(hb,{comment:R,onLike:()=>n(R.id),onDelete:()=>r(R.id),onEdit:()=>i(R.id,R.text),onUpdate:s,onReply:t,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:d,replyingTo:g,replyText:m,setReplyText:y,onCommentSubmit:D,isLiked:!1},R.id))})]})}),SO=({chapter:e,novel:t,fontSize:n,onFontSizeChange:i,userId:r,userName:s,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,onBack:d,isUserAdmin:g})=>{const[m,y]=F.useState([]),[D,V]=F.useState(""),[M,b]=F.useState({}),[v,R]=F.useState(!1),[x,U]=F.useState(null),[q,E]=F.useState(""),[_,T]=F.useState(null),[S,I]=F.useState(""),C=F.useRef(null),w=h&&new Date(h.endDate.seconds*1e3)>new Date,me=e.paid&&!w,De=()=>{var J;(J=C.current)==null||J.scrollIntoView({behavior:"smooth"})};F.useEffect(()=>{if(!e||!t)return;const J=F4(Iv(qe,"novels",t.id,"chapters",e.id,"comments"),Q4("createdAt"));return yc(J,se=>{const Je=se.docs.map(ge=>({id:ge.id,...ge.data()}));y(Je)})},[t==null?void 0:t.id,e==null?void 0:e.id]),F.useEffect(()=>{if(!e||!r)return;const J=gn(qe,"users",r,"likes",e.id);return yc(J,se=>{b(se.data()||{})})},[e==null?void 0:e.id,r]);const B=async(J,St=null)=>{if(J.trim()!=="")try{await W4(Iv(qe,"novels",t.id,"chapters",e.id,"comments"),{text:J,userId:r,userName:s,createdAt:iO(),likes:0,parentId:St}),St?(T(null),I("")):V(""),De()}catch(se){console.error("Error adding comment: ",se)}},Z=F.useCallback(async J=>{if(!r)return;const St=gn(qe,"novels",t.id,"chapters",e.id,"comments",J),se=gn(qe,"users",r,"likes",e.id),Je=M[J];try{await nO(qe,async ge=>{const mt=await ge.get(St);if(!mt.exists())throw"Comment does not exist!";const Ot=mt.data().likes+(Je?-1:1);ge.update(St,{likes:Ot}),(await ge.get(se)).exists()?ge.update(se,{[J]:!Je}):ge.set(se,{[J]:!0})}),b(ge=>({...ge,[J]:!Je}))}catch(ge){console.error("Transaction failed: ",ge)}},[r,t==null?void 0:t.id,e==null?void 0:e.id,M]),X=async(J,St)=>{const se=gn(qe,"novels",t.id,"chapters",e.id,"comments",J);await $4(se,{text:St}),U(null),E("")},gt=async J=>{window.confirm("Вы уверены, что хотите удалить этот комментарий?")&&await Z4(gn(qe,"novels",t.id,"chapters",e.id,"comments",J))},nt=F.useMemo(()=>u.findIndex(J=>J.id===e.id),[u,e]),hn=nt>0?u[nt-1]:null,Ht=nt<u.length-1?u[nt+1]:null,wt=F.useMemo(()=>AO(m),[m]);return me?A.jsxs("div",{className:"animate-slide-in-right",children:[A.jsx(kr,{title:e.title,onBack:d}),A.jsx("div",{className:"p-4 text-center",children:A.jsx("p",{className:"text-lg",children:"Эта глава доступна только по подписке."})})]}):A.jsxs("div",{className:"animate-slide-in-right",children:[A.jsx(kr,{title:e.title,onBack:d,children:A.jsx("button",{onClick:()=>R(!v),className:"ml-auto p-2 rounded-full hover:bg-background",children:A.jsx(yO,{})})}),v&&A.jsx("div",{className:"p-4 bg-component-bg border-b border-border-color",children:A.jsxs("div",{className:"mb-2",children:[A.jsx("label",{className:"block text-sm opacity-80 mb-1",children:"Размер шрифта"}),A.jsx("input",{type:"range",min:"12",max:"24",value:n,onChange:J=>i(parseInt(J.target.value,10)),className:"w-full"})]})}),A.jsx("article",{style:{fontSize:`${n}px`},className:`p-4 leading-relaxed whitespace-pre-wrap ${a}`,children:e.content}),A.jsxs("div",{className:"flex justify-between p-4",children:[A.jsx("button",{onClick:()=>l(t.id,hn.id),disabled:!hn,className:"px-4 py-2 rounded-lg bg-component-bg border border-border-color disabled:opacity-50",children:"Назад"}),A.jsx("button",{onClick:()=>l(t.id,Ht.id),disabled:!Ht,className:"px-4 py-2 rounded-lg bg-component-bg border border-border-color disabled:opacity-50",children:"Вперед"})]}),A.jsxs("div",{className:"p-4",children:[A.jsxs("h3",{className:"text-lg font-bold mb-3",children:["Комментарии (",m.length,")"]}),A.jsxs("div",{className:"space-y-4",children:[wt.map(J=>A.jsx(hb,{comment:J,onLike:()=>Z(J.id),onDelete:()=>gt(J.id),onEdit:(St,se)=>{U(St),E(se)},onUpdate:X,onReply:St=>T(St),isUserAdmin:g,currentUserId:r,editingCommentId:x,editingText:q,setEditingText:E,replyingTo:_,replyText:S,setReplyText:I,onCommentSubmit:B,isLiked:!!M[J.id]},J.id)),A.jsx("div",{ref:C})]}),A.jsxs("div",{className:"sticky bottom-0 flex items-center gap-2 mt-4 p-2 bg-component-bg border-t border-border-color",children:[A.jsx("input",{value:D,onChange:J=>V(J.target.value),type:"text",placeholder:"Ваш комментарий...",className:"w-full p-2 bg-background border border-border-color rounded-lg focus:outline-none focus:ring-1 focus:ring-accent"}),A.jsx("button",{onClick:()=>B(D),className:"p-2 rounded-full bg-accent text-white",children:A.jsx(ub,{})})]})]})]})},bO=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i,onGenreSelect:r})=>{const[s,a]=F.useState(""),[l,u]=F.useState(null),h=F.useMemo(()=>{const m=new Set;return e.forEach(y=>y.genres.forEach(D=>m.add(D))),["Все",...Array.from(m)]},[e]),d=F.useMemo(()=>e.filter(m=>{const y=m.title.toLowerCase().includes(s.toLowerCase()),D=l==="Все"||!l||m.genres.includes(l);return y&&D}),[e,s,l]),g=m=>{u(m),r(m)};return A.jsxs("div",{children:[A.jsx(kr,{title:"Поиск"}),A.jsxs("div",{className:"p-4",children:[A.jsxs("div",{className:"relative mb-4",children:[A.jsx(ob,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-50"}),A.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:s,onChange:m=>a(m.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-background border border-border-color focus:outline-none focus:ring-1 focus:ring-accent"})]}),A.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:h.map(m=>A.jsx("button",{onClick:()=>g(m),className:`px-3 py-1 text-xs font-medium rounded-full border transition-colors ${l===m?"bg-accent text-white border-accent":"bg-background border-border-color hover:bg-border-color"}`,children:m},m))})]}),A.jsx(Og,{novels:d,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]})},wO=({allNovels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>{const r=F.useMemo(()=>e.filter(s=>n.includes(s.id)),[e,n]);return A.jsxs("div",{children:[A.jsx(kr,{title:"Закладки"}),r.length>0?A.jsx(Og,{novels:r,onSelectNovel:t,bookmarks:n,onToggleBookmark:i}):A.jsx("p",{className:"text-center p-4 opacity-70",children:"У вас пока нет закладок."})]})},RO=({user:e,subscription:t,onGetSubscriptionClick:n,auth:i})=>{const r=()=>{IC(i).catch(l=>console.error("Logout failed:",l))},s=l=>l?new Date(l.seconds*1e3).toLocaleDateString("ru-RU"):"N/A",a=t&&new Date(t.endDate.seconds*1e3)>new Date;return A.jsxs("div",{children:[A.jsx(kr,{title:"Профиль"}),A.jsxs("div",{className:"p-4 space-y-4",children:[A.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[A.jsx("p",{className:"text-lg font-semibold",children:e.displayName||"Анонимный пользователь"}),A.jsx("p",{className:"text-sm opacity-70",children:e.email})]}),A.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[A.jsx("h3",{className:"font-semibold mb-2",children:"Статус подписки"}),a?A.jsxs("div",{children:[A.jsx("p",{className:"text-green-500",children:"Активна"}),A.jsxs("p",{className:"text-sm opacity-70",children:["Действительна до: ",s(t.endDate)]})]}):A.jsxs("div",{children:[A.jsx("p",{className:"text-red-500",children:"Неактивна"}),A.jsx("button",{onClick:n,className:"mt-2 px-4 py-2 text-sm font-bold text-white bg-accent rounded-lg",children:"Оформить подписку"})]})]}),A.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 p-3 text-red-500 rounded-lg bg-component-bg border border-border-color hover:bg-border-color transition-colors",children:[A.jsx(_O,{}),A.jsx("span",{children:"Выйти из аккаунта"})]})]})]})},IO=({onReadMore:e})=>{const[t,n]=F.useState([]),[i,r]=F.useState(0);F.useEffect(()=>{fetch("/tene/data/news.json").then(l=>l.json()).then(l=>n(l)).catch(l=>console.error("Failed to load news:",l))},[]);const s=()=>{r(l=>l===0?t.length-1:l-1)},a=()=>{r(l=>l===t.length-1?0:l+1)};return t.length===0?null:A.jsxs("div",{className:"relative w-full max-w-2xl mx-auto overflow-hidden rounded-lg shadow-lg my-4 border border-border-color",children:[A.jsx("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${i*100}%)`},children:t.map(l=>A.jsxs("div",{className:"w-full flex-shrink-0 p-6 bg-component-bg text-text-main",children:[A.jsx("h3",{className:"text-xl font-bold",children:l.title}),A.jsx("p",{className:"mt-2 text-sm opacity-80",children:l.shortText}),A.jsx("button",{onClick:()=>e(l),className:"mt-4 text-accent font-semibold",children:"Читать далее"})]},l.id))}),A.jsx("button",{onClick:s,className:"absolute top-1/2 left-2 -translate-y-1/2 p-2 rounded-full bg-black/20 text-white backdrop-blur-sm",children:A.jsx(gO,{})}),A.jsx("button",{onClick:a,className:"absolute top-1/2 right-2 -translate-y-1/2 p-2 rounded-full bg-black/20 text-white backdrop-blur-sm",children:A.jsx(pO,{})}),A.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex space-x-2",children:t.map((l,u)=>A.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${i===u?"bg-accent":"bg-gray-400"}`},u))})]})},CO=({onClose:e,onSelectPlan:t})=>{const n=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return A.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:A.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[A.jsx(fO,{className:"mx-auto mb-4 text-accent"}),A.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),A.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),A.jsx("div",{className:"space-y-3",children:n.map(i=>A.jsxs("button",{onClick:()=>t(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[A.jsx("p",{className:"font-bold",children:i.name}),A.jsxs("p",{className:"text-sm",children:[i.price," ₽"]})]},i.duration))}),A.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},NO=({onClose:e,onSelectMethod:t,plan:n})=>A.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:A.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[A.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),A.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("button",{onClick:()=>t("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[A.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),A.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),A.jsxs("button",{onClick:()=>t("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[A.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),A.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]})]}),A.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Назад"})]})}),DO=({newsItem:e,onClose:t})=>A.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:A.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main",onClick:n=>n.stopPropagation(),children:[A.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title}),A.jsx("p",{className:"whitespace-pre-wrap opacity-80",children:e.fullText}),A.jsx("button",{onClick:t,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})});function xO(){const[e,t]=F.useState(null),[n,i]=F.useState(!0),[r,s]=F.useState([]),[a,l]=F.useState("list"),[u,h]=F.useState(null),[d,g]=F.useState(null),[m,y]=F.useState([]),[D,V]=F.useState(!1),[M,b]=F.useState(null),[v,R]=F.useState([]),[x,U]=F.useState(!1),[q,E]=F.useState({}),[_,T]=F.useState(!1),[S,I]=F.useState(null),[C,w]=F.useState(null),[me,De]=F.useState("library"),[B,Z]=F.useState(()=>parseInt(localStorage.getItem("fontSize"),10)||16),[X]=F.useState("font-sans"),gt="tenebrisverbot",nt=e==null?void 0:e.uid,hn=(e==null?void 0:e.displayName)||"Аноним";F.useEffect(()=>RC(Eu,async Ot=>{if(t(Ot),Ot){const Le=gn(qe,"admins",Ot.uid),fn=await X4(Le);U(fn.exists()),yc(gn(qe,"users",Ot.uid,"subscription","current"),hi=>{b(hi.data())}),yc(gn(qe,"users",Ot.uid),hi=>{var Gr,Fr;R(((Gr=hi.data())==null?void 0:Gr.bookmarks)||[]),E(((Fr=hi.data())==null?void 0:Fr.lastRead)||{})})}i(!1)}),[]),F.useEffect(()=>{fetch("/tene/data/novels.json").then(mt=>mt.json()).then(mt=>s(mt)).catch(mt=>console.error("Failed to load novels:",mt))},[]);const Ht=F.useCallback(mt=>{h(mt),l("details"),V(!0),setTimeout(()=>{fetch(`/tene/data/${mt.id}.json`).then(Ot=>Ot.json()).then(Ot=>y(Ot.chapters||[])).catch(()=>y([])).finally(()=>V(!1))},300)},[]),wt=F.useCallback(async(mt,Ot)=>{const Le=m.find(fn=>fn.id===Ot);if(Le&&(g(Le),l("reader"),nt)){const fn=gn(qe,"users",nt);await Mv(fn,{lastRead:{...q,[mt]:{chapterId:Ot,chapterTitle:Le.title}}},{merge:!0})}},[m,nt,q]),J=F.useCallback(async mt=>{if(!nt)return;const Ot=gn(qe,"users",nt),Le=v.includes(mt)?v.filter(fn=>fn!==mt):[...v,mt];await Mv(Ot,{bookmarks:Le},{merge:!0})},[v,nt]),St=mt=>{Z(mt),localStorage.setItem("fontSize",mt)},se=mt=>{I(mt),T(!1)},Je=async mt=>{if(!S||!nt)return;`${S.name}${S.price}${mt}${nt}`;const Ot=`https://t.me/${gt}?start=subscribe_${nt}_${S.duration}`;window.open(Ot,"_blank"),I(null)},ge=()=>{if(a==="details"&&u)return A.jsx(TO,{novel:u,onBack:()=>l("list"),onSelectChapter:wt,chapters:m,isLoadingChapters:D,subscription:M,lastReadData:q,onGenreSelect:mt=>{De("search"),l("list")}});if(a==="reader"&&d)return A.jsx(SO,{chapter:d,novel:u,onBack:()=>l("details"),onSelectChapter:wt,allChapters:m,subscription:M,userId:nt,userName:hn,isUserAdmin:x,fontSize:B,onFontSizeChange:St,currentFontClass:X});switch(me){case"search":return A.jsx(bO,{novels:r,onSelectNovel:Ht,bookmarks:v,onToggleBookmark:J,onGenreSelect:mt=>console.log(mt)});case"bookmarks":return A.jsx(wO,{allNovels:r,onSelectNovel:Ht,bookmarks:v,onToggleBookmark:J});case"profile":return A.jsx(RO,{user:e,subscription:M,auth:Eu,onGetSubscriptionClick:()=>T(!0)});case"library":default:return A.jsxs("div",{children:[A.jsx(IO,{onReadMore:w}),A.jsx(Og,{novels:r,onSelectNovel:Ht,bookmarks:v,onToggleBookmark:J})]})}};return n?A.jsx(vO,{}):e?A.jsxs("main",{className:`bg-background min-h-screen text-text-main ${x?"":"no-select"}`,children:[A.jsx("div",{className:"pb-20 max-w-4xl mx-auto",children:ge()}),a==="list"&&A.jsx(EO,{activeTab:me,setActiveTab:De}),_&&A.jsx(CO,{onClose:()=>T(!1),onSelectPlan:se}),S&&A.jsx(NO,{onClose:()=>I(null),onSelectMethod:Je,plan:S}),C&&A.jsx(DO,{newsItem:C,onClose:()=>w(null)})]}):A.jsx(lO,{auth:Eu})}UR.createRoot(document.getElementById("root")).render(A.jsx(F.StrictMode,{children:A.jsx(xO,{})}));
