(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var wv={exports:{}},fc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1=Symbol.for("react.transitional.element"),R1=Symbol.for("react.fragment");function Rv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:w1,type:e,key:i,ref:t!==void 0?t:null,props:n}}fc.Fragment=R1;fc.jsx=Rv;fc.jsxs=Rv;wv.exports=fc;var O=wv.exports,Iv={exports:{}},tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=Symbol.for("react.transitional.element"),I1=Symbol.for("react.portal"),C1=Symbol.for("react.fragment"),D1=Symbol.for("react.strict_mode"),N1=Symbol.for("react.profiler"),O1=Symbol.for("react.consumer"),V1=Symbol.for("react.context"),M1=Symbol.for("react.forward_ref"),x1=Symbol.for("react.suspense"),k1=Symbol.for("react.memo"),Cv=Symbol.for("react.lazy"),Sp=Symbol.iterator;function P1(e){return e===null||typeof e!="object"?null:(e=Sp&&e[Sp]||e["@@iterator"],typeof e=="function"?e:null)}var Dv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nv=Object.assign,Ov={};function Qs(e,t,n){this.props=e,this.context=t,this.refs=Ov,this.updater=n||Dv}Qs.prototype.isReactComponent={};Qs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Vv(){}Vv.prototype=Qs.prototype;function Md(e,t,n){this.props=e,this.context=t,this.refs=Ov,this.updater=n||Dv}var xd=Md.prototype=new Vv;xd.constructor=Md;Nv(xd,Qs.prototype);xd.isPureReactComponent=!0;var bp=Array.isArray,It={H:null,A:null,T:null,S:null,V:null},Mv=Object.prototype.hasOwnProperty;function kd(e,t,n,i,r,s){return n=s.ref,{$$typeof:Vd,type:e,key:t,ref:n!==void 0?n:null,props:s}}function U1(e,t){return kd(e.type,t,void 0,void 0,void 0,e.props)}function Pd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vd}function L1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var wp=/\/+/g;function _h(e,t){return typeof e=="object"&&e!==null&&e.key!=null?L1(""+e.key):t.toString(36)}function Rp(){}function z1(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Rp,Rp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Yr(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Vd:case I1:a=!0;break;case Cv:return a=e._init,Yr(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+_h(e,0):i,bp(r)?(n="",a!=null&&(n=a.replace(wp,"$&/")+"/"),Yr(r,t,n,"",function(h){return h})):r!=null&&(Pd(r)&&(r=U1(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(wp,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(bp(e))for(var u=0;u<e.length;u++)i=e[u],s=l+_h(i,u),a+=Yr(i,t,n,s,r);else if(u=P1(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+_h(i,u++),a+=Yr(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return Yr(z1(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Rl(e,t,n){if(e==null)return e;var i=[],r=0;return Yr(e,i,"","",function(s){return t.call(n,s,r++)}),i}function j1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ip=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function B1(){}tt.Children={map:Rl,forEach:function(e,t,n){Rl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Rl(e,function(){t++}),t},toArray:function(e){return Rl(e,function(t){return t})||[]},only:function(e){if(!Pd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};tt.Component=Qs;tt.Fragment=C1;tt.Profiler=N1;tt.PureComponent=Md;tt.StrictMode=D1;tt.Suspense=x1;tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=It;tt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return It.H.useMemoCache(e)}};tt.cache=function(e){return function(){return e.apply(null,arguments)}};tt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=Nv({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!Mv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return kd(e.type,r,void 0,void 0,s,i)};tt.createContext=function(e){return e={$$typeof:V1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:O1,_context:e},e};tt.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)Mv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return kd(e,s,void 0,void 0,null,r)};tt.createRef=function(){return{current:null}};tt.forwardRef=function(e){return{$$typeof:M1,render:e}};tt.isValidElement=Pd;tt.lazy=function(e){return{$$typeof:Cv,_payload:{_status:-1,_result:e},_init:j1}};tt.memo=function(e,t){return{$$typeof:k1,type:e,compare:t===void 0?null:t}};tt.startTransition=function(e){var t=It.T,n={};It.T=n;try{var i=e(),r=It.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(B1,Ip)}catch(s){Ip(s)}finally{It.T=t}};tt.unstable_useCacheRefresh=function(){return It.H.useCacheRefresh()};tt.use=function(e){return It.H.use(e)};tt.useActionState=function(e,t,n){return It.H.useActionState(e,t,n)};tt.useCallback=function(e,t){return It.H.useCallback(e,t)};tt.useContext=function(e){return It.H.useContext(e)};tt.useDebugValue=function(){};tt.useDeferredValue=function(e,t){return It.H.useDeferredValue(e,t)};tt.useEffect=function(e,t,n){var i=It.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};tt.useId=function(){return It.H.useId()};tt.useImperativeHandle=function(e,t,n){return It.H.useImperativeHandle(e,t,n)};tt.useInsertionEffect=function(e,t){return It.H.useInsertionEffect(e,t)};tt.useLayoutEffect=function(e,t){return It.H.useLayoutEffect(e,t)};tt.useMemo=function(e,t){return It.H.useMemo(e,t)};tt.useOptimistic=function(e,t){return It.H.useOptimistic(e,t)};tt.useReducer=function(e,t,n){return It.H.useReducer(e,t,n)};tt.useRef=function(e){return It.H.useRef(e)};tt.useState=function(e){return It.H.useState(e)};tt.useSyncExternalStore=function(e,t,n){return It.H.useSyncExternalStore(e,t,n)};tt.useTransition=function(){return It.H.useTransition()};tt.version="19.1.1";Iv.exports=tt;var K=Iv.exports,xv={exports:{}},dc={},kv={exports:{}},Pv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,Y){var Z=B.length;B.push(Y);t:for(;0<Z;){var _t=Z-1>>>1,Dt=B[_t];if(0<r(Dt,Y))B[_t]=Y,B[Z]=Dt,Z=_t;else break t}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var Y=B[0],Z=B.pop();if(Z!==Y){B[0]=Z;t:for(var _t=0,Dt=B.length,ii=Dt>>>1;_t<ii;){var Ee=2*(_t+1)-1,xt=B[Ee],rn=Ee+1,W=B[rn];if(0>r(xt,Z))rn<Dt&&0>r(W,xt)?(B[_t]=W,B[rn]=Z,_t=rn):(B[_t]=xt,B[Ee]=Z,_t=Ee);else if(rn<Dt&&0>r(W,Z))B[_t]=W,B[rn]=Z,_t=rn;else break t}}return Y}function r(B,Y){var Z=B.sortIndex-Y.sortIndex;return Z!==0?Z:B.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,_=!1,N=!1,M=!1,k=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function D(B){for(var Y=n(h);Y!==null;){if(Y.callback===null)i(h);else if(Y.startTime<=B)i(h),Y.sortIndex=Y.expirationTime,t(u,Y);else break;Y=n(h)}}function L(B){if(M=!1,D(B),!N)if(n(u)!==null)N=!0,q||(q=!0,I());else{var Y=n(h);Y!==null&&ie(L,Y.startTime-B)}}var q=!1,A=-1,y=5,v=-1;function T(){return k?!0:!(e.unstable_now()-v<y)}function R(){if(k=!1,q){var B=e.unstable_now();v=B;var Y=!0;try{t:{N=!1,M&&(M=!1,E(A),A=-1),_=!0;var Z=m;try{e:{for(D(B),g=n(u);g!==null&&!(g.expirationTime>B&&T());){var _t=g.callback;if(typeof _t=="function"){g.callback=null,m=g.priorityLevel;var Dt=_t(g.expirationTime<=B);if(B=e.unstable_now(),typeof Dt=="function"){g.callback=Dt,D(B),Y=!0;break e}g===n(u)&&i(u),D(B)}else i(u);g=n(u)}if(g!==null)Y=!0;else{var ii=n(h);ii!==null&&ie(L,ii.startTime-B),Y=!1}}break t}finally{g=null,m=Z,_=!1}Y=void 0}}finally{Y?I():q=!1}}}var I;if(typeof w=="function")I=function(){w(R)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,wt=S.port2;S.port1.onmessage=R,I=function(){wt.postMessage(null)}}else I=function(){b(R,0)};function ie(B,Y){A=b(function(){B(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(B){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var Z=m;m=Y;try{return B()}finally{m=Z}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=m;m=B;try{return Y()}finally{m=Z}},e.unstable_scheduleCallback=function(B,Y,Z){var _t=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?_t+Z:_t):Z=_t,B){case 1:var Dt=-1;break;case 2:Dt=250;break;case 5:Dt=1073741823;break;case 4:Dt=1e4;break;default:Dt=5e3}return Dt=Z+Dt,B={id:d++,callback:Y,priorityLevel:B,startTime:Z,expirationTime:Dt,sortIndex:-1},Z>_t?(B.sortIndex=Z,t(h,B),n(u)===null&&B===n(h)&&(M?(E(A),A=-1):M=!0,ie(L,Z-_t))):(B.sortIndex=Dt,t(u,B),N||_||(N=!0,q||(q=!0,I()))),B},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(B){var Y=m;return function(){var Z=m;m=Y;try{return B.apply(this,arguments)}finally{m=Z}}}})(Pv);kv.exports=Pv;var q1=kv.exports,Uv={exports:{}},Re={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H1=K;function Lv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ui(){}var we={d:{f:ui,r:function(){throw Error(Lv(522))},D:ui,C:ui,L:ui,m:ui,X:ui,S:ui,M:ui},p:0,findDOMNode:null},G1=Symbol.for("react.portal");function F1(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G1,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Ua=H1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function mc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Re.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=we;Re.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Lv(299));return F1(e,t,null,n)};Re.flushSync=function(e){var t=Ua.T,n=we.p;try{if(Ua.T=null,we.p=2,e)return e()}finally{Ua.T=t,we.p=n,we.d.f()}};Re.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,we.d.C(e,t))};Re.prefetchDNS=function(e){typeof e=="string"&&we.d.D(e)};Re.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=mc(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?we.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&we.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Re.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=mc(t.as,t.crossOrigin);we.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&we.d.M(e)};Re.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=mc(n,t.crossOrigin);we.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Re.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=mc(t.as,t.crossOrigin);we.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else we.d.m(e)};Re.requestFormReset=function(e){we.d.r(e)};Re.unstable_batchedUpdates=function(e,t){return e(t)};Re.useFormState=function(e,t,n){return Ua.H.useFormState(e,t,n)};Re.useFormStatus=function(){return Ua.H.useHostTransitionStatus()};Re.version="19.1.1";function zv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zv)}catch(e){console.error(e)}}zv(),Uv.exports=Re;var Q1=Uv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $t=q1,jv=K,Y1=Q1;function U(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Bv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function No(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function qv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Cp(e){if(No(e)!==e)throw Error(U(188))}function K1(e){var t=e.alternate;if(!t){if(t=No(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Cp(r),e;if(s===i)return Cp(r),t;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function Hv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Hv(e),t!==null)return t;e=e.sibling}return null}var bt=Object.assign,$1=Symbol.for("react.element"),Il=Symbol.for("react.transitional.element"),Da=Symbol.for("react.portal"),es=Symbol.for("react.fragment"),Gv=Symbol.for("react.strict_mode"),hf=Symbol.for("react.profiler"),X1=Symbol.for("react.provider"),Fv=Symbol.for("react.consumer"),kn=Symbol.for("react.context"),Ud=Symbol.for("react.forward_ref"),ff=Symbol.for("react.suspense"),df=Symbol.for("react.suspense_list"),Ld=Symbol.for("react.memo"),di=Symbol.for("react.lazy"),mf=Symbol.for("react.activity"),Z1=Symbol.for("react.memo_cache_sentinel"),Dp=Symbol.iterator;function Ta(e){return e===null||typeof e!="object"?null:(e=Dp&&e[Dp]||e["@@iterator"],typeof e=="function"?e:null)}var J1=Symbol.for("react.client.reference");function gf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===J1?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case es:return"Fragment";case hf:return"Profiler";case Gv:return"StrictMode";case ff:return"Suspense";case df:return"SuspenseList";case mf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Da:return"Portal";case kn:return(e.displayName||"Context")+".Provider";case Fv:return(e._context.displayName||"Context")+".Consumer";case Ud:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ld:return t=e.displayName||null,t!==null?t:gf(e.type)||"Memo";case di:t=e._payload,e=e._init;try{return gf(e(t))}catch{}}return null}var Na=Array.isArray,$=jv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ft=Y1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yr={pending:!1,data:null,method:null,action:null},pf=[],ns=-1;function In(e){return{current:e}}function ee(e){0>ns||(e.current=pf[ns],pf[ns]=null,ns--)}function Ct(e,t){ns++,pf[ns]=e.current,e.current=t}var _n=In(null),so=In(null),Di=In(null),pu=In(null);function yu(e,t){switch(Ct(Di,t),Ct(so,e),Ct(_n,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?xy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=xy(t),e=l0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ee(_n),Ct(_n,e)}function Cs(){ee(_n),ee(so),ee(Di)}function yf(e){e.memoizedState!==null&&Ct(pu,e);var t=_n.current,n=l0(t,e.type);t!==n&&(Ct(so,e),Ct(_n,n))}function _u(e){so.current===e&&(ee(_n),ee(so)),pu.current===e&&(ee(pu),po._currentValue=yr)}var _f=Object.prototype.hasOwnProperty,zd=$t.unstable_scheduleCallback,vh=$t.unstable_cancelCallback,W1=$t.unstable_shouldYield,tb=$t.unstable_requestPaint,vn=$t.unstable_now,eb=$t.unstable_getCurrentPriorityLevel,Qv=$t.unstable_ImmediatePriority,Yv=$t.unstable_UserBlockingPriority,vu=$t.unstable_NormalPriority,nb=$t.unstable_LowPriority,Kv=$t.unstable_IdlePriority,ib=$t.log,rb=$t.unstable_setDisableYieldValue,Oo=null,Be=null;function bi(e){if(typeof ib=="function"&&rb(e),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(Oo,e)}catch{}}var qe=Math.clz32?Math.clz32:ob,sb=Math.log,ab=Math.LN2;function ob(e){return e>>>=0,e===0?32:31-(sb(e)/ab|0)|0}var Cl=256,Dl=4194304;function fr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function gc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=fr(i):(a&=l,a!==0?r=fr(a):n||(n=l&~e,n!==0&&(r=fr(n))))):(l=i&~s,l!==0?r=fr(l):a!==0?r=fr(a):n||(n=i&~e,n!==0&&(r=fr(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function Vo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function lb(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $v(){var e=Cl;return Cl<<=1,!(Cl&4194048)&&(Cl=256),e}function Xv(){var e=Dl;return Dl<<=1,!(Dl&62914560)&&(Dl=4194304),e}function Eh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Mo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ub(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-qe(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&Zv(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function Zv(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-qe(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function Jv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-qe(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function jd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Bd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Wv(){var e=ft.p;return e!==0?e:(e=window.event,e===void 0?32:_0(e.type))}function cb(e,t){var n=ft.p;try{return ft.p=e,t()}finally{ft.p=n}}var er=Math.random().toString(36).slice(2),ye="__reactFiber$"+er,Ve="__reactProps$"+er,Ys="__reactContainer$"+er,vf="__reactEvents$"+er,hb="__reactListeners$"+er,fb="__reactHandles$"+er,Np="__reactResources$"+er,xo="__reactMarker$"+er;function qd(e){delete e[ye],delete e[Ve],delete e[vf],delete e[hb],delete e[fb]}function is(e){var t=e[ye];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ys]||n[ye]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Uy(e);e!==null;){if(n=e[ye])return n;e=Uy(e)}return t}e=n,n=e.parentNode}return null}function Ks(e){if(e=e[ye]||e[Ys]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Oa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(U(33))}function gs(e){var t=e[Np];return t||(t=e[Np]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Jt(e){e[xo]=!0}var tE=new Set,eE={};function Mr(e,t){Ds(e,t),Ds(e+"Capture",t)}function Ds(e,t){for(eE[e]=t,e=0;e<t.length;e++)tE.add(t[e])}var db=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Op={},Vp={};function mb(e){return _f.call(Vp,e)?!0:_f.call(Op,e)?!1:db.test(e)?Vp[e]=!0:(Op[e]=!0,!1)}function Yl(e,t,n){if(mb(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Nl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function On(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Th,Mp;function Kr(e){if(Th===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Th=t&&t[1]||"",Mp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Th+e+Mp}var Ah=!1;function Sh(e,t){if(!e||Ah)return"";Ah=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var m=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){m=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){m=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{Ah=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Kr(n):""}function gb(e){switch(e.tag){case 26:case 27:case 5:return Kr(e.type);case 16:return Kr("Lazy");case 13:return Kr("Suspense");case 19:return Kr("SuspenseList");case 0:case 15:return Sh(e.type,!1);case 11:return Sh(e.type.render,!1);case 1:return Sh(e.type,!0);case 31:return Kr("Activity");default:return""}}function xp(e){try{var t="";do t+=gb(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function $e(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pb(e){var t=nE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Eu(e){e._valueTracker||(e._valueTracker=pb(e))}function iE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=nE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Tu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var yb=/[\n"\\]/g;function Je(e){return e.replace(yb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ef(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+$e(t)):e.value!==""+$e(t)&&(e.value=""+$e(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Tf(e,a,$e(t)):n!=null?Tf(e,a,$e(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+$e(l):e.removeAttribute("name")}function rE(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+$e(n):"",t=t!=null?""+$e(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Tf(e,t,n){t==="number"&&Tu(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ps(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+$e(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function sE(e,t,n){if(t!=null&&(t=""+$e(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+$e(n):""}function aE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(U(92));if(Na(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=$e(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Ns(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var _b=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||_b.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function oE(e,t,n){if(t!=null&&typeof t!="object")throw Error(U(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&kp(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&kp(e,s,t[s])}function Hd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Eb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kl(e){return Eb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Af=null;function Gd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rs=null,ys=null;function Pp(e){var t=Ks(e);if(t&&(e=t.stateNode)){var n=e[Ve]||null;t:switch(e=t.stateNode,t.type){case"input":if(Ef(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Je(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Ve]||null;if(!r)throw Error(U(90));Ef(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&iE(i)}break t;case"textarea":sE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&ps(e,!!n.multiple,t,!1)}}}var bh=!1;function lE(e,t,n){if(bh)return e(t,n);bh=!0;try{var i=e(t);return i}finally{if(bh=!1,(rs!==null||ys!==null)&&(wc(),rs&&(t=rs,e=ys,ys=rs=null,Pp(t),e)))for(t=0;t<e.length;t++)Pp(e[t])}}function ao(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Ve]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sf=!1;if(Fn)try{var Aa={};Object.defineProperty(Aa,"passive",{get:function(){Sf=!0}}),window.addEventListener("test",Aa,Aa),window.removeEventListener("test",Aa,Aa)}catch{Sf=!1}var wi=null,Fd=null,$l=null;function uE(){if($l)return $l;var e,t=Fd,n=t.length,i,r="value"in wi?wi.value:wi.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return $l=r.slice(e,1<i?1-i:void 0)}function Xl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ol(){return!0}function Up(){return!1}function Me(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ol:Up,this.isPropagationStopped=Up,this}return bt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ol)},persist:function(){},isPersistent:Ol}),t}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pc=Me(xr),ko=bt({},xr,{view:0,detail:0}),Tb=Me(ko),wh,Rh,Sa,yc=bt({},ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sa&&(Sa&&e.type==="mousemove"?(wh=e.screenX-Sa.screenX,Rh=e.screenY-Sa.screenY):Rh=wh=0,Sa=e),wh)},movementY:function(e){return"movementY"in e?e.movementY:Rh}}),Lp=Me(yc),Ab=bt({},yc,{dataTransfer:0}),Sb=Me(Ab),bb=bt({},ko,{relatedTarget:0}),Ih=Me(bb),wb=bt({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),Rb=Me(wb),Ib=bt({},xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cb=Me(Ib),Db=bt({},xr,{data:0}),zp=Me(Db),Nb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ob={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vb[e])?!!t[e]:!1}function Qd(){return Mb}var xb=bt({},ko,{key:function(e){if(e.key){var t=Nb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ob[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qd,charCode:function(e){return e.type==="keypress"?Xl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kb=Me(xb),Pb=bt({},yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jp=Me(Pb),Ub=bt({},ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qd}),Lb=Me(Ub),zb=bt({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),jb=Me(zb),Bb=bt({},yc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qb=Me(Bb),Hb=bt({},xr,{newState:0,oldState:0}),Gb=Me(Hb),Fb=[9,13,27,32],Yd=Fn&&"CompositionEvent"in window,La=null;Fn&&"documentMode"in document&&(La=document.documentMode);var Qb=Fn&&"TextEvent"in window&&!La,cE=Fn&&(!Yd||La&&8<La&&11>=La),Bp=" ",qp=!1;function hE(e,t){switch(e){case"keyup":return Fb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ss=!1;function Yb(e,t){switch(e){case"compositionend":return fE(t);case"keypress":return t.which!==32?null:(qp=!0,Bp);case"textInput":return e=t.data,e===Bp&&qp?null:e;default:return null}}function Kb(e,t){if(ss)return e==="compositionend"||!Yd&&hE(e,t)?(e=uE(),$l=Fd=wi=null,ss=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return cE&&t.locale!=="ko"?null:t.data;default:return null}}var $b={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$b[e.type]:t==="textarea"}function dE(e,t,n,i){rs?ys?ys.push(i):ys=[i]:rs=i,t=zu(t,"onChange"),0<t.length&&(n=new pc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var za=null,oo=null;function Xb(e){s0(e,0)}function _c(e){var t=Oa(e);if(iE(t))return e}function Gp(e,t){if(e==="change")return t}var mE=!1;if(Fn){var Ch;if(Fn){var Dh="oninput"in document;if(!Dh){var Fp=document.createElement("div");Fp.setAttribute("oninput","return;"),Dh=typeof Fp.oninput=="function"}Ch=Dh}else Ch=!1;mE=Ch&&(!document.documentMode||9<document.documentMode)}function Qp(){za&&(za.detachEvent("onpropertychange",gE),oo=za=null)}function gE(e){if(e.propertyName==="value"&&_c(oo)){var t=[];dE(t,oo,e,Gd(e)),lE(Xb,t)}}function Zb(e,t,n){e==="focusin"?(Qp(),za=t,oo=n,za.attachEvent("onpropertychange",gE)):e==="focusout"&&Qp()}function Jb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _c(oo)}function Wb(e,t){if(e==="click")return _c(t)}function tw(e,t){if(e==="input"||e==="change")return _c(t)}function ew(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ye=typeof Object.is=="function"?Object.is:ew;function lo(e,t){if(Ye(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!_f.call(t,r)||!Ye(e[r],t[r]))return!1}return!0}function Yp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kp(e,t){var n=Yp(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Yp(n)}}function pE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Tu(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Tu(e.document)}return t}function Kd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var nw=Fn&&"documentMode"in document&&11>=document.documentMode,as=null,bf=null,ja=null,wf=!1;function $p(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wf||as==null||as!==Tu(i)||(i=as,"selectionStart"in i&&Kd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ja&&lo(ja,i)||(ja=i,i=zu(bf,"onSelect"),0<i.length&&(t=new pc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=as)))}function hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var os={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},Nh={},_E={};Fn&&(_E=document.createElement("div").style,"AnimationEvent"in window||(delete os.animationend.animation,delete os.animationiteration.animation,delete os.animationstart.animation),"TransitionEvent"in window||delete os.transitionend.transition);function kr(e){if(Nh[e])return Nh[e];if(!os[e])return e;var t=os[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _E)return Nh[e]=t[n];return e}var vE=kr("animationend"),EE=kr("animationiteration"),TE=kr("animationstart"),iw=kr("transitionrun"),rw=kr("transitionstart"),sw=kr("transitioncancel"),AE=kr("transitionend"),SE=new Map,Rf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rf.push("scrollEnd");function fn(e,t){SE.set(e,t),Mr(t,[e])}var Xp=new WeakMap;function We(e,t){if(typeof e=="object"&&e!==null){var n=Xp.get(e);return n!==void 0?n:(t={value:e,source:t,stack:xp(t)},Xp.set(e,t),t)}return{value:e,source:t,stack:xp(t)}}var Ke=[],ls=0,$d=0;function vc(){for(var e=ls,t=$d=ls=0;t<e;){var n=Ke[t];Ke[t++]=null;var i=Ke[t];Ke[t++]=null;var r=Ke[t];Ke[t++]=null;var s=Ke[t];if(Ke[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&bE(n,r,s)}}function Ec(e,t,n,i){Ke[ls++]=e,Ke[ls++]=t,Ke[ls++]=n,Ke[ls++]=i,$d|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Xd(e,t,n,i){return Ec(e,t,n,i),Au(e)}function $s(e,t){return Ec(e,null,null,t),Au(e)}function bE(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-qe(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function Au(e){if(50<Xa)throw Xa=0,Yf=null,Error(U(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var us={};function aw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Le(e,t,n,i){return new aw(e,t,n,i)}function Zd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qn(e,t){var n=e.alternate;return n===null?(n=Le(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function wE(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Zl(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")Zd(e)&&(a=1);else if(typeof e=="string")a=lR(e,n,_n.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case mf:return e=Le(31,n,t,r),e.elementType=mf,e.lanes=s,e;case es:return _r(n.children,r,s,t);case Gv:a=8,r|=24;break;case hf:return e=Le(12,n,t,r|2),e.elementType=hf,e.lanes=s,e;case ff:return e=Le(13,n,t,r),e.elementType=ff,e.lanes=s,e;case df:return e=Le(19,n,t,r),e.elementType=df,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X1:case kn:a=10;break t;case Fv:a=9;break t;case Ud:a=11;break t;case Ld:a=14;break t;case di:a=16,i=null;break t}a=29,n=Error(U(130,e===null?"null":typeof e,"")),i=null}return t=Le(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function _r(e,t,n,i){return e=Le(7,e,i,t),e.lanes=n,e}function Oh(e,t,n){return e=Le(6,e,null,t),e.lanes=n,e}function Vh(e,t,n){return t=Le(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var cs=[],hs=0,Su=null,bu=0,Xe=[],Ze=0,vr=null,Pn=1,Un="";function dr(e,t){cs[hs++]=bu,cs[hs++]=Su,Su=e,bu=t}function RE(e,t,n){Xe[Ze++]=Pn,Xe[Ze++]=Un,Xe[Ze++]=vr,vr=e;var i=Pn;e=Un;var r=32-qe(i)-1;i&=~(1<<r),n+=1;var s=32-qe(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Pn=1<<32-qe(t)+r|n<<r|i,Un=s+e}else Pn=1<<s|n<<r|i,Un=e}function Jd(e){e.return!==null&&(dr(e,1),RE(e,1,0))}function Wd(e){for(;e===Su;)Su=cs[--hs],cs[hs]=null,bu=cs[--hs],cs[hs]=null;for(;e===vr;)vr=Xe[--Ze],Xe[Ze]=null,Un=Xe[--Ze],Xe[Ze]=null,Pn=Xe[--Ze],Xe[Ze]=null}var Se=null,Pt=null,ht=!1,Er=null,pn=!1,If=Error(U(519));function br(e){var t=Error(U(418,""));throw uo(We(t,e)),If}function Zp(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[ye]=e,t[Ve]=i,n){case"dialog":nt("cancel",t),nt("close",t);break;case"iframe":case"object":case"embed":nt("load",t);break;case"video":case"audio":for(n=0;n<fo.length;n++)nt(fo[n],t);break;case"source":nt("error",t);break;case"img":case"image":case"link":nt("error",t),nt("load",t);break;case"details":nt("toggle",t);break;case"input":nt("invalid",t),rE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Eu(t);break;case"select":nt("invalid",t);break;case"textarea":nt("invalid",t),aE(t,i.value,i.defaultValue,i.children),Eu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||o0(t.textContent,n)?(i.popover!=null&&(nt("beforetoggle",t),nt("toggle",t)),i.onScroll!=null&&nt("scroll",t),i.onScrollEnd!=null&&nt("scrollend",t),i.onClick!=null&&(t.onclick=Cc),t=!0):t=!1,t||br(e)}function Jp(e){for(Se=e.return;Se;)switch(Se.tag){case 5:case 13:pn=!1;return;case 27:case 3:pn=!0;return;default:Se=Se.return}}function ba(e){if(e!==Se)return!1;if(!ht)return Jp(e),ht=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Wf(e.type,e.memoizedProps)),n=!n),n&&Pt&&br(e),Jp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Pt=cn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Pt=null}}else t===27?(t=Pt,nr(e.type)?(e=nd,nd=null,Pt=e):Pt=t):Pt=Se?cn(e.stateNode.nextSibling):null;return!0}function Po(){Pt=Se=null,ht=!1}function Wp(){var e=Er;return e!==null&&(Ne===null?Ne=e:Ne.push.apply(Ne,e),Er=null),e}function uo(e){Er===null?Er=[e]:Er.push(e)}var Cf=In(null),Pr=null,Ln=null;function gi(e,t,n){Ct(Cf,t._currentValue),t._currentValue=n}function Hn(e){e._currentValue=Cf.current,ee(Cf)}function Df(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Nf(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Df(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(U(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Df(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Uo(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(U(387));if(a=a.memoizedProps,a!==null){var l=r.type;Ye(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===pu.current){if(a=r.alternate,a===null)throw Error(U(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(po):e=[po])}r=r.return}e!==null&&Nf(t,e,n,i),t.flags|=262144}function wu(e){for(e=e.firstContext;e!==null;){if(!Ye(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function wr(e){Pr=e,Ln=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _e(e){return IE(Pr,e)}function Vl(e,t){return Pr===null&&wr(e),IE(e,t)}function IE(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ln===null){if(e===null)throw Error(U(308));Ln=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ln=Ln.next=t;return n}var ow=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},lw=$t.unstable_scheduleCallback,uw=$t.unstable_NormalPriority,Qt={$$typeof:kn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tm(){return{controller:new ow,data:new Map,refCount:0}}function Lo(e){e.refCount--,e.refCount===0&&lw(uw,function(){e.controller.abort()})}var Ba=null,Of=0,Os=0,_s=null;function cw(e,t){if(Ba===null){var n=Ba=[];Of=0,Os=Sm(),_s={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Of++,t.then(ty,ty),t}function ty(){if(--Of===0&&Ba!==null){_s!==null&&(_s.status="fulfilled");var e=Ba;Ba=null,Os=0,_s=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function hw(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var ey=$.S;$.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&cw(e,t),ey!==null&&ey(e,t)};var Tr=In(null);function em(){var e=Tr.current;return e!==null?e:Tt.pooledCache}function Jl(e,t){t===null?Ct(Tr,Tr.current):Ct(Tr,t.pool)}function CE(){var e=em();return e===null?null:{parent:Qt._currentValue,pool:e}}var zo=Error(U(460)),DE=Error(U(474)),Tc=Error(U(542)),Vf={then:function(){}};function ny(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ml(){}function NE(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ml,Ml),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ry(e),e;default:if(typeof t.status=="string")t.then(Ml,Ml);else{if(e=Tt,e!==null&&100<e.shellSuspendCounter)throw Error(U(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ry(e),e}throw qa=t,zo}}var qa=null;function iy(){if(qa===null)throw Error(U(459));var e=qa;return qa=null,e}function ry(e){if(e===zo||e===Tc)throw Error(U(483))}var mi=!1;function nm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ni(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Oi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,mt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Au(e),bE(e,null,n),t}return Ec(e,i,t,n),Au(e)}function Ha(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Jv(e,n)}}function Mh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var xf=!1;function Ga(){if(xf){var e=_s;if(e!==null)throw e}}function Fa(e,t,n,i){xf=!1;var r=e.updateQueue;mi=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(lt&m)===m:(i&m)===m){m!==0&&m===Os&&(xf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var N=e,M=l;m=t;var k=n;switch(M.tag){case 1:if(N=M.payload,typeof N=="function"){g=N.call(k,g,m);break t}g=N;break t;case 3:N.flags=N.flags&-65537|128;case 0:if(N=M.payload,m=typeof N=="function"?N.call(k,g,m):N,m==null)break t;g=bt({},g,m);break t;case 2:mi=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=r.callbacks,_===null?r.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=g):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);d===null&&(u=g),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),Yi|=a,e.lanes=a,e.memoizedState=g}}function OE(e,t){if(typeof e!="function")throw Error(U(191,e));e.call(t)}function VE(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)OE(n[e],t)}var Vs=In(null),Ru=In(0);function sy(e,t){e=Kn,Ct(Ru,e),Ct(Vs,t),Kn=e|t.baseLanes}function kf(){Ct(Ru,Kn),Ct(Vs,Vs.current)}function im(){Kn=Ru.current,ee(Vs),ee(Ru)}var Fi=0,et=null,pt=null,qt=null,Iu=!1,vs=!1,Rr=!1,Cu=0,co=0,Es=null,fw=0;function Lt(){throw Error(U(321))}function rm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ye(e[n],t[n]))return!1;return!0}function sm(e,t,n,i,r,s){return Fi=s,et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$.H=e===null||e.memoizedState===null?uT:cT,Rr=!1,s=n(i,r),Rr=!1,vs&&(s=xE(t,n,i,r)),ME(e),s}function ME(e){$.H=Du;var t=pt!==null&&pt.next!==null;if(Fi=0,qt=pt=et=null,Iu=!1,co=0,Es=null,t)throw Error(U(300));e===null||te||(e=e.dependencies,e!==null&&wu(e)&&(te=!0))}function xE(e,t,n,i){et=e;var r=0;do{if(vs&&(Es=null),co=0,vs=!1,25<=r)throw Error(U(301));if(r+=1,qt=pt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}$.H=vw,s=t(n,i)}while(vs);return s}function dw(){var e=$.H,t=e.useState()[0];return t=typeof t.then=="function"?jo(t):t,e=e.useState()[0],(pt!==null?pt.memoizedState:null)!==e&&(et.flags|=1024),t}function am(){var e=Cu!==0;return Cu=0,e}function om(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function lm(e){if(Iu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Iu=!1}Fi=0,qt=pt=et=null,vs=!1,co=Cu=0,Es=null}function Ce(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?et.memoizedState=qt=e:qt=qt.next=e,qt}function Ft(){if(pt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var t=qt===null?et.memoizedState:qt.next;if(t!==null)qt=t,pt=e;else{if(e===null)throw et.alternate===null?Error(U(467)):Error(U(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},qt===null?et.memoizedState=qt=e:qt=qt.next=e}return qt}function um(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jo(e){var t=co;return co+=1,Es===null&&(Es=[]),e=NE(Es,e,t),t=et,(qt===null?t.memoizedState:qt.next)===null&&(t=t.alternate,$.H=t===null||t.memoizedState===null?uT:cT),e}function Ac(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return jo(e);if(e.$$typeof===kn)return _e(e)}throw Error(U(438,String(e)))}function cm(e){var t=null,n=et.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=et.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=um(),et.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=Z1;return t.index++,n}function Qn(e,t){return typeof t=="function"?t(e):t}function Wl(e){var t=Ft();return hm(t,pt,e)}function hm(e,t,n){var i=e.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(lt&g)===g:(Fi&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Os&&(d=!0);else if((Fi&m)===m){h=h.next,m===Os&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=s):u=u.next=g,et.lanes|=m,Yi|=m;g=h.action,Rr&&n(s,g),s=h.hasEagerState?h.eagerState:n(s,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,et.lanes|=g,Yi|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!Ye(s,e.memoizedState)&&(te=!0,d&&(n=_s,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function xh(e){var t=Ft(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);Ye(s,t.memoizedState)||(te=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function kE(e,t,n){var i=et,r=Ft(),s=ht;if(s){if(n===void 0)throw Error(U(407));n=n()}else n=t();var a=!Ye((pt||r).memoizedState,n);a&&(r.memoizedState=n,te=!0),r=r.queue;var l=LE.bind(null,i,r,e);if(Bo(2048,8,l,[e]),r.getSnapshot!==t||a||qt!==null&&qt.memoizedState.tag&1){if(i.flags|=2048,Ms(9,Sc(),UE.bind(null,i,r,n,t),null),Tt===null)throw Error(U(349));s||Fi&124||PE(i,t,n)}return n}function PE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=et.updateQueue,t===null?(t=um(),et.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function UE(e,t,n,i){t.value=n,t.getSnapshot=i,zE(t)&&jE(e)}function LE(e,t,n){return n(function(){zE(t)&&jE(e)})}function zE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ye(e,n)}catch{return!0}}function jE(e){var t=$s(e,2);t!==null&&Ge(t,e,2)}function Pf(e){var t=Ce();if(typeof e=="function"){var n=e;if(e=n(),Rr){bi(!0);try{n()}finally{bi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:e},t}function BE(e,t,n,i){return e.baseState=n,hm(e,pt,typeof i=="function"?i:Qn)}function mw(e,t,n,i,r){if(bc(e))throw Error(U(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};$.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,qE(t,s)):(s.next=n.next,t.pending=n.next=s)}}function qE(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=$.T,a={};$.T=a;try{var l=n(r,i),u=$.S;u!==null&&u(a,l),ay(e,t,l)}catch(h){Uf(e,t,h)}finally{$.T=s}}else try{s=n(r,i),ay(e,t,s)}catch(h){Uf(e,t,h)}}function ay(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){oy(e,t,i)},function(i){return Uf(e,t,i)}):oy(e,t,n)}function oy(e,t,n){t.status="fulfilled",t.value=n,HE(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,qE(e,n)))}function Uf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,HE(t),t=t.next;while(t!==i)}e.action=null}function HE(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function GE(e,t){return t}function ly(e,t){if(ht){var n=Tt.formState;if(n!==null){t:{var i=et;if(ht){if(Pt){e:{for(var r=Pt,s=pn;r.nodeType!==8;){if(!s){r=null;break e}if(r=cn(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Pt=cn(r.nextSibling),i=r.data==="F!";break t}}br(i)}i=!1}i&&(t=n[0])}}return n=Ce(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:GE,lastRenderedState:t},n.queue=i,n=aT.bind(null,et,i),i.dispatch=n,i=Pf(!1),s=gm.bind(null,et,!1,i.queue),i=Ce(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=mw.bind(null,et,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function uy(e){var t=Ft();return FE(t,pt,e)}function FE(e,t,n){if(t=hm(e,t,GE)[0],e=Wl(Qn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=jo(t)}catch(a){throw a===zo?Tc:a}else i=t;t=Ft();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(et.flags|=2048,Ms(9,Sc(),gw.bind(null,r,n),null)),[i,s,e]}function gw(e,t){e.action=t}function cy(e){var t=Ft(),n=pt;if(n!==null)return FE(t,n,e);Ft(),t=t.memoizedState,n=Ft();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Ms(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=et.updateQueue,t===null&&(t=um(),et.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Sc(){return{destroy:void 0,resource:void 0}}function QE(){return Ft().memoizedState}function tu(e,t,n,i){var r=Ce();i=i===void 0?null:i,et.flags|=e,r.memoizedState=Ms(1|t,Sc(),n,i)}function Bo(e,t,n,i){var r=Ft();i=i===void 0?null:i;var s=r.memoizedState.inst;pt!==null&&i!==null&&rm(i,pt.memoizedState.deps)?r.memoizedState=Ms(t,s,n,i):(et.flags|=e,r.memoizedState=Ms(1|t,s,n,i))}function hy(e,t){tu(8390656,8,e,t)}function YE(e,t){Bo(2048,8,e,t)}function KE(e,t){return Bo(4,2,e,t)}function $E(e,t){return Bo(4,4,e,t)}function XE(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ZE(e,t,n){n=n!=null?n.concat([e]):null,Bo(4,4,XE.bind(null,t,e),n)}function fm(){}function JE(e,t){var n=Ft();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&rm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function WE(e,t){var n=Ft();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&rm(t,i[1]))return i[0];if(i=e(),Rr){bi(!0);try{e()}finally{bi(!1)}}return n.memoizedState=[i,t],i}function dm(e,t,n){return n===void 0||Fi&1073741824?e.memoizedState=t:(e.memoizedState=n,e=HT(),et.lanes|=e,Yi|=e,n)}function tT(e,t,n,i){return Ye(n,t)?n:Vs.current!==null?(e=dm(e,n,i),Ye(e,t)||(te=!0),e):Fi&42?(e=HT(),et.lanes|=e,Yi|=e,t):(te=!0,e.memoizedState=n)}function eT(e,t,n,i,r){var s=ft.p;ft.p=s!==0&&8>s?s:8;var a=$.T,l={};$.T=l,gm(e,!1,t,n);try{var u=r(),h=$.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=hw(u,i);Qa(e,t,d,He(e))}else Qa(e,t,i,He(e))}catch(g){Qa(e,t,{then:function(){},status:"rejected",reason:g},He())}finally{ft.p=s,$.T=a}}function pw(){}function Lf(e,t,n,i){if(e.tag!==5)throw Error(U(476));var r=nT(e).queue;eT(e,r,t,yr,n===null?pw:function(){return iT(e),n(i)})}function nT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:yr,baseState:yr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:yr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function iT(e){var t=nT(e).next.queue;Qa(e,t,{},He())}function mm(){return _e(po)}function rT(){return Ft().memoizedState}function sT(){return Ft().memoizedState}function yw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=He();e=Ni(n);var i=Oi(t,e,n);i!==null&&(Ge(i,t,n),Ha(i,t,n)),t={cache:tm()},e.payload=t;return}t=t.return}}function _w(e,t,n){var i=He();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},bc(e)?oT(t,n):(n=Xd(e,t,n,i),n!==null&&(Ge(n,e,i),lT(n,t,i)))}function aT(e,t,n){var i=He();Qa(e,t,n,i)}function Qa(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(bc(e))oT(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,Ye(l,a))return Ec(e,t,r,0),Tt===null&&vc(),!1}catch{}finally{}if(n=Xd(e,t,r,i),n!==null)return Ge(n,e,i),lT(n,t,i),!0}return!1}function gm(e,t,n,i){if(i={lane:2,revertLane:Sm(),action:i,hasEagerState:!1,eagerState:null,next:null},bc(e)){if(t)throw Error(U(479))}else t=Xd(e,n,i,2),t!==null&&Ge(t,e,2)}function bc(e){var t=e.alternate;return e===et||t!==null&&t===et}function oT(e,t){vs=Iu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Jv(e,n)}}var Du={readContext:_e,use:Ac,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useLayoutEffect:Lt,useInsertionEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useSyncExternalStore:Lt,useId:Lt,useHostTransitionStatus:Lt,useFormState:Lt,useActionState:Lt,useOptimistic:Lt,useMemoCache:Lt,useCacheRefresh:Lt},uT={readContext:_e,use:Ac,useCallback:function(e,t){return Ce().memoizedState=[e,t===void 0?null:t],e},useContext:_e,useEffect:hy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,tu(4194308,4,XE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return tu(4194308,4,e,t)},useInsertionEffect:function(e,t){tu(4,2,e,t)},useMemo:function(e,t){var n=Ce();t=t===void 0?null:t;var i=e();if(Rr){bi(!0);try{e()}finally{bi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Ce();if(n!==void 0){var r=n(t);if(Rr){bi(!0);try{n(t)}finally{bi(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=_w.bind(null,et,e),[i.memoizedState,e]},useRef:function(e){var t=Ce();return e={current:e},t.memoizedState=e},useState:function(e){e=Pf(e);var t=e.queue,n=aT.bind(null,et,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:fm,useDeferredValue:function(e,t){var n=Ce();return dm(n,e,t)},useTransition:function(){var e=Pf(!1);return e=eT.bind(null,et,e.queue,!0,!1),Ce().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=et,r=Ce();if(ht){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),Tt===null)throw Error(U(349));lt&124||PE(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,hy(LE.bind(null,i,s,e),[e]),i.flags|=2048,Ms(9,Sc(),UE.bind(null,i,s,n,t),null),n},useId:function(){var e=Ce(),t=Tt.identifierPrefix;if(ht){var n=Un,i=Pn;n=(i&~(1<<32-qe(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=Cu++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=fw++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:mm,useFormState:ly,useActionState:ly,useOptimistic:function(e){var t=Ce();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=gm.bind(null,et,!0,n),n.dispatch=t,[e,t]},useMemoCache:cm,useCacheRefresh:function(){return Ce().memoizedState=yw.bind(null,et)}},cT={readContext:_e,use:Ac,useCallback:JE,useContext:_e,useEffect:YE,useImperativeHandle:ZE,useInsertionEffect:KE,useLayoutEffect:$E,useMemo:WE,useReducer:Wl,useRef:QE,useState:function(){return Wl(Qn)},useDebugValue:fm,useDeferredValue:function(e,t){var n=Ft();return tT(n,pt.memoizedState,e,t)},useTransition:function(){var e=Wl(Qn)[0],t=Ft().memoizedState;return[typeof e=="boolean"?e:jo(e),t]},useSyncExternalStore:kE,useId:rT,useHostTransitionStatus:mm,useFormState:uy,useActionState:uy,useOptimistic:function(e,t){var n=Ft();return BE(n,pt,e,t)},useMemoCache:cm,useCacheRefresh:sT},vw={readContext:_e,use:Ac,useCallback:JE,useContext:_e,useEffect:YE,useImperativeHandle:ZE,useInsertionEffect:KE,useLayoutEffect:$E,useMemo:WE,useReducer:xh,useRef:QE,useState:function(){return xh(Qn)},useDebugValue:fm,useDeferredValue:function(e,t){var n=Ft();return pt===null?dm(n,e,t):tT(n,pt.memoizedState,e,t)},useTransition:function(){var e=xh(Qn)[0],t=Ft().memoizedState;return[typeof e=="boolean"?e:jo(e),t]},useSyncExternalStore:kE,useId:rT,useHostTransitionStatus:mm,useFormState:cy,useActionState:cy,useOptimistic:function(e,t){var n=Ft();return pt!==null?BE(n,pt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:cm,useCacheRefresh:sT},Ts=null,ho=0;function xl(e){var t=ho;return ho+=1,Ts===null&&(Ts=[]),NE(Ts,e,t)}function wa(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function kl(e,t){throw t.$$typeof===$1?Error(U(525)):(e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function fy(e){var t=e._init;return t(e._payload)}function hT(e){function t(b,E){if(e){var w=b.deletions;w===null?(b.deletions=[E],b.flags|=16):w.push(E)}}function n(b,E){if(!e)return null;for(;E!==null;)t(b,E),E=E.sibling;return null}function i(b){for(var E=new Map;b!==null;)b.key!==null?E.set(b.key,b):E.set(b.index,b),b=b.sibling;return E}function r(b,E){return b=qn(b,E),b.index=0,b.sibling=null,b}function s(b,E,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<E?(b.flags|=67108866,E):w):(b.flags|=67108866,E)):(b.flags|=1048576,E)}function a(b){return e&&b.alternate===null&&(b.flags|=67108866),b}function l(b,E,w,D){return E===null||E.tag!==6?(E=Oh(w,b.mode,D),E.return=b,E):(E=r(E,w),E.return=b,E)}function u(b,E,w,D){var L=w.type;return L===es?d(b,E,w.props.children,D,w.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===di&&fy(L)===E.type)?(E=r(E,w.props),wa(E,w),E.return=b,E):(E=Zl(w.type,w.key,w.props,null,b.mode,D),wa(E,w),E.return=b,E)}function h(b,E,w,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=Vh(w,b.mode,D),E.return=b,E):(E=r(E,w.children||[]),E.return=b,E)}function d(b,E,w,D,L){return E===null||E.tag!==7?(E=_r(w,b.mode,D,L),E.return=b,E):(E=r(E,w),E.return=b,E)}function g(b,E,w){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=Oh(""+E,b.mode,w),E.return=b,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Il:return w=Zl(E.type,E.key,E.props,null,b.mode,w),wa(w,E),w.return=b,w;case Da:return E=Vh(E,b.mode,w),E.return=b,E;case di:var D=E._init;return E=D(E._payload),g(b,E,w)}if(Na(E)||Ta(E))return E=_r(E,b.mode,w,null),E.return=b,E;if(typeof E.then=="function")return g(b,xl(E),w);if(E.$$typeof===kn)return g(b,Vl(b,E),w);kl(b,E)}return null}function m(b,E,w,D){var L=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return L!==null?null:l(b,E,""+w,D);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Il:return w.key===L?u(b,E,w,D):null;case Da:return w.key===L?h(b,E,w,D):null;case di:return L=w._init,w=L(w._payload),m(b,E,w,D)}if(Na(w)||Ta(w))return L!==null?null:d(b,E,w,D,null);if(typeof w.then=="function")return m(b,E,xl(w),D);if(w.$$typeof===kn)return m(b,E,Vl(b,w),D);kl(b,w)}return null}function _(b,E,w,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return b=b.get(w)||null,l(E,b,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Il:return b=b.get(D.key===null?w:D.key)||null,u(E,b,D,L);case Da:return b=b.get(D.key===null?w:D.key)||null,h(E,b,D,L);case di:var q=D._init;return D=q(D._payload),_(b,E,w,D,L)}if(Na(D)||Ta(D))return b=b.get(w)||null,d(E,b,D,L,null);if(typeof D.then=="function")return _(b,E,w,xl(D),L);if(D.$$typeof===kn)return _(b,E,w,Vl(E,D),L);kl(E,D)}return null}function N(b,E,w,D){for(var L=null,q=null,A=E,y=E=0,v=null;A!==null&&y<w.length;y++){A.index>y?(v=A,A=null):v=A.sibling;var T=m(b,A,w[y],D);if(T===null){A===null&&(A=v);break}e&&A&&T.alternate===null&&t(b,A),E=s(T,E,y),q===null?L=T:q.sibling=T,q=T,A=v}if(y===w.length)return n(b,A),ht&&dr(b,y),L;if(A===null){for(;y<w.length;y++)A=g(b,w[y],D),A!==null&&(E=s(A,E,y),q===null?L=A:q.sibling=A,q=A);return ht&&dr(b,y),L}for(A=i(A);y<w.length;y++)v=_(A,b,y,w[y],D),v!==null&&(e&&v.alternate!==null&&A.delete(v.key===null?y:v.key),E=s(v,E,y),q===null?L=v:q.sibling=v,q=v);return e&&A.forEach(function(R){return t(b,R)}),ht&&dr(b,y),L}function M(b,E,w,D){if(w==null)throw Error(U(151));for(var L=null,q=null,A=E,y=E=0,v=null,T=w.next();A!==null&&!T.done;y++,T=w.next()){A.index>y?(v=A,A=null):v=A.sibling;var R=m(b,A,T.value,D);if(R===null){A===null&&(A=v);break}e&&A&&R.alternate===null&&t(b,A),E=s(R,E,y),q===null?L=R:q.sibling=R,q=R,A=v}if(T.done)return n(b,A),ht&&dr(b,y),L;if(A===null){for(;!T.done;y++,T=w.next())T=g(b,T.value,D),T!==null&&(E=s(T,E,y),q===null?L=T:q.sibling=T,q=T);return ht&&dr(b,y),L}for(A=i(A);!T.done;y++,T=w.next())T=_(A,b,y,T.value,D),T!==null&&(e&&T.alternate!==null&&A.delete(T.key===null?y:T.key),E=s(T,E,y),q===null?L=T:q.sibling=T,q=T);return e&&A.forEach(function(I){return t(b,I)}),ht&&dr(b,y),L}function k(b,E,w,D){if(typeof w=="object"&&w!==null&&w.type===es&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Il:t:{for(var L=w.key;E!==null;){if(E.key===L){if(L=w.type,L===es){if(E.tag===7){n(b,E.sibling),D=r(E,w.props.children),D.return=b,b=D;break t}}else if(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===di&&fy(L)===E.type){n(b,E.sibling),D=r(E,w.props),wa(D,w),D.return=b,b=D;break t}n(b,E);break}else t(b,E);E=E.sibling}w.type===es?(D=_r(w.props.children,b.mode,D,w.key),D.return=b,b=D):(D=Zl(w.type,w.key,w.props,null,b.mode,D),wa(D,w),D.return=b,b=D)}return a(b);case Da:t:{for(L=w.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){n(b,E.sibling),D=r(E,w.children||[]),D.return=b,b=D;break t}else{n(b,E);break}else t(b,E);E=E.sibling}D=Vh(w,b.mode,D),D.return=b,b=D}return a(b);case di:return L=w._init,w=L(w._payload),k(b,E,w,D)}if(Na(w))return N(b,E,w,D);if(Ta(w)){if(L=Ta(w),typeof L!="function")throw Error(U(150));return w=L.call(w),M(b,E,w,D)}if(typeof w.then=="function")return k(b,E,xl(w),D);if(w.$$typeof===kn)return k(b,E,Vl(b,w),D);kl(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,E!==null&&E.tag===6?(n(b,E.sibling),D=r(E,w),D.return=b,b=D):(n(b,E),D=Oh(w,b.mode,D),D.return=b,b=D),a(b)):n(b,E)}return function(b,E,w,D){try{ho=0;var L=k(b,E,w,D);return Ts=null,L}catch(A){if(A===zo||A===Tc)throw A;var q=Le(29,A,null,b.mode);return q.lanes=D,q.return=b,q}finally{}}}var xs=hT(!0),fT=hT(!1),en=In(null),En=null;function pi(e){var t=e.alternate;Ct(Yt,Yt.current&1),Ct(en,e),En===null&&(t===null||Vs.current!==null||t.memoizedState!==null)&&(En=e)}function dT(e){if(e.tag===22){if(Ct(Yt,Yt.current),Ct(en,e),En===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(En=e)}}else yi()}function yi(){Ct(Yt,Yt.current),Ct(en,en.current)}function zn(e){ee(en),En===e&&(En=null),ee(Yt)}var Yt=In(0);function Nu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||ed(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function kh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:bt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=He(),r=Ni(i);r.payload=t,n!=null&&(r.callback=n),t=Oi(e,r,i),t!==null&&(Ge(t,e,i),Ha(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=He(),r=Ni(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Oi(e,r,i),t!==null&&(Ge(t,e,i),Ha(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=He(),i=Ni(n);i.tag=2,t!=null&&(i.callback=t),t=Oi(e,i,n),t!==null&&(Ge(t,e,n),Ha(t,e,n))}};function dy(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!lo(n,i)||!lo(r,s):!0}function my(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&zf.enqueueReplaceState(t,t.state,null)}function Ir(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=bt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var Ou=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function mT(e){Ou(e)}function gT(e){console.error(e)}function pT(e){Ou(e)}function Vu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function gy(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function jf(e,t,n){return n=Ni(n),n.tag=3,n.payload={element:null},n.callback=function(){Vu(e,t)},n}function yT(e){return e=Ni(e),e.tag=3,e}function _T(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){gy(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){gy(t,n,i),typeof r!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Ew(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Uo(t,n,r,!0),n=en.current,n!==null){switch(n.tag){case 13:return En===null?Kf():n.alternate===null&&Ut===0&&(Ut=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Vf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Qh(e,i,r)),!1;case 22:return n.flags|=65536,i===Vf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Qh(e,i,r)),!1}throw Error(U(435,n.tag))}return Qh(e,i,r),Kf(),!1}if(ht)return t=en.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==If&&(e=Error(U(422),{cause:i}),uo(We(e,n)))):(i!==If&&(t=Error(U(423),{cause:i}),uo(We(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=We(i,n),r=jf(e.stateNode,i,r),Mh(e,r),Ut!==4&&(Ut=2)),!1;var s=Error(U(520),{cause:i});if(s=We(s,n),$a===null?$a=[s]:$a.push(s),Ut!==4&&(Ut=2),t===null)return!0;i=We(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=jf(n.stateNode,i,e),Mh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Vi===null||!Vi.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=yT(r),_T(r,e,n,i),Mh(n,r),!1}n=n.return}while(n!==null);return!1}var vT=Error(U(461)),te=!1;function se(e,t,n,i){t.child=e===null?fT(t,null,n,i):xs(t,e.child,n,i)}function py(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return wr(t),i=sm(e,t,n,a,s,r),l=am(),e!==null&&!te?(om(e,t,r),Yn(e,t,r)):(ht&&l&&Jd(t),t.flags|=1,se(e,t,i,r),t.child)}function yy(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!Zd(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,ET(e,t,s,i,r)):(e=Zl(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!pm(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:lo,n(a,i)&&e.ref===t.ref)return Yn(e,t,r)}return t.flags|=1,e=qn(s,i),e.ref=t.ref,e.return=t,t.child=e}function ET(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(lo(s,i)&&e.ref===t.ref)if(te=!1,t.pendingProps=i=s,pm(e,r))e.flags&131072&&(te=!0);else return t.lanes=e.lanes,Yn(e,t,r)}return Bf(e,t,n,i,r)}function TT(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return _y(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Jl(t,s!==null?s.cachePool:null),s!==null?sy(t,s):kf(),dT(t);else return t.lanes=t.childLanes=536870912,_y(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(Jl(t,s.cachePool),sy(t,s),yi(),t.memoizedState=null):(e!==null&&Jl(t,null),kf(),yi());return se(e,t,r,n),t.child}function _y(e,t,n,i){var r=em();return r=r===null?null:{parent:Qt._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&Jl(t,null),kf(),dT(t),e!==null&&Uo(e,t,i,!0),null}function eu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Bf(e,t,n,i,r){return wr(t),n=sm(e,t,n,i,void 0,r),i=am(),e!==null&&!te?(om(e,t,r),Yn(e,t,r)):(ht&&i&&Jd(t),t.flags|=1,se(e,t,n,r),t.child)}function vy(e,t,n,i,r,s){return wr(t),t.updateQueue=null,n=xE(t,i,n,r),ME(e),i=am(),e!==null&&!te?(om(e,t,s),Yn(e,t,s)):(ht&&i&&Jd(t),t.flags|=1,se(e,t,n,s),t.child)}function Ey(e,t,n,i,r){if(wr(t),t.stateNode===null){var s=us,a=n.contextType;typeof a=="object"&&a!==null&&(s=_e(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=zf,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},nm(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?_e(a):us,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(kh(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&zf.enqueueReplaceState(s,s.state,null),Fa(t,i,s,r),Ga(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=Ir(n,l);s.props=u;var h=s.context,d=n.contextType;a=us,typeof d=="object"&&d!==null&&(a=_e(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&my(t,s,i,a),mi=!1;var m=t.memoizedState;s.state=m,Fa(t,i,s,r),Ga(),h=t.memoizedState,l||m!==h||mi?(typeof g=="function"&&(kh(t,n,g,i),h=t.memoizedState),(u=mi||dy(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Mf(e,t),a=t.memoizedProps,d=Ir(n,a),s.props=d,g=t.pendingProps,m=s.context,h=n.contextType,u=us,typeof h=="object"&&h!==null&&(u=_e(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==g||m!==u)&&my(t,s,i,u),mi=!1,m=t.memoizedState,s.state=m,Fa(t,i,s,r),Ga();var _=t.memoizedState;a!==g||m!==_||mi||e!==null&&e.dependencies!==null&&wu(e.dependencies)?(typeof l=="function"&&(kh(t,n,l,i),_=t.memoizedState),(d=mi||dy(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&wu(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),s.props=i,s.state=_,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,eu(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=xs(t,e.child,null,r),t.child=xs(t,null,n,r)):se(e,t,n,r),t.memoizedState=s.state,e=t.child):e=Yn(e,t,r),e}function Ty(e,t,n,i){return Po(),t.flags|=256,se(e,t,n,i),t.child}var Ph={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uh(e){return{baseLanes:e,cachePool:CE()}}function Lh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=tn),e}function AT(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(Yt.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(ht){if(r?pi(t):yi(),ht){var l=Pt,u;if(u=l){t:{for(u=l,l=pn;u.nodeType!==8;){if(!l){l=null;break t}if(u=cn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:vr!==null?{id:Pn,overflow:Un}:null,retryLane:536870912,hydrationErrors:null},u=Le(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Se=t,Pt=null,u=!0):u=!1}u||br(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return ed(l)?t.lanes=32:t.lanes=536870912,null;zn(t)}return l=i.children,i=i.fallback,r?(yi(),r=t.mode,l=Mu({mode:"hidden",children:l},r),i=_r(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=Uh(n),r.childLanes=Lh(e,a,n),t.memoizedState=Ph,i):(pi(t),qf(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(pi(t),t.flags&=-257,t=zh(e,t,n)):t.memoizedState!==null?(yi(),t.child=e.child,t.flags|=128,t=null):(yi(),r=i.fallback,l=t.mode,i=Mu({mode:"visible",children:i.children},l),r=_r(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,xs(t,e.child,null,n),i=t.child,i.memoizedState=Uh(n),i.childLanes=Lh(e,a,n),t.memoizedState=Ph,t=r);else if(pi(t),ed(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(U(419)),i.stack="",i.digest=a,uo({value:i,source:null,stack:null}),t=zh(e,t,n)}else if(te||Uo(e,t,n,!1),a=(n&e.childLanes)!==0,te||a){if(a=Tt,a!==null&&(i=n&-n,i=i&42?1:jd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,$s(e,i),Ge(a,e,i),vT;l.data==="$?"||Kf(),t=zh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Pt=cn(l.nextSibling),Se=t,ht=!0,Er=null,pn=!1,e!==null&&(Xe[Ze++]=Pn,Xe[Ze++]=Un,Xe[Ze++]=vr,Pn=e.id,Un=e.overflow,vr=t),t=qf(t,i.children),t.flags|=4096);return t}return r?(yi(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=qn(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=qn(h,r):(r=_r(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=Uh(n):(u=l.cachePool,u!==null?(h=Qt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=CE(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=Lh(e,a,n),t.memoizedState=Ph,i):(pi(t),n=e.child,e=n.sibling,n=qn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function qf(e,t){return t=Mu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Mu(e,t){return e=Le(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function zh(e,t,n){return xs(t,e.child,null,n),e=qf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ay(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Df(e.return,t,n)}function jh(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function ST(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(se(e,t,i.children,n),i=Yt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ay(e,n,t);else if(e.tag===19)Ay(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Ct(Yt,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Nu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),jh(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Nu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}jh(t,!0,n,null,s);break;case"together":jh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yi|=t.lanes,!(n&t.childLanes))if(e!==null){if(Uo(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=qn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=qn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function pm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&wu(e)))}function Tw(e,t,n){switch(t.tag){case 3:yu(t,t.stateNode.containerInfo),gi(t,Qt,e.memoizedState.cache),Po();break;case 27:case 5:yf(t);break;case 4:yu(t,t.stateNode.containerInfo);break;case 10:gi(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(pi(t),t.flags|=128,null):n&t.child.childLanes?AT(e,t,n):(pi(t),e=Yn(e,t,n),e!==null?e.sibling:null);pi(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Uo(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return ST(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ct(Yt,Yt.current),i)break;return null;case 22:case 23:return t.lanes=0,TT(e,t,n);case 24:gi(t,Qt,e.memoizedState.cache)}return Yn(e,t,n)}function bT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)te=!0;else{if(!pm(e,n)&&!(t.flags&128))return te=!1,Tw(e,t,n);te=!!(e.flags&131072)}else te=!1,ht&&t.flags&1048576&&RE(t,bu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")Zd(i)?(e=Ir(i,e),t.tag=1,t=Ey(null,t,i,e,n)):(t.tag=0,t=Bf(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===Ud){t.tag=11,t=py(null,t,i,e,n);break t}else if(r===Ld){t.tag=14,t=yy(null,t,i,e,n);break t}}throw t=gf(i)||i,Error(U(306,t,""))}}return t;case 0:return Bf(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Ir(i,t.pendingProps),Ey(e,t,i,r,n);case 3:t:{if(yu(t,t.stateNode.containerInfo),e===null)throw Error(U(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,Mf(e,t),Fa(t,i,null,n);var a=t.memoizedState;if(i=a.cache,gi(t,Qt,i),i!==s.cache&&Nf(t,[Qt],n,!0),Ga(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Ty(e,t,i,n);break t}else if(i!==r){r=We(Error(U(424)),t),uo(r),t=Ty(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Pt=cn(e.firstChild),Se=t,ht=!0,Er=null,pn=!0,n=fT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Po(),i===r){t=Yn(e,t,n);break t}se(e,t,i,n)}t=t.child}return t;case 26:return eu(e,t),e===null?(n=zy(t.type,null,t.pendingProps,null))?t.memoizedState=n:ht||(n=t.type,e=t.pendingProps,i=ju(Di.current).createElement(n),i[ye]=t,i[Ve]=e,ce(i,n,e),Jt(i),t.stateNode=i):t.memoizedState=zy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return yf(t),e===null&&ht&&(i=t.stateNode=c0(t.type,t.pendingProps,Di.current),Se=t,pn=!0,r=Pt,nr(t.type)?(nd=r,Pt=cn(i.firstChild)):Pt=r),se(e,t,t.pendingProps.children,n),eu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ht&&((r=i=Pt)&&(i=$w(i,t.type,t.pendingProps,pn),i!==null?(t.stateNode=i,Se=t,Pt=cn(i.firstChild),pn=!1,r=!0):r=!1),r||br(t)),yf(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,Wf(r,s)?i=null:a!==null&&Wf(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=sm(e,t,dw,null,null,n),po._currentValue=r),eu(e,t),se(e,t,i,n),t.child;case 6:return e===null&&ht&&((e=n=Pt)&&(n=Xw(n,t.pendingProps,pn),n!==null?(t.stateNode=n,Se=t,Pt=null,e=!0):e=!1),e||br(t)),null;case 13:return AT(e,t,n);case 4:return yu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=xs(t,null,i,n):se(e,t,i,n),t.child;case 11:return py(e,t,t.type,t.pendingProps,n);case 7:return se(e,t,t.pendingProps,n),t.child;case 8:return se(e,t,t.pendingProps.children,n),t.child;case 12:return se(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,gi(t,t.type,i.value),se(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,wr(t),r=_e(r),i=i(r),t.flags|=1,se(e,t,i,n),t.child;case 14:return yy(e,t,t.type,t.pendingProps,n);case 15:return ET(e,t,t.type,t.pendingProps,n);case 19:return ST(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Mu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=qn(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return TT(e,t,n);case 24:return wr(t),i=_e(Qt),e===null?(r=em(),r===null&&(r=Tt,s=tm(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},nm(t),gi(t,Qt,r)):(e.lanes&n&&(Mf(e,t),Fa(t,null,null,n),Ga()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),gi(t,Qt,i)):(i=s.cache,gi(t,Qt,i),i!==r.cache&&Nf(t,[Qt],n,!0))),se(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(U(156,t.tag))}function Vn(e){e.flags|=4}function Sy(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!d0(t)){if(t=en.current,t!==null&&((lt&4194048)===lt?En!==null:(lt&62914560)!==lt&&!(lt&536870912)||t!==En))throw qa=Vf,DE;e.flags|=8192}}function Pl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Xv():536870912,e.lanes|=t,ks|=t)}function Ra(e,t){if(!ht)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Aw(e,t,n){var i=t.pendingProps;switch(Wd(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(t),null;case 1:return Ot(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Hn(Qt),Cs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ba(t)?Vn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wp())),Ot(t),null;case 26:return n=t.memoizedState,e===null?(Vn(t),n!==null?(Ot(t),Sy(t,n)):(Ot(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Vn(t),Ot(t),Sy(t,n)):(Ot(t),t.flags&=-16777217):(e.memoizedProps!==i&&Vn(t),Ot(t),t.flags&=-16777217),null;case 27:_u(t),n=Di.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Vn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Ot(t),null}e=_n.current,ba(t)?Zp(t):(e=c0(r,i,n),t.stateNode=e,Vn(t))}return Ot(t),null;case 5:if(_u(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Vn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Ot(t),null}if(e=_n.current,ba(t))Zp(t);else{switch(r=ju(Di.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[ye]=t,e[Ve]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(ce(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Vn(t)}}return Ot(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Vn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(e=Di.current,ba(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Se,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[ye]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||o0(e.nodeValue,n)),e||br(t)}else e=ju(e).createTextNode(i),e[ye]=t,t.stateNode=e}return Ot(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=ba(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(U(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(U(317));r[ye]=t}else Po(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ot(t),r=!1}else r=Wp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(zn(t),t):(zn(t),null)}if(zn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Pl(t,t.updateQueue),Ot(t),null;case 4:return Cs(),e===null&&bm(t.stateNode.containerInfo),Ot(t),null;case 10:return Hn(t.type),Ot(t),null;case 19:if(ee(Yt),r=t.memoizedState,r===null)return Ot(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)Ra(r,!1);else{if(Ut!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Nu(e),s!==null){for(t.flags|=128,Ra(r,!1),e=s.updateQueue,t.updateQueue=e,Pl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)wE(n,e),n=n.sibling;return Ct(Yt,Yt.current&1|2),t.child}e=e.sibling}r.tail!==null&&vn()>ku&&(t.flags|=128,i=!0,Ra(r,!1),t.lanes=4194304)}else{if(!i)if(e=Nu(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Pl(t,e),Ra(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!ht)return Ot(t),null}else 2*vn()-r.renderingStartTime>ku&&n!==536870912&&(t.flags|=128,i=!0,Ra(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=vn(),t.sibling=null,e=Yt.current,Ct(Yt,i?e&1|2:e&1),t):(Ot(t),null);case 22:case 23:return zn(t),im(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Ot(t),t.subtreeFlags&6&&(t.flags|=8192)):Ot(t),n=t.updateQueue,n!==null&&Pl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&ee(Tr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Hn(Qt),Ot(t),null;case 25:return null;case 30:return null}throw Error(U(156,t.tag))}function Sw(e,t){switch(Wd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Hn(Qt),Cs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return _u(t),null;case 13:if(zn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Po()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ee(Yt),null;case 4:return Cs(),null;case 10:return Hn(t.type),null;case 22:case 23:return zn(t),im(),e!==null&&ee(Tr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Hn(Qt),null;case 25:return null;default:return null}}function wT(e,t){switch(Wd(t),t.tag){case 3:Hn(Qt),Cs();break;case 26:case 27:case 5:_u(t);break;case 4:Cs();break;case 13:zn(t);break;case 19:ee(Yt);break;case 10:Hn(t.type);break;case 22:case 23:zn(t),im(),e!==null&&ee(Tr);break;case 24:Hn(Qt)}}function qo(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Et(t,t.return,l)}}function Qi(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){Et(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){Et(t,t.return,d)}}function RT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{VE(t,n)}catch(i){Et(e,e.return,i)}}}function IT(e,t,n){n.props=Ir(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Et(e,t,i)}}function Ya(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){Et(e,t,r)}}function yn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Et(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Et(e,t,r)}else n.current=null}function CT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Et(e,e.return,r)}}function Bh(e,t,n){try{var i=e.stateNode;Gw(i,e.type,n,t),i[Ve]=t}catch(r){Et(e,e.return,r)}}function DT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&nr(e.type)||e.tag===4}function qh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||DT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&nr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cc));else if(i!==4&&(i===27&&nr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Hf(e,t,n),e=e.sibling;e!==null;)Hf(e,t,n),e=e.sibling}function xu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&nr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(xu(e,t,n),e=e.sibling;e!==null;)xu(e,t,n),e=e.sibling}function NT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ce(t,i,n),t[ye]=e,t[Ve]=n}catch(s){Et(e,e.return,s)}}var xn=!1,zt=!1,Hh=!1,by=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function bw(e,t){if(e=e.containerInfo,Zf=Gu,e=yE(e),Kd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var _;g!==n||r!==0&&g.nodeType!==3||(l=a+r),g!==s||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jf={focusedElem:e,selectionRange:n},Gu=!1,Zt=t;Zt!==null;)if(t=Zt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Zt=e;else for(;Zt!==null;){switch(t=Zt,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var N=Ir(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(N,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(M){Et(n,n.return,M)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)td(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":td(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(U(163))}if(e=t.sibling,e!==null){e.return=t.return,Zt=e;break}Zt=t.return}}function OT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ci(e,n),i&4&&qo(5,n);break;case 1:if(ci(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Et(n,n.return,a)}else{var r=Ir(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Et(n,n.return,a)}}i&64&&RT(n),i&512&&Ya(n,n.return);break;case 3:if(ci(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{VE(e,t)}catch(a){Et(n,n.return,a)}}break;case 27:t===null&&i&4&&NT(n);case 26:case 5:ci(e,n),t===null&&i&4&&CT(n),i&512&&Ya(n,n.return);break;case 12:ci(e,n);break;case 13:ci(e,n),i&4&&xT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Mw.bind(null,n),Zw(e,n))));break;case 22:if(i=n.memoizedState!==null||xn,!i){t=t!==null&&t.memoizedState!==null||zt,r=xn;var s=zt;xn=i,(zt=t)&&!s?fi(e,n,(n.subtreeFlags&8772)!==0):ci(e,n),xn=r,zt=s}break;case 30:break;default:ci(e,n)}}function VT(e){var t=e.alternate;t!==null&&(e.alternate=null,VT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&qd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Rt=null,De=!1;function Mn(e,t,n){for(n=n.child;n!==null;)MT(e,t,n),n=n.sibling}function MT(e,t,n){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(Oo,n)}catch{}switch(n.tag){case 26:zt||yn(n,t),Mn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:zt||yn(n,t);var i=Rt,r=De;nr(n.type)&&(Rt=n.stateNode,De=!1),Mn(e,t,n),Za(n.stateNode),Rt=i,De=r;break;case 5:zt||yn(n,t);case 6:if(i=Rt,r=De,Rt=null,Mn(e,t,n),Rt=i,De=r,Rt!==null)if(De)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(n.stateNode)}catch(s){Et(n,t,s)}else try{Rt.removeChild(n.stateNode)}catch(s){Et(n,t,s)}break;case 18:Rt!==null&&(De?(e=Rt,Py(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),vo(e)):Py(Rt,n.stateNode));break;case 4:i=Rt,r=De,Rt=n.stateNode.containerInfo,De=!0,Mn(e,t,n),Rt=i,De=r;break;case 0:case 11:case 14:case 15:zt||Qi(2,n,t),zt||Qi(4,n,t),Mn(e,t,n);break;case 1:zt||(yn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&IT(n,t,i)),Mn(e,t,n);break;case 21:Mn(e,t,n);break;case 22:zt=(i=zt)||n.memoizedState!==null,Mn(e,t,n),zt=i;break;default:Mn(e,t,n)}}function xT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{vo(e)}catch(n){Et(t,t.return,n)}}function ww(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new by),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new by),t;default:throw Error(U(435,e.tag))}}function Gh(e,t){var n=ww(e);t.forEach(function(i){var r=xw.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function ke(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(nr(l.type)){Rt=l.stateNode,De=!1;break t}break;case 5:Rt=l.stateNode,De=!1;break t;case 3:case 4:Rt=l.stateNode.containerInfo,De=!0;break t}l=l.return}if(Rt===null)throw Error(U(160));MT(s,a,r),Rt=null,De=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)kT(t,e),t=t.sibling}var on=null;function kT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ke(t,e),Pe(e),i&4&&(Qi(3,e,e.return),qo(3,e),Qi(5,e,e.return));break;case 1:ke(t,e),Pe(e),i&512&&(zt||n===null||yn(n,n.return)),i&64&&xn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=on;if(ke(t,e),Pe(e),i&512&&(zt||n===null||yn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[xo]||s[ye]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),ce(s,i,n),s[ye]=e,Jt(s),i=s;break t;case"link":var a=By("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),ce(s,i,n),r.head.appendChild(s);break;case"meta":if(a=By("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),ce(s,i,n),r.head.appendChild(s);break;default:throw Error(U(468,i))}s[ye]=e,Jt(s),i=s}e.stateNode=i}else qy(r,e.type,e.stateNode);else e.stateNode=jy(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?qy(r,e.type,e.stateNode):jy(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Bh(e,e.memoizedProps,n.memoizedProps)}break;case 27:ke(t,e),Pe(e),i&512&&(zt||n===null||yn(n,n.return)),n!==null&&i&4&&Bh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ke(t,e),Pe(e),i&512&&(zt||n===null||yn(n,n.return)),e.flags&32){r=e.stateNode;try{Ns(r,"")}catch(_){Et(e,e.return,_)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,Bh(e,r,n!==null?n.memoizedProps:r)),i&1024&&(Hh=!0);break;case 6:if(ke(t,e),Pe(e),i&4){if(e.stateNode===null)throw Error(U(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){Et(e,e.return,_)}}break;case 3:if(ru=null,r=on,on=Bu(t.containerInfo),ke(t,e),on=r,Pe(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{vo(t.containerInfo)}catch(_){Et(e,e.return,_)}Hh&&(Hh=!1,PT(e));break;case 4:i=on,on=Bu(e.stateNode.containerInfo),ke(t,e),Pe(e),on=i;break;case 12:ke(t,e),Pe(e);break;case 13:ke(t,e),Pe(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Tm=vn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Gh(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=xn,d=zt;if(xn=h||r,zt=d||u,ke(t,e),zt=d,xn=h,Pe(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||xn||zt||mr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){Et(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(_){Et(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Gh(e,n))));break;case 19:ke(t,e),Pe(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Gh(e,i)));break;case 30:break;case 21:break;default:ke(t,e),Pe(e)}}function Pe(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(DT(i)){n=i;break}i=i.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var r=n.stateNode,s=qh(e);xu(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Ns(a,""),n.flags&=-33);var l=qh(e);xu(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=qh(e);Hf(e,h,u);break;default:throw Error(U(161))}}catch(d){Et(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function PT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;PT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ci(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)OT(e,t.alternate,t),t=t.sibling}function mr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Qi(4,t,t.return),mr(t);break;case 1:yn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&IT(t,t.return,n),mr(t);break;case 27:Za(t.stateNode);case 26:case 5:yn(t,t.return),mr(t);break;case 22:t.memoizedState===null&&mr(t);break;case 30:mr(t);break;default:mr(t)}e=e.sibling}}function fi(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:fi(r,s,n),qo(4,s);break;case 1:if(fi(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){Et(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)OE(u[r],l)}catch(h){Et(i,i.return,h)}}n&&a&64&&RT(s),Ya(s,s.return);break;case 27:NT(s);case 26:case 5:fi(r,s,n),n&&i===null&&a&4&&CT(s),Ya(s,s.return);break;case 12:fi(r,s,n);break;case 13:fi(r,s,n),n&&a&4&&xT(r,s);break;case 22:s.memoizedState===null&&fi(r,s,n),Ya(s,s.return);break;case 30:break;default:fi(r,s,n)}t=t.sibling}}function ym(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Lo(n))}function _m(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Lo(e))}function dn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)UT(e,t,n,i),t=t.sibling}function UT(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:dn(e,t,n,i),r&2048&&qo(9,t);break;case 1:dn(e,t,n,i);break;case 3:dn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Lo(e)));break;case 12:if(r&2048){dn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){Et(t,t.return,u)}}else dn(e,t,n,i);break;case 13:dn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?dn(e,t,n,i):Ka(e,t):s._visibility&2?dn(e,t,n,i):(s._visibility|=2,$r(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&ym(a,t);break;case 24:dn(e,t,n,i),r&2048&&_m(t.alternate,t);break;default:dn(e,t,n,i)}}function $r(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:$r(s,a,l,u,r),qo(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?$r(s,a,l,u,r):Ka(s,a):(d._visibility|=2,$r(s,a,l,u,r)),r&&h&2048&&ym(a.alternate,a);break;case 24:$r(s,a,l,u,r),r&&h&2048&&_m(a.alternate,a);break;default:$r(s,a,l,u,r)}t=t.sibling}}function Ka(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Ka(n,i),r&2048&&ym(i.alternate,i);break;case 24:Ka(n,i),r&2048&&_m(i.alternate,i);break;default:Ka(n,i)}t=t.sibling}}var Va=8192;function Fr(e){if(e.subtreeFlags&Va)for(e=e.child;e!==null;)LT(e),e=e.sibling}function LT(e){switch(e.tag){case 26:Fr(e),e.flags&Va&&e.memoizedState!==null&&cR(on,e.memoizedState,e.memoizedProps);break;case 5:Fr(e);break;case 3:case 4:var t=on;on=Bu(e.stateNode.containerInfo),Fr(e),on=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Va,Va=16777216,Fr(e),Va=t):Fr(e));break;default:Fr(e)}}function zT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ia(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Zt=i,BT(i,e)}zT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jT(e),e=e.sibling}function jT(e){switch(e.tag){case 0:case 11:case 15:Ia(e),e.flags&2048&&Qi(9,e,e.return);break;case 3:Ia(e);break;case 12:Ia(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,nu(e)):Ia(e);break;default:Ia(e)}}function nu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Zt=i,BT(i,e)}zT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Qi(8,t,t.return),nu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,nu(t));break;default:nu(t)}e=e.sibling}}function BT(e,t){for(;Zt!==null;){var n=Zt;switch(n.tag){case 0:case 11:case 15:Qi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Lo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Zt=i;else t:for(n=e;Zt!==null;){i=Zt;var r=i.sibling,s=i.return;if(VT(i),i===n){Zt=null;break t}if(r!==null){r.return=s,Zt=r;break t}Zt=s}}}var Rw={getCacheForType:function(e){var t=_e(Qt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Iw=typeof WeakMap=="function"?WeakMap:Map,mt=0,Tt=null,it=null,lt=0,dt=0,Ue=null,Ri=!1,Xs=!1,vm=!1,Kn=0,Ut=0,Yi=0,Ar=0,Em=0,tn=0,ks=0,$a=null,Ne=null,Gf=!1,Tm=0,ku=1/0,Pu=null,Vi=null,oe=0,Mi=null,Ps=null,As=0,Ff=0,Qf=null,qT=null,Xa=0,Yf=null;function He(){if(mt&2&&lt!==0)return lt&-lt;if($.T!==null){var e=Os;return e!==0?e:Sm()}return Wv()}function HT(){tn===0&&(tn=!(lt&536870912)||ht?$v():536870912);var e=en.current;return e!==null&&(e.flags|=32),tn}function Ge(e,t,n){(e===Tt&&(dt===2||dt===9)||e.cancelPendingCommit!==null)&&(Us(e,0),Ii(e,lt,tn,!1)),Mo(e,n),(!(mt&2)||e!==Tt)&&(e===Tt&&(!(mt&2)&&(Ar|=n),Ut===4&&Ii(e,lt,tn,!1)),Cn(e))}function GT(e,t,n){if(mt&6)throw Error(U(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Vo(e,t),r=i?Nw(e,t):Fh(e,t,!0),s=i;do{if(r===0){Xs&&!i&&Ii(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Cw(n)){r=Fh(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=$a;var u=l.current.memoizedState.isDehydrated;if(u&&(Us(l,a).flags|=256),a=Fh(l,a,!1),a!==2){if(vm&&!u){l.errorRecoveryDisabledLanes|=s,Ar|=s,r=4;break t}s=Ne,Ne=r,s!==null&&(Ne===null?Ne=s:Ne.push.apply(Ne,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){Us(e,0),Ii(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(U(345));case 4:if((t&4194048)!==t)break;case 6:Ii(i,t,tn,!Ri);break t;case 2:Ne=null;break;case 3:case 5:break;default:throw Error(U(329))}if((t&62914560)===t&&(r=Tm+300-vn(),10<r)){if(Ii(i,t,tn,!Ri),gc(i,0,!0)!==0)break t;i.timeoutHandle=u0(wy.bind(null,i,n,Ne,Pu,Gf,t,tn,Ar,ks,Ri,s,2,-0,0),r);break t}wy(i,n,Ne,Pu,Gf,t,tn,Ar,ks,Ri,s,0,-0,0)}}break}while(!0);Cn(e)}function wy(e,t,n,i,r,s,a,l,u,h,d,g,m,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(go={stylesheets:null,count:0,unsuspend:uR},LT(t),g=hR(),g!==null)){e.cancelPendingCommit=g(Iy.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,_)),Ii(e,s,a,!h);return}Iy(e,t,s,n,i,r,a,l,u)}function Cw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Ye(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ii(e,t,n,i){t&=~Em,t&=~Ar,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-qe(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&Zv(e,n,t)}function wc(){return mt&6?!0:(Ho(0),!1)}function Am(){if(it!==null){if(dt===0)var e=it.return;else e=it,Ln=Pr=null,lm(e),Ts=null,ho=0,e=it;for(;e!==null;)wT(e.alternate,e),e=e.return;it=null}}function Us(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Qw(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Am(),Tt=e,it=n=qn(e.current,null),lt=t,dt=0,Ue=null,Ri=!1,Xs=Vo(e,t),vm=!1,ks=tn=Em=Ar=Yi=Ut=0,Ne=$a=null,Gf=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-qe(i),s=1<<r;t|=e[r],i&=~s}return Kn=t,vc(),n}function FT(e,t){et=null,$.H=Du,t===zo||t===Tc?(t=iy(),dt=3):t===DE?(t=iy(),dt=4):dt=t===vT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ue=t,it===null&&(Ut=1,Vu(e,We(t,e.current)))}function QT(){var e=$.H;return $.H=Du,e===null?Du:e}function YT(){var e=$.A;return $.A=Rw,e}function Kf(){Ut=4,Ri||(lt&4194048)!==lt&&en.current!==null||(Xs=!0),!(Yi&134217727)&&!(Ar&134217727)||Tt===null||Ii(Tt,lt,tn,!1)}function Fh(e,t,n){var i=mt;mt|=2;var r=QT(),s=YT();(Tt!==e||lt!==t)&&(Pu=null,Us(e,t)),t=!1;var a=Ut;t:do try{if(dt!==0&&it!==null){var l=it,u=Ue;switch(dt){case 8:Am(),a=6;break t;case 3:case 2:case 9:case 6:en.current===null&&(t=!0);var h=dt;if(dt=0,Ue=null,fs(e,l,u,h),n&&Xs){a=0;break t}break;default:h=dt,dt=0,Ue=null,fs(e,l,u,h)}}Dw(),a=Ut;break}catch(d){FT(e,d)}while(!0);return t&&e.shellSuspendCounter++,Ln=Pr=null,mt=i,$.H=r,$.A=s,it===null&&(Tt=null,lt=0,vc()),a}function Dw(){for(;it!==null;)KT(it)}function Nw(e,t){var n=mt;mt|=2;var i=QT(),r=YT();Tt!==e||lt!==t?(Pu=null,ku=vn()+500,Us(e,t)):Xs=Vo(e,t);t:do try{if(dt!==0&&it!==null){t=it;var s=Ue;e:switch(dt){case 1:dt=0,Ue=null,fs(e,t,s,1);break;case 2:case 9:if(ny(s)){dt=0,Ue=null,Ry(t);break}t=function(){dt!==2&&dt!==9||Tt!==e||(dt=7),Cn(e)},s.then(t,t);break t;case 3:dt=7;break t;case 4:dt=5;break t;case 7:ny(s)?(dt=0,Ue=null,Ry(t)):(dt=0,Ue=null,fs(e,t,s,7));break;case 5:var a=null;switch(it.tag){case 26:a=it.memoizedState;case 5:case 27:var l=it;if(!a||d0(a)){dt=0,Ue=null;var u=l.sibling;if(u!==null)it=u;else{var h=l.return;h!==null?(it=h,Rc(h)):it=null}break e}}dt=0,Ue=null,fs(e,t,s,5);break;case 6:dt=0,Ue=null,fs(e,t,s,6);break;case 8:Am(),Ut=6;break t;default:throw Error(U(462))}}Ow();break}catch(d){FT(e,d)}while(!0);return Ln=Pr=null,$.H=i,$.A=r,mt=n,it!==null?0:(Tt=null,lt=0,vc(),Ut)}function Ow(){for(;it!==null&&!W1();)KT(it)}function KT(e){var t=bT(e.alternate,e,Kn);e.memoizedProps=e.pendingProps,t===null?Rc(e):it=t}function Ry(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=vy(n,t,t.pendingProps,t.type,void 0,lt);break;case 11:t=vy(n,t,t.pendingProps,t.type.render,t.ref,lt);break;case 5:lm(t);default:wT(n,t),t=it=wE(t,Kn),t=bT(n,t,Kn)}e.memoizedProps=e.pendingProps,t===null?Rc(e):it=t}function fs(e,t,n,i){Ln=Pr=null,lm(t),Ts=null,ho=0;var r=t.return;try{if(Ew(e,r,t,n,lt)){Ut=1,Vu(e,We(n,e.current)),it=null;return}}catch(s){if(r!==null)throw it=r,s;Ut=1,Vu(e,We(n,e.current)),it=null;return}t.flags&32768?(ht||i===1?e=!0:Xs||lt&536870912?e=!1:(Ri=e=!0,(i===2||i===9||i===3||i===6)&&(i=en.current,i!==null&&i.tag===13&&(i.flags|=16384))),$T(t,e)):Rc(t)}function Rc(e){var t=e;do{if(t.flags&32768){$T(t,Ri);return}e=t.return;var n=Aw(t.alternate,t,Kn);if(n!==null){it=n;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);Ut===0&&(Ut=5)}function $T(e,t){do{var n=Sw(e.alternate,e);if(n!==null){n.flags&=32767,it=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){it=e;return}it=e=n}while(e!==null);Ut=6,it=null}function Iy(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do Ic();while(oe!==0);if(mt&6)throw Error(U(327));if(t!==null){if(t===e.current)throw Error(U(177));if(s=t.lanes|t.childLanes,s|=$d,ub(e,n,s,a,l,u),e===Tt&&(it=Tt=null,lt=0),Ps=t,Mi=e,As=n,Ff=s,Qf=r,qT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,kw(vu,function(){return t0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=$.T,$.T=null,r=ft.p,ft.p=2,a=mt,mt|=4;try{bw(e,t,n)}finally{mt=a,ft.p=r,$.T=i}}oe=1,XT(),ZT(),JT()}}function XT(){if(oe===1){oe=0;var e=Mi,t=Ps,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=$.T,$.T=null;var i=ft.p;ft.p=2;var r=mt;mt|=4;try{kT(t,e);var s=Jf,a=yE(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&pE(l.ownerDocument.documentElement,l)){if(u!==null&&Kd(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var _=m.getSelection(),N=l.textContent.length,M=Math.min(u.start,N),k=u.end===void 0?M:Math.min(u.end,N);!_.extend&&M>k&&(a=k,k=M,M=a);var b=Kp(l,M),E=Kp(l,k);if(b&&E&&(_.rangeCount!==1||_.anchorNode!==b.node||_.anchorOffset!==b.offset||_.focusNode!==E.node||_.focusOffset!==E.offset)){var w=g.createRange();w.setStart(b.node,b.offset),_.removeAllRanges(),M>k?(_.addRange(w),_.extend(E.node,E.offset)):(w.setEnd(E.node,E.offset),_.addRange(w))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Gu=!!Zf,Jf=Zf=null}finally{mt=r,ft.p=i,$.T=n}}e.current=t,oe=2}}function ZT(){if(oe===2){oe=0;var e=Mi,t=Ps,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=$.T,$.T=null;var i=ft.p;ft.p=2;var r=mt;mt|=4;try{OT(e,t.alternate,t)}finally{mt=r,ft.p=i,$.T=n}}oe=3}}function JT(){if(oe===4||oe===3){oe=0,tb();var e=Mi,t=Ps,n=As,i=qT;t.subtreeFlags&10256||t.flags&10256?oe=5:(oe=0,Ps=Mi=null,WT(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Vi=null),Bd(n),t=t.stateNode,Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(Oo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=$.T,r=ft.p,ft.p=2,$.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{$.T=t,ft.p=r}}As&3&&Ic(),Cn(e),r=e.pendingLanes,n&4194090&&r&42?e===Yf?Xa++:(Xa=0,Yf=e):Xa=0,Ho(0)}}function WT(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Lo(t)))}function Ic(e){return XT(),ZT(),JT(),t0()}function t0(){if(oe!==5)return!1;var e=Mi,t=Ff;Ff=0;var n=Bd(As),i=$.T,r=ft.p;try{ft.p=32>n?32:n,$.T=null,n=Qf,Qf=null;var s=Mi,a=As;if(oe=0,Ps=Mi=null,As=0,mt&6)throw Error(U(331));var l=mt;if(mt|=4,jT(s.current),UT(s,s.current,a,n),mt=l,Ho(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(Oo,s)}catch{}return!0}finally{ft.p=r,$.T=i,WT(e,t)}}function Cy(e,t,n){t=We(n,t),t=jf(e.stateNode,t,2),e=Oi(e,t,2),e!==null&&(Mo(e,2),Cn(e))}function Et(e,t,n){if(e.tag===3)Cy(e,e,n);else for(;t!==null;){if(t.tag===3){Cy(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Vi===null||!Vi.has(i))){e=We(n,e),n=yT(2),i=Oi(t,n,2),i!==null&&(_T(n,i,t,e),Mo(i,2),Cn(i));break}}t=t.return}}function Qh(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Iw;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(vm=!0,r.add(n),e=Vw.bind(null,e,t,n),t.then(e,e))}function Vw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Tt===e&&(lt&n)===n&&(Ut===4||Ut===3&&(lt&62914560)===lt&&300>vn()-Tm?!(mt&2)&&Us(e,0):Em|=n,ks===lt&&(ks=0)),Cn(e)}function e0(e,t){t===0&&(t=Xv()),e=$s(e,t),e!==null&&(Mo(e,t),Cn(e))}function Mw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),e0(e,n)}function xw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(t),e0(e,n)}function kw(e,t){return zd(e,t)}var Uu=null,Xr=null,$f=!1,Lu=!1,Yh=!1,Sr=0;function Cn(e){e!==Xr&&e.next===null&&(Xr===null?Uu=Xr=e:Xr=Xr.next=e),Lu=!0,$f||($f=!0,Uw())}function Ho(e,t){if(!Yh&&Lu){Yh=!0;do for(var n=!1,i=Uu;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-qe(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Dy(i,s))}else s=lt,s=gc(i,i===Tt?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Vo(i,s)||(n=!0,Dy(i,s));i=i.next}while(n);Yh=!1}}function Pw(){n0()}function n0(){Lu=$f=!1;var e=0;Sr!==0&&(Fw()&&(e=Sr),Sr=0);for(var t=vn(),n=null,i=Uu;i!==null;){var r=i.next,s=i0(i,t);s===0?(i.next=null,n===null?Uu=r:n.next=r,r===null&&(Xr=n)):(n=i,(e!==0||s&3)&&(Lu=!0)),i=r}Ho(e)}function i0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-qe(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=lb(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=Tt,n=lt,n=gc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(dt===2||dt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&vh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Vo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&vh(i),Bd(n)){case 2:case 8:n=Yv;break;case 32:n=vu;break;case 268435456:n=Kv;break;default:n=vu}return i=r0.bind(null,e),n=zd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&vh(i),e.callbackPriority=2,e.callbackNode=null,2}function r0(e,t){if(oe!==0&&oe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var i=lt;return i=gc(e,e===Tt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(GT(e,i,t),i0(e,vn()),e.callbackNode!=null&&e.callbackNode===n?r0.bind(null,e):null)}function Dy(e,t){if(Ic())return null;GT(e,t,!0)}function Uw(){Yw(function(){mt&6?zd(Qv,Pw):n0()})}function Sm(){return Sr===0&&(Sr=$v()),Sr}function Ny(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Kl(""+e)}function Oy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Lw(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=Ny((r[Ve]||null).action),a=i.submitter;a&&(t=(t=a[Ve]||null)?Ny(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new pc("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Sr!==0){var u=a?Oy(r,a):new FormData(r);Lf(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?Oy(r,a):new FormData(r),Lf(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var Kh=0;Kh<Rf.length;Kh++){var $h=Rf[Kh],zw=$h.toLowerCase(),jw=$h[0].toUpperCase()+$h.slice(1);fn(zw,"on"+jw)}fn(vE,"onAnimationEnd");fn(EE,"onAnimationIteration");fn(TE,"onAnimationStart");fn("dblclick","onDoubleClick");fn("focusin","onFocus");fn("focusout","onBlur");fn(iw,"onTransitionRun");fn(rw,"onTransitionStart");fn(sw,"onTransitionCancel");fn(AE,"onTransitionEnd");Ds("onMouseEnter",["mouseout","mouseover"]);Ds("onMouseLeave",["mouseout","mouseover"]);Ds("onPointerEnter",["pointerout","pointerover"]);Ds("onPointerLeave",["pointerout","pointerover"]);Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fo));function s0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Ou(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Ou(d)}r.currentTarget=null,s=u}}}}function nt(e,t){var n=t[vf];n===void 0&&(n=t[vf]=new Set);var i=e+"__bubble";n.has(i)||(a0(t,e,2,!1),n.add(i))}function Xh(e,t,n){var i=0;t&&(i|=4),a0(n,e,i,t)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function bm(e){if(!e[Ul]){e[Ul]=!0,tE.forEach(function(n){n!=="selectionchange"&&(Bw.has(n)||Xh(n,!1,e),Xh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ul]||(t[Ul]=!0,Xh("selectionchange",!1,t))}}function a0(e,t,n,i){switch(_0(t)){case 2:var r=mR;break;case 8:r=gR;break;default:r=Cm}n=r.bind(null,t,n,e),r=void 0,!Sf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Zh(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=is(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}lE(function(){var h=s,d=Gd(n),g=[];t:{var m=SE.get(e);if(m!==void 0){var _=pc,N=e;switch(e){case"keypress":if(Xl(n)===0)break t;case"keydown":case"keyup":_=kb;break;case"focusin":N="focus",_=Ih;break;case"focusout":N="blur",_=Ih;break;case"beforeblur":case"afterblur":_=Ih;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Lp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=Sb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Lb;break;case vE:case EE:case TE:_=Rb;break;case AE:_=jb;break;case"scroll":case"scrollend":_=Tb;break;case"wheel":_=qb;break;case"copy":case"cut":case"paste":_=Cb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=jp;break;case"toggle":case"beforetoggle":_=Gb}var M=(t&4)!==0,k=!M&&(e==="scroll"||e==="scrollend"),b=M?m!==null?m+"Capture":null:m;M=[];for(var E=h,w;E!==null;){var D=E;if(w=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||w===null||b===null||(D=ao(E,b),D!=null&&M.push(mo(E,D,w))),k)break;E=E.return}0<M.length&&(m=new _(m,N,null,n,d),g.push({event:m,listeners:M}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==Af&&(N=n.relatedTarget||n.fromElement)&&(is(N)||N[Ys]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(N=n.relatedTarget||n.toElement,_=h,N=N?is(N):null,N!==null&&(k=No(N),M=N.tag,N!==k||M!==5&&M!==27&&M!==6)&&(N=null)):(_=null,N=h),_!==N)){if(M=Lp,D="onMouseLeave",b="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(M=jp,D="onPointerLeave",b="onPointerEnter",E="pointer"),k=_==null?m:Oa(_),w=N==null?m:Oa(N),m=new M(D,E+"leave",_,n,d),m.target=k,m.relatedTarget=w,D=null,is(d)===h&&(M=new M(b,E+"enter",N,n,d),M.target=w,M.relatedTarget=k,D=M),k=D,_&&N)e:{for(M=_,b=N,E=0,w=M;w;w=Qr(w))E++;for(w=0,D=b;D;D=Qr(D))w++;for(;0<E-w;)M=Qr(M),E--;for(;0<w-E;)b=Qr(b),w--;for(;E--;){if(M===b||b!==null&&M===b.alternate)break e;M=Qr(M),b=Qr(b)}M=null}else M=null;_!==null&&Vy(g,m,_,M,!1),N!==null&&k!==null&&Vy(g,k,N,M,!0)}}t:{if(m=h?Oa(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=Gp;else if(Hp(m))if(mE)L=tw;else{L=Jb;var q=Zb}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&Hd(h.elementType)&&(L=Gp):L=Wb;if(L&&(L=L(e,h))){dE(g,L,n,d);break t}q&&q(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Tf(m,"number",m.value)}switch(q=h?Oa(h):window,e){case"focusin":(Hp(q)||q.contentEditable==="true")&&(as=q,bf=h,ja=null);break;case"focusout":ja=bf=as=null;break;case"mousedown":wf=!0;break;case"contextmenu":case"mouseup":case"dragend":wf=!1,$p(g,n,d);break;case"selectionchange":if(nw)break;case"keydown":case"keyup":$p(g,n,d)}var A;if(Yd)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else ss?hE(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(cE&&n.locale!=="ko"&&(ss||y!=="onCompositionStart"?y==="onCompositionEnd"&&ss&&(A=uE()):(wi=d,Fd="value"in wi?wi.value:wi.textContent,ss=!0)),q=zu(h,y),0<q.length&&(y=new zp(y,e,null,n,d),g.push({event:y,listeners:q}),A?y.data=A:(A=fE(n),A!==null&&(y.data=A)))),(A=Qb?Yb(e,n):Kb(e,n))&&(y=zu(h,"onBeforeInput"),0<y.length&&(q=new zp("onBeforeInput","beforeinput",null,n,d),g.push({event:q,listeners:y}),q.data=A)),Lw(g,e,h,n,d)}s0(g,t)})}function mo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zu(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=ao(e,n),r!=null&&i.unshift(mo(e,r,s)),r=ao(e,t),r!=null&&i.push(mo(e,r,s))),e.tag===3)return i;e=e.return}return[]}function Qr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Vy(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=ao(n,s),h!=null&&a.unshift(mo(n,h,u))):r||(h=ao(n,s),h!=null&&a.push(mo(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var qw=/\r\n?/g,Hw=/\u0000|\uFFFD/g;function My(e){return(typeof e=="string"?e:""+e).replace(qw,`
`).replace(Hw,"")}function o0(e,t){return t=My(t),My(e)===t}function Cc(){}function gt(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Ns(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Ns(e,""+i);break;case"className":Nl(e,"class",i);break;case"tabIndex":Nl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Nl(e,n,i);break;case"style":oE(e,i,s);break;case"data":if(t!=="object"){Nl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Kl(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&gt(e,t,"name",r.name,r,null),gt(e,t,"formEncType",r.formEncType,r,null),gt(e,t,"formMethod",r.formMethod,r,null),gt(e,t,"formTarget",r.formTarget,r,null)):(gt(e,t,"encType",r.encType,r,null),gt(e,t,"method",r.method,r,null),gt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Kl(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Cc);break;case"onScroll":i!=null&&nt("scroll",e);break;case"onScrollEnd":i!=null&&nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Kl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":nt("beforetoggle",e),nt("toggle",e),Yl(e,"popover",i);break;case"xlinkActuate":On(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":On(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":On(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":On(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":On(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":On(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":On(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":On(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":On(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Yl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=vb.get(n)||n,Yl(e,n,i))}}function Xf(e,t,n,i,r,s){switch(n){case"style":oE(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Ns(e,i):(typeof i=="number"||typeof i=="bigint")&&Ns(e,""+i);break;case"onScroll":i!=null&&nt("scroll",e);break;case"onScrollEnd":i!=null&&nt("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Cc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!eE.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Ve]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Yl(e,n,i)}}}function ce(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",e),nt("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:gt(e,t,s,a,n,null)}}r&&gt(e,t,"srcSet",n.srcSet,n,null),i&&gt(e,t,"src",n.src,n,null);return;case"input":nt("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,t));break;default:gt(e,t,i,d,n,null)}}rE(e,s,l,u,h,a,r,!1),Eu(e);return;case"select":nt("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:gt(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?ps(e,!!i,t,!1):n!=null&&ps(e,!!i,n,!0);return;case"textarea":nt("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:gt(e,t,a,l,n,null)}aE(e,i,r,s),Eu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:gt(e,t,u,i,n,null)}return;case"dialog":nt("beforetoggle",e),nt("toggle",e),nt("cancel",e),nt("close",e);break;case"iframe":case"object":nt("load",e);break;case"video":case"audio":for(i=0;i<fo.length;i++)nt(fo[i],e);break;case"image":nt("error",e),nt("load",e);break;case"details":nt("toggle",e);break;case"embed":case"source":case"link":nt("error",e),nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:gt(e,t,h,i,n,null)}return;default:if(Hd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&Xf(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&gt(e,t,l,i,n,null))}function Gw(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||gt(e,t,_,null,i,g)}}for(var m in i){var _=i[m];if(g=n[m],i.hasOwnProperty(m)&&(_!=null||g!=null))switch(m){case"type":s=_;break;case"name":r=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(U(137,t));break;default:_!==g&&gt(e,t,m,_,i,g)}}Ef(e,a,l,u,h,d,s,r);return;case"select":_=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(s)||gt(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&gt(e,t,r,s,i,u)}t=l,n=a,i=_,m!=null?ps(e,!!n,m,!1):!!i!=!!n&&(t!=null?ps(e,!!n,t,!0):ps(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:gt(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":_=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(U(91));break;default:r!==s&&gt(e,t,a,r,i,s)}sE(e,m,_);return;case"option":for(var N in n)if(m=n[N],n.hasOwnProperty(N)&&m!=null&&!i.hasOwnProperty(N))switch(N){case"selected":e.selected=!1;break;default:gt(e,t,N,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:gt(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var M in n)m=n[M],n.hasOwnProperty(M)&&m!=null&&!i.hasOwnProperty(M)&&gt(e,t,M,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,t));break;default:gt(e,t,h,m,i,_)}return;default:if(Hd(t)){for(var k in n)m=n[k],n.hasOwnProperty(k)&&m!==void 0&&!i.hasOwnProperty(k)&&Xf(e,t,k,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||Xf(e,t,d,m,i,_);return}}for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!=null&&!i.hasOwnProperty(b)&&gt(e,t,b,null,i,m);for(g in i)m=i[g],_=n[g],!i.hasOwnProperty(g)||m===_||m==null&&_==null||gt(e,t,g,m,i,_)}var Zf=null,Jf=null;function ju(e){return e.nodeType===9?e:e.ownerDocument}function xy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Wf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jh=null;function Fw(){var e=window.event;return e&&e.type==="popstate"?e===Jh?!1:(Jh=e,!0):(Jh=null,!1)}var u0=typeof setTimeout=="function"?setTimeout:void 0,Qw=typeof clearTimeout=="function"?clearTimeout:void 0,ky=typeof Promise=="function"?Promise:void 0,Yw=typeof queueMicrotask=="function"?queueMicrotask:typeof ky<"u"?function(e){return ky.resolve(null).then(e).catch(Kw)}:u0;function Kw(e){setTimeout(function(){throw e})}function nr(e){return e==="head"}function Py(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&Za(a.documentElement),n&2&&Za(a.body),n&4)for(n=a.head,Za(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[xo]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),vo(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);vo(t)}function td(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":td(n),qd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function $w(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[xo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=cn(e.nextSibling),e===null)break}return null}function Xw(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=cn(e.nextSibling),e===null))return null;return e}function ed(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Zw(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var nd=null;function Uy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function c0(e,t,n){switch(t=ju(n),e){case"html":if(e=t.documentElement,!e)throw Error(U(452));return e;case"head":if(e=t.head,!e)throw Error(U(453));return e;case"body":if(e=t.body,!e)throw Error(U(454));return e;default:throw Error(U(451))}}function Za(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);qd(e)}var nn=new Map,Ly=new Set;function Bu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ei=ft.d;ft.d={f:Jw,r:Ww,D:tR,C:eR,L:nR,m:iR,X:sR,S:rR,M:aR};function Jw(){var e=ei.f(),t=wc();return e||t}function Ww(e){var t=Ks(e);t!==null&&t.tag===5&&t.type==="form"?iT(t):ei.r(e)}var Zs=typeof document>"u"?null:document;function h0(e,t,n){var i=Zs;if(i&&typeof t=="string"&&t){var r=Je(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Ly.has(r)||(Ly.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),ce(t,"link",e),Jt(t),i.head.appendChild(t)))}}function tR(e){ei.D(e),h0("dns-prefetch",e,null)}function eR(e,t){ei.C(e,t),h0("preconnect",e,t)}function nR(e,t,n){ei.L(e,t,n);var i=Zs;if(i&&e&&t){var r='link[rel="preload"][as="'+Je(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Je(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Je(n.imageSizes)+'"]')):r+='[href="'+Je(e)+'"]';var s=r;switch(t){case"style":s=Ls(e);break;case"script":s=Js(e)}nn.has(s)||(e=bt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),nn.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Go(s))||t==="script"&&i.querySelector(Fo(s))||(t=i.createElement("link"),ce(t,"link",e),Jt(t),i.head.appendChild(t)))}}function iR(e,t){ei.m(e,t);var n=Zs;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Je(i)+'"][href="'+Je(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Js(e)}if(!nn.has(s)&&(e=bt({rel:"modulepreload",href:e},t),nn.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Fo(s)))return}i=n.createElement("link"),ce(i,"link",e),Jt(i),n.head.appendChild(i)}}}function rR(e,t,n){ei.S(e,t,n);var i=Zs;if(i&&e){var r=gs(i).hoistableStyles,s=Ls(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Go(s)))l.loading=5;else{e=bt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=nn.get(s))&&wm(e,n);var u=a=i.createElement("link");Jt(u),ce(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,iu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function sR(e,t){ei.X(e,t);var n=Zs;if(n&&e){var i=gs(n).hoistableScripts,r=Js(e),s=i.get(r);s||(s=n.querySelector(Fo(r)),s||(e=bt({src:e,async:!0},t),(t=nn.get(r))&&Rm(e,t),s=n.createElement("script"),Jt(s),ce(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function aR(e,t){ei.M(e,t);var n=Zs;if(n&&e){var i=gs(n).hoistableScripts,r=Js(e),s=i.get(r);s||(s=n.querySelector(Fo(r)),s||(e=bt({src:e,async:!0,type:"module"},t),(t=nn.get(r))&&Rm(e,t),s=n.createElement("script"),Jt(s),ce(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function zy(e,t,n,i){var r=(r=Di.current)?Bu(r):null;if(!r)throw Error(U(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ls(n.href),n=gs(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ls(n.href);var s=gs(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(Go(e)))&&!s._p&&(a.instance=s,a.state.loading=5),nn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},nn.set(e,n),s||oR(r,e,n,a.state))),t&&i===null)throw Error(U(528,""));return a}if(t&&i!==null)throw Error(U(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Js(n),n=gs(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,e))}}function Ls(e){return'href="'+Je(e)+'"'}function Go(e){return'link[rel="stylesheet"]['+e+"]"}function f0(e){return bt({},e,{"data-precedence":e.precedence,precedence:null})}function oR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),ce(t,"link",n),Jt(t),e.head.appendChild(t))}function Js(e){return'[src="'+Je(e)+'"]'}function Fo(e){return"script[async]"+e}function jy(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Je(n.href)+'"]');if(i)return t.instance=i,Jt(i),i;var r=bt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Jt(i),ce(i,"style",r),iu(i,n.precedence,e),t.instance=i;case"stylesheet":r=Ls(n.href);var s=e.querySelector(Go(r));if(s)return t.state.loading|=4,t.instance=s,Jt(s),s;i=f0(n),(r=nn.get(r))&&wm(i,r),s=(e.ownerDocument||e).createElement("link"),Jt(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ce(s,"link",i),t.state.loading|=4,iu(s,n.precedence,e),t.instance=s;case"script":return s=Js(n.src),(r=e.querySelector(Fo(s)))?(t.instance=r,Jt(r),r):(i=n,(r=nn.get(s))&&(i=bt({},n),Rm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),Jt(r),ce(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(U(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,iu(i,n.precedence,e));return t.instance}function iu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function wm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Rm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ru=null;function By(e,t,n){if(ru===null){var i=new Map,r=ru=new Map;r.set(n,i)}else r=ru,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[xo]||s[ye]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function qy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function lR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function d0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var go=null;function uR(){}function cR(e,t,n){if(go===null)throw Error(U(475));var i=go;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Ls(n.href),s=e.querySelector(Go(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=qu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,Jt(s);return}s=e.ownerDocument||e,n=f0(n),(r=nn.get(r))&&wm(n,r),s=s.createElement("link"),Jt(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ce(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=qu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function hR(){if(go===null)throw Error(U(475));var e=go;return e.stylesheets&&e.count===0&&id(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&id(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function qu(){if(this.count--,this.count===0){if(this.stylesheets)id(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Hu=null;function id(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Hu=new Map,t.forEach(fR,e),Hu=null,qu.call(e))}function fR(e,t){if(!(t.state.loading&4)){var n=Hu.get(e);if(n)var i=n.get(null);else{n=new Map,Hu.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=qu.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var po={$$typeof:kn,Provider:null,Consumer:null,_currentValue:yr,_currentValue2:yr,_threadCount:0};function dR(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Eh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eh(0),this.hiddenUpdates=Eh(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function m0(e,t,n,i,r,s,a,l,u,h,d,g){return e=new dR(e,t,n,a,l,u,h,g),t=1,s===!0&&(t|=24),s=Le(3,null,null,t),e.current=s,s.stateNode=e,t=tm(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},nm(s),e}function g0(e){return e?(e=us,e):us}function p0(e,t,n,i,r,s){r=g0(r),i.context===null?i.context=r:i.pendingContext=r,i=Ni(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Oi(e,i,t),n!==null&&(Ge(n,e,t),Ha(n,e,t))}function Hy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Im(e,t){Hy(e,t),(e=e.alternate)&&Hy(e,t)}function y0(e){if(e.tag===13){var t=$s(e,67108864);t!==null&&Ge(t,e,67108864),Im(e,67108864)}}var Gu=!0;function mR(e,t,n,i){var r=$.T;$.T=null;var s=ft.p;try{ft.p=2,Cm(e,t,n,i)}finally{ft.p=s,$.T=r}}function gR(e,t,n,i){var r=$.T;$.T=null;var s=ft.p;try{ft.p=8,Cm(e,t,n,i)}finally{ft.p=s,$.T=r}}function Cm(e,t,n,i){if(Gu){var r=rd(i);if(r===null)Zh(e,t,i,Fu,n),Gy(e,i);else if(yR(r,e,t,n,i))i.stopPropagation();else if(Gy(e,i),t&4&&-1<pR.indexOf(e)){for(;r!==null;){var s=Ks(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=fr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-qe(a);l.entanglements[1]|=u,a&=~u}Cn(s),!(mt&6)&&(ku=vn()+500,Ho(0))}}break;case 13:l=$s(s,2),l!==null&&Ge(l,s,2),wc(),Im(s,2)}if(s=rd(i),s===null&&Zh(e,t,i,Fu,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Zh(e,t,i,null,n)}}function rd(e){return e=Gd(e),Dm(e)}var Fu=null;function Dm(e){if(Fu=null,e=is(e),e!==null){var t=No(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=qv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Fu=e,null}function _0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(eb()){case Qv:return 2;case Yv:return 8;case vu:case nb:return 32;case Kv:return 268435456;default:return 32}default:return 32}}var sd=!1,xi=null,ki=null,Pi=null,yo=new Map,_o=new Map,_i=[],pR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gy(e,t){switch(e){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":yo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_o.delete(t.pointerId)}}function Ca(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Ks(t),t!==null&&y0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function yR(e,t,n,i,r){switch(t){case"focusin":return xi=Ca(xi,e,t,n,i,r),!0;case"dragenter":return ki=Ca(ki,e,t,n,i,r),!0;case"mouseover":return Pi=Ca(Pi,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return yo.set(s,Ca(yo.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,_o.set(s,Ca(_o.get(s)||null,e,t,n,i,r)),!0}return!1}function v0(e){var t=is(e.target);if(t!==null){var n=No(t);if(n!==null){if(t=n.tag,t===13){if(t=qv(n),t!==null){e.blockedOn=t,cb(e.priority,function(){if(n.tag===13){var i=He();i=jd(i);var r=$s(n,i);r!==null&&Ge(r,n,i),Im(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function su(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=rd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Af=i,n.target.dispatchEvent(i),Af=null}else return t=Ks(n),t!==null&&y0(t),e.blockedOn=n,!1;t.shift()}return!0}function Fy(e,t,n){su(e)&&n.delete(t)}function _R(){sd=!1,xi!==null&&su(xi)&&(xi=null),ki!==null&&su(ki)&&(ki=null),Pi!==null&&su(Pi)&&(Pi=null),yo.forEach(Fy),_o.forEach(Fy)}function Ll(e,t){e.blockedOn===t&&(e.blockedOn=null,sd||(sd=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,_R)))}var zl=null;function Qy(e){zl!==e&&(zl=e,$t.unstable_scheduleCallback($t.unstable_NormalPriority,function(){zl===e&&(zl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(Dm(i||n)===null)continue;break}var s=Ks(n);s!==null&&(e.splice(t,3),t-=3,Lf(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function vo(e){function t(u){return Ll(u,e)}xi!==null&&Ll(xi,e),ki!==null&&Ll(ki,e),Pi!==null&&Ll(Pi,e),yo.forEach(t),_o.forEach(t);for(var n=0;n<_i.length;n++){var i=_i[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<_i.length&&(n=_i[0],n.blockedOn===null);)v0(n),n.blockedOn===null&&_i.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Ve]||null;if(typeof s=="function")a||Qy(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Ve]||null)l=a.formAction;else if(Dm(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Qy(n)}}}function Nm(e){this._internalRoot=e}Dc.prototype.render=Nm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));var n=t.current,i=He();p0(n,i,e,t,null,null)};Dc.prototype.unmount=Nm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;p0(e.current,2,null,e,null,null),wc(),t[Ys]=null}};function Dc(e){this._internalRoot=e}Dc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<_i.length&&t!==0&&t<_i[n].priority;n++);_i.splice(n,0,e),n===0&&v0(e)}};var Yy=jv.version;if(Yy!=="19.1.1")throw Error(U(527,Yy,"19.1.1"));ft.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=K1(t),e=e!==null?Hv(e):null,e=e===null?null:e.stateNode,e};var vR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jl.isDisabled&&jl.supportsFiber)try{Oo=jl.inject(vR),Be=jl}catch{}}dc.createRoot=function(e,t){if(!Bv(e))throw Error(U(299));var n=!1,i="",r=mT,s=gT,a=pT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=m0(e,1,!1,null,null,n,i,r,s,a,l,null),e[Ys]=t.current,bm(e),new Nm(t)};dc.hydrateRoot=function(e,t,n){if(!Bv(e))throw Error(U(299));var i=!1,r="",s=mT,a=gT,l=pT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=m0(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=g0(null),n=t.current,i=He(),i=jd(i),r=Ni(i),r.callback=null,Oi(n,r,i),n=i,t.current.lanes=n,Mo(t,n),Cn(t),e[Ys]=t.current,bm(e),new Dc(t)};dc.version="19.1.1";function E0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E0)}catch(e){console.error(e)}}E0(),xv.exports=dc;var ER=xv.exports;const TR=()=>{};var Ky={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},AR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},A0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[g],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(T0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):AR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const g=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||g==null)throw new SR;const m=s<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const N=h<<6&192|g;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class SR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bR=function(e){const t=T0(e);return A0.encodeByteArray(t,!0)},Qu=function(e){return bR(e).replace(/\./g,"")},S0=function(e){try{return A0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=()=>wR().__FIREBASE_DEFAULTS__,IR=()=>{if(typeof process>"u"||typeof Ky>"u")return;const e=Ky.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},CR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&S0(e[1]);return t&&JSON.parse(t)},Nc=()=>{try{return TR()||RR()||IR()||CR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},b0=e=>{var t,n;return(n=(t=Nc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},DR=e=>{const t=b0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},w0=()=>{var e;return(e=Nc())==null?void 0:e.config},R0=e=>{var t;return(t=Nc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function I0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Qu(JSON.stringify(n)),Qu(JSON.stringify(a)),""].join(".")}const Ja={};function VR(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ja))Ja[t]?e.emulator.push(t):e.prod.push(t);return e}function MR(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let $y=!1;function C0(e,t){if(typeof window>"u"||typeof document>"u"||!Ws(window.location.host)||Ja[e]===t||Ja[e]||$y)return;Ja[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=VR().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{$y=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=MR(i),_=n("text"),N=document.getElementById(_)||document.createElement("span"),M=n("learnmore"),k=document.getElementById(M)||document.createElement("a"),b=n("preprendIcon"),E=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const w=m.element;l(w),d(k,M);const D=h();u(E,b),w.append(E,N,k,D),document.body.appendChild(w)}s?(N.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ve())}function kR(){var t;const e=(t=Nc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function LR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zR(){const e=ve();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function jR(){return!kR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BR(){try{return typeof indexedDB=="object"}catch{return!1}}function qR(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="FirebaseError";class ni extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=HR,Object.setPrototypeOf(this,ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qo.prototype.create)}}class Qo{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?GR(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new ni(r,l,i)}}function GR(e,t){return e.replace(FR,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const FR=/\{\$([^}]+)}/g;function QR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Cr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(Xy(s)&&Xy(a)){if(!Cr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Xy(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function YR(e,t){const n=new KR(e,t);return n.subscribe.bind(n)}class KR{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");$R(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=Wh),r.error===void 0&&(r.error=Wh),r.complete===void 0&&(r.complete=Wh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $R(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Wh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(e){return e&&e._delegate?e._delegate:e}class Dr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new NR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(JR(t))try{this.getOrInitializeService({instanceIdentifier:gr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=gr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=gr){return this.instances.has(t)}getOptions(t=gr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ZR(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=gr){return this.component?this.component.multipleInstances?t:gr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZR(e){return e===gr?void 0:e}function JR(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new XR(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(rt||(rt={}));const tI={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},eI=rt.INFO,nI={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},iI=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=nI[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Om{constructor(t){this.name=t,this._logLevel=eI,this._logHandler=iI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in rt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?tI[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...t),this._logHandler(this,rt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...t),this._logHandler(this,rt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...t),this._logHandler(this,rt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...t),this._logHandler(this,rt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...t),this._logHandler(this,rt.ERROR,...t)}}const rI=(e,t)=>t.some(n=>e instanceof n);let Zy,Jy;function sI(){return Zy||(Zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aI(){return Jy||(Jy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D0=new WeakMap,ad=new WeakMap,N0=new WeakMap,tf=new WeakMap,Vm=new WeakMap;function oI(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(Ui(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&D0.set(n,e)}).catch(()=>{}),Vm.set(t,e),t}function lI(e){if(ad.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});ad.set(e,t)}let od={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ad.get(e);if(t==="objectStoreNames")return e.objectStoreNames||N0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ui(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function uI(e){od=e(od)}function cI(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(ef(this),t,...n);return N0.set(i,t.sort?t.sort():[t]),Ui(i)}:aI().includes(e)?function(...t){return e.apply(ef(this),t),Ui(D0.get(this))}:function(...t){return Ui(e.apply(ef(this),t))}}function hI(e){return typeof e=="function"?cI(e):(e instanceof IDBTransaction&&lI(e),rI(e,sI())?new Proxy(e,od):e)}function Ui(e){if(e instanceof IDBRequest)return oI(e);if(tf.has(e))return tf.get(e);const t=hI(e);return t!==e&&(tf.set(e,t),Vm.set(t,e)),t}const ef=e=>Vm.get(e);function fI(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=Ui(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Ui(a.result),u.oldVersion,u.newVersion,Ui(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const dI=["get","getKey","getAll","getAllKeys","count"],mI=["put","add","delete","clear"],nf=new Map;function Wy(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(nf.get(t))return nf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=mI.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||dI.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return nf.set(t,s),s}uI(e=>({...e,get:(t,n,i)=>Wy(t,n)||e.get(t,n,i),has:(t,n)=>!!Wy(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pI(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function pI(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ld="@firebase/app",t_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=new Om("@firebase/app"),yI="@firebase/app-compat",_I="@firebase/analytics-compat",vI="@firebase/analytics",EI="@firebase/app-check-compat",TI="@firebase/app-check",AI="@firebase/auth",SI="@firebase/auth-compat",bI="@firebase/database",wI="@firebase/data-connect",RI="@firebase/database-compat",II="@firebase/functions",CI="@firebase/functions-compat",DI="@firebase/installations",NI="@firebase/installations-compat",OI="@firebase/messaging",VI="@firebase/messaging-compat",MI="@firebase/performance",xI="@firebase/performance-compat",kI="@firebase/remote-config",PI="@firebase/remote-config-compat",UI="@firebase/storage",LI="@firebase/storage-compat",zI="@firebase/firestore",jI="@firebase/ai",BI="@firebase/firestore-compat",qI="firebase",HI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud="[DEFAULT]",GI={[ld]:"fire-core",[yI]:"fire-core-compat",[vI]:"fire-analytics",[_I]:"fire-analytics-compat",[TI]:"fire-app-check",[EI]:"fire-app-check-compat",[AI]:"fire-auth",[SI]:"fire-auth-compat",[bI]:"fire-rtdb",[wI]:"fire-data-connect",[RI]:"fire-rtdb-compat",[II]:"fire-fn",[CI]:"fire-fn-compat",[DI]:"fire-iid",[NI]:"fire-iid-compat",[OI]:"fire-fcm",[VI]:"fire-fcm-compat",[MI]:"fire-perf",[xI]:"fire-perf-compat",[kI]:"fire-rc",[PI]:"fire-rc-compat",[UI]:"fire-gcs",[LI]:"fire-gcs-compat",[zI]:"fire-fst",[BI]:"fire-fst-compat",[jI]:"fire-vertex","fire-js":"fire-js",[qI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new Map,FI=new Map,cd=new Map;function e_(e,t){try{e.container.addComponent(t)}catch(n){$n.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function zs(e){const t=e.name;if(cd.has(t))return $n.debug(`There were multiple attempts to register component ${t}.`),!1;cd.set(t,e);for(const n of Yu.values())e_(n,e);for(const n of FI.values())e_(n,e);return!0}function Mm(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ln(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Li=new Qo("app","Firebase",QI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=HI;function O0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:ud,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Li.create("bad-app-name",{appName:String(r)});if(n||(n=w0()),!n)throw Li.create("no-options");const s=Yu.get(r);if(s){if(Cr(n,s.options)&&Cr(i,s.config))return s;throw Li.create("duplicate-app",{appName:r})}const a=new WR(r);for(const u of cd.values())a.addComponent(u);const l=new YI(n,i,a);return Yu.set(r,l),l}function V0(e=ud){const t=Yu.get(e);if(!t&&e===ud&&w0())return O0();if(!t)throw Li.create("no-app",{appName:e});return t}function zi(e,t,n){let i=GI[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),$n.warn(a.join(" "));return}zs(new Dr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="firebase-heartbeat-database",$I=1,Eo="firebase-heartbeat-store";let rf=null;function M0(){return rf||(rf=fI(KI,$I,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Eo)}catch(n){console.warn(n)}}}}).catch(e=>{throw Li.create("idb-open",{originalErrorMessage:e.message})})),rf}async function XI(e){try{const n=(await M0()).transaction(Eo),i=await n.objectStore(Eo).get(x0(e));return await n.done,i}catch(t){if(t instanceof ni)$n.warn(t.message);else{const n=Li.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});$n.warn(n.message)}}}async function n_(e,t){try{const i=(await M0()).transaction(Eo,"readwrite");await i.objectStore(Eo).put(t,x0(e)),await i.done}catch(n){if(n instanceof ni)$n.warn(n.message);else{const i=Li.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$n.warn(i.message)}}}function x0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=1024,JI=30;class WI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new e2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=i_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>JI){const a=n2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){$n.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=i_(),{heartbeatsToSend:i,unsentEntries:r}=t2(this._heartbeatsCache.heartbeats),s=Qu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return $n.warn(n),""}}}function i_(){return new Date().toISOString().substring(0,10)}function t2(e,t=ZI){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),r_(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),r_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class e2{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BR()?qR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return n_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return n_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function r_(e){return Qu(JSON.stringify({version:2,heartbeats:e})).length}function n2(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(e){zs(new Dr("platform-logger",t=>new gI(t),"PRIVATE")),zs(new Dr("heartbeat",t=>new WI(t),"PRIVATE")),zi(ld,t_,e),zi(ld,t_,"esm2020"),zi("fire-js","")}i2("");var r2="firebase",s2="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zi(r2,s2,"app");var s_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ji,k0;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(A,y){function v(){}v.prototype=y.prototype,A.D=y.prototype,A.prototype=new v,A.prototype.constructor=A,A.C=function(T,R,I){for(var S=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)S[wt-2]=arguments[wt];return y.prototype[R].apply(T,S)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,y,v){v||(v=0);var T=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)T[R]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(R=0;16>R;++R)T[R]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=A.g[0],v=A.g[1],R=A.g[2];var I=A.g[3],S=y+(I^v&(R^I))+T[0]+3614090360&4294967295;y=v+(S<<7&4294967295|S>>>25),S=I+(R^y&(v^R))+T[1]+3905402710&4294967295,I=y+(S<<12&4294967295|S>>>20),S=R+(v^I&(y^v))+T[2]+606105819&4294967295,R=I+(S<<17&4294967295|S>>>15),S=v+(y^R&(I^y))+T[3]+3250441966&4294967295,v=R+(S<<22&4294967295|S>>>10),S=y+(I^v&(R^I))+T[4]+4118548399&4294967295,y=v+(S<<7&4294967295|S>>>25),S=I+(R^y&(v^R))+T[5]+1200080426&4294967295,I=y+(S<<12&4294967295|S>>>20),S=R+(v^I&(y^v))+T[6]+2821735955&4294967295,R=I+(S<<17&4294967295|S>>>15),S=v+(y^R&(I^y))+T[7]+4249261313&4294967295,v=R+(S<<22&4294967295|S>>>10),S=y+(I^v&(R^I))+T[8]+1770035416&4294967295,y=v+(S<<7&4294967295|S>>>25),S=I+(R^y&(v^R))+T[9]+2336552879&4294967295,I=y+(S<<12&4294967295|S>>>20),S=R+(v^I&(y^v))+T[10]+4294925233&4294967295,R=I+(S<<17&4294967295|S>>>15),S=v+(y^R&(I^y))+T[11]+2304563134&4294967295,v=R+(S<<22&4294967295|S>>>10),S=y+(I^v&(R^I))+T[12]+1804603682&4294967295,y=v+(S<<7&4294967295|S>>>25),S=I+(R^y&(v^R))+T[13]+4254626195&4294967295,I=y+(S<<12&4294967295|S>>>20),S=R+(v^I&(y^v))+T[14]+2792965006&4294967295,R=I+(S<<17&4294967295|S>>>15),S=v+(y^R&(I^y))+T[15]+1236535329&4294967295,v=R+(S<<22&4294967295|S>>>10),S=y+(R^I&(v^R))+T[1]+4129170786&4294967295,y=v+(S<<5&4294967295|S>>>27),S=I+(v^R&(y^v))+T[6]+3225465664&4294967295,I=y+(S<<9&4294967295|S>>>23),S=R+(y^v&(I^y))+T[11]+643717713&4294967295,R=I+(S<<14&4294967295|S>>>18),S=v+(I^y&(R^I))+T[0]+3921069994&4294967295,v=R+(S<<20&4294967295|S>>>12),S=y+(R^I&(v^R))+T[5]+3593408605&4294967295,y=v+(S<<5&4294967295|S>>>27),S=I+(v^R&(y^v))+T[10]+38016083&4294967295,I=y+(S<<9&4294967295|S>>>23),S=R+(y^v&(I^y))+T[15]+3634488961&4294967295,R=I+(S<<14&4294967295|S>>>18),S=v+(I^y&(R^I))+T[4]+3889429448&4294967295,v=R+(S<<20&4294967295|S>>>12),S=y+(R^I&(v^R))+T[9]+568446438&4294967295,y=v+(S<<5&4294967295|S>>>27),S=I+(v^R&(y^v))+T[14]+3275163606&4294967295,I=y+(S<<9&4294967295|S>>>23),S=R+(y^v&(I^y))+T[3]+4107603335&4294967295,R=I+(S<<14&4294967295|S>>>18),S=v+(I^y&(R^I))+T[8]+1163531501&4294967295,v=R+(S<<20&4294967295|S>>>12),S=y+(R^I&(v^R))+T[13]+2850285829&4294967295,y=v+(S<<5&4294967295|S>>>27),S=I+(v^R&(y^v))+T[2]+4243563512&4294967295,I=y+(S<<9&4294967295|S>>>23),S=R+(y^v&(I^y))+T[7]+1735328473&4294967295,R=I+(S<<14&4294967295|S>>>18),S=v+(I^y&(R^I))+T[12]+2368359562&4294967295,v=R+(S<<20&4294967295|S>>>12),S=y+(v^R^I)+T[5]+4294588738&4294967295,y=v+(S<<4&4294967295|S>>>28),S=I+(y^v^R)+T[8]+2272392833&4294967295,I=y+(S<<11&4294967295|S>>>21),S=R+(I^y^v)+T[11]+1839030562&4294967295,R=I+(S<<16&4294967295|S>>>16),S=v+(R^I^y)+T[14]+4259657740&4294967295,v=R+(S<<23&4294967295|S>>>9),S=y+(v^R^I)+T[1]+2763975236&4294967295,y=v+(S<<4&4294967295|S>>>28),S=I+(y^v^R)+T[4]+1272893353&4294967295,I=y+(S<<11&4294967295|S>>>21),S=R+(I^y^v)+T[7]+4139469664&4294967295,R=I+(S<<16&4294967295|S>>>16),S=v+(R^I^y)+T[10]+3200236656&4294967295,v=R+(S<<23&4294967295|S>>>9),S=y+(v^R^I)+T[13]+681279174&4294967295,y=v+(S<<4&4294967295|S>>>28),S=I+(y^v^R)+T[0]+3936430074&4294967295,I=y+(S<<11&4294967295|S>>>21),S=R+(I^y^v)+T[3]+3572445317&4294967295,R=I+(S<<16&4294967295|S>>>16),S=v+(R^I^y)+T[6]+76029189&4294967295,v=R+(S<<23&4294967295|S>>>9),S=y+(v^R^I)+T[9]+3654602809&4294967295,y=v+(S<<4&4294967295|S>>>28),S=I+(y^v^R)+T[12]+3873151461&4294967295,I=y+(S<<11&4294967295|S>>>21),S=R+(I^y^v)+T[15]+530742520&4294967295,R=I+(S<<16&4294967295|S>>>16),S=v+(R^I^y)+T[2]+3299628645&4294967295,v=R+(S<<23&4294967295|S>>>9),S=y+(R^(v|~I))+T[0]+4096336452&4294967295,y=v+(S<<6&4294967295|S>>>26),S=I+(v^(y|~R))+T[7]+1126891415&4294967295,I=y+(S<<10&4294967295|S>>>22),S=R+(y^(I|~v))+T[14]+2878612391&4294967295,R=I+(S<<15&4294967295|S>>>17),S=v+(I^(R|~y))+T[5]+4237533241&4294967295,v=R+(S<<21&4294967295|S>>>11),S=y+(R^(v|~I))+T[12]+1700485571&4294967295,y=v+(S<<6&4294967295|S>>>26),S=I+(v^(y|~R))+T[3]+2399980690&4294967295,I=y+(S<<10&4294967295|S>>>22),S=R+(y^(I|~v))+T[10]+4293915773&4294967295,R=I+(S<<15&4294967295|S>>>17),S=v+(I^(R|~y))+T[1]+2240044497&4294967295,v=R+(S<<21&4294967295|S>>>11),S=y+(R^(v|~I))+T[8]+1873313359&4294967295,y=v+(S<<6&4294967295|S>>>26),S=I+(v^(y|~R))+T[15]+4264355552&4294967295,I=y+(S<<10&4294967295|S>>>22),S=R+(y^(I|~v))+T[6]+2734768916&4294967295,R=I+(S<<15&4294967295|S>>>17),S=v+(I^(R|~y))+T[13]+1309151649&4294967295,v=R+(S<<21&4294967295|S>>>11),S=y+(R^(v|~I))+T[4]+4149444226&4294967295,y=v+(S<<6&4294967295|S>>>26),S=I+(v^(y|~R))+T[11]+3174756917&4294967295,I=y+(S<<10&4294967295|S>>>22),S=R+(y^(I|~v))+T[2]+718787259&4294967295,R=I+(S<<15&4294967295|S>>>17),S=v+(I^(R|~y))+T[9]+3951481745&4294967295,A.g[0]=A.g[0]+y&4294967295,A.g[1]=A.g[1]+(R+(S<<21&4294967295|S>>>11))&4294967295,A.g[2]=A.g[2]+R&4294967295,A.g[3]=A.g[3]+I&4294967295}i.prototype.u=function(A,y){y===void 0&&(y=A.length);for(var v=y-this.blockSize,T=this.B,R=this.h,I=0;I<y;){if(R==0)for(;I<=v;)r(this,A,I),I+=this.blockSize;if(typeof A=="string"){for(;I<y;)if(T[R++]=A.charCodeAt(I++),R==this.blockSize){r(this,T),R=0;break}}else for(;I<y;)if(T[R++]=A[I++],R==this.blockSize){r(this,T),R=0;break}}this.h=R,this.o+=y},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var y=1;y<A.length-8;++y)A[y]=0;var v=8*this.o;for(y=A.length-8;y<A.length;++y)A[y]=v&255,v/=256;for(this.u(A),A=Array(16),y=v=0;4>y;++y)for(var T=0;32>T;T+=8)A[v++]=this.g[y]>>>T&255;return A};function s(A,y){var v=l;return Object.prototype.hasOwnProperty.call(v,A)?v[A]:v[A]=y(A)}function a(A,y){this.h=y;for(var v=[],T=!0,R=A.length-1;0<=R;R--){var I=A[R]|0;T&&I==y||(v[R]=I,T=!1)}this.g=v}var l={};function u(A){return-128<=A&&128>A?s(A,function(y){return new a([y|0],0>y?-1:0)}):new a([A|0],0>A?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return g;if(0>A)return k(h(-A));for(var y=[],v=1,T=0;A>=v;T++)y[T]=A/v|0,v*=4294967296;return new a(y,0)}function d(A,y){if(A.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(A.charAt(0)=="-")return k(d(A.substring(1),y));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(y,8)),T=g,R=0;R<A.length;R+=8){var I=Math.min(8,A.length-R),S=parseInt(A.substring(R,R+I),y);8>I?(I=h(Math.pow(y,I)),T=T.j(I).add(h(S))):(T=T.j(v),T=T.add(h(S)))}return T}var g=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(M(this))return-k(this).m();for(var A=0,y=1,v=0;v<this.g.length;v++){var T=this.i(v);A+=(0<=T?T:4294967296+T)*y,y*=4294967296}return A},e.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N(this))return"0";if(M(this))return"-"+k(this).toString(A);for(var y=h(Math.pow(A,6)),v=this,T="";;){var R=D(v,y).g;v=b(v,R.j(y));var I=((0<v.g.length?v.g[0]:v.h)>>>0).toString(A);if(v=R,N(v))return I+T;for(;6>I.length;)I="0"+I;T=I+T}},e.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function N(A){if(A.h!=0)return!1;for(var y=0;y<A.g.length;y++)if(A.g[y]!=0)return!1;return!0}function M(A){return A.h==-1}e.l=function(A){return A=b(this,A),M(A)?-1:N(A)?0:1};function k(A){for(var y=A.g.length,v=[],T=0;T<y;T++)v[T]=~A.g[T];return new a(v,~A.h).add(m)}e.abs=function(){return M(this)?k(this):this},e.add=function(A){for(var y=Math.max(this.g.length,A.g.length),v=[],T=0,R=0;R<=y;R++){var I=T+(this.i(R)&65535)+(A.i(R)&65535),S=(I>>>16)+(this.i(R)>>>16)+(A.i(R)>>>16);T=S>>>16,I&=65535,S&=65535,v[R]=S<<16|I}return new a(v,v[v.length-1]&-2147483648?-1:0)};function b(A,y){return A.add(k(y))}e.j=function(A){if(N(this)||N(A))return g;if(M(this))return M(A)?k(this).j(k(A)):k(k(this).j(A));if(M(A))return k(this.j(k(A)));if(0>this.l(_)&&0>A.l(_))return h(this.m()*A.m());for(var y=this.g.length+A.g.length,v=[],T=0;T<2*y;T++)v[T]=0;for(T=0;T<this.g.length;T++)for(var R=0;R<A.g.length;R++){var I=this.i(T)>>>16,S=this.i(T)&65535,wt=A.i(R)>>>16,ie=A.i(R)&65535;v[2*T+2*R]+=S*ie,E(v,2*T+2*R),v[2*T+2*R+1]+=I*ie,E(v,2*T+2*R+1),v[2*T+2*R+1]+=S*wt,E(v,2*T+2*R+1),v[2*T+2*R+2]+=I*wt,E(v,2*T+2*R+2)}for(T=0;T<y;T++)v[T]=v[2*T+1]<<16|v[2*T];for(T=y;T<2*y;T++)v[T]=0;return new a(v,0)};function E(A,y){for(;(A[y]&65535)!=A[y];)A[y+1]+=A[y]>>>16,A[y]&=65535,y++}function w(A,y){this.g=A,this.h=y}function D(A,y){if(N(y))throw Error("division by zero");if(N(A))return new w(g,g);if(M(A))return y=D(k(A),y),new w(k(y.g),k(y.h));if(M(y))return y=D(A,k(y)),new w(k(y.g),y.h);if(30<A.g.length){if(M(A)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var v=m,T=y;0>=T.l(A);)v=L(v),T=L(T);var R=q(v,1),I=q(T,1);for(T=q(T,2),v=q(v,2);!N(T);){var S=I.add(T);0>=S.l(A)&&(R=R.add(v),I=S),T=q(T,1),v=q(v,1)}return y=b(A,R.j(y)),new w(R,y)}for(R=g;0<=A.l(y);){for(v=Math.max(1,Math.floor(A.m()/y.m())),T=Math.ceil(Math.log(v)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),I=h(v),S=I.j(y);M(S)||0<S.l(A);)v-=T,I=h(v),S=I.j(y);N(I)&&(I=m),R=R.add(I),A=b(A,S)}return new w(R,A)}e.A=function(A){return D(this,A).h},e.and=function(A){for(var y=Math.max(this.g.length,A.g.length),v=[],T=0;T<y;T++)v[T]=this.i(T)&A.i(T);return new a(v,this.h&A.h)},e.or=function(A){for(var y=Math.max(this.g.length,A.g.length),v=[],T=0;T<y;T++)v[T]=this.i(T)|A.i(T);return new a(v,this.h|A.h)},e.xor=function(A){for(var y=Math.max(this.g.length,A.g.length),v=[],T=0;T<y;T++)v[T]=this.i(T)^A.i(T);return new a(v,this.h^A.h)};function L(A){for(var y=A.g.length+1,v=[],T=0;T<y;T++)v[T]=A.i(T)<<1|A.i(T-1)>>>31;return new a(v,A.h)}function q(A,y){var v=y>>5;y%=32;for(var T=A.g.length-v,R=[],I=0;I<T;I++)R[I]=0<y?A.i(I+v)>>>y|A.i(I+v+1)<<32-y:A.i(I+v);return new a(R,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,k0=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,ji=a}).apply(typeof s_<"u"?s_:typeof self<"u"?self:typeof window<"u"?window:{});var Bl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var P0,Ma,U0,au,hd,L0,z0,j0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bl=="object"&&Bl];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var C=o[p];if(!(C in f))break t;f=f[C]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,p=!1,C={next:function(){if(!p&&f<o.length){var V=f++;return{value:c(V,o[V]),done:!1}}return p=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,p),o.apply(c,C)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function N(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,C,V){for(var z=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)z[vt-2]=arguments[vt];return c.prototype[C].apply(p,z)}}function M(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function k(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const C=o.length||0,V=p.length||0;o.length=C+V;for(let z=0;z<V;z++)o[C+z]=p[z]}else o.push(p)}}class b{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function w(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var L=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function q(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function A(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,c){let f,p;for(let C=1;C<arguments.length;C++){p=arguments[C];for(f in p)o[f]=p[f];for(let V=0;V<v.length;V++)f=v[V],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function R(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function I(o){l.setTimeout(()=>{throw o},0)}function S(){var o=_t;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class wt{constructor(){this.h=this.g=null}add(c,f){const p=ie.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var ie=new b(()=>new B,o=>o.reset());class B{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,Z=!1,_t=new wt,Dt=()=>{const o=l.Promise.resolve(void 0);Y=()=>{o.then(ii)}};var ii=()=>{for(var o;o=S();){try{o.h.call(o.g)}catch(f){I(f)}var c=ie;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}Z=!1};function Ee(){this.s=this.s,this.C=this.C}Ee.prototype.s=!1,Ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xt(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}xt.prototype.h=function(){this.defaultPrevented=!0};var rn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function W(o,c){if(xt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{D(c.nodeName);var C=!0;break t}catch{}C=!1}C||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Nt[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&W.aa.h.call(this)}}N(W,xt);var Nt={2:"touch",3:"pen",4:"mouse"};W.prototype.h=function(){W.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),al=0;function ol(o,c,f,p,C){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=C,this.key=++al,this.da=this.fa=!1}function sr(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ar(o){this.src=o,this.g={},this.h=0}ar.prototype.add=function(o,c,f,p,C){var V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);var z=ri(o,c,p,C);return-1<z?(c=o[z],f||(c.fa=!1)):(c=new ol(c,this.src,V,!!p,C),c.fa=f,o.push(c)),c};function sn(o,c){var f=c.type;if(f in o.g){var p=o.g[f],C=Array.prototype.indexOf.call(p,c,void 0),V;(V=0<=C)&&Array.prototype.splice.call(p,C,1),V&&(sr(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function ri(o,c,f,p){for(var C=0;C<o.length;++C){var V=o[C];if(!V.da&&V.listener==c&&V.capture==!!f&&V.ha==p)return C}return-1}var jr="closure_lm_"+(1e6*Math.random()|0),oa={};function ll(o,c,f,p,C){if(Array.isArray(c)){for(var V=0;V<c.length;V++)ll(o,c[V],f,p,C);return null}return f=Ig(f),o&&o[Ie]?o.K(c,f,h(p)?!!p.capture:!1,C):ul(o,c,f,!1,p,C)}function ul(o,c,f,p,C,V){if(!c)throw Error("Invalid event type");var z=h(C)?!!C.capture:!!C,vt=th(o);if(vt||(o[jr]=vt=new ar(o)),f=vt.add(c,f,p,z,V),f.proxy)return f;if(p=si(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)rn||(C=z),C===void 0&&(C=!1),o.addEventListener(c.toString(),p,C);else if(o.attachEvent)o.attachEvent(Rg(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function si(){function o(f){return c.call(o.src,o.listener,f)}const c=JS;return o}function wg(o,c,f,p,C){if(Array.isArray(c))for(var V=0;V<c.length;V++)wg(o,c[V],f,p,C);else p=h(p)?!!p.capture:!!p,f=Ig(f),o&&o[Ie]?(o=o.i,c=String(c).toString(),c in o.g&&(V=o.g[c],f=ri(V,f,p,C),-1<f&&(sr(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete o.g[c],o.h--)))):o&&(o=th(o))&&(c=o.g[c.toString()],o=-1,c&&(o=ri(c,f,p,C)),(f=-1<o?c[o]:null)&&Wc(f))}function Wc(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Ie])sn(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(Rg(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=th(c))?(sn(f,o),f.h==0&&(f.src=null,c[jr]=null)):sr(o)}}}function Rg(o){return o in oa?oa[o]:oa[o]="on"+o}function JS(o,c){if(o.da)o=!0;else{c=new W(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&Wc(o),o=f.call(p,c)}return o}function th(o){return o=o[jr],o instanceof ar?o:null}var eh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ig(o){return typeof o=="function"?o:(o[eh]||(o[eh]=function(c){return o.handleEvent(c)}),o[eh])}function fe(){Ee.call(this),this.i=new ar(this),this.M=this,this.F=null}N(fe,Ee),fe.prototype[Ie]=!0,fe.prototype.removeEventListener=function(o,c,f,p){wg(this,o,c,f,p)};function Te(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new xt(c,o);else if(c instanceof xt)c.target=c.target||o;else{var C=c;c=new xt(p,o),T(c,C)}if(C=!0,f)for(var V=f.length-1;0<=V;V--){var z=c.g=f[V];C=cl(z,p,!0,c)&&C}if(z=c.g=o,C=cl(z,p,!0,c)&&C,C=cl(z,p,!1,c)&&C,f)for(V=0;V<f.length;V++)z=c.g=f[V],C=cl(z,p,!1,c)&&C}fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)sr(f[p]);delete o.g[c],o.h--}}this.F=null},fe.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},fe.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function cl(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var C=!0,V=0;V<c.length;++V){var z=c[V];if(z&&!z.da&&z.capture==f){var vt=z.listener,re=z.ha||z.src;z.fa&&sn(o.i,z),C=vt.call(re,p)!==!1&&C}}return C&&!p.defaultPrevented}function Cg(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Dg(o){o.g=Cg(()=>{o.g=null,o.i&&(o.i=!1,Dg(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class WS extends Ee{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Dg(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function la(o){Ee.call(this),this.h=o,this.g={}}N(la,Ee);var Ng=[];function Og(o){q(o.g,function(c,f){this.g.hasOwnProperty(f)&&Wc(c)},o),o.g={}}la.prototype.N=function(){la.aa.N.call(this),Og(this)},la.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nh=l.JSON.stringify,t1=l.JSON.parse,e1=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function ih(){}ih.prototype.h=null;function Vg(o){return o.h||(o.h=o.i())}function Mg(){}var ua={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rh(){xt.call(this,"d")}N(rh,xt);function sh(){xt.call(this,"c")}N(sh,xt);var or={},xg=null;function hl(){return xg=xg||new fe}or.La="serverreachability";function kg(o){xt.call(this,or.La,o)}N(kg,xt);function ca(o){const c=hl();Te(c,new kg(c))}or.STAT_EVENT="statevent";function Pg(o,c){xt.call(this,or.STAT_EVENT,o),this.stat=c}N(Pg,xt);function Ae(o){const c=hl();Te(c,new Pg(c,o))}or.Ma="timingevent";function Ug(o,c){xt.call(this,or.Ma,o),this.size=c}N(Ug,xt);function ha(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function fa(){this.g=!0}fa.prototype.xa=function(){this.g=!1};function n1(o,c,f,p,C,V){o.info(function(){if(o.g)if(V)for(var z="",vt=V.split("&"),re=0;re<vt.length;re++){var ct=vt[re].split("=");if(1<ct.length){var de=ct[0];ct=ct[1];var me=de.split("_");z=2<=me.length&&me[1]=="type"?z+(de+"="+ct+"&"):z+(de+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+p+") [attempt "+C+"]: "+c+`
`+f+`
`+z})}function i1(o,c,f,p,C,V,z){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+C+"]: "+c+`
`+f+`
`+V+" "+z})}function Br(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+s1(o,f)+(p?" "+p:"")})}function r1(o,c){o.info(function(){return"TIMEOUT: "+c})}fa.prototype.info=function(){};function s1(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var C=p[1];if(Array.isArray(C)&&!(1>C.length)){var V=C[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<C.length;z++)C[z]=""}}}}return nh(f)}catch{return c}}var fl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ah;function dl(){}N(dl,ih),dl.prototype.g=function(){return new XMLHttpRequest},dl.prototype.i=function(){return{}},ah=new dl;function ai(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new la(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zg}function zg(){this.i=null,this.g="",this.h=!1}var jg={},oh={};function lh(o,c,f){o.L=1,o.v=yl(Dn(c)),o.m=f,o.P=!0,Bg(o,null)}function Bg(o,c){o.F=Date.now(),ml(o),o.A=Dn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),ep(f.i,"t",p),o.C=0,f=o.j.J,o.h=new zg,o.g=vp(o.j,f?c:null,!o.m),0<o.O&&(o.M=new WS(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(Ng[0]=C.toString()),C=Ng);for(var V=0;V<C.length;V++){var z=ll(f,C[V],p||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),ca(),n1(o.i,o.u,o.A,o.l,o.R,o.m)}ai.prototype.ca=function(o){o=o.target;const c=this.M;c&&Nn(o)==3?c.j():this.Y(o)},ai.prototype.Y=function(o){try{if(o==this.g)t:{const me=Nn(this.g);var c=this.g.Ba();const Gr=this.g.Z();if(!(3>me)&&(me!=3||this.g&&(this.h.h||this.g.oa()||lp(this.g)))){this.J||me!=4||c==7||(c==8||0>=Gr?ca(3):ca(2)),uh(this);var f=this.g.Z();this.X=f;e:if(qg(this)){var p=lp(this.g);o="";var C=p.length,V=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lr(this),da(this);var z="";break e}this.h.i=new l.TextDecoder}for(c=0;c<C;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(V&&c==C-1)});p.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,i1(this.i,this.u,this.A,this.l,this.R,me,f),this.o){if(this.T&&!this.K){e:{if(this.g){var vt,re=this.g;if((vt=re.g?re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(vt)){var ct=vt;break e}}ct=null}if(f=ct)Br(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ch(this,f);else{this.o=!1,this.s=3,Ae(12),lr(this),da(this);break t}}if(this.P){f=!0;let an;for(;!this.J&&this.C<z.length;)if(an=a1(this,z),an==oh){me==4&&(this.s=4,Ae(14),f=!1),Br(this.i,this.l,null,"[Incomplete Response]");break}else if(an==jg){this.s=4,Ae(15),Br(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else Br(this.i,this.l,an,null),ch(this,an);if(qg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),me!=4||z.length!=0||this.h.h||(this.s=1,Ae(16),f=!1),this.o=this.o&&f,!f)Br(this.i,this.l,z,"[Invalid Chunked Response]"),lr(this),da(this);else if(0<z.length&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.ba&&!de.M&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),ph(de),de.M=!0,Ae(11))}}else Br(this.i,this.l,z,null),ch(this,z);me==4&&lr(this),this.o&&!this.J&&(me==4?gp(this.j,this):(this.o=!1,ml(this)))}else S1(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,Ae(12)):(this.s=0,Ae(13)),lr(this),da(this)}}}catch{}finally{}};function qg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function a1(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?oh:(f=Number(c.substring(f,p)),isNaN(f)?jg:(p+=1,p+f>c.length?oh:(c=c.slice(p,p+f),o.C=p+f,c)))}ai.prototype.cancel=function(){this.J=!0,lr(this)};function ml(o){o.S=Date.now()+o.I,Hg(o,o.I)}function Hg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ha(m(o.ba,o),c)}function uh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}ai.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(r1(this.i,this.A),this.L!=2&&(ca(),Ae(17)),lr(this),this.s=2,da(this)):Hg(this,this.S-o)};function da(o){o.j.G==0||o.J||gp(o.j,o)}function lr(o){uh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Og(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function ch(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||hh(f.h,o))){if(!o.K&&hh(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var C=p;if(C[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Sl(f),Tl(f);else break t;gh(f),Ae(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ha(m(f.Za,f),6e3));if(1>=Qg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else cr(f,11)}else if((o.K||f.g==o)&&Sl(f),!E(c))for(C=f.Da.g.parse(c),c=0;c<C.length;c++){let ct=C[c];if(f.T=ct[0],ct=ct[1],f.G==2)if(ct[0]=="c"){f.K=ct[1],f.ia=ct[2];const de=ct[3];de!=null&&(f.la=de,f.j.info("VER="+f.la));const me=ct[4];me!=null&&(f.Aa=me,f.j.info("SVER="+f.Aa));const Gr=ct[5];Gr!=null&&typeof Gr=="number"&&0<Gr&&(p=1.5*Gr,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const an=o.g;if(an){const wl=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wl){var V=p.h;V.g||wl.indexOf("spdy")==-1&&wl.indexOf("quic")==-1&&wl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(fh(V,V.h),V.h=null))}if(p.D){const yh=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;yh&&(p.ya=yh,At(p.I,p.D,yh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var z=o;if(p.qa=_p(p,p.J?p.ia:null,p.W),z.K){Yg(p.h,z);var vt=z,re=p.L;re&&(vt.I=re),vt.B&&(uh(vt),ml(vt)),p.g=z}else dp(p);0<f.i.length&&Al(f)}else ct[0]!="stop"&&ct[0]!="close"||cr(f,7);else f.G==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?cr(f,7):mh(f):ct[0]!="noop"&&f.l&&f.l.ta(ct),f.v=0)}}ca(4)}catch{}}var o1=class{constructor(o,c){this.g=o,this.map=c}};function Gg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Qg(o){return o.h?1:o.g?o.g.size:0}function hh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function fh(o,c){o.g?o.g.add(c):o.h=c}function Yg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Gg.prototype.cancel=function(){if(this.i=Kg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Kg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return M(o.i)}function l1(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function u1(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function $g(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=u1(o),p=l1(o),C=p.length,V=0;V<C;V++)c.call(void 0,p[V],f&&f[V],o)}var Xg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function c1(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),C=null;if(0<=p){var V=o[f].substring(0,p);C=o[f].substring(p+1)}else V=o[f];c(V,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ur(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof ur){this.h=o.h,gl(this,o.j),this.o=o.o,this.g=o.g,pl(this,o.s),this.l=o.l;var c=o.i,f=new pa;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Zg(this,f),this.m=o.m}else o&&(c=String(o).match(Xg))?(this.h=!1,gl(this,c[1]||"",!0),this.o=ma(c[2]||""),this.g=ma(c[3]||"",!0),pl(this,c[4]),this.l=ma(c[5]||"",!0),Zg(this,c[6]||"",!0),this.m=ma(c[7]||"")):(this.h=!1,this.i=new pa(null,this.h))}ur.prototype.toString=function(){var o=[],c=this.j;c&&o.push(ga(c,Jg,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(ga(c,Jg,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(ga(f,f.charAt(0)=="/"?d1:f1,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",ga(f,g1)),o.join("")};function Dn(o){return new ur(o)}function gl(o,c,f){o.j=f?ma(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function pl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Zg(o,c,f){c instanceof pa?(o.i=c,p1(o.i,o.h)):(f||(c=ga(c,m1)),o.i=new pa(c,o.h))}function At(o,c,f){o.i.set(c,f)}function yl(o){return At(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function ma(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ga(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,h1),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function h1(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Jg=/[#\/\?@]/g,f1=/[#\?:]/g,d1=/[#\?]/g,m1=/[#\?@]/g,g1=/#/g;function pa(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function oi(o){o.g||(o.g=new Map,o.h=0,o.i&&c1(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=pa.prototype,e.add=function(o,c){oi(this),this.i=null,o=qr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function Wg(o,c){oi(o),c=qr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function tp(o,c){return oi(o),c=qr(o,c),o.g.has(c)}e.forEach=function(o,c){oi(this),this.g.forEach(function(f,p){f.forEach(function(C){o.call(c,C,p,this)},this)},this)},e.na=function(){oi(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const C=o[p];for(let V=0;V<C.length;V++)f.push(c[p])}return f},e.V=function(o){oi(this);let c=[];if(typeof o=="string")tp(this,o)&&(c=c.concat(this.g.get(qr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return oi(this),this.i=null,o=qr(this,o),tp(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function ep(o,c,f){Wg(o,c),0<f.length&&(o.i=null,o.g.set(qr(o,c),M(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const V=encodeURIComponent(String(p)),z=this.V(p);for(p=0;p<z.length;p++){var C=V;z[p]!==""&&(C+="="+encodeURIComponent(String(z[p]))),o.push(C)}}return this.i=o.join("&")};function qr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function p1(o,c){c&&!o.j&&(oi(o),o.i=null,o.g.forEach(function(f,p){var C=p.toLowerCase();p!=C&&(Wg(this,p),ep(this,C,f))},o)),o.j=c}function y1(o,c){const f=new fa;if(l.Image){const p=new Image;p.onload=_(li,f,"TestLoadImage: loaded",!0,c,p),p.onerror=_(li,f,"TestLoadImage: error",!1,c,p),p.onabort=_(li,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=_(li,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function _1(o,c){const f=new fa,p=new AbortController,C=setTimeout(()=>{p.abort(),li(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(V=>{clearTimeout(C),V.ok?li(f,"TestPingServer: ok",!0,c):li(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(C),li(f,"TestPingServer: error",!1,c)})}function li(o,c,f,p,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),p(f)}catch{}}function v1(){this.g=new e1}function E1(o,c,f){const p=f||"";try{$g(o,function(C,V){let z=C;h(C)&&(z=nh(C)),c.push(p+V+"="+encodeURIComponent(z))})}catch(C){throw c.push(p+"type="+encodeURIComponent("_badmap")),C}}function _l(o){this.l=o.Ub||null,this.j=o.eb||!1}N(_l,ih),_l.prototype.g=function(){return new vl(this.l,this.j)},_l.prototype.i=function(o){return function(){return o}}({});function vl(o,c){fe.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(vl,fe),e=vl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,_a(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ya(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,_a(this)),this.g&&(this.readyState=3,_a(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;np(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function np(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?ya(this):_a(this),this.readyState==3&&np(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,ya(this))},e.Qa=function(o){this.g&&(this.response=o,ya(this))},e.ga=function(){this.g&&ya(this)};function ya(o){o.readyState=4,o.l=null,o.j=null,o.v=null,_a(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function _a(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ip(o){let c="";return q(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function dh(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=ip(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):At(o,c,f))}function kt(o){fe.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(kt,fe);var T1=/^https?$/i,A1=["POST","PUT"];e=kt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ah.g(),this.v=this.o?Vg(this.o):Vg(ah),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(V){rp(this,V);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var C in p)f.set(C,p[C]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const V of p.keys())f.set(V,p.get(V));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),C=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(A1,c,void 0))||p||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of f)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{op(this),this.u=!0,this.g.send(o),this.u=!1}catch(V){rp(this,V)}};function rp(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,sp(o),El(o)}function sp(o){o.A||(o.A=!0,Te(o,"complete"),Te(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Te(this,"complete"),Te(this,"abort"),El(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),El(this,!0)),kt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ap(this):this.bb())},e.bb=function(){ap(this)};function ap(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Nn(o)!=4||o.Z()!=2)){if(o.u&&Nn(o)==4)Cg(o.Ea,0,o);else if(Te(o,"readystatechange"),Nn(o)==4){o.h=!1;try{const z=o.Z();t:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=z===0){var C=String(o.D).match(Xg)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),p=!T1.test(C?C.toLowerCase():"")}f=p}if(f)Te(o,"complete"),Te(o,"success");else{o.m=6;try{var V=2<Nn(o)?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.Z()+"]",sp(o)}}finally{El(o)}}}}function El(o,c){if(o.g){op(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||Te(o,"ready");try{f.onreadystatechange=p}catch{}}}function op(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Nn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),t1(c)}};function lp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function S1(o){const c={};o=(o.g&&2<=Nn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(E(o[p]))continue;var f=R(o[p]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=c[C]||[];c[C]=V,V.push(f)}A(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function va(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function up(o){this.Aa=0,this.i=[],this.j=new fa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=va("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=va("baseRetryDelayMs",5e3,o),this.cb=va("retryDelaySeedMs",1e4,o),this.Wa=va("forwardChannelMaxRetries",2,o),this.wa=va("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Gg(o&&o.concurrentRequestLimit),this.Da=new v1,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=up.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){Ae(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=_p(this,null,this.W),Al(this)};function mh(o){if(cp(o),o.G==3){var c=o.U++,f=Dn(o.I);if(At(f,"SID",o.K),At(f,"RID",c),At(f,"TYPE","terminate"),Ea(o,f),c=new ai(o,o.j,c),c.L=2,c.v=yl(Dn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=vp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),ml(c)}yp(o)}function Tl(o){o.g&&(ph(o),o.g.cancel(),o.g=null)}function cp(o){Tl(o),o.u&&(l.clearTimeout(o.u),o.u=null),Sl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Al(o){if(!Fg(o.h)&&!o.s){o.s=!0;var c=o.Ga;Y||Dt(),Z||(Y(),Z=!0),_t.add(c,o),o.B=0}}function b1(o,c){return Qg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ha(m(o.Ga,o,c),pp(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new ai(this,this.j,o);let V=this.o;if(this.S&&(V?(V=y(V),T(V,this.S)):V=this.S),this.m!==null||this.O||(C.H=V,V=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=fp(this,C,c),f=Dn(this.I),At(f,"RID",o),At(f,"CVER",22),this.D&&At(f,"X-HTTP-Session-Id",this.D),Ea(this,f),V&&(this.O?c="headers="+encodeURIComponent(String(ip(V)))+"&"+c:this.m&&dh(f,this.m,V)),fh(this.h,C),this.Ua&&At(f,"TYPE","init"),this.P?(At(f,"$req",c),At(f,"SID","null"),C.T=!0,lh(C,f,null)):lh(C,f,c),this.G=2}}else this.G==3&&(o?hp(this,o):this.i.length==0||Fg(this.h)||hp(this))};function hp(o,c){var f;c?f=c.l:f=o.U++;const p=Dn(o.I);At(p,"SID",o.K),At(p,"RID",f),At(p,"AID",o.T),Ea(o,p),o.m&&o.o&&dh(p,o.m,o.o),f=new ai(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=fp(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),fh(o.h,f),lh(f,p,c)}function Ea(o,c){o.H&&q(o.H,function(f,p){At(c,p,f)}),o.l&&$g({},function(f,p){At(c,p,f)})}function fp(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var C=o.i;let V=-1;for(;;){const z=["count="+f];V==-1?0<f?(V=C[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let vt=!0;for(let re=0;re<f;re++){let ct=C[re].g;const de=C[re].map;if(ct-=V,0>ct)V=Math.max(0,C[re].g-100),vt=!1;else try{E1(de,z,"req"+ct+"_")}catch{p&&p(de)}}if(vt){p=z.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function dp(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;Y||Dt(),Z||(Y(),Z=!0),_t.add(c,o),o.v=0}}function gh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ha(m(o.Fa,o),pp(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,mp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ha(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ae(10),Tl(this),mp(this))};function ph(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function mp(o){o.g=new ai(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Dn(o.qa);At(c,"RID","rpc"),At(c,"SID",o.K),At(c,"AID",o.T),At(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&At(c,"TO",o.ja),At(c,"TYPE","xmlhttp"),Ea(o,c),o.m&&o.o&&dh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=yl(Dn(c)),f.m=null,f.P=!0,Bg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Tl(this),gh(this),Ae(19))};function Sl(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function gp(o,c){var f=null;if(o.g==c){Sl(o),ph(o),o.g=null;var p=2}else if(hh(o.h,c))f=c.D,Yg(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var C=o.B;p=hl(),Te(p,new Ug(p,f)),Al(o)}else dp(o);else if(C=c.s,C==3||C==0&&0<c.X||!(p==1&&b1(o,c)||p==2&&gh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),C){case 1:cr(o,5);break;case 4:cr(o,10);break;case 3:cr(o,6);break;default:cr(o,2)}}}function pp(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function cr(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const C=!p;p=new ur(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||gl(p,"https"),yl(p),C?y1(p.toString(),f):_1(p.toString(),f)}else Ae(2);o.G=0,o.l&&o.l.sa(c),yp(o),cp(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function yp(o){if(o.G=0,o.ka=[],o.l){const c=Kg(o.h);(c.length!=0||o.i.length!=0)&&(k(o.ka,c),k(o.ka,o.i),o.h.i.length=0,M(o.i),o.i.length=0),o.l.ra()}}function _p(o,c,f){var p=f instanceof ur?Dn(f):new ur(f);if(p.g!="")c&&(p.g=c+"."+p.g),pl(p,p.s);else{var C=l.location;p=C.protocol,c=c?c+"."+C.hostname:C.hostname,C=+C.port;var V=new ur(null);p&&gl(V,p),c&&(V.g=c),C&&pl(V,C),f&&(V.l=f),p=V}return f=o.D,c=o.ya,f&&c&&At(p,f,c),At(p,"VER",o.la),Ea(o,p),p}function vp(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new kt(new _l({eb:f})):new kt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ep(){}e=Ep.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function bl(){}bl.prototype.g=function(o,c){return new xe(o,c)};function xe(o,c){fe.call(this),this.g=new up(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Hr(this)}N(xe,fe),xe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xe.prototype.close=function(){mh(this.g)},xe.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=nh(o),o=f);c.i.push(new o1(c.Ya++,o)),c.G==3&&Al(c)},xe.prototype.N=function(){this.g.l=null,delete this.j,mh(this.g),delete this.g,xe.aa.N.call(this)};function Tp(o){rh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}N(Tp,rh);function Ap(){sh.call(this),this.status=1}N(Ap,sh);function Hr(o){this.g=o}N(Hr,Ep),Hr.prototype.ua=function(){Te(this.g,"a")},Hr.prototype.ta=function(o){Te(this.g,new Tp(o))},Hr.prototype.sa=function(o){Te(this.g,new Ap)},Hr.prototype.ra=function(){Te(this.g,"b")},bl.prototype.createWebChannel=bl.prototype.g,xe.prototype.send=xe.prototype.o,xe.prototype.open=xe.prototype.m,xe.prototype.close=xe.prototype.close,j0=function(){return new bl},z0=function(){return hl()},L0=or,hd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fl.NO_ERROR=0,fl.TIMEOUT=8,fl.HTTP_ERROR=6,au=fl,Lg.COMPLETE="complete",U0=Lg,Mg.EventType=ua,ua.OPEN="a",ua.CLOSE="b",ua.ERROR="c",ua.MESSAGE="d",fe.prototype.listen=fe.prototype.K,Ma=Mg,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,P0=kt}).apply(typeof Bl<"u"?Bl:typeof self<"u"?self:typeof window<"u"?window:{});const a_="@firebase/firestore",o_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}pe.UNAUTHENTICATED=new pe(null),pe.GOOGLE_CREDENTIALS=new pe("google-credentials-uid"),pe.FIRST_PARTY=new pe("first-party-uid"),pe.MOCK_USER=new pe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new Om("@firebase/firestore");function Zr(){return Nr.logLevel}function H(e,...t){if(Nr.logLevel<=rt.DEBUG){const n=t.map(xm);Nr.debug(`Firestore (${ea}): ${e}`,...n)}}function Xn(e,...t){if(Nr.logLevel<=rt.ERROR){const n=t.map(xm);Nr.error(`Firestore (${ea}): ${e}`,...n)}}function js(e,...t){if(Nr.logLevel<=rt.WARN){const n=t.map(xm);Nr.warn(`Firestore (${ea}): ${e}`,...n)}}function xm(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,B0(e,i,n)}function B0(e,t,n){let i=`FIRESTORE (${ea}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Xn(i),new Error(i)}function ut(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||B0(t,r,i)}function J(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends ni{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class a2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(pe.UNAUTHENTICATED))}shutdown(){}}class o2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class l2{constructor(t){this.t=t,this.currentUser=pe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ut(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new Gn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gn,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ut(typeof i.accessToken=="string",31837,{l:i}),new q0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ut(t===null||typeof t=="string",2055,{h:t}),new pe(t)}}class u2{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=pe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class c2{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new u2(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(pe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class l_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h2{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ln(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ut(this.o===void 0,3512);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new l_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ut(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new l_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=f2(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function st(e,t){return e<t?-1:e>t?1:0}function fd(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return sf(r)===sf(s)?st(r,s):sf(r)?1:-1}return st(e.length,t.length)}const d2=55296,m2=57343;function sf(e){const t=e.charCodeAt(0);return t>=d2&&t<=m2}function Bs(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="__name__";class gn{constructor(t,n,i){n===void 0?n=0:n>t.length&&F(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&F(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return gn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof gn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=gn.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return st(t.length,n.length)}static compareSegments(t,n){const i=gn.isNumericId(t),r=gn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?gn.extractNumericId(t).compare(gn.extractNumericId(n)):fd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ji.fromString(t.substring(4,t.length-2))}}class yt extends gn{construct(t,n,i){return new yt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new j(x.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new yt(n)}static emptyPath(){return new yt([])}}const g2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class le extends gn{construct(t,n,i){return new le(t,n,i)}static isValidIdentifier(t){return g2.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),le.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===u_}static keyField(){return new le([u_])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new j(x.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new j(x.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new j(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new j(x.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new le(n)}static emptyPath(){return new le([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.path=t}static fromPath(t){return new G(yt.fromString(t))}static fromName(t){return new G(yt.fromString(t).popFirst(5))}static empty(){return new G(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&yt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return yt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new G(new yt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(e,t,n){if(!n)throw new j(x.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function p2(e,t,n,i){if(t===!0&&i===!0)throw new j(x.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function c_(e){if(!G.isDocumentKey(e))throw new j(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function h_(e){if(G.isDocumentKey(e))throw new j(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function G0(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Oc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":F(12329,{type:typeof e})}function Fe(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new j(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Oc(e);throw new j(x.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(e,t){const n={typeString:e};return t&&(n.value=t),n}function Ko(e,t){if(!G0(e))throw new j(x.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new j(x.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=-62135596800,d_=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(t){return St.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*d_);return new St(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new j(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<f_)throw new j(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new j(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d_}_compareTo(t){return this.seconds===t.seconds?st(this.nanoseconds,t.nanoseconds):st(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ko(t,St._jsonSchema))return new St(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-f_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:Gt("string",St._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{static fromTimestamp(t){return new Q(t)}static min(){return new Q(new St(0,0))}static max(){return new Q(new St(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=-1;function y2(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Q.fromTimestamp(i===1e9?new St(n+1,0):new St(n,i));return new Ki(r,G.empty(),t)}function _2(e){return new Ki(e.readTime,e.key,To)}class Ki{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Ki(Q.min(),G.empty(),To)}static max(){return new Ki(Q.max(),G.empty(),To)}}function v2(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=G.comparator(e.documentKey,t.documentKey),n!==0?n:st(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class T2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(e){if(e.code!==x.FAILED_PRECONDITION||e.message!==E2)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&F(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(r=>r?P.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new P((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new P((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function A2(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ia(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Vc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=-1;function $o(e){return e==null}function Ku(e){return e===0&&1/e==-1/0}function S2(e){return typeof e=="number"&&Number.isInteger(e)&&!Ku(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="";function b2(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=m_(t)),t=w2(e.get(n),t);return m_(t)}function w2(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case F0:n+="";break;default:n+=s}}return n}function m_(e){return e+F0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ir(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Q0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t,n){this.comparator=t,this.root=n||ae.EMPTY}insert(t,n){return new Mt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ae.BLACK,null,null))}remove(t){return new Mt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ae.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ql(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ql(this.root,t,this.comparator,!1)}getReverseIterator(){return new ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ql(this.root,t,this.comparator,!0)}}class ql{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ae{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??ae.RED,this.left=r??ae.EMPTY,this.right=s??ae.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new ae(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ae.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ae.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ae.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ae.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw F(43730,{key:this.key,value:this.value});if(this.right.isRed())throw F(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw F(27949);return t+(this.isRed()?0:1)}}ae.EMPTY=null,ae.RED=!0,ae.BLACK=!1;ae.EMPTY=new class{constructor(){this.size=0}get key(){throw F(57766)}get value(){throw F(16141)}get color(){throw F(16727)}get left(){throw F(29726)}get right(){throw F(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new ae(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t){this.comparator=t,this.data=new Mt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new p_(this.data.getIterator())}getIteratorFrom(t){return new p_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Kt)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Kt(this.comparator);return n.data=t,n}}class p_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t){this.fields=t,t.sort(le.comparator)}static empty(){return new je([])}unionWith(t){let n=new Kt(le.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new je(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Bs(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Y0("Invalid base64 string: "+s):s}}(t);return new he(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new he(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return st(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}he.EMPTY_BYTE_STRING=new he("");const R2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(e){if(ut(!!e,39018),typeof e=="string"){let t=0;const n=R2.exec(e);if(ut(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:jt(e.seconds),nanos:jt(e.nanos)}}function jt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Xi(e){return typeof e=="string"?he.fromBase64String(e):he.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="server_timestamp",$0="__type__",X0="__previous_value__",Z0="__local_write_time__";function Um(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[$0])==null?void 0:i.stringValue)===K0}function Mc(e){const t=e.mapValue.fields[X0];return Um(t)?Mc(t):t}function Ao(e){const t=$i(e.mapValue.fields[Z0].timestampValue);return new St(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const $u="(default)";class So{constructor(t,n){this.projectId=t,this.database=n||$u}static empty(){return new So("","")}get isDefaultDatabase(){return this.database===$u}isEqual(t){return t instanceof So&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="__type__",C2="__max__",Hl={mapValue:{}},W0="__vector__",Xu="value";function Zi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Um(e)?4:N2(e)?9007199254740991:D2(e)?10:11:F(28295,{value:e})}function Rn(e,t){if(e===t)return!0;const n=Zi(e);if(n!==Zi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ao(e).isEqual(Ao(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=$i(r.timestampValue),l=$i(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return Xi(r.bytesValue).isEqual(Xi(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return jt(r.geoPointValue.latitude)===jt(s.geoPointValue.latitude)&&jt(r.geoPointValue.longitude)===jt(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return jt(r.integerValue)===jt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=jt(r.doubleValue),l=jt(s.doubleValue);return a===l?Ku(a)===Ku(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return Bs(e.arrayValue.values||[],t.arrayValue.values||[],Rn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(g_(a)!==g_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Rn(a[u],l[u])))return!1;return!0}(e,t);default:return F(52216,{left:e})}}function bo(e,t){return(e.values||[]).find(n=>Rn(n,t))!==void 0}function qs(e,t){if(e===t)return 0;const n=Zi(e),i=Zi(t);if(n!==i)return st(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=jt(s.integerValue||s.doubleValue),u=jt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return y_(e.timestampValue,t.timestampValue);case 4:return y_(Ao(e),Ao(t));case 5:return fd(e.stringValue,t.stringValue);case 6:return function(s,a){const l=Xi(s),u=Xi(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=st(l[h],u[h]);if(d!==0)return d}return st(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=st(jt(s.latitude),jt(a.latitude));return l!==0?l:st(jt(s.longitude),jt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return __(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,_,N,M;const l=s.fields||{},u=a.fields||{},h=(m=l[Xu])==null?void 0:m.arrayValue,d=(_=u[Xu])==null?void 0:_.arrayValue,g=st(((N=h==null?void 0:h.values)==null?void 0:N.length)||0,((M=d==null?void 0:d.values)==null?void 0:M.length)||0);return g!==0?g:__(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===Hl.mapValue&&a===Hl.mapValue)return 0;if(s===Hl.mapValue)return 1;if(a===Hl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=fd(u[g],d[g]);if(m!==0)return m;const _=qs(l[u[g]],h[d[g]]);if(_!==0)return _}return st(u.length,d.length)}(e.mapValue,t.mapValue);default:throw F(23264,{he:n})}}function y_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return st(e,t);const n=$i(e),i=$i(t),r=st(n.seconds,i.seconds);return r!==0?r:st(n.nanos,i.nanos)}function __(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=qs(n[r],i[r]);if(s)return s}return st(n.length,i.length)}function Hs(e){return dd(e)}function dd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=$i(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Xi(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return G.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=dd(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${dd(n.fields[a])}`;return r+"}"}(e.mapValue):F(61005,{value:e})}function ou(e){switch(Zi(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Mc(e);return t?16+ou(t):16;case 5:return 2*e.stringValue.length;case 6:return Xi(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+ou(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return ir(i.fields,(s,a)=>{r+=s.length+ou(a)}),r}(e.mapValue);default:throw F(13486,{value:e})}}function v_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function md(e){return!!e&&"integerValue"in e}function Lm(e){return!!e&&"arrayValue"in e}function E_(e){return!!e&&"nullValue"in e}function T_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function lu(e){return!!e&&"mapValue"in e}function D2(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[J0])==null?void 0:i.stringValue)===W0}function Wa(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return ir(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Wa(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Wa(e.arrayValue.values[n]);return t}return{...e}}function N2(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===C2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t){this.value=t}static empty(){return new be({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!lu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Wa(n)}setAll(t){let n=le.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=Wa(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());lu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Rn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];lu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){ir(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new be(Wa(this.value))}}function tA(e){const t=[];return ir(e.fields,(n,i)=>{const r=new le([n]);if(lu(i)){const s=tA(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new je(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new Wt(t,0,Q.min(),Q.min(),Q.min(),be.empty(),0)}static newFoundDocument(t,n,i,r){return new Wt(t,1,n,Q.min(),i,r,0)}static newNoDocument(t,n){return new Wt(t,2,n,Q.min(),Q.min(),be.empty(),0)}static newUnknownDocument(t,n){return new Wt(t,3,n,Q.min(),Q.min(),be.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=be.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=be.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Wt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(t,n){this.position=t,this.inclusive=n}}function A_(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=G.comparator(G.fromName(a.referenceValue),n.key):i=qs(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function S_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Rn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(t,n="asc"){this.field=t,this.dir=n}}function O2(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{}class Ht extends eA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new M2(t,n,i):n==="array-contains"?new P2(t,i):n==="in"?new U2(t,i):n==="not-in"?new L2(t,i):n==="array-contains-any"?new z2(t,i):new Ht(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new x2(t,i):new k2(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qs(n,this.value)):n!==null&&Zi(this.value)===Zi(n)&&this.matchesComparison(qs(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return F(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hn extends eA{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new hn(t,n)}matches(t){return nA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nA(e){return e.op==="and"}function iA(e){return V2(e)&&nA(e)}function V2(e){for(const t of e.filters)if(t instanceof hn)return!1;return!0}function gd(e){if(e instanceof Ht)return e.field.canonicalString()+e.op.toString()+Hs(e.value);if(iA(e))return e.filters.map(t=>gd(t)).join(",");{const t=e.filters.map(n=>gd(n)).join(",");return`${e.op}(${t})`}}function rA(e,t){return e instanceof Ht?function(i,r){return r instanceof Ht&&i.op===r.op&&i.field.isEqual(r.field)&&Rn(i.value,r.value)}(e,t):e instanceof hn?function(i,r){return r instanceof hn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&rA(a,r.filters[l]),!0):!1}(e,t):void F(19439)}function sA(e){return e instanceof Ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Hs(n.value)}`}(e):e instanceof hn?function(n){return n.op.toString()+" {"+n.getFilters().map(sA).join(" ,")+"}"}(e):"Filter"}class M2 extends Ht{constructor(t,n,i){super(t,n,i),this.key=G.fromName(i.referenceValue)}matches(t){const n=G.comparator(t.key,this.key);return this.matchesComparison(n)}}class x2 extends Ht{constructor(t,n){super(t,"in",n),this.keys=aA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class k2 extends Ht{constructor(t,n){super(t,"not-in",n),this.keys=aA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function aA(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>G.fromName(i.referenceValue))}class P2 extends Ht{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Lm(n)&&bo(n.arrayValue,this.value)}}class U2 extends Ht{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&bo(this.value.arrayValue,n)}}class L2 extends Ht{constructor(t,n){super(t,"not-in",n)}matches(t){if(bo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bo(this.value.arrayValue,n)}}class z2 extends Ht{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Lm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>bo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function b_(e,t=null,n=[],i=[],r=null,s=null,a=null){return new j2(e,t,n,i,r,s,a)}function zm(e){const t=J(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>gd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),$o(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Hs(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Hs(i)).join(",")),t.Te=n}return t.Te}function jm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!O2(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!rA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!S_(e.startAt,t.startAt)&&S_(e.endAt,t.endAt)}function pd(e){return G.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function B2(e,t,n,i,r,s,a,l){return new ra(e,t,n,i,r,s,a,l)}function xc(e){return new ra(e)}function w_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function oA(e){return e.collectionGroup!==null}function to(e){const t=J(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Kt(le.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new wo(s,i))}),n.has(le.keyField().canonicalString())||t.Ie.push(new wo(le.keyField(),i))}return t.Ie}function Tn(e){const t=J(e);return t.Ee||(t.Ee=q2(t,to(e))),t.Ee}function q2(e,t){if(e.limitType==="F")return b_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new wo(r.field,s)});const n=e.endAt?new Zu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Zu(e.startAt.position,e.startAt.inclusive):null;return b_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function yd(e,t){const n=e.filters.concat([t]);return new ra(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function _d(e,t,n){return new ra(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function kc(e,t){return jm(Tn(e),Tn(t))&&e.limitType===t.limitType}function lA(e){return`${zm(Tn(e))}|lt:${e.limitType}`}function Jr(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>sA(r)).join(", ")}]`),$o(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Hs(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Hs(r)).join(",")),`Target(${i})`}(Tn(e))}; limitType=${e.limitType})`}function Pc(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):G.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of to(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=A_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,to(i),r)||i.endAt&&!function(a,l,u){const h=A_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,to(i),r))}(e,t)}function H2(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function uA(e){return(t,n)=>{let i=!1;for(const r of to(e)){const s=G2(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function G2(e,t,n){const i=e.field.isKeyField()?G.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?qs(u,h):F(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return F(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ir(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return Q0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new Mt(G.comparator);function Zn(){return F2}const cA=new Mt(G.comparator);function xa(...e){let t=cA;for(const n of e)t=t.insert(n.key,n);return t}function hA(e){let t=cA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function pr(){return eo()}function fA(){return eo()}function eo(){return new Ur(e=>e.toString(),(e,t)=>e.isEqual(t))}const Q2=new Mt(G.comparator),Y2=new Kt(G.comparator);function at(...e){let t=Y2;for(const n of e)t=t.add(n);return t}const K2=new Kt(st);function $2(){return K2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ku(t)?"-0":t}}function dA(e){return{integerValue:""+e}}function X2(e,t){return S2(t)?dA(t):Bm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(){this._=void 0}}function Z2(e,t,n){return e instanceof Ro?function(r,s){const a={fields:{[$0]:{stringValue:K0},[Z0]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Um(s)&&(s=Mc(s)),s&&(a.fields[X0]=s),{mapValue:a}}(n,t):e instanceof Io?gA(e,t):e instanceof Co?pA(e,t):function(r,s){const a=mA(r,s),l=R_(a)+R_(r.Ae);return md(a)&&md(r.Ae)?dA(l):Bm(r.serializer,l)}(e,t)}function J2(e,t,n){return e instanceof Io?gA(e,t):e instanceof Co?pA(e,t):n}function mA(e,t){return e instanceof Ju?function(i){return md(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class Ro extends Uc{}class Io extends Uc{constructor(t){super(),this.elements=t}}function gA(e,t){const n=yA(t);for(const i of e.elements)n.some(r=>Rn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Co extends Uc{constructor(t){super(),this.elements=t}}function pA(e,t){let n=yA(t);for(const i of e.elements)n=n.filter(r=>!Rn(r,i));return{arrayValue:{values:n}}}class Ju extends Uc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function R_(e){return jt(e.integerValue||e.doubleValue)}function yA(e){return Lm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(t,n){this.field=t,this.transform=n}}function tC(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Io&&r instanceof Io||i instanceof Co&&r instanceof Co?Bs(i.elements,r.elements,Rn):i instanceof Ju&&r instanceof Ju?Rn(i.Ae,r.Ae):i instanceof Ro&&r instanceof Ro}(e.transform,t.transform)}class eC{constructor(t,n){this.version=t,this.transformResults=n}}class ue{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ue}static exists(t){return new ue(void 0,t)}static updateTime(t){return new ue(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function uu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Lc{}function _A(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new zc(e.key,ue.none()):new Xo(e.key,e.data,ue.none());{const n=e.data,i=be.empty();let r=new Kt(le.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new rr(e.key,i,new je(r.toArray()),ue.none())}}function nC(e,t,n){e instanceof Xo?function(r,s,a){const l=r.value.clone(),u=C_(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof rr?function(r,s,a){if(!uu(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=C_(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(vA(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function no(e,t,n,i){return e instanceof Xo?function(s,a,l,u){if(!uu(s.precondition,a))return l;const h=s.value.clone(),d=D_(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof rr?function(s,a,l,u){if(!uu(s.precondition,a))return l;const h=D_(s.fieldTransforms,u,a),d=a.data;return d.setAll(vA(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(s,a,l){return uu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function iC(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=mA(i.transform,r||null);s!=null&&(n===null&&(n=be.empty()),n.set(i.field,s))}return n||null}function I_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Bs(i,r,(s,a)=>tC(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Xo extends Lc{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class rr extends Lc{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function vA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function C_(e,t,n){const i=new Map;ut(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,J2(a,l,n[r]))}return i}function D_(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,Z2(s,a,t))}return i}class zc extends Lc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EA extends Lc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&nC(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=no(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=no(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=fA();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=_A(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(Q.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),at())}isEqual(t){return this.batchId===t.batchId&&Bs(this.mutations,t.mutations,(n,i)=>I_(n,i))&&Bs(this.baseMutations,t.baseMutations,(n,i)=>I_(n,i))}}class qm{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){ut(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return Q2}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new qm(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,ot;function TA(e){switch(e){case x.OK:return F(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return F(15467,{code:e})}}function AA(e){if(e===void 0)return Xn("GRPC error has no .code"),x.UNKNOWN;switch(e){case Bt.OK:return x.OK;case Bt.CANCELLED:return x.CANCELLED;case Bt.UNKNOWN:return x.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return x.INTERNAL;case Bt.UNAVAILABLE:return x.UNAVAILABLE;case Bt.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Bt.NOT_FOUND:return x.NOT_FOUND;case Bt.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Bt.ABORTED:return x.ABORTED;case Bt.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Bt.DATA_LOSS:return x.DATA_LOSS;default:return F(39323,{code:e})}}(ot=Bt||(Bt={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=new ji([4294967295,4294967295],0);function N_(e){const t=oC().encode(e),n=new k0;return n.update(t),new Uint8Array(n.digest())}function O_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ji([n,i],0),new ji([r,s],0)]}class Hm{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ka(`Invalid padding: ${n}`);if(i<0)throw new ka(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new ka(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new ka(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=ji.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(ji.fromNumber(i)));return r.compare(lC)===1&&(r=new ji([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=N_(t),[i,r]=O_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new Hm(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=N_(t),[i,r]=O_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,Zo.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new jc(Q.min(),r,new Mt(st),Zn(),at())}}class Zo{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Zo(i,n,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class SA{constructor(t,n){this.targetId=t,this.Ce=n}}class bA{constructor(t,n,i=he.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class V_{constructor(){this.ve=0,this.Fe=M_(),this.Me=he.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=at(),n=at(),i=at();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:F(38017,{changeType:s})}}),new Zo(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=M_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ut(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uC{constructor(t){this.Ge=t,this.ze=new Map,this.je=Zn(),this.Je=Gl(),this.He=Gl(),this.Ye=new Mt(st)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:F(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(pd(s))if(i===0){const a=new G(s.path);this.et(n,a,Wt.newNoDocument(a,Q.min()))}else ut(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=Xi(i).toUint8Array()}catch(u){if(u instanceof Y0)return js("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Hm(a,r,s)}catch(u){return js(u instanceof ka?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&pd(l.target)){const u=new G(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Wt.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=at();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new jc(t,n,this.Ye,this.je,i);return this.je=Zn(),this.Je=Gl(),this.He=Gl(),this.Ye=new Mt(st),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new V_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Kt(st),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Kt(st),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new V_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Gl(){return new Mt(G.comparator)}function M_(){return new Mt(G.comparator)}const cC={asc:"ASCENDING",desc:"DESCENDING"},hC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fC={and:"AND",or:"OR"};class dC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function vd(e,t){return e.useProto3Json||$o(t)?t:{value:t}}function Wu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function wA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function mC(e,t){return Wu(e,t.toTimestamp())}function Qe(e){return ut(!!e,49232),Q.fromTimestamp(function(n){const i=$i(n);return new St(i.seconds,i.nanos)}(e))}function Gm(e,t){return Ed(e,t).canonicalString()}function Ed(e,t){const n=function(r){return new yt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function RA(e){const t=yt.fromString(e);return ut(VA(t),10190,{key:t.toString()}),t}function tc(e,t){return Gm(e.databaseId,t.path)}function io(e,t){const n=RA(t);if(n.get(1)!==e.databaseId.projectId)throw new j(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new j(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new G(CA(n))}function IA(e,t){return Gm(e.databaseId,t)}function gC(e){const t=RA(e);return t.length===4?yt.emptyPath():CA(t)}function Td(e){return new yt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function CA(e){return ut(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function x_(e,t,n){return{name:tc(e,t),fields:n.value.mapValue.fields}}function pC(e,t){return"found"in t?function(i,r){ut(!!r.found,43571),r.found.name,r.found.updateTime;const s=io(i,r.found.name),a=Qe(r.found.updateTime),l=r.found.createTime?Qe(r.found.createTime):Q.min(),u=new be({mapValue:{fields:r.found.fields}});return Wt.newFoundDocument(s,a,l,u)}(e,t):"missing"in t?function(i,r){ut(!!r.missing,3894),ut(!!r.readTime,22933);const s=io(i,r.missing),a=Qe(r.readTime);return Wt.newNoDocument(s,a)}(e,t):F(7234,{result:t})}function yC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:F(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(ut(d===void 0||typeof d=="string",58123),he.fromBase64String(d||"")):(ut(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),he.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?x.UNKNOWN:AA(h.code);return new j(d,h.message||"")}(a);n=new bA(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=io(e,i.document.name),s=Qe(i.document.updateTime),a=i.document.createTime?Qe(i.document.createTime):Q.min(),l=new be({mapValue:{fields:i.document.fields}}),u=Wt.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new cu(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=io(e,i.document),s=i.readTime?Qe(i.readTime):Q.min(),a=Wt.newNoDocument(r,s),l=i.removedTargetIds||[];n=new cu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=io(e,i.document),s=i.removedTargetIds||[];n=new cu([],s,r,null)}else{if(!("filter"in t))return F(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new aC(r,s),l=i.targetId;n=new SA(l,a)}}return n}function DA(e,t){let n;if(t instanceof Xo)n={update:x_(e,t.key,t.value)};else if(t instanceof zc)n={delete:tc(e,t.key)};else if(t instanceof rr)n={update:x_(e,t.key,t.data),updateMask:RC(t.fieldMask)};else{if(!(t instanceof EA))return F(16599,{Vt:t.type});n={verify:tc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Ro)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Io)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Co)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ju)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw F(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:mC(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:F(27497)}(e,t.precondition)),n}function _C(e,t){return e&&e.length>0?(ut(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?Qe(r.updateTime):Qe(s);return a.isEqual(Q.min())&&(a=Qe(s)),new eC(a,r.transformResults||[])}(n,t))):[]}function vC(e,t){return{documents:[IA(e,t.path)]}}function EC(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=IA(e,r);const s=function(h){if(h.length!==0)return OA(hn.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:Wr(m.field),direction:SC(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=vd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function TC(e){let t=gC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ut(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(g){const m=NA(g);return m instanceof hn&&iA(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(N){return new wo(ts(N.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,$o(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,_=g.values||[];return new Zu(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,_=g.values||[];return new Zu(_,m)}(n.endAt)),B2(t,r,a,s,l,"F",u,h)}function AC(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return F(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function NA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ts(n.unaryFilter.field);return Ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ts(n.unaryFilter.field);return Ht.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ts(n.unaryFilter.field);return Ht.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ts(n.unaryFilter.field);return Ht.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return F(61313);default:return F(60726)}}(e):e.fieldFilter!==void 0?function(n){return Ht.create(ts(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return F(58110);default:return F(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return hn.create(n.compositeFilter.filters.map(i=>NA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return F(1026)}}(n.compositeFilter.op))}(e):F(30097,{filter:e})}function SC(e){return cC[e]}function bC(e){return hC[e]}function wC(e){return fC[e]}function Wr(e){return{fieldPath:e.canonicalString()}}function ts(e){return le.fromServerFormat(e.fieldPath)}function OA(e){return e instanceof Ht?function(n){if(n.op==="=="){if(T_(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NAN"}};if(E_(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(T_(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NOT_NAN"}};if(E_(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wr(n.field),op:bC(n.op),value:n.value}}}(e):e instanceof hn?function(n){const i=n.getFilters().map(r=>OA(r));return i.length===1?i[0]:{compositeFilter:{op:wC(n.op),filters:i}}}(e):F(54877,{filter:e})}function RC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function VA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t,n,i,r,s=Q.min(),a=Q.min(),l=he.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Ci(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(t){this.yt=t}}function CC(e){const t=TC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?_d(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.Cn=new NC}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(Ki.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(Ki.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class NC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new Kt(yt.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Kt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MA=41943040;class Oe{static withCacheSize(t){return new Oe(t,Oe.DEFAULT_COLLECTION_PERCENTILE,Oe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oe.DEFAULT_COLLECTION_PERCENTILE=10,Oe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oe.DEFAULT=new Oe(MA,Oe.DEFAULT_COLLECTION_PERCENTILE,Oe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oe.DISABLED=new Oe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Gs(0)}static cr(){return new Gs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="LruGarbageCollector",OC=1048576;function U_([e,t],[n,i]){const r=st(e,n);return r===0?st(t,i):r}class VC{constructor(t){this.Ir=t,this.buffer=new Kt(U_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();U_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class MC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(P_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ia(n)?H(P_,"Ignoring IndexedDB error during garbage collection: ",n):await na(n)}await this.Vr(3e5)})}}class xC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(Vc.ce);const i=new VC(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(k_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),k_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(t,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),Zr()<=rt.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function kC(e,t){return new xC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.changes=new Ur(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Wt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&no(i.mutation,r,je.empty(),St.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,at()).next(()=>i))}getLocalViewOfDocuments(t,n,i=at()){const r=pr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=xa();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=pr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,at()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=Zn();const a=eo(),l=function(){return eo()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof rr)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),no(d.mutation,h,d.mutation.getFieldMask(),St.now())):a.set(h.key,je.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new UC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=eo();let r=new Mt((a,l)=>a-l),s=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||je.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(r.get(l.batchId)||at()).add(u);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=fA();d.forEach(m=>{if(!s.has(m)){const _=_A(n.get(m),i.get(m));_!==null&&g.set(m,_),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):oA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):P.resolve(pr());let l=To,u=s;return a.next(h=>P.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,at())).next(d=>({batchId:l,changes:hA(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new G(n)).next(i=>{let r=xa();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=xa();return this.indexManager.getCollectionParents(t,s).next(l=>P.forEach(l,u=>{const h=function(g,m){return new ra(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,Wt.newInvalidDocument(d)))});let l=xa();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&no(d.mutation,h,je.empty(),St.now()),Pc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Qe(r.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:CC(r.bundledQuery),readTime:Qe(r.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.overlays=new Mt(G.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=pr();return P.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const r=pr(),s=n.length+1,a=new G(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return P.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Mt((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=pr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=pr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return P.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new sC(n,i));let s=this.qr.get(n);s===void 0&&(s=at(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.sessionToken=he.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(){this.Qr=new Kt(Xt.$r),this.Ur=new Kt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new Xt(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new Xt(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new G(new yt([])),i=new Xt(n,t),r=new Xt(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new G(new yt([])),i=new Xt(n,t),r=new Xt(n,t+1);let s=at();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new Xt(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Xt{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return G.comparator(t.key,n.key)||st(t.Yr,n.Yr)}static Kr(t,n){return st(t.Yr,n.Yr)||G.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Xt.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new rC(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new Xt(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?Pm:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Xt(n,0),r=new Xt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Kt(st);return n.forEach(r=>{const s=new Xt(r,0),a=new Xt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;G.isDocumentKey(s)||(s=s.child(""));const a=new Xt(new G(s),0);let l=new Kt(st);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){ut(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,r=>{const s=new Xt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new Xt(n,0),r=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(t){this.ri=t,this.docs=function(){return new Mt(G.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(t,n){let i=Zn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Wt.newInvalidDocument(r))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=Zn();const a=n.path,l=new G(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||v2(_2(d),i)<=0||(r.has(d.key)||Pc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(t,n,i,r){F(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new GC(this)}getSize(t){return P.resolve(this.size)}}class GC extends PC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t){this.persistence=t,this.si=new Ur(n=>zm(n),jm),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.oi=0,this._i=new Fm,this.targetCount=0,this.ai=Gs.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Gs(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),P.waitFor(s).next(()=>r)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t,n){this.ui={},this.overlays={},this.ci=new Vc(0),this.li=!1,this.li=!0,this.hi=new BC,this.referenceDelegate=t(this),this.Pi=new FC(this),this.indexManager=new DC,this.remoteDocumentCache=function(r){return new HC(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new IC(n),this.Ii=new zC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new jC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new qC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){H("MemoryPersistence","Starting transaction:",t);const r=new QC(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class QC extends T2{constructor(t){super(),this.currentSequenceNumber=t}}class Qm{constructor(t){this.persistence=t,this.Ri=new Fm,this.Vi=null}static mi(t){return new Qm(t)}get fi(){if(this.Vi)return this.Vi;throw F(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const r=G.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,Q.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class ec{constructor(t,n){this.persistence=t,this.pi=new Ur(i=>b2(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=kC(this,n)}static mi(t,n){return new ec(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?P.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,Q.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=ou(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return P.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=at(),r=at();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ym(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return jR()?8:A2(ve())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new YC;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(Zr()<=rt.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Jr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(Zr()<=rt.DEBUG&&H("QueryEngine","Query:",Jr(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Zr()<=rt.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Jr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Tn(n))):P.resolve())}ys(t,n){if(w_(n))return P.resolve(null);let i=Tn(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=_d(n,null,"F"),i=Tn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=at(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,_d(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return w_(n)||r.isEqual(Q.min())?P.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?P.resolve(null):(Zr()<=rt.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Jr(n)),this.vs(t,a,n,y2(r,To)).next(l=>l))})}Ds(t,n){let i=new Kt(uA(t));return n.forEach((r,s)=>{Pc(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return Zr()<=rt.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Jr(n)),this.ps.getDocumentsMatchingQuery(t,n,Ki.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="LocalStore",$C=3e8;class XC{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Mt(st),this.xs=new Ur(s=>zm(s),jm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new LC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function ZC(e,t,n,i){return new XC(e,t,n,i)}async function kA(e,t){const n=J(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=at();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function JC(e,t){const n=J(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let _=P.resolve();return m.forEach(N=>{_=_.next(()=>d.getEntry(u,N)).next(M=>{const k=h.docVersions.get(N);ut(k!==null,48541),M.version.compareTo(k)<0&&(g.applyToRemoteDocument(M,h),M.isValidDocument()&&(M.setReadTime(h.commitVersion),d.addEntry(M)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=at();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function PA(e){const t=J(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function WC(e,t){const n=J(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=r.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,g)));let _=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(he.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(g,_),function(M,k,b){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=$C?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(s,_))});let u=Zn(),h=at();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(tD(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual(Q.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(g=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function tD(e,t,n){let i=at(),r=at();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=Zn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Q.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(Km,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function eD(e,t){const n=J(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Pm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function nD(e,t){const n=J(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,P.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Ci(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Ad(e,t,n){const i=J(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ia(a))throw a;H(Km,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function L_(e,t,n){const i=J(e);let r=Q.min(),s=at();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=J(u),m=g.xs.get(d);return m!==void 0?P.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,Tn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:Q.min(),n?s:at())).next(l=>(iD(i,H2(t),l),{documents:l,Qs:s})))}function iD(e,t,n){let i=e.Os.get(t)||Q.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class z_{constructor(){this.activeTargetIds=$2()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class rD{constructor(){this.Mo=new z_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new z_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="ConnectivityMonitor";class B_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(j_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H(j_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl=null;function Sd(){return Fl===null?Fl=function(){return 268435456+Math.round(2147483648*Math.random())}():Fl++,"0x"+Fl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af="RestConnection",aD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oD{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===$u?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=Sd(),l=this.zo(t,n.toUriEncodedString());H(af,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=Ws(h);return this.Jo(t,l,u,i,d).then(g=>(H(af,`Received RPC '${t}' ${a}: `,g),g),g=>{throw js(af,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ea}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=aD[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge="WebChannelConnection";class uD extends oD{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=Sd();return new Promise((l,u)=>{const h=new P0;h.setWithCredentials(!0),h.listenOnce(U0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case au.NO_ERROR:const g=h.getResponseJson();H(ge,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case au.TIMEOUT:H(ge,`RPC '${t}' ${a} timed out`),u(new j(x.DEADLINE_EXCEEDED,"Request time out"));break;case au.HTTP_ERROR:const m=h.getStatus();if(H(ge,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const N=_==null?void 0:_.error;if(N&&N.status&&N.message){const M=function(b){const E=b.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(E)>=0?E:x.UNKNOWN}(N.status);u(new j(M,N.message))}else u(new j(x.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new j(x.UNAVAILABLE,"Connection failed."));break;default:F(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(ge,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);H(ge,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=Sd(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=j0(),l=z0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");H(ge,`Creating RPC '${t}' stream ${r}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,_=!1;const N=new lD({Yo:k=>{_?H(ge,`Not sending because RPC '${t}' stream ${r} is closed:`,k):(m||(H(ge,`Opening RPC '${t}' stream ${r} transport.`),g.open(),m=!0),H(ge,`RPC '${t}' stream ${r} sending:`,k),g.send(k))},Zo:()=>g.close()}),M=(k,b,E)=>{k.listen(b,w=>{try{E(w)}catch(D){setTimeout(()=>{throw D},0)}})};return M(g,Ma.EventType.OPEN,()=>{_||(H(ge,`RPC '${t}' stream ${r} transport opened.`),N.o_())}),M(g,Ma.EventType.CLOSE,()=>{_||(_=!0,H(ge,`RPC '${t}' stream ${r} transport closed`),N.a_(),this.E_(g))}),M(g,Ma.EventType.ERROR,k=>{_||(_=!0,js(ge,`RPC '${t}' stream ${r} transport errored. Name:`,k.name,"Message:",k.message),N.a_(new j(x.UNAVAILABLE,"The operation could not be completed")))}),M(g,Ma.EventType.MESSAGE,k=>{var b;if(!_){const E=k.data[0];ut(!!E,16349);const w=E,D=(w==null?void 0:w.error)||((b=w[0])==null?void 0:b.error);if(D){H(ge,`RPC '${t}' stream ${r} received error:`,D);const L=D.status;let q=function(v){const T=Bt[v];if(T!==void 0)return AA(T)}(L),A=D.message;q===void 0&&(q=x.INTERNAL,A="Unknown error status: "+L+" with message "+D.message),_=!0,N.a_(new j(q,A)),g.close()}else H(ge,`RPC '${t}' stream ${r} received:`,E),N.u_(E)}}),M(l,L0.STAT_EVENT,k=>{k.stat===hd.PROXY?H(ge,`RPC '${t}' stream ${r} detected buffering proxy`):k.stat===hd.NOPROXY&&H(ge,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function of(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(e){return new dC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="PersistentStream";class UA{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $m(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Xn(n.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new j(x.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return H(q_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(H(q_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cD extends UA{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=yC(this.serializer,t),i=function(s){if(!("targetChange"in s))return Q.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Q.min():a.readTime?Qe(a.readTime):Q.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Td(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=pd(u)?{documents:vC(s,u)}:{query:EC(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=wA(s,a.resumeToken);const h=vd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Q.min())>0){l.readTime=Wu(s,a.snapshotVersion.toTimestamp());const h=vd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=AC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Td(this.serializer),n.removeTarget=t,this.q_(n)}}class hD extends UA{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ut(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ut(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ut(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=_C(t.writeResults,t.commitTime),i=Qe(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Td(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>DA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{}class dD extends fD{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new j(x.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,Ed(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(x.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Ed(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new j(x.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class mD{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="RemoteStore";class gD{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Lr(this)&&(H(Or,"Restarting streams for network reachability change."),await async function(u){const h=J(u);h.Ea.add(4),await Jo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await qc(h)}(this))})}),this.Ra=new mD(i,r)}}async function qc(e){if(Lr(e))for(const t of e.da)await t(!0)}async function Jo(e){for(const t of e.da)await t(!1)}function LA(e,t){const n=J(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Wm(n)?Jm(n):sa(n).O_()&&Zm(n,t))}function Xm(e,t){const n=J(e),i=sa(n);n.Ia.delete(t),i.O_()&&zA(n,t),n.Ia.size===0&&(i.O_()?i.L_():Lr(n)&&n.Ra.set("Unknown"))}function Zm(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Q.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}sa(e).Y_(t)}function zA(e,t){e.Va.Ue(t),sa(e).Z_(t)}function Jm(e){e.Va=new uC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),sa(e).start(),e.Ra.ua()}function Wm(e){return Lr(e)&&!sa(e).x_()&&e.Ia.size>0}function Lr(e){return J(e).Ea.size===0}function jA(e){e.Va=void 0}async function pD(e){e.Ra.set("Online")}async function yD(e){e.Ia.forEach((t,n)=>{Zm(e,t)})}async function _D(e,t){jA(e),Wm(e)?(e.Ra.ha(t),Jm(e)):e.Ra.set("Unknown")}async function vD(e,t,n){if(e.Ra.set("Online"),t instanceof bA&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){H(Or,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await nc(e,i)}else if(t instanceof cu?e.Va.Ze(t):t instanceof SA?e.Va.st(t):e.Va.tt(t),!n.isEqual(Q.min()))try{const i=await PA(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(he.EMPTY_BYTE_STRING,d.snapshotVersion)),zA(s,u);const g=new Ci(d.target,u,h,d.sequenceNumber);Zm(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){H(Or,"Failed to raise snapshot:",i),await nc(e,i)}}async function nc(e,t,n){if(!ia(t))throw t;e.Ea.add(1),await Jo(e),e.Ra.set("Offline"),n||(n=()=>PA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{H(Or,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await qc(e)})}function BA(e,t){return t().catch(n=>nc(e,n,t))}async function Hc(e){const t=J(e),n=Ji(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Pm;for(;ED(t);)try{const r=await eD(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,TD(t,r)}catch(r){await nc(t,r)}qA(t)&&HA(t)}function ED(e){return Lr(e)&&e.Ta.length<10}function TD(e,t){e.Ta.push(t);const n=Ji(e);n.O_()&&n.X_&&n.ea(t.mutations)}function qA(e){return Lr(e)&&!Ji(e).x_()&&e.Ta.length>0}function HA(e){Ji(e).start()}async function AD(e){Ji(e).ra()}async function SD(e){const t=Ji(e);for(const n of e.Ta)t.ea(n.mutations)}async function bD(e,t,n){const i=e.Ta.shift(),r=qm.from(i,t,n);await BA(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Hc(e)}async function wD(e,t){t&&Ji(e).X_&&await async function(i,r){if(function(a){return TA(a)&&a!==x.ABORTED}(r.code)){const s=i.Ta.shift();Ji(i).B_(),await BA(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Hc(i)}}(e,t),qA(e)&&HA(e)}async function H_(e,t){const n=J(e);n.asyncQueue.verifyOperationInProgress(),H(Or,"RemoteStore received new credentials");const i=Lr(n);n.Ea.add(3),await Jo(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await qc(n)}async function RD(e,t){const n=J(e);t?(n.Ea.delete(2),await qc(n)):t||(n.Ea.add(2),await Jo(n),n.Ra.set("Unknown"))}function sa(e){return e.ma||(e.ma=function(n,i,r){const s=J(n);return s.sa(),new cD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:pD.bind(null,e),t_:yD.bind(null,e),r_:_D.bind(null,e),H_:vD.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Wm(e)?Jm(e):e.Ra.set("Unknown")):(await e.ma.stop(),jA(e))})),e.ma}function Ji(e){return e.fa||(e.fa=function(n,i,r){const s=J(n);return s.sa(),new hD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:AD.bind(null,e),r_:wD.bind(null,e),ta:SD.bind(null,e),na:bD.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Hc(e)):(await e.fa.stop(),e.Ta.length>0&&(H(Or,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new tg(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(x.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(e,t){if(Xn("AsyncQueue",`${t}: ${e}`),ia(e))return new j(x.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{static emptySet(t){return new Ss(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||G.comparator(n.key,i.key):(n,i)=>G.comparator(n.key,i.key),this.keyedMap=xa(),this.sortedSet=new Mt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ss)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Ss;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(){this.ga=new Mt(G.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):F(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class Fs{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Fs(t,n,Ss.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&kc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class CD{constructor(){this.queries=F_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=J(n),s=r.queries;r.queries=F_(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new j(x.ABORTED,"Firestore shutting down"))}}function F_(){return new Ur(e=>lA(e),kc)}async function GA(e,t){const n=J(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new ID,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=eg(a,`Initialization of query '${Jr(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&ng(n)}async function FA(e,t){const n=J(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function DD(e,t){const n=J(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&ng(n)}function ND(e,t,n){const i=J(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function ng(e){e.Ca.forEach(t=>{t.next()})}var bd,Q_;(Q_=bd||(bd={})).Ma="default",Q_.Cache="cache";class QA{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Fs(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Fs.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==bd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(t){this.key=t}}class KA{constructor(t){this.key=t}}class OD{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=at(),this.mutatedKeys=at(),this.eu=uA(t),this.tu=new Ss(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new G_,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,g)=>{const m=r.get(d),_=Pc(this.query,g)?g:null,N=!!m&&this.mutatedKeys.has(m.key),M=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let k=!1;m&&_?m.data.isEqual(_.data)?N!==M&&(i.track({type:3,doc:_}),k=!0):this.su(m,_)||(i.track({type:2,doc:_}),k=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),k=!0):m&&!_&&(i.track({type:1,doc:m}),k=!0,(u||h)&&(l=!0)),k&&(_?(a=a.add(_),s=M?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(_,N){const M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return F(20277,{Rt:k})}};return M(_)-M(N)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new Fs(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new G_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=at(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new KA(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new YA(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=at();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Fs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ig="SyncEngine";class VD{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class MD{constructor(t){this.key=t,this.hu=!1}}class xD{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ur(l=>lA(l),kc),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(G.comparator),this.Au=new Map,this.Ru=new Fm,this.Vu={},this.mu=new Map,this.fu=Gs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kD(e,t,n=!0){const i=tS(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await $A(i,t,n,!0),r}async function PD(e,t){const n=tS(e);await $A(n,t,!0,!1)}async function $A(e,t,n,i){const r=await nD(e.localStore,Tn(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await UD(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&LA(e.remoteStore,r),l}async function UD(e,t,n,i,r){e.pu=(g,m,_)=>async function(M,k,b,E){let w=k.view.ru(b);w.Cs&&(w=await L_(M.localStore,k.query,!1).then(({documents:A})=>k.view.ru(A,w)));const D=E&&E.targetChanges.get(k.targetId),L=E&&E.targetMismatches.get(k.targetId)!=null,q=k.view.applyChanges(w,M.isPrimaryClient,D,L);return K_(M,k.targetId,q.au),q.snapshot}(e,g,m,_);const s=await L_(e.localStore,t,!0),a=new OD(t,s.Qs),l=a.ru(s.documents),u=Zo.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);K_(e,n,h.au);const d=new VD(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function LD(e,t,n){const i=J(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!kc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Ad(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Xm(i.remoteStore,r.targetId),wd(i,r.targetId)}).catch(na)):(wd(i,r.targetId),await Ad(i.localStore,r.targetId,!0))}async function zD(e,t){const n=J(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Xm(n.remoteStore,i.targetId))}async function jD(e,t,n){const i=YD(e);try{const r=await function(a,l){const u=J(a),h=St.now(),d=l.reduce((_,N)=>_.add(N.key),at());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let N=Zn(),M=at();return u.Ns.getEntries(_,d).next(k=>{N=k,N.forEach((b,E)=>{E.isValidDocument()||(M=M.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,N)).next(k=>{g=k;const b=[];for(const E of l){const w=iC(E,g.get(E.key).overlayedDocument);w!=null&&b.push(new rr(E.key,w,tA(w.value.mapValue),ue.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,b,l)}).next(k=>{m=k;const b=k.applyToLocalDocumentSet(g,M);return u.documentOverlayCache.saveOverlays(_,k.batchId,b)})}).then(()=>({batchId:m.batchId,changes:hA(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Mt(st)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await Wo(i,r.changes),await Hc(i.remoteStore)}catch(r){const s=eg(r,"Failed to persist write");n.reject(s)}}async function XA(e,t){const n=J(e);try{const i=await WC(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(ut(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?ut(a.hu,14607):r.removedDocuments.size>0&&(ut(a.hu,42227),a.hu=!1))}),await Wo(n,i,t)}catch(i){await na(i)}}function Y_(e,t,n){const i=J(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=J(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&ng(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function BD(e,t,n){const i=J(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Mt(G.comparator);a=a.insert(s,Wt.newNoDocument(s,Q.min()));const l=at().add(s),u=new jc(Q.min(),new Map,new Mt(st),a,l);await XA(i,u),i.du=i.du.remove(s),i.Au.delete(t),rg(i)}else await Ad(i.localStore,t,!1).then(()=>wd(i,t,n)).catch(na)}async function qD(e,t){const n=J(e),i=t.batch.batchId;try{const r=await JC(n.localStore,t);JA(n,i,null),ZA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Wo(n,r)}catch(r){await na(r)}}async function HD(e,t,n){const i=J(e);try{const r=await function(a,l){const u=J(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ut(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);JA(i,t,n),ZA(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Wo(i,r)}catch(r){await na(r)}}function ZA(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function JA(e,t,n){const i=J(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function wd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||WA(e,i)})}function WA(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Xm(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),rg(e))}function K_(e,t,n){for(const i of n)i instanceof YA?(e.Ru.addReference(i.key,t),GD(e,i)):i instanceof KA?(H(ig,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||WA(e,i.key)):F(19791,{wu:i})}function GD(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(H(ig,"New document in limbo: "+n),e.Eu.add(i),rg(e))}function rg(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new G(yt.fromString(t)),i=e.fu.next();e.Au.set(i,new MD(n)),e.du=e.du.insert(n,i),LA(e.remoteStore,new Ci(Tn(xc(n.path)),i,"TargetPurposeLimboResolution",Vc.ce))}}async function Wo(e,t,n){const i=J(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){r.push(h);const g=Ym.As(u.targetId,h);s.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=J(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,m=>P.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>P.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!ia(g))throw g;H(Km,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const _=d.Ms.get(m),N=_.snapshotVersion,M=_.withLastLimboFreeSnapshotVersion(N);d.Ms=d.Ms.insert(m,M)}}}(i.localStore,s))}async function FD(e,t){const n=J(e);if(!n.currentUser.isEqual(t)){H(ig,"User change. New user:",t.toKey());const i=await kA(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new j(x.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Wo(n,i.Ls)}}function QD(e,t){const n=J(e),i=n.Au.get(t);if(i&&i.hu)return at().add(i.key);{let r=at();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function tS(e){const t=J(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=XA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=QD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=BD.bind(null,t),t.Pu.H_=DD.bind(null,t.eventManager),t.Pu.yu=ND.bind(null,t.eventManager),t}function YD(e){const t=J(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=HD.bind(null,t),t}class ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Bc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return ZC(this.persistence,new KC,t.initialUser,this.serializer)}Cu(t){return new xA(Qm.mi,this.serializer)}Du(t){return new rD}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ic.provider={build:()=>new ic};class KD extends ic{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ut(this.persistence.referenceDelegate instanceof ec,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new MC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Oe.withCacheSize(this.cacheSizeBytes):Oe.DEFAULT;return new xA(i=>ec.mi(i,n),this.serializer)}}class Rd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Y_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=FD.bind(null,this.syncEngine),await RD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new CD}()}createDatastore(t){const n=Bc(t.databaseInfo.databaseId),i=function(s){return new uD(s)}(t.databaseInfo);return function(s,a,l,u){return new dD(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new gD(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Y_(this.syncEngine,n,0),function(){return B_.v()?new B_:new sD}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const g=new xD(r,s,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=J(r);H(Or,"RemoteStore shutting down."),s.Ea.add(5),await Jo(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Rd.provider={build:()=>new Rd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Xn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=J(r),l={documents:s.map(g=>tc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,yt.emptyPath(),l,s.length),h=new Map;u.forEach(g=>{const m=pC(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return s.forEach(g=>{const m=h.get(g.toString());ut(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new zc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=G.fromPath(i);this.mutations.push(new EA(r,this.precondition(r)))}),await async function(i,r){const s=J(i),a={writes:r.map(l=>DA(s.serializer,l))};await s.Go("Commit",s.serializer.databaseId,yt.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw F(50498,{Gu:t.constructor.name});n=Q.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new j(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Q.min())?ue.exists(!1):ue.updateTime(n):ue.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Q.min()))throw new j(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ue.updateTime(n)}return ue.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new $m(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new $D(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!$o(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!TA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="FirestoreClient";class ZD{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=pe.UNAUTHENTICATED,this.clientId=km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{H(Wi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(Wi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=eg(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function lf(e,t){e.asyncQueue.verifyOperationInProgress(),H(Wi,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await kA(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function $_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await JD(e);H(Wi,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>H_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>H_(t.remoteStore,r)),e._onlineComponents=t}async function JD(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(Wi,"Using user provided OfflineComponentProvider");try{await lf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===x.FAILED_PRECONDITION||r.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;js("Error using user provided cache. Falling back to memory cache: "+n),await lf(e,new ic)}}else H(Wi,"Using default OfflineComponentProvider"),await lf(e,new KD(void 0));return e._offlineComponents}async function sg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(Wi,"Using user provided OnlineComponentProvider"),await $_(e,e._uninitializedComponentsProvider._online)):(H(Wi,"Using default OnlineComponentProvider"),await $_(e,new Rd))),e._onlineComponents}function WD(e){return sg(e).then(t=>t.syncEngine)}function tN(e){return sg(e).then(t=>t.datastore)}async function Id(e){const t=await sg(e),n=t.eventManager;return n.onListen=kD.bind(null,t.syncEngine),n.onUnlisten=LD.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=PD.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=zD.bind(null,t.syncEngine),n}function eN(e,t,n={}){const i=new Gn;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new eS({next:m=>{d.Nu(),a.enqueueAndForget(()=>FA(s,g));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new j(x.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new j(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new QA(xc(l.path),d,{includeMetadataChanges:!0,qa:!0});return GA(s,g)}(await Id(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="firestore.googleapis.com",Z_=!0;class J_{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new j(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iS,this.ssl=Z_}else this.host=t.host,this.ssl=t.ssl??Z_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=MA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<OC)throw new j(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}p2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nS(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Gc{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new J_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new j(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new J_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new a2;switch(i.type){case"firstParty":return new c2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new j(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=X_.get(n);i&&(H("ComponentProvider","Removing Datastore"),X_.delete(n),i.terminate())}(this),Promise.resolve()}}function nN(e,t,n,i={}){var h;e=Fe(e,Gc);const r=Ws(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(I0(`https://${l}`),C0("Firestore",!0)),s.host!==iS&&s.host!==l&&js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!Cr(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=pe.MOCK_USER;else{d=OR(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new j(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new pe(m)}e._authCredentials=new o2(new q0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new zr(this.firestore,t,this._query)}}class Vt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Vt(this.firestore,t,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(Ko(n,Vt._jsonSchema))return new Vt(t,i||null,new G(yt.fromString(n.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Gt("string",Vt._jsonSchemaVersion),referencePath:Gt("string")};class Bi extends zr{constructor(t,n,i){super(t,n,xc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Vt(this.firestore,null,new G(t))}withConverter(t){return new Bi(this.firestore,t,this._path)}}function W_(e,t,...n){if(e=ne(e),H0("collection","path",t),e instanceof Gc){const i=yt.fromString(t,...n);return h_(i),new Bi(e,null,i)}{if(!(e instanceof Vt||e instanceof Bi))throw new j(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(yt.fromString(t,...n));return h_(i),new Bi(e.firestore,null,i)}}function vi(e,t,...n){if(e=ne(e),arguments.length===1&&(t=km.newId()),H0("doc","path",t),e instanceof Gc){const i=yt.fromString(t,...n);return c_(i),new Vt(e,null,new G(i))}{if(!(e instanceof Vt||e instanceof Bi))throw new j(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(yt.fromString(t,...n));return c_(i),new Vt(e.firestore,e instanceof Bi?e.converter:null,new G(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="AsyncQueue";class ev{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $m(this,"async_queue_retry"),this._c=()=>{const i=of();i&&H(tv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=of();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=of();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Gn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ia(t))throw t;H(tv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,Xn("INTERNAL UNHANDLED ERROR: ",nv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=tg.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&F(47125,{Pc:nv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function nv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class Jn extends Gc{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new ev,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ev(t),this._firestoreClient=void 0,await t}}}function iN(e,t){const n=typeof e=="object"?e:V0(),i=typeof e=="string"?e:$u,r=Mm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=DR("firestore");s&&nN(r,...s)}return r}function Fc(e){if(e._terminated)throw new j(x.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||rN(e),e._firestoreClient}function rN(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new I2(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,nS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new ZD(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ze(he.fromBase64String(t))}catch(n){throw new j(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ze(he.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ze._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ko(t,ze._jsonSchema))return ze.fromBase64String(t.bytes)}}ze._jsonSchemaVersion="firestore/bytes/1.0",ze._jsonSchema={type:Gt("string",ze._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new j(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new le(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new j(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new j(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return st(this._lat,t._lat)||st(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:An._jsonSchemaVersion}}static fromJSON(t){if(Ko(t,An._jsonSchema))return new An(t.latitude,t.longitude)}}An._jsonSchemaVersion="firestore/geoPoint/1.0",An._jsonSchema={type:Gt("string",An._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Sn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ko(t,Sn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Sn(t.vectorValues);throw new j(x.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sn._jsonSchemaVersion="firestore/vectorValue/1.0",Sn._jsonSchema={type:Gt("string",Sn._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=/^__.*__$/;class aN{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new rr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Xo(t,this.data,n,this.fieldTransforms)}}class rS{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new rr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function sS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw F(40011,{Ac:e})}}class ag{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new ag({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return rc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(sS(this.Ac)&&sN.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class oN{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Bc(t)}Cc(t,n,i,r=!1){return new ag({Ac:t,methodName:n,Dc:i,path:le.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function el(e){const t=e._freezeSettings(),n=Bc(e._databaseId);return new oN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function og(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);ug("Data must be an object, but it was:",a,i);const l=lS(i,a);let u,h;if(s.merge)u=new je(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=Cd(t,g,n);if(!a.contains(m))throw new j(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);cS(d,m)||d.push(m)}u=new je(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new aN(new be(l),u,h)}class Yc extends Qc{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Yc}}class lg extends Qc{_toFieldTransform(t){return new W2(t.path,new Ro)}isEqual(t){return t instanceof lg}}function aS(e,t,n,i){const r=e.Cc(1,t,n);ug("Data must be an object, but it was:",r,i);const s=[],a=be.empty();ir(i,(u,h)=>{const d=cg(t,u,n);h=ne(h);const g=r.yc(d);if(h instanceof Yc)s.push(d);else{const m=nl(h,g);m!=null&&(s.push(d),a.set(d,m))}});const l=new je(s);return new rS(a,l,r.fieldTransforms)}function oS(e,t,n,i,r,s){const a=e.Cc(1,t,n),l=[Cd(t,i,n)],u=[r];if(s.length%2!=0)throw new j(x.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(Cd(t,s[m])),u.push(s[m+1]);const h=[],d=be.empty();for(let m=l.length-1;m>=0;--m)if(!cS(h,l[m])){const _=l[m];let N=u[m];N=ne(N);const M=a.yc(_);if(N instanceof Yc)h.push(_);else{const k=nl(N,M);k!=null&&(h.push(_),d.set(_,k))}}const g=new je(h);return new rS(d,g,a.fieldTransforms)}function lN(e,t,n,i=!1){return nl(n,e.Cc(i?4:3,t))}function nl(e,t){if(uS(e=ne(e)))return ug("Unsupported field value:",t,e),lS(e,t);if(e instanceof Qc)return function(i,r){if(!sS(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=nl(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=ne(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return X2(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=St.fromDate(i);return{timestampValue:Wu(r.serializer,s)}}if(i instanceof St){const s=new St(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Wu(r.serializer,s)}}if(i instanceof An)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ze)return{bytesValue:wA(r.serializer,i._byteString)};if(i instanceof Vt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Gm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Sn)return function(a,l){return{mapValue:{fields:{[J0]:{stringValue:W0},[Xu]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Bm(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Oc(i)}`)}(e,t)}function lS(e,t){const n={};return Q0(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ir(e,(i,r)=>{const s=nl(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function uS(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof St||e instanceof An||e instanceof ze||e instanceof Vt||e instanceof Qc||e instanceof Sn)}function ug(e,t,n){if(!uS(n)||!G0(n)){const i=Oc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Cd(e,t,n){if((t=ne(t))instanceof tl)return t._internalPath;if(typeof t=="string")return cg(e,t);throw rc("Field path arguments must be of type string or ",e,!1,void 0,n)}const uN=new RegExp("[~\\*/\\[\\]]");function cg(e,t,n){if(t.search(uN)>=0)throw rc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new tl(...t.split("."))._internalPath}catch{throw rc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function rc(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new j(x.INVALID_ARGUMENT,l+e+u)}function cS(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new cN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(hg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cN extends sc{data(){return super.data()}}function hg(e,t){return typeof t=="string"?cg(e,t):t instanceof tl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new j(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fg{}class hS extends fg{}function fN(e,t,...n){let i=[];t instanceof fg&&i.push(t),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof mg).length,l=s.filter(u=>u instanceof dg).length;if(a>1||a>0&&l>0)throw new j(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class dg extends hS{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new dg(t,n,i)}_apply(t){const n=this._parse(t);return fS(t._query,n),new zr(t.firestore,t.converter,yd(t._query,n))}_parse(t){const n=el(t.firestore);return function(s,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){sv(g,d);const N=[];for(const M of g)N.push(rv(u,s,M));m={arrayValue:{values:N}}}else m=rv(u,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||sv(g,d),m=lN(l,a,g,d==="in"||d==="not-in");return Ht.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class mg extends fg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new mg(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:hn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)fS(a,u),a=yd(a,u)}(t._query,n),new zr(t.firestore,t.converter,yd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gg extends hS{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new gg(t,n)}_apply(t){const n=function(r,s,a){if(r.startAt!==null)throw new j(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new j(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wo(s,a)}(t._query,this._field,this._direction);return new zr(t.firestore,t.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new ra(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}}function dN(e,t="asc"){const n=t,i=hg("orderBy",e);return gg._create(i,n)}function rv(e,t,n){if(typeof(n=ne(n))=="string"){if(n==="")throw new j(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oA(t)&&n.indexOf("/")!==-1)throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(yt.fromString(n));if(!G.isDocumentKey(i))throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return v_(e,new G(i))}if(n instanceof Vt)return v_(e,n._key);throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Oc(n)}.`)}function sv(e,t){if(!Array.isArray(e)||e.length===0)throw new j(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function fS(e,t){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new j(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new j(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class dS{convertValue(t,n="none"){switch(Zi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return jt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Xi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw F(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return ir(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[Xu].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>jt(a.doubleValue));return new Sn(n)}convertGeoPoint(t){return new An(jt(t.latitude),jt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Mc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ao(t));default:return null}}convertTimestamp(t){const n=$i(t);return new St(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=yt.fromString(t);ut(VA(i),9688,{name:t});const r=new So(i.get(1),i.get(3)),s=new G(i.popFirst(5));return r.isEqual(n)||Xn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class mN extends dS{constructor(t){super(),this.firestore=t}convertBytes(t){return new ze(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}class ds{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class qi extends sc{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(hg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new j(x.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=qi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}qi._jsonSchemaVersion="firestore/documentSnapshot/1.0",qi._jsonSchema={type:Gt("string",qi._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class hu extends qi{data(t={}){return super.data(t)}}class bs{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new ds(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new hu(this._firestore,this._userDataWriter,i.key,i,new ds(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new hu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ds(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new hu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ds(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:gN(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new j(x.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=bs._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=km.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function gN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return F(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(e){e=Fe(e,Vt);const t=Fe(e.firestore,Jn);return eN(Fc(t),e._key).then(n=>gS(t,e,n))}bs._jsonSchemaVersion="firestore/querySnapshot/1.0",bs._jsonSchema={type:Gt("string",bs._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class yg extends dS{constructor(t){super(),this.firestore=t}convertBytes(t){return new ze(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function pN(e,t,n){e=Fe(e,Vt);const i=Fe(e.firestore,Jn),r=pg(e.converter,t,n);return Kc(i,[og(el(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,ue.none())])}function yN(e,t,n,...i){e=Fe(e,Vt);const r=Fe(e.firestore,Jn),s=el(r);let a;return a=typeof(t=ne(t))=="string"||t instanceof tl?oS(s,"updateDoc",e._key,t,n,i):aS(s,"updateDoc",e._key,t),Kc(r,[a.toMutation(e._key,ue.exists(!0))])}function _N(e){return Kc(Fe(e.firestore,Jn),[new zc(e._key,ue.none())])}function vN(e,t){const n=Fe(e.firestore,Jn),i=vi(e),r=pg(e.converter,t);return Kc(n,[og(el(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,ue.exists(!1))]).then(()=>i)}function av(e,...t){var u,h,d;e=ne(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||iv(t[i])||(n=t[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(iv(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let s,a,l;if(e instanceof Vt)a=Fe(e.firestore,Jn),l=xc(e._key.path),s={next:g=>{t[i]&&t[i](gS(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=Fe(e,zr);a=Fe(g.firestore,Jn),l=g._query;const m=new yg(a);s={next:_=>{t[i]&&t[i](new bs(a,m,g,_))},error:t[i+1],complete:t[i+2]},hN(e._query)}return function(m,_,N,M){const k=new eS(M),b=new QA(_,k,N);return m.asyncQueue.enqueueAndForget(async()=>GA(await Id(m),b)),()=>{k.Nu(),m.asyncQueue.enqueueAndForget(async()=>FA(await Id(m),b))}}(Fc(a),l,r,s)}function Kc(e,t){return function(i,r){const s=new Gn;return i.asyncQueue.enqueueAndForget(async()=>jD(await WD(i),r,s)),s.promise}(Fc(e),t)}function gS(e,t,n){const i=n.docs.get(t._key),r=new yg(e);return new qi(e,r,t._key,i,new ds(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN={maxAttempts:5};function Pa(e,t){if((e=ne(e)).firestore!==t)throw new j(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=el(t)}get(t){const n=Pa(t,this._firestore),i=new mN(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return F(24041);const s=r[0];if(s.isFoundDocument())return new sc(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new sc(this._firestore,i,n._key,null,n.converter);throw F(18433,{doc:s})})}set(t,n,i){const r=Pa(t,this._firestore),s=pg(r.converter,n,i),a=og(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(t,n,i,...r){const s=Pa(t,this._firestore);let a;return a=typeof(n=ne(n))=="string"||n instanceof tl?oS(this._dataReader,"Transaction.update",s._key,n,i,r):aS(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(t){const n=Pa(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN extends TN{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=Pa(t,this._firestore),i=new yg(this._firestore);return super.get(t).then(r=>new qi(this._firestore,i,n._key,r._document,new ds(!1,!1),n.converter))}}function SN(e,t,n){e=Fe(e,Jn);const i={...EN,...n};return function(s){if(s.maxAttempts<1)throw new j(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,l){const u=new Gn;return s.asyncQueue.enqueueAndForget(async()=>{const h=await tN(s);new XD(s.asyncQueue,h,l,a,u).ju()}),u.promise}(Fc(e),r=>t(new AN(e,r)),i)}function ov(){return new lg("serverTimestamp")}(function(t,n=!0){(function(r){ea=r})(ta),zs(new Dr("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new Jn(new l2(i.getProvider("auth-internal")),new h2(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new j(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new So(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),zi(a_,o_,t),zi(a_,o_,"esm2020")})();function pS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bN=pS,yS=new Qo("auth","Firebase",pS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new Om("@firebase/auth");function wN(e,...t){ac.logLevel<=rt.WARN&&ac.warn(`Auth (${ta}): ${e}`,...t)}function fu(e,...t){ac.logLevel<=rt.ERROR&&ac.error(`Auth (${ta}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(e,...t){throw _g(e,...t)}function bn(e,...t){return _g(e,...t)}function _S(e,t,n){const i={...bN(),[t]:n};return new Qo("auth","Firebase",i).create(t,{appName:e.name})}function Hi(e){return _S(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _g(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return yS.create(e,...t)}function X(e,t,...n){if(!e)throw _g(t,...n)}function jn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw fu(t),new Error(t)}function ti(e,t){e||jn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function RN(){return lv()==="http:"||lv()==="https:"}function lv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RN()||UR()||"connection"in navigator)?navigator.onLine:!0}function CN(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(t,n){this.shortDelay=t,this.longDelay=n,ti(n>t,"Short delay should be less than long delay!"),this.isMobile=xR()||LR()}get(){return IN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(e,t){ti(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ON=new il(3e4,6e4);function $c(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function aa(e,t,n,i,r={}){return ES(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=Yo({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return PR()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&Ws(e.emulatorConfig.host)&&(h.credentials="include"),vS.fetch()(await AS(e,e.config.apiHost,n,l),h)})}async function ES(e,t,n){e._canInitEmulator=!1;const i={...DN,...t};try{const r=new VN(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Ql(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ql(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Ql(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw Ql(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw _S(e,d,h);Wn(e,d)}}catch(r){if(r instanceof ni)throw r;Wn(e,"network-request-failed",{message:String(r)})}}async function TS(e,t,n,i,r={}){const s=await aa(e,t,n,i,r);return"mfaPendingCredential"in s&&Wn(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function AS(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?vg(e.config,r):`${e.config.apiScheme}://${r}`;return NN.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class VN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(bn(this.auth,"network-request-failed")),ON.get())})}}function Ql(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=bn(e,t,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(e,t){return aa(e,"POST","/v1/accounts:delete",t)}async function oc(e,t){return aa(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function xN(e,t=!1){const n=ne(e),i=await n.getIdToken(t),r=Eg(i);X(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ro(uf(r.auth_time)),issuedAtTime:ro(uf(r.iat)),expirationTime:ro(uf(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function uf(e){return Number(e)*1e3}function Eg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return fu("JWT malformed, contained fewer than 3 sections"),null;try{const r=S0(n);return r?JSON.parse(r):(fu("Failed to decode base64 JWT payload"),null)}catch(r){return fu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function uv(e){const t=Eg(e);return X(t,"internal-error"),X(typeof t.exp<"u","internal-error"),X(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof ni&&kN(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function kN({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ro(this.lastLoginAt),this.creationTime=ro(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(e){var g;const t=e.auth,n=await e.getIdToken(),i=await Do(e,oc(t,{idToken:n}));X(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(g=r.providerUserInfo)!=null&&g.length?SS(r.providerUserInfo):[],a=LN(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Nd(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function UN(e){const t=ne(e);await lc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function LN(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function SS(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(e,t){const n=await ES(e,{},async()=>{const i=Yo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await AS(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&Ws(e.emulatorConfig.host)&&(u.credentials="include"),vS.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jN(e,t){return aa(e,"POST","/v2/accounts:revokeToken",$c(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){X(t.idToken,"internal-error"),X(typeof t.idToken<"u","internal-error"),X(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):uv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){X(t.length!==0,"internal-error");const n=uv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await zN(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new ws;return i&&(X(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(X(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(X(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ws,this.toJSON())}_performRefresh(){return jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(e,t){X(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class un{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new PN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Nd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Do(this,this.stsTokenManager.getToken(this.auth,t));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return xN(this,t)}reload(){return UN(this)}_assign(t){this!==t&&(X(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new un({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await lc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ln(this.auth.app))return Promise.reject(Hi(this.auth));const t=await this.getIdToken();return await Do(this,MN(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:_,providerData:N,stsTokenManager:M}=n;X(g&&M,t,"internal-error");const k=ws.fromJSON(this.name,M);X(typeof g=="string",t,"internal-error"),hi(i,t.name),hi(r,t.name),X(typeof m=="boolean",t,"internal-error"),X(typeof _=="boolean",t,"internal-error"),hi(s,t.name),hi(a,t.name),hi(l,t.name),hi(u,t.name),hi(h,t.name),hi(d,t.name);const b=new un({uid:g,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:k,createdAt:h,lastLoginAt:d});return N&&Array.isArray(N)&&(b.providerData=N.map(E=>({...E}))),u&&(b._redirectEventId=u),b}static async _fromIdTokenResponse(t,n,i=!1){const r=new ws;r.updateFromServerResponse(n);const s=new un({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await lc(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];X(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?SS(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new ws;l.updateFromIdToken(i);const u=new un({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Nd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=new Map;function Bn(e){ti(e instanceof Function,"Expected a class definition");let t=cv.get(e);return t?(ti(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,cv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}bS.type="NONE";const hv=bS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(e,t,n){return`firebase:${e}:${t}:${n}`}class Rs{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=du(this.userKey,r.apiKey,s),this.fullPersistenceKey=du("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await oc(this.auth,{idToken:t}).catch(()=>{});return n?un._fromGetAccountInfoResponse(this.auth,n,t):null}return un._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Rs(Bn(hv),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||Bn(hv);const a=du(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await oc(t,{idToken:d}).catch(()=>{});if(!m)break;g=await un._fromGetAccountInfoResponse(t,m,d)}else g=un._fromJSON(t,d);h!==s&&(l=g),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Rs(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Rs(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(CS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(wS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(NS(t))return"Blackberry";if(OS(t))return"Webos";if(RS(t))return"Safari";if((t.includes("chrome/")||IS(t))&&!t.includes("edge/"))return"Chrome";if(DS(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function wS(e=ve()){return/firefox\//i.test(e)}function RS(e=ve()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function IS(e=ve()){return/crios\//i.test(e)}function CS(e=ve()){return/iemobile/i.test(e)}function DS(e=ve()){return/android/i.test(e)}function NS(e=ve()){return/blackberry/i.test(e)}function OS(e=ve()){return/webos/i.test(e)}function Tg(e=ve()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function BN(e=ve()){var t;return Tg(e)&&!!((t=window.navigator)!=null&&t.standalone)}function qN(){return zR()&&document.documentMode===10}function VS(e=ve()){return Tg(e)||DS(e)||OS(e)||NS(e)||/windows phone/i.test(e)||CS(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(e,t=[]){let n;switch(e){case"Browser":n=fv(ve());break;case"Worker":n=`${fv(ve())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ta}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(e,t={}){return aa(e,"GET","/v2/passwordPolicy",$c(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=6;class QN{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??FN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dv(this),this.idTokenSubscription=new dv(this),this.beforeStateQueue=new HN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Bn(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Rs.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await oc(this,{idToken:t}),i=await un._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(ln(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await lc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=CN()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ln(this.app))return Promise.reject(Hi(this));const n=t?ne(t):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&X(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ln(this.app)?Promise.reject(Hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ln(this.app)?Promise.reject(Hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await GN(this),n=new QN(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Qo("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await jN(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Bn(t)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Rs.create(this,[Bn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=MS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&wN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Xc(e){return ne(e)}class dv{constructor(t){this.auth=t,this.observer=null,this.addObserver=YR(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ag={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KN(e){Ag=e}function $N(e){return Ag.loadJS(e)}function XN(){return Ag.gapiScript}function ZN(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(e,t){const n=Mm(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Cr(s,t??{}))return r;Wn(r,"already-initialized")}return n.initialize({options:t})}function WN(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Bn);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function tO(e,t,n){const i=Xc(e);X(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=xS(t),{host:a,port:l}=eO(t),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){X(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),X(Cr(h,i.config.emulator)&&Cr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,Ws(a)?(I0(`${s}//${a}${u}`),C0("Auth",!0)):nO()}function xS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function eO(e){const t=xS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:mv(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:mv(a)}}}function mv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function nO(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return jn("not implemented")}_getIdTokenResponse(t){return jn("not implemented")}_linkToIdToken(t,n){return jn("not implemented")}_getReauthenticationResolver(t){return jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Is(e,t){return TS(e,"POST","/v1/accounts:signInWithIdp",$c(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="http://localhost";class Vr extends kS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Vr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new Vr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Is(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Is(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Is(t,n)}buildRequest(){const t={requestUri:iO,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Yo(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends PS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends rl{constructor(){super("facebook.com")}static credential(t){return Vr._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ei.credentialFromTaggedObject(t)}static credentialFromError(t){return Ei.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ei.credential(t.oauthAccessToken)}catch{return null}}}Ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends rl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Vr._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ti.credentialFromTaggedObject(t)}static credentialFromError(t){return Ti.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Ti.credential(n,i)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends rl{constructor(){super("github.com")}static credential(t){return Vr._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ai.credentialFromTaggedObject(t)}static credentialFromError(t){return Ai.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ai.credential(t.oauthAccessToken)}catch{return null}}}Ai.GITHUB_SIGN_IN_METHOD="github.com";Ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends rl{constructor(){super("twitter.com")}static credential(t,n){return Vr._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Si.credentialFromTaggedObject(t)}static credentialFromError(t){return Si.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Si.credential(n,i)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(e,t){return TS(e,"POST","/v1/accounts:signUp",$c(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await un._fromIdTokenResponse(t,i,r),a=gv(i);return new tr({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=gv(i);return new tr({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function gv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(e){var r;if(ln(e.app))return Promise.reject(Hi(e));const t=Xc(e);if(await t._initializationPromise,(r=t.currentUser)!=null&&r.isAnonymous)return new tr({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await rO(t,{returnSecureToken:!0}),i=await tr._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends ni{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,uc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new uc(t,n,i,r)}}function US(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?uc._fromErrorAndOperation(e,s,t,i):s})}async function aO(e,t,n=!1){const i=await Do(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return tr._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oO(e,t,n=!1){const{auth:i}=e;if(ln(i.app))return Promise.reject(Hi(i));const r="reauthenticate";try{const s=await Do(e,US(i,r,t,e),n);X(s.idToken,i,"internal-error");const a=Eg(s.idToken);X(a,i,"internal-error");const{sub:l}=a;return X(e.uid===l,i,"user-mismatch"),tr._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Wn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(e,t,n=!1){if(ln(e.app))return Promise.reject(Hi(e));const i="signIn",r=await US(e,i,t),s=await tr._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}function uO(e,t,n,i){return ne(e).onIdTokenChanged(t,n,i)}function cO(e,t,n){return ne(e).beforeAuthStateChanged(t,n)}const cc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cc,"1"),this.storage.removeItem(cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=1e3,fO=10;class zS extends LS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);qN()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,fO):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},hO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}zS.type="LOCAL";const dO=zS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS extends LS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}jS.type="SESSION";const BS=jS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new Zc(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await mO(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=Sg("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function pO(e){wn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function yO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _O(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function vO(){return qS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="firebaseLocalStorageDb",EO=1,hc="firebaseLocalStorage",GS="fbase_key";class sl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jc(e,t){return e.transaction([hc],t?"readwrite":"readonly").objectStore(hc)}function TO(){const e=indexedDB.deleteDatabase(HS);return new sl(e).toPromise()}function Od(){const e=indexedDB.open(HS,EO);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(hc,{keyPath:GS})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(hc)?t(i):(i.close(),await TO(),t(await Od()))})})}async function pv(e,t,n){const i=Jc(e,!0).put({[GS]:t,value:n});return new sl(i).toPromise()}async function AO(e,t){const n=Jc(e,!1).get(t),i=await new sl(n).toPromise();return i===void 0?null:i.value}function yv(e,t){const n=Jc(e,!0).delete(t);return new sl(n).toPromise()}const SO=800,bO=3;class FS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Od(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>bO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zc._getInstance(vO()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await yO(),!this.activeServiceWorker)return;this.sender=new gO(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||_O()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Od();return await pv(t,cc,"1"),await yv(t,cc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>pv(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>AO(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>yv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=Jc(r,!1).getAll();return new sl(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FS.type="LOCAL";const wO=FS;new il(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(e,t){return t?Bn(t):(X(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg extends kS{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Is(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Is(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Is(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function IO(e){return lO(e.auth,new bg(e),e.bypassAuthState)}function CO(e){const{auth:t,user:n}=e;return X(n,t,"internal-error"),oO(n,new bg(e),e.bypassAuthState)}async function DO(e){const{auth:t,user:n}=e;return X(n,t,"internal-error"),aO(n,new bg(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return IO;case"linkViaPopup":case"linkViaRedirect":return DO;case"reauthViaPopup":case"reauthViaRedirect":return CO;default:Wn(this.auth,"internal-error")}}resolve(t){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new il(2e3,1e4);class ms extends QS{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ms.currentPopupAction&&ms.currentPopupAction.cancel(),ms.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return X(t,this.auth,"internal-error"),t}async onExecution(){ti(this.filter.length===1,"Popup operations only handle one event");const t=Sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ms.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,NO.get())};t()}}ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="pendingRedirect",mu=new Map;class VO extends QS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=mu.get(this.auth._key());if(!t){try{const i=await MO(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}mu.set(this.auth._key(),t)}return this.bypassAuthState||mu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MO(e,t){const n=PO(t),i=kO(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function xO(e,t){mu.set(e._key(),t)}function kO(e){return Bn(e._redirectPersistence)}function PO(e){return du(OO,e.config.apiKey,e.name)}async function UO(e,t,n=!1){if(ln(e.app))return Promise.reject(Hi(e));const i=Xc(e),r=RO(i,t),a=await new VO(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=10*60*1e3;class zO{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!jO(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!YS(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(bn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=LO&&this.cachedEventUids.clear(),this.cachedEventUids.has(_v(t))}saveEventToCache(t){this.cachedEventUids.add(_v(t)),this.lastProcessedEventTime=Date.now()}}function _v(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function YS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function jO(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO(e,t={}){return aa(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HO=/^https?/;async function GO(e){if(e.config.emulator)return;const{authorizedDomains:t}=await BO(e);for(const n of t)try{if(FO(n))return}catch{}Wn(e,"unauthorized-domain")}function FO(e){const t=Dd(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!HO.test(n))return!1;if(qO.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=new il(3e4,6e4);function vv(){const e=wn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function YO(e){return new Promise((t,n)=>{var r,s,a;function i(){vv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vv(),n(bn(e,"network-request-failed"))},timeout:QO.get()})}if((s=(r=wn().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=wn().gapi)!=null&&a.load)i();else{const l=ZN("iframefcb");return wn()[l]=()=>{gapi.load?i():n(bn(e,"network-request-failed"))},$N(`${XN()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw gu=null,t})}let gu=null;function KO(e){return gu=gu||YO(e),gu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new il(5e3,15e3),XO="__/auth/iframe",ZO="emulator/auth/iframe",JO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t4(e){const t=e.config;X(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?vg(t,ZO):`https://${e.config.authDomain}/${XO}`,i={apiKey:t.apiKey,appName:e.name,v:ta},r=WO.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Yo(i).slice(1)}`}async function e4(e){const t=await KO(e),n=wn().gapi;return X(n,e,"internal-error"),t.open({where:document.body,url:t4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JO,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=bn(e,"network-request-failed"),l=wn().setTimeout(()=>{s(a)},$O.get());function u(){wn().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i4=500,r4=600,s4="_blank",a4="http://localhost";class Ev{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function o4(e,t,n,i=i4,r=r4){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...n4,width:i.toString(),height:r.toString(),top:s,left:a},h=ve().toLowerCase();n&&(l=IS(h)?s4:n),wS(h)&&(t=t||a4,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,N])=>`${m}${_}=${N},`,"");if(BN(h)&&l!=="_self")return l4(t||"",l),new Ev(null);const g=window.open(t||"",l,d);X(g,e,"popup-blocked");try{g.focus()}catch{}return new Ev(g)}function l4(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4="__/auth/handler",c4="emulator/auth/handler",h4=encodeURIComponent("fac");async function Tv(e,t,n,i,r,s){X(e.config.authDomain,e,"auth-domain-config-required"),X(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:ta,eventId:r};if(t instanceof PS){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",QR(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof rl){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${h4}=${encodeURIComponent(u)}`:"";return`${f4(e)}?${Yo(l).slice(1)}${h}`}function f4({config:e}){return e.emulator?vg(e,c4):`https://${e.authDomain}/${u4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="webStorageSupport";class d4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BS,this._completeRedirectFn=UO,this._overrideRedirectResult=xO}async _openPopup(t,n,i,r){var a;ti((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await Tv(t,n,i,Dd(),r);return o4(t,s,Sg())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await Tv(t,n,i,Dd(),r);return pO(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ti(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await e4(t),i=new zO(t);return n.register("authEvent",r=>(X(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(cf,{type:cf},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[cf];s!==void 0&&n(!!s),Wn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GO(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return VS()||RS()||Tg()}}const m4=d4;var Av="@firebase/auth",Sv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function y4(e){zs(new Dr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;X(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MS(e)},h=new YN(i,r,s,u);return WN(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),zs(new Dr("auth-internal",t=>{const n=Xc(t.getProvider("auth").getImmediate());return(i=>new g4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zi(Av,Sv,p4(e)),zi(Av,Sv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=5*60,v4=R0("authIdTokenMaxAge")||_4;let bv=null;const E4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>v4)return;const r=n==null?void 0:n.token;bv!==r&&(bv=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function T4(e=V0()){const t=Mm(e,"auth");if(t.isInitialized())return t.getImmediate();const n=JN(e,{popupRedirectResolver:m4,persistence:[wO,dO,BS]}),i=R0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=E4(s.toString());cO(n,a,()=>a(n.currentUser)),uO(n,l=>a(l))}}const r=b0("auth");return r&&tO(n,`http://${r}`),n}function A4(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}KN({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=bn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",A4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});y4("Browser");const S4={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},KS=O0(S4),mn=iN(KS),b4=T4(KS),w4=({className:e=""})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:O.jsx("path",{d:"m9 18 6-6-6-6"})}),$S=({className:e=""})=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[O.jsx("circle",{cx:"12",cy:"12",r:"4"}),O.jsx("path",{d:"M12 2v2"}),O.jsx("path",{d:"M12 20v2"}),O.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),O.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),O.jsx("path",{d:"M2 12h2"}),O.jsx("path",{d:"M20 12h2"}),O.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),O.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),XS=({className:e=""})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:O.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),R4=({className:e=""})=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[O.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),O.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),I4=({className:e=""})=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[O.jsx("path",{d:"M19 12H5"}),O.jsx("polyline",{points:"12 19 5 12 12 5"})]}),C4=({className:e=""})=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 ${e}`,children:[O.jsx("circle",{cx:"11",cy:"11",r:"8"}),O.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),D4=({className:e=""})=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[O.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),O.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),ZS=({className:e="",filled:t=!1})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:O.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),N4=({className:e=""})=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[O.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),O.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),O4=({theme:e})=>{const t=Gi[e];return O.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.bg}`,children:[O.jsx(ZS,{className:"animate-pulse-heart text-pink-400",filled:!0}),O.jsx("p",{className:`mt-4 text-lg ${t.text} opacity-70`,children:"Загрузка новелл..."})]})},Gi={light:{bg:"bg-stone-100",text:"text-stone-800",componentBg:"bg-white",componentText:"text-stone-700",border:"border-stone-200",searchBg:"bg-white",searchPlaceholder:"placeholder-stone-400",searchRing:"focus:ring-pink-400",tgBg:"#f8f7f5",tgHeader:"#FFFFFF",accent:"pink-500",accentHover:"pink-400",commentBg:"bg-stone-50",commentText:"text-stone-800"},dark:{bg:"bg-gray-900",text:"text-gray-100",componentBg:"bg-gray-800",componentText:"text-gray-200",border:"border-gray-700",searchBg:"bg-gray-800",searchPlaceholder:"placeholder-gray-500",searchRing:"focus:ring-pink-500",tgBg:"#111827",tgHeader:"#1f2937",accent:"pink-500",accentHover:"pink-400",commentBg:"bg-gray-800",commentText:"text-gray-100"}},V4=({onBack:e,onHome:t,isReader:n=!1,onTextSizeChange:i,onThemeChange:r,theme:s,onFontChange:a,currentFont:l})=>{const[u,h]=K.useState(!1),d=Gi[s],g=[{name:"Montserrat",class:"font-sans"},{name:"Arial",class:"font-body"}];return O.jsxs(O.Fragment,{children:[O.jsx("button",{onClick:()=>h(!0),className:`fixed top-4 right-4 z-20 w-12 h-12 rounded-full ${d.componentBg} ${d.border} border text-lg shadow-lg flex items-center justify-center ${d.text}`,children:"☰"}),u&&O.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-30",onClick:()=>h(!1),children:O.jsxs("div",{className:`fixed top-0 left-0 right-0 p-4 ${d.componentBg} shadow-lg rounded-b-2xl animate-fade-in-down ${d.text}`,onClick:m=>m.stopPropagation(),children:[O.jsxs("div",{className:"flex justify-between items-center mb-4",children:[O.jsx("h3",{className:"font-bold text-lg",children:"Настройки"}),O.jsx("button",{onClick:()=>h(!1),className:"font-bold text-2xl",children:"×"})]}),n&&O.jsxs("div",{className:"space-y-3",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{children:"Размер текста"}),O.jsxs("div",{className:`w-28 h-12 rounded-full ${d.bg} flex items-center justify-around`,children:[O.jsx("button",{onClick:()=>i(-2),className:"text-2xl font-bold",children:"-"}),O.jsx("button",{onClick:()=>i(2),className:"text-2xl font-bold",children:"+"})]})]}),O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{children:"Тема"}),O.jsx("button",{onClick:r,className:`w-12 h-12 rounded-full ${d.bg} flex items-center justify-center`,children:s==="dark"?O.jsx($S,{}):O.jsx(XS,{})})]}),O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{children:"Шрифт"}),O.jsx("select",{onChange:m=>a(m.target.value),value:l,className:`w-32 h-10 rounded-full ${d.bg} border ${d.border} ${d.text} px-2 py-1 focus:outline-none focus:ring-2 ${d.searchRing}`,children:g.map(m=>O.jsx("option",{value:m.class,children:m.name},m.name))})]})]}),O.jsxs("div",{className:"flex gap-3 mt-4",children:[e&&O.jsxs("button",{onClick:()=>{e(),h(!1)},className:`flex-1 py-3 rounded-lg ${d.bg} flex items-center justify-center gap-2`,children:[O.jsx(I4,{})," Назад"]}),t&&O.jsxs("button",{onClick:()=>{t(),h(!1)},className:`flex-1 py-3 rounded-lg ${d.bg} flex items-center justify-center gap-2`,children:[O.jsx(R4,{})," Главная"]})]})]})})]})},M4=({novels:e,onSelectNovel:t,theme:n,setTheme:i,genreFilter:r,onClearGenreFilter:s})=>{const a=Gi[n],[l,u]=K.useState(""),h=K.useMemo(()=>e.filter(d=>(!r||d.genres.includes(r))&&d.title.toLowerCase().includes(l.toLowerCase())),[e,l,r]);return!e.length&&!l?O.jsx("div",{className:`p-4 text-center ${a.text}`,children:"Загрузка библиотеки..."}):O.jsxs("div",{className:`p-4 ${a.text}`,children:[O.jsxs("div",{className:"flex justify-between items-center mb-4",children:[O.jsx("h1",{className:"text-3xl font-bold",children:"Библиотека"}),O.jsx("button",{onClick:()=>i(n==="dark"?"light":"dark"),className:`p-2 rounded-full ${a.componentBg} ${a.border} border`,children:n==="dark"?O.jsx($S,{}):O.jsx(XS,{})})]}),r&&O.jsxs("div",{className:`flex items-center justify-between p-3 mb-4 rounded-lg border ${a.border} ${a.componentBg}`,children:[O.jsxs("p",{className:"text-sm",children:[O.jsx("span",{className:"opacity-70",children:"Жанр:"}),O.jsx("strong",{className:"ml-2",children:r})]}),O.jsx("button",{onClick:s,className:`text-xs font-bold text-${a.accent} hover:underline`,children:"Сбросить"})]}),O.jsxs("div",{className:"relative mb-6",children:[O.jsx(C4,{className:a.searchPlaceholder}),O.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:l,onChange:d=>u(d.target.value),className:`w-full ${a.searchBg} ${a.border} border rounded-lg py-2 pl-10 pr-4 ${a.text} ${a.searchPlaceholder} focus:outline-none focus:ring-2 ${a.searchRing} transition-shadow duration-300`})]}),O.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4",children:h.map((d,g)=>O.jsxs("div",{onClick:()=>t(d),className:"cursor-pointer group relative animate-fade-in-down",style:{animationDelay:`${g*50}ms`},children:[O.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-pink-400 to-purple-500 rounded-lg blur-xl opacity-0 group-hover:opacity-70 transition duration-500"}),O.jsxs("div",{className:"relative",children:[O.jsx("img",{src:d.coverUrl,alt:d.title,className:`w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 ${a.border} border`}),O.jsx("h2",{className:`mt-2 font-semibold text-xs truncate ${a.text}`,children:d.title})]})]},d.id))})]})},x4=({novel:e,onSelectChapter:t,onGenreSelect:n,theme:i,subscription:r,botUsername:s,userId:a,chaptersCache:l,lastReadData:u})=>{const h=Gi[i],[d,g]=K.useState([]),[m,_]=K.useState(!0),[N,M]=K.useState(!1),[k,b]=K.useState(null),[E,w]=K.useState("newest"),D=r&&new Date(r.expires_at)>new Date,L=K.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);K.useEffect(()=>{l[e.id]?(g(l[e.id]),_(!1)):(_(!0),fetch(`./data/chapters/${e.id}.json`).then(v=>v.json()).then(v=>{g(v.chapters||[]),_(!1)}).catch(v=>{console.error(v),g([]),_(!1)}))},[e.id,l]);const q=K.useMemo(()=>{const v=[...d];return E==="newest"?v.reverse():d},[d,E]),A=v=>{!D&&v.isPaid?M(!0):t(v)},y=()=>{if(L){const v=d.find(T=>T.id===L);v&&t(v)}};return O.jsxs("div",{className:h.text,children:[O.jsxs("div",{className:"relative h-64",children:[O.jsx("img",{src:e.coverUrl,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),O.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${i==="dark"?"from-gray-900 via-gray-900/80":"from-stone-100 via-stone-100/80"} to-transparent`}),O.jsxs("div",{className:"absolute bottom-4 left-4",children:[O.jsx("h1",{className:"text-3xl font-bold font-sans text-pink-400",style:{textShadow:"1px 1px 3px rgba(0,0,0,0.5)"},children:e.title}),O.jsx("p",{className:"text-sm font-sans",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.5)"},children:e.author})]})]}),O.jsxs("div",{className:"p-4",children:[O.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(v=>O.jsx("button",{onClick:()=>n(v),className:`text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 ${i==="dark"?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:v},v))}),O.jsx("p",{className:`text-sm mb-6 ${i==="dark"?"text-gray-300":"text-stone-600"} font-body`,children:e.description}),L&&O.jsxs("button",{onClick:y,className:`w-full py-3 mb-4 rounded-lg bg-${h.accent} text-white font-bold transition-transform hover:scale-105`,children:["Продолжить чтение (Глава ",L,")"]}),O.jsxs("div",{className:"flex justify-between items-center mb-4",children:[O.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),O.jsx("button",{onClick:()=>w(v=>v==="newest"?"oldest":"newest"),className:`text-sm font-semibold text-${h.accent}`,children:E==="newest"?"Сначала новые":"Сначала старые"})]}),D&&O.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",new Date(r.expires_at).toLocaleDateString()]}),m?O.jsx("p",{className:h.text,children:"Загрузка глав..."}):O.jsx("div",{className:"flex flex-col gap-3",children:q.map(v=>{const T=!D&&v.isPaid;return O.jsxs("div",{onClick:()=>A(v),className:`p-4 ${h.componentBg} rounded-xl cursor-pointer transition-all duration-200 hover:border-${h.accentHover} border ${h.border} flex items-center justify-between shadow-sm hover:shadow-md ${T?"opacity-70":""}`,children:[L===v.id&&O.jsx("span",{className:`absolute left-2 text-xs text-${h.accent}`,children:"●"}),O.jsx("div",{children:O.jsx("p",{className:`font-semibold ${h.componentText}`,children:v.title})}),T?O.jsx(D4,{className:h.text}):O.jsx(w4,{className:h.text})]},v.id)})})]})]})},k4=({chapter:e,novel:t,theme:n,fontSize:i,userId:r,userName:s,currentFontClass:a})=>{const l=Gi[n],[u,h]=K.useState([]),[d,g]=K.useState(""),[m,_]=K.useState(null),[N,M]=K.useState(""),[k,b]=K.useState(0),[E,w]=K.useState(!1),D=K.useMemo(()=>vi(mn,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);K.useEffect(()=>{const T=av(D,S=>{var wt;b(((wt=S.data())==null?void 0:wt.likeCount)||0)}),R=fN(W_(mn,`chapters_metadata/${t.id}_${e.id}/comments`),dN("timestamp","asc")),I=av(R,S=>{const wt=S.docs.map(ie=>({id:ie.id,...ie.data()}));h(wt)});if(r&&r!=="guest_user"){const S=vi(mn,`chapters_metadata/${t.id}_${e.id}/likes`,r);mS(S).then(wt=>w(wt.exists()))}return()=>{T(),I()}},[D,t.id,e.id,r]);const L=async T=>{if(T.preventDefault(),!d.trim()||!r||r==="guest_user")return;const R=W_(mn,`chapters_metadata/${t.id}_${e.id}/comments`);await vN(R,{userId:r,userName:s||"Аноним",text:d,timestamp:ov()}),g("")},q=T=>{_(T.id),M(T.text)},A=async T=>{if(!N.trim())return;const R=vi(mn,`chapters_metadata/${t.id}_${e.id}/comments`,T);await yN(R,{text:N}),_(null),M("")},y=async T=>{const R=vi(mn,`chapters_metadata/${t.id}_${e.id}/comments`,T);await _N(R)},v=async()=>{if(!r||r==="guest_user")return;const T=vi(mn,`chapters_metadata/${t.id}_${e.id}/likes`,r);await SN(mn,async R=>{var ie;const I=await R.get(T),wt=((ie=(await R.get(D)).data())==null?void 0:ie.likeCount)||0;I.exists()?(R.delete(T),R.set(D,{likeCount:Math.max(0,wt-1)},{merge:!0}),w(!1)):(R.set(T,{timestamp:ov()}),R.set(D,{likeCount:wt+1},{merge:!0}),w(!0))})};return O.jsx("div",{className:`min-h-screen transition-colors duration-300 ${l.bg}`,children:O.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[O.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 text-center font-sans text-pink-400",children:t.title}),O.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:e.title}),O.jsx("div",{className:`whitespace-pre-wrap leading-relaxed ${l.text} ${a}`,style:{fontSize:`${i}px`},children:e.content}),O.jsxs("div",{className:"mt-12 border-t pt-8",children:[O.jsx("div",{className:"flex items-center gap-4 mb-8",children:O.jsxs("button",{onClick:v,className:`flex items-center gap-2 text-${l.accentHover} transition-transform hover:scale-110`,children:[O.jsx(ZS,{filled:E,className:E?`text-${l.accent}`:""}),O.jsx("span",{className:"font-bold text-lg",children:k})]})}),O.jsx("h3",{className:`text-2xl font-bold mb-4 ${l.text}`,children:"Комментарии"}),O.jsxs("div",{className:"space-y-4 mb-6",children:[u.map(T=>O.jsxs("div",{className:`p-3 rounded-lg ${l.commentBg}`,children:[O.jsx("p",{className:`font-bold text-sm ${l.commentText}`,children:T.userName}),m===T.id?O.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[O.jsx("input",{type:"text",value:N,onChange:R=>M(R.target.value),className:`w-full ${l.searchBg} ${l.border} border rounded-lg py-1 px-2 ${l.commentText}`}),O.jsx("button",{onClick:()=>A(T.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),O.jsx("button",{onClick:()=>_(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):O.jsx("p",{className:`text-md mt-1 ${l.commentText}`,children:T.text}),(r===T.userId||r==="417641827")&&O.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[O.jsx("button",{onClick:()=>q(T),className:"text-xs text-gray-500",children:"Редактировать"}),O.jsx("button",{onClick:()=>y(T.id),className:"text-xs text-red-500",children:"Удалить"})]})]},T.id)),u.length===0&&O.jsx("p",{className:`opacity-70 ${l.text}`,children:"Комментариев пока нет. Будьте первым!"})]}),O.jsxs("form",{onSubmit:L,className:"flex items-center gap-2",children:[O.jsx("input",{type:"text",value:d,onChange:T=>g(T.target.value),placeholder:"Написать комментарий...",className:`w-full ${l.searchBg} ${l.border} border rounded-lg py-2 px-4 ${l.commentText} ${l.searchPlaceholder} focus:outline-none focus:ring-2 ${l.searchRing}`}),O.jsx("button",{type:"submit",className:`p-2 rounded-full bg-${l.accent} text-white`,children:O.jsx(N4,{})})]})]})]})})};function P4(){const[e,t]=K.useState("light"),[n,i]=K.useState(18),[r,s]=K.useState("font-body"),[a,l]=K.useState("list"),[u,h]=K.useState([]),[d,g]=K.useState(null),[m,_]=K.useState(null),[N,M]=K.useState(null),[k,b]=K.useState(null),[E,w]=K.useState(null),[D,L]=K.useState(null),[q,A]=K.useState(!0),[y,v]=K.useState({}),[T,R]=K.useState(null),I="tenebrisverbot",S=K.useCallback(async W=>{if(E&&E!=="guest_user"){const Nt=vi(mn,"users",E);try{await pN(Nt,W,{merge:!0})}catch(Ie){console.error("Не удалось обновить данные пользователя:",Ie)}}},[E]),wt=K.useCallback(W=>{t(W),S({settings:{theme:W,fontSize:n,fontClass:r}})},[n,r,S]),ie=K.useCallback(W=>{i(Nt=>{const Ie=Math.max(12,Math.min(32,Nt+W));return S({settings:{theme:e,fontSize:Ie,fontClass:r}}),Ie})},[e,r,S]),B=K.useCallback(W=>{s(W),S({settings:{theme:e,fontSize:n,fontClass:W}})},[e,n,S]);K.useEffect(()=>{(async()=>{var Nt,Ie,al,ol,sr,ar;try{const sn=(Nt=window.Telegram)==null?void 0:Nt.WebApp;let ri="guest_user";if(sn&&(sn.ready(),sn.expand(),ri=((ol=(al=(Ie=sn.initDataUnsafe)==null?void 0:Ie.user)==null?void 0:al.id)==null?void 0:ol.toString())||"guest_user",L(((ar=(sr=sn.initDataUnsafe)==null?void 0:sr.user)==null?void 0:ar.first_name)||null)),w(ri),await sO(b4),ri!=="guest_user"){const ll=vi(mn,"users",ri),ul=await mS(ll);if(ul.exists()){const si=ul.data();b(si.subscription||null),R(si.lastRead||null),si.settings&&(t(si.settings.theme||"light"),i(si.settings.fontSize||18),s(si.settings.fontClass||"font-body"))}}const jr=await fetch("./data/novels.json");if(!jr.ok)throw new Error("Failed to fetch novels");const oa=await jr.json();h(oa.novels)}catch(sn){console.error("Ошибка инициализации:",sn)}finally{A(!1)}})()},[]),K.useEffect(()=>{u.length>0&&u.forEach(W=>{fetch(`./data/chapters/${W.id}.json`).then(Nt=>Nt.json()).then(Nt=>v(Ie=>({...Ie,[W.id]:Nt.chapters||[]}))).catch(Nt=>console.error(`Не удалось предзагрузить главы для ${W.title}:`,Nt))})},[u]),K.useEffect(()=>{document.documentElement.className=e},[e]);const Y=K.useCallback(()=>{a==="reader"?l("details"):a==="details"&&(l("list"),M(null))},[a]),Z=K.useCallback(()=>{l("list"),M(null)},[]);K.useEffect(()=>{var Nt;const W=(Nt=window.Telegram)==null?void 0:Nt.WebApp;if(W)return W.onEvent("backButtonClicked",Y),a==="list"?W.BackButton.hide():W.BackButton.show(),()=>W.offEvent("backButtonClicked",Y)},[a,Y]),K.useEffect(()=>{var Nt;const W=(Nt=window.Telegram)==null?void 0:Nt.WebApp;W&&(W.setHeaderColor(Gi[e].tgHeader),W.setBackgroundColor(Gi[e].tgBg))},[e]);const _t=K.useCallback(async W=>{if(_(W),l("reader"),E&&E!=="guest_user"&&d){const Nt={...T||{},[d.id]:{novelId:d.id,chapterId:W.id,timestamp:new Date().toISOString()}};R(Nt),await S({lastRead:Nt})}},[E,d,T,S]),Dt=W=>{g(W),l("details")},ii=W=>{M(W),l("list")},Ee=()=>{M(null)};if(q)return O.jsx(O4,{theme:e});const xt=()=>{switch(a){case"details":return O.jsx(x4,{novel:d,onSelectChapter:_t,onGenreSelect:ii,theme:e,subscription:k,botUsername:I,userId:E,chaptersCache:y,lastReadData:T});case"reader":return O.jsx(k4,{chapter:m,novel:d,theme:e,fontSize:n,userId:E,userName:D,currentFontClass:r});case"list":default:return O.jsx(M4,{novels:u,onSelectNovel:Dt,theme:e,setTheme:wt,genreFilter:N,onClearGenreFilter:Ee})}},rn=Gi[e];return O.jsxs("main",{className:`${rn.bg} min-h-screen font-sans`,children:[xt(),O.jsx(V4,{onBack:a!=="list"?Y:null,onHome:a!=="list"?Z:null,isReader:a==="reader",onTextSizeChange:ie,onThemeChange:()=>wt(e==="dark"?"light":"dark"),onFontChange:B,currentFont:r,theme:e})]})}ER.createRoot(document.getElementById("root")).render(O.jsx(K.StrictMode,{children:O.jsx(P4,{})}));
