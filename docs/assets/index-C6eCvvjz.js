(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Sv={exports:{}},uc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R1=Symbol.for("react.transitional.element"),I1=Symbol.for("react.fragment");function bv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:R1,type:e,key:i,ref:t!==void 0?t:null,props:n}}uc.Fragment=I1;uc.jsx=bv;uc.jsxs=bv;Sv.exports=uc;var N=Sv.exports,wv={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nd=Symbol.for("react.transitional.element"),C1=Symbol.for("react.portal"),N1=Symbol.for("react.fragment"),D1=Symbol.for("react.strict_mode"),O1=Symbol.for("react.profiler"),x1=Symbol.for("react.consumer"),V1=Symbol.for("react.context"),M1=Symbol.for("react.forward_ref"),k1=Symbol.for("react.suspense"),P1=Symbol.for("react.memo"),Rv=Symbol.for("react.lazy"),Tp=Symbol.iterator;function U1(e){return e===null||typeof e!="object"?null:(e=Tp&&e[Tp]||e["@@iterator"],typeof e=="function"?e:null)}var Iv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cv=Object.assign,Nv={};function Gs(e,t,n){this.props=e,this.context=t,this.refs=Nv,this.updater=n||Iv}Gs.prototype.isReactComponent={};Gs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Dv(){}Dv.prototype=Gs.prototype;function Dd(e,t,n){this.props=e,this.context=t,this.refs=Nv,this.updater=n||Iv}var Od=Dd.prototype=new Dv;Od.constructor=Dd;Cv(Od,Gs.prototype);Od.isPureReactComponent=!0;var Ap=Array.isArray,Ct={H:null,A:null,T:null,S:null,V:null},Ov=Object.prototype.hasOwnProperty;function xd(e,t,n,i,r,s){return n=s.ref,{$$typeof:Nd,type:e,key:t,ref:n!==void 0?n:null,props:s}}function L1(e,t){return xd(e.type,t,void 0,void 0,void 0,e.props)}function Vd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nd}function z1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Sp=/\/+/g;function gh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?z1(""+e.key):t.toString(36)}function bp(){}function j1(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(bp,bp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Fr(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Nd:case C1:a=!0;break;case Rv:return a=e._init,Fr(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+gh(e,0):i,Ap(r)?(n="",a!=null&&(n=a.replace(Sp,"$&/")+"/"),Fr(r,t,n,"",function(h){return h})):r!=null&&(Vd(r)&&(r=L1(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(Sp,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(Ap(e))for(var u=0;u<e.length;u++)i=e[u],s=l+gh(i,u),a+=Fr(i,t,n,s,r);else if(u=U1(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+gh(i,u++),a+=Fr(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return Fr(j1(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Sl(e,t,n){if(e==null)return e;var i=[],r=0;return Fr(e,i,"","",function(s){return t.call(n,s,r++)}),i}function B1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wp=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function q1(){}et.Children={map:Sl,forEach:function(e,t,n){Sl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Sl(e,function(){t++}),t},toArray:function(e){return Sl(e,function(t){return t})||[]},only:function(e){if(!Vd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};et.Component=Gs;et.Fragment=N1;et.Profiler=O1;et.PureComponent=Dd;et.StrictMode=D1;et.Suspense=k1;et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ct;et.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Ct.H.useMemoCache(e)}};et.cache=function(e){return function(){return e.apply(null,arguments)}};et.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=Cv({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!Ov.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return xd(e.type,r,void 0,void 0,s,i)};et.createContext=function(e){return e={$$typeof:V1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:x1,_context:e},e};et.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)Ov.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return xd(e,s,void 0,void 0,null,r)};et.createRef=function(){return{current:null}};et.forwardRef=function(e){return{$$typeof:M1,render:e}};et.isValidElement=Vd;et.lazy=function(e){return{$$typeof:Rv,_payload:{_status:-1,_result:e},_init:B1}};et.memo=function(e,t){return{$$typeof:P1,type:e,compare:t===void 0?null:t}};et.startTransition=function(e){var t=Ct.T,n={};Ct.T=n;try{var i=e(),r=Ct.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(q1,wp)}catch(s){wp(s)}finally{Ct.T=t}};et.unstable_useCacheRefresh=function(){return Ct.H.useCacheRefresh()};et.use=function(e){return Ct.H.use(e)};et.useActionState=function(e,t,n){return Ct.H.useActionState(e,t,n)};et.useCallback=function(e,t){return Ct.H.useCallback(e,t)};et.useContext=function(e){return Ct.H.useContext(e)};et.useDebugValue=function(){};et.useDeferredValue=function(e,t){return Ct.H.useDeferredValue(e,t)};et.useEffect=function(e,t,n){var i=Ct.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};et.useId=function(){return Ct.H.useId()};et.useImperativeHandle=function(e,t,n){return Ct.H.useImperativeHandle(e,t,n)};et.useInsertionEffect=function(e,t){return Ct.H.useInsertionEffect(e,t)};et.useLayoutEffect=function(e,t){return Ct.H.useLayoutEffect(e,t)};et.useMemo=function(e,t){return Ct.H.useMemo(e,t)};et.useOptimistic=function(e,t){return Ct.H.useOptimistic(e,t)};et.useReducer=function(e,t,n){return Ct.H.useReducer(e,t,n)};et.useRef=function(e){return Ct.H.useRef(e)};et.useState=function(e){return Ct.H.useState(e)};et.useSyncExternalStore=function(e,t,n){return Ct.H.useSyncExternalStore(e,t,n)};et.useTransition=function(){return Ct.H.useTransition()};et.version="19.1.1";wv.exports=et;var X=wv.exports,xv={exports:{}},cc={},Vv={exports:{}},Mv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,J){var $=B.length;B.push(J);t:for(;0<$;){var vt=$-1>>>1,Dt=B[vt];if(0<r(Dt,J))B[vt]=J,B[$]=Dt,$=vt;else break t}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var J=B[0],$=B.pop();if($!==J){B[0]=$;t:for(var vt=0,Dt=B.length,si=Dt>>>1;vt<si;){var W=2*(vt+1)-1,tt=B[W],Ft=W+1,xe=B[Ft];if(0>r(tt,$))Ft<Dt&&0>r(xe,tt)?(B[vt]=xe,B[Ft]=$,vt=Ft):(B[vt]=tt,B[W]=$,vt=W);else if(Ft<Dt&&0>r(xe,$))B[vt]=xe,B[Ft]=$,vt=Ft;else break t}}return J}function r(B,J){var $=B.sortIndex-J.sortIndex;return $!==0?$:B.id-J.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,_=!1,O=!1,V=!1,M=!1,w=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(B){for(var J=n(h);J!==null;){if(J.callback===null)i(h);else if(J.startTime<=B)i(h),J.sortIndex=J.expirationTime,t(u,J);else break;J=n(h)}}function L(B){if(V=!1,D(B),!O)if(n(u)!==null)O=!0,q||(q=!0,I());else{var J=n(h);J!==null&&Oe(L,J.startTime-B)}}var q=!1,T=-1,y=5,v=-1;function A(){return M?!0:!(e.unstable_now()-v<y)}function b(){if(M=!1,q){var B=e.unstable_now();v=B;var J=!0;try{t:{O=!1,V&&(V=!1,E(T),T=-1),_=!0;var $=m;try{e:{for(D(B),g=n(u);g!==null&&!(g.expirationTime>B&&A());){var vt=g.callback;if(typeof vt=="function"){g.callback=null,m=g.priorityLevel;var Dt=vt(g.expirationTime<=B);if(B=e.unstable_now(),typeof Dt=="function"){g.callback=Dt,D(B),J=!0;break e}g===n(u)&&i(u),D(B)}else i(u);g=n(u)}if(g!==null)J=!0;else{var si=n(h);si!==null&&Oe(L,si.startTime-B),J=!1}}break t}finally{g=null,m=$,_=!1}J=void 0}}finally{J?I():q=!1}}}var I;if(typeof R=="function")I=function(){R(b)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,Rt=S.port2;S.port1.onmessage=b,I=function(){Rt.postMessage(null)}}else I=function(){w(b,0)};function Oe(B,J){T=w(function(){B(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(B){switch(m){case 1:case 2:case 3:var J=3;break;default:J=m}var $=m;m=J;try{return B()}finally{m=$}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(B,J){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var $=m;m=B;try{return J()}finally{m=$}},e.unstable_scheduleCallback=function(B,J,$){var vt=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?vt+$:vt):$=vt,B){case 1:var Dt=-1;break;case 2:Dt=250;break;case 5:Dt=1073741823;break;case 4:Dt=1e4;break;default:Dt=5e3}return Dt=$+Dt,B={id:d++,callback:J,priorityLevel:B,startTime:$,expirationTime:Dt,sortIndex:-1},$>vt?(B.sortIndex=$,t(h,B),n(u)===null&&B===n(h)&&(V?(E(T),T=-1):V=!0,Oe(L,$-vt))):(B.sortIndex=Dt,t(u,B),O||_||(O=!0,q||(q=!0,I()))),B},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(B){var J=m;return function(){var $=m;m=J;try{return B.apply(this,arguments)}finally{m=$}}}})(Mv);Vv.exports=Mv;var H1=Vv.exports,kv={exports:{}},be={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G1=X;function Pv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ui(){}var Se={d:{f:ui,r:function(){throw Error(Pv(522))},D:ui,C:ui,L:ui,m:ui,X:ui,S:ui,M:ui},p:0,findDOMNode:null},F1=Symbol.for("react.portal");function Q1(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F1,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Pa=G1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function hc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}be.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Se;be.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Pv(299));return Q1(e,t,null,n)};be.flushSync=function(e){var t=Pa.T,n=Se.p;try{if(Pa.T=null,Se.p=2,e)return e()}finally{Pa.T=t,Se.p=n,Se.d.f()}};be.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Se.d.C(e,t))};be.prefetchDNS=function(e){typeof e=="string"&&Se.d.D(e)};be.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=hc(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Se.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Se.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};be.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=hc(t.as,t.crossOrigin);Se.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Se.d.M(e)};be.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=hc(n,t.crossOrigin);Se.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};be.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=hc(t.as,t.crossOrigin);Se.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Se.d.m(e)};be.requestFormReset=function(e){Se.d.r(e)};be.unstable_batchedUpdates=function(e,t){return e(t)};be.useFormState=function(e,t,n){return Pa.H.useFormState(e,t,n)};be.useFormStatus=function(){return Pa.H.useHostTransitionStatus()};be.version="19.1.1";function Uv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Uv)}catch(e){console.error(e)}}Uv(),kv.exports=be;var Y1=kv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $t=H1,Lv=X,K1=Y1;function U(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function zv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function No(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function jv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rp(e){if(No(e)!==e)throw Error(U(188))}function $1(e){var t=e.alternate;if(!t){if(t=No(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Rp(r),e;if(s===i)return Rp(r),t;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function Bv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Bv(e),t!==null)return t;e=e.sibling}return null}var wt=Object.assign,X1=Symbol.for("react.element"),bl=Symbol.for("react.transitional.element"),Ca=Symbol.for("react.portal"),Wr=Symbol.for("react.fragment"),qv=Symbol.for("react.strict_mode"),lf=Symbol.for("react.profiler"),Z1=Symbol.for("react.provider"),Hv=Symbol.for("react.consumer"),Pn=Symbol.for("react.context"),Md=Symbol.for("react.forward_ref"),uf=Symbol.for("react.suspense"),cf=Symbol.for("react.suspense_list"),kd=Symbol.for("react.memo"),di=Symbol.for("react.lazy"),hf=Symbol.for("react.activity"),J1=Symbol.for("react.memo_cache_sentinel"),Ip=Symbol.iterator;function Ea(e){return e===null||typeof e!="object"?null:(e=Ip&&e[Ip]||e["@@iterator"],typeof e=="function"?e:null)}var W1=Symbol.for("react.client.reference");function ff(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===W1?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wr:return"Fragment";case lf:return"Profiler";case qv:return"StrictMode";case uf:return"Suspense";case cf:return"SuspenseList";case hf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Ca:return"Portal";case Pn:return(e.displayName||"Context")+".Provider";case Hv:return(e._context.displayName||"Context")+".Consumer";case Md:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kd:return t=e.displayName||null,t!==null?t:ff(e.type)||"Memo";case di:t=e._payload,e=e._init;try{return ff(e(t))}catch{}}return null}var Na=Array.isArray,Y=Lv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt=K1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gr={pending:!1,data:null,method:null,action:null},df=[],ts=-1;function bn(e){return{current:e}}function ee(e){0>ts||(e.current=df[ts],df[ts]=null,ts--)}function Nt(e,t){ts++,df[ts]=e.current,e.current=t}var gn=bn(null),ro=bn(null),Ci=bn(null),du=bn(null);function mu(e,t){switch(Nt(Ci,t),Nt(ro,e),Nt(gn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?xy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=xy(t),e=a0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ee(gn),Nt(gn,e)}function Rs(){ee(gn),ee(ro),ee(Ci)}function mf(e){e.memoizedState!==null&&Nt(du,e);var t=gn.current,n=a0(t,e.type);t!==n&&(Nt(ro,e),Nt(gn,n))}function gu(e){ro.current===e&&(ee(gn),ee(ro)),du.current===e&&(ee(du),go._currentValue=gr)}var gf=Object.prototype.hasOwnProperty,Pd=$t.unstable_scheduleCallback,ph=$t.unstable_cancelCallback,tb=$t.unstable_shouldYield,eb=$t.unstable_requestPaint,pn=$t.unstable_now,nb=$t.unstable_getCurrentPriorityLevel,Gv=$t.unstable_ImmediatePriority,Fv=$t.unstable_UserBlockingPriority,pu=$t.unstable_NormalPriority,ib=$t.unstable_LowPriority,Qv=$t.unstable_IdlePriority,rb=$t.log,sb=$t.unstable_setDisableYieldValue,Do=null,je=null;function Si(e){if(typeof rb=="function"&&sb(e),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(Do,e)}catch{}}var Be=Math.clz32?Math.clz32:lb,ab=Math.log,ob=Math.LN2;function lb(e){return e>>>=0,e===0?32:31-(ab(e)/ob|0)|0}var wl=256,Rl=4194304;function cr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function fc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=cr(i):(a&=l,a!==0?r=cr(a):n||(n=l&~e,n!==0&&(r=cr(n))))):(l=i&~s,l!==0?r=cr(l):a!==0?r=cr(a):n||(n=i&~e,n!==0&&(r=cr(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function Oo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ub(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yv(){var e=wl;return wl<<=1,!(wl&4194048)&&(wl=256),e}function Kv(){var e=Rl;return Rl<<=1,!(Rl&62914560)&&(Rl=4194304),e}function yh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function cb(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-Be(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&$v(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function $v(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Be(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function Xv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Be(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Ud(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ld(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Zv(){var e=dt.p;return e!==0?e:(e=window.event,e===void 0?32:p0(e.type))}function hb(e,t){var n=dt.p;try{return dt.p=e,t()}finally{dt.p=n}}var Wi=Math.random().toString(36).slice(2),pe="__reactFiber$"+Wi,Ne="__reactProps$"+Wi,Fs="__reactContainer$"+Wi,pf="__reactEvents$"+Wi,fb="__reactListeners$"+Wi,db="__reactHandles$"+Wi,Cp="__reactResources$"+Wi,Vo="__reactMarker$"+Wi;function zd(e){delete e[pe],delete e[Ne],delete e[pf],delete e[fb],delete e[db]}function es(e){var t=e[pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Fs]||n[pe]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ky(e);e!==null;){if(n=e[pe])return n;e=ky(e)}return t}e=n,n=e.parentNode}return null}function Qs(e){if(e=e[pe]||e[Fs]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Da(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(U(33))}function ds(e){var t=e[Cp];return t||(t=e[Cp]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Jt(e){e[Vo]=!0}var Jv=new Set,Wv={};function Or(e,t){Is(e,t),Is(e+"Capture",t)}function Is(e,t){for(Wv[e]=t,e=0;e<t.length;e++)Jv.add(t[e])}var mb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Np={},Dp={};function gb(e){return gf.call(Dp,e)?!0:gf.call(Np,e)?!1:mb.test(e)?Dp[e]=!0:(Np[e]=!0,!1)}function Gl(e,t,n){if(gb(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Il(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function On(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var _h,Op;function Qr(e){if(_h===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_h=t&&t[1]||"",Op=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_h+e+Op}var vh=!1;function Eh(e,t){if(!e||vh)return"";vh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var m=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){m=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){m=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{vh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Qr(n):""}function pb(e){switch(e.tag){case 26:case 27:case 5:return Qr(e.type);case 16:return Qr("Lazy");case 13:return Qr("Suspense");case 19:return Qr("SuspenseList");case 0:case 15:return Eh(e.type,!1);case 11:return Eh(e.type.render,!1);case 1:return Eh(e.type,!0);case 31:return Qr("Activity");default:return""}}function xp(e){try{var t="";do t+=pb(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Ke(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yb(e){var t=tE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yu(e){e._valueTracker||(e._valueTracker=yb(e))}function eE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=tE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function _u(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var _b=/[\n"\\]/g;function Ze(e){return e.replace(_b,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function yf(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ke(t)):e.value!==""+Ke(t)&&(e.value=""+Ke(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?_f(e,a,Ke(t)):n!=null?_f(e,a,Ke(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+Ke(l):e.removeAttribute("name")}function nE(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+Ke(n):"",t=t!=null?""+Ke(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function _f(e,t,n){t==="number"&&_u(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ms(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Ke(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function iE(e,t,n){if(t!=null&&(t=""+Ke(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Ke(n):""}function rE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(U(92));if(Na(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Ke(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Cs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var vb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||vb.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function sE(e,t,n){if(t!=null&&typeof t!="object")throw Error(U(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Vp(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&Vp(e,s,t[s])}function jd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fl(e){return Tb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var vf=null;function Bd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ns=null,gs=null;function Mp(e){var t=Qs(e);if(t&&(e=t.stateNode)){var n=e[Ne]||null;t:switch(e=t.stateNode,t.type){case"input":if(yf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ze(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Ne]||null;if(!r)throw Error(U(90));yf(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&eE(i)}break t;case"textarea":iE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&ms(e,!!n.multiple,t,!1)}}}var Th=!1;function aE(e,t,n){if(Th)return e(t,n);Th=!0;try{var i=e(t);return i}finally{if(Th=!1,(ns!==null||gs!==null)&&(Ac(),ns&&(t=ns,e=gs,gs=ns=null,Mp(t),e)))for(t=0;t<e.length;t++)Mp(e[t])}}function so(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Ne]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ef=!1;if(Yn)try{var Ta={};Object.defineProperty(Ta,"passive",{get:function(){Ef=!0}}),window.addEventListener("test",Ta,Ta),window.removeEventListener("test",Ta,Ta)}catch{Ef=!1}var bi=null,qd=null,Ql=null;function oE(){if(Ql)return Ql;var e,t=qd,n=t.length,i,r="value"in bi?bi.value:bi.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return Ql=r.slice(e,1<i?1-i:void 0)}function Yl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cl(){return!0}function kp(){return!1}function De(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Cl:kp,this.isPropagationStopped=kp,this}return wt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),t}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dc=De(xr),Mo=wt({},xr,{view:0,detail:0}),Ab=De(Mo),Ah,Sh,Aa,mc=wt({},Mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Aa&&(Aa&&e.type==="mousemove"?(Ah=e.screenX-Aa.screenX,Sh=e.screenY-Aa.screenY):Sh=Ah=0,Aa=e),Ah)},movementY:function(e){return"movementY"in e?e.movementY:Sh}}),Pp=De(mc),Sb=wt({},mc,{dataTransfer:0}),bb=De(Sb),wb=wt({},Mo,{relatedTarget:0}),bh=De(wb),Rb=wt({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ib=De(Rb),Cb=wt({},xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nb=De(Cb),Db=wt({},xr,{data:0}),Up=De(Db),Ob={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vb[e])?!!t[e]:!1}function Hd(){return Mb}var kb=wt({},Mo,{key:function(e){if(e.key){var t=Ob[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hd,charCode:function(e){return e.type==="keypress"?Yl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pb=De(kb),Ub=wt({},mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lp=De(Ub),Lb=wt({},Mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hd}),zb=De(Lb),jb=wt({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bb=De(jb),qb=wt({},mc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hb=De(qb),Gb=wt({},xr,{newState:0,oldState:0}),Fb=De(Gb),Qb=[9,13,27,32],Gd=Yn&&"CompositionEvent"in window,Ua=null;Yn&&"documentMode"in document&&(Ua=document.documentMode);var Yb=Yn&&"TextEvent"in window&&!Ua,lE=Yn&&(!Gd||Ua&&8<Ua&&11>=Ua),zp=" ",jp=!1;function uE(e,t){switch(e){case"keyup":return Qb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var is=!1;function Kb(e,t){switch(e){case"compositionend":return cE(t);case"keypress":return t.which!==32?null:(jp=!0,zp);case"textInput":return e=t.data,e===zp&&jp?null:e;default:return null}}function $b(e,t){if(is)return e==="compositionend"||!Gd&&uE(e,t)?(e=oE(),Ql=qd=bi=null,is=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lE&&t.locale!=="ko"?null:t.data;default:return null}}var Xb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xb[e.type]:t==="textarea"}function hE(e,t,n,i){ns?gs?gs.push(i):gs=[i]:ns=i,t=Pu(t,"onChange"),0<t.length&&(n=new dc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var La=null,ao=null;function Zb(e){i0(e,0)}function gc(e){var t=Da(e);if(eE(t))return e}function qp(e,t){if(e==="change")return t}var fE=!1;if(Yn){var wh;if(Yn){var Rh="oninput"in document;if(!Rh){var Hp=document.createElement("div");Hp.setAttribute("oninput","return;"),Rh=typeof Hp.oninput=="function"}wh=Rh}else wh=!1;fE=wh&&(!document.documentMode||9<document.documentMode)}function Gp(){La&&(La.detachEvent("onpropertychange",dE),ao=La=null)}function dE(e){if(e.propertyName==="value"&&gc(ao)){var t=[];hE(t,ao,e,Bd(e)),aE(Zb,t)}}function Jb(e,t,n){e==="focusin"?(Gp(),La=t,ao=n,La.attachEvent("onpropertychange",dE)):e==="focusout"&&Gp()}function Wb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gc(ao)}function tw(e,t){if(e==="click")return gc(t)}function ew(e,t){if(e==="input"||e==="change")return gc(t)}function nw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qe=typeof Object.is=="function"?Object.is:nw;function oo(e,t){if(Qe(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!gf.call(t,r)||!Qe(e[r],t[r]))return!1}return!0}function Fp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qp(e,t){var n=Fp(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Fp(n)}}function mE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?mE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=_u(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_u(e.document)}return t}function Fd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var iw=Yn&&"documentMode"in document&&11>=document.documentMode,rs=null,Tf=null,za=null,Af=!1;function Yp(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Af||rs==null||rs!==_u(i)||(i=rs,"selectionStart"in i&&Fd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),za&&oo(za,i)||(za=i,i=Pu(Tf,"onSelect"),0<i.length&&(t=new dc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=rs)))}function ur(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ss={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},Ih={},pE={};Yn&&(pE=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function Vr(e){if(Ih[e])return Ih[e];if(!ss[e])return e;var t=ss[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in pE)return Ih[e]=t[n];return e}var yE=Vr("animationend"),_E=Vr("animationiteration"),vE=Vr("animationstart"),rw=Vr("transitionrun"),sw=Vr("transitionstart"),aw=Vr("transitioncancel"),EE=Vr("transitionend"),TE=new Map,Sf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sf.push("scrollEnd");function cn(e,t){TE.set(e,t),Or(t,[e])}var Kp=new WeakMap;function Je(e,t){if(typeof e=="object"&&e!==null){var n=Kp.get(e);return n!==void 0?n:(t={value:e,source:t,stack:xp(t)},Kp.set(e,t),t)}return{value:e,source:t,stack:xp(t)}}var Ye=[],as=0,Qd=0;function pc(){for(var e=as,t=Qd=as=0;t<e;){var n=Ye[t];Ye[t++]=null;var i=Ye[t];Ye[t++]=null;var r=Ye[t];Ye[t++]=null;var s=Ye[t];if(Ye[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&AE(n,r,s)}}function yc(e,t,n,i){Ye[as++]=e,Ye[as++]=t,Ye[as++]=n,Ye[as++]=i,Qd|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Yd(e,t,n,i){return yc(e,t,n,i),vu(e)}function Ys(e,t){return yc(e,null,null,t),vu(e)}function AE(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-Be(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function vu(e){if(50<$a)throw $a=0,Gf=null,Error(U(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var os={};function ow(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ue(e,t,n,i){return new ow(e,t,n,i)}function Kd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Hn(e,t){var n=e.alternate;return n===null?(n=Ue(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function SE(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Kl(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")Kd(e)&&(a=1);else if(typeof e=="string")a=uR(e,n,gn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case hf:return e=Ue(31,n,t,r),e.elementType=hf,e.lanes=s,e;case Wr:return pr(n.children,r,s,t);case qv:a=8,r|=24;break;case lf:return e=Ue(12,n,t,r|2),e.elementType=lf,e.lanes=s,e;case uf:return e=Ue(13,n,t,r),e.elementType=uf,e.lanes=s,e;case cf:return e=Ue(19,n,t,r),e.elementType=cf,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Z1:case Pn:a=10;break t;case Hv:a=9;break t;case Md:a=11;break t;case kd:a=14;break t;case di:a=16,i=null;break t}a=29,n=Error(U(130,e===null?"null":typeof e,"")),i=null}return t=Ue(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function pr(e,t,n,i){return e=Ue(7,e,i,t),e.lanes=n,e}function Ch(e,t,n){return e=Ue(6,e,null,t),e.lanes=n,e}function Nh(e,t,n){return t=Ue(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ls=[],us=0,Eu=null,Tu=0,$e=[],Xe=0,yr=null,Un=1,Ln="";function hr(e,t){ls[us++]=Tu,ls[us++]=Eu,Eu=e,Tu=t}function bE(e,t,n){$e[Xe++]=Un,$e[Xe++]=Ln,$e[Xe++]=yr,yr=e;var i=Un;e=Ln;var r=32-Be(i)-1;i&=~(1<<r),n+=1;var s=32-Be(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Un=1<<32-Be(t)+r|n<<r|i,Ln=s+e}else Un=1<<s|n<<r|i,Ln=e}function $d(e){e.return!==null&&(hr(e,1),bE(e,1,0))}function Xd(e){for(;e===Eu;)Eu=ls[--us],ls[us]=null,Tu=ls[--us],ls[us]=null;for(;e===yr;)yr=$e[--Xe],$e[Xe]=null,Ln=$e[--Xe],$e[Xe]=null,Un=$e[--Xe],$e[Xe]=null}var Te=null,kt=null,ft=!1,_r=null,dn=!1,bf=Error(U(519));function Ar(e){var t=Error(U(418,""));throw lo(Je(t,e)),bf}function $p(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[pe]=e,t[Ne]=i,n){case"dialog":it("cancel",t),it("close",t);break;case"iframe":case"object":case"embed":it("load",t);break;case"video":case"audio":for(n=0;n<ho.length;n++)it(ho[n],t);break;case"source":it("error",t);break;case"img":case"image":case"link":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"input":it("invalid",t),nE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),yu(t);break;case"select":it("invalid",t);break;case"textarea":it("invalid",t),rE(t,i.value,i.defaultValue,i.children),yu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||s0(t.textContent,n)?(i.popover!=null&&(it("beforetoggle",t),it("toggle",t)),i.onScroll!=null&&it("scroll",t),i.onScrollEnd!=null&&it("scrollend",t),i.onClick!=null&&(t.onclick=wc),t=!0):t=!1,t||Ar(e)}function Xp(e){for(Te=e.return;Te;)switch(Te.tag){case 5:case 13:dn=!1;return;case 27:case 3:dn=!0;return;default:Te=Te.return}}function Sa(e){if(e!==Te)return!1;if(!ft)return Xp(e),ft=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Xf(e.type,e.memoizedProps)),n=!n),n&&kt&&Ar(e),Xp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){kt=ln(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}kt=null}}else t===27?(t=kt,tr(e.type)?(e=Wf,Wf=null,kt=e):kt=t):kt=Te?ln(e.stateNode.nextSibling):null;return!0}function ko(){kt=Te=null,ft=!1}function Zp(){var e=_r;return e!==null&&(Ie===null?Ie=e:Ie.push.apply(Ie,e),_r=null),e}function lo(e){_r===null?_r=[e]:_r.push(e)}var wf=bn(null),Mr=null,zn=null;function gi(e,t,n){Nt(wf,t._currentValue),t._currentValue=n}function Gn(e){e._currentValue=wf.current,ee(wf)}function Rf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function If(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Rf(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(U(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Rf(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Po(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(U(387));if(a=a.memoizedProps,a!==null){var l=r.type;Qe(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===du.current){if(a=r.alternate,a===null)throw Error(U(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(go):e=[go])}r=r.return}e!==null&&If(t,e,n,i),t.flags|=262144}function Au(e){for(e=e.firstContext;e!==null;){if(!Qe(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Sr(e){Mr=e,zn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ye(e){return wE(Mr,e)}function Nl(e,t){return Mr===null&&Sr(e),wE(e,t)}function wE(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},zn===null){if(e===null)throw Error(U(308));zn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else zn=zn.next=t;return n}var lw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},uw=$t.unstable_scheduleCallback,cw=$t.unstable_NormalPriority,Qt={$$typeof:Pn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zd(){return{controller:new lw,data:new Map,refCount:0}}function Uo(e){e.refCount--,e.refCount===0&&uw(cw,function(){e.controller.abort()})}var ja=null,Cf=0,Ns=0,ps=null;function hw(e,t){if(ja===null){var n=ja=[];Cf=0,Ns=Em(),ps={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Cf++,t.then(Jp,Jp),t}function Jp(){if(--Cf===0&&ja!==null){ps!==null&&(ps.status="fulfilled");var e=ja;ja=null,Ns=0,ps=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function fw(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var Wp=Y.S;Y.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&hw(e,t),Wp!==null&&Wp(e,t)};var vr=bn(null);function Jd(){var e=vr.current;return e!==null?e:At.pooledCache}function $l(e,t){t===null?Nt(vr,vr.current):Nt(vr,t.pool)}function RE(){var e=Jd();return e===null?null:{parent:Qt._currentValue,pool:e}}var Lo=Error(U(460)),IE=Error(U(474)),_c=Error(U(542)),Nf={then:function(){}};function ty(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Dl(){}function CE(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Dl,Dl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ny(e),e;default:if(typeof t.status=="string")t.then(Dl,Dl);else{if(e=At,e!==null&&100<e.shellSuspendCounter)throw Error(U(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ny(e),e}throw Ba=t,Lo}}var Ba=null;function ey(){if(Ba===null)throw Error(U(459));var e=Ba;return Ba=null,e}function ny(e){if(e===Lo||e===_c)throw Error(U(483))}var mi=!1;function Wd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Df(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ni(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Di(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,gt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=vu(e),AE(e,null,n),t}return yc(e,i,t,n),vu(e)}function qa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Xv(e,n)}}function Dh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Of=!1;function Ha(){if(Of){var e=ps;if(e!==null)throw e}}function Ga(e,t,n,i){Of=!1;var r=e.updateQueue;mi=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(ut&m)===m:(i&m)===m){m!==0&&m===Ns&&(Of=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var O=e,V=l;m=t;var M=n;switch(V.tag){case 1:if(O=V.payload,typeof O=="function"){g=O.call(M,g,m);break t}g=O;break t;case 3:O.flags=O.flags&-65537|128;case 0:if(O=V.payload,m=typeof O=="function"?O.call(M,g,m):O,m==null)break t;g=wt({},g,m);break t;case 2:mi=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=r.callbacks,_===null?r.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=g):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);d===null&&(u=g),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),Fi|=a,e.lanes=a,e.memoizedState=g}}function NE(e,t){if(typeof e!="function")throw Error(U(191,e));e.call(t)}function DE(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)NE(n[e],t)}var Ds=bn(null),Su=bn(0);function iy(e,t){e=Xn,Nt(Su,e),Nt(Ds,t),Xn=e|t.baseLanes}function xf(){Nt(Su,Xn),Nt(Ds,Ds.current)}function tm(){Xn=Su.current,ee(Ds),ee(Su)}var Hi=0,nt=null,yt=null,Bt=null,bu=!1,ys=!1,br=!1,wu=0,uo=0,_s=null,dw=0;function Ut(){throw Error(U(321))}function em(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qe(e[n],t[n]))return!1;return!0}function nm(e,t,n,i,r,s){return Hi=s,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Y.H=e===null||e.memoizedState===null?oT:lT,br=!1,s=n(i,r),br=!1,ys&&(s=xE(t,n,i,r)),OE(e),s}function OE(e){Y.H=Ru;var t=yt!==null&&yt.next!==null;if(Hi=0,Bt=yt=nt=null,bu=!1,uo=0,_s=null,t)throw Error(U(300));e===null||te||(e=e.dependencies,e!==null&&Au(e)&&(te=!0))}function xE(e,t,n,i){nt=e;var r=0;do{if(ys&&(_s=null),uo=0,ys=!1,25<=r)throw Error(U(301));if(r+=1,Bt=yt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Y.H=Ew,s=t(n,i)}while(ys);return s}function mw(){var e=Y.H,t=e.useState()[0];return t=typeof t.then=="function"?zo(t):t,e=e.useState()[0],(yt!==null?yt.memoizedState:null)!==e&&(nt.flags|=1024),t}function im(){var e=wu!==0;return wu=0,e}function rm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function sm(e){if(bu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}bu=!1}Hi=0,Bt=yt=nt=null,ys=!1,uo=wu=0,_s=null}function we(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?nt.memoizedState=Bt=e:Bt=Bt.next=e,Bt}function Gt(){if(yt===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=yt.next;var t=Bt===null?nt.memoizedState:Bt.next;if(t!==null)Bt=t,yt=e;else{if(e===null)throw nt.alternate===null?Error(U(467)):Error(U(310));yt=e,e={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Bt===null?nt.memoizedState=Bt=e:Bt=Bt.next=e}return Bt}function am(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zo(e){var t=uo;return uo+=1,_s===null&&(_s=[]),e=CE(_s,e,t),t=nt,(Bt===null?t.memoizedState:Bt.next)===null&&(t=t.alternate,Y.H=t===null||t.memoizedState===null?oT:lT),e}function vc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zo(e);if(e.$$typeof===Pn)return ye(e)}throw Error(U(438,String(e)))}function om(e){var t=null,n=nt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=nt.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=am(),nt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=J1;return t.index++,n}function Kn(e,t){return typeof t=="function"?t(e):t}function Xl(e){var t=Gt();return lm(t,yt,e)}function lm(e,t,n){var i=e.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(ut&g)===g:(Hi&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Ns&&(d=!0);else if((Hi&m)===m){h=h.next,m===Ns&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=s):u=u.next=g,nt.lanes|=m,Fi|=m;g=h.action,br&&n(s,g),s=h.hasEagerState?h.eagerState:n(s,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,nt.lanes|=g,Fi|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!Qe(s,e.memoizedState)&&(te=!0,d&&(n=ps,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Oh(e){var t=Gt(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);Qe(s,t.memoizedState)||(te=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function VE(e,t,n){var i=nt,r=Gt(),s=ft;if(s){if(n===void 0)throw Error(U(407));n=n()}else n=t();var a=!Qe((yt||r).memoizedState,n);a&&(r.memoizedState=n,te=!0),r=r.queue;var l=PE.bind(null,i,r,e);if(jo(2048,8,l,[e]),r.getSnapshot!==t||a||Bt!==null&&Bt.memoizedState.tag&1){if(i.flags|=2048,Os(9,Ec(),kE.bind(null,i,r,n,t),null),At===null)throw Error(U(349));s||Hi&124||ME(i,t,n)}return n}function ME(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=nt.updateQueue,t===null?(t=am(),nt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function kE(e,t,n,i){t.value=n,t.getSnapshot=i,UE(t)&&LE(e)}function PE(e,t,n){return n(function(){UE(t)&&LE(e)})}function UE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qe(e,n)}catch{return!0}}function LE(e){var t=Ys(e,2);t!==null&&He(t,e,2)}function Vf(e){var t=we();if(typeof e=="function"){var n=e;if(e=n(),br){Si(!0);try{n()}finally{Si(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:e},t}function zE(e,t,n,i){return e.baseState=n,lm(e,yt,typeof i=="function"?i:Kn)}function gw(e,t,n,i,r){if(Tc(e))throw Error(U(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};Y.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,jE(t,s)):(s.next=n.next,t.pending=n.next=s)}}function jE(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=Y.T,a={};Y.T=a;try{var l=n(r,i),u=Y.S;u!==null&&u(a,l),ry(e,t,l)}catch(h){Mf(e,t,h)}finally{Y.T=s}}else try{s=n(r,i),ry(e,t,s)}catch(h){Mf(e,t,h)}}function ry(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){sy(e,t,i)},function(i){return Mf(e,t,i)}):sy(e,t,n)}function sy(e,t,n){t.status="fulfilled",t.value=n,BE(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,jE(e,n)))}function Mf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,BE(t),t=t.next;while(t!==i)}e.action=null}function BE(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function qE(e,t){return t}function ay(e,t){if(ft){var n=At.formState;if(n!==null){t:{var i=nt;if(ft){if(kt){e:{for(var r=kt,s=dn;r.nodeType!==8;){if(!s){r=null;break e}if(r=ln(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){kt=ln(r.nextSibling),i=r.data==="F!";break t}}Ar(i)}i=!1}i&&(t=n[0])}}return n=we(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qE,lastRenderedState:t},n.queue=i,n=rT.bind(null,nt,i),i.dispatch=n,i=Vf(!1),s=fm.bind(null,nt,!1,i.queue),i=we(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=gw.bind(null,nt,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function oy(e){var t=Gt();return HE(t,yt,e)}function HE(e,t,n){if(t=lm(e,t,qE)[0],e=Xl(Kn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=zo(t)}catch(a){throw a===Lo?_c:a}else i=t;t=Gt();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(nt.flags|=2048,Os(9,Ec(),pw.bind(null,r,n),null)),[i,s,e]}function pw(e,t){e.action=t}function ly(e){var t=Gt(),n=yt;if(n!==null)return HE(t,n,e);Gt(),t=t.memoizedState,n=Gt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Os(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=nt.updateQueue,t===null&&(t=am(),nt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ec(){return{destroy:void 0,resource:void 0}}function GE(){return Gt().memoizedState}function Zl(e,t,n,i){var r=we();i=i===void 0?null:i,nt.flags|=e,r.memoizedState=Os(1|t,Ec(),n,i)}function jo(e,t,n,i){var r=Gt();i=i===void 0?null:i;var s=r.memoizedState.inst;yt!==null&&i!==null&&em(i,yt.memoizedState.deps)?r.memoizedState=Os(t,s,n,i):(nt.flags|=e,r.memoizedState=Os(1|t,s,n,i))}function uy(e,t){Zl(8390656,8,e,t)}function FE(e,t){jo(2048,8,e,t)}function QE(e,t){return jo(4,2,e,t)}function YE(e,t){return jo(4,4,e,t)}function KE(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $E(e,t,n){n=n!=null?n.concat([e]):null,jo(4,4,KE.bind(null,t,e),n)}function um(){}function XE(e,t){var n=Gt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&em(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function ZE(e,t){var n=Gt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&em(t,i[1]))return i[0];if(i=e(),br){Si(!0);try{e()}finally{Si(!1)}}return n.memoizedState=[i,t],i}function cm(e,t,n){return n===void 0||Hi&1073741824?e.memoizedState=t:(e.memoizedState=n,e=BT(),nt.lanes|=e,Fi|=e,n)}function JE(e,t,n,i){return Qe(n,t)?n:Ds.current!==null?(e=cm(e,n,i),Qe(e,t)||(te=!0),e):Hi&42?(e=BT(),nt.lanes|=e,Fi|=e,t):(te=!0,e.memoizedState=n)}function WE(e,t,n,i,r){var s=dt.p;dt.p=s!==0&&8>s?s:8;var a=Y.T,l={};Y.T=l,fm(e,!1,t,n);try{var u=r(),h=Y.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=fw(u,i);Fa(e,t,d,qe(e))}else Fa(e,t,i,qe(e))}catch(g){Fa(e,t,{then:function(){},status:"rejected",reason:g},qe())}finally{dt.p=s,Y.T=a}}function yw(){}function kf(e,t,n,i){if(e.tag!==5)throw Error(U(476));var r=tT(e).queue;WE(e,r,t,gr,n===null?yw:function(){return eT(e),n(i)})}function tT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:gr,baseState:gr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:gr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function eT(e){var t=tT(e).next.queue;Fa(e,t,{},qe())}function hm(){return ye(go)}function nT(){return Gt().memoizedState}function iT(){return Gt().memoizedState}function _w(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=qe();e=Ni(n);var i=Di(t,e,n);i!==null&&(He(i,t,n),qa(i,t,n)),t={cache:Zd()},e.payload=t;return}t=t.return}}function vw(e,t,n){var i=qe();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Tc(e)?sT(t,n):(n=Yd(e,t,n,i),n!==null&&(He(n,e,i),aT(n,t,i)))}function rT(e,t,n){var i=qe();Fa(e,t,n,i)}function Fa(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tc(e))sT(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,Qe(l,a))return yc(e,t,r,0),At===null&&pc(),!1}catch{}finally{}if(n=Yd(e,t,r,i),n!==null)return He(n,e,i),aT(n,t,i),!0}return!1}function fm(e,t,n,i){if(i={lane:2,revertLane:Em(),action:i,hasEagerState:!1,eagerState:null,next:null},Tc(e)){if(t)throw Error(U(479))}else t=Yd(e,n,i,2),t!==null&&He(t,e,2)}function Tc(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function sT(e,t){ys=bu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function aT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Xv(e,n)}}var Ru={readContext:ye,use:vc,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut},oT={readContext:ye,use:vc,useCallback:function(e,t){return we().memoizedState=[e,t===void 0?null:t],e},useContext:ye,useEffect:uy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Zl(4194308,4,KE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zl(4194308,4,e,t)},useInsertionEffect:function(e,t){Zl(4,2,e,t)},useMemo:function(e,t){var n=we();t=t===void 0?null:t;var i=e();if(br){Si(!0);try{e()}finally{Si(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=we();if(n!==void 0){var r=n(t);if(br){Si(!0);try{n(t)}finally{Si(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=vw.bind(null,nt,e),[i.memoizedState,e]},useRef:function(e){var t=we();return e={current:e},t.memoizedState=e},useState:function(e){e=Vf(e);var t=e.queue,n=rT.bind(null,nt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:um,useDeferredValue:function(e,t){var n=we();return cm(n,e,t)},useTransition:function(){var e=Vf(!1);return e=WE.bind(null,nt,e.queue,!0,!1),we().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=nt,r=we();if(ft){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),At===null)throw Error(U(349));ut&124||ME(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,uy(PE.bind(null,i,s,e),[e]),i.flags|=2048,Os(9,Ec(),kE.bind(null,i,s,n,t),null),n},useId:function(){var e=we(),t=At.identifierPrefix;if(ft){var n=Ln,i=Un;n=(i&~(1<<32-Be(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=wu++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=dw++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:hm,useFormState:ay,useActionState:ay,useOptimistic:function(e){var t=we();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=fm.bind(null,nt,!0,n),n.dispatch=t,[e,t]},useMemoCache:om,useCacheRefresh:function(){return we().memoizedState=_w.bind(null,nt)}},lT={readContext:ye,use:vc,useCallback:XE,useContext:ye,useEffect:FE,useImperativeHandle:$E,useInsertionEffect:QE,useLayoutEffect:YE,useMemo:ZE,useReducer:Xl,useRef:GE,useState:function(){return Xl(Kn)},useDebugValue:um,useDeferredValue:function(e,t){var n=Gt();return JE(n,yt.memoizedState,e,t)},useTransition:function(){var e=Xl(Kn)[0],t=Gt().memoizedState;return[typeof e=="boolean"?e:zo(e),t]},useSyncExternalStore:VE,useId:nT,useHostTransitionStatus:hm,useFormState:oy,useActionState:oy,useOptimistic:function(e,t){var n=Gt();return zE(n,yt,e,t)},useMemoCache:om,useCacheRefresh:iT},Ew={readContext:ye,use:vc,useCallback:XE,useContext:ye,useEffect:FE,useImperativeHandle:$E,useInsertionEffect:QE,useLayoutEffect:YE,useMemo:ZE,useReducer:Oh,useRef:GE,useState:function(){return Oh(Kn)},useDebugValue:um,useDeferredValue:function(e,t){var n=Gt();return yt===null?cm(n,e,t):JE(n,yt.memoizedState,e,t)},useTransition:function(){var e=Oh(Kn)[0],t=Gt().memoizedState;return[typeof e=="boolean"?e:zo(e),t]},useSyncExternalStore:VE,useId:nT,useHostTransitionStatus:hm,useFormState:ly,useActionState:ly,useOptimistic:function(e,t){var n=Gt();return yt!==null?zE(n,yt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:om,useCacheRefresh:iT},vs=null,co=0;function Ol(e){var t=co;return co+=1,vs===null&&(vs=[]),CE(vs,e,t)}function ba(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function xl(e,t){throw t.$$typeof===X1?Error(U(525)):(e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function cy(e){var t=e._init;return t(e._payload)}function uT(e){function t(w,E){if(e){var R=w.deletions;R===null?(w.deletions=[E],w.flags|=16):R.push(E)}}function n(w,E){if(!e)return null;for(;E!==null;)t(w,E),E=E.sibling;return null}function i(w){for(var E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function r(w,E){return w=Hn(w,E),w.index=0,w.sibling=null,w}function s(w,E,R){return w.index=R,e?(R=w.alternate,R!==null?(R=R.index,R<E?(w.flags|=67108866,E):R):(w.flags|=67108866,E)):(w.flags|=1048576,E)}function a(w){return e&&w.alternate===null&&(w.flags|=67108866),w}function l(w,E,R,D){return E===null||E.tag!==6?(E=Ch(R,w.mode,D),E.return=w,E):(E=r(E,R),E.return=w,E)}function u(w,E,R,D){var L=R.type;return L===Wr?d(w,E,R.props.children,D,R.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===di&&cy(L)===E.type)?(E=r(E,R.props),ba(E,R),E.return=w,E):(E=Kl(R.type,R.key,R.props,null,w.mode,D),ba(E,R),E.return=w,E)}function h(w,E,R,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==R.containerInfo||E.stateNode.implementation!==R.implementation?(E=Nh(R,w.mode,D),E.return=w,E):(E=r(E,R.children||[]),E.return=w,E)}function d(w,E,R,D,L){return E===null||E.tag!==7?(E=pr(R,w.mode,D,L),E.return=w,E):(E=r(E,R),E.return=w,E)}function g(w,E,R){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=Ch(""+E,w.mode,R),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case bl:return R=Kl(E.type,E.key,E.props,null,w.mode,R),ba(R,E),R.return=w,R;case Ca:return E=Nh(E,w.mode,R),E.return=w,E;case di:var D=E._init;return E=D(E._payload),g(w,E,R)}if(Na(E)||Ea(E))return E=pr(E,w.mode,R,null),E.return=w,E;if(typeof E.then=="function")return g(w,Ol(E),R);if(E.$$typeof===Pn)return g(w,Nl(w,E),R);xl(w,E)}return null}function m(w,E,R,D){var L=E!==null?E.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return L!==null?null:l(w,E,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case bl:return R.key===L?u(w,E,R,D):null;case Ca:return R.key===L?h(w,E,R,D):null;case di:return L=R._init,R=L(R._payload),m(w,E,R,D)}if(Na(R)||Ea(R))return L!==null?null:d(w,E,R,D,null);if(typeof R.then=="function")return m(w,E,Ol(R),D);if(R.$$typeof===Pn)return m(w,E,Nl(w,R),D);xl(w,R)}return null}function _(w,E,R,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return w=w.get(R)||null,l(E,w,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case bl:return w=w.get(D.key===null?R:D.key)||null,u(E,w,D,L);case Ca:return w=w.get(D.key===null?R:D.key)||null,h(E,w,D,L);case di:var q=D._init;return D=q(D._payload),_(w,E,R,D,L)}if(Na(D)||Ea(D))return w=w.get(R)||null,d(E,w,D,L,null);if(typeof D.then=="function")return _(w,E,R,Ol(D),L);if(D.$$typeof===Pn)return _(w,E,R,Nl(E,D),L);xl(E,D)}return null}function O(w,E,R,D){for(var L=null,q=null,T=E,y=E=0,v=null;T!==null&&y<R.length;y++){T.index>y?(v=T,T=null):v=T.sibling;var A=m(w,T,R[y],D);if(A===null){T===null&&(T=v);break}e&&T&&A.alternate===null&&t(w,T),E=s(A,E,y),q===null?L=A:q.sibling=A,q=A,T=v}if(y===R.length)return n(w,T),ft&&hr(w,y),L;if(T===null){for(;y<R.length;y++)T=g(w,R[y],D),T!==null&&(E=s(T,E,y),q===null?L=T:q.sibling=T,q=T);return ft&&hr(w,y),L}for(T=i(T);y<R.length;y++)v=_(T,w,y,R[y],D),v!==null&&(e&&v.alternate!==null&&T.delete(v.key===null?y:v.key),E=s(v,E,y),q===null?L=v:q.sibling=v,q=v);return e&&T.forEach(function(b){return t(w,b)}),ft&&hr(w,y),L}function V(w,E,R,D){if(R==null)throw Error(U(151));for(var L=null,q=null,T=E,y=E=0,v=null,A=R.next();T!==null&&!A.done;y++,A=R.next()){T.index>y?(v=T,T=null):v=T.sibling;var b=m(w,T,A.value,D);if(b===null){T===null&&(T=v);break}e&&T&&b.alternate===null&&t(w,T),E=s(b,E,y),q===null?L=b:q.sibling=b,q=b,T=v}if(A.done)return n(w,T),ft&&hr(w,y),L;if(T===null){for(;!A.done;y++,A=R.next())A=g(w,A.value,D),A!==null&&(E=s(A,E,y),q===null?L=A:q.sibling=A,q=A);return ft&&hr(w,y),L}for(T=i(T);!A.done;y++,A=R.next())A=_(T,w,y,A.value,D),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?y:A.key),E=s(A,E,y),q===null?L=A:q.sibling=A,q=A);return e&&T.forEach(function(I){return t(w,I)}),ft&&hr(w,y),L}function M(w,E,R,D){if(typeof R=="object"&&R!==null&&R.type===Wr&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case bl:t:{for(var L=R.key;E!==null;){if(E.key===L){if(L=R.type,L===Wr){if(E.tag===7){n(w,E.sibling),D=r(E,R.props.children),D.return=w,w=D;break t}}else if(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===di&&cy(L)===E.type){n(w,E.sibling),D=r(E,R.props),ba(D,R),D.return=w,w=D;break t}n(w,E);break}else t(w,E);E=E.sibling}R.type===Wr?(D=pr(R.props.children,w.mode,D,R.key),D.return=w,w=D):(D=Kl(R.type,R.key,R.props,null,w.mode,D),ba(D,R),D.return=w,w=D)}return a(w);case Ca:t:{for(L=R.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===R.containerInfo&&E.stateNode.implementation===R.implementation){n(w,E.sibling),D=r(E,R.children||[]),D.return=w,w=D;break t}else{n(w,E);break}else t(w,E);E=E.sibling}D=Nh(R,w.mode,D),D.return=w,w=D}return a(w);case di:return L=R._init,R=L(R._payload),M(w,E,R,D)}if(Na(R))return O(w,E,R,D);if(Ea(R)){if(L=Ea(R),typeof L!="function")throw Error(U(150));return R=L.call(R),V(w,E,R,D)}if(typeof R.then=="function")return M(w,E,Ol(R),D);if(R.$$typeof===Pn)return M(w,E,Nl(w,R),D);xl(w,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,E!==null&&E.tag===6?(n(w,E.sibling),D=r(E,R),D.return=w,w=D):(n(w,E),D=Ch(R,w.mode,D),D.return=w,w=D),a(w)):n(w,E)}return function(w,E,R,D){try{co=0;var L=M(w,E,R,D);return vs=null,L}catch(T){if(T===Lo||T===_c)throw T;var q=Ue(29,T,null,w.mode);return q.lanes=D,q.return=w,q}finally{}}}var xs=uT(!0),cT=uT(!1),tn=bn(null),yn=null;function pi(e){var t=e.alternate;Nt(Yt,Yt.current&1),Nt(tn,e),yn===null&&(t===null||Ds.current!==null||t.memoizedState!==null)&&(yn=e)}function hT(e){if(e.tag===22){if(Nt(Yt,Yt.current),Nt(tn,e),yn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(yn=e)}}else yi()}function yi(){Nt(Yt,Yt.current),Nt(tn,tn.current)}function jn(e){ee(tn),yn===e&&(yn=null),ee(Yt)}var Yt=bn(0);function Iu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Jf(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function xh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:wt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Pf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=qe(),r=Ni(i);r.payload=t,n!=null&&(r.callback=n),t=Di(e,r,i),t!==null&&(He(t,e,i),qa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=qe(),r=Ni(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Di(e,r,i),t!==null&&(He(t,e,i),qa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qe(),i=Ni(n);i.tag=2,t!=null&&(i.callback=t),t=Di(e,i,n),t!==null&&(He(t,e,n),qa(t,e,n))}};function hy(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!oo(n,i)||!oo(r,s):!0}function fy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Pf.enqueueReplaceState(t,t.state,null)}function wr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=wt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var Cu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function fT(e){Cu(e)}function dT(e){console.error(e)}function mT(e){Cu(e)}function Nu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function dy(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Uf(e,t,n){return n=Ni(n),n.tag=3,n.payload={element:null},n.callback=function(){Nu(e,t)},n}function gT(e){return e=Ni(e),e.tag=3,e}function pT(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){dy(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){dy(t,n,i),typeof r!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Tw(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Po(t,n,r,!0),n=tn.current,n!==null){switch(n.tag){case 13:return yn===null?Ff():n.alternate===null&&Pt===0&&(Pt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Nf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Hh(e,i,r)),!1;case 22:return n.flags|=65536,i===Nf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Hh(e,i,r)),!1}throw Error(U(435,n.tag))}return Hh(e,i,r),Ff(),!1}if(ft)return t=tn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==bf&&(e=Error(U(422),{cause:i}),lo(Je(e,n)))):(i!==bf&&(t=Error(U(423),{cause:i}),lo(Je(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=Je(i,n),r=Uf(e.stateNode,i,r),Dh(e,r),Pt!==4&&(Pt=2)),!1;var s=Error(U(520),{cause:i});if(s=Je(s,n),Ka===null?Ka=[s]:Ka.push(s),Pt!==4&&(Pt=2),t===null)return!0;i=Je(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Uf(n.stateNode,i,e),Dh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Oi===null||!Oi.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=gT(r),pT(r,e,n,i),Dh(n,r),!1}n=n.return}while(n!==null);return!1}var yT=Error(U(461)),te=!1;function re(e,t,n,i){t.child=e===null?cT(t,null,n,i):xs(t,e.child,n,i)}function my(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Sr(t),i=nm(e,t,n,a,s,r),l=im(),e!==null&&!te?(rm(e,t,r),$n(e,t,r)):(ft&&l&&$d(t),t.flags|=1,re(e,t,i,r),t.child)}function gy(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!Kd(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,_T(e,t,s,i,r)):(e=Kl(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!dm(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:oo,n(a,i)&&e.ref===t.ref)return $n(e,t,r)}return t.flags|=1,e=Hn(s,i),e.ref=t.ref,e.return=t,t.child=e}function _T(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(oo(s,i)&&e.ref===t.ref)if(te=!1,t.pendingProps=i=s,dm(e,r))e.flags&131072&&(te=!0);else return t.lanes=e.lanes,$n(e,t,r)}return Lf(e,t,n,i,r)}function vT(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return py(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&$l(t,s!==null?s.cachePool:null),s!==null?iy(t,s):xf(),hT(t);else return t.lanes=t.childLanes=536870912,py(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?($l(t,s.cachePool),iy(t,s),yi(),t.memoizedState=null):(e!==null&&$l(t,null),xf(),yi());return re(e,t,r,n),t.child}function py(e,t,n,i){var r=Jd();return r=r===null?null:{parent:Qt._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&$l(t,null),xf(),hT(t),e!==null&&Po(e,t,i,!0),null}function Jl(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Lf(e,t,n,i,r){return Sr(t),n=nm(e,t,n,i,void 0,r),i=im(),e!==null&&!te?(rm(e,t,r),$n(e,t,r)):(ft&&i&&$d(t),t.flags|=1,re(e,t,n,r),t.child)}function yy(e,t,n,i,r,s){return Sr(t),t.updateQueue=null,n=xE(t,i,n,r),OE(e),i=im(),e!==null&&!te?(rm(e,t,s),$n(e,t,s)):(ft&&i&&$d(t),t.flags|=1,re(e,t,n,s),t.child)}function _y(e,t,n,i,r){if(Sr(t),t.stateNode===null){var s=os,a=n.contextType;typeof a=="object"&&a!==null&&(s=ye(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Pf,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},Wd(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?ye(a):os,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(xh(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Pf.enqueueReplaceState(s,s.state,null),Ga(t,i,s,r),Ha(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=wr(n,l);s.props=u;var h=s.context,d=n.contextType;a=os,typeof d=="object"&&d!==null&&(a=ye(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&fy(t,s,i,a),mi=!1;var m=t.memoizedState;s.state=m,Ga(t,i,s,r),Ha(),h=t.memoizedState,l||m!==h||mi?(typeof g=="function"&&(xh(t,n,g,i),h=t.memoizedState),(u=mi||hy(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Df(e,t),a=t.memoizedProps,d=wr(n,a),s.props=d,g=t.pendingProps,m=s.context,h=n.contextType,u=os,typeof h=="object"&&h!==null&&(u=ye(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==g||m!==u)&&fy(t,s,i,u),mi=!1,m=t.memoizedState,s.state=m,Ga(t,i,s,r),Ha();var _=t.memoizedState;a!==g||m!==_||mi||e!==null&&e.dependencies!==null&&Au(e.dependencies)?(typeof l=="function"&&(xh(t,n,l,i),_=t.memoizedState),(d=mi||hy(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&Au(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),s.props=i,s.state=_,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,Jl(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=xs(t,e.child,null,r),t.child=xs(t,null,n,r)):re(e,t,n,r),t.memoizedState=s.state,e=t.child):e=$n(e,t,r),e}function vy(e,t,n,i){return ko(),t.flags|=256,re(e,t,n,i),t.child}var Vh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mh(e){return{baseLanes:e,cachePool:RE()}}function kh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=We),e}function ET(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(Yt.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(ft){if(r?pi(t):yi(),ft){var l=kt,u;if(u=l){t:{for(u=l,l=dn;u.nodeType!==8;){if(!l){l=null;break t}if(u=ln(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:yr!==null?{id:Un,overflow:Ln}:null,retryLane:536870912,hydrationErrors:null},u=Ue(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Te=t,kt=null,u=!0):u=!1}u||Ar(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return Jf(l)?t.lanes=32:t.lanes=536870912,null;jn(t)}return l=i.children,i=i.fallback,r?(yi(),r=t.mode,l=Du({mode:"hidden",children:l},r),i=pr(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=Mh(n),r.childLanes=kh(e,a,n),t.memoizedState=Vh,i):(pi(t),zf(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(pi(t),t.flags&=-257,t=Ph(e,t,n)):t.memoizedState!==null?(yi(),t.child=e.child,t.flags|=128,t=null):(yi(),r=i.fallback,l=t.mode,i=Du({mode:"visible",children:i.children},l),r=pr(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,xs(t,e.child,null,n),i=t.child,i.memoizedState=Mh(n),i.childLanes=kh(e,a,n),t.memoizedState=Vh,t=r);else if(pi(t),Jf(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(U(419)),i.stack="",i.digest=a,lo({value:i,source:null,stack:null}),t=Ph(e,t,n)}else if(te||Po(e,t,n,!1),a=(n&e.childLanes)!==0,te||a){if(a=At,a!==null&&(i=n&-n,i=i&42?1:Ud(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,Ys(e,i),He(a,e,i),yT;l.data==="$?"||Ff(),t=Ph(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,kt=ln(l.nextSibling),Te=t,ft=!0,_r=null,dn=!1,e!==null&&($e[Xe++]=Un,$e[Xe++]=Ln,$e[Xe++]=yr,Un=e.id,Ln=e.overflow,yr=t),t=zf(t,i.children),t.flags|=4096);return t}return r?(yi(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=Hn(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=Hn(h,r):(r=pr(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=Mh(n):(u=l.cachePool,u!==null?(h=Qt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=RE(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=kh(e,a,n),t.memoizedState=Vh,i):(pi(t),n=e.child,e=n.sibling,n=Hn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function zf(e,t){return t=Du({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Du(e,t){return e=Ue(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ph(e,t,n){return xs(t,e.child,null,n),e=zf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ey(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Rf(e.return,t,n)}function Uh(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function TT(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(re(e,t,i.children,n),i=Yt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ey(e,n,t);else if(e.tag===19)Ey(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Nt(Yt,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Iu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Uh(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Iu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Uh(t,!0,n,null,s);break;case"together":Uh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $n(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fi|=t.lanes,!(n&t.childLanes))if(e!==null){if(Po(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=Hn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Hn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function dm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Au(e)))}function Aw(e,t,n){switch(t.tag){case 3:mu(t,t.stateNode.containerInfo),gi(t,Qt,e.memoizedState.cache),ko();break;case 27:case 5:mf(t);break;case 4:mu(t,t.stateNode.containerInfo);break;case 10:gi(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(pi(t),t.flags|=128,null):n&t.child.childLanes?ET(e,t,n):(pi(t),e=$n(e,t,n),e!==null?e.sibling:null);pi(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Po(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return TT(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Nt(Yt,Yt.current),i)break;return null;case 22:case 23:return t.lanes=0,vT(e,t,n);case 24:gi(t,Qt,e.memoizedState.cache)}return $n(e,t,n)}function AT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)te=!0;else{if(!dm(e,n)&&!(t.flags&128))return te=!1,Aw(e,t,n);te=!!(e.flags&131072)}else te=!1,ft&&t.flags&1048576&&bE(t,Tu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")Kd(i)?(e=wr(i,e),t.tag=1,t=_y(null,t,i,e,n)):(t.tag=0,t=Lf(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===Md){t.tag=11,t=my(null,t,i,e,n);break t}else if(r===kd){t.tag=14,t=gy(null,t,i,e,n);break t}}throw t=ff(i)||i,Error(U(306,t,""))}}return t;case 0:return Lf(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=wr(i,t.pendingProps),_y(e,t,i,r,n);case 3:t:{if(mu(t,t.stateNode.containerInfo),e===null)throw Error(U(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,Df(e,t),Ga(t,i,null,n);var a=t.memoizedState;if(i=a.cache,gi(t,Qt,i),i!==s.cache&&If(t,[Qt],n,!0),Ha(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=vy(e,t,i,n);break t}else if(i!==r){r=Je(Error(U(424)),t),lo(r),t=vy(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(kt=ln(e.firstChild),Te=t,ft=!0,_r=null,dn=!0,n=cT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ko(),i===r){t=$n(e,t,n);break t}re(e,t,i,n)}t=t.child}return t;case 26:return Jl(e,t),e===null?(n=Uy(t.type,null,t.pendingProps,null))?t.memoizedState=n:ft||(n=t.type,e=t.pendingProps,i=Uu(Ci.current).createElement(n),i[pe]=t,i[Ne]=e,ue(i,n,e),Jt(i),t.stateNode=i):t.memoizedState=Uy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return mf(t),e===null&&ft&&(i=t.stateNode=l0(t.type,t.pendingProps,Ci.current),Te=t,dn=!0,r=kt,tr(t.type)?(Wf=r,kt=ln(i.firstChild)):kt=r),re(e,t,t.pendingProps.children,n),Jl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ft&&((r=i=kt)&&(i=Xw(i,t.type,t.pendingProps,dn),i!==null?(t.stateNode=i,Te=t,kt=ln(i.firstChild),dn=!1,r=!0):r=!1),r||Ar(t)),mf(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,Xf(r,s)?i=null:a!==null&&Xf(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=nm(e,t,mw,null,null,n),go._currentValue=r),Jl(e,t),re(e,t,i,n),t.child;case 6:return e===null&&ft&&((e=n=kt)&&(n=Zw(n,t.pendingProps,dn),n!==null?(t.stateNode=n,Te=t,kt=null,e=!0):e=!1),e||Ar(t)),null;case 13:return ET(e,t,n);case 4:return mu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=xs(t,null,i,n):re(e,t,i,n),t.child;case 11:return my(e,t,t.type,t.pendingProps,n);case 7:return re(e,t,t.pendingProps,n),t.child;case 8:return re(e,t,t.pendingProps.children,n),t.child;case 12:return re(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,gi(t,t.type,i.value),re(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Sr(t),r=ye(r),i=i(r),t.flags|=1,re(e,t,i,n),t.child;case 14:return gy(e,t,t.type,t.pendingProps,n);case 15:return _T(e,t,t.type,t.pendingProps,n);case 19:return TT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Du(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Hn(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return vT(e,t,n);case 24:return Sr(t),i=ye(Qt),e===null?(r=Jd(),r===null&&(r=At,s=Zd(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},Wd(t),gi(t,Qt,r)):(e.lanes&n&&(Df(e,t),Ga(t,null,null,n),Ha()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),gi(t,Qt,i)):(i=s.cache,gi(t,Qt,i),i!==r.cache&&If(t,[Qt],n,!0))),re(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(U(156,t.tag))}function xn(e){e.flags|=4}function Ty(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!h0(t)){if(t=tn.current,t!==null&&((ut&4194048)===ut?yn!==null:(ut&62914560)!==ut&&!(ut&536870912)||t!==yn))throw Ba=Nf,IE;e.flags|=8192}}function Vl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Kv():536870912,e.lanes|=t,Vs|=t)}function wa(e,t){if(!ft)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Sw(e,t,n){var i=t.pendingProps;switch(Xd(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(t),null;case 1:return Ot(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Gn(Qt),Rs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Sa(t)?xn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zp())),Ot(t),null;case 26:return n=t.memoizedState,e===null?(xn(t),n!==null?(Ot(t),Ty(t,n)):(Ot(t),t.flags&=-16777217)):n?n!==e.memoizedState?(xn(t),Ot(t),Ty(t,n)):(Ot(t),t.flags&=-16777217):(e.memoizedProps!==i&&xn(t),Ot(t),t.flags&=-16777217),null;case 27:gu(t),n=Ci.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&xn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Ot(t),null}e=gn.current,Sa(t)?$p(t):(e=l0(r,i,n),t.stateNode=e,xn(t))}return Ot(t),null;case 5:if(gu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&xn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Ot(t),null}if(e=gn.current,Sa(t))$p(t);else{switch(r=Uu(Ci.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[pe]=t,e[Ne]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(ue(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&xn(t)}}return Ot(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&xn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(e=Ci.current,Sa(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Te,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[pe]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||s0(e.nodeValue,n)),e||Ar(t)}else e=Uu(e).createTextNode(i),e[pe]=t,t.stateNode=e}return Ot(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Sa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(U(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(U(317));r[pe]=t}else ko(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ot(t),r=!1}else r=Zp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(jn(t),t):(jn(t),null)}if(jn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Vl(t,t.updateQueue),Ot(t),null;case 4:return Rs(),e===null&&Tm(t.stateNode.containerInfo),Ot(t),null;case 10:return Gn(t.type),Ot(t),null;case 19:if(ee(Yt),r=t.memoizedState,r===null)return Ot(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)wa(r,!1);else{if(Pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Iu(e),s!==null){for(t.flags|=128,wa(r,!1),e=s.updateQueue,t.updateQueue=e,Vl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)SE(n,e),n=n.sibling;return Nt(Yt,Yt.current&1|2),t.child}e=e.sibling}r.tail!==null&&pn()>xu&&(t.flags|=128,i=!0,wa(r,!1),t.lanes=4194304)}else{if(!i)if(e=Iu(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Vl(t,e),wa(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!ft)return Ot(t),null}else 2*pn()-r.renderingStartTime>xu&&n!==536870912&&(t.flags|=128,i=!0,wa(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=pn(),t.sibling=null,e=Yt.current,Nt(Yt,i?e&1|2:e&1),t):(Ot(t),null);case 22:case 23:return jn(t),tm(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Ot(t),t.subtreeFlags&6&&(t.flags|=8192)):Ot(t),n=t.updateQueue,n!==null&&Vl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&ee(vr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Gn(Qt),Ot(t),null;case 25:return null;case 30:return null}throw Error(U(156,t.tag))}function bw(e,t){switch(Xd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gn(Qt),Rs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return gu(t),null;case 13:if(jn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));ko()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ee(Yt),null;case 4:return Rs(),null;case 10:return Gn(t.type),null;case 22:case 23:return jn(t),tm(),e!==null&&ee(vr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Gn(Qt),null;case 25:return null;default:return null}}function ST(e,t){switch(Xd(t),t.tag){case 3:Gn(Qt),Rs();break;case 26:case 27:case 5:gu(t);break;case 4:Rs();break;case 13:jn(t);break;case 19:ee(Yt);break;case 10:Gn(t.type);break;case 22:case 23:jn(t),tm(),e!==null&&ee(vr);break;case 24:Gn(Qt)}}function Bo(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Tt(t,t.return,l)}}function Gi(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){Tt(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){Tt(t,t.return,d)}}function bT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{DE(t,n)}catch(i){Tt(e,e.return,i)}}}function wT(e,t,n){n.props=wr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Tt(e,t,i)}}function Qa(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){Tt(e,t,r)}}function mn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Tt(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Tt(e,t,r)}else n.current=null}function RT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Tt(e,e.return,r)}}function Lh(e,t,n){try{var i=e.stateNode;Fw(i,e.type,n,t),i[Ne]=t}catch(r){Tt(e,e.return,r)}}function IT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&tr(e.type)||e.tag===4}function zh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||IT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&tr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wc));else if(i!==4&&(i===27&&tr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(jf(e,t,n),e=e.sibling;e!==null;)jf(e,t,n),e=e.sibling}function Ou(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&tr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Ou(e,t,n),e=e.sibling;e!==null;)Ou(e,t,n),e=e.sibling}function CT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ue(t,i,n),t[pe]=e,t[Ne]=n}catch(s){Tt(e,e.return,s)}}var Mn=!1,Lt=!1,jh=!1,Ay=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function ww(e,t){if(e=e.containerInfo,Kf=Bu,e=gE(e),Fd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var _;g!==n||r!==0&&g.nodeType!==3||(l=a+r),g!==s||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for($f={focusedElem:e,selectionRange:n},Bu=!1,Zt=t;Zt!==null;)if(t=Zt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Zt=e;else for(;Zt!==null;){switch(t=Zt,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var O=wr(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(O,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(V){Tt(n,n.return,V)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Zf(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Zf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(U(163))}if(e=t.sibling,e!==null){e.return=t.return,Zt=e;break}Zt=t.return}}function NT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ci(e,n),i&4&&Bo(5,n);break;case 1:if(ci(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Tt(n,n.return,a)}else{var r=wr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Tt(n,n.return,a)}}i&64&&bT(n),i&512&&Qa(n,n.return);break;case 3:if(ci(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{DE(e,t)}catch(a){Tt(n,n.return,a)}}break;case 27:t===null&&i&4&&CT(n);case 26:case 5:ci(e,n),t===null&&i&4&&RT(n),i&512&&Qa(n,n.return);break;case 12:ci(e,n);break;case 13:ci(e,n),i&4&&xT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Mw.bind(null,n),Jw(e,n))));break;case 22:if(i=n.memoizedState!==null||Mn,!i){t=t!==null&&t.memoizedState!==null||Lt,r=Mn;var s=Lt;Mn=i,(Lt=t)&&!s?fi(e,n,(n.subtreeFlags&8772)!==0):ci(e,n),Mn=r,Lt=s}break;case 30:break;default:ci(e,n)}}function DT(e){var t=e.alternate;t!==null&&(e.alternate=null,DT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&zd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var It=null,Re=!1;function Vn(e,t,n){for(n=n.child;n!==null;)OT(e,t,n),n=n.sibling}function OT(e,t,n){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(Do,n)}catch{}switch(n.tag){case 26:Lt||mn(n,t),Vn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Lt||mn(n,t);var i=It,r=Re;tr(n.type)&&(It=n.stateNode,Re=!1),Vn(e,t,n),Xa(n.stateNode),It=i,Re=r;break;case 5:Lt||mn(n,t);case 6:if(i=It,r=Re,It=null,Vn(e,t,n),It=i,Re=r,It!==null)if(Re)try{(It.nodeType===9?It.body:It.nodeName==="HTML"?It.ownerDocument.body:It).removeChild(n.stateNode)}catch(s){Tt(n,t,s)}else try{It.removeChild(n.stateNode)}catch(s){Tt(n,t,s)}break;case 18:It!==null&&(Re?(e=It,My(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),_o(e)):My(It,n.stateNode));break;case 4:i=It,r=Re,It=n.stateNode.containerInfo,Re=!0,Vn(e,t,n),It=i,Re=r;break;case 0:case 11:case 14:case 15:Lt||Gi(2,n,t),Lt||Gi(4,n,t),Vn(e,t,n);break;case 1:Lt||(mn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&wT(n,t,i)),Vn(e,t,n);break;case 21:Vn(e,t,n);break;case 22:Lt=(i=Lt)||n.memoizedState!==null,Vn(e,t,n),Lt=i;break;default:Vn(e,t,n)}}function xT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{_o(e)}catch(n){Tt(t,t.return,n)}}function Rw(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ay),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ay),t;default:throw Error(U(435,e.tag))}}function Bh(e,t){var n=Rw(e);t.forEach(function(i){var r=kw.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Me(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(tr(l.type)){It=l.stateNode,Re=!1;break t}break;case 5:It=l.stateNode,Re=!1;break t;case 3:case 4:It=l.stateNode.containerInfo,Re=!0;break t}l=l.return}if(It===null)throw Error(U(160));OT(s,a,r),It=null,Re=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)VT(t,e),t=t.sibling}var sn=null;function VT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Me(t,e),ke(e),i&4&&(Gi(3,e,e.return),Bo(3,e),Gi(5,e,e.return));break;case 1:Me(t,e),ke(e),i&512&&(Lt||n===null||mn(n,n.return)),i&64&&Mn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=sn;if(Me(t,e),ke(e),i&512&&(Lt||n===null||mn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Vo]||s[pe]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),ue(s,i,n),s[pe]=e,Jt(s),i=s;break t;case"link":var a=zy("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),ue(s,i,n),r.head.appendChild(s);break;case"meta":if(a=zy("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),ue(s,i,n),r.head.appendChild(s);break;default:throw Error(U(468,i))}s[pe]=e,Jt(s),i=s}e.stateNode=i}else jy(r,e.type,e.stateNode);else e.stateNode=Ly(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?jy(r,e.type,e.stateNode):Ly(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Lh(e,e.memoizedProps,n.memoizedProps)}break;case 27:Me(t,e),ke(e),i&512&&(Lt||n===null||mn(n,n.return)),n!==null&&i&4&&Lh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Me(t,e),ke(e),i&512&&(Lt||n===null||mn(n,n.return)),e.flags&32){r=e.stateNode;try{Cs(r,"")}catch(_){Tt(e,e.return,_)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,Lh(e,r,n!==null?n.memoizedProps:r)),i&1024&&(jh=!0);break;case 6:if(Me(t,e),ke(e),i&4){if(e.stateNode===null)throw Error(U(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){Tt(e,e.return,_)}}break;case 3:if(eu=null,r=sn,sn=Lu(t.containerInfo),Me(t,e),sn=r,ke(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{_o(t.containerInfo)}catch(_){Tt(e,e.return,_)}jh&&(jh=!1,MT(e));break;case 4:i=sn,sn=Lu(e.stateNode.containerInfo),Me(t,e),ke(e),sn=i;break;case 12:Me(t,e),ke(e);break;case 13:Me(t,e),ke(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(_m=pn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Bh(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Mn,d=Lt;if(Mn=h||r,Lt=d||u,Me(t,e),Lt=d,Mn=h,ke(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||Mn||Lt||fr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){Tt(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(_){Tt(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Bh(e,n))));break;case 19:Me(t,e),ke(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Bh(e,i)));break;case 30:break;case 21:break;default:Me(t,e),ke(e)}}function ke(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(IT(i)){n=i;break}i=i.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var r=n.stateNode,s=zh(e);Ou(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Cs(a,""),n.flags&=-33);var l=zh(e);Ou(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=zh(e);jf(e,h,u);break;default:throw Error(U(161))}}catch(d){Tt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function MT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;MT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ci(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)NT(e,t.alternate,t),t=t.sibling}function fr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Gi(4,t,t.return),fr(t);break;case 1:mn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&wT(t,t.return,n),fr(t);break;case 27:Xa(t.stateNode);case 26:case 5:mn(t,t.return),fr(t);break;case 22:t.memoizedState===null&&fr(t);break;case 30:fr(t);break;default:fr(t)}e=e.sibling}}function fi(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:fi(r,s,n),Bo(4,s);break;case 1:if(fi(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){Tt(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)NE(u[r],l)}catch(h){Tt(i,i.return,h)}}n&&a&64&&bT(s),Qa(s,s.return);break;case 27:CT(s);case 26:case 5:fi(r,s,n),n&&i===null&&a&4&&RT(s),Qa(s,s.return);break;case 12:fi(r,s,n);break;case 13:fi(r,s,n),n&&a&4&&xT(r,s);break;case 22:s.memoizedState===null&&fi(r,s,n),Qa(s,s.return);break;case 30:break;default:fi(r,s,n)}t=t.sibling}}function mm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Uo(n))}function gm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Uo(e))}function hn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)kT(e,t,n,i),t=t.sibling}function kT(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:hn(e,t,n,i),r&2048&&Bo(9,t);break;case 1:hn(e,t,n,i);break;case 3:hn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Uo(e)));break;case 12:if(r&2048){hn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){Tt(t,t.return,u)}}else hn(e,t,n,i);break;case 13:hn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?hn(e,t,n,i):Ya(e,t):s._visibility&2?hn(e,t,n,i):(s._visibility|=2,Yr(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&mm(a,t);break;case 24:hn(e,t,n,i),r&2048&&gm(t.alternate,t);break;default:hn(e,t,n,i)}}function Yr(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:Yr(s,a,l,u,r),Bo(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?Yr(s,a,l,u,r):Ya(s,a):(d._visibility|=2,Yr(s,a,l,u,r)),r&&h&2048&&mm(a.alternate,a);break;case 24:Yr(s,a,l,u,r),r&&h&2048&&gm(a.alternate,a);break;default:Yr(s,a,l,u,r)}t=t.sibling}}function Ya(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Ya(n,i),r&2048&&mm(i.alternate,i);break;case 24:Ya(n,i),r&2048&&gm(i.alternate,i);break;default:Ya(n,i)}t=t.sibling}}var Oa=8192;function Hr(e){if(e.subtreeFlags&Oa)for(e=e.child;e!==null;)PT(e),e=e.sibling}function PT(e){switch(e.tag){case 26:Hr(e),e.flags&Oa&&e.memoizedState!==null&&hR(sn,e.memoizedState,e.memoizedProps);break;case 5:Hr(e);break;case 3:case 4:var t=sn;sn=Lu(e.stateNode.containerInfo),Hr(e),sn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Oa,Oa=16777216,Hr(e),Oa=t):Hr(e));break;default:Hr(e)}}function UT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ra(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Zt=i,zT(i,e)}UT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)LT(e),e=e.sibling}function LT(e){switch(e.tag){case 0:case 11:case 15:Ra(e),e.flags&2048&&Gi(9,e,e.return);break;case 3:Ra(e);break;case 12:Ra(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Wl(e)):Ra(e);break;default:Ra(e)}}function Wl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Zt=i,zT(i,e)}UT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Gi(8,t,t.return),Wl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Wl(t));break;default:Wl(t)}e=e.sibling}}function zT(e,t){for(;Zt!==null;){var n=Zt;switch(n.tag){case 0:case 11:case 15:Gi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Uo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Zt=i;else t:for(n=e;Zt!==null;){i=Zt;var r=i.sibling,s=i.return;if(DT(i),i===n){Zt=null;break t}if(r!==null){r.return=s,Zt=r;break t}Zt=s}}}var Iw={getCacheForType:function(e){var t=ye(Qt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Cw=typeof WeakMap=="function"?WeakMap:Map,gt=0,At=null,rt=null,ut=0,mt=0,Pe=null,wi=!1,Ks=!1,pm=!1,Xn=0,Pt=0,Fi=0,Er=0,ym=0,We=0,Vs=0,Ka=null,Ie=null,Bf=!1,_m=0,xu=1/0,Vu=null,Oi=null,ae=0,xi=null,Ms=null,Es=0,qf=0,Hf=null,jT=null,$a=0,Gf=null;function qe(){if(gt&2&&ut!==0)return ut&-ut;if(Y.T!==null){var e=Ns;return e!==0?e:Em()}return Zv()}function BT(){We===0&&(We=!(ut&536870912)||ft?Yv():536870912);var e=tn.current;return e!==null&&(e.flags|=32),We}function He(e,t,n){(e===At&&(mt===2||mt===9)||e.cancelPendingCommit!==null)&&(ks(e,0),Ri(e,ut,We,!1)),xo(e,n),(!(gt&2)||e!==At)&&(e===At&&(!(gt&2)&&(Er|=n),Pt===4&&Ri(e,ut,We,!1)),wn(e))}function qT(e,t,n){if(gt&6)throw Error(U(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Oo(e,t),r=i?Ow(e,t):qh(e,t,!0),s=i;do{if(r===0){Ks&&!i&&Ri(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Nw(n)){r=qh(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=Ka;var u=l.current.memoizedState.isDehydrated;if(u&&(ks(l,a).flags|=256),a=qh(l,a,!1),a!==2){if(pm&&!u){l.errorRecoveryDisabledLanes|=s,Er|=s,r=4;break t}s=Ie,Ie=r,s!==null&&(Ie===null?Ie=s:Ie.push.apply(Ie,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){ks(e,0),Ri(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(U(345));case 4:if((t&4194048)!==t)break;case 6:Ri(i,t,We,!wi);break t;case 2:Ie=null;break;case 3:case 5:break;default:throw Error(U(329))}if((t&62914560)===t&&(r=_m+300-pn(),10<r)){if(Ri(i,t,We,!wi),fc(i,0,!0)!==0)break t;i.timeoutHandle=o0(Sy.bind(null,i,n,Ie,Vu,Bf,t,We,Er,Vs,wi,s,2,-0,0),r);break t}Sy(i,n,Ie,Vu,Bf,t,We,Er,Vs,wi,s,0,-0,0)}}break}while(!0);wn(e)}function Sy(e,t,n,i,r,s,a,l,u,h,d,g,m,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(mo={stylesheets:null,count:0,unsuspend:cR},PT(t),g=fR(),g!==null)){e.cancelPendingCommit=g(wy.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,_)),Ri(e,s,a,!h);return}wy(e,t,s,n,i,r,a,l,u)}function Nw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Qe(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ri(e,t,n,i){t&=~ym,t&=~Er,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-Be(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&$v(e,n,t)}function Ac(){return gt&6?!0:(qo(0),!1)}function vm(){if(rt!==null){if(mt===0)var e=rt.return;else e=rt,zn=Mr=null,sm(e),vs=null,co=0,e=rt;for(;e!==null;)ST(e.alternate,e),e=e.return;rt=null}}function ks(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Yw(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),vm(),At=e,rt=n=Hn(e.current,null),ut=t,mt=0,Pe=null,wi=!1,Ks=Oo(e,t),pm=!1,Vs=We=ym=Er=Fi=Pt=0,Ie=Ka=null,Bf=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-Be(i),s=1<<r;t|=e[r],i&=~s}return Xn=t,pc(),n}function HT(e,t){nt=null,Y.H=Ru,t===Lo||t===_c?(t=ey(),mt=3):t===IE?(t=ey(),mt=4):mt=t===yT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Pe=t,rt===null&&(Pt=1,Nu(e,Je(t,e.current)))}function GT(){var e=Y.H;return Y.H=Ru,e===null?Ru:e}function FT(){var e=Y.A;return Y.A=Iw,e}function Ff(){Pt=4,wi||(ut&4194048)!==ut&&tn.current!==null||(Ks=!0),!(Fi&134217727)&&!(Er&134217727)||At===null||Ri(At,ut,We,!1)}function qh(e,t,n){var i=gt;gt|=2;var r=GT(),s=FT();(At!==e||ut!==t)&&(Vu=null,ks(e,t)),t=!1;var a=Pt;t:do try{if(mt!==0&&rt!==null){var l=rt,u=Pe;switch(mt){case 8:vm(),a=6;break t;case 3:case 2:case 9:case 6:tn.current===null&&(t=!0);var h=mt;if(mt=0,Pe=null,cs(e,l,u,h),n&&Ks){a=0;break t}break;default:h=mt,mt=0,Pe=null,cs(e,l,u,h)}}Dw(),a=Pt;break}catch(d){HT(e,d)}while(!0);return t&&e.shellSuspendCounter++,zn=Mr=null,gt=i,Y.H=r,Y.A=s,rt===null&&(At=null,ut=0,pc()),a}function Dw(){for(;rt!==null;)QT(rt)}function Ow(e,t){var n=gt;gt|=2;var i=GT(),r=FT();At!==e||ut!==t?(Vu=null,xu=pn()+500,ks(e,t)):Ks=Oo(e,t);t:do try{if(mt!==0&&rt!==null){t=rt;var s=Pe;e:switch(mt){case 1:mt=0,Pe=null,cs(e,t,s,1);break;case 2:case 9:if(ty(s)){mt=0,Pe=null,by(t);break}t=function(){mt!==2&&mt!==9||At!==e||(mt=7),wn(e)},s.then(t,t);break t;case 3:mt=7;break t;case 4:mt=5;break t;case 7:ty(s)?(mt=0,Pe=null,by(t)):(mt=0,Pe=null,cs(e,t,s,7));break;case 5:var a=null;switch(rt.tag){case 26:a=rt.memoizedState;case 5:case 27:var l=rt;if(!a||h0(a)){mt=0,Pe=null;var u=l.sibling;if(u!==null)rt=u;else{var h=l.return;h!==null?(rt=h,Sc(h)):rt=null}break e}}mt=0,Pe=null,cs(e,t,s,5);break;case 6:mt=0,Pe=null,cs(e,t,s,6);break;case 8:vm(),Pt=6;break t;default:throw Error(U(462))}}xw();break}catch(d){HT(e,d)}while(!0);return zn=Mr=null,Y.H=i,Y.A=r,gt=n,rt!==null?0:(At=null,ut=0,pc(),Pt)}function xw(){for(;rt!==null&&!tb();)QT(rt)}function QT(e){var t=AT(e.alternate,e,Xn);e.memoizedProps=e.pendingProps,t===null?Sc(e):rt=t}function by(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=yy(n,t,t.pendingProps,t.type,void 0,ut);break;case 11:t=yy(n,t,t.pendingProps,t.type.render,t.ref,ut);break;case 5:sm(t);default:ST(n,t),t=rt=SE(t,Xn),t=AT(n,t,Xn)}e.memoizedProps=e.pendingProps,t===null?Sc(e):rt=t}function cs(e,t,n,i){zn=Mr=null,sm(t),vs=null,co=0;var r=t.return;try{if(Tw(e,r,t,n,ut)){Pt=1,Nu(e,Je(n,e.current)),rt=null;return}}catch(s){if(r!==null)throw rt=r,s;Pt=1,Nu(e,Je(n,e.current)),rt=null;return}t.flags&32768?(ft||i===1?e=!0:Ks||ut&536870912?e=!1:(wi=e=!0,(i===2||i===9||i===3||i===6)&&(i=tn.current,i!==null&&i.tag===13&&(i.flags|=16384))),YT(t,e)):Sc(t)}function Sc(e){var t=e;do{if(t.flags&32768){YT(t,wi);return}e=t.return;var n=Sw(t.alternate,t,Xn);if(n!==null){rt=n;return}if(t=t.sibling,t!==null){rt=t;return}rt=t=e}while(t!==null);Pt===0&&(Pt=5)}function YT(e,t){do{var n=bw(e.alternate,e);if(n!==null){n.flags&=32767,rt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){rt=e;return}rt=e=n}while(e!==null);Pt=6,rt=null}function wy(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do bc();while(ae!==0);if(gt&6)throw Error(U(327));if(t!==null){if(t===e.current)throw Error(U(177));if(s=t.lanes|t.childLanes,s|=Qd,cb(e,n,s,a,l,u),e===At&&(rt=At=null,ut=0),Ms=t,xi=e,Es=n,qf=s,Hf=r,jT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Pw(pu,function(){return JT(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Y.T,Y.T=null,r=dt.p,dt.p=2,a=gt,gt|=4;try{ww(e,t,n)}finally{gt=a,dt.p=r,Y.T=i}}ae=1,KT(),$T(),XT()}}function KT(){if(ae===1){ae=0;var e=xi,t=Ms,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Y.T,Y.T=null;var i=dt.p;dt.p=2;var r=gt;gt|=4;try{VT(t,e);var s=$f,a=gE(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&mE(l.ownerDocument.documentElement,l)){if(u!==null&&Fd(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var _=m.getSelection(),O=l.textContent.length,V=Math.min(u.start,O),M=u.end===void 0?V:Math.min(u.end,O);!_.extend&&V>M&&(a=M,M=V,V=a);var w=Qp(l,V),E=Qp(l,M);if(w&&E&&(_.rangeCount!==1||_.anchorNode!==w.node||_.anchorOffset!==w.offset||_.focusNode!==E.node||_.focusOffset!==E.offset)){var R=g.createRange();R.setStart(w.node,w.offset),_.removeAllRanges(),V>M?(_.addRange(R),_.extend(E.node,E.offset)):(R.setEnd(E.node,E.offset),_.addRange(R))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Bu=!!Kf,$f=Kf=null}finally{gt=r,dt.p=i,Y.T=n}}e.current=t,ae=2}}function $T(){if(ae===2){ae=0;var e=xi,t=Ms,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Y.T,Y.T=null;var i=dt.p;dt.p=2;var r=gt;gt|=4;try{NT(e,t.alternate,t)}finally{gt=r,dt.p=i,Y.T=n}}ae=3}}function XT(){if(ae===4||ae===3){ae=0,eb();var e=xi,t=Ms,n=Es,i=jT;t.subtreeFlags&10256||t.flags&10256?ae=5:(ae=0,Ms=xi=null,ZT(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Oi=null),Ld(n),t=t.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(Do,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Y.T,r=dt.p,dt.p=2,Y.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{Y.T=t,dt.p=r}}Es&3&&bc(),wn(e),r=e.pendingLanes,n&4194090&&r&42?e===Gf?$a++:($a=0,Gf=e):$a=0,qo(0)}}function ZT(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Uo(t)))}function bc(e){return KT(),$T(),XT(),JT()}function JT(){if(ae!==5)return!1;var e=xi,t=qf;qf=0;var n=Ld(Es),i=Y.T,r=dt.p;try{dt.p=32>n?32:n,Y.T=null,n=Hf,Hf=null;var s=xi,a=Es;if(ae=0,Ms=xi=null,Es=0,gt&6)throw Error(U(331));var l=gt;if(gt|=4,LT(s.current),kT(s,s.current,a,n),gt=l,qo(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(Do,s)}catch{}return!0}finally{dt.p=r,Y.T=i,ZT(e,t)}}function Ry(e,t,n){t=Je(n,t),t=Uf(e.stateNode,t,2),e=Di(e,t,2),e!==null&&(xo(e,2),wn(e))}function Tt(e,t,n){if(e.tag===3)Ry(e,e,n);else for(;t!==null;){if(t.tag===3){Ry(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Oi===null||!Oi.has(i))){e=Je(n,e),n=gT(2),i=Di(t,n,2),i!==null&&(pT(n,i,t,e),xo(i,2),wn(i));break}}t=t.return}}function Hh(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Cw;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(pm=!0,r.add(n),e=Vw.bind(null,e,t,n),t.then(e,e))}function Vw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,At===e&&(ut&n)===n&&(Pt===4||Pt===3&&(ut&62914560)===ut&&300>pn()-_m?!(gt&2)&&ks(e,0):ym|=n,Vs===ut&&(Vs=0)),wn(e)}function WT(e,t){t===0&&(t=Kv()),e=Ys(e,t),e!==null&&(xo(e,t),wn(e))}function Mw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),WT(e,n)}function kw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(t),WT(e,n)}function Pw(e,t){return Pd(e,t)}var Mu=null,Kr=null,Qf=!1,ku=!1,Gh=!1,Tr=0;function wn(e){e!==Kr&&e.next===null&&(Kr===null?Mu=Kr=e:Kr=Kr.next=e),ku=!0,Qf||(Qf=!0,Lw())}function qo(e,t){if(!Gh&&ku){Gh=!0;do for(var n=!1,i=Mu;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-Be(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Iy(i,s))}else s=ut,s=fc(i,i===At?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Oo(i,s)||(n=!0,Iy(i,s));i=i.next}while(n);Gh=!1}}function Uw(){t0()}function t0(){ku=Qf=!1;var e=0;Tr!==0&&(Qw()&&(e=Tr),Tr=0);for(var t=pn(),n=null,i=Mu;i!==null;){var r=i.next,s=e0(i,t);s===0?(i.next=null,n===null?Mu=r:n.next=r,r===null&&(Kr=n)):(n=i,(e!==0||s&3)&&(ku=!0)),i=r}qo(e)}function e0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-Be(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=ub(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=At,n=ut,n=fc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(mt===2||mt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&ph(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Oo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&ph(i),Ld(n)){case 2:case 8:n=Fv;break;case 32:n=pu;break;case 268435456:n=Qv;break;default:n=pu}return i=n0.bind(null,e),n=Pd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&ph(i),e.callbackPriority=2,e.callbackNode=null,2}function n0(e,t){if(ae!==0&&ae!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(bc()&&e.callbackNode!==n)return null;var i=ut;return i=fc(e,e===At?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(qT(e,i,t),e0(e,pn()),e.callbackNode!=null&&e.callbackNode===n?n0.bind(null,e):null)}function Iy(e,t){if(bc())return null;qT(e,t,!0)}function Lw(){Kw(function(){gt&6?Pd(Gv,Uw):t0()})}function Em(){return Tr===0&&(Tr=Yv()),Tr}function Cy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Fl(""+e)}function Ny(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function zw(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=Cy((r[Ne]||null).action),a=i.submitter;a&&(t=(t=a[Ne]||null)?Cy(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new dc("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Tr!==0){var u=a?Ny(r,a):new FormData(r);kf(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?Ny(r,a):new FormData(r),kf(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var Fh=0;Fh<Sf.length;Fh++){var Qh=Sf[Fh],jw=Qh.toLowerCase(),Bw=Qh[0].toUpperCase()+Qh.slice(1);cn(jw,"on"+Bw)}cn(yE,"onAnimationEnd");cn(_E,"onAnimationIteration");cn(vE,"onAnimationStart");cn("dblclick","onDoubleClick");cn("focusin","onFocus");cn("focusout","onBlur");cn(rw,"onTransitionRun");cn(sw,"onTransitionStart");cn(aw,"onTransitionCancel");cn(EE,"onTransitionEnd");Is("onMouseEnter",["mouseout","mouseover"]);Is("onMouseLeave",["mouseout","mouseover"]);Is("onPointerEnter",["pointerout","pointerover"]);Is("onPointerLeave",["pointerout","pointerover"]);Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Or("onBeforeInput",["compositionend","keypress","textInput","paste"]);Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ho));function i0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Cu(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Cu(d)}r.currentTarget=null,s=u}}}}function it(e,t){var n=t[pf];n===void 0&&(n=t[pf]=new Set);var i=e+"__bubble";n.has(i)||(r0(t,e,2,!1),n.add(i))}function Yh(e,t,n){var i=0;t&&(i|=4),r0(n,e,i,t)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Tm(e){if(!e[Ml]){e[Ml]=!0,Jv.forEach(function(n){n!=="selectionchange"&&(qw.has(n)||Yh(n,!1,e),Yh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ml]||(t[Ml]=!0,Yh("selectionchange",!1,t))}}function r0(e,t,n,i){switch(p0(t)){case 2:var r=gR;break;case 8:r=pR;break;default:r=wm}n=r.bind(null,t,n,e),r=void 0,!Ef||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Kh(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=es(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}aE(function(){var h=s,d=Bd(n),g=[];t:{var m=TE.get(e);if(m!==void 0){var _=dc,O=e;switch(e){case"keypress":if(Yl(n)===0)break t;case"keydown":case"keyup":_=Pb;break;case"focusin":O="focus",_=bh;break;case"focusout":O="blur",_=bh;break;case"beforeblur":case"afterblur":_=bh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=bb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=zb;break;case yE:case _E:case vE:_=Ib;break;case EE:_=Bb;break;case"scroll":case"scrollend":_=Ab;break;case"wheel":_=Hb;break;case"copy":case"cut":case"paste":_=Nb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Lp;break;case"toggle":case"beforetoggle":_=Fb}var V=(t&4)!==0,M=!V&&(e==="scroll"||e==="scrollend"),w=V?m!==null?m+"Capture":null:m;V=[];for(var E=h,R;E!==null;){var D=E;if(R=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||R===null||w===null||(D=so(E,w),D!=null&&V.push(fo(E,D,R))),M)break;E=E.return}0<V.length&&(m=new _(m,O,null,n,d),g.push({event:m,listeners:V}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==vf&&(O=n.relatedTarget||n.fromElement)&&(es(O)||O[Fs]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(O=n.relatedTarget||n.toElement,_=h,O=O?es(O):null,O!==null&&(M=No(O),V=O.tag,O!==M||V!==5&&V!==27&&V!==6)&&(O=null)):(_=null,O=h),_!==O)){if(V=Pp,D="onMouseLeave",w="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(V=Lp,D="onPointerLeave",w="onPointerEnter",E="pointer"),M=_==null?m:Da(_),R=O==null?m:Da(O),m=new V(D,E+"leave",_,n,d),m.target=M,m.relatedTarget=R,D=null,es(d)===h&&(V=new V(w,E+"enter",O,n,d),V.target=R,V.relatedTarget=M,D=V),M=D,_&&O)e:{for(V=_,w=O,E=0,R=V;R;R=Gr(R))E++;for(R=0,D=w;D;D=Gr(D))R++;for(;0<E-R;)V=Gr(V),E--;for(;0<R-E;)w=Gr(w),R--;for(;E--;){if(V===w||w!==null&&V===w.alternate)break e;V=Gr(V),w=Gr(w)}V=null}else V=null;_!==null&&Dy(g,m,_,V,!1),O!==null&&M!==null&&Dy(g,M,O,V,!0)}}t:{if(m=h?Da(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=qp;else if(Bp(m))if(fE)L=ew;else{L=Wb;var q=Jb}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&jd(h.elementType)&&(L=qp):L=tw;if(L&&(L=L(e,h))){hE(g,L,n,d);break t}q&&q(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&_f(m,"number",m.value)}switch(q=h?Da(h):window,e){case"focusin":(Bp(q)||q.contentEditable==="true")&&(rs=q,Tf=h,za=null);break;case"focusout":za=Tf=rs=null;break;case"mousedown":Af=!0;break;case"contextmenu":case"mouseup":case"dragend":Af=!1,Yp(g,n,d);break;case"selectionchange":if(iw)break;case"keydown":case"keyup":Yp(g,n,d)}var T;if(Gd)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else is?uE(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(lE&&n.locale!=="ko"&&(is||y!=="onCompositionStart"?y==="onCompositionEnd"&&is&&(T=oE()):(bi=d,qd="value"in bi?bi.value:bi.textContent,is=!0)),q=Pu(h,y),0<q.length&&(y=new Up(y,e,null,n,d),g.push({event:y,listeners:q}),T?y.data=T:(T=cE(n),T!==null&&(y.data=T)))),(T=Yb?Kb(e,n):$b(e,n))&&(y=Pu(h,"onBeforeInput"),0<y.length&&(q=new Up("onBeforeInput","beforeinput",null,n,d),g.push({event:q,listeners:y}),q.data=T)),zw(g,e,h,n,d)}i0(g,t)})}function fo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Pu(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=so(e,n),r!=null&&i.unshift(fo(e,r,s)),r=so(e,t),r!=null&&i.push(fo(e,r,s))),e.tag===3)return i;e=e.return}return[]}function Gr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dy(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=so(n,s),h!=null&&a.unshift(fo(n,h,u))):r||(h=so(n,s),h!=null&&a.push(fo(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Hw=/\r\n?/g,Gw=/\u0000|\uFFFD/g;function Oy(e){return(typeof e=="string"?e:""+e).replace(Hw,`
`).replace(Gw,"")}function s0(e,t){return t=Oy(t),Oy(e)===t}function wc(){}function pt(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Cs(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Cs(e,""+i);break;case"className":Il(e,"class",i);break;case"tabIndex":Il(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Il(e,n,i);break;case"style":sE(e,i,s);break;case"data":if(t!=="object"){Il(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Fl(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&pt(e,t,"name",r.name,r,null),pt(e,t,"formEncType",r.formEncType,r,null),pt(e,t,"formMethod",r.formMethod,r,null),pt(e,t,"formTarget",r.formTarget,r,null)):(pt(e,t,"encType",r.encType,r,null),pt(e,t,"method",r.method,r,null),pt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Fl(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=wc);break;case"onScroll":i!=null&&it("scroll",e);break;case"onScrollEnd":i!=null&&it("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Fl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":it("beforetoggle",e),it("toggle",e),Gl(e,"popover",i);break;case"xlinkActuate":On(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":On(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":On(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":On(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":On(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":On(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":On(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":On(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":On(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Gl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Eb.get(n)||n,Gl(e,n,i))}}function Yf(e,t,n,i,r,s){switch(n){case"style":sE(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Cs(e,i):(typeof i=="number"||typeof i=="bigint")&&Cs(e,""+i);break;case"onScroll":i!=null&&it("scroll",e);break;case"onScrollEnd":i!=null&&it("scrollend",e);break;case"onClick":i!=null&&(e.onclick=wc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wv.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Ne]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Gl(e,n,i)}}}function ue(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",e),it("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:pt(e,t,s,a,n,null)}}r&&pt(e,t,"srcSet",n.srcSet,n,null),i&&pt(e,t,"src",n.src,n,null);return;case"input":it("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,t));break;default:pt(e,t,i,d,n,null)}}nE(e,s,l,u,h,a,r,!1),yu(e);return;case"select":it("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:pt(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?ms(e,!!i,t,!1):n!=null&&ms(e,!!i,n,!0);return;case"textarea":it("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:pt(e,t,a,l,n,null)}rE(e,i,r,s),yu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:pt(e,t,u,i,n,null)}return;case"dialog":it("beforetoggle",e),it("toggle",e),it("cancel",e),it("close",e);break;case"iframe":case"object":it("load",e);break;case"video":case"audio":for(i=0;i<ho.length;i++)it(ho[i],e);break;case"image":it("error",e),it("load",e);break;case"details":it("toggle",e);break;case"embed":case"source":case"link":it("error",e),it("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:pt(e,t,h,i,n,null)}return;default:if(jd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&Yf(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&pt(e,t,l,i,n,null))}function Fw(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||pt(e,t,_,null,i,g)}}for(var m in i){var _=i[m];if(g=n[m],i.hasOwnProperty(m)&&(_!=null||g!=null))switch(m){case"type":s=_;break;case"name":r=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(U(137,t));break;default:_!==g&&pt(e,t,m,_,i,g)}}yf(e,a,l,u,h,d,s,r);return;case"select":_=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(s)||pt(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&pt(e,t,r,s,i,u)}t=l,n=a,i=_,m!=null?ms(e,!!n,m,!1):!!i!=!!n&&(t!=null?ms(e,!!n,t,!0):ms(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:pt(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":_=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(U(91));break;default:r!==s&&pt(e,t,a,r,i,s)}iE(e,m,_);return;case"option":for(var O in n)if(m=n[O],n.hasOwnProperty(O)&&m!=null&&!i.hasOwnProperty(O))switch(O){case"selected":e.selected=!1;break;default:pt(e,t,O,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:pt(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!=null&&!i.hasOwnProperty(V)&&pt(e,t,V,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,t));break;default:pt(e,t,h,m,i,_)}return;default:if(jd(t)){for(var M in n)m=n[M],n.hasOwnProperty(M)&&m!==void 0&&!i.hasOwnProperty(M)&&Yf(e,t,M,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||Yf(e,t,d,m,i,_);return}}for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!=null&&!i.hasOwnProperty(w)&&pt(e,t,w,null,i,m);for(g in i)m=i[g],_=n[g],!i.hasOwnProperty(g)||m===_||m==null&&_==null||pt(e,t,g,m,i,_)}var Kf=null,$f=null;function Uu(e){return e.nodeType===9?e:e.ownerDocument}function xy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Xf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $h=null;function Qw(){var e=window.event;return e&&e.type==="popstate"?e===$h?!1:($h=e,!0):($h=null,!1)}var o0=typeof setTimeout=="function"?setTimeout:void 0,Yw=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,Kw=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(e){return Vy.resolve(null).then(e).catch($w)}:o0;function $w(e){setTimeout(function(){throw e})}function tr(e){return e==="head"}function My(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&Xa(a.documentElement),n&2&&Xa(a.body),n&4)for(n=a.head,Xa(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[Vo]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),_o(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);_o(t)}function Zf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Zf(n),zd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Xw(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Vo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=ln(e.nextSibling),e===null)break}return null}function Zw(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ln(e.nextSibling),e===null))return null;return e}function Jf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Jw(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function ln(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Wf=null;function ky(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function l0(e,t,n){switch(t=Uu(n),e){case"html":if(e=t.documentElement,!e)throw Error(U(452));return e;case"head":if(e=t.head,!e)throw Error(U(453));return e;case"body":if(e=t.body,!e)throw Error(U(454));return e;default:throw Error(U(451))}}function Xa(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);zd(e)}var en=new Map,Py=new Set;function Lu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ii=dt.d;dt.d={f:Ww,r:tR,D:eR,C:nR,L:iR,m:rR,X:aR,S:sR,M:oR};function Ww(){var e=ii.f(),t=Ac();return e||t}function tR(e){var t=Qs(e);t!==null&&t.tag===5&&t.type==="form"?eT(t):ii.r(e)}var $s=typeof document>"u"?null:document;function u0(e,t,n){var i=$s;if(i&&typeof t=="string"&&t){var r=Ze(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Py.has(r)||(Py.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),ue(t,"link",e),Jt(t),i.head.appendChild(t)))}}function eR(e){ii.D(e),u0("dns-prefetch",e,null)}function nR(e,t){ii.C(e,t),u0("preconnect",e,t)}function iR(e,t,n){ii.L(e,t,n);var i=$s;if(i&&e&&t){var r='link[rel="preload"][as="'+Ze(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Ze(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Ze(n.imageSizes)+'"]')):r+='[href="'+Ze(e)+'"]';var s=r;switch(t){case"style":s=Ps(e);break;case"script":s=Xs(e)}en.has(s)||(e=wt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),en.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Ho(s))||t==="script"&&i.querySelector(Go(s))||(t=i.createElement("link"),ue(t,"link",e),Jt(t),i.head.appendChild(t)))}}function rR(e,t){ii.m(e,t);var n=$s;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Ze(i)+'"][href="'+Ze(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Xs(e)}if(!en.has(s)&&(e=wt({rel:"modulepreload",href:e},t),en.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Go(s)))return}i=n.createElement("link"),ue(i,"link",e),Jt(i),n.head.appendChild(i)}}}function sR(e,t,n){ii.S(e,t,n);var i=$s;if(i&&e){var r=ds(i).hoistableStyles,s=Ps(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Ho(s)))l.loading=5;else{e=wt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=en.get(s))&&Am(e,n);var u=a=i.createElement("link");Jt(u),ue(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,tu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function aR(e,t){ii.X(e,t);var n=$s;if(n&&e){var i=ds(n).hoistableScripts,r=Xs(e),s=i.get(r);s||(s=n.querySelector(Go(r)),s||(e=wt({src:e,async:!0},t),(t=en.get(r))&&Sm(e,t),s=n.createElement("script"),Jt(s),ue(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function oR(e,t){ii.M(e,t);var n=$s;if(n&&e){var i=ds(n).hoistableScripts,r=Xs(e),s=i.get(r);s||(s=n.querySelector(Go(r)),s||(e=wt({src:e,async:!0,type:"module"},t),(t=en.get(r))&&Sm(e,t),s=n.createElement("script"),Jt(s),ue(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Uy(e,t,n,i){var r=(r=Ci.current)?Lu(r):null;if(!r)throw Error(U(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ps(n.href),n=ds(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ps(n.href);var s=ds(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(Ho(e)))&&!s._p&&(a.instance=s,a.state.loading=5),en.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},en.set(e,n),s||lR(r,e,n,a.state))),t&&i===null)throw Error(U(528,""));return a}if(t&&i!==null)throw Error(U(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Xs(n),n=ds(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,e))}}function Ps(e){return'href="'+Ze(e)+'"'}function Ho(e){return'link[rel="stylesheet"]['+e+"]"}function c0(e){return wt({},e,{"data-precedence":e.precedence,precedence:null})}function lR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),ue(t,"link",n),Jt(t),e.head.appendChild(t))}function Xs(e){return'[src="'+Ze(e)+'"]'}function Go(e){return"script[async]"+e}function Ly(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Ze(n.href)+'"]');if(i)return t.instance=i,Jt(i),i;var r=wt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Jt(i),ue(i,"style",r),tu(i,n.precedence,e),t.instance=i;case"stylesheet":r=Ps(n.href);var s=e.querySelector(Ho(r));if(s)return t.state.loading|=4,t.instance=s,Jt(s),s;i=c0(n),(r=en.get(r))&&Am(i,r),s=(e.ownerDocument||e).createElement("link"),Jt(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ue(s,"link",i),t.state.loading|=4,tu(s,n.precedence,e),t.instance=s;case"script":return s=Xs(n.src),(r=e.querySelector(Go(s)))?(t.instance=r,Jt(r),r):(i=n,(r=en.get(s))&&(i=wt({},n),Sm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),Jt(r),ue(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(U(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,tu(i,n.precedence,e));return t.instance}function tu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Am(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Sm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var eu=null;function zy(e,t,n){if(eu===null){var i=new Map,r=eu=new Map;r.set(n,i)}else r=eu,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Vo]||s[pe]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function jy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function uR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function h0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var mo=null;function cR(){}function hR(e,t,n){if(mo===null)throw Error(U(475));var i=mo;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Ps(n.href),s=e.querySelector(Ho(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=zu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,Jt(s);return}s=e.ownerDocument||e,n=c0(n),(r=en.get(r))&&Am(n,r),s=s.createElement("link"),Jt(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ue(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=zu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function fR(){if(mo===null)throw Error(U(475));var e=mo;return e.stylesheets&&e.count===0&&td(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&td(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function zu(){if(this.count--,this.count===0){if(this.stylesheets)td(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ju=null;function td(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ju=new Map,t.forEach(dR,e),ju=null,zu.call(e))}function dR(e,t){if(!(t.state.loading&4)){var n=ju.get(e);if(n)var i=n.get(null);else{n=new Map,ju.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=zu.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var go={$$typeof:Pn,Provider:null,Consumer:null,_currentValue:gr,_currentValue2:gr,_threadCount:0};function mR(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yh(0),this.hiddenUpdates=yh(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function f0(e,t,n,i,r,s,a,l,u,h,d,g){return e=new mR(e,t,n,a,l,u,h,g),t=1,s===!0&&(t|=24),s=Ue(3,null,null,t),e.current=s,s.stateNode=e,t=Zd(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},Wd(s),e}function d0(e){return e?(e=os,e):os}function m0(e,t,n,i,r,s){r=d0(r),i.context===null?i.context=r:i.pendingContext=r,i=Ni(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Di(e,i,t),n!==null&&(He(n,e,t),qa(n,e,t))}function By(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function bm(e,t){By(e,t),(e=e.alternate)&&By(e,t)}function g0(e){if(e.tag===13){var t=Ys(e,67108864);t!==null&&He(t,e,67108864),bm(e,67108864)}}var Bu=!0;function gR(e,t,n,i){var r=Y.T;Y.T=null;var s=dt.p;try{dt.p=2,wm(e,t,n,i)}finally{dt.p=s,Y.T=r}}function pR(e,t,n,i){var r=Y.T;Y.T=null;var s=dt.p;try{dt.p=8,wm(e,t,n,i)}finally{dt.p=s,Y.T=r}}function wm(e,t,n,i){if(Bu){var r=ed(i);if(r===null)Kh(e,t,i,qu,n),qy(e,i);else if(_R(r,e,t,n,i))i.stopPropagation();else if(qy(e,i),t&4&&-1<yR.indexOf(e)){for(;r!==null;){var s=Qs(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=cr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-Be(a);l.entanglements[1]|=u,a&=~u}wn(s),!(gt&6)&&(xu=pn()+500,qo(0))}}break;case 13:l=Ys(s,2),l!==null&&He(l,s,2),Ac(),bm(s,2)}if(s=ed(i),s===null&&Kh(e,t,i,qu,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Kh(e,t,i,null,n)}}function ed(e){return e=Bd(e),Rm(e)}var qu=null;function Rm(e){if(qu=null,e=es(e),e!==null){var t=No(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=jv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return qu=e,null}function p0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nb()){case Gv:return 2;case Fv:return 8;case pu:case ib:return 32;case Qv:return 268435456;default:return 32}default:return 32}}var nd=!1,Vi=null,Mi=null,ki=null,po=new Map,yo=new Map,_i=[],yR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qy(e,t){switch(e){case"focusin":case"focusout":Vi=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":ki=null;break;case"pointerover":case"pointerout":po.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yo.delete(t.pointerId)}}function Ia(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Qs(t),t!==null&&g0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function _R(e,t,n,i,r){switch(t){case"focusin":return Vi=Ia(Vi,e,t,n,i,r),!0;case"dragenter":return Mi=Ia(Mi,e,t,n,i,r),!0;case"mouseover":return ki=Ia(ki,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return po.set(s,Ia(po.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,yo.set(s,Ia(yo.get(s)||null,e,t,n,i,r)),!0}return!1}function y0(e){var t=es(e.target);if(t!==null){var n=No(t);if(n!==null){if(t=n.tag,t===13){if(t=jv(n),t!==null){e.blockedOn=t,hb(e.priority,function(){if(n.tag===13){var i=qe();i=Ud(i);var r=Ys(n,i);r!==null&&He(r,n,i),bm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ed(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);vf=i,n.target.dispatchEvent(i),vf=null}else return t=Qs(n),t!==null&&g0(t),e.blockedOn=n,!1;t.shift()}return!0}function Hy(e,t,n){nu(e)&&n.delete(t)}function vR(){nd=!1,Vi!==null&&nu(Vi)&&(Vi=null),Mi!==null&&nu(Mi)&&(Mi=null),ki!==null&&nu(ki)&&(ki=null),po.forEach(Hy),yo.forEach(Hy)}function kl(e,t){e.blockedOn===t&&(e.blockedOn=null,nd||(nd=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,vR)))}var Pl=null;function Gy(e){Pl!==e&&(Pl=e,$t.unstable_scheduleCallback($t.unstable_NormalPriority,function(){Pl===e&&(Pl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(Rm(i||n)===null)continue;break}var s=Qs(n);s!==null&&(e.splice(t,3),t-=3,kf(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function _o(e){function t(u){return kl(u,e)}Vi!==null&&kl(Vi,e),Mi!==null&&kl(Mi,e),ki!==null&&kl(ki,e),po.forEach(t),yo.forEach(t);for(var n=0;n<_i.length;n++){var i=_i[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<_i.length&&(n=_i[0],n.blockedOn===null);)y0(n),n.blockedOn===null&&_i.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Ne]||null;if(typeof s=="function")a||Gy(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Ne]||null)l=a.formAction;else if(Rm(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Gy(n)}}}function Im(e){this._internalRoot=e}Rc.prototype.render=Im.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));var n=t.current,i=qe();m0(n,i,e,t,null,null)};Rc.prototype.unmount=Im.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;m0(e.current,2,null,e,null,null),Ac(),t[Fs]=null}};function Rc(e){this._internalRoot=e}Rc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Zv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<_i.length&&t!==0&&t<_i[n].priority;n++);_i.splice(n,0,e),n===0&&y0(e)}};var Fy=Lv.version;if(Fy!=="19.1.1")throw Error(U(527,Fy,"19.1.1"));dt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=$1(t),e=e!==null?Bv(e):null,e=e===null?null:e.stateNode,e};var ER={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{Do=Ul.inject(ER),je=Ul}catch{}}cc.createRoot=function(e,t){if(!zv(e))throw Error(U(299));var n=!1,i="",r=fT,s=dT,a=mT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=f0(e,1,!1,null,null,n,i,r,s,a,l,null),e[Fs]=t.current,Tm(e),new Im(t)};cc.hydrateRoot=function(e,t,n){if(!zv(e))throw Error(U(299));var i=!1,r="",s=fT,a=dT,l=mT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=f0(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=d0(null),n=t.current,i=qe(),i=Ud(i),r=Ni(i),r.callback=null,Di(n,r,i),n=i,t.current.lanes=n,xo(t,n),wn(t),e[Fs]=t.current,Tm(e),new Rc(t)};cc.version="19.1.1";function _0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_0)}catch(e){console.error(e)}}_0(),xv.exports=cc;var TR=xv.exports;const AR=()=>{};var Qy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},SR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},E0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[g],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(v0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):SR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const g=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||g==null)throw new bR;const m=s<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const O=h<<6&192|g;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class bR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wR=function(e){const t=v0(e);return E0.encodeByteArray(t,!0)},Hu=function(e){return wR(e).replace(/\./g,"")},T0=function(e){try{return E0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=()=>RR().__FIREBASE_DEFAULTS__,CR=()=>{if(typeof process>"u"||typeof Qy>"u")return;const e=Qy.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},NR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&T0(e[1]);return t&&JSON.parse(t)},Ic=()=>{try{return AR()||IR()||CR()||NR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},A0=e=>{var t,n;return(n=(t=Ic())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},DR=e=>{const t=A0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},S0=()=>{var e;return(e=Ic())==null?void 0:e.config},b0=e=>{var t;return(t=Ic())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function w0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Hu(JSON.stringify(n)),Hu(JSON.stringify(a)),""].join(".")}const Za={};function VR(){const e={prod:[],emulator:[]};for(const t of Object.keys(Za))Za[t]?e.emulator.push(t):e.prod.push(t);return e}function MR(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Yy=!1;function R0(e,t){if(typeof window>"u"||typeof document>"u"||!Zs(window.location.host)||Za[e]===t||Za[e]||Yy)return;Za[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=VR().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Yy=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=MR(i),_=n("text"),O=document.getElementById(_)||document.createElement("span"),V=n("learnmore"),M=document.getElementById(V)||document.createElement("a"),w=n("preprendIcon"),E=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(M,V);const D=h();u(E,w),R.append(E,O,M,D),document.body.appendChild(R)}s?(O.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_e())}function PR(){var t;const e=(t=Ic())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function zR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jR(){const e=_e();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function BR(){return!PR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qR(){try{return typeof indexedDB=="object"}catch{return!1}}function HR(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="FirebaseError";class ri extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=GR,Object.setPrototypeOf(this,ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fo.prototype.create)}}class Fo{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?FR(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new ri(r,l,i)}}function FR(e,t){return e.replace(QR,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const QR=/\{\$([^}]+)}/g;function YR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Rr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(Ky(s)&&Ky(a)){if(!Rr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Ky(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function KR(e,t){const n=new $R(e,t);return n.subscribe.bind(n)}class $R{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");XR(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=Xh),r.error===void 0&&(r.error=Xh),r.complete===void 0&&(r.complete=Xh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XR(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Xh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(e){return e&&e._delegate?e._delegate:e}class Ir{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new OR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(WR(t))try{this.getOrInitializeService({instanceIdentifier:dr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=dr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=dr){return this.instances.has(t)}getOptions(t=dr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:JR(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=dr){return this.component?this.component.multipleInstances?t:dr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JR(e){return e===dr?void 0:e}function WR(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new ZR(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(st||(st={}));const e2={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},n2=st.INFO,i2={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},r2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=i2[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Cm{constructor(t){this.name=t,this._logLevel=n2,this._logHandler=r2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in st))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?e2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...t),this._logHandler(this,st.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...t),this._logHandler(this,st.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,st.INFO,...t),this._logHandler(this,st.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,st.WARN,...t),this._logHandler(this,st.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...t),this._logHandler(this,st.ERROR,...t)}}const s2=(e,t)=>t.some(n=>e instanceof n);let $y,Xy;function a2(){return $y||($y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o2(){return Xy||(Xy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I0=new WeakMap,id=new WeakMap,C0=new WeakMap,Zh=new WeakMap,Nm=new WeakMap;function l2(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(Pi(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&I0.set(n,e)}).catch(()=>{}),Nm.set(t,e),t}function u2(e){if(id.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});id.set(e,t)}let rd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return id.get(e);if(t==="objectStoreNames")return e.objectStoreNames||C0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function c2(e){rd=e(rd)}function h2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(Jh(this),t,...n);return C0.set(i,t.sort?t.sort():[t]),Pi(i)}:o2().includes(e)?function(...t){return e.apply(Jh(this),t),Pi(I0.get(this))}:function(...t){return Pi(e.apply(Jh(this),t))}}function f2(e){return typeof e=="function"?h2(e):(e instanceof IDBTransaction&&u2(e),s2(e,a2())?new Proxy(e,rd):e)}function Pi(e){if(e instanceof IDBRequest)return l2(e);if(Zh.has(e))return Zh.get(e);const t=f2(e);return t!==e&&(Zh.set(e,t),Nm.set(t,e)),t}const Jh=e=>Nm.get(e);function d2(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=Pi(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Pi(a.result),u.oldVersion,u.newVersion,Pi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const m2=["get","getKey","getAll","getAllKeys","count"],g2=["put","add","delete","clear"],Wh=new Map;function Zy(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Wh.get(t))return Wh.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=g2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||m2.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return Wh.set(t,s),s}c2(e=>({...e,get:(t,n,i)=>Zy(t,n)||e.get(t,n,i),has:(t,n)=>!!Zy(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(y2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function y2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const sd="@firebase/app",Jy="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn=new Cm("@firebase/app"),_2="@firebase/app-compat",v2="@firebase/analytics-compat",E2="@firebase/analytics",T2="@firebase/app-check-compat",A2="@firebase/app-check",S2="@firebase/auth",b2="@firebase/auth-compat",w2="@firebase/database",R2="@firebase/data-connect",I2="@firebase/database-compat",C2="@firebase/functions",N2="@firebase/functions-compat",D2="@firebase/installations",O2="@firebase/installations-compat",x2="@firebase/messaging",V2="@firebase/messaging-compat",M2="@firebase/performance",k2="@firebase/performance-compat",P2="@firebase/remote-config",U2="@firebase/remote-config-compat",L2="@firebase/storage",z2="@firebase/storage-compat",j2="@firebase/firestore",B2="@firebase/ai",q2="@firebase/firestore-compat",H2="firebase",G2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad="[DEFAULT]",F2={[sd]:"fire-core",[_2]:"fire-core-compat",[E2]:"fire-analytics",[v2]:"fire-analytics-compat",[A2]:"fire-app-check",[T2]:"fire-app-check-compat",[S2]:"fire-auth",[b2]:"fire-auth-compat",[w2]:"fire-rtdb",[R2]:"fire-data-connect",[I2]:"fire-rtdb-compat",[C2]:"fire-fn",[N2]:"fire-fn-compat",[D2]:"fire-iid",[O2]:"fire-iid-compat",[x2]:"fire-fcm",[V2]:"fire-fcm-compat",[M2]:"fire-perf",[k2]:"fire-perf-compat",[P2]:"fire-rc",[U2]:"fire-rc-compat",[L2]:"fire-gcs",[z2]:"fire-gcs-compat",[j2]:"fire-fst",[q2]:"fire-fst-compat",[B2]:"fire-vertex","fire-js":"fire-js",[H2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=new Map,Q2=new Map,od=new Map;function Wy(e,t){try{e.container.addComponent(t)}catch(n){Zn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Us(e){const t=e.name;if(od.has(t))return Zn.debug(`There were multiple attempts to register component ${t}.`),!1;od.set(t,e);for(const n of Gu.values())Wy(n,e);for(const n of Q2.values())Wy(n,e);return!0}function Dm(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function an(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new Fo("app","Firebase",Y2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=G2;function N0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:ad,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Ui.create("bad-app-name",{appName:String(r)});if(n||(n=S0()),!n)throw Ui.create("no-options");const s=Gu.get(r);if(s){if(Rr(n,s.options)&&Rr(i,s.config))return s;throw Ui.create("duplicate-app",{appName:r})}const a=new t2(r);for(const u of od.values())a.addComponent(u);const l=new K2(n,i,a);return Gu.set(r,l),l}function D0(e=ad){const t=Gu.get(e);if(!t&&e===ad&&S0())return N0();if(!t)throw Ui.create("no-app",{appName:e});return t}function Li(e,t,n){let i=F2[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Zn.warn(a.join(" "));return}Us(new Ir(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="firebase-heartbeat-database",X2=1,vo="firebase-heartbeat-store";let tf=null;function O0(){return tf||(tf=d2($2,X2,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(vo)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ui.create("idb-open",{originalErrorMessage:e.message})})),tf}async function Z2(e){try{const n=(await O0()).transaction(vo),i=await n.objectStore(vo).get(x0(e));return await n.done,i}catch(t){if(t instanceof ri)Zn.warn(t.message);else{const n=Ui.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Zn.warn(n.message)}}}async function t_(e,t){try{const i=(await O0()).transaction(vo,"readwrite");await i.objectStore(vo).put(t,x0(e)),await i.done}catch(n){if(n instanceof ri)Zn.warn(n.message);else{const i=Ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zn.warn(i.message)}}}function x0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=1024,W2=30;class tI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=e_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>W2){const a=iI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Zn.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=e_(),{heartbeatsToSend:i,unsentEntries:r}=eI(this._heartbeatsCache.heartbeats),s=Hu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Zn.warn(n),""}}}function e_(){return new Date().toISOString().substring(0,10)}function eI(e,t=J2){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),n_(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),n_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class nI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qR()?HR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Z2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return t_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return t_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function n_(e){return Hu(JSON.stringify({version:2,heartbeats:e})).length}function iI(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(e){Us(new Ir("platform-logger",t=>new p2(t),"PRIVATE")),Us(new Ir("heartbeat",t=>new tI(t),"PRIVATE")),Li(sd,Jy,e),Li(sd,Jy,"esm2020"),Li("fire-js","")}rI("");var sI="firebase",aI="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li(sI,aI,"app");var i_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zi,V0;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,y){function v(){}v.prototype=y.prototype,T.D=y.prototype,T.prototype=new v,T.prototype.constructor=T,T.C=function(A,b,I){for(var S=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)S[Rt-2]=arguments[Rt];return y.prototype[b].apply(A,S)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,y,v){v||(v=0);var A=Array(16);if(typeof y=="string")for(var b=0;16>b;++b)A[b]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(b=0;16>b;++b)A[b]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=T.g[0],v=T.g[1],b=T.g[2];var I=T.g[3],S=y+(I^v&(b^I))+A[0]+3614090360&4294967295;y=v+(S<<7&4294967295|S>>>25),S=I+(b^y&(v^b))+A[1]+3905402710&4294967295,I=y+(S<<12&4294967295|S>>>20),S=b+(v^I&(y^v))+A[2]+606105819&4294967295,b=I+(S<<17&4294967295|S>>>15),S=v+(y^b&(I^y))+A[3]+3250441966&4294967295,v=b+(S<<22&4294967295|S>>>10),S=y+(I^v&(b^I))+A[4]+4118548399&4294967295,y=v+(S<<7&4294967295|S>>>25),S=I+(b^y&(v^b))+A[5]+1200080426&4294967295,I=y+(S<<12&4294967295|S>>>20),S=b+(v^I&(y^v))+A[6]+2821735955&4294967295,b=I+(S<<17&4294967295|S>>>15),S=v+(y^b&(I^y))+A[7]+4249261313&4294967295,v=b+(S<<22&4294967295|S>>>10),S=y+(I^v&(b^I))+A[8]+1770035416&4294967295,y=v+(S<<7&4294967295|S>>>25),S=I+(b^y&(v^b))+A[9]+2336552879&4294967295,I=y+(S<<12&4294967295|S>>>20),S=b+(v^I&(y^v))+A[10]+4294925233&4294967295,b=I+(S<<17&4294967295|S>>>15),S=v+(y^b&(I^y))+A[11]+2304563134&4294967295,v=b+(S<<22&4294967295|S>>>10),S=y+(I^v&(b^I))+A[12]+1804603682&4294967295,y=v+(S<<7&4294967295|S>>>25),S=I+(b^y&(v^b))+A[13]+4254626195&4294967295,I=y+(S<<12&4294967295|S>>>20),S=b+(v^I&(y^v))+A[14]+2792965006&4294967295,b=I+(S<<17&4294967295|S>>>15),S=v+(y^b&(I^y))+A[15]+1236535329&4294967295,v=b+(S<<22&4294967295|S>>>10),S=y+(b^I&(v^b))+A[1]+4129170786&4294967295,y=v+(S<<5&4294967295|S>>>27),S=I+(v^b&(y^v))+A[6]+3225465664&4294967295,I=y+(S<<9&4294967295|S>>>23),S=b+(y^v&(I^y))+A[11]+643717713&4294967295,b=I+(S<<14&4294967295|S>>>18),S=v+(I^y&(b^I))+A[0]+3921069994&4294967295,v=b+(S<<20&4294967295|S>>>12),S=y+(b^I&(v^b))+A[5]+3593408605&4294967295,y=v+(S<<5&4294967295|S>>>27),S=I+(v^b&(y^v))+A[10]+38016083&4294967295,I=y+(S<<9&4294967295|S>>>23),S=b+(y^v&(I^y))+A[15]+3634488961&4294967295,b=I+(S<<14&4294967295|S>>>18),S=v+(I^y&(b^I))+A[4]+3889429448&4294967295,v=b+(S<<20&4294967295|S>>>12),S=y+(b^I&(v^b))+A[9]+568446438&4294967295,y=v+(S<<5&4294967295|S>>>27),S=I+(v^b&(y^v))+A[14]+3275163606&4294967295,I=y+(S<<9&4294967295|S>>>23),S=b+(y^v&(I^y))+A[3]+4107603335&4294967295,b=I+(S<<14&4294967295|S>>>18),S=v+(I^y&(b^I))+A[8]+1163531501&4294967295,v=b+(S<<20&4294967295|S>>>12),S=y+(b^I&(v^b))+A[13]+2850285829&4294967295,y=v+(S<<5&4294967295|S>>>27),S=I+(v^b&(y^v))+A[2]+4243563512&4294967295,I=y+(S<<9&4294967295|S>>>23),S=b+(y^v&(I^y))+A[7]+1735328473&4294967295,b=I+(S<<14&4294967295|S>>>18),S=v+(I^y&(b^I))+A[12]+2368359562&4294967295,v=b+(S<<20&4294967295|S>>>12),S=y+(v^b^I)+A[5]+4294588738&4294967295,y=v+(S<<4&4294967295|S>>>28),S=I+(y^v^b)+A[8]+2272392833&4294967295,I=y+(S<<11&4294967295|S>>>21),S=b+(I^y^v)+A[11]+1839030562&4294967295,b=I+(S<<16&4294967295|S>>>16),S=v+(b^I^y)+A[14]+4259657740&4294967295,v=b+(S<<23&4294967295|S>>>9),S=y+(v^b^I)+A[1]+2763975236&4294967295,y=v+(S<<4&4294967295|S>>>28),S=I+(y^v^b)+A[4]+1272893353&4294967295,I=y+(S<<11&4294967295|S>>>21),S=b+(I^y^v)+A[7]+4139469664&4294967295,b=I+(S<<16&4294967295|S>>>16),S=v+(b^I^y)+A[10]+3200236656&4294967295,v=b+(S<<23&4294967295|S>>>9),S=y+(v^b^I)+A[13]+681279174&4294967295,y=v+(S<<4&4294967295|S>>>28),S=I+(y^v^b)+A[0]+3936430074&4294967295,I=y+(S<<11&4294967295|S>>>21),S=b+(I^y^v)+A[3]+3572445317&4294967295,b=I+(S<<16&4294967295|S>>>16),S=v+(b^I^y)+A[6]+76029189&4294967295,v=b+(S<<23&4294967295|S>>>9),S=y+(v^b^I)+A[9]+3654602809&4294967295,y=v+(S<<4&4294967295|S>>>28),S=I+(y^v^b)+A[12]+3873151461&4294967295,I=y+(S<<11&4294967295|S>>>21),S=b+(I^y^v)+A[15]+530742520&4294967295,b=I+(S<<16&4294967295|S>>>16),S=v+(b^I^y)+A[2]+3299628645&4294967295,v=b+(S<<23&4294967295|S>>>9),S=y+(b^(v|~I))+A[0]+4096336452&4294967295,y=v+(S<<6&4294967295|S>>>26),S=I+(v^(y|~b))+A[7]+1126891415&4294967295,I=y+(S<<10&4294967295|S>>>22),S=b+(y^(I|~v))+A[14]+2878612391&4294967295,b=I+(S<<15&4294967295|S>>>17),S=v+(I^(b|~y))+A[5]+4237533241&4294967295,v=b+(S<<21&4294967295|S>>>11),S=y+(b^(v|~I))+A[12]+1700485571&4294967295,y=v+(S<<6&4294967295|S>>>26),S=I+(v^(y|~b))+A[3]+2399980690&4294967295,I=y+(S<<10&4294967295|S>>>22),S=b+(y^(I|~v))+A[10]+4293915773&4294967295,b=I+(S<<15&4294967295|S>>>17),S=v+(I^(b|~y))+A[1]+2240044497&4294967295,v=b+(S<<21&4294967295|S>>>11),S=y+(b^(v|~I))+A[8]+1873313359&4294967295,y=v+(S<<6&4294967295|S>>>26),S=I+(v^(y|~b))+A[15]+4264355552&4294967295,I=y+(S<<10&4294967295|S>>>22),S=b+(y^(I|~v))+A[6]+2734768916&4294967295,b=I+(S<<15&4294967295|S>>>17),S=v+(I^(b|~y))+A[13]+1309151649&4294967295,v=b+(S<<21&4294967295|S>>>11),S=y+(b^(v|~I))+A[4]+4149444226&4294967295,y=v+(S<<6&4294967295|S>>>26),S=I+(v^(y|~b))+A[11]+3174756917&4294967295,I=y+(S<<10&4294967295|S>>>22),S=b+(y^(I|~v))+A[2]+718787259&4294967295,b=I+(S<<15&4294967295|S>>>17),S=v+(I^(b|~y))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(b+(S<<21&4294967295|S>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+I&4294967295}i.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var v=y-this.blockSize,A=this.B,b=this.h,I=0;I<y;){if(b==0)for(;I<=v;)r(this,T,I),I+=this.blockSize;if(typeof T=="string"){for(;I<y;)if(A[b++]=T.charCodeAt(I++),b==this.blockSize){r(this,A),b=0;break}}else for(;I<y;)if(A[b++]=T[I++],b==this.blockSize){r(this,A),b=0;break}}this.h=b,this.o+=y},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var v=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=v&255,v/=256;for(this.u(T),T=Array(16),y=v=0;4>y;++y)for(var A=0;32>A;A+=8)T[v++]=this.g[y]>>>A&255;return T};function s(T,y){var v=l;return Object.prototype.hasOwnProperty.call(v,T)?v[T]:v[T]=y(T)}function a(T,y){this.h=y;for(var v=[],A=!0,b=T.length-1;0<=b;b--){var I=T[b]|0;A&&I==y||(v[b]=I,A=!1)}this.g=v}var l={};function u(T){return-128<=T&&128>T?s(T,function(y){return new a([y|0],0>y?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return M(h(-T));for(var y=[],v=1,A=0;T>=v;A++)y[A]=T/v|0,v*=4294967296;return new a(y,0)}function d(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return M(d(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(y,8)),A=g,b=0;b<T.length;b+=8){var I=Math.min(8,T.length-b),S=parseInt(T.substring(b,b+I),y);8>I?(I=h(Math.pow(y,I)),A=A.j(I).add(h(S))):(A=A.j(v),A=A.add(h(S)))}return A}var g=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(V(this))return-M(this).m();for(var T=0,y=1,v=0;v<this.g.length;v++){var A=this.i(v);T+=(0<=A?A:4294967296+A)*y,y*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(O(this))return"0";if(V(this))return"-"+M(this).toString(T);for(var y=h(Math.pow(T,6)),v=this,A="";;){var b=D(v,y).g;v=w(v,b.j(y));var I=((0<v.g.length?v.g[0]:v.h)>>>0).toString(T);if(v=b,O(v))return I+A;for(;6>I.length;)I="0"+I;A=I+A}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function O(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function V(T){return T.h==-1}e.l=function(T){return T=w(this,T),V(T)?-1:O(T)?0:1};function M(T){for(var y=T.g.length,v=[],A=0;A<y;A++)v[A]=~T.g[A];return new a(v,~T.h).add(m)}e.abs=function(){return V(this)?M(this):this},e.add=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],A=0,b=0;b<=y;b++){var I=A+(this.i(b)&65535)+(T.i(b)&65535),S=(I>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);A=S>>>16,I&=65535,S&=65535,v[b]=S<<16|I}return new a(v,v[v.length-1]&-2147483648?-1:0)};function w(T,y){return T.add(M(y))}e.j=function(T){if(O(this)||O(T))return g;if(V(this))return V(T)?M(this).j(M(T)):M(M(this).j(T));if(V(T))return M(this.j(M(T)));if(0>this.l(_)&&0>T.l(_))return h(this.m()*T.m());for(var y=this.g.length+T.g.length,v=[],A=0;A<2*y;A++)v[A]=0;for(A=0;A<this.g.length;A++)for(var b=0;b<T.g.length;b++){var I=this.i(A)>>>16,S=this.i(A)&65535,Rt=T.i(b)>>>16,Oe=T.i(b)&65535;v[2*A+2*b]+=S*Oe,E(v,2*A+2*b),v[2*A+2*b+1]+=I*Oe,E(v,2*A+2*b+1),v[2*A+2*b+1]+=S*Rt,E(v,2*A+2*b+1),v[2*A+2*b+2]+=I*Rt,E(v,2*A+2*b+2)}for(A=0;A<y;A++)v[A]=v[2*A+1]<<16|v[2*A];for(A=y;A<2*y;A++)v[A]=0;return new a(v,0)};function E(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function R(T,y){this.g=T,this.h=y}function D(T,y){if(O(y))throw Error("division by zero");if(O(T))return new R(g,g);if(V(T))return y=D(M(T),y),new R(M(y.g),M(y.h));if(V(y))return y=D(T,M(y)),new R(M(y.g),y.h);if(30<T.g.length){if(V(T)||V(y))throw Error("slowDivide_ only works with positive integers.");for(var v=m,A=y;0>=A.l(T);)v=L(v),A=L(A);var b=q(v,1),I=q(A,1);for(A=q(A,2),v=q(v,2);!O(A);){var S=I.add(A);0>=S.l(T)&&(b=b.add(v),I=S),A=q(A,1),v=q(v,1)}return y=w(T,b.j(y)),new R(b,y)}for(b=g;0<=T.l(y);){for(v=Math.max(1,Math.floor(T.m()/y.m())),A=Math.ceil(Math.log(v)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),I=h(v),S=I.j(y);V(S)||0<S.l(T);)v-=A,I=h(v),S=I.j(y);O(I)&&(I=m),b=b.add(I),T=w(T,S)}return new R(b,T)}e.A=function(T){return D(this,T).h},e.and=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],A=0;A<y;A++)v[A]=this.i(A)&T.i(A);return new a(v,this.h&T.h)},e.or=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],A=0;A<y;A++)v[A]=this.i(A)|T.i(A);return new a(v,this.h|T.h)},e.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],A=0;A<y;A++)v[A]=this.i(A)^T.i(A);return new a(v,this.h^T.h)};function L(T){for(var y=T.g.length+1,v=[],A=0;A<y;A++)v[A]=T.i(A)<<1|T.i(A-1)>>>31;return new a(v,T.h)}function q(T,y){var v=y>>5;y%=32;for(var A=T.g.length-v,b=[],I=0;I<A;I++)b[I]=0<y?T.i(I+v)>>>y|T.i(I+v+1)<<32-y:T.i(I+v);return new a(b,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,V0=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,zi=a}).apply(typeof i_<"u"?i_:typeof self<"u"?self:typeof window<"u"?window:{});var Ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var M0,xa,k0,iu,ld,P0,U0,L0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ll=="object"&&Ll];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var C=o[p];if(!(C in f))break t;f=f[C]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,p=!1,C={next:function(){if(!p&&f<o.length){var x=f++;return{value:c(x,o[x]),done:!1}}return p=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,p),o.apply(c,C)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function O(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,C,x){for(var z=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)z[Et-2]=arguments[Et];return c.prototype[C].apply(p,z)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function M(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const C=o.length||0,x=p.length||0;o.length=C+x;for(let z=0;z<x;z++)o[C+z]=p[z]}else o.push(p)}}class w{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var L=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function q(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function T(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(o,c){let f,p;for(let C=1;C<arguments.length;C++){p=arguments[C];for(f in p)o[f]=p[f];for(let x=0;x<v.length;x++)f=v[x],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function b(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function I(o){l.setTimeout(()=>{throw o},0)}function S(){var o=vt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Rt{constructor(){this.h=this.g=null}add(c,f){const p=Oe.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var Oe=new w(()=>new B,o=>o.reset());class B{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let J,$=!1,vt=new Rt,Dt=()=>{const o=l.Promise.resolve(void 0);J=()=>{o.then(si)}};var si=()=>{for(var o;o=S();){try{o.h.call(o.g)}catch(f){I(f)}var c=Oe;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}$=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var Ft=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function xe(o,c){if(tt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{D(c.nodeName);var C=!0;break t}catch{}C=!1}C||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:sl[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&xe.aa.h.call(this)}}O(xe,tt);var sl={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var ir="closure_listenable_"+(1e6*Math.random()|0),al=0;function Rn(o,c,f,p,C){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=C,this.key=++al,this.da=this.fa=!1}function In(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function rr(o){this.src=o,this.g={},this.h=0}rr.prototype.add=function(o,c,f,p,C){var x=o.toString();o=this.g[x],o||(o=this.g[x]=[],this.h++);var z=aa(o,c,p,C);return-1<z?(c=o[z],f||(c.fa=!1)):(c=new Rn(c,this.src,x,!!p,C),c.fa=f,o.push(c)),c};function sa(o,c){var f=c.type;if(f in o.g){var p=o.g[f],C=Array.prototype.indexOf.call(p,c,void 0),x;(x=0<=C)&&Array.prototype.splice.call(p,C,1),x&&(In(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function aa(o,c,f,p){for(var C=0;C<o.length;++C){var x=o[C];if(!x.da&&x.listener==c&&x.capture==!!f&&x.ha==p)return C}return-1}var Lr="closure_lm_"+(1e6*Math.random()|0),Cn={};function Ag(o,c,f,p,C){if(Array.isArray(c)){for(var x=0;x<c.length;x++)Ag(o,c[x],f,p,C);return null}return f=wg(f),o&&o[ir]?o.K(c,f,h(p)?!!p.capture:!1,C):ZS(o,c,f,!1,p,C)}function ZS(o,c,f,p,C,x){if(!c)throw Error("Invalid event type");var z=h(C)?!!C.capture:!!C,Et=Zc(o);if(Et||(o[Lr]=Et=new rr(o)),f=Et.add(c,f,p,z,x),f.proxy)return f;if(p=JS(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)Ft||(C=z),C===void 0&&(C=!1),o.addEventListener(c.toString(),p,C);else if(o.attachEvent)o.attachEvent(bg(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function JS(){function o(f){return c.call(o.src,o.listener,f)}const c=WS;return o}function Sg(o,c,f,p,C){if(Array.isArray(c))for(var x=0;x<c.length;x++)Sg(o,c[x],f,p,C);else p=h(p)?!!p.capture:!!p,f=wg(f),o&&o[ir]?(o=o.i,c=String(c).toString(),c in o.g&&(x=o.g[c],f=aa(x,f,p,C),-1<f&&(In(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete o.g[c],o.h--)))):o&&(o=Zc(o))&&(c=o.g[c.toString()],o=-1,c&&(o=aa(c,f,p,C)),(f=-1<o?c[o]:null)&&Xc(f))}function Xc(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[ir])sa(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(bg(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=Zc(c))?(sa(f,o),f.h==0&&(f.src=null,c[Lr]=null)):In(o)}}}function bg(o){return o in Cn?Cn[o]:Cn[o]="on"+o}function WS(o,c){if(o.da)o=!0;else{c=new xe(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&Xc(o),o=f.call(p,c)}return o}function Zc(o){return o=o[Lr],o instanceof rr?o:null}var Jc="__closure_events_fn_"+(1e9*Math.random()>>>0);function wg(o){return typeof o=="function"?o:(o[Jc]||(o[Jc]=function(c){return o.handleEvent(c)}),o[Jc])}function he(){W.call(this),this.i=new rr(this),this.M=this,this.F=null}O(he,W),he.prototype[ir]=!0,he.prototype.removeEventListener=function(o,c,f,p){Sg(this,o,c,f,p)};function ve(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new tt(c,o);else if(c instanceof tt)c.target=c.target||o;else{var C=c;c=new tt(p,o),A(c,C)}if(C=!0,f)for(var x=f.length-1;0<=x;x--){var z=c.g=f[x];C=ol(z,p,!0,c)&&C}if(z=c.g=o,C=ol(z,p,!0,c)&&C,C=ol(z,p,!1,c)&&C,f)for(x=0;x<f.length;x++)z=c.g=f[x],C=ol(z,p,!1,c)&&C}he.prototype.N=function(){if(he.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)In(f[p]);delete o.g[c],o.h--}}this.F=null},he.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},he.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function ol(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var C=!0,x=0;x<c.length;++x){var z=c[x];if(z&&!z.da&&z.capture==f){var Et=z.listener,ie=z.ha||z.src;z.fa&&sa(o.i,z),C=Et.call(ie,p)!==!1&&C}}return C&&!p.defaultPrevented}function Rg(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Ig(o){o.g=Rg(()=>{o.g=null,o.i&&(o.i=!1,Ig(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class t1 extends W{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Ig(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oa(o){W.call(this),this.h=o,this.g={}}O(oa,W);var Cg=[];function Ng(o){q(o.g,function(c,f){this.g.hasOwnProperty(f)&&Xc(c)},o),o.g={}}oa.prototype.N=function(){oa.aa.N.call(this),Ng(this)},oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wc=l.JSON.stringify,e1=l.JSON.parse,n1=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function th(){}th.prototype.h=null;function Dg(o){return o.h||(o.h=o.i())}function Og(){}var la={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eh(){tt.call(this,"d")}O(eh,tt);function nh(){tt.call(this,"c")}O(nh,tt);var sr={},xg=null;function ll(){return xg=xg||new he}sr.La="serverreachability";function Vg(o){tt.call(this,sr.La,o)}O(Vg,tt);function ua(o){const c=ll();ve(c,new Vg(c))}sr.STAT_EVENT="statevent";function Mg(o,c){tt.call(this,sr.STAT_EVENT,o),this.stat=c}O(Mg,tt);function Ee(o){const c=ll();ve(c,new Mg(c,o))}sr.Ma="timingevent";function kg(o,c){tt.call(this,sr.Ma,o),this.size=c}O(kg,tt);function ca(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function ha(){this.g=!0}ha.prototype.xa=function(){this.g=!1};function i1(o,c,f,p,C,x){o.info(function(){if(o.g)if(x)for(var z="",Et=x.split("&"),ie=0;ie<Et.length;ie++){var ht=Et[ie].split("=");if(1<ht.length){var fe=ht[0];ht=ht[1];var de=fe.split("_");z=2<=de.length&&de[1]=="type"?z+(fe+"="+ht+"&"):z+(fe+"=redacted&")}}else z=null;else z=x;return"XMLHTTP REQ ("+p+") [attempt "+C+"]: "+c+`
`+f+`
`+z})}function r1(o,c,f,p,C,x,z){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+C+"]: "+c+`
`+f+`
`+x+" "+z})}function zr(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+a1(o,f)+(p?" "+p:"")})}function s1(o,c){o.info(function(){return"TIMEOUT: "+c})}ha.prototype.info=function(){};function a1(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var C=p[1];if(Array.isArray(C)&&!(1>C.length)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(var z=1;z<C.length;z++)C[z]=""}}}}return Wc(f)}catch{return c}}var ul={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ih;function cl(){}O(cl,th),cl.prototype.g=function(){return new XMLHttpRequest},cl.prototype.i=function(){return{}},ih=new cl;function ai(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new oa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ug}function Ug(){this.i=null,this.g="",this.h=!1}var Lg={},rh={};function sh(o,c,f){o.L=1,o.v=ml(Nn(c)),o.m=f,o.P=!0,zg(o,null)}function zg(o,c){o.F=Date.now(),hl(o),o.A=Nn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),Wg(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Ug,o.g=yp(o.j,f?c:null,!o.m),0<o.O&&(o.M=new t1(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(Cg[0]=C.toString()),C=Cg);for(var x=0;x<C.length;x++){var z=Ag(f,C[x],p||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),ua(),i1(o.i,o.u,o.A,o.l,o.R,o.m)}ai.prototype.ca=function(o){o=o.target;const c=this.M;c&&Dn(o)==3?c.j():this.Y(o)},ai.prototype.Y=function(o){try{if(o==this.g)t:{const de=Dn(this.g);var c=this.g.Ba();const qr=this.g.Z();if(!(3>de)&&(de!=3||this.g&&(this.h.h||this.g.oa()||ap(this.g)))){this.J||de!=4||c==7||(c==8||0>=qr?ua(3):ua(2)),ah(this);var f=this.g.Z();this.X=f;e:if(jg(this)){var p=ap(this.g);o="";var C=p.length,x=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ar(this),fa(this);var z="";break e}this.h.i=new l.TextDecoder}for(c=0;c<C;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(x&&c==C-1)});p.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,r1(this.i,this.u,this.A,this.l,this.R,de,f),this.o){if(this.T&&!this.K){e:{if(this.g){var Et,ie=this.g;if((Et=ie.g?ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Et)){var ht=Et;break e}}ht=null}if(f=ht)zr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oh(this,f);else{this.o=!1,this.s=3,Ee(12),ar(this),fa(this);break t}}if(this.P){f=!0;let nn;for(;!this.J&&this.C<z.length;)if(nn=o1(this,z),nn==rh){de==4&&(this.s=4,Ee(14),f=!1),zr(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==Lg){this.s=4,Ee(15),zr(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else zr(this.i,this.l,nn,null),oh(this,nn);if(jg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),de!=4||z.length!=0||this.h.h||(this.s=1,Ee(16),f=!1),this.o=this.o&&f,!f)zr(this.i,this.l,z,"[Invalid Chunked Response]"),ar(this),fa(this);else if(0<z.length&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.ba&&!fe.M&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),dh(fe),fe.M=!0,Ee(11))}}else zr(this.i,this.l,z,null),oh(this,z);de==4&&ar(this),this.o&&!this.J&&(de==4?dp(this.j,this):(this.o=!1,hl(this)))}else b1(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),ar(this),fa(this)}}}catch{}finally{}};function jg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function o1(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?rh:(f=Number(c.substring(f,p)),isNaN(f)?Lg:(p+=1,p+f>c.length?rh:(c=c.slice(p,p+f),o.C=p+f,c)))}ai.prototype.cancel=function(){this.J=!0,ar(this)};function hl(o){o.S=Date.now()+o.I,Bg(o,o.I)}function Bg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ca(m(o.ba,o),c)}function ah(o){o.B&&(l.clearTimeout(o.B),o.B=null)}ai.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(s1(this.i,this.A),this.L!=2&&(ua(),Ee(17)),ar(this),this.s=2,fa(this)):Bg(this,this.S-o)};function fa(o){o.j.G==0||o.J||dp(o.j,o)}function ar(o){ah(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Ng(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function oh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||lh(f.h,o))){if(!o.K&&lh(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var C=p;if(C[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)El(f),_l(f);else break t;fh(f),Ee(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ca(m(f.Za,f),6e3));if(1>=Gg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else lr(f,11)}else if((o.K||f.g==o)&&El(f),!E(c))for(C=f.Da.g.parse(c),c=0;c<C.length;c++){let ht=C[c];if(f.T=ht[0],ht=ht[1],f.G==2)if(ht[0]=="c"){f.K=ht[1],f.ia=ht[2];const fe=ht[3];fe!=null&&(f.la=fe,f.j.info("VER="+f.la));const de=ht[4];de!=null&&(f.Aa=de,f.j.info("SVER="+f.Aa));const qr=ht[5];qr!=null&&typeof qr=="number"&&0<qr&&(p=1.5*qr,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const nn=o.g;if(nn){const Al=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Al){var x=p.h;x.g||Al.indexOf("spdy")==-1&&Al.indexOf("quic")==-1&&Al.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(uh(x,x.h),x.h=null))}if(p.D){const mh=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;mh&&(p.ya=mh,St(p.I,p.D,mh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var z=o;if(p.qa=pp(p,p.J?p.ia:null,p.W),z.K){Fg(p.h,z);var Et=z,ie=p.L;ie&&(Et.I=ie),Et.B&&(ah(Et),hl(Et)),p.g=z}else hp(p);0<f.i.length&&vl(f)}else ht[0]!="stop"&&ht[0]!="close"||lr(f,7);else f.G==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?lr(f,7):hh(f):ht[0]!="noop"&&f.l&&f.l.ta(ht),f.v=0)}}ua(4)}catch{}}var l1=class{constructor(o,c){this.g=o,this.map=c}};function qg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Gg(o){return o.h?1:o.g?o.g.size:0}function lh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function uh(o,c){o.g?o.g.add(c):o.h=c}function Fg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}qg.prototype.cancel=function(){if(this.i=Qg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Qg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function u1(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function c1(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function Yg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=c1(o),p=u1(o),C=p.length,x=0;x<C;x++)c.call(void 0,p[x],f&&f[x],o)}var Kg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function h1(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),C=null;if(0<=p){var x=o[f].substring(0,p);C=o[f].substring(p+1)}else x=o[f];c(x,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function or(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof or){this.h=o.h,fl(this,o.j),this.o=o.o,this.g=o.g,dl(this,o.s),this.l=o.l;var c=o.i,f=new ga;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),$g(this,f),this.m=o.m}else o&&(c=String(o).match(Kg))?(this.h=!1,fl(this,c[1]||"",!0),this.o=da(c[2]||""),this.g=da(c[3]||"",!0),dl(this,c[4]),this.l=da(c[5]||"",!0),$g(this,c[6]||"",!0),this.m=da(c[7]||"")):(this.h=!1,this.i=new ga(null,this.h))}or.prototype.toString=function(){var o=[],c=this.j;c&&o.push(ma(c,Xg,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(ma(c,Xg,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(ma(f,f.charAt(0)=="/"?m1:d1,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",ma(f,p1)),o.join("")};function Nn(o){return new or(o)}function fl(o,c,f){o.j=f?da(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function dl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function $g(o,c,f){c instanceof ga?(o.i=c,y1(o.i,o.h)):(f||(c=ma(c,g1)),o.i=new ga(c,o.h))}function St(o,c,f){o.i.set(c,f)}function ml(o){return St(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function da(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ma(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,f1),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function f1(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Xg=/[#\/\?@]/g,d1=/[#\?:]/g,m1=/[#\?]/g,g1=/[#\?@]/g,p1=/#/g;function ga(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function oi(o){o.g||(o.g=new Map,o.h=0,o.i&&h1(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=ga.prototype,e.add=function(o,c){oi(this),this.i=null,o=jr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function Zg(o,c){oi(o),c=jr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Jg(o,c){return oi(o),c=jr(o,c),o.g.has(c)}e.forEach=function(o,c){oi(this),this.g.forEach(function(f,p){f.forEach(function(C){o.call(c,C,p,this)},this)},this)},e.na=function(){oi(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const C=o[p];for(let x=0;x<C.length;x++)f.push(c[p])}return f},e.V=function(o){oi(this);let c=[];if(typeof o=="string")Jg(this,o)&&(c=c.concat(this.g.get(jr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return oi(this),this.i=null,o=jr(this,o),Jg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Wg(o,c,f){Zg(o,c),0<f.length&&(o.i=null,o.g.set(jr(o,c),V(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const x=encodeURIComponent(String(p)),z=this.V(p);for(p=0;p<z.length;p++){var C=x;z[p]!==""&&(C+="="+encodeURIComponent(String(z[p]))),o.push(C)}}return this.i=o.join("&")};function jr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function y1(o,c){c&&!o.j&&(oi(o),o.i=null,o.g.forEach(function(f,p){var C=p.toLowerCase();p!=C&&(Zg(this,p),Wg(this,C,f))},o)),o.j=c}function _1(o,c){const f=new ha;if(l.Image){const p=new Image;p.onload=_(li,f,"TestLoadImage: loaded",!0,c,p),p.onerror=_(li,f,"TestLoadImage: error",!1,c,p),p.onabort=_(li,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=_(li,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function v1(o,c){const f=new ha,p=new AbortController,C=setTimeout(()=>{p.abort(),li(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(x=>{clearTimeout(C),x.ok?li(f,"TestPingServer: ok",!0,c):li(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(C),li(f,"TestPingServer: error",!1,c)})}function li(o,c,f,p,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),p(f)}catch{}}function E1(){this.g=new n1}function T1(o,c,f){const p=f||"";try{Yg(o,function(C,x){let z=C;h(C)&&(z=Wc(C)),c.push(p+x+"="+encodeURIComponent(z))})}catch(C){throw c.push(p+"type="+encodeURIComponent("_badmap")),C}}function gl(o){this.l=o.Ub||null,this.j=o.eb||!1}O(gl,th),gl.prototype.g=function(){return new pl(this.l,this.j)},gl.prototype.i=function(o){return function(){return o}}({});function pl(o,c){he.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(pl,he),e=pl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,ya(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pa(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ya(this)),this.g&&(this.readyState=3,ya(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tp(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function tp(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?pa(this):ya(this),this.readyState==3&&tp(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,pa(this))},e.Qa=function(o){this.g&&(this.response=o,pa(this))},e.ga=function(){this.g&&pa(this)};function pa(o){o.readyState=4,o.l=null,o.j=null,o.v=null,ya(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function ya(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ep(o){let c="";return q(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function ch(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=ep(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):St(o,c,f))}function Mt(o){he.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Mt,he);var A1=/^https?$/i,S1=["POST","PUT"];e=Mt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ih.g(),this.v=this.o?Dg(this.o):Dg(ih),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(x){np(this,x);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var C in p)f.set(C,p[C]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const x of p.keys())f.set(x,p.get(x));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),C=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(S1,c,void 0))||p||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[x,z]of f)this.g.setRequestHeader(x,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sp(this),this.u=!0,this.g.send(o),this.u=!1}catch(x){np(this,x)}};function np(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,ip(o),yl(o)}function ip(o){o.A||(o.A=!0,ve(o,"complete"),ve(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ve(this,"complete"),ve(this,"abort"),yl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yl(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?rp(this):this.bb())},e.bb=function(){rp(this)};function rp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Dn(o)!=4||o.Z()!=2)){if(o.u&&Dn(o)==4)Rg(o.Ea,0,o);else if(ve(o,"readystatechange"),Dn(o)==4){o.h=!1;try{const z=o.Z();t:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=z===0){var C=String(o.D).match(Kg)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),p=!A1.test(C?C.toLowerCase():"")}f=p}if(f)ve(o,"complete"),ve(o,"success");else{o.m=6;try{var x=2<Dn(o)?o.g.statusText:""}catch{x=""}o.l=x+" ["+o.Z()+"]",ip(o)}}finally{yl(o)}}}}function yl(o,c){if(o.g){sp(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||ve(o,"ready");try{f.onreadystatechange=p}catch{}}}function sp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Dn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),e1(c)}};function ap(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function b1(o){const c={};o=(o.g&&2<=Dn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(E(o[p]))continue;var f=b(o[p]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const x=c[C]||[];c[C]=x,x.push(f)}T(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _a(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function op(o){this.Aa=0,this.i=[],this.j=new ha,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_a("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_a("baseRetryDelayMs",5e3,o),this.cb=_a("retryDelaySeedMs",1e4,o),this.Wa=_a("forwardChannelMaxRetries",2,o),this.wa=_a("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new qg(o&&o.concurrentRequestLimit),this.Da=new E1,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=op.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){Ee(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=pp(this,null,this.W),vl(this)};function hh(o){if(lp(o),o.G==3){var c=o.U++,f=Nn(o.I);if(St(f,"SID",o.K),St(f,"RID",c),St(f,"TYPE","terminate"),va(o,f),c=new ai(o,o.j,c),c.L=2,c.v=ml(Nn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=yp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),hl(c)}gp(o)}function _l(o){o.g&&(dh(o),o.g.cancel(),o.g=null)}function lp(o){_l(o),o.u&&(l.clearTimeout(o.u),o.u=null),El(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function vl(o){if(!Hg(o.h)&&!o.s){o.s=!0;var c=o.Ga;J||Dt(),$||(J(),$=!0),vt.add(c,o),o.B=0}}function w1(o,c){return Gg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ca(m(o.Ga,o,c),mp(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new ai(this,this.j,o);let x=this.o;if(this.S&&(x?(x=y(x),A(x,this.S)):x=this.S),this.m!==null||this.O||(C.H=x,x=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=cp(this,C,c),f=Nn(this.I),St(f,"RID",o),St(f,"CVER",22),this.D&&St(f,"X-HTTP-Session-Id",this.D),va(this,f),x&&(this.O?c="headers="+encodeURIComponent(String(ep(x)))+"&"+c:this.m&&ch(f,this.m,x)),uh(this.h,C),this.Ua&&St(f,"TYPE","init"),this.P?(St(f,"$req",c),St(f,"SID","null"),C.T=!0,sh(C,f,null)):sh(C,f,c),this.G=2}}else this.G==3&&(o?up(this,o):this.i.length==0||Hg(this.h)||up(this))};function up(o,c){var f;c?f=c.l:f=o.U++;const p=Nn(o.I);St(p,"SID",o.K),St(p,"RID",f),St(p,"AID",o.T),va(o,p),o.m&&o.o&&ch(p,o.m,o.o),f=new ai(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=cp(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),uh(o.h,f),sh(f,p,c)}function va(o,c){o.H&&q(o.H,function(f,p){St(c,p,f)}),o.l&&Yg({},function(f,p){St(c,p,f)})}function cp(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var C=o.i;let x=-1;for(;;){const z=["count="+f];x==-1?0<f?(x=C[0].g,z.push("ofs="+x)):x=0:z.push("ofs="+x);let Et=!0;for(let ie=0;ie<f;ie++){let ht=C[ie].g;const fe=C[ie].map;if(ht-=x,0>ht)x=Math.max(0,C[ie].g-100),Et=!1;else try{T1(fe,z,"req"+ht+"_")}catch{p&&p(fe)}}if(Et){p=z.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function hp(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;J||Dt(),$||(J(),$=!0),vt.add(c,o),o.v=0}}function fh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ca(m(o.Fa,o),mp(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,fp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ca(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),_l(this),fp(this))};function dh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function fp(o){o.g=new ai(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Nn(o.qa);St(c,"RID","rpc"),St(c,"SID",o.K),St(c,"AID",o.T),St(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&St(c,"TO",o.ja),St(c,"TYPE","xmlhttp"),va(o,c),o.m&&o.o&&ch(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=ml(Nn(c)),f.m=null,f.P=!0,zg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,_l(this),fh(this),Ee(19))};function El(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function dp(o,c){var f=null;if(o.g==c){El(o),dh(o),o.g=null;var p=2}else if(lh(o.h,c))f=c.D,Fg(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var C=o.B;p=ll(),ve(p,new kg(p,f)),vl(o)}else hp(o);else if(C=c.s,C==3||C==0&&0<c.X||!(p==1&&w1(o,c)||p==2&&fh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),C){case 1:lr(o,5);break;case 4:lr(o,10);break;case 3:lr(o,6);break;default:lr(o,2)}}}function mp(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function lr(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const C=!p;p=new or(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||fl(p,"https"),ml(p),C?_1(p.toString(),f):v1(p.toString(),f)}else Ee(2);o.G=0,o.l&&o.l.sa(c),gp(o),lp(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))};function gp(o){if(o.G=0,o.ka=[],o.l){const c=Qg(o.h);(c.length!=0||o.i.length!=0)&&(M(o.ka,c),M(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function pp(o,c,f){var p=f instanceof or?Nn(f):new or(f);if(p.g!="")c&&(p.g=c+"."+p.g),dl(p,p.s);else{var C=l.location;p=C.protocol,c=c?c+"."+C.hostname:C.hostname,C=+C.port;var x=new or(null);p&&fl(x,p),c&&(x.g=c),C&&dl(x,C),f&&(x.l=f),p=x}return f=o.D,c=o.ya,f&&c&&St(p,f,c),St(p,"VER",o.la),va(o,p),p}function yp(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Mt(new gl({eb:f})):new Mt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function _p(){}e=_p.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Tl(){}Tl.prototype.g=function(o,c){return new Ve(o,c)};function Ve(o,c){he.call(this),this.g=new op(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Br(this)}O(Ve,he),Ve.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ve.prototype.close=function(){hh(this.g)},Ve.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Wc(o),o=f);c.i.push(new l1(c.Ya++,o)),c.G==3&&vl(c)},Ve.prototype.N=function(){this.g.l=null,delete this.j,hh(this.g),delete this.g,Ve.aa.N.call(this)};function vp(o){eh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}O(vp,eh);function Ep(){nh.call(this),this.status=1}O(Ep,nh);function Br(o){this.g=o}O(Br,_p),Br.prototype.ua=function(){ve(this.g,"a")},Br.prototype.ta=function(o){ve(this.g,new vp(o))},Br.prototype.sa=function(o){ve(this.g,new Ep)},Br.prototype.ra=function(){ve(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,Ve.prototype.send=Ve.prototype.o,Ve.prototype.open=Ve.prototype.m,Ve.prototype.close=Ve.prototype.close,L0=function(){return new Tl},U0=function(){return ll()},P0=sr,ld={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ul.NO_ERROR=0,ul.TIMEOUT=8,ul.HTTP_ERROR=6,iu=ul,Pg.COMPLETE="complete",k0=Pg,Og.EventType=la,la.OPEN="a",la.CLOSE="b",la.ERROR="c",la.MESSAGE="d",he.prototype.listen=he.prototype.K,xa=Og,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,M0=Mt}).apply(typeof Ll<"u"?Ll:typeof self<"u"?self:typeof window<"u"?window:{});const r_="@firebase/firestore",s_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ge.UNAUTHENTICATED=new ge(null),ge.GOOGLE_CREDENTIALS=new ge("google-credentials-uid"),ge.FIRST_PARTY=new ge("first-party-uid"),ge.MOCK_USER=new ge("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ws="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new Cm("@firebase/firestore");function $r(){return Cr.logLevel}function H(e,...t){if(Cr.logLevel<=st.DEBUG){const n=t.map(Om);Cr.debug(`Firestore (${Ws}): ${e}`,...n)}}function Jn(e,...t){if(Cr.logLevel<=st.ERROR){const n=t.map(Om);Cr.error(`Firestore (${Ws}): ${e}`,...n)}}function Ls(e,...t){if(Cr.logLevel<=st.WARN){const n=t.map(Om);Cr.warn(`Firestore (${Ws}): ${e}`,...n)}}function Om(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,z0(e,i,n)}function z0(e,t,n){let i=`FIRESTORE (${Ws}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Jn(i),new Error(i)}function ct(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||z0(t,r,i)}function Z(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends ri{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class oI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(ge.UNAUTHENTICATED))}shutdown(){}}class lI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uI{constructor(t){this.t=t,this.currentUser=ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ct(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new Fn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Fn,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Fn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ct(typeof i.accessToken=="string",31837,{l:i}),new j0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ct(t===null||typeof t=="string",2055,{h:t}),new ge(t)}}class cI{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=ge.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hI{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new cI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ct(this.o===void 0,3512);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new a_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new a_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=dI(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function at(e,t){return e<t?-1:e>t?1:0}function ud(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return ef(r)===ef(s)?at(r,s):ef(r)?1:-1}return at(e.length,t.length)}const mI=55296,gI=57343;function ef(e){const t=e.charCodeAt(0);return t>=mI&&t<=gI}function zs(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="__name__";class fn{constructor(t,n,i){n===void 0?n=0:n>t.length&&F(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&F(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return fn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof fn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=fn.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return at(t.length,n.length)}static compareSegments(t,n){const i=fn.isNumericId(t),r=fn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?fn.extractNumericId(t).compare(fn.extractNumericId(n)):ud(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return zi.fromString(t.substring(4,t.length-2))}}class _t extends fn{construct(t,n,i){return new _t(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new j(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const pI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oe extends fn{construct(t,n,i){return new oe(t,n,i)}static isValidIdentifier(t){return pI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===o_}static keyField(){return new oe([o_])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new j(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new j(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new j(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new j(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new oe(n)}static emptyPath(){return new oe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.path=t}static fromPath(t){return new G(_t.fromString(t))}static fromName(t){return new G(_t.fromString(t).popFirst(5))}static empty(){return new G(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_t.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return _t.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new G(new _t(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(e,t,n){if(!n)throw new j(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function yI(e,t,n,i){if(t===!0&&i===!0)throw new j(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function l_(e){if(!G.isDocumentKey(e))throw new j(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function u_(e){if(G.isDocumentKey(e))throw new j(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function q0(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Cc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":F(12329,{type:typeof e})}function Ge(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new j(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cc(e);throw new j(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(e,t){const n={typeString:e};return t&&(n.value=t),n}function Yo(e,t){if(!q0(e))throw new j(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new j(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=-62135596800,h_=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(t){return bt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*h_);return new bt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new j(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<c_)throw new j(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new j(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/h_}_compareTo(t){return this.seconds===t.seconds?at(this.nanoseconds,t.nanoseconds):at(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Yo(t,bt._jsonSchema))return new bt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-c_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:Ht("string",bt._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{static fromTimestamp(t){return new Q(t)}static min(){return new Q(new bt(0,0))}static max(){return new Q(new bt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=-1;function _I(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Q.fromTimestamp(i===1e9?new bt(n+1,0):new bt(n,i));return new Qi(r,G.empty(),t)}function vI(e){return new Qi(e.readTime,e.key,Eo)}class Qi{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Qi(Q.min(),G.empty(),Eo)}static max(){return new Qi(Q.max(),G.empty(),Eo)}}function EI(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=G.comparator(e.documentKey,t.documentKey),n!==0?n:at(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==TI)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&F(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(r=>r?P.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new P((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new P((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function SI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ea(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Nc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=-1;function Ko(e){return e==null}function Fu(e){return e===0&&1/e==-1/0}function bI(e){return typeof e=="number"&&Number.isInteger(e)&&!Fu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="";function wI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=f_(t)),t=RI(e.get(n),t);return f_(t)}function RI(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case H0:n+="";break;default:n+=s}}return n}function f_(e){return e+H0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function er(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function G0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t,n){this.comparator=t,this.root=n||se.EMPTY}insert(t,n){return new Vt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,se.BLACK,null,null))}remove(t){return new Vt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,se.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new zl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new zl(this.root,t,this.comparator,!1)}getReverseIterator(){return new zl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new zl(this.root,t,this.comparator,!0)}}class zl{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class se{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??se.RED,this.left=r??se.EMPTY,this.right=s??se.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new se(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return se.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return se.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,se.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,se.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw F(43730,{key:this.key,value:this.value});if(this.right.isRed())throw F(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw F(27949);return t+(this.isRed()?0:1)}}se.EMPTY=null,se.RED=!0,se.BLACK=!1;se.EMPTY=new class{constructor(){this.size=0}get key(){throw F(57766)}get value(){throw F(16141)}get color(){throw F(16727)}get left(){throw F(29726)}get right(){throw F(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new se(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t){this.comparator=t,this.data=new Vt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new m_(this.data.getIterator())}getIteratorFrom(t){return new m_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Kt)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Kt(this.comparator);return n.data=t,n}}class m_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t){this.fields=t,t.sort(oe.comparator)}static empty(){return new ze([])}unionWith(t){let n=new Kt(oe.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new ze(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return zs(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new F0("Invalid base64 string: "+s):s}}(t);return new ce(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new ce(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return at(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ce.EMPTY_BYTE_STRING=new ce("");const II=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(e){if(ct(!!e,39018),typeof e=="string"){let t=0;const n=II.exec(e);if(ct(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:zt(e.seconds),nanos:zt(e.nanos)}}function zt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Ki(e){return typeof e=="string"?ce.fromBase64String(e):ce.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="server_timestamp",Y0="__type__",K0="__previous_value__",$0="__local_write_time__";function Mm(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[Y0])==null?void 0:i.stringValue)===Q0}function Dc(e){const t=e.mapValue.fields[K0];return Mm(t)?Dc(t):t}function To(e){const t=Yi(e.mapValue.fields[$0].timestampValue);return new bt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const Qu="(default)";class Ao{constructor(t,n){this.projectId=t,this.database=n||Qu}static empty(){return new Ao("","")}get isDefaultDatabase(){return this.database===Qu}isEqual(t){return t instanceof Ao&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="__type__",NI="__max__",jl={mapValue:{}},Z0="__vector__",Yu="value";function $i(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Mm(e)?4:OI(e)?9007199254740991:DI(e)?10:11:F(28295,{value:e})}function Sn(e,t){if(e===t)return!0;const n=$i(e);if(n!==$i(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return To(e).isEqual(To(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Yi(r.timestampValue),l=Yi(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return Ki(r.bytesValue).isEqual(Ki(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return zt(r.geoPointValue.latitude)===zt(s.geoPointValue.latitude)&&zt(r.geoPointValue.longitude)===zt(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return zt(r.integerValue)===zt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=zt(r.doubleValue),l=zt(s.doubleValue);return a===l?Fu(a)===Fu(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return zs(e.arrayValue.values||[],t.arrayValue.values||[],Sn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(d_(a)!==d_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Sn(a[u],l[u])))return!1;return!0}(e,t);default:return F(52216,{left:e})}}function So(e,t){return(e.values||[]).find(n=>Sn(n,t))!==void 0}function js(e,t){if(e===t)return 0;const n=$i(e),i=$i(t);if(n!==i)return at(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return at(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=zt(s.integerValue||s.doubleValue),u=zt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return g_(e.timestampValue,t.timestampValue);case 4:return g_(To(e),To(t));case 5:return ud(e.stringValue,t.stringValue);case 6:return function(s,a){const l=Ki(s),u=Ki(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=at(l[h],u[h]);if(d!==0)return d}return at(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=at(zt(s.latitude),zt(a.latitude));return l!==0?l:at(zt(s.longitude),zt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return p_(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,_,O,V;const l=s.fields||{},u=a.fields||{},h=(m=l[Yu])==null?void 0:m.arrayValue,d=(_=u[Yu])==null?void 0:_.arrayValue,g=at(((O=h==null?void 0:h.values)==null?void 0:O.length)||0,((V=d==null?void 0:d.values)==null?void 0:V.length)||0);return g!==0?g:p_(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===jl.mapValue&&a===jl.mapValue)return 0;if(s===jl.mapValue)return 1;if(a===jl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=ud(u[g],d[g]);if(m!==0)return m;const _=js(l[u[g]],h[d[g]]);if(_!==0)return _}return at(u.length,d.length)}(e.mapValue,t.mapValue);default:throw F(23264,{he:n})}}function g_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return at(e,t);const n=Yi(e),i=Yi(t),r=at(n.seconds,i.seconds);return r!==0?r:at(n.nanos,i.nanos)}function p_(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=js(n[r],i[r]);if(s)return s}return at(n.length,i.length)}function Bs(e){return cd(e)}function cd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Yi(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Ki(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return G.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=cd(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${cd(n.fields[a])}`;return r+"}"}(e.mapValue):F(61005,{value:e})}function ru(e){switch($i(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Dc(e);return t?16+ru(t):16;case 5:return 2*e.stringValue.length;case 6:return Ki(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+ru(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return er(i.fields,(s,a)=>{r+=s.length+ru(a)}),r}(e.mapValue);default:throw F(13486,{value:e})}}function y_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function hd(e){return!!e&&"integerValue"in e}function km(e){return!!e&&"arrayValue"in e}function __(e){return!!e&&"nullValue"in e}function v_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function su(e){return!!e&&"mapValue"in e}function DI(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[X0])==null?void 0:i.stringValue)===Z0}function Ja(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return er(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Ja(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ja(e.arrayValue.values[n]);return t}return{...e}}function OI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===NI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.value=t}static empty(){return new Ae({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!su(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ja(n)}setAll(t){let n=oe.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=Ja(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());su(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Sn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];su(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){er(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Ae(Ja(this.value))}}function J0(e){const t=[];return er(e.fields,(n,i)=>{const r=new oe([n]);if(su(i)){const s=J0(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new ze(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new Wt(t,0,Q.min(),Q.min(),Q.min(),Ae.empty(),0)}static newFoundDocument(t,n,i,r){return new Wt(t,1,n,Q.min(),i,r,0)}static newNoDocument(t,n){return new Wt(t,2,n,Q.min(),Q.min(),Ae.empty(),0)}static newUnknownDocument(t,n){return new Wt(t,3,n,Q.min(),Q.min(),Ae.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ae.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ae.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Wt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(t,n){this.position=t,this.inclusive=n}}function E_(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=G.comparator(G.fromName(a.referenceValue),n.key):i=js(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function T_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Sn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(t,n="asc"){this.field=t,this.dir=n}}function xI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{}class qt extends W0{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new MI(t,n,i):n==="array-contains"?new UI(t,i):n==="in"?new LI(t,i):n==="not-in"?new zI(t,i):n==="array-contains-any"?new jI(t,i):new qt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new kI(t,i):new PI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(js(n,this.value)):n!==null&&$i(this.value)===$i(n)&&this.matchesComparison(js(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return F(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends W0{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new un(t,n)}matches(t){return tA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tA(e){return e.op==="and"}function eA(e){return VI(e)&&tA(e)}function VI(e){for(const t of e.filters)if(t instanceof un)return!1;return!0}function fd(e){if(e instanceof qt)return e.field.canonicalString()+e.op.toString()+Bs(e.value);if(eA(e))return e.filters.map(t=>fd(t)).join(",");{const t=e.filters.map(n=>fd(n)).join(",");return`${e.op}(${t})`}}function nA(e,t){return e instanceof qt?function(i,r){return r instanceof qt&&i.op===r.op&&i.field.isEqual(r.field)&&Sn(i.value,r.value)}(e,t):e instanceof un?function(i,r){return r instanceof un&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&nA(a,r.filters[l]),!0):!1}(e,t):void F(19439)}function iA(e){return e instanceof qt?function(n){return`${n.field.canonicalString()} ${n.op} ${Bs(n.value)}`}(e):e instanceof un?function(n){return n.op.toString()+" {"+n.getFilters().map(iA).join(" ,")+"}"}(e):"Filter"}class MI extends qt{constructor(t,n,i){super(t,n,i),this.key=G.fromName(i.referenceValue)}matches(t){const n=G.comparator(t.key,this.key);return this.matchesComparison(n)}}class kI extends qt{constructor(t,n){super(t,"in",n),this.keys=rA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class PI extends qt{constructor(t,n){super(t,"not-in",n),this.keys=rA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function rA(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>G.fromName(i.referenceValue))}class UI extends qt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return km(n)&&So(n.arrayValue,this.value)}}class LI extends qt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&So(this.value.arrayValue,n)}}class zI extends qt{constructor(t,n){super(t,"not-in",n)}matches(t){if(So(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!So(this.value.arrayValue,n)}}class jI extends qt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!km(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>So(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function A_(e,t=null,n=[],i=[],r=null,s=null,a=null){return new BI(e,t,n,i,r,s,a)}function Pm(e){const t=Z(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>fd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Ko(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Bs(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Bs(i)).join(",")),t.Te=n}return t.Te}function Um(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!xI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!nA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!T_(e.startAt,t.startAt)&&T_(e.endAt,t.endAt)}function dd(e){return G.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function qI(e,t,n,i,r,s,a,l){return new na(e,t,n,i,r,s,a,l)}function Oc(e){return new na(e)}function S_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function sA(e){return e.collectionGroup!==null}function Wa(e){const t=Z(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Kt(oe.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new bo(s,i))}),n.has(oe.keyField().canonicalString())||t.Ie.push(new bo(oe.keyField(),i))}return t.Ie}function _n(e){const t=Z(e);return t.Ee||(t.Ee=HI(t,Wa(e))),t.Ee}function HI(e,t){if(e.limitType==="F")return A_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new bo(r.field,s)});const n=e.endAt?new Ku(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ku(e.startAt.position,e.startAt.inclusive):null;return A_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function md(e,t){const n=e.filters.concat([t]);return new na(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function gd(e,t,n){return new na(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function xc(e,t){return Um(_n(e),_n(t))&&e.limitType===t.limitType}function aA(e){return`${Pm(_n(e))}|lt:${e.limitType}`}function Xr(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>iA(r)).join(", ")}]`),Ko(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Bs(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Bs(r)).join(",")),`Target(${i})`}(_n(e))}; limitType=${e.limitType})`}function Vc(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):G.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of Wa(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=E_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,Wa(i),r)||i.endAt&&!function(a,l,u){const h=E_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,Wa(i),r))}(e,t)}function GI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function oA(e){return(t,n)=>{let i=!1;for(const r of Wa(e)){const s=FI(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function FI(e,t,n){const i=e.field.isKeyField()?G.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?js(u,h):F(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return F(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){er(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return G0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=new Vt(G.comparator);function Wn(){return QI}const lA=new Vt(G.comparator);function Va(...e){let t=lA;for(const n of e)t=t.insert(n.key,n);return t}function uA(e){let t=lA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function mr(){return to()}function cA(){return to()}function to(){return new kr(e=>e.toString(),(e,t)=>e.isEqual(t))}const YI=new Vt(G.comparator),KI=new Kt(G.comparator);function ot(...e){let t=KI;for(const n of e)t=t.add(n);return t}const $I=new Kt(at);function XI(){return $I}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(t)?"-0":t}}function hA(e){return{integerValue:""+e}}function ZI(e,t){return bI(t)?hA(t):Lm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this._=void 0}}function JI(e,t,n){return e instanceof wo?function(r,s){const a={fields:{[Y0]:{stringValue:Q0},[$0]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Mm(s)&&(s=Dc(s)),s&&(a.fields[K0]=s),{mapValue:a}}(n,t):e instanceof Ro?dA(e,t):e instanceof Io?mA(e,t):function(r,s){const a=fA(r,s),l=b_(a)+b_(r.Ae);return hd(a)&&hd(r.Ae)?hA(l):Lm(r.serializer,l)}(e,t)}function WI(e,t,n){return e instanceof Ro?dA(e,t):e instanceof Io?mA(e,t):n}function fA(e,t){return e instanceof $u?function(i){return hd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class wo extends Mc{}class Ro extends Mc{constructor(t){super(),this.elements=t}}function dA(e,t){const n=gA(t);for(const i of e.elements)n.some(r=>Sn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Io extends Mc{constructor(t){super(),this.elements=t}}function mA(e,t){let n=gA(t);for(const i of e.elements)n=n.filter(r=>!Sn(r,i));return{arrayValue:{values:n}}}class $u extends Mc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function b_(e){return zt(e.integerValue||e.doubleValue)}function gA(e){return km(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(t,n){this.field=t,this.transform=n}}function eC(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Ro&&r instanceof Ro||i instanceof Io&&r instanceof Io?zs(i.elements,r.elements,Sn):i instanceof $u&&r instanceof $u?Sn(i.Ae,r.Ae):i instanceof wo&&r instanceof wo}(e.transform,t.transform)}class nC{constructor(t,n){this.version=t,this.transformResults=n}}class le{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new le}static exists(t){return new le(void 0,t)}static updateTime(t){return new le(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function au(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class kc{}function pA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Pc(e.key,le.none()):new $o(e.key,e.data,le.none());{const n=e.data,i=Ae.empty();let r=new Kt(oe.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new nr(e.key,i,new ze(r.toArray()),le.none())}}function iC(e,t,n){e instanceof $o?function(r,s,a){const l=r.value.clone(),u=R_(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof nr?function(r,s,a){if(!au(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=R_(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(yA(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function eo(e,t,n,i){return e instanceof $o?function(s,a,l,u){if(!au(s.precondition,a))return l;const h=s.value.clone(),d=I_(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof nr?function(s,a,l,u){if(!au(s.precondition,a))return l;const h=I_(s.fieldTransforms,u,a),d=a.data;return d.setAll(yA(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(s,a,l){return au(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function rC(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=fA(i.transform,r||null);s!=null&&(n===null&&(n=Ae.empty()),n.set(i.field,s))}return n||null}function w_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&zs(i,r,(s,a)=>eC(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class $o extends kc{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class nr extends kc{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function yA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function R_(e,t,n){const i=new Map;ct(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,WI(a,l,n[r]))}return i}function I_(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,JI(s,a,t))}return i}class Pc extends kc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _A extends kc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&iC(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=eo(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=eo(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=cA();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=pA(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(Q.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ot())}isEqual(t){return this.batchId===t.batchId&&zs(this.mutations,t.mutations,(n,i)=>w_(n,i))&&zs(this.baseMutations,t.baseMutations,(n,i)=>w_(n,i))}}class zm{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){ct(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return YI}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new zm(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,lt;function vA(e){switch(e){case k.OK:return F(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return F(15467,{code:e})}}function EA(e){if(e===void 0)return Jn("GRPC error has no .code"),k.UNKNOWN;switch(e){case jt.OK:return k.OK;case jt.CANCELLED:return k.CANCELLED;case jt.UNKNOWN:return k.UNKNOWN;case jt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case jt.INTERNAL:return k.INTERNAL;case jt.UNAVAILABLE:return k.UNAVAILABLE;case jt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case jt.NOT_FOUND:return k.NOT_FOUND;case jt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case jt.ABORTED:return k.ABORTED;case jt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case jt.DATA_LOSS:return k.DATA_LOSS;default:return F(39323,{code:e})}}(lt=jt||(jt={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=new zi([4294967295,4294967295],0);function C_(e){const t=lC().encode(e),n=new V0;return n.update(t),new Uint8Array(n.digest())}function N_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new zi([n,i],0),new zi([r,s],0)]}class jm{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ma(`Invalid padding: ${n}`);if(i<0)throw new Ma(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ma(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Ma(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=zi.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(zi.fromNumber(i)));return r.compare(uC)===1&&(r=new zi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=C_(t),[i,r]=N_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new jm(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=C_(t),[i,r]=N_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Ma extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,Xo.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Uc(Q.min(),r,new Vt(at),Wn(),ot())}}class Xo{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Xo(i,n,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class TA{constructor(t,n){this.targetId=t,this.Ce=n}}class AA{constructor(t,n,i=ce.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class D_{constructor(){this.ve=0,this.Fe=O_(),this.Me=ce.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ot(),n=ot(),i=ot();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:F(38017,{changeType:s})}}),new Xo(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=O_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class cC{constructor(t){this.Ge=t,this.ze=new Map,this.je=Wn(),this.Je=Bl(),this.He=Bl(),this.Ye=new Vt(at)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:F(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(dd(s))if(i===0){const a=new G(s.path);this.et(n,a,Wt.newNoDocument(a,Q.min()))}else ct(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=Ki(i).toUint8Array()}catch(u){if(u instanceof F0)return Ls("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new jm(a,r,s)}catch(u){return Ls(u instanceof Ma?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&dd(l.target)){const u=new G(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Wt.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ot();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new Uc(t,n,this.Ye,this.je,i);return this.je=Wn(),this.Je=Bl(),this.He=Bl(),this.Ye=new Vt(at),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new D_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Kt(at),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Kt(at),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new D_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Bl(){return new Vt(G.comparator)}function O_(){return new Vt(G.comparator)}const hC={asc:"ASCENDING",desc:"DESCENDING"},fC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dC={and:"AND",or:"OR"};class mC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function pd(e,t){return e.useProto3Json||Ko(t)?t:{value:t}}function Xu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function SA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function gC(e,t){return Xu(e,t.toTimestamp())}function Fe(e){return ct(!!e,49232),Q.fromTimestamp(function(n){const i=Yi(n);return new bt(i.seconds,i.nanos)}(e))}function Bm(e,t){return yd(e,t).canonicalString()}function yd(e,t){const n=function(r){return new _t(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function bA(e){const t=_t.fromString(e);return ct(DA(t),10190,{key:t.toString()}),t}function Zu(e,t){return Bm(e.databaseId,t.path)}function no(e,t){const n=bA(t);if(n.get(1)!==e.databaseId.projectId)throw new j(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new j(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new G(RA(n))}function wA(e,t){return Bm(e.databaseId,t)}function pC(e){const t=bA(e);return t.length===4?_t.emptyPath():RA(t)}function _d(e){return new _t(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function RA(e){return ct(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function x_(e,t,n){return{name:Zu(e,t),fields:n.value.mapValue.fields}}function yC(e,t){return"found"in t?function(i,r){ct(!!r.found,43571),r.found.name,r.found.updateTime;const s=no(i,r.found.name),a=Fe(r.found.updateTime),l=r.found.createTime?Fe(r.found.createTime):Q.min(),u=new Ae({mapValue:{fields:r.found.fields}});return Wt.newFoundDocument(s,a,l,u)}(e,t):"missing"in t?function(i,r){ct(!!r.missing,3894),ct(!!r.readTime,22933);const s=no(i,r.missing),a=Fe(r.readTime);return Wt.newNoDocument(s,a)}(e,t):F(7234,{result:t})}function _C(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:F(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(ct(d===void 0||typeof d=="string",58123),ce.fromBase64String(d||"")):(ct(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ce.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?k.UNKNOWN:EA(h.code);return new j(d,h.message||"")}(a);n=new AA(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=no(e,i.document.name),s=Fe(i.document.updateTime),a=i.document.createTime?Fe(i.document.createTime):Q.min(),l=new Ae({mapValue:{fields:i.document.fields}}),u=Wt.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new ou(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=no(e,i.document),s=i.readTime?Fe(i.readTime):Q.min(),a=Wt.newNoDocument(r,s),l=i.removedTargetIds||[];n=new ou([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=no(e,i.document),s=i.removedTargetIds||[];n=new ou([],s,r,null)}else{if(!("filter"in t))return F(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new oC(r,s),l=i.targetId;n=new TA(l,a)}}return n}function IA(e,t){let n;if(t instanceof $o)n={update:x_(e,t.key,t.value)};else if(t instanceof Pc)n={delete:Zu(e,t.key)};else if(t instanceof nr)n={update:x_(e,t.key,t.data),updateMask:IC(t.fieldMask)};else{if(!(t instanceof _A))return F(16599,{Vt:t.type});n={verify:Zu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof wo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ro)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Io)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof $u)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw F(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:gC(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:F(27497)}(e,t.precondition)),n}function vC(e,t){return e&&e.length>0?(ct(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?Fe(r.updateTime):Fe(s);return a.isEqual(Q.min())&&(a=Fe(s)),new nC(a,r.transformResults||[])}(n,t))):[]}function EC(e,t){return{documents:[wA(e,t.path)]}}function TC(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=wA(e,r);const s=function(h){if(h.length!==0)return NA(un.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:Zr(m.field),direction:bC(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=pd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function AC(e){let t=pC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ct(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(g){const m=CA(g);return m instanceof un&&eA(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(O){return new bo(Jr(O.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,Ko(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,_=g.values||[];return new Ku(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,_=g.values||[];return new Ku(_,m)}(n.endAt)),qI(t,r,a,s,l,"F",u,h)}function SC(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return F(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function CA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Jr(n.unaryFilter.field);return qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Jr(n.unaryFilter.field);return qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Jr(n.unaryFilter.field);return qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Jr(n.unaryFilter.field);return qt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return F(61313);default:return F(60726)}}(e):e.fieldFilter!==void 0?function(n){return qt.create(Jr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return F(58110);default:return F(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return un.create(n.compositeFilter.filters.map(i=>CA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return F(1026)}}(n.compositeFilter.op))}(e):F(30097,{filter:e})}function bC(e){return hC[e]}function wC(e){return fC[e]}function RC(e){return dC[e]}function Zr(e){return{fieldPath:e.canonicalString()}}function Jr(e){return oe.fromServerFormat(e.fieldPath)}function NA(e){return e instanceof qt?function(n){if(n.op==="=="){if(v_(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NAN"}};if(__(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(v_(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NOT_NAN"}};if(__(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zr(n.field),op:wC(n.op),value:n.value}}}(e):e instanceof un?function(n){const i=n.getFilters().map(r=>NA(r));return i.length===1?i[0]:{compositeFilter:{op:RC(n.op),filters:i}}}(e):F(54877,{filter:e})}function IC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function DA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t,n,i,r,s=Q.min(),a=Q.min(),l=ce.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Ii(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(t){this.yt=t}}function NC(e){const t=AC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?gd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.Cn=new OC}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(Qi.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(Qi.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class OC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new Kt(_t.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Kt(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OA=41943040;class Ce{static withCacheSize(t){return new Ce(t,Ce.DEFAULT_COLLECTION_PERCENTILE,Ce.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ce.DEFAULT_COLLECTION_PERCENTILE=10,Ce.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ce.DEFAULT=new Ce(OA,Ce.DEFAULT_COLLECTION_PERCENTILE,Ce.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ce.DISABLED=new Ce(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new qs(0)}static cr(){return new qs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="LruGarbageCollector",xC=1048576;function k_([e,t],[n,i]){const r=at(e,n);return r===0?at(t,i):r}class VC{constructor(t){this.Ir=t,this.buffer=new Kt(k_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();k_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class MC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(M_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ea(n)?H(M_,"Ignoring IndexedDB error during garbage collection: ",n):await ta(n)}await this.Vr(3e5)})}}class kC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(Nc.ce);const i=new VC(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(V_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),V_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(t,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),$r()<=st.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function PC(e,t){return new kC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.changes=new kr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Wt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&eo(i.mutation,r,ze.empty(),bt.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ot()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ot()){const r=mr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=Va();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=mr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ot()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=Wn();const a=to(),l=function(){return to()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof nr)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),eo(d.mutation,h,d.mutation.getFieldMask(),bt.now())):a.set(h.key,ze.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new LC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=to();let r=new Vt((a,l)=>a-l),s=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||ze.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(r.get(l.batchId)||ot()).add(u);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=cA();d.forEach(m=>{if(!s.has(m)){const _=pA(n.get(m),i.get(m));_!==null&&g.set(m,_),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):sA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):P.resolve(mr());let l=Eo,u=s;return a.next(h=>P.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,ot())).next(d=>({batchId:l,changes:uA(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new G(n)).next(i=>{let r=Va();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=Va();return this.indexManager.getCollectionParents(t,s).next(l=>P.forEach(l,u=>{const h=function(g,m){return new na(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,Wt.newInvalidDocument(d)))});let l=Va();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&eo(d.mutation,h,ze.empty(),bt.now()),Vc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Fe(r.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:NC(r.bundledQuery),readTime:Fe(r.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.overlays=new Vt(G.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=mr();return P.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const r=mr(),s=n.length+1,a=new G(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return P.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Vt((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=mr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=mr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return P.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new aC(n,i));let s=this.qr.get(n);s===void 0&&(s=ot(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.sessionToken=ce.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this.Qr=new Kt(Xt.$r),this.Ur=new Kt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new Xt(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new Xt(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new G(new _t([])),i=new Xt(n,t),r=new Xt(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new G(new _t([])),i=new Xt(n,t),r=new Xt(n,t+1);let s=ot();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new Xt(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Xt{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return G.comparator(t.key,n.key)||at(t.Yr,n.Yr)}static Kr(t,n){return at(t.Yr,n.Yr)||G.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Xt.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new sC(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new Xt(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?Vm:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Xt(n,0),r=new Xt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Kt(at);return n.forEach(r=>{const s=new Xt(r,0),a=new Xt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;G.isDocumentKey(s)||(s=s.child(""));const a=new Xt(new G(s),0);let l=new Kt(at);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){ct(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,r=>{const s=new Xt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new Xt(n,0),r=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t){this.ri=t,this.docs=function(){return new Vt(G.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(t,n){let i=Wn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Wt.newInvalidDocument(r))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=Wn();const a=n.path,l=new G(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||EI(vI(d),i)<=0||(r.has(d.key)||Vc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(t,n,i,r){F(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new FC(this)}getSize(t){return P.resolve(this.size)}}class FC extends UC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(t){this.persistence=t,this.si=new kr(n=>Pm(n),Um),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.oi=0,this._i=new qm,this.targetCount=0,this.ai=qs.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new qs(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),P.waitFor(s).next(()=>r)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t,n){this.ui={},this.overlays={},this.ci=new Nc(0),this.li=!1,this.li=!0,this.hi=new qC,this.referenceDelegate=t(this),this.Pi=new QC(this),this.indexManager=new DC,this.remoteDocumentCache=function(r){return new GC(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new CC(n),this.Ii=new jC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new BC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new HC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){H("MemoryPersistence","Starting transaction:",t);const r=new YC(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class YC extends AI{constructor(t){super(),this.currentSequenceNumber=t}}class Hm{constructor(t){this.persistence=t,this.Ri=new qm,this.Vi=null}static mi(t){return new Hm(t)}get fi(){if(this.Vi)return this.Vi;throw F(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const r=G.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,Q.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Ju{constructor(t,n){this.persistence=t,this.pi=new kr(i=>wI(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=PC(this,n)}static mi(t,n){return new Ju(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?P.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,Q.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=ru(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return P.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=ot(),r=ot();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Gm(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return BR()?8:SI(_e())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new KC;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?($r()<=st.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Xr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):($r()<=st.DEBUG&&H("QueryEngine","Query:",Xr(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?($r()<=st.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Xr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,_n(n))):P.resolve())}ys(t,n){if(S_(n))return P.resolve(null);let i=_n(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=gd(n,null,"F"),i=_n(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=ot(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,gd(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return S_(n)||r.isEqual(Q.min())?P.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?P.resolve(null):($r()<=st.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xr(n)),this.vs(t,a,n,_I(r,Eo)).next(l=>l))})}Ds(t,n){let i=new Kt(oA(t));return n.forEach((r,s)=>{Vc(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return $r()<=st.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Xr(n)),this.ps.getDocumentsMatchingQuery(t,n,Qi.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="LocalStore",XC=3e8;class ZC{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Vt(at),this.xs=new kr(s=>Pm(s),Um),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new zC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function JC(e,t,n,i){return new ZC(e,t,n,i)}async function VA(e,t){const n=Z(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=ot();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function WC(e,t){const n=Z(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let _=P.resolve();return m.forEach(O=>{_=_.next(()=>d.getEntry(u,O)).next(V=>{const M=h.docVersions.get(O);ct(M!==null,48541),V.version.compareTo(M)<0&&(g.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ot();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function MA(e){const t=Z(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function tN(e,t){const n=Z(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=r.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,g)));let _=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(ce.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(g,_),function(V,M,w){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=XC?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(s,_))});let u=Wn(),h=ot();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(eN(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual(Q.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(g=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function eN(e,t,n){let i=ot(),r=ot();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=Wn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Q.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(Fm,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function nN(e,t){const n=Z(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Vm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function iN(e,t){const n=Z(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,P.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Ii(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function vd(e,t,n){const i=Z(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ea(a))throw a;H(Fm,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function P_(e,t,n){const i=Z(e);let r=Q.min(),s=ot();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=Z(u),m=g.xs.get(d);return m!==void 0?P.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,_n(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:Q.min(),n?s:ot())).next(l=>(rN(i,GI(t),l),{documents:l,Qs:s})))}function rN(e,t,n){let i=e.Os.get(t)||Q.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class U_{constructor(){this.activeTargetIds=XI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class sN{constructor(){this.Mo=new U_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new U_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="ConnectivityMonitor";class z_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(L_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H(L_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function Ed(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="RestConnection",oN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Qu?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=Ed(),l=this.zo(t,n.toUriEncodedString());H(nf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=Zs(h);return this.Jo(t,l,u,i,d).then(g=>(H(nf,`Received RPC '${t}' ${a}: `,g),g),g=>{throw Ls(nf,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ws}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=oN[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me="WebChannelConnection";class cN extends lN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=Ed();return new Promise((l,u)=>{const h=new M0;h.setWithCredentials(!0),h.listenOnce(k0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case iu.NO_ERROR:const g=h.getResponseJson();H(me,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case iu.TIMEOUT:H(me,`RPC '${t}' ${a} timed out`),u(new j(k.DEADLINE_EXCEEDED,"Request time out"));break;case iu.HTTP_ERROR:const m=h.getStatus();if(H(me,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const O=_==null?void 0:_.error;if(O&&O.status&&O.message){const V=function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(E)>=0?E:k.UNKNOWN}(O.status);u(new j(V,O.message))}else u(new j(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new j(k.UNAVAILABLE,"Connection failed."));break;default:F(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(me,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);H(me,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=Ed(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=L0(),l=U0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");H(me,`Creating RPC '${t}' stream ${r}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,_=!1;const O=new uN({Yo:M=>{_?H(me,`Not sending because RPC '${t}' stream ${r} is closed:`,M):(m||(H(me,`Opening RPC '${t}' stream ${r} transport.`),g.open(),m=!0),H(me,`RPC '${t}' stream ${r} sending:`,M),g.send(M))},Zo:()=>g.close()}),V=(M,w,E)=>{M.listen(w,R=>{try{E(R)}catch(D){setTimeout(()=>{throw D},0)}})};return V(g,xa.EventType.OPEN,()=>{_||(H(me,`RPC '${t}' stream ${r} transport opened.`),O.o_())}),V(g,xa.EventType.CLOSE,()=>{_||(_=!0,H(me,`RPC '${t}' stream ${r} transport closed`),O.a_(),this.E_(g))}),V(g,xa.EventType.ERROR,M=>{_||(_=!0,Ls(me,`RPC '${t}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),O.a_(new j(k.UNAVAILABLE,"The operation could not be completed")))}),V(g,xa.EventType.MESSAGE,M=>{var w;if(!_){const E=M.data[0];ct(!!E,16349);const R=E,D=(R==null?void 0:R.error)||((w=R[0])==null?void 0:w.error);if(D){H(me,`RPC '${t}' stream ${r} received error:`,D);const L=D.status;let q=function(v){const A=jt[v];if(A!==void 0)return EA(A)}(L),T=D.message;q===void 0&&(q=k.INTERNAL,T="Unknown error status: "+L+" with message "+D.message),_=!0,O.a_(new j(q,T)),g.close()}else H(me,`RPC '${t}' stream ${r} received:`,E),O.u_(E)}}),V(l,P0.STAT_EVENT,M=>{M.stat===ld.PROXY?H(me,`RPC '${t}' stream ${r} detected buffering proxy`):M.stat===ld.NOPROXY&&H(me,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{O.__()},0),O}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(e){return new mC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="PersistentStream";class kA{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Qm(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new j(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return H(j_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(H(j_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hN extends kA{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=_C(this.serializer,t),i=function(s){if(!("targetChange"in s))return Q.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Q.min():a.readTime?Fe(a.readTime):Q.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=_d(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=dd(u)?{documents:EC(s,u)}:{query:TC(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=SA(s,a.resumeToken);const h=pd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Q.min())>0){l.readTime=Xu(s,a.snapshotVersion.toTimestamp());const h=pd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=SC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=_d(this.serializer),n.removeTarget=t,this.q_(n)}}class fN extends kA{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ct(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ct(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ct(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=vC(t.writeResults,t.commitTime),i=Fe(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=_d(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>IA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{}class mN extends dN{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new j(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,yd(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(k.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,yd(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new j(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class gN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="RemoteStore";class pN{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Pr(this)&&(H(Nr,"Restarting streams for network reachability change."),await async function(u){const h=Z(u);h.Ea.add(4),await Zo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await zc(h)}(this))})}),this.Ra=new gN(i,r)}}async function zc(e){if(Pr(e))for(const t of e.da)await t(!0)}async function Zo(e){for(const t of e.da)await t(!1)}function PA(e,t){const n=Z(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Xm(n)?$m(n):ia(n).O_()&&Km(n,t))}function Ym(e,t){const n=Z(e),i=ia(n);n.Ia.delete(t),i.O_()&&UA(n,t),n.Ia.size===0&&(i.O_()?i.L_():Pr(n)&&n.Ra.set("Unknown"))}function Km(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Q.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ia(e).Y_(t)}function UA(e,t){e.Va.Ue(t),ia(e).Z_(t)}function $m(e){e.Va=new cC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),ia(e).start(),e.Ra.ua()}function Xm(e){return Pr(e)&&!ia(e).x_()&&e.Ia.size>0}function Pr(e){return Z(e).Ea.size===0}function LA(e){e.Va=void 0}async function yN(e){e.Ra.set("Online")}async function _N(e){e.Ia.forEach((t,n)=>{Km(e,t)})}async function vN(e,t){LA(e),Xm(e)?(e.Ra.ha(t),$m(e)):e.Ra.set("Unknown")}async function EN(e,t,n){if(e.Ra.set("Online"),t instanceof AA&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){H(Nr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Wu(e,i)}else if(t instanceof ou?e.Va.Ze(t):t instanceof TA?e.Va.st(t):e.Va.tt(t),!n.isEqual(Q.min()))try{const i=await MA(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(ce.EMPTY_BYTE_STRING,d.snapshotVersion)),UA(s,u);const g=new Ii(d.target,u,h,d.sequenceNumber);Km(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){H(Nr,"Failed to raise snapshot:",i),await Wu(e,i)}}async function Wu(e,t,n){if(!ea(t))throw t;e.Ea.add(1),await Zo(e),e.Ra.set("Offline"),n||(n=()=>MA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{H(Nr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await zc(e)})}function zA(e,t){return t().catch(n=>Wu(e,n,t))}async function jc(e){const t=Z(e),n=Xi(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Vm;for(;TN(t);)try{const r=await nN(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,AN(t,r)}catch(r){await Wu(t,r)}jA(t)&&BA(t)}function TN(e){return Pr(e)&&e.Ta.length<10}function AN(e,t){e.Ta.push(t);const n=Xi(e);n.O_()&&n.X_&&n.ea(t.mutations)}function jA(e){return Pr(e)&&!Xi(e).x_()&&e.Ta.length>0}function BA(e){Xi(e).start()}async function SN(e){Xi(e).ra()}async function bN(e){const t=Xi(e);for(const n of e.Ta)t.ea(n.mutations)}async function wN(e,t,n){const i=e.Ta.shift(),r=zm.from(i,t,n);await zA(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await jc(e)}async function RN(e,t){t&&Xi(e).X_&&await async function(i,r){if(function(a){return vA(a)&&a!==k.ABORTED}(r.code)){const s=i.Ta.shift();Xi(i).B_(),await zA(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await jc(i)}}(e,t),jA(e)&&BA(e)}async function B_(e,t){const n=Z(e);n.asyncQueue.verifyOperationInProgress(),H(Nr,"RemoteStore received new credentials");const i=Pr(n);n.Ea.add(3),await Zo(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await zc(n)}async function IN(e,t){const n=Z(e);t?(n.Ea.delete(2),await zc(n)):t||(n.Ea.add(2),await Zo(n),n.Ra.set("Unknown"))}function ia(e){return e.ma||(e.ma=function(n,i,r){const s=Z(n);return s.sa(),new hN(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:yN.bind(null,e),t_:_N.bind(null,e),r_:vN.bind(null,e),H_:EN.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Xm(e)?$m(e):e.Ra.set("Unknown")):(await e.ma.stop(),LA(e))})),e.ma}function Xi(e){return e.fa||(e.fa=function(n,i,r){const s=Z(n);return s.sa(),new fN(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:SN.bind(null,e),r_:RN.bind(null,e),ta:bN.bind(null,e),na:wN.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await jc(e)):(await e.fa.stop(),e.Ta.length>0&&(H(Nr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new Zm(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jm(e,t){if(Jn("AsyncQueue",`${t}: ${e}`),ea(e))return new j(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{static emptySet(t){return new Ts(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||G.comparator(n.key,i.key):(n,i)=>G.comparator(n.key,i.key),this.keyedMap=Va(),this.sortedSet=new Vt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ts)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Ts;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(){this.ga=new Vt(G.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):F(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class Hs{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Hs(t,n,Ts.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&xc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class NN{constructor(){this.queries=H_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Z(n),s=r.queries;r.queries=H_(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new j(k.ABORTED,"Firestore shutting down"))}}function H_(){return new kr(e=>aA(e),xc)}async function qA(e,t){const n=Z(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new CN,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=Jm(a,`Initialization of query '${Xr(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Wm(n)}async function HA(e,t){const n=Z(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function DN(e,t){const n=Z(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&Wm(n)}function ON(e,t,n){const i=Z(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function Wm(e){e.Ca.forEach(t=>{t.next()})}var Td,G_;(G_=Td||(Td={})).Ma="default",G_.Cache="cache";class GA{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Hs(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Hs.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Td.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(t){this.key=t}}class QA{constructor(t){this.key=t}}class xN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ot(),this.mutatedKeys=ot(),this.eu=oA(t),this.tu=new Ts(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new q_,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,g)=>{const m=r.get(d),_=Vc(this.query,g)?g:null,O=!!m&&this.mutatedKeys.has(m.key),V=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let M=!1;m&&_?m.data.isEqual(_.data)?O!==V&&(i.track({type:3,doc:_}),M=!0):this.su(m,_)||(i.track({type:2,doc:_}),M=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),M=!0):m&&!_&&(i.track({type:1,doc:m}),M=!0,(u||h)&&(l=!0)),M&&(_?(a=a.add(_),s=V?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(_,O){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return F(20277,{Rt:M})}};return V(_)-V(O)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new Hs(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new q_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ot(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new QA(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new FA(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ot();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Hs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tg="SyncEngine";class VN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class MN{constructor(t){this.key=t,this.hu=!1}}class kN{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new kr(l=>aA(l),xc),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(G.comparator),this.Au=new Map,this.Ru=new qm,this.Vu={},this.mu=new Map,this.fu=qs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PN(e,t,n=!0){const i=JA(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await YA(i,t,n,!0),r}async function UN(e,t){const n=JA(e);await YA(n,t,!0,!1)}async function YA(e,t,n,i){const r=await iN(e.localStore,_n(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await LN(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&PA(e.remoteStore,r),l}async function LN(e,t,n,i,r){e.pu=(g,m,_)=>async function(V,M,w,E){let R=M.view.ru(w);R.Cs&&(R=await P_(V.localStore,M.query,!1).then(({documents:T})=>M.view.ru(T,R)));const D=E&&E.targetChanges.get(M.targetId),L=E&&E.targetMismatches.get(M.targetId)!=null,q=M.view.applyChanges(R,V.isPrimaryClient,D,L);return Q_(V,M.targetId,q.au),q.snapshot}(e,g,m,_);const s=await P_(e.localStore,t,!0),a=new xN(t,s.Qs),l=a.ru(s.documents),u=Xo.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);Q_(e,n,h.au);const d=new VN(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function zN(e,t,n){const i=Z(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!xc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await vd(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Ym(i.remoteStore,r.targetId),Ad(i,r.targetId)}).catch(ta)):(Ad(i,r.targetId),await vd(i.localStore,r.targetId,!0))}async function jN(e,t){const n=Z(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ym(n.remoteStore,i.targetId))}async function BN(e,t,n){const i=KN(e);try{const r=await function(a,l){const u=Z(a),h=bt.now(),d=l.reduce((_,O)=>_.add(O.key),ot());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let O=Wn(),V=ot();return u.Ns.getEntries(_,d).next(M=>{O=M,O.forEach((w,E)=>{E.isValidDocument()||(V=V.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,O)).next(M=>{g=M;const w=[];for(const E of l){const R=rC(E,g.get(E.key).overlayedDocument);R!=null&&w.push(new nr(E.key,R,J0(R.value.mapValue),le.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,w,l)}).next(M=>{m=M;const w=M.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(_,M.batchId,w)})}).then(()=>({batchId:m.batchId,changes:uA(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Vt(at)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await Jo(i,r.changes),await jc(i.remoteStore)}catch(r){const s=Jm(r,"Failed to persist write");n.reject(s)}}async function KA(e,t){const n=Z(e);try{const i=await tN(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(ct(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?ct(a.hu,14607):r.removedDocuments.size>0&&(ct(a.hu,42227),a.hu=!1))}),await Jo(n,i,t)}catch(i){await ta(i)}}function F_(e,t,n){const i=Z(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=Z(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&Wm(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function qN(e,t,n){const i=Z(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Vt(G.comparator);a=a.insert(s,Wt.newNoDocument(s,Q.min()));const l=ot().add(s),u=new Uc(Q.min(),new Map,new Vt(at),a,l);await KA(i,u),i.du=i.du.remove(s),i.Au.delete(t),eg(i)}else await vd(i.localStore,t,!1).then(()=>Ad(i,t,n)).catch(ta)}async function HN(e,t){const n=Z(e),i=t.batch.batchId;try{const r=await WC(n.localStore,t);XA(n,i,null),$A(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Jo(n,r)}catch(r){await ta(r)}}async function GN(e,t,n){const i=Z(e);try{const r=await function(a,l){const u=Z(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ct(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);XA(i,t,n),$A(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Jo(i,r)}catch(r){await ta(r)}}function $A(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function XA(e,t,n){const i=Z(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Ad(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||ZA(e,i)})}function ZA(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Ym(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),eg(e))}function Q_(e,t,n){for(const i of n)i instanceof FA?(e.Ru.addReference(i.key,t),FN(e,i)):i instanceof QA?(H(tg,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||ZA(e,i.key)):F(19791,{wu:i})}function FN(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(H(tg,"New document in limbo: "+n),e.Eu.add(i),eg(e))}function eg(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new G(_t.fromString(t)),i=e.fu.next();e.Au.set(i,new MN(n)),e.du=e.du.insert(n,i),PA(e.remoteStore,new Ii(_n(Oc(n.path)),i,"TargetPurposeLimboResolution",Nc.ce))}}async function Jo(e,t,n){const i=Z(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){r.push(h);const g=Gm.As(u.targetId,h);s.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=Z(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,m=>P.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>P.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!ea(g))throw g;H(Fm,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const _=d.Ms.get(m),O=_.snapshotVersion,V=_.withLastLimboFreeSnapshotVersion(O);d.Ms=d.Ms.insert(m,V)}}}(i.localStore,s))}async function QN(e,t){const n=Z(e);if(!n.currentUser.isEqual(t)){H(tg,"User change. New user:",t.toKey());const i=await VA(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new j(k.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Jo(n,i.Ls)}}function YN(e,t){const n=Z(e),i=n.Au.get(t);if(i&&i.hu)return ot().add(i.key);{let r=ot();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function JA(e){const t=Z(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=KA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=YN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=qN.bind(null,t),t.Pu.H_=DN.bind(null,t.eventManager),t.Pu.yu=ON.bind(null,t.eventManager),t}function KN(e){const t=Z(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=HN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=GN.bind(null,t),t}class tc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Lc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return JC(this.persistence,new $C,t.initialUser,this.serializer)}Cu(t){return new xA(Hm.mi,this.serializer)}Du(t){return new sN}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tc.provider={build:()=>new tc};class $N extends tc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ct(this.persistence.referenceDelegate instanceof Ju,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new MC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Ce.withCacheSize(this.cacheSizeBytes):Ce.DEFAULT;return new xA(i=>Ju.mi(i,n),this.serializer)}}class Sd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>F_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=QN.bind(null,this.syncEngine),await IN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new NN}()}createDatastore(t){const n=Lc(t.databaseInfo.databaseId),i=function(s){return new cN(s)}(t.databaseInfo);return function(s,a,l,u){return new mN(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new pN(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>F_(this.syncEngine,n,0),function(){return z_.v()?new z_:new aN}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const g=new kN(r,s,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=Z(r);H(Nr,"RemoteStore shutting down."),s.Ea.add(5),await Zo(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Sd.provider={build:()=>new Sd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Jn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=Z(r),l={documents:s.map(g=>Zu(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,_t.emptyPath(),l,s.length),h=new Map;u.forEach(g=>{const m=yC(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return s.forEach(g=>{const m=h.get(g.toString());ct(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Pc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=G.fromPath(i);this.mutations.push(new _A(r,this.precondition(r)))}),await async function(i,r){const s=Z(i),a={writes:r.map(l=>IA(s.serializer,l))};await s.Go("Commit",s.serializer.databaseId,_t.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw F(50498,{Gu:t.constructor.name});n=Q.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new j(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Q.min())?le.exists(!1):le.updateTime(n):le.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Q.min()))throw new j(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return le.updateTime(n)}return le.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new Qm(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new XN(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!Ko(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!vA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="FirestoreClient";class JN{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ge.UNAUTHENTICATED,this.clientId=xm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{H(Zi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(Zi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Jm(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function sf(e,t){e.asyncQueue.verifyOperationInProgress(),H(Zi,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await VA(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Y_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await WN(e);H(Zi,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>B_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>B_(t.remoteStore,r)),e._onlineComponents=t}async function WN(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(Zi,"Using user provided OfflineComponentProvider");try{await sf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===k.FAILED_PRECONDITION||r.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ls("Error using user provided cache. Falling back to memory cache: "+n),await sf(e,new tc)}}else H(Zi,"Using default OfflineComponentProvider"),await sf(e,new $N(void 0));return e._offlineComponents}async function ng(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(Zi,"Using user provided OnlineComponentProvider"),await Y_(e,e._uninitializedComponentsProvider._online)):(H(Zi,"Using default OnlineComponentProvider"),await Y_(e,new Sd))),e._onlineComponents}function tD(e){return ng(e).then(t=>t.syncEngine)}function eD(e){return ng(e).then(t=>t.datastore)}async function bd(e){const t=await ng(e),n=t.eventManager;return n.onListen=PN.bind(null,t.syncEngine),n.onUnlisten=zN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=UN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=jN.bind(null,t.syncEngine),n}function nD(e,t,n={}){const i=new Fn;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new WA({next:m=>{d.Nu(),a.enqueueAndForget(()=>HA(s,g));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new j(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new j(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new GA(Oc(l.path),d,{includeMetadataChanges:!0,qa:!0});return qA(s,g)}(await bd(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="firestore.googleapis.com",$_=!0;class X_{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new j(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eS,this.ssl=$_}else this.host=t.host,this.ssl=t.ssl??$_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=OA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<xC)throw new j(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}yI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tS(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new j(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new j(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new j(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Bc{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new j(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new oI;switch(i.type){case"firstParty":return new hI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new j(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=K_.get(n);i&&(H("ComponentProvider","Removing Datastore"),K_.delete(n),i.terminate())}(this),Promise.resolve()}}function iD(e,t,n,i={}){var h;e=Ge(e,Bc);const r=Zs(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(w0(`https://${l}`),R0("Firestore",!0)),s.host!==eS&&s.host!==l&&Ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!Rr(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=ge.MOCK_USER;else{d=xR(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new j(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ge(m)}e._authCredentials=new lI(new j0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Ur(this.firestore,t,this._query)}}class xt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new xt(this.firestore,t,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(Yo(n,xt._jsonSchema))return new xt(t,i||null,new G(_t.fromString(n.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:Ht("string",xt._jsonSchemaVersion),referencePath:Ht("string")};class ji extends Ur{constructor(t,n,i){super(t,n,Oc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new xt(this.firestore,null,new G(t))}withConverter(t){return new ji(this.firestore,t,this._path)}}function Z_(e,t,...n){if(e=ne(e),B0("collection","path",t),e instanceof Bc){const i=_t.fromString(t,...n);return u_(i),new ji(e,null,i)}{if(!(e instanceof xt||e instanceof ji))throw new j(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_t.fromString(t,...n));return u_(i),new ji(e.firestore,null,i)}}function kn(e,t,...n){if(e=ne(e),arguments.length===1&&(t=xm.newId()),B0("doc","path",t),e instanceof Bc){const i=_t.fromString(t,...n);return l_(i),new xt(e,null,new G(i))}{if(!(e instanceof xt||e instanceof ji))throw new j(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_t.fromString(t,...n));return l_(i),new xt(e.firestore,e instanceof ji?e.converter:null,new G(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="AsyncQueue";class W_{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Qm(this,"async_queue_retry"),this._c=()=>{const i=rf();i&&H(J_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=rf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=rf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Fn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ea(t))throw t;H(J_,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,Jn("INTERNAL UNHANDLED ERROR: ",tv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=Zm.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&F(47125,{Pc:tv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function tv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class ti extends Bc{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new W_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new W_(t),this._firestoreClient=void 0,await t}}}function rD(e,t){const n=typeof e=="object"?e:D0(),i=typeof e=="string"?e:Qu,r=Dm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=DR("firestore");s&&iD(r,...s)}return r}function qc(e){if(e._terminated)throw new j(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||sD(e),e._firestoreClient}function sD(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new CI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,tS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new JN(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Le(ce.fromBase64String(t))}catch(n){throw new j(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Le(ce.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Le._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Yo(t,Le._jsonSchema))return Le.fromBase64String(t.bytes)}}Le._jsonSchemaVersion="firestore/bytes/1.0",Le._jsonSchema={type:Ht("string",Le._jsonSchemaVersion),bytes:Ht("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new j(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new j(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new j(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return at(this._lat,t._lat)||at(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vn._jsonSchemaVersion}}static fromJSON(t){if(Yo(t,vn._jsonSchema))return new vn(t.latitude,t.longitude)}}vn._jsonSchemaVersion="firestore/geoPoint/1.0",vn._jsonSchema={type:Ht("string",vn._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:En._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Yo(t,En._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new En(t.vectorValues);throw new j(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}En._jsonSchemaVersion="firestore/vectorValue/1.0",En._jsonSchema={type:Ht("string",En._jsonSchemaVersion),vectorValues:Ht("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=/^__.*__$/;class oD{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new nr(t,this.data,this.fieldMask,n,this.fieldTransforms):new $o(t,this.data,n,this.fieldTransforms)}}class nS{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new nr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function iS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw F(40011,{Ac:e})}}class ig{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new ig({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return ec(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(iS(this.Ac)&&aD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class lD{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Lc(t)}Cc(t,n,i,r=!1){return new ig({Ac:t,methodName:n,Dc:i,path:oe.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tl(e){const t=e._freezeSettings(),n=Lc(e._databaseId);return new lD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function rg(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);ag("Data must be an object, but it was:",a,i);const l=aS(i,a);let u,h;if(s.merge)u=new ze(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=wd(t,g,n);if(!a.contains(m))throw new j(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);lS(d,m)||d.push(m)}u=new ze(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new oD(new Ae(l),u,h)}class Gc extends Hc{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Gc}}class sg extends Hc{_toFieldTransform(t){return new tC(t.path,new wo)}isEqual(t){return t instanceof sg}}function rS(e,t,n,i){const r=e.Cc(1,t,n);ag("Data must be an object, but it was:",r,i);const s=[],a=Ae.empty();er(i,(u,h)=>{const d=og(t,u,n);h=ne(h);const g=r.yc(d);if(h instanceof Gc)s.push(d);else{const m=el(h,g);m!=null&&(s.push(d),a.set(d,m))}});const l=new ze(s);return new nS(a,l,r.fieldTransforms)}function sS(e,t,n,i,r,s){const a=e.Cc(1,t,n),l=[wd(t,i,n)],u=[r];if(s.length%2!=0)throw new j(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(wd(t,s[m])),u.push(s[m+1]);const h=[],d=Ae.empty();for(let m=l.length-1;m>=0;--m)if(!lS(h,l[m])){const _=l[m];let O=u[m];O=ne(O);const V=a.yc(_);if(O instanceof Gc)h.push(_);else{const M=el(O,V);M!=null&&(h.push(_),d.set(_,M))}}const g=new ze(h);return new nS(d,g,a.fieldTransforms)}function uD(e,t,n,i=!1){return el(n,e.Cc(i?4:3,t))}function el(e,t){if(oS(e=ne(e)))return ag("Unsupported field value:",t,e),aS(e,t);if(e instanceof Hc)return function(i,r){if(!iS(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=el(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=ne(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ZI(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=bt.fromDate(i);return{timestampValue:Xu(r.serializer,s)}}if(i instanceof bt){const s=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Xu(r.serializer,s)}}if(i instanceof vn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Le)return{bytesValue:SA(r.serializer,i._byteString)};if(i instanceof xt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Bm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof En)return function(a,l){return{mapValue:{fields:{[X0]:{stringValue:Z0},[Yu]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Lm(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Cc(i)}`)}(e,t)}function aS(e,t){const n={};return G0(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):er(e,(i,r)=>{const s=el(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function oS(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof bt||e instanceof vn||e instanceof Le||e instanceof xt||e instanceof Hc||e instanceof En)}function ag(e,t,n){if(!oS(n)||!q0(n)){const i=Cc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function wd(e,t,n){if((t=ne(t))instanceof Wo)return t._internalPath;if(typeof t=="string")return og(e,t);throw ec("Field path arguments must be of type string or ",e,!1,void 0,n)}const cD=new RegExp("[~\\*/\\[\\]]");function og(e,t,n){if(t.search(cD)>=0)throw ec(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Wo(...t.split("."))._internalPath}catch{throw ec(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ec(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new j(k.INVALID_ARGUMENT,l+e+u)}function lS(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new hD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(lg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hD extends nc{data(){return super.data()}}function lg(e,t){return typeof t=="string"?og(e,t):t instanceof Wo?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new j(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class uS extends ug{}function dD(e,t,...n){let i=[];t instanceof ug&&i.push(t),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof hg).length,l=s.filter(u=>u instanceof cg).length;if(a>1||a>0&&l>0)throw new j(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class cg extends uS{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new cg(t,n,i)}_apply(t){const n=this._parse(t);return cS(t._query,n),new Ur(t.firestore,t.converter,md(t._query,n))}_parse(t){const n=tl(t.firestore);return function(s,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){iv(g,d);const O=[];for(const V of g)O.push(nv(u,s,V));m={arrayValue:{values:O}}}else m=nv(u,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||iv(g,d),m=uD(l,a,g,d==="in"||d==="not-in");return qt.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class hg extends ug{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new hg(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)cS(a,u),a=md(a,u)}(t._query,n),new Ur(t.firestore,t.converter,md(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fg extends uS{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new fg(t,n)}_apply(t){const n=function(r,s,a){if(r.startAt!==null)throw new j(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new j(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bo(s,a)}(t._query,this._field,this._direction);return new Ur(t.firestore,t.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new na(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}}function mD(e,t="asc"){const n=t,i=lg("orderBy",e);return fg._create(i,n)}function nv(e,t,n){if(typeof(n=ne(n))=="string"){if(n==="")throw new j(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sA(t)&&n.indexOf("/")!==-1)throw new j(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(_t.fromString(n));if(!G.isDocumentKey(i))throw new j(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return y_(e,new G(i))}if(n instanceof xt)return y_(e,n._key);throw new j(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cc(n)}.`)}function iv(e,t){if(!Array.isArray(e)||e.length===0)throw new j(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function cS(e,t){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new j(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new j(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class hS{convertValue(t,n="none"){switch($i(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Ki(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw F(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return er(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[Yu].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>zt(a.doubleValue));return new En(n)}convertGeoPoint(t){return new vn(zt(t.latitude),zt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Dc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(To(t));default:return null}}convertTimestamp(t){const n=Yi(t);return new bt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=_t.fromString(t);ct(DA(i),9688,{name:t});const r=new Ao(i.get(1),i.get(3)),s=new G(i.popFirst(5));return r.isEqual(n)||Jn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class gD extends hS{constructor(t){super(),this.firestore=t}convertBytes(t){return new Le(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new xt(this.firestore,null,n)}}class hs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Bi extends nc{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(lg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new j(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Bi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Bi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bi._jsonSchema={type:Ht("string",Bi._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class lu extends Bi{data(t={}){return super.data(t)}}class As{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new hs(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new lu(this._firestore,this._userDataWriter,i.key,i,new hs(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new lu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new hs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new lu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new hs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:pD(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new j(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=As._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=xm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function pD(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return F(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(e){e=Ge(e,xt);const t=Ge(e.firestore,ti);return nD(qc(t),e._key).then(n=>mS(t,e,n))}As._jsonSchemaVersion="firestore/querySnapshot/1.0",As._jsonSchema={type:Ht("string",As._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class mg extends hS{constructor(t){super(),this.firestore=t}convertBytes(t){return new Le(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function dS(e,t,n){e=Ge(e,xt);const i=Ge(e.firestore,ti),r=dg(e.converter,t,n);return Fc(i,[rg(tl(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,le.none())])}function yD(e,t,n,...i){e=Ge(e,xt);const r=Ge(e.firestore,ti),s=tl(r);let a;return a=typeof(t=ne(t))=="string"||t instanceof Wo?sS(s,"updateDoc",e._key,t,n,i):rS(s,"updateDoc",e._key,t),Fc(r,[a.toMutation(e._key,le.exists(!0))])}function _D(e){return Fc(Ge(e.firestore,ti),[new Pc(e._key,le.none())])}function vD(e,t){const n=Ge(e.firestore,ti),i=kn(e),r=dg(e.converter,t);return Fc(n,[rg(tl(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,le.exists(!1))]).then(()=>i)}function rv(e,...t){var u,h,d;e=ne(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||ev(t[i])||(n=t[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(ev(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let s,a,l;if(e instanceof xt)a=Ge(e.firestore,ti),l=Oc(e._key.path),s={next:g=>{t[i]&&t[i](mS(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=Ge(e,Ur);a=Ge(g.firestore,ti),l=g._query;const m=new mg(a);s={next:_=>{t[i]&&t[i](new As(a,m,g,_))},error:t[i+1],complete:t[i+2]},fD(e._query)}return function(m,_,O,V){const M=new WA(V),w=new GA(_,M,O);return m.asyncQueue.enqueueAndForget(async()=>qA(await bd(m),w)),()=>{M.Nu(),m.asyncQueue.enqueueAndForget(async()=>HA(await bd(m),w))}}(qc(a),l,r,s)}function Fc(e,t){return function(i,r){const s=new Fn;return i.asyncQueue.enqueueAndForget(async()=>BN(await tD(i),r,s)),s.promise}(qc(e),t)}function mS(e,t,n){const i=n.docs.get(t._key),r=new mg(e);return new Bi(e,r,t._key,i,new hs(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED={maxAttempts:5};function ka(e,t){if((e=ne(e)).firestore!==t)throw new j(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=tl(t)}get(t){const n=ka(t,this._firestore),i=new gD(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return F(24041);const s=r[0];if(s.isFoundDocument())return new nc(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new nc(this._firestore,i,n._key,null,n.converter);throw F(18433,{doc:s})})}set(t,n,i){const r=ka(t,this._firestore),s=dg(r.converter,n,i),a=rg(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(t,n,i,...r){const s=ka(t,this._firestore);let a;return a=typeof(n=ne(n))=="string"||n instanceof Wo?sS(this._dataReader,"Transaction.update",s._key,n,i,r):rS(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(t){const n=ka(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD extends TD{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=ka(t,this._firestore),i=new mg(this._firestore);return super.get(t).then(r=>new Bi(this._firestore,i,n._key,r._document,new hs(!1,!1),n.converter))}}function SD(e,t,n){e=Ge(e,ti);const i={...ED,...n};return function(s){if(s.maxAttempts<1)throw new j(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,l){const u=new Fn;return s.asyncQueue.enqueueAndForget(async()=>{const h=await eD(s);new ZN(s.asyncQueue,h,l,a,u).ju()}),u.promise}(qc(e),r=>t(new AD(e,r)),i)}function sv(){return new sg("serverTimestamp")}(function(t,n=!0){(function(r){Ws=r})(Js),Us(new Ir("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new ti(new uI(i.getProvider("auth-internal")),new fI(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new j(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ao(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Li(r_,s_,t),Li(r_,s_,"esm2020")})();function gS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bD=gS,pS=new Fo("auth","Firebase",gS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new Cm("@firebase/auth");function wD(e,...t){ic.logLevel<=st.WARN&&ic.warn(`Auth (${Js}): ${e}`,...t)}function uu(e,...t){ic.logLevel<=st.ERROR&&ic.error(`Auth (${Js}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(e,...t){throw gg(e,...t)}function Tn(e,...t){return gg(e,...t)}function yS(e,t,n){const i={...bD(),[t]:n};return new Fo("auth","Firebase",i).create(t,{appName:e.name})}function qi(e){return yS(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gg(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return pS.create(e,...t)}function K(e,t,...n){if(!e)throw gg(t,...n)}function Bn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw uu(t),new Error(t)}function ni(e,t){e||Bn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function RD(){return av()==="http:"||av()==="https:"}function av(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RD()||LR()||"connection"in navigator)?navigator.onLine:!0}function CD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t,n){this.shortDelay=t,this.longDelay=n,ni(n>t,"Short delay should be less than long delay!"),this.isMobile=kR()||zR()}get(){return ID()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(e,t){ni(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OD=new nl(3e4,6e4);function Qc(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function ra(e,t,n,i,r={}){return vS(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=Qo({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return UR()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&Zs(e.emulatorConfig.host)&&(h.credentials="include"),_S.fetch()(await TS(e,e.config.apiHost,n,l),h)})}async function vS(e,t,n){e._canInitEmulator=!1;const i={...ND,...t};try{const r=new xD(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Hl(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hl(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Hl(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw Hl(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw yS(e,d,h);ei(e,d)}}catch(r){if(r instanceof ri)throw r;ei(e,"network-request-failed",{message:String(r)})}}async function ES(e,t,n,i,r={}){const s=await ra(e,t,n,i,r);return"mfaPendingCredential"in s&&ei(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function TS(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?pg(e.config,r):`${e.config.apiScheme}://${r}`;return DD.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class xD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Tn(this.auth,"network-request-failed")),OD.get())})}}function Hl(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Tn(e,t,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(e,t){return ra(e,"POST","/v1/accounts:delete",t)}async function rc(e,t){return ra(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function MD(e,t=!1){const n=ne(e),i=await n.getIdToken(t),r=yg(i);K(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:io(af(r.auth_time)),issuedAtTime:io(af(r.iat)),expirationTime:io(af(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function af(e){return Number(e)*1e3}function yg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return uu("JWT malformed, contained fewer than 3 sections"),null;try{const r=T0(n);return r?JSON.parse(r):(uu("Failed to decode base64 JWT payload"),null)}catch(r){return uu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function ov(e){const t=yg(e);return K(t,"internal-error"),K(typeof t.exp<"u","internal-error"),K(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof ri&&kD(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function kD({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=io(this.lastLoginAt),this.creationTime=io(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(e){var g;const t=e.auth,n=await e.getIdToken(),i=await Co(e,rc(t,{idToken:n}));K(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(g=r.providerUserInfo)!=null&&g.length?AS(r.providerUserInfo):[],a=LD(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Id(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function UD(e){const t=ne(e);await sc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function LD(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function AS(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zD(e,t){const n=await vS(e,{},async()=>{const i=Qo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await TS(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&Zs(e.emulatorConfig.host)&&(u.credentials="include"),_S.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jD(e,t){return ra(e,"POST","/v2/accounts:revokeToken",Qc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){K(t.idToken,"internal-error"),K(typeof t.idToken<"u","internal-error"),K(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):ov(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){K(t.length!==0,"internal-error");const n=ov(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await zD(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Ss;return i&&(K(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(K(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(K(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ss,this.toJSON())}_performRefresh(){return Bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(e,t){K(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class on{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new PD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Id(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Co(this,this.stsTokenManager.getToken(this.auth,t));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return MD(this,t)}reload(){return UD(this)}_assign(t){this!==t&&(K(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new on({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await sc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(qi(this.auth));const t=await this.getIdToken();return await Co(this,VD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:_,providerData:O,stsTokenManager:V}=n;K(g&&V,t,"internal-error");const M=Ss.fromJSON(this.name,V);K(typeof g=="string",t,"internal-error"),hi(i,t.name),hi(r,t.name),K(typeof m=="boolean",t,"internal-error"),K(typeof _=="boolean",t,"internal-error"),hi(s,t.name),hi(a,t.name),hi(l,t.name),hi(u,t.name),hi(h,t.name),hi(d,t.name);const w=new on({uid:g,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:M,createdAt:h,lastLoginAt:d});return O&&Array.isArray(O)&&(w.providerData=O.map(E=>({...E}))),u&&(w._redirectEventId=u),w}static async _fromIdTokenResponse(t,n,i=!1){const r=new Ss;r.updateFromServerResponse(n);const s=new on({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await sc(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];K(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?AS(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new Ss;l.updateFromIdToken(i);const u=new on({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Id(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=new Map;function qn(e){ni(e instanceof Function,"Expected a class definition");let t=lv.get(e);return t?(ni(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,lv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}SS.type="NONE";const uv=SS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(e,t,n){return`firebase:${e}:${t}:${n}`}class bs{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=cu(this.userKey,r.apiKey,s),this.fullPersistenceKey=cu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await rc(this.auth,{idToken:t}).catch(()=>{});return n?on._fromGetAccountInfoResponse(this.auth,n,t):null}return on._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new bs(qn(uv),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||qn(uv);const a=cu(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await rc(t,{idToken:d}).catch(()=>{});if(!m)break;g=await on._fromGetAccountInfoResponse(t,m,d)}else g=on._fromJSON(t,d);h!==s&&(l=g),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new bs(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new bs(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(IS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(bS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(NS(t))return"Blackberry";if(DS(t))return"Webos";if(wS(t))return"Safari";if((t.includes("chrome/")||RS(t))&&!t.includes("edge/"))return"Chrome";if(CS(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function bS(e=_e()){return/firefox\//i.test(e)}function wS(e=_e()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function RS(e=_e()){return/crios\//i.test(e)}function IS(e=_e()){return/iemobile/i.test(e)}function CS(e=_e()){return/android/i.test(e)}function NS(e=_e()){return/blackberry/i.test(e)}function DS(e=_e()){return/webos/i.test(e)}function _g(e=_e()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function BD(e=_e()){var t;return _g(e)&&!!((t=window.navigator)!=null&&t.standalone)}function qD(){return jR()&&document.documentMode===10}function OS(e=_e()){return _g(e)||CS(e)||DS(e)||NS(e)||/windows phone/i.test(e)||IS(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(e,t=[]){let n;switch(e){case"Browser":n=cv(_e());break;case"Worker":n=`${cv(_e())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Js}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(e,t={}){return ra(e,"GET","/v2/passwordPolicy",Qc(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=6;class QD{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??FD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hv(this),this.idTokenSubscription=new hv(this),this.beforeStateQueue=new HD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=qn(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await bs.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await rc(this,{idToken:t}),i=await on._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(an(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await sc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=CD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(an(this.app))return Promise.reject(qi(this));const n=t?ne(t):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&K(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return an(this.app)?Promise.reject(qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await GD(this),n=new QD(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Fo("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await jD(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&qn(t)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await bs.create(this,[qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=xS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&wD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Yc(e){return ne(e)}class hv{constructor(t){this.auth=t,this.observer=null,this.addObserver=KR(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KD(e){vg=e}function $D(e){return vg.loadJS(e)}function XD(){return vg.gapiScript}function ZD(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(e,t){const n=Dm(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Rr(s,t??{}))return r;ei(r,"already-initialized")}return n.initialize({options:t})}function WD(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(qn);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function t4(e,t,n){const i=Yc(e);K(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=VS(t),{host:a,port:l}=e4(t),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){K(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),K(Rr(h,i.config.emulator)&&Rr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,Zs(a)?(w0(`${s}//${a}${u}`),R0("Auth",!0)):n4()}function VS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function e4(e){const t=VS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:fv(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:fv(a)}}}function fv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function n4(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Bn("not implemented")}_getIdTokenResponse(t){return Bn("not implemented")}_linkToIdToken(t,n){return Bn("not implemented")}_getReauthenticationResolver(t){return Bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ws(e,t){return ES(e,"POST","/v1/accounts:signInWithIdp",Qc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4="http://localhost";class Dr extends MS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Dr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new Dr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return ws(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,ws(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,ws(t,n)}buildRequest(){const t={requestUri:i4,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Qo(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il extends kS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends il{constructor(){super("facebook.com")}static credential(t){return Dr._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return vi.credentialFromTaggedObject(t)}static credentialFromError(t){return vi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return vi.credential(t.oauthAccessToken)}catch{return null}}}vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends il{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Dr._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ei.credentialFromTaggedObject(t)}static credentialFromError(t){return Ei.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Ei.credential(n,i)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends il{constructor(){super("github.com")}static credential(t){return Dr._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ti.credentialFromTaggedObject(t)}static credentialFromError(t){return Ti.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ti.credential(t.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends il{constructor(){super("twitter.com")}static credential(t,n){return Dr._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ai.credentialFromTaggedObject(t)}static credentialFromError(t){return Ai.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Ai.credential(n,i)}catch{return null}}}Ai.TWITTER_SIGN_IN_METHOD="twitter.com";Ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r4(e,t){return ES(e,"POST","/v1/accounts:signUp",Qc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await on._fromIdTokenResponse(t,i,r),a=dv(i);return new Ji({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=dv(i);return new Ji({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function dv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4(e){var r;if(an(e.app))return Promise.reject(qi(e));const t=Yc(e);if(await t._initializationPromise,(r=t.currentUser)!=null&&r.isAnonymous)return new Ji({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await r4(t,{returnSecureToken:!0}),i=await Ji._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends ri{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,ac.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new ac(t,n,i,r)}}function PS(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ac._fromErrorAndOperation(e,s,t,i):s})}async function a4(e,t,n=!1){const i=await Co(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ji._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o4(e,t,n=!1){const{auth:i}=e;if(an(i.app))return Promise.reject(qi(i));const r="reauthenticate";try{const s=await Co(e,PS(i,r,t,e),n);K(s.idToken,i,"internal-error");const a=yg(s.idToken);K(a,i,"internal-error");const{sub:l}=a;return K(e.uid===l,i,"user-mismatch"),Ji._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ei(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l4(e,t,n=!1){if(an(e.app))return Promise.reject(qi(e));const i="signIn",r=await PS(e,i,t),s=await Ji._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}function u4(e,t,n,i){return ne(e).onIdTokenChanged(t,n,i)}function c4(e,t,n){return ne(e).beforeAuthStateChanged(t,n)}const oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(oc,"1"),this.storage.removeItem(oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=1e3,f4=10;class LS extends US{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);qD()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,f4):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},h4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}LS.type="LOCAL";const d4=LS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS extends US{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}zS.type="SESSION";const jS=zS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new Kc(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await m4(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=Eg("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function p4(e){An().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function y4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _4(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function v4(){return BS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="firebaseLocalStorageDb",E4=1,lc="firebaseLocalStorage",HS="fbase_key";class rl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $c(e,t){return e.transaction([lc],t?"readwrite":"readonly").objectStore(lc)}function T4(){const e=indexedDB.deleteDatabase(qS);return new rl(e).toPromise()}function Cd(){const e=indexedDB.open(qS,E4);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(lc,{keyPath:HS})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(lc)?t(i):(i.close(),await T4(),t(await Cd()))})})}async function mv(e,t,n){const i=$c(e,!0).put({[HS]:t,value:n});return new rl(i).toPromise()}async function A4(e,t){const n=$c(e,!1).get(t),i=await new rl(n).toPromise();return i===void 0?null:i.value}function gv(e,t){const n=$c(e,!0).delete(t);return new rl(n).toPromise()}const S4=800,b4=3;class GS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>b4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kc._getInstance(v4()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await y4(),!this.activeServiceWorker)return;this.sender=new g4(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||_4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Cd();return await mv(t,oc,"1"),await gv(t,oc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>mv(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>A4(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>gv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=$c(r,!1).getAll();return new rl(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),S4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GS.type="LOCAL";const w4=GS;new nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(e,t){return t?qn(t):(K(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg extends MS{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ws(t,this._buildIdpRequest())}_linkToIdToken(t,n){return ws(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return ws(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function I4(e){return l4(e.auth,new Tg(e),e.bypassAuthState)}function C4(e){const{auth:t,user:n}=e;return K(n,t,"internal-error"),o4(n,new Tg(e),e.bypassAuthState)}async function N4(e){const{auth:t,user:n}=e;return K(n,t,"internal-error"),a4(n,new Tg(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return I4;case"linkViaPopup":case"linkViaRedirect":return N4;case"reauthViaPopup":case"reauthViaRedirect":return C4;default:ei(this.auth,"internal-error")}}resolve(t){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=new nl(2e3,1e4);class fs extends FS{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,fs.currentPopupAction&&fs.currentPopupAction.cancel(),fs.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return K(t,this.auth,"internal-error"),t}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const t=Eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fs.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,D4.get())};t()}}fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4="pendingRedirect",hu=new Map;class x4 extends FS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=hu.get(this.auth._key());if(!t){try{const i=await V4(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}hu.set(this.auth._key(),t)}return this.bypassAuthState||hu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function V4(e,t){const n=P4(t),i=k4(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function M4(e,t){hu.set(e._key(),t)}function k4(e){return qn(e._redirectPersistence)}function P4(e){return cu(O4,e.config.apiKey,e.name)}async function U4(e,t,n=!1){if(an(e.app))return Promise.reject(qi(e));const i=Yc(e),r=R4(i,t),a=await new x4(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=10*60*1e3;class z4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!j4(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!QS(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Tn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=L4&&this.cachedEventUids.clear(),this.cachedEventUids.has(pv(t))}saveEventToCache(t){this.cachedEventUids.add(pv(t)),this.lastProcessedEventTime=Date.now()}}function pv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function QS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function j4(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B4(e,t={}){return ra(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H4=/^https?/;async function G4(e){if(e.config.emulator)return;const{authorizedDomains:t}=await B4(e);for(const n of t)try{if(F4(n))return}catch{}ei(e,"unauthorized-domain")}function F4(e){const t=Rd(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!H4.test(n))return!1;if(q4.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=new nl(3e4,6e4);function yv(){const e=An().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Y4(e){return new Promise((t,n)=>{var r,s,a;function i(){yv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{yv(),n(Tn(e,"network-request-failed"))},timeout:Q4.get()})}if((s=(r=An().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=An().gapi)!=null&&a.load)i();else{const l=ZD("iframefcb");return An()[l]=()=>{gapi.load?i():n(Tn(e,"network-request-failed"))},$D(`${XD()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw fu=null,t})}let fu=null;function K4(e){return fu=fu||Y4(e),fu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=new nl(5e3,15e3),X4="__/auth/iframe",Z4="emulator/auth/iframe",J4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},W4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tO(e){const t=e.config;K(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?pg(t,Z4):`https://${e.config.authDomain}/${X4}`,i={apiKey:t.apiKey,appName:e.name,v:Js},r=W4.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Qo(i).slice(1)}`}async function eO(e){const t=await K4(e),n=An().gapi;return K(n,e,"internal-error"),t.open({where:document.body,url:tO(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:J4,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Tn(e,"network-request-failed"),l=An().setTimeout(()=>{s(a)},$4.get());function u(){An().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iO=500,rO=600,sO="_blank",aO="http://localhost";class _v{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oO(e,t,n,i=iO,r=rO){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...nO,width:i.toString(),height:r.toString(),top:s,left:a},h=_e().toLowerCase();n&&(l=RS(h)?sO:n),bS(h)&&(t=t||aO,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,O])=>`${m}${_}=${O},`,"");if(BD(h)&&l!=="_self")return lO(t||"",l),new _v(null);const g=window.open(t||"",l,d);K(g,e,"popup-blocked");try{g.focus()}catch{}return new _v(g)}function lO(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="__/auth/handler",cO="emulator/auth/handler",hO=encodeURIComponent("fac");async function vv(e,t,n,i,r,s){K(e.config.authDomain,e,"auth-domain-config-required"),K(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Js,eventId:r};if(t instanceof kS){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",YR(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof il){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${hO}=${encodeURIComponent(u)}`:"";return`${fO(e)}?${Qo(l).slice(1)}${h}`}function fO({config:e}){return e.emulator?pg(e,cO):`https://${e.authDomain}/${uO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="webStorageSupport";class dO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jS,this._completeRedirectFn=U4,this._overrideRedirectResult=M4}async _openPopup(t,n,i,r){var a;ni((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await vv(t,n,i,Rd(),r);return oO(t,s,Eg())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await vv(t,n,i,Rd(),r);return p4(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ni(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await eO(t),i=new z4(t);return n.register("authEvent",r=>(K(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(of,{type:of},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[of];s!==void 0&&n(!!s),ei(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=G4(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return OS()||wS()||_g()}}const mO=dO;var Ev="@firebase/auth",Tv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yO(e){Us(new Ir("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;K(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xS(e)},h=new YD(i,r,s,u);return WD(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Us(new Ir("auth-internal",t=>{const n=Yc(t.getProvider("auth").getImmediate());return(i=>new gO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Li(Ev,Tv,pO(e)),Li(Ev,Tv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=5*60,vO=b0("authIdTokenMaxAge")||_O;let Av=null;const EO=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>vO)return;const r=n==null?void 0:n.token;Av!==r&&(Av=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function TO(e=D0()){const t=Dm(e,"auth");if(t.isInitialized())return t.getImmediate();const n=JD(e,{popupRedirectResolver:mO,persistence:[w4,d4,jS]}),i=b0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=EO(s.toString());c4(n,a,()=>a(n.currentUser)),u4(n,l=>a(l))}}const r=A0("auth");return r&&t4(n,`http://${r}`),n}function AO(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}KD({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=Tn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",AO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yO("Browser");const SO={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},YS=N0(SO),rn=rD(YS),bO=TO(YS),wO=({className:e=""})=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:N.jsx("path",{d:"m9 18 6-6-6-6"})}),KS=({className:e=""})=>N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[N.jsx("circle",{cx:"12",cy:"12",r:"4"}),N.jsx("path",{d:"M12 2v2"}),N.jsx("path",{d:"M12 20v2"}),N.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),N.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),N.jsx("path",{d:"M2 12h2"}),N.jsx("path",{d:"M20 12h2"}),N.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),N.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),$S=({className:e=""})=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:N.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),RO=({className:e=""})=>N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[N.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),N.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),IO=({className:e=""})=>N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[N.jsx("path",{d:"M19 12H5"}),N.jsx("polyline",{points:"12 19 5 12 12 5"})]}),CO=({className:e=""})=>N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 ${e}`,children:[N.jsx("circle",{cx:"11",cy:"11",r:"8"}),N.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),NO=({className:e=""})=>N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[N.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),N.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),DO=({className:e=""})=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:N.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),XS=({className:e="",filled:t=!1})=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:N.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),OO=({className:e=""})=>N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[N.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),N.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),xO=({theme:e})=>{const t=Qn[e];return N.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.bg}`,children:[N.jsx(XS,{className:"animate-pulse-heart text-pink-400",filled:!0}),N.jsx("p",{className:`mt-4 text-lg ${t.text} opacity-70`,children:"Загрузка новелл..."})]})},Qn={light:{bg:"bg-stone-100",text:"text-stone-800",componentBg:"bg-white",componentText:"text-stone-700",border:"border-stone-200",searchBg:"bg-white",searchPlaceholder:"placeholder-stone-400",searchRing:"focus:ring-pink-400",tgBg:"#f8f7f5",tgHeader:"#FFFFFF",accent:"pink-500",accentHover:"pink-400"},dark:{bg:"bg-gray-900",text:"text-gray-100",componentBg:"bg-gray-800",componentText:"text-gray-200",border:"border-gray-700",searchBg:"bg-gray-800",searchPlaceholder:"placeholder-gray-500",searchRing:"focus:ring-pink-500",tgBg:"#111827",tgHeader:"#1f2937",accent:"pink-500",accentHover:"pink-400"}},VO=({onClose:e,onSelectPlan:t,theme:n})=>{const i=Qn[n],r=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return N.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:N.jsxs("div",{className:`w-full max-w-sm rounded-2xl p-6 shadow-lg ${i.componentBg} ${i.text}`,children:[N.jsx(DO,{className:`mx-auto mb-4 text-${i.accent}`}),N.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),N.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),N.jsx("div",{className:"space-y-3",children:r.map(s=>N.jsxs("button",{onClick:()=>t(s),className:`relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${i.border} ${i.componentBg} hover:border-${i.accentHover}`,children:[N.jsx("p",{className:"font-bold",children:s.name}),N.jsxs("p",{className:"text-sm",children:[s.price," ₽"]})]},s.duration))}),N.jsx("button",{onClick:e,className:`w-full py-3 mt-4 rounded-lg border ${i.border}`,children:"Не сейчас"})]})})},MO=({onClose:e,onSelectMethod:t,theme:n,plan:i})=>{const r=Qn[n];return N.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:N.jsxs("div",{className:`w-full max-w-sm rounded-2xl p-6 shadow-lg ${r.componentBg} ${r.text}`,children:[N.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),N.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",i.name," (",i.price," ₽)"]}),N.jsxs("div",{className:"space-y-3",children:[N.jsxs("button",{onClick:()=>t("card"),className:`w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${r.border} ${r.componentBg} hover:border-${r.accentHover}`,children:[N.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),N.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),N.jsxs("button",{onClick:()=>t("tribut"),className:`w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${r.border} ${r.componentBg} hover:border-${r.accentHover}`,children:[N.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),N.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]})]}),N.jsx("button",{onClick:e,className:`w-full py-3 mt-4 rounded-lg border ${r.border}`,children:"Назад"})]})})},kO=({onBack:e,onHome:t,isReader:n=!1,onTextSizeChange:i,onThemeChange:r,theme:s})=>{const[a,l]=X.useState(!1);return N.jsxs("div",{className:"fixed bottom-4 right-4 z-20",children:[a&&N.jsxs("div",{className:"flex flex-col items-center gap-3 mb-3",children:[n&&N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"w-28 h-14 rounded-full bg-white/80 dark:bg-gray-700/80 backdrop-blur-md shadow-lg flex items-center justify-around text-stone-700 dark:text-gray-200",children:[N.jsx("button",{onClick:()=>i(-2),className:"text-2xl font-bold",children:"-"}),N.jsx("button",{onClick:()=>i(2),className:"text-2xl font-bold",children:"+"})]}),N.jsx("button",{onClick:r,className:"w-14 h-14 rounded-full bg-white/80 dark:bg-gray-700/80 backdrop-blur-md shadow-lg flex items-center justify-center text-stone-700 dark:text-gray-200",children:s==="dark"?N.jsx(KS,{}):N.jsx($S,{})})]}),e&&N.jsx("button",{onClick:e,className:"w-14 h-14 rounded-full bg-white/80 dark:bg-gray-700/80 backdrop-blur-md shadow-lg flex items-center justify-center text-stone-700 dark:text-gray-200",children:N.jsx(IO,{})}),t&&N.jsx("button",{onClick:t,className:"w-14 h-14 rounded-full bg-white/80 dark:bg-gray-700/80 backdrop-blur-md shadow-lg flex items-center justify-center text-stone-700 dark:text-gray-200",children:N.jsx(RO,{})})]}),N.jsx("button",{onClick:()=>l(!a),className:"w-16 h-16 rounded-full bg-pink-500 text-white shadow-lg flex items-center justify-center transform transition-transform duration-300 hover:scale-110",children:N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform duration-300 ${a?"rotate-45":"rotate-0"}`,children:[N.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),N.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})},PO=({novels:e,onSelectNovel:t,theme:n,setTheme:i,genreFilter:r,onClearGenreFilter:s})=>{const a=Qn[n],[l,u]=X.useState(""),h=X.useMemo(()=>e.filter(d=>(!r||d.genres.includes(r))&&d.title.toLowerCase().includes(l.toLowerCase())),[e,l,r]);return!e.length&&!l?N.jsx("div",{className:`p-4 text-center ${a.text}`,children:"Загрузка библиотеки..."}):N.jsxs("div",{className:`p-4 ${a.text}`,children:[N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsx("h1",{className:"text-3xl font-bold",children:"Библиотека"}),N.jsx("button",{onClick:()=>i(n==="dark"?"light":"dark"),className:`p-2 rounded-full ${a.componentBg} ${a.border} border`,children:n==="dark"?N.jsx(KS,{}):N.jsx($S,{})})]}),r&&N.jsxs("div",{className:`flex items-center justify-between p-3 mb-4 rounded-lg border ${a.border} ${a.componentBg}`,children:[N.jsxs("p",{className:"text-sm",children:[N.jsx("span",{className:"opacity-70",children:"Жанр:"}),N.jsx("strong",{className:"ml-2",children:r})]}),N.jsx("button",{onClick:s,className:`text-xs font-bold text-${a.accent} hover:underline`,children:"Сбросить"})]}),N.jsxs("div",{className:"relative mb-6",children:[N.jsx(CO,{className:a.searchPlaceholder}),N.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:l,onChange:d=>u(d.target.value),className:`w-full ${a.searchBg} ${a.border} border rounded-lg py-2 pl-10 pr-4 ${a.text} ${a.searchPlaceholder} focus:outline-none focus:ring-2 ${a.searchRing} transition-shadow duration-300`})]}),N.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4",children:h.map((d,g)=>N.jsxs("div",{onClick:()=>t(d),className:"cursor-pointer group relative animate-fade-in-down",style:{animationDelay:`${g*50}ms`},children:[N.jsx("div",{className:`absolute -inset-1 bg-gradient-to-r from-${a.accent} to-purple-500 rounded-lg blur-md opacity-0 group-hover:opacity-50 transition duration-500`}),N.jsxs("div",{className:"relative",children:[N.jsx("img",{src:d.coverUrl,alt:d.title,className:`w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 ${a.border} border`}),N.jsx("h2",{className:`mt-2 font-semibold text-xs truncate ${a.text}`,children:d.title})]})]},d.id))})]})},UO=({novel:e,onSelectChapter:t,onGenreSelect:n,theme:i,subscription:r,botUsername:s,userId:a,chaptersCache:l,lastReadData:u})=>{const h=Qn[i],[d,g]=X.useState([]),[m,_]=X.useState(!0),[O,V]=X.useState(!1),[M,w]=X.useState(null),[E,R]=X.useState("newest"),D=r&&new Date(r.expires_at)>new Date,L=X.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);X.useEffect(()=>{l[e.id]?(g(l[e.id]),_(!1)):(_(!0),fetch(`./data/chapters/${e.id}.json`).then(b=>b.json()).then(b=>{g(b.chapters||[]),_(!1)}).catch(b=>{console.error(b),g([]),_(!1)}))},[e.id,l]);const q=X.useMemo(()=>{const b=[...d];return E==="newest"?b.reverse():d},[d,E]),T=b=>{!D&&b.isPaid?V(!0):t(b)},y=()=>{if(L){const b=d.find(I=>I.id===L);b&&t(b)}},v=b=>w(b),A=async b=>{var S;const I=(S=window.Telegram)==null?void 0:S.WebApp;if(I&&a&&M){const Rt=kn(rn,"users",a);try{await dS(Rt,{pendingSubscription:{...M,method:b,date:new Date().toISOString()}},{merge:!0}),I.openTelegramLink(`https://t.me/${s}?start=true`)}catch(Oe){console.error("Ошибка записи в Firebase:",Oe),I.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}};return N.jsxs("div",{className:h.text,children:[O&&!M&&N.jsx(VO,{onClose:()=>V(!1),onSelectPlan:v,theme:i}),O&&M&&N.jsx(MO,{onClose:()=>w(null),onSelectMethod:A,theme:i,plan:M}),N.jsxs("div",{className:"relative h-64",children:[N.jsx("img",{src:e.coverUrl,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),N.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${i==="dark"?"from-gray-900 via-gray-900/80":"from-stone-100 via-stone-100/80"} to-transparent`}),N.jsxs("div",{className:"absolute bottom-4 left-4",children:[N.jsx("h1",{className:"text-3xl font-bold",style:{textShadow:"1px 1px 3px rgba(0,0,0,0.5)"},children:e.title}),N.jsx("p",{className:"text-sm",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.5)"},children:e.author})]})]}),N.jsxs("div",{className:"p-4",children:[N.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(b=>N.jsx("button",{onClick:()=>n(b),className:`text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 ${i==="dark"?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:b},b))}),N.jsx("p",{className:`text-sm mb-6 ${i==="dark"?"text-gray-300":"text-stone-600"}`,children:e.description}),L&&N.jsxs("button",{onClick:y,className:`w-full py-3 mb-4 rounded-lg bg-${h.accent} text-white font-bold transition-transform hover:scale-105`,children:["Продолжить чтение (Глава ",L,")"]}),N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),N.jsx("button",{onClick:()=>R(b=>b==="newest"?"oldest":"newest"),className:`text-sm font-semibold text-${h.accent}`,children:E==="newest"?"Сначала новые":"Сначала старые"})]}),D&&N.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",new Date(r.expires_at).toLocaleDateString()]}),m?N.jsx("p",{className:h.text,children:"Загрузка глав..."}):N.jsx("div",{className:"flex flex-col gap-3",children:q.map(b=>{const I=!D&&b.isPaid;return N.jsxs("div",{onClick:()=>T(b),className:`p-4 ${h.componentBg} rounded-xl cursor-pointer transition-all duration-200 hover:border-${h.accentHover} border ${h.border} flex items-center justify-between shadow-sm hover:shadow-md ${I?"opacity-70":""}`,children:[L===b.id&&N.jsx("span",{className:`absolute left-2 text-xs text-${h.accent}`,children:"●"}),N.jsx("div",{children:N.jsx("p",{className:`font-semibold ${h.componentText}`,children:b.title})}),I?N.jsx(NO,{className:h.text}):N.jsx(wO,{className:h.text})]},b.id)})})]})]})},LO=({chapter:e,novel:t,theme:n,fontSize:i,userId:r,userName:s})=>{const a=Qn[n],[l,u]=X.useState([]),[h,d]=X.useState(""),[g,m]=X.useState(null),[_,O]=X.useState(""),[V,M]=X.useState(0),[w,E]=X.useState(!1),R=X.useMemo(()=>kn(rn,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);X.useEffect(()=>{const v=rv(R,I=>{var S;M(((S=I.data())==null?void 0:S.likeCount)||0)}),A=dD(Z_(rn,`chapters_metadata/${t.id}_${e.id}/comments`),mD("timestamp","asc")),b=rv(A,I=>{const S=I.docs.map(Rt=>({id:Rt.id,...Rt.data()}));u(S)});if(r&&r!=="guest_user"){const I=kn(rn,`chapters_metadata/${t.id}_${e.id}/likes`,r);fS(I).then(S=>E(S.exists()))}return()=>{v(),b()}},[R,t.id,e.id,r]);const D=async v=>{if(v.preventDefault(),!h.trim()||!r||r==="guest_user")return;const A=Z_(rn,`chapters_metadata/${t.id}_${e.id}/comments`);await vD(A,{userId:r,userName:s||"Аноним",text:h,timestamp:sv()}),d("")},L=v=>{m(v.id),O(v.text)},q=async v=>{if(!_.trim())return;const A=kn(rn,`chapters_metadata/${t.id}_${e.id}/comments`,v);await yD(A,{text:_}),m(null),O("")},T=async v=>{const A=kn(rn,`chapters_metadata/${t.id}_${e.id}/comments`,v);await _D(A)},y=async()=>{if(!r||r==="guest_user")return;const v=kn(rn,`chapters_metadata/${t.id}_${e.id}/likes`,r);await SD(rn,async A=>{var Rt;const b=await A.get(v),S=((Rt=(await A.get(R)).data())==null?void 0:Rt.likeCount)||0;b.exists()?(A.delete(v),A.set(R,{likeCount:Math.max(0,S-1)},{merge:!0}),E(!1)):(A.set(v,{timestamp:sv()}),A.set(R,{likeCount:S+1},{merge:!0}),E(!0))})};return N.jsx("div",{className:`min-h-screen transition-colors duration-300 ${a.bg}`,children:N.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[N.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 text-center",children:t.title}),N.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80",children:e.title}),N.jsx("div",{className:`whitespace-pre-wrap leading-relaxed ${a.text}`,style:{fontSize:`${i}px`},children:e.content}),N.jsxs("div",{className:"mt-12 border-t pt-8",children:[N.jsx("div",{className:"flex items-center gap-4 mb-8",children:N.jsxs("button",{onClick:y,className:`flex items-center gap-2 text-${a.accentHover} transition-transform hover:scale-110`,children:[N.jsx(XS,{filled:w,className:w?`text-${a.accent}`:""}),N.jsx("span",{className:"font-bold text-lg",children:V})]})}),N.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Комментарии"}),N.jsxs("div",{className:"space-y-4 mb-6",children:[l.map(v=>N.jsxs("div",{className:`p-3 rounded-lg ${n==="dark"?"bg-gray-800":"bg-stone-50"}`,children:[N.jsx("p",{className:"font-bold text-sm",children:v.userName}),g===v.id?N.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[N.jsx("input",{type:"text",value:_,onChange:A=>O(A.target.value),className:`w-full ${a.searchBg} ${a.border} border rounded-lg py-1 px-2 ${a.text}`}),N.jsx("button",{onClick:()=>q(v.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),N.jsx("button",{onClick:()=>m(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):N.jsx("p",{className:"text-md mt-1",children:v.text}),(r===v.userId||r==="5493263435")&&N.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[N.jsx("button",{onClick:()=>L(v),className:"text-xs text-gray-500",children:"Редактировать"}),N.jsx("button",{onClick:()=>T(v.id),className:"text-xs text-red-500",children:"Удалить"})]})]},v.id)),l.length===0&&N.jsx("p",{className:"opacity-70",children:"Комментариев пока нет. Будьте первым!"})]}),N.jsxs("form",{onSubmit:D,className:"flex items-center gap-2",children:[N.jsx("input",{type:"text",value:h,onChange:v=>d(v.target.value),placeholder:"Написать комментарий...",className:`w-full ${a.searchBg} ${a.border} border rounded-lg py-2 px-4 ${a.text} ${a.searchPlaceholder} focus:outline-none focus:ring-2 ${a.searchRing}`}),N.jsx("button",{type:"submit",className:`p-2 rounded-full bg-${a.accent} text-white`,children:N.jsx(OO,{})})]})]})]})})};function zO(){const[e,t]=X.useState("light"),[n,i]=X.useState(18),[r,s]=X.useState("list"),[a,l]=X.useState([]),[u,h]=X.useState(null),[d,g]=X.useState(null),[m,_]=X.useState(null),[O,V]=X.useState(null),[M,w]=X.useState(null),[E,R]=X.useState(null),[D,L]=X.useState(!0),[q,T]=X.useState({}),[y,v]=X.useState(null),A="tenebrisverbot",b=X.useCallback(async W=>{if(M&&M!=="guest_user"){const tt=kn(rn,"users",M);try{await dS(tt,W,{merge:!0})}catch(Ft){console.error("Не удалось обновить данные пользователя:",Ft)}}},[M]),I=X.useCallback(W=>{t(W),b({settings:{theme:W,fontSize:n}})},[n,b]),S=X.useCallback(W=>{i(tt=>{const Ft=Math.max(12,Math.min(32,tt+W));return b({settings:{theme:e,fontSize:Ft}}),Ft})},[e,b]);X.useEffect(()=>{(async()=>{var tt,Ft,xe,sl,ir,al;try{const Rn=(tt=window.Telegram)==null?void 0:tt.WebApp;let In="guest_user";if(Rn&&(Rn.ready(),Rn.expand(),In=((sl=(xe=(Ft=Rn.initDataUnsafe)==null?void 0:Ft.user)==null?void 0:xe.id)==null?void 0:sl.toString())||"guest_user",R(((al=(ir=Rn.initDataUnsafe)==null?void 0:ir.user)==null?void 0:al.first_name)||null)),w(In),await s4(bO),In!=="guest_user"){const aa=kn(rn,"users",In),Lr=await fS(aa);if(Lr.exists()){const Cn=Lr.data();V(Cn.subscription||null),v(Cn.lastRead||null),Cn.settings&&(t(Cn.settings.theme||"light"),i(Cn.settings.fontSize||18))}}const rr=await fetch("./data/novels.json");if(!rr.ok)throw new Error("Failed to fetch novels");const sa=await rr.json();l(sa.novels)}catch(Rn){console.error("Ошибка инициализации:",Rn)}finally{L(!1)}})()},[]),X.useEffect(()=>{a.length>0&&a.forEach(W=>{fetch(`./data/chapters/${W.id}.json`).then(tt=>tt.json()).then(tt=>T(Ft=>({...Ft,[W.id]:tt.chapters||[]}))).catch(tt=>console.error(`Не удалось предзагрузить главы для ${W.title}:`,tt))})},[a]),X.useEffect(()=>{document.documentElement.className=e},[e]);const Rt=X.useCallback(()=>{r==="reader"?s("details"):r==="details"&&(s("list"),_(null))},[r]),Oe=X.useCallback(()=>{s("list"),_(null)},[]);X.useEffect(()=>{var tt;const W=(tt=window.Telegram)==null?void 0:tt.WebApp;if(W)return W.onEvent("backButtonClicked",Rt),r==="list"?W.BackButton.hide():W.BackButton.show(),()=>W.offEvent("backButtonClicked",Rt)},[r,Rt]),X.useEffect(()=>{var tt;const W=(tt=window.Telegram)==null?void 0:tt.WebApp;W&&(W.setHeaderColor(Qn[e].tgHeader),W.setBackgroundColor(Qn[e].tgBg))},[e]);const B=X.useCallback(async W=>{if(g(W),s("reader"),M&&M!=="guest_user"&&u){const tt={...y||{},[u.id]:{novelId:u.id,chapterId:W.id,timestamp:new Date().toISOString()}};v(tt),await b({lastRead:tt})}},[M,u,y,b]),J=W=>{h(W),s("details")},$=W=>{_(W),s("list")},vt=()=>{_(null)};if(D)return N.jsx(xO,{theme:e});const Dt=()=>{switch(r){case"details":return N.jsx(UO,{novel:u,onSelectChapter:B,onGenreSelect:$,theme:e,subscription:O,botUsername:A,userId:M,chaptersCache:q,lastReadData:y});case"reader":return N.jsx(LO,{chapter:d,novel:u,theme:e,fontSize:n,userId:M,userName:E});case"list":default:return N.jsx(PO,{novels:a,onSelectNovel:J,theme:e,setTheme:I,genreFilter:m,onClearGenreFilter:vt})}},si=Qn[e];return N.jsxs("main",{className:`${si.bg} min-h-screen`,children:[Dt(),N.jsx(kO,{onBack:r!=="list"?Rt:null,onHome:r!=="list"?Oe:null,isReader:r==="reader",onTextSizeChange:S,onThemeChange:()=>I(e==="dark"?"light":"dark"),theme:e})]})}TR.createRoot(document.getElementById("root")).render(N.jsx(X.StrictMode,{children:N.jsx(zO,{})}));
