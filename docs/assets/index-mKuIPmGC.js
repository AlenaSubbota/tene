(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var kv={exports:{}},Rc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VS=Symbol.for("react.transitional.element"),MS=Symbol.for("react.fragment");function Pv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:VS,type:e,key:i,ref:t!==void 0?t:null,props:n}}Rc.Fragment=MS;Rc.jsx=Pv;Rc.jsxs=Pv;kv.exports=Rc;var T=kv.exports,Uv={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qd=Symbol.for("react.transitional.element"),kS=Symbol.for("react.portal"),PS=Symbol.for("react.fragment"),US=Symbol.for("react.strict_mode"),LS=Symbol.for("react.profiler"),jS=Symbol.for("react.consumer"),zS=Symbol.for("react.context"),BS=Symbol.for("react.forward_ref"),qS=Symbol.for("react.suspense"),HS=Symbol.for("react.memo"),Lv=Symbol.for("react.lazy"),Vp=Symbol.iterator;function FS(e){return e===null||typeof e!="object"?null:(e=Vp&&e[Vp]||e["@@iterator"],typeof e=="function"?e:null)}var jv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zv=Object.assign,Bv={};function ha(e,t,n){this.props=e,this.context=t,this.refs=Bv,this.updater=n||jv}ha.prototype.isReactComponent={};ha.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ha.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qv(){}qv.prototype=ha.prototype;function Yd(e,t,n){this.props=e,this.context=t,this.refs=Bv,this.updater=n||jv}var Kd=Yd.prototype=new qv;Kd.constructor=Yd;zv(Kd,ha.prototype);Kd.isPureReactComponent=!0;var Mp=Array.isArray,kt={H:null,A:null,T:null,S:null,V:null},Hv=Object.prototype.hasOwnProperty;function Xd(e,t,n,i,r,s){return n=s.ref,{$$typeof:Qd,type:e,key:t,ref:n!==void 0?n:null,props:s}}function GS(e,t){return Xd(e.type,t,void 0,void 0,void 0,e.props)}function $d(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qd}function QS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var kp=/\/+/g;function Nh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?QS(""+e.key):t.toString(36)}function Pp(){}function YS(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Pp,Pp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function hs(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Qd:case kS:a=!0;break;case Lv:return a=e._init,hs(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+Nh(e,0):i,Mp(r)?(n="",a!=null&&(n=a.replace(kp,"$&/")+"/"),hs(r,t,n,"",function(h){return h})):r!=null&&($d(r)&&(r=GS(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(kp,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(Mp(e))for(var u=0;u<e.length;u++)i=e[u],s=l+Nh(i,u),a+=hs(i,t,n,s,r);else if(u=FS(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+Nh(i,u++),a+=hs(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return hs(YS(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function jl(e,t,n){if(e==null)return e;var i=[],r=0;return hs(e,i,"","",function(s){return t.call(n,s,r++)}),i}function KS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Up=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function XS(){}nt.Children={map:jl,forEach:function(e,t,n){jl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return jl(e,function(){t++}),t},toArray:function(e){return jl(e,function(t){return t})||[]},only:function(e){if(!$d(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=ha;nt.Fragment=PS;nt.Profiler=LS;nt.PureComponent=Yd;nt.StrictMode=US;nt.Suspense=qS;nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=kt;nt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return kt.H.useMemoCache(e)}};nt.cache=function(e){return function(){return e.apply(null,arguments)}};nt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=zv({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!Hv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Xd(e.type,r,void 0,void 0,s,i)};nt.createContext=function(e){return e={$$typeof:zS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:jS,_context:e},e};nt.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)Hv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return Xd(e,s,void 0,void 0,null,r)};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:BS,render:e}};nt.isValidElement=$d;nt.lazy=function(e){return{$$typeof:Lv,_payload:{_status:-1,_result:e},_init:KS}};nt.memo=function(e,t){return{$$typeof:HS,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=kt.T,n={};kt.T=n;try{var i=e(),r=kt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(XS,Up)}catch(s){Up(s)}finally{kt.T=t}};nt.unstable_useCacheRefresh=function(){return kt.H.useCacheRefresh()};nt.use=function(e){return kt.H.use(e)};nt.useActionState=function(e,t,n){return kt.H.useActionState(e,t,n)};nt.useCallback=function(e,t){return kt.H.useCallback(e,t)};nt.useContext=function(e){return kt.H.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e,t){return kt.H.useDeferredValue(e,t)};nt.useEffect=function(e,t,n){var i=kt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};nt.useId=function(){return kt.H.useId()};nt.useImperativeHandle=function(e,t,n){return kt.H.useImperativeHandle(e,t,n)};nt.useInsertionEffect=function(e,t){return kt.H.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return kt.H.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return kt.H.useMemo(e,t)};nt.useOptimistic=function(e,t){return kt.H.useOptimistic(e,t)};nt.useReducer=function(e,t,n){return kt.H.useReducer(e,t,n)};nt.useRef=function(e){return kt.H.useRef(e)};nt.useState=function(e){return kt.H.useState(e)};nt.useSyncExternalStore=function(e,t,n){return kt.H.useSyncExternalStore(e,t,n)};nt.useTransition=function(){return kt.H.useTransition()};nt.version="19.1.1";Uv.exports=nt;var G=Uv.exports,Fv={exports:{}},Ic={},Gv={exports:{}},Qv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,X){var $=z.length;z.push(X);t:for(;0<$;){var pt=$-1>>>1,vt=z[pt];if(0<r(vt,X))z[pt]=X,z[$]=vt,$=pt;else break t}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var X=z[0],$=z.pop();if($!==X){z[0]=$;t:for(var pt=0,vt=z.length,Ue=vt>>>1;pt<Ue;){var Jt=2*(pt+1)-1,Ct=z[Jt],te=Jt+1,ee=z[te];if(0>r(Ct,$))te<vt&&0>r(ee,Ct)?(z[pt]=ee,z[te]=$,pt=te):(z[pt]=Ct,z[Jt]=$,pt=Jt);else if(te<vt&&0>r(ee,$))z[pt]=ee,z[te]=$,pt=te;else break t}}return X}function r(z,X){var $=z.sortIndex-X.sortIndex;return $!==0?$:z.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,_=!1,x=!1,V=!1,M=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(z){for(var X=n(h);X!==null;){if(X.callback===null)i(h);else if(X.startTime<=z)i(h),X.sortIndex=X.expirationTime,t(u,X);else break;X=n(h)}}function j(z){if(V=!1,D(z),!x)if(n(u)!==null)x=!0,H||(H=!0,C());else{var X=n(h);X!==null&&Ae(j,X.startTime-z)}}var H=!1,E=-1,y=5,A=-1;function S(){return M?!0:!(e.unstable_now()-A<y)}function I(){if(M=!1,H){var z=e.unstable_now();A=z;var X=!0;try{t:{x=!1,V&&(V=!1,v(E),E=-1),_=!0;var $=m;try{e:{for(D(z),g=n(u);g!==null&&!(g.expirationTime>z&&S());){var pt=g.callback;if(typeof pt=="function"){g.callback=null,m=g.priorityLevel;var vt=pt(g.expirationTime<=z);if(z=e.unstable_now(),typeof vt=="function"){g.callback=vt,D(z),X=!0;break e}g===n(u)&&i(u),D(z)}else i(u);g=n(u)}if(g!==null)X=!0;else{var Ue=n(h);Ue!==null&&Ae(j,Ue.startTime-z),X=!1}}break t}finally{g=null,m=$,_=!1}X=void 0}}finally{X?C():H=!1}}}var C;if(typeof R=="function")C=function(){R(I)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,Ot=b.port2;b.port1.onmessage=I,C=function(){Ot.postMessage(null)}}else C=function(){w(I,0)};function Ae(z,X){E=w(function(){z(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(z){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var $=m;m=X;try{return z()}finally{m=$}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var $=m;m=z;try{return X()}finally{m=$}},e.unstable_scheduleCallback=function(z,X,$){var pt=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?pt+$:pt):$=pt,z){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=$+vt,z={id:d++,callback:X,priorityLevel:z,startTime:$,expirationTime:vt,sortIndex:-1},$>pt?(z.sortIndex=$,t(h,z),n(u)===null&&z===n(h)&&(V?(v(E),E=-1):V=!0,Ae(j,$-pt))):(z.sortIndex=vt,t(u,z),x||_||(x=!0,H||(H=!0,C()))),z},e.unstable_shouldYield=S,e.unstable_wrapCallback=function(z){var X=m;return function(){var $=m;m=X;try{return z.apply(this,arguments)}finally{m=$}}}})(Qv);Gv.exports=Qv;var $S=Gv.exports,Yv={exports:{}},Pe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZS=G;function Kv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function wi(){}var ke={d:{f:wi,r:function(){throw Error(Kv(522))},D:wi,C:wi,L:wi,m:wi,X:wi,S:wi,M:wi},p:0,findDOMNode:null},WS=Symbol.for("react.portal");function JS(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:WS,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var eo=ZS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Cc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Pe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ke;Pe.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Kv(299));return JS(e,t,null,n)};Pe.flushSync=function(e){var t=eo.T,n=ke.p;try{if(eo.T=null,ke.p=2,e)return e()}finally{eo.T=t,ke.p=n,ke.d.f()}};Pe.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,ke.d.C(e,t))};Pe.prefetchDNS=function(e){typeof e=="string"&&ke.d.D(e)};Pe.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Cc(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?ke.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&ke.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Pe.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Cc(t.as,t.crossOrigin);ke.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&ke.d.M(e)};Pe.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Cc(n,t.crossOrigin);ke.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Pe.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Cc(t.as,t.crossOrigin);ke.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else ke.d.m(e)};Pe.requestFormReset=function(e){ke.d.r(e)};Pe.unstable_batchedUpdates=function(e,t){return e(t)};Pe.useFormState=function(e,t,n){return eo.H.useFormState(e,t,n)};Pe.useFormStatus=function(){return eo.H.useHostTransitionStatus()};Pe.version="19.1.1";function Xv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xv)}catch(e){console.error(e)}}Xv(),Yv.exports=Pe;var t1=Yv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ae=$S,$v=G,e1=t1;function U(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Zv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ko(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Wv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lp(e){if(Ko(e)!==e)throw Error(U(188))}function n1(e){var t=e.alternate;if(!t){if(t=Ko(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Lp(r),e;if(s===i)return Lp(r),t;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function Jv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Jv(e),t!==null)return t;e=e.sibling}return null}var Dt=Object.assign,i1=Symbol.for("react.element"),zl=Symbol.for("react.transitional.element"),Ya=Symbol.for("react.portal"),vs=Symbol.for("react.fragment"),tT=Symbol.for("react.strict_mode"),bf=Symbol.for("react.profiler"),r1=Symbol.for("react.provider"),eT=Symbol.for("react.consumer"),Wn=Symbol.for("react.context"),Zd=Symbol.for("react.forward_ref"),Sf=Symbol.for("react.suspense"),wf=Symbol.for("react.suspense_list"),Wd=Symbol.for("react.memo"),Ni=Symbol.for("react.lazy"),Rf=Symbol.for("react.activity"),s1=Symbol.for("react.memo_cache_sentinel"),jp=Symbol.iterator;function ja(e){return e===null||typeof e!="object"?null:(e=jp&&e[jp]||e["@@iterator"],typeof e=="function"?e:null)}var a1=Symbol.for("react.client.reference");function If(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===a1?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vs:return"Fragment";case bf:return"Profiler";case tT:return"StrictMode";case Sf:return"Suspense";case wf:return"SuspenseList";case Rf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Ya:return"Portal";case Wn:return(e.displayName||"Context")+".Provider";case eT:return(e._context.displayName||"Context")+".Consumer";case Zd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wd:return t=e.displayName||null,t!==null?t:If(e.type)||"Memo";case Ni:t=e._payload,e=e._init;try{return If(e(t))}catch{}}return null}var Ka=Array.isArray,W=$v.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_t=e1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,kr={pending:!1,data:null,method:null,action:null},Cf=[],Ts=-1;function qn(e){return{current:e}}function fe(e){0>Ts||(e.current=Cf[Ts],Cf[Ts]=null,Ts--)}function Pt(e,t){Ts++,Cf[Ts]=e.current,e.current=t}var Vn=qn(null),So=qn(null),Fi=qn(null),xu=qn(null);function Du(e,t){switch(Pt(Fi,t),Pt(So,e),Pt(Vn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Fy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Fy(t),e=_0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}fe(Vn),Pt(Vn,e)}function Ys(){fe(Vn),fe(So),fe(Fi)}function Nf(e){e.memoizedState!==null&&Pt(xu,e);var t=Vn.current,n=_0(t,e.type);t!==n&&(Pt(So,e),Pt(Vn,n))}function Ou(e){So.current===e&&(fe(Vn),fe(So)),xu.current===e&&(fe(xu),Mo._currentValue=kr)}var xf=Object.prototype.hasOwnProperty,Jd=ae.unstable_scheduleCallback,xh=ae.unstable_cancelCallback,o1=ae.unstable_shouldYield,l1=ae.unstable_requestPaint,Mn=ae.unstable_now,u1=ae.unstable_getCurrentPriorityLevel,nT=ae.unstable_ImmediatePriority,iT=ae.unstable_UserBlockingPriority,Vu=ae.unstable_NormalPriority,c1=ae.unstable_LowPriority,rT=ae.unstable_IdlePriority,h1=ae.log,f1=ae.unstable_setDisableYieldValue,Xo=null,Je=null;function ji(e){if(typeof h1=="function"&&f1(e),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(Xo,e)}catch{}}var tn=Math.clz32?Math.clz32:g1,d1=Math.log,m1=Math.LN2;function g1(e){return e>>>=0,e===0?32:31-(d1(e)/m1|0)|0}var Bl=256,ql=4194304;function xr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Nc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=xr(i):(a&=l,a!==0?r=xr(a):n||(n=l&~e,n!==0&&(r=xr(n))))):(l=i&~s,l!==0?r=xr(l):a!==0?r=xr(a):n||(n=i&~e,n!==0&&(r=xr(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function $o(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function p1(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sT(){var e=Bl;return Bl<<=1,!(Bl&4194048)&&(Bl=256),e}function aT(){var e=ql;return ql<<=1,!(ql&62914560)&&(ql=4194304),e}function Dh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Zo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function y1(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-tn(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&oT(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function oT(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-tn(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function lT(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-tn(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function tm(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function em(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function uT(){var e=_t.p;return e!==0?e:(e=window.event,e===void 0?32:C0(e.type))}function _1(e,t){var n=_t.p;try{return _t.p=e,t()}finally{_t.p=n}}var gr=Math.random().toString(36).slice(2),Ce="__reactFiber$"+gr,Fe="__reactProps$"+gr,fa="__reactContainer$"+gr,Df="__reactEvents$"+gr,v1="__reactListeners$"+gr,T1="__reactHandles$"+gr,zp="__reactResources$"+gr,Wo="__reactMarker$"+gr;function nm(e){delete e[Ce],delete e[Fe],delete e[Df],delete e[v1],delete e[T1]}function Es(e){var t=e[Ce];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fa]||n[Ce]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Yy(e);e!==null;){if(n=e[Ce])return n;e=Yy(e)}return t}e=n,n=e.parentNode}return null}function da(e){if(e=e[Ce]||e[fa]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Xa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(U(33))}function Vs(e){var t=e[zp];return t||(t=e[zp]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ue(e){e[Wo]=!0}var cT=new Set,hT={};function Wr(e,t){Ks(e,t),Ks(e+"Capture",t)}function Ks(e,t){for(hT[e]=t,e=0;e<t.length;e++)cT.add(t[e])}var E1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bp={},qp={};function A1(e){return xf.call(qp,e)?!0:xf.call(Bp,e)?!1:E1.test(e)?qp[e]=!0:(Bp[e]=!0,!1)}function au(e,t,n){if(A1(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Hl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Kn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Oh,Hp;function fs(e){if(Oh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Oh=t&&t[1]||"",Hp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oh+e+Hp}var Vh=!1;function Mh(e,t){if(!e||Vh)return"";Vh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var m=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){m=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){m=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{Vh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?fs(n):""}function b1(e){switch(e.tag){case 26:case 27:case 5:return fs(e.type);case 16:return fs("Lazy");case 13:return fs("Suspense");case 19:return fs("SuspenseList");case 0:case 15:return Mh(e.type,!1);case 11:return Mh(e.type.render,!1);case 1:return Mh(e.type,!0);case 31:return fs("Activity");default:return""}}function Fp(e){try{var t="";do t+=b1(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function cn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function S1(e){var t=fT(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mu(e){e._valueTracker||(e._valueTracker=S1(e))}function dT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=fT(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function ku(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var w1=/[\n"\\]/g;function dn(e){return e.replace(w1,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Of(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+cn(t)):e.value!==""+cn(t)&&(e.value=""+cn(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Vf(e,a,cn(t)):n!=null?Vf(e,a,cn(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+cn(l):e.removeAttribute("name")}function mT(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+cn(n):"",t=t!=null?""+cn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Vf(e,t,n){t==="number"&&ku(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ms(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+cn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function gT(e,t,n){if(t!=null&&(t=""+cn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+cn(n):""}function pT(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(U(92));if(Ka(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=cn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Xs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var R1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||R1.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function yT(e,t,n){if(t!=null&&typeof t!="object")throw Error(U(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Gp(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&Gp(e,s,t[s])}function im(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var I1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),C1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ou(e){return C1.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Mf=null;function rm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var As=null,ks=null;function Qp(e){var t=da(e);if(t&&(e=t.stateNode)){var n=e[Fe]||null;t:switch(e=t.stateNode,t.type){case"input":if(Of(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+dn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Fe]||null;if(!r)throw Error(U(90));Of(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&dT(i)}break t;case"textarea":gT(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Ms(e,!!n.multiple,t,!1)}}}var kh=!1;function _T(e,t,n){if(kh)return e(t,n);kh=!0;try{var i=e(t);return i}finally{if(kh=!1,(As!==null||ks!==null)&&(jc(),As&&(t=As,e=ks,ks=As=null,Qp(t),e)))for(t=0;t<e.length;t++)Qp(e[t])}}function wo(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Fe]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kf=!1;if(li)try{var za={};Object.defineProperty(za,"passive",{get:function(){kf=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{kf=!1}var zi=null,sm=null,lu=null;function vT(){if(lu)return lu;var e,t=sm,n=t.length,i,r="value"in zi?zi.value:zi.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return lu=r.slice(e,1<i?1-i:void 0)}function uu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fl(){return!0}function Yp(){return!1}function Ge(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fl:Yp,this.isPropagationStopped=Yp,this}return Dt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),t}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xc=Ge(Jr),Jo=Dt({},Jr,{view:0,detail:0}),N1=Ge(Jo),Ph,Uh,Ba,Dc=Dt({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:am,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ba&&(Ba&&e.type==="mousemove"?(Ph=e.screenX-Ba.screenX,Uh=e.screenY-Ba.screenY):Uh=Ph=0,Ba=e),Ph)},movementY:function(e){return"movementY"in e?e.movementY:Uh}}),Kp=Ge(Dc),x1=Dt({},Dc,{dataTransfer:0}),D1=Ge(x1),O1=Dt({},Jo,{relatedTarget:0}),Lh=Ge(O1),V1=Dt({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),M1=Ge(V1),k1=Dt({},Jr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),P1=Ge(k1),U1=Dt({},Jr,{data:0}),Xp=Ge(U1),L1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=z1[e])?!!t[e]:!1}function am(){return B1}var q1=Dt({},Jo,{key:function(e){if(e.key){var t=L1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=uu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?j1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:am,charCode:function(e){return e.type==="keypress"?uu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?uu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),H1=Ge(q1),F1=Dt({},Dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$p=Ge(F1),G1=Dt({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:am}),Q1=Ge(G1),Y1=Dt({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),K1=Ge(Y1),X1=Dt({},Dc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$1=Ge(X1),Z1=Dt({},Jr,{newState:0,oldState:0}),W1=Ge(Z1),J1=[9,13,27,32],om=li&&"CompositionEvent"in window,no=null;li&&"documentMode"in document&&(no=document.documentMode);var tw=li&&"TextEvent"in window&&!no,TT=li&&(!om||no&&8<no&&11>=no),Zp=" ",Wp=!1;function ET(e,t){switch(e){case"keyup":return J1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bs=!1;function ew(e,t){switch(e){case"compositionend":return AT(t);case"keypress":return t.which!==32?null:(Wp=!0,Zp);case"textInput":return e=t.data,e===Zp&&Wp?null:e;default:return null}}function nw(e,t){if(bs)return e==="compositionend"||!om&&ET(e,t)?(e=vT(),lu=sm=zi=null,bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return TT&&t.locale!=="ko"?null:t.data;default:return null}}var iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!iw[e.type]:t==="textarea"}function bT(e,t,n,i){As?ks?ks.push(i):ks=[i]:As=i,t=Ju(t,"onChange"),0<t.length&&(n=new xc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var io=null,Ro=null;function rw(e){g0(e,0)}function Oc(e){var t=Xa(e);if(dT(t))return e}function ty(e,t){if(e==="change")return t}var ST=!1;if(li){var jh;if(li){var zh="oninput"in document;if(!zh){var ey=document.createElement("div");ey.setAttribute("oninput","return;"),zh=typeof ey.oninput=="function"}jh=zh}else jh=!1;ST=jh&&(!document.documentMode||9<document.documentMode)}function ny(){io&&(io.detachEvent("onpropertychange",wT),Ro=io=null)}function wT(e){if(e.propertyName==="value"&&Oc(Ro)){var t=[];bT(t,Ro,e,rm(e)),_T(rw,t)}}function sw(e,t,n){e==="focusin"?(ny(),io=t,Ro=n,io.attachEvent("onpropertychange",wT)):e==="focusout"&&ny()}function aw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Oc(Ro)}function ow(e,t){if(e==="click")return Oc(t)}function lw(e,t){if(e==="input"||e==="change")return Oc(t)}function uw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var an=typeof Object.is=="function"?Object.is:uw;function Io(e,t){if(an(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!xf.call(t,r)||!an(e[r],t[r]))return!1}return!0}function iy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ry(e,t){var n=iy(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=iy(n)}}function RT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?RT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function IT(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ku(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ku(e.document)}return t}function lm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var cw=li&&"documentMode"in document&&11>=document.documentMode,Ss=null,Pf=null,ro=null,Uf=!1;function sy(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uf||Ss==null||Ss!==ku(i)||(i=Ss,"selectionStart"in i&&lm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ro&&Io(ro,i)||(ro=i,i=Ju(Pf,"onSelect"),0<i.length&&(t=new xc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ss)))}function Nr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ws={animationend:Nr("Animation","AnimationEnd"),animationiteration:Nr("Animation","AnimationIteration"),animationstart:Nr("Animation","AnimationStart"),transitionrun:Nr("Transition","TransitionRun"),transitionstart:Nr("Transition","TransitionStart"),transitioncancel:Nr("Transition","TransitionCancel"),transitionend:Nr("Transition","TransitionEnd")},Bh={},CT={};li&&(CT=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);function ts(e){if(Bh[e])return Bh[e];if(!ws[e])return e;var t=ws[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in CT)return Bh[e]=t[n];return e}var NT=ts("animationend"),xT=ts("animationiteration"),DT=ts("animationstart"),hw=ts("transitionrun"),fw=ts("transitionstart"),dw=ts("transitioncancel"),OT=ts("transitionend"),VT=new Map,Lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lf.push("scrollEnd");function Cn(e,t){VT.set(e,t),Wr(t,[e])}var ay=new WeakMap;function mn(e,t){if(typeof e=="object"&&e!==null){var n=ay.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Fp(t)},ay.set(e,t),t)}return{value:e,source:t,stack:Fp(t)}}var un=[],Rs=0,um=0;function Vc(){for(var e=Rs,t=um=Rs=0;t<e;){var n=un[t];un[t++]=null;var i=un[t];un[t++]=null;var r=un[t];un[t++]=null;var s=un[t];if(un[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&MT(n,r,s)}}function Mc(e,t,n,i){un[Rs++]=e,un[Rs++]=t,un[Rs++]=n,un[Rs++]=i,um|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function cm(e,t,n,i){return Mc(e,t,n,i),Pu(e)}function ma(e,t){return Mc(e,null,null,t),Pu(e)}function MT(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-tn(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function Pu(e){if(50<go)throw go=0,sd=null,Error(U(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Is={};function mw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $e(e,t,n,i){return new mw(e,t,n,i)}function hm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function si(e,t){var n=e.alternate;return n===null?(n=$e(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function kT(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function cu(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")hm(e)&&(a=1);else if(typeof e=="string")a=pR(e,n,Vn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Rf:return e=$e(31,n,t,r),e.elementType=Rf,e.lanes=s,e;case vs:return Pr(n.children,r,s,t);case tT:a=8,r|=24;break;case bf:return e=$e(12,n,t,r|2),e.elementType=bf,e.lanes=s,e;case Sf:return e=$e(13,n,t,r),e.elementType=Sf,e.lanes=s,e;case wf:return e=$e(19,n,t,r),e.elementType=wf,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case r1:case Wn:a=10;break t;case eT:a=9;break t;case Zd:a=11;break t;case Wd:a=14;break t;case Ni:a=16,i=null;break t}a=29,n=Error(U(130,e===null?"null":typeof e,"")),i=null}return t=$e(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Pr(e,t,n,i){return e=$e(7,e,i,t),e.lanes=n,e}function qh(e,t,n){return e=$e(6,e,null,t),e.lanes=n,e}function Hh(e,t,n){return t=$e(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Cs=[],Ns=0,Uu=null,Lu=0,hn=[],fn=0,Ur=null,Jn=1,ti="";function Dr(e,t){Cs[Ns++]=Lu,Cs[Ns++]=Uu,Uu=e,Lu=t}function PT(e,t,n){hn[fn++]=Jn,hn[fn++]=ti,hn[fn++]=Ur,Ur=e;var i=Jn;e=ti;var r=32-tn(i)-1;i&=~(1<<r),n+=1;var s=32-tn(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Jn=1<<32-tn(t)+r|n<<r|i,ti=s+e}else Jn=1<<s|n<<r|i,ti=e}function fm(e){e.return!==null&&(Dr(e,1),PT(e,1,0))}function dm(e){for(;e===Uu;)Uu=Cs[--Ns],Cs[Ns]=null,Lu=Cs[--Ns],Cs[Ns]=null;for(;e===Ur;)Ur=hn[--fn],hn[fn]=null,ti=hn[--fn],hn[fn]=null,Jn=hn[--fn],hn[fn]=null}var Ve=null,Ht=null,yt=!1,Lr=null,Dn=!1,jf=Error(U(519));function qr(e){var t=Error(U(418,""));throw Co(mn(t,e)),jf}function oy(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ce]=e,t[Fe]=i,n){case"dialog":at("cancel",t),at("close",t);break;case"iframe":case"object":case"embed":at("load",t);break;case"video":case"audio":for(n=0;n<Do.length;n++)at(Do[n],t);break;case"source":at("error",t);break;case"img":case"image":case"link":at("error",t),at("load",t);break;case"details":at("toggle",t);break;case"input":at("invalid",t),mT(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Mu(t);break;case"select":at("invalid",t);break;case"textarea":at("invalid",t),pT(t,i.value,i.defaultValue,i.children),Mu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||y0(t.textContent,n)?(i.popover!=null&&(at("beforetoggle",t),at("toggle",t)),i.onScroll!=null&&at("scroll",t),i.onScrollEnd!=null&&at("scrollend",t),i.onClick!=null&&(t.onclick=qc),t=!0):t=!1,t||qr(e)}function ly(e){for(Ve=e.return;Ve;)switch(Ve.tag){case 5:case 13:Dn=!1;return;case 27:case 3:Dn=!0;return;default:Ve=Ve.return}}function qa(e){if(e!==Ve)return!1;if(!yt)return ly(e),yt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||hd(e.type,e.memoizedProps)),n=!n),n&&Ht&&qr(e),ly(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Ht=Rn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Ht=null}}else t===27?(t=Ht,pr(e.type)?(e=md,md=null,Ht=e):Ht=t):Ht=Ve?Rn(e.stateNode.nextSibling):null;return!0}function tl(){Ht=Ve=null,yt=!1}function uy(){var e=Lr;return e!==null&&(qe===null?qe=e:qe.push.apply(qe,e),Lr=null),e}function Co(e){Lr===null?Lr=[e]:Lr.push(e)}var zf=qn(null),es=null,ei=null;function Di(e,t,n){Pt(zf,t._currentValue),t._currentValue=n}function ai(e){e._currentValue=zf.current,fe(zf)}function Bf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function qf(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Bf(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(U(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Bf(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function el(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(U(387));if(a=a.memoizedProps,a!==null){var l=r.type;an(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===xu.current){if(a=r.alternate,a===null)throw Error(U(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Mo):e=[Mo])}r=r.return}e!==null&&qf(t,e,n,i),t.flags|=262144}function ju(e){for(e=e.firstContext;e!==null;){if(!an(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Hr(e){es=e,ei=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ne(e){return UT(es,e)}function Gl(e,t){return es===null&&Hr(e),UT(e,t)}function UT(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ei===null){if(e===null)throw Error(U(308));ei=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ei=ei.next=t;return n}var gw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},pw=ae.unstable_scheduleCallback,yw=ae.unstable_NormalPriority,ie={$$typeof:Wn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mm(){return{controller:new gw,data:new Map,refCount:0}}function nl(e){e.refCount--,e.refCount===0&&pw(yw,function(){e.controller.abort()})}var so=null,Hf=0,$s=0,Ps=null;function _w(e,t){if(so===null){var n=so=[];Hf=0,$s=Um(),Ps={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Hf++,t.then(cy,cy),t}function cy(){if(--Hf===0&&so!==null){Ps!==null&&(Ps.status="fulfilled");var e=so;so=null,$s=0,Ps=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function vw(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var hy=W.S;W.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&_w(e,t),hy!==null&&hy(e,t)};var jr=qn(null);function gm(){var e=jr.current;return e!==null?e:It.pooledCache}function hu(e,t){t===null?Pt(jr,jr.current):Pt(jr,t.pool)}function LT(){var e=gm();return e===null?null:{parent:ie._currentValue,pool:e}}var il=Error(U(460)),jT=Error(U(474)),kc=Error(U(542)),Ff={then:function(){}};function fy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ql(){}function zT(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ql,Ql),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,my(e),e;default:if(typeof t.status=="string")t.then(Ql,Ql);else{if(e=It,e!==null&&100<e.shellSuspendCounter)throw Error(U(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,my(e),e}throw ao=t,il}}var ao=null;function dy(){if(ao===null)throw Error(U(459));var e=ao;return ao=null,e}function my(e){if(e===il||e===kc)throw Error(U(483))}var xi=!1;function pm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Gi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Qi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Et&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Pu(e),MT(e,null,n),t}return Mc(e,i,t,n),Pu(e)}function oo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,lT(e,n)}}function Fh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Qf=!1;function lo(){if(Qf){var e=Ps;if(e!==null)throw e}}function uo(e,t,n,i){Qf=!1;var r=e.updateQueue;xi=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(dt&m)===m:(i&m)===m){m!==0&&m===$s&&(Qf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var x=e,V=l;m=t;var M=n;switch(V.tag){case 1:if(x=V.payload,typeof x=="function"){g=x.call(M,g,m);break t}g=x;break t;case 3:x.flags=x.flags&-65537|128;case 0:if(x=V.payload,m=typeof x=="function"?x.call(M,g,m):x,m==null)break t;g=Dt({},g,m);break t;case 2:xi=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=r.callbacks,_===null?r.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=g):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);d===null&&(u=g),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),or|=a,e.lanes=a,e.memoizedState=g}}function BT(e,t){if(typeof e!="function")throw Error(U(191,e));e.call(t)}function qT(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)BT(n[e],t)}var Zs=qn(null),zu=qn(0);function gy(e,t){e=hi,Pt(zu,e),Pt(Zs,t),hi=e|t.baseLanes}function Yf(){Pt(zu,hi),Pt(Zs,Zs.current)}function ym(){hi=zu.current,fe(Zs),fe(zu)}var sr=0,it=null,bt=null,Xt=null,Bu=!1,Us=!1,Fr=!1,qu=0,No=0,Ls=null,Tw=0;function Gt(){throw Error(U(321))}function _m(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!an(e[n],t[n]))return!1;return!0}function vm(e,t,n,i,r,s){return sr=s,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,W.H=e===null||e.memoizedState===null?vE:TE,Fr=!1,s=n(i,r),Fr=!1,Us&&(s=FT(t,n,i,r)),HT(e),s}function HT(e){W.H=Hu;var t=bt!==null&&bt.next!==null;if(sr=0,Xt=bt=it=null,Bu=!1,No=0,Ls=null,t)throw Error(U(300));e===null||he||(e=e.dependencies,e!==null&&ju(e)&&(he=!0))}function FT(e,t,n,i){it=e;var r=0;do{if(Us&&(Ls=null),No=0,Us=!1,25<=r)throw Error(U(301));if(r+=1,Xt=bt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}W.H=Iw,s=t(n,i)}while(Us);return s}function Ew(){var e=W.H,t=e.useState()[0];return t=typeof t.then=="function"?rl(t):t,e=e.useState()[0],(bt!==null?bt.memoizedState:null)!==e&&(it.flags|=1024),t}function Tm(){var e=qu!==0;return qu=0,e}function Em(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Am(e){if(Bu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Bu=!1}sr=0,Xt=bt=it=null,Us=!1,No=qu=0,Ls=null}function ze(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?it.memoizedState=Xt=e:Xt=Xt.next=e,Xt}function Wt(){if(bt===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=bt.next;var t=Xt===null?it.memoizedState:Xt.next;if(t!==null)Xt=t,bt=e;else{if(e===null)throw it.alternate===null?Error(U(467)):Error(U(310));bt=e,e={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Xt===null?it.memoizedState=Xt=e:Xt=Xt.next=e}return Xt}function bm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rl(e){var t=No;return No+=1,Ls===null&&(Ls=[]),e=zT(Ls,e,t),t=it,(Xt===null?t.memoizedState:Xt.next)===null&&(t=t.alternate,W.H=t===null||t.memoizedState===null?vE:TE),e}function Pc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return rl(e);if(e.$$typeof===Wn)return Ne(e)}throw Error(U(438,String(e)))}function Sm(e){var t=null,n=it.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=it.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=bm(),it.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=s1;return t.index++,n}function ui(e,t){return typeof t=="function"?t(e):t}function fu(e){var t=Wt();return wm(t,bt,e)}function wm(e,t,n){var i=e.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(dt&g)===g:(sr&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===$s&&(d=!0);else if((sr&m)===m){h=h.next,m===$s&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=s):u=u.next=g,it.lanes|=m,or|=m;g=h.action,Fr&&n(s,g),s=h.hasEagerState?h.eagerState:n(s,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,it.lanes|=g,or|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!an(s,e.memoizedState)&&(he=!0,d&&(n=Ps,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Gh(e){var t=Wt(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);an(s,t.memoizedState)||(he=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function GT(e,t,n){var i=it,r=Wt(),s=yt;if(s){if(n===void 0)throw Error(U(407));n=n()}else n=t();var a=!an((bt||r).memoizedState,n);a&&(r.memoizedState=n,he=!0),r=r.queue;var l=KT.bind(null,i,r,e);if(sl(2048,8,l,[e]),r.getSnapshot!==t||a||Xt!==null&&Xt.memoizedState.tag&1){if(i.flags|=2048,Ws(9,Uc(),YT.bind(null,i,r,n,t),null),It===null)throw Error(U(349));s||sr&124||QT(i,t,n)}return n}function QT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=it.updateQueue,t===null?(t=bm(),it.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function YT(e,t,n,i){t.value=n,t.getSnapshot=i,XT(t)&&$T(e)}function KT(e,t,n){return n(function(){XT(t)&&$T(e)})}function XT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!an(e,n)}catch{return!0}}function $T(e){var t=ma(e,2);t!==null&&nn(t,e,2)}function Kf(e){var t=ze();if(typeof e=="function"){var n=e;if(e=n(),Fr){ji(!0);try{n()}finally{ji(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:e},t}function ZT(e,t,n,i){return e.baseState=n,wm(e,bt,typeof i=="function"?i:ui)}function Aw(e,t,n,i,r){if(Lc(e))throw Error(U(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};W.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,WT(t,s)):(s.next=n.next,t.pending=n.next=s)}}function WT(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=W.T,a={};W.T=a;try{var l=n(r,i),u=W.S;u!==null&&u(a,l),py(e,t,l)}catch(h){Xf(e,t,h)}finally{W.T=s}}else try{s=n(r,i),py(e,t,s)}catch(h){Xf(e,t,h)}}function py(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){yy(e,t,i)},function(i){return Xf(e,t,i)}):yy(e,t,n)}function yy(e,t,n){t.status="fulfilled",t.value=n,JT(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,WT(e,n)))}function Xf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,JT(t),t=t.next;while(t!==i)}e.action=null}function JT(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function tE(e,t){return t}function _y(e,t){if(yt){var n=It.formState;if(n!==null){t:{var i=it;if(yt){if(Ht){e:{for(var r=Ht,s=Dn;r.nodeType!==8;){if(!s){r=null;break e}if(r=Rn(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Ht=Rn(r.nextSibling),i=r.data==="F!";break t}}qr(i)}i=!1}i&&(t=n[0])}}return n=ze(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tE,lastRenderedState:t},n.queue=i,n=pE.bind(null,it,i),i.dispatch=n,i=Kf(!1),s=Nm.bind(null,it,!1,i.queue),i=ze(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=Aw.bind(null,it,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function vy(e){var t=Wt();return eE(t,bt,e)}function eE(e,t,n){if(t=wm(e,t,tE)[0],e=fu(ui)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=rl(t)}catch(a){throw a===il?kc:a}else i=t;t=Wt();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(it.flags|=2048,Ws(9,Uc(),bw.bind(null,r,n),null)),[i,s,e]}function bw(e,t){e.action=t}function Ty(e){var t=Wt(),n=bt;if(n!==null)return eE(t,n,e);Wt(),t=t.memoizedState,n=Wt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Ws(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=it.updateQueue,t===null&&(t=bm(),it.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Uc(){return{destroy:void 0,resource:void 0}}function nE(){return Wt().memoizedState}function du(e,t,n,i){var r=ze();i=i===void 0?null:i,it.flags|=e,r.memoizedState=Ws(1|t,Uc(),n,i)}function sl(e,t,n,i){var r=Wt();i=i===void 0?null:i;var s=r.memoizedState.inst;bt!==null&&i!==null&&_m(i,bt.memoizedState.deps)?r.memoizedState=Ws(t,s,n,i):(it.flags|=e,r.memoizedState=Ws(1|t,s,n,i))}function Ey(e,t){du(8390656,8,e,t)}function iE(e,t){sl(2048,8,e,t)}function rE(e,t){return sl(4,2,e,t)}function sE(e,t){return sl(4,4,e,t)}function aE(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function oE(e,t,n){n=n!=null?n.concat([e]):null,sl(4,4,aE.bind(null,t,e),n)}function Rm(){}function lE(e,t){var n=Wt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&_m(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function uE(e,t){var n=Wt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&_m(t,i[1]))return i[0];if(i=e(),Fr){ji(!0);try{e()}finally{ji(!1)}}return n.memoizedState=[i,t],i}function Im(e,t,n){return n===void 0||sr&1073741824?e.memoizedState=t:(e.memoizedState=n,e=JE(),it.lanes|=e,or|=e,n)}function cE(e,t,n,i){return an(n,t)?n:Zs.current!==null?(e=Im(e,n,i),an(e,t)||(he=!0),e):sr&42?(e=JE(),it.lanes|=e,or|=e,t):(he=!0,e.memoizedState=n)}function hE(e,t,n,i,r){var s=_t.p;_t.p=s!==0&&8>s?s:8;var a=W.T,l={};W.T=l,Nm(e,!1,t,n);try{var u=r(),h=W.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=vw(u,i);co(e,t,d,en(e))}else co(e,t,i,en(e))}catch(g){co(e,t,{then:function(){},status:"rejected",reason:g},en())}finally{_t.p=s,W.T=a}}function Sw(){}function $f(e,t,n,i){if(e.tag!==5)throw Error(U(476));var r=fE(e).queue;hE(e,r,t,kr,n===null?Sw:function(){return dE(e),n(i)})}function fE(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:kr,baseState:kr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:kr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function dE(e){var t=fE(e).next.queue;co(e,t,{},en())}function Cm(){return Ne(Mo)}function mE(){return Wt().memoizedState}function gE(){return Wt().memoizedState}function ww(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=en();e=Gi(n);var i=Qi(t,e,n);i!==null&&(nn(i,t,n),oo(i,t,n)),t={cache:mm()},e.payload=t;return}t=t.return}}function Rw(e,t,n){var i=en();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Lc(e)?yE(t,n):(n=cm(e,t,n,i),n!==null&&(nn(n,e,i),_E(n,t,i)))}function pE(e,t,n){var i=en();co(e,t,n,i)}function co(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lc(e))yE(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,an(l,a))return Mc(e,t,r,0),It===null&&Vc(),!1}catch{}finally{}if(n=cm(e,t,r,i),n!==null)return nn(n,e,i),_E(n,t,i),!0}return!1}function Nm(e,t,n,i){if(i={lane:2,revertLane:Um(),action:i,hasEagerState:!1,eagerState:null,next:null},Lc(e)){if(t)throw Error(U(479))}else t=cm(e,n,i,2),t!==null&&nn(t,e,2)}function Lc(e){var t=e.alternate;return e===it||t!==null&&t===it}function yE(e,t){Us=Bu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function _E(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,lT(e,n)}}var Hu={readContext:Ne,use:Pc,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useLayoutEffect:Gt,useInsertionEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useSyncExternalStore:Gt,useId:Gt,useHostTransitionStatus:Gt,useFormState:Gt,useActionState:Gt,useOptimistic:Gt,useMemoCache:Gt,useCacheRefresh:Gt},vE={readContext:Ne,use:Pc,useCallback:function(e,t){return ze().memoizedState=[e,t===void 0?null:t],e},useContext:Ne,useEffect:Ey,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,du(4194308,4,aE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return du(4194308,4,e,t)},useInsertionEffect:function(e,t){du(4,2,e,t)},useMemo:function(e,t){var n=ze();t=t===void 0?null:t;var i=e();if(Fr){ji(!0);try{e()}finally{ji(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ze();if(n!==void 0){var r=n(t);if(Fr){ji(!0);try{n(t)}finally{ji(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Rw.bind(null,it,e),[i.memoizedState,e]},useRef:function(e){var t=ze();return e={current:e},t.memoizedState=e},useState:function(e){e=Kf(e);var t=e.queue,n=pE.bind(null,it,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Rm,useDeferredValue:function(e,t){var n=ze();return Im(n,e,t)},useTransition:function(){var e=Kf(!1);return e=hE.bind(null,it,e.queue,!0,!1),ze().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=it,r=ze();if(yt){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),It===null)throw Error(U(349));dt&124||QT(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Ey(KT.bind(null,i,s,e),[e]),i.flags|=2048,Ws(9,Uc(),YT.bind(null,i,s,n,t),null),n},useId:function(){var e=ze(),t=It.identifierPrefix;if(yt){var n=ti,i=Jn;n=(i&~(1<<32-tn(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=qu++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=Tw++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Cm,useFormState:_y,useActionState:_y,useOptimistic:function(e){var t=ze();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Nm.bind(null,it,!0,n),n.dispatch=t,[e,t]},useMemoCache:Sm,useCacheRefresh:function(){return ze().memoizedState=ww.bind(null,it)}},TE={readContext:Ne,use:Pc,useCallback:lE,useContext:Ne,useEffect:iE,useImperativeHandle:oE,useInsertionEffect:rE,useLayoutEffect:sE,useMemo:uE,useReducer:fu,useRef:nE,useState:function(){return fu(ui)},useDebugValue:Rm,useDeferredValue:function(e,t){var n=Wt();return cE(n,bt.memoizedState,e,t)},useTransition:function(){var e=fu(ui)[0],t=Wt().memoizedState;return[typeof e=="boolean"?e:rl(e),t]},useSyncExternalStore:GT,useId:mE,useHostTransitionStatus:Cm,useFormState:vy,useActionState:vy,useOptimistic:function(e,t){var n=Wt();return ZT(n,bt,e,t)},useMemoCache:Sm,useCacheRefresh:gE},Iw={readContext:Ne,use:Pc,useCallback:lE,useContext:Ne,useEffect:iE,useImperativeHandle:oE,useInsertionEffect:rE,useLayoutEffect:sE,useMemo:uE,useReducer:Gh,useRef:nE,useState:function(){return Gh(ui)},useDebugValue:Rm,useDeferredValue:function(e,t){var n=Wt();return bt===null?Im(n,e,t):cE(n,bt.memoizedState,e,t)},useTransition:function(){var e=Gh(ui)[0],t=Wt().memoizedState;return[typeof e=="boolean"?e:rl(e),t]},useSyncExternalStore:GT,useId:mE,useHostTransitionStatus:Cm,useFormState:Ty,useActionState:Ty,useOptimistic:function(e,t){var n=Wt();return bt!==null?ZT(n,bt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Sm,useCacheRefresh:gE},js=null,xo=0;function Yl(e){var t=xo;return xo+=1,js===null&&(js=[]),zT(js,e,t)}function Ha(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Kl(e,t){throw t.$$typeof===i1?Error(U(525)):(e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ay(e){var t=e._init;return t(e._payload)}function EE(e){function t(w,v){if(e){var R=w.deletions;R===null?(w.deletions=[v],w.flags|=16):R.push(v)}}function n(w,v){if(!e)return null;for(;v!==null;)t(w,v),v=v.sibling;return null}function i(w){for(var v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function r(w,v){return w=si(w,v),w.index=0,w.sibling=null,w}function s(w,v,R){return w.index=R,e?(R=w.alternate,R!==null?(R=R.index,R<v?(w.flags|=67108866,v):R):(w.flags|=67108866,v)):(w.flags|=1048576,v)}function a(w){return e&&w.alternate===null&&(w.flags|=67108866),w}function l(w,v,R,D){return v===null||v.tag!==6?(v=qh(R,w.mode,D),v.return=w,v):(v=r(v,R),v.return=w,v)}function u(w,v,R,D){var j=R.type;return j===vs?d(w,v,R.props.children,D,R.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ni&&Ay(j)===v.type)?(v=r(v,R.props),Ha(v,R),v.return=w,v):(v=cu(R.type,R.key,R.props,null,w.mode,D),Ha(v,R),v.return=w,v)}function h(w,v,R,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==R.containerInfo||v.stateNode.implementation!==R.implementation?(v=Hh(R,w.mode,D),v.return=w,v):(v=r(v,R.children||[]),v.return=w,v)}function d(w,v,R,D,j){return v===null||v.tag!==7?(v=Pr(R,w.mode,D,j),v.return=w,v):(v=r(v,R),v.return=w,v)}function g(w,v,R){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=qh(""+v,w.mode,R),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case zl:return R=cu(v.type,v.key,v.props,null,w.mode,R),Ha(R,v),R.return=w,R;case Ya:return v=Hh(v,w.mode,R),v.return=w,v;case Ni:var D=v._init;return v=D(v._payload),g(w,v,R)}if(Ka(v)||ja(v))return v=Pr(v,w.mode,R,null),v.return=w,v;if(typeof v.then=="function")return g(w,Yl(v),R);if(v.$$typeof===Wn)return g(w,Gl(w,v),R);Kl(w,v)}return null}function m(w,v,R,D){var j=v!==null?v.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return j!==null?null:l(w,v,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case zl:return R.key===j?u(w,v,R,D):null;case Ya:return R.key===j?h(w,v,R,D):null;case Ni:return j=R._init,R=j(R._payload),m(w,v,R,D)}if(Ka(R)||ja(R))return j!==null?null:d(w,v,R,D,null);if(typeof R.then=="function")return m(w,v,Yl(R),D);if(R.$$typeof===Wn)return m(w,v,Gl(w,R),D);Kl(w,R)}return null}function _(w,v,R,D,j){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return w=w.get(R)||null,l(v,w,""+D,j);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case zl:return w=w.get(D.key===null?R:D.key)||null,u(v,w,D,j);case Ya:return w=w.get(D.key===null?R:D.key)||null,h(v,w,D,j);case Ni:var H=D._init;return D=H(D._payload),_(w,v,R,D,j)}if(Ka(D)||ja(D))return w=w.get(R)||null,d(v,w,D,j,null);if(typeof D.then=="function")return _(w,v,R,Yl(D),j);if(D.$$typeof===Wn)return _(w,v,R,Gl(v,D),j);Kl(v,D)}return null}function x(w,v,R,D){for(var j=null,H=null,E=v,y=v=0,A=null;E!==null&&y<R.length;y++){E.index>y?(A=E,E=null):A=E.sibling;var S=m(w,E,R[y],D);if(S===null){E===null&&(E=A);break}e&&E&&S.alternate===null&&t(w,E),v=s(S,v,y),H===null?j=S:H.sibling=S,H=S,E=A}if(y===R.length)return n(w,E),yt&&Dr(w,y),j;if(E===null){for(;y<R.length;y++)E=g(w,R[y],D),E!==null&&(v=s(E,v,y),H===null?j=E:H.sibling=E,H=E);return yt&&Dr(w,y),j}for(E=i(E);y<R.length;y++)A=_(E,w,y,R[y],D),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?y:A.key),v=s(A,v,y),H===null?j=A:H.sibling=A,H=A);return e&&E.forEach(function(I){return t(w,I)}),yt&&Dr(w,y),j}function V(w,v,R,D){if(R==null)throw Error(U(151));for(var j=null,H=null,E=v,y=v=0,A=null,S=R.next();E!==null&&!S.done;y++,S=R.next()){E.index>y?(A=E,E=null):A=E.sibling;var I=m(w,E,S.value,D);if(I===null){E===null&&(E=A);break}e&&E&&I.alternate===null&&t(w,E),v=s(I,v,y),H===null?j=I:H.sibling=I,H=I,E=A}if(S.done)return n(w,E),yt&&Dr(w,y),j;if(E===null){for(;!S.done;y++,S=R.next())S=g(w,S.value,D),S!==null&&(v=s(S,v,y),H===null?j=S:H.sibling=S,H=S);return yt&&Dr(w,y),j}for(E=i(E);!S.done;y++,S=R.next())S=_(E,w,y,S.value,D),S!==null&&(e&&S.alternate!==null&&E.delete(S.key===null?y:S.key),v=s(S,v,y),H===null?j=S:H.sibling=S,H=S);return e&&E.forEach(function(C){return t(w,C)}),yt&&Dr(w,y),j}function M(w,v,R,D){if(typeof R=="object"&&R!==null&&R.type===vs&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case zl:t:{for(var j=R.key;v!==null;){if(v.key===j){if(j=R.type,j===vs){if(v.tag===7){n(w,v.sibling),D=r(v,R.props.children),D.return=w,w=D;break t}}else if(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ni&&Ay(j)===v.type){n(w,v.sibling),D=r(v,R.props),Ha(D,R),D.return=w,w=D;break t}n(w,v);break}else t(w,v);v=v.sibling}R.type===vs?(D=Pr(R.props.children,w.mode,D,R.key),D.return=w,w=D):(D=cu(R.type,R.key,R.props,null,w.mode,D),Ha(D,R),D.return=w,w=D)}return a(w);case Ya:t:{for(j=R.key;v!==null;){if(v.key===j)if(v.tag===4&&v.stateNode.containerInfo===R.containerInfo&&v.stateNode.implementation===R.implementation){n(w,v.sibling),D=r(v,R.children||[]),D.return=w,w=D;break t}else{n(w,v);break}else t(w,v);v=v.sibling}D=Hh(R,w.mode,D),D.return=w,w=D}return a(w);case Ni:return j=R._init,R=j(R._payload),M(w,v,R,D)}if(Ka(R))return x(w,v,R,D);if(ja(R)){if(j=ja(R),typeof j!="function")throw Error(U(150));return R=j.call(R),V(w,v,R,D)}if(typeof R.then=="function")return M(w,v,Yl(R),D);if(R.$$typeof===Wn)return M(w,v,Gl(w,R),D);Kl(w,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,v!==null&&v.tag===6?(n(w,v.sibling),D=r(v,R),D.return=w,w=D):(n(w,v),D=qh(R,w.mode,D),D.return=w,w=D),a(w)):n(w,v)}return function(w,v,R,D){try{xo=0;var j=M(w,v,R,D);return js=null,j}catch(E){if(E===il||E===kc)throw E;var H=$e(29,E,null,w.mode);return H.lanes=D,H.return=w,H}finally{}}}var Js=EE(!0),AE=EE(!1),pn=qn(null),kn=null;function Oi(e){var t=e.alternate;Pt(re,re.current&1),Pt(pn,e),kn===null&&(t===null||Zs.current!==null||t.memoizedState!==null)&&(kn=e)}function bE(e){if(e.tag===22){if(Pt(re,re.current),Pt(pn,e),kn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(kn=e)}}else Vi()}function Vi(){Pt(re,re.current),Pt(pn,pn.current)}function ni(e){fe(pn),kn===e&&(kn=null),fe(re)}var re=qn(0);function Fu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||dd(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Qh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Dt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Zf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=en(),r=Gi(i);r.payload=t,n!=null&&(r.callback=n),t=Qi(e,r,i),t!==null&&(nn(t,e,i),oo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=en(),r=Gi(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Qi(e,r,i),t!==null&&(nn(t,e,i),oo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=en(),i=Gi(n);i.tag=2,t!=null&&(i.callback=t),t=Qi(e,i,n),t!==null&&(nn(t,e,n),oo(t,e,n))}};function by(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!Io(n,i)||!Io(r,s):!0}function Sy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Zf.enqueueReplaceState(t,t.state,null)}function Gr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Dt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var Gu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function SE(e){Gu(e)}function wE(e){console.error(e)}function RE(e){Gu(e)}function Qu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function wy(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Wf(e,t,n){return n=Gi(n),n.tag=3,n.payload={element:null},n.callback=function(){Qu(e,t)},n}function IE(e){return e=Gi(e),e.tag=3,e}function CE(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){wy(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){wy(t,n,i),typeof r!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Cw(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&el(t,n,r,!0),n=pn.current,n!==null){switch(n.tag){case 13:return kn===null?ad():n.alternate===null&&Ft===0&&(Ft=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Ff?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),rf(e,i,r)),!1;case 22:return n.flags|=65536,i===Ff?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),rf(e,i,r)),!1}throw Error(U(435,n.tag))}return rf(e,i,r),ad(),!1}if(yt)return t=pn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==jf&&(e=Error(U(422),{cause:i}),Co(mn(e,n)))):(i!==jf&&(t=Error(U(423),{cause:i}),Co(mn(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=mn(i,n),r=Wf(e.stateNode,i,r),Fh(e,r),Ft!==4&&(Ft=2)),!1;var s=Error(U(520),{cause:i});if(s=mn(s,n),mo===null?mo=[s]:mo.push(s),Ft!==4&&(Ft=2),t===null)return!0;i=mn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Wf(n.stateNode,i,e),Fh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Yi===null||!Yi.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=IE(r),CE(r,e,n,i),Fh(n,r),!1}n=n.return}while(n!==null);return!1}var NE=Error(U(461)),he=!1;function ge(e,t,n,i){t.child=e===null?AE(t,null,n,i):Js(t,e.child,n,i)}function Ry(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Hr(t),i=vm(e,t,n,a,s,r),l=Tm(),e!==null&&!he?(Em(e,t,r),ci(e,t,r)):(yt&&l&&fm(t),t.flags|=1,ge(e,t,i,r),t.child)}function Iy(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!hm(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,xE(e,t,s,i,r)):(e=cu(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!xm(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Io,n(a,i)&&e.ref===t.ref)return ci(e,t,r)}return t.flags|=1,e=si(s,i),e.ref=t.ref,e.return=t,t.child=e}function xE(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(Io(s,i)&&e.ref===t.ref)if(he=!1,t.pendingProps=i=s,xm(e,r))e.flags&131072&&(he=!0);else return t.lanes=e.lanes,ci(e,t,r)}return Jf(e,t,n,i,r)}function DE(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return Cy(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&hu(t,s!==null?s.cachePool:null),s!==null?gy(t,s):Yf(),bE(t);else return t.lanes=t.childLanes=536870912,Cy(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(hu(t,s.cachePool),gy(t,s),Vi(),t.memoizedState=null):(e!==null&&hu(t,null),Yf(),Vi());return ge(e,t,r,n),t.child}function Cy(e,t,n,i){var r=gm();return r=r===null?null:{parent:ie._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&hu(t,null),Yf(),bE(t),e!==null&&el(e,t,i,!0),null}function mu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Jf(e,t,n,i,r){return Hr(t),n=vm(e,t,n,i,void 0,r),i=Tm(),e!==null&&!he?(Em(e,t,r),ci(e,t,r)):(yt&&i&&fm(t),t.flags|=1,ge(e,t,n,r),t.child)}function Ny(e,t,n,i,r,s){return Hr(t),t.updateQueue=null,n=FT(t,i,n,r),HT(e),i=Tm(),e!==null&&!he?(Em(e,t,s),ci(e,t,s)):(yt&&i&&fm(t),t.flags|=1,ge(e,t,n,s),t.child)}function xy(e,t,n,i,r){if(Hr(t),t.stateNode===null){var s=Is,a=n.contextType;typeof a=="object"&&a!==null&&(s=Ne(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Zf,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},pm(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?Ne(a):Is,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Qh(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Zf.enqueueReplaceState(s,s.state,null),uo(t,i,s,r),lo(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=Gr(n,l);s.props=u;var h=s.context,d=n.contextType;a=Is,typeof d=="object"&&d!==null&&(a=Ne(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&Sy(t,s,i,a),xi=!1;var m=t.memoizedState;s.state=m,uo(t,i,s,r),lo(),h=t.memoizedState,l||m!==h||xi?(typeof g=="function"&&(Qh(t,n,g,i),h=t.memoizedState),(u=xi||by(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Gf(e,t),a=t.memoizedProps,d=Gr(n,a),s.props=d,g=t.pendingProps,m=s.context,h=n.contextType,u=Is,typeof h=="object"&&h!==null&&(u=Ne(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==g||m!==u)&&Sy(t,s,i,u),xi=!1,m=t.memoizedState,s.state=m,uo(t,i,s,r),lo();var _=t.memoizedState;a!==g||m!==_||xi||e!==null&&e.dependencies!==null&&ju(e.dependencies)?(typeof l=="function"&&(Qh(t,n,l,i),_=t.memoizedState),(d=xi||by(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&ju(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),s.props=i,s.state=_,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,mu(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=Js(t,e.child,null,r),t.child=Js(t,null,n,r)):ge(e,t,n,r),t.memoizedState=s.state,e=t.child):e=ci(e,t,r),e}function Dy(e,t,n,i){return tl(),t.flags|=256,ge(e,t,n,i),t.child}var Yh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kh(e){return{baseLanes:e,cachePool:LT()}}function Xh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=gn),e}function OE(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(re.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(yt){if(r?Oi(t):Vi(),yt){var l=Ht,u;if(u=l){t:{for(u=l,l=Dn;u.nodeType!==8;){if(!l){l=null;break t}if(u=Rn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Ur!==null?{id:Jn,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},u=$e(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Ve=t,Ht=null,u=!0):u=!1}u||qr(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return dd(l)?t.lanes=32:t.lanes=536870912,null;ni(t)}return l=i.children,i=i.fallback,r?(Vi(),r=t.mode,l=Yu({mode:"hidden",children:l},r),i=Pr(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=Kh(n),r.childLanes=Xh(e,a,n),t.memoizedState=Yh,i):(Oi(t),td(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(Oi(t),t.flags&=-257,t=$h(e,t,n)):t.memoizedState!==null?(Vi(),t.child=e.child,t.flags|=128,t=null):(Vi(),r=i.fallback,l=t.mode,i=Yu({mode:"visible",children:i.children},l),r=Pr(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Js(t,e.child,null,n),i=t.child,i.memoizedState=Kh(n),i.childLanes=Xh(e,a,n),t.memoizedState=Yh,t=r);else if(Oi(t),dd(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(U(419)),i.stack="",i.digest=a,Co({value:i,source:null,stack:null}),t=$h(e,t,n)}else if(he||el(e,t,n,!1),a=(n&e.childLanes)!==0,he||a){if(a=It,a!==null&&(i=n&-n,i=i&42?1:tm(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,ma(e,i),nn(a,e,i),NE;l.data==="$?"||ad(),t=$h(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Ht=Rn(l.nextSibling),Ve=t,yt=!0,Lr=null,Dn=!1,e!==null&&(hn[fn++]=Jn,hn[fn++]=ti,hn[fn++]=Ur,Jn=e.id,ti=e.overflow,Ur=t),t=td(t,i.children),t.flags|=4096);return t}return r?(Vi(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=si(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=si(h,r):(r=Pr(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=Kh(n):(u=l.cachePool,u!==null?(h=ie._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=LT(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=Xh(e,a,n),t.memoizedState=Yh,i):(Oi(t),n=e.child,e=n.sibling,n=si(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function td(e,t){return t=Yu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Yu(e,t){return e=$e(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function $h(e,t,n){return Js(t,e.child,null,n),e=td(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Oy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Bf(e.return,t,n)}function Zh(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function VE(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(ge(e,t,i.children,n),i=re.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Oy(e,n,t);else if(e.tag===19)Oy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Pt(re,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Fu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Zh(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Fu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Zh(t,!0,n,null,s);break;case"together":Zh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ci(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),or|=t.lanes,!(n&t.childLanes))if(e!==null){if(el(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=si(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=si(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function xm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&ju(e)))}function Nw(e,t,n){switch(t.tag){case 3:Du(t,t.stateNode.containerInfo),Di(t,ie,e.memoizedState.cache),tl();break;case 27:case 5:Nf(t);break;case 4:Du(t,t.stateNode.containerInfo);break;case 10:Di(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Oi(t),t.flags|=128,null):n&t.child.childLanes?OE(e,t,n):(Oi(t),e=ci(e,t,n),e!==null?e.sibling:null);Oi(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(el(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return VE(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Pt(re,re.current),i)break;return null;case 22:case 23:return t.lanes=0,DE(e,t,n);case 24:Di(t,ie,e.memoizedState.cache)}return ci(e,t,n)}function ME(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)he=!0;else{if(!xm(e,n)&&!(t.flags&128))return he=!1,Nw(e,t,n);he=!!(e.flags&131072)}else he=!1,yt&&t.flags&1048576&&PT(t,Lu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")hm(i)?(e=Gr(i,e),t.tag=1,t=xy(null,t,i,e,n)):(t.tag=0,t=Jf(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===Zd){t.tag=11,t=Ry(null,t,i,e,n);break t}else if(r===Wd){t.tag=14,t=Iy(null,t,i,e,n);break t}}throw t=If(i)||i,Error(U(306,t,""))}}return t;case 0:return Jf(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Gr(i,t.pendingProps),xy(e,t,i,r,n);case 3:t:{if(Du(t,t.stateNode.containerInfo),e===null)throw Error(U(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,Gf(e,t),uo(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Di(t,ie,i),i!==s.cache&&qf(t,[ie],n,!0),lo(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Dy(e,t,i,n);break t}else if(i!==r){r=mn(Error(U(424)),t),Co(r),t=Dy(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ht=Rn(e.firstChild),Ve=t,yt=!0,Lr=null,Dn=!0,n=AE(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(tl(),i===r){t=ci(e,t,n);break t}ge(e,t,i,n)}t=t.child}return t;case 26:return mu(e,t),e===null?(n=Xy(t.type,null,t.pendingProps,null))?t.memoizedState=n:yt||(n=t.type,e=t.pendingProps,i=tc(Fi.current).createElement(n),i[Ce]=t,i[Fe]=e,Te(i,n,e),ue(i),t.stateNode=i):t.memoizedState=Xy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Nf(t),e===null&&yt&&(i=t.stateNode=T0(t.type,t.pendingProps,Fi.current),Ve=t,Dn=!0,r=Ht,pr(t.type)?(md=r,Ht=Rn(i.firstChild)):Ht=r),ge(e,t,t.pendingProps.children,n),mu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&yt&&((r=i=Ht)&&(i=iR(i,t.type,t.pendingProps,Dn),i!==null?(t.stateNode=i,Ve=t,Ht=Rn(i.firstChild),Dn=!1,r=!0):r=!1),r||qr(t)),Nf(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,hd(r,s)?i=null:a!==null&&hd(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=vm(e,t,Ew,null,null,n),Mo._currentValue=r),mu(e,t),ge(e,t,i,n),t.child;case 6:return e===null&&yt&&((e=n=Ht)&&(n=rR(n,t.pendingProps,Dn),n!==null?(t.stateNode=n,Ve=t,Ht=null,e=!0):e=!1),e||qr(t)),null;case 13:return OE(e,t,n);case 4:return Du(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Js(t,null,i,n):ge(e,t,i,n),t.child;case 11:return Ry(e,t,t.type,t.pendingProps,n);case 7:return ge(e,t,t.pendingProps,n),t.child;case 8:return ge(e,t,t.pendingProps.children,n),t.child;case 12:return ge(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Di(t,t.type,i.value),ge(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Hr(t),r=Ne(r),i=i(r),t.flags|=1,ge(e,t,i,n),t.child;case 14:return Iy(e,t,t.type,t.pendingProps,n);case 15:return xE(e,t,t.type,t.pendingProps,n);case 19:return VE(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Yu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=si(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return DE(e,t,n);case 24:return Hr(t),i=Ne(ie),e===null?(r=gm(),r===null&&(r=It,s=mm(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},pm(t),Di(t,ie,r)):(e.lanes&n&&(Gf(e,t),uo(t,null,null,n),lo()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Di(t,ie,i)):(i=s.cache,Di(t,ie,i),i!==r.cache&&qf(t,[ie],n,!0))),ge(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(U(156,t.tag))}function Xn(e){e.flags|=4}function Vy(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!b0(t)){if(t=pn.current,t!==null&&((dt&4194048)===dt?kn!==null:(dt&62914560)!==dt&&!(dt&536870912)||t!==kn))throw ao=Ff,jT;e.flags|=8192}}function Xl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?aT():536870912,e.lanes|=t,ta|=t)}function Fa(e,t){if(!yt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function xw(e,t,n){var i=t.pendingProps;switch(dm(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(t),null;case 1:return Ut(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ai(ie),Ys(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(qa(t)?Xn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,uy())),Ut(t),null;case 26:return n=t.memoizedState,e===null?(Xn(t),n!==null?(Ut(t),Vy(t,n)):(Ut(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Xn(t),Ut(t),Vy(t,n)):(Ut(t),t.flags&=-16777217):(e.memoizedProps!==i&&Xn(t),Ut(t),t.flags&=-16777217),null;case 27:Ou(t),n=Fi.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Xn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Ut(t),null}e=Vn.current,qa(t)?oy(t):(e=T0(r,i,n),t.stateNode=e,Xn(t))}return Ut(t),null;case 5:if(Ou(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Xn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Ut(t),null}if(e=Vn.current,qa(t))oy(t);else{switch(r=tc(Fi.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Ce]=t,e[Fe]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(Te(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Xn(t)}}return Ut(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Xn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(e=Fi.current,qa(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Ve,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Ce]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||y0(e.nodeValue,n)),e||qr(t)}else e=tc(e).createTextNode(i),e[Ce]=t,t.stateNode=e}return Ut(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=qa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(U(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(U(317));r[Ce]=t}else tl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ut(t),r=!1}else r=uy(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(ni(t),t):(ni(t),null)}if(ni(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Xl(t,t.updateQueue),Ut(t),null;case 4:return Ys(),e===null&&Lm(t.stateNode.containerInfo),Ut(t),null;case 10:return ai(t.type),Ut(t),null;case 19:if(fe(re),r=t.memoizedState,r===null)return Ut(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)Fa(r,!1);else{if(Ft!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Fu(e),s!==null){for(t.flags|=128,Fa(r,!1),e=s.updateQueue,t.updateQueue=e,Xl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)kT(n,e),n=n.sibling;return Pt(re,re.current&1|2),t.child}e=e.sibling}r.tail!==null&&Mn()>Xu&&(t.flags|=128,i=!0,Fa(r,!1),t.lanes=4194304)}else{if(!i)if(e=Fu(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Xl(t,e),Fa(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!yt)return Ut(t),null}else 2*Mn()-r.renderingStartTime>Xu&&n!==536870912&&(t.flags|=128,i=!0,Fa(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Mn(),t.sibling=null,e=re.current,Pt(re,i?e&1|2:e&1),t):(Ut(t),null);case 22:case 23:return ni(t),ym(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Ut(t),t.subtreeFlags&6&&(t.flags|=8192)):Ut(t),n=t.updateQueue,n!==null&&Xl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&fe(jr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ai(ie),Ut(t),null;case 25:return null;case 30:return null}throw Error(U(156,t.tag))}function Dw(e,t){switch(dm(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ai(ie),Ys(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ou(t),null;case 13:if(ni(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));tl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fe(re),null;case 4:return Ys(),null;case 10:return ai(t.type),null;case 22:case 23:return ni(t),ym(),e!==null&&fe(jr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ai(ie),null;case 25:return null;default:return null}}function kE(e,t){switch(dm(t),t.tag){case 3:ai(ie),Ys();break;case 26:case 27:case 5:Ou(t);break;case 4:Ys();break;case 13:ni(t);break;case 19:fe(re);break;case 10:ai(t.type);break;case 22:case 23:ni(t),ym(),e!==null&&fe(jr);break;case 24:ai(ie)}}function al(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Rt(t,t.return,l)}}function ar(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){Rt(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){Rt(t,t.return,d)}}function PE(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{qT(t,n)}catch(i){Rt(e,e.return,i)}}}function UE(e,t,n){n.props=Gr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Rt(e,t,i)}}function ho(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){Rt(e,t,r)}}function On(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Rt(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Rt(e,t,r)}else n.current=null}function LE(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Rt(e,e.return,r)}}function Wh(e,t,n){try{var i=e.stateNode;Ww(i,e.type,n,t),i[Fe]=t}catch(r){Rt(e,e.return,r)}}function jE(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&pr(e.type)||e.tag===4}function Jh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||jE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&pr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ed(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=qc));else if(i!==4&&(i===27&&pr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(ed(e,t,n),e=e.sibling;e!==null;)ed(e,t,n),e=e.sibling}function Ku(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&pr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Ku(e,t,n),e=e.sibling;e!==null;)Ku(e,t,n),e=e.sibling}function zE(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Te(t,i,n),t[Ce]=e,t[Fe]=n}catch(s){Rt(e,e.return,s)}}var Zn=!1,Qt=!1,tf=!1,My=typeof WeakSet=="function"?WeakSet:Set,le=null;function Ow(e,t){if(e=e.containerInfo,ud=rc,e=IT(e),lm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var _;g!==n||r!==0&&g.nodeType!==3||(l=a+r),g!==s||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(cd={focusedElem:e,selectionRange:n},rc=!1,le=t;le!==null;)if(t=le,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,le=e;else for(;le!==null;){switch(t=le,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var x=Gr(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(x,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(V){Rt(n,n.return,V)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)fd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(U(163))}if(e=t.sibling,e!==null){e.return=t.return,le=e;break}le=t.return}}function BE(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ri(e,n),i&4&&al(5,n);break;case 1:if(Ri(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Rt(n,n.return,a)}else{var r=Gr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Rt(n,n.return,a)}}i&64&&PE(n),i&512&&ho(n,n.return);break;case 3:if(Ri(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{qT(e,t)}catch(a){Rt(n,n.return,a)}}break;case 27:t===null&&i&4&&zE(n);case 26:case 5:Ri(e,n),t===null&&i&4&&LE(n),i&512&&ho(n,n.return);break;case 12:Ri(e,n);break;case 13:Ri(e,n),i&4&&FE(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Bw.bind(null,n),sR(e,n))));break;case 22:if(i=n.memoizedState!==null||Zn,!i){t=t!==null&&t.memoizedState!==null||Qt,r=Zn;var s=Qt;Zn=i,(Qt=t)&&!s?Ci(e,n,(n.subtreeFlags&8772)!==0):Ri(e,n),Zn=r,Qt=s}break;case 30:break;default:Ri(e,n)}}function qE(e){var t=e.alternate;t!==null&&(e.alternate=null,qE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&nm(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Mt=null,Be=!1;function $n(e,t,n){for(n=n.child;n!==null;)HE(e,t,n),n=n.sibling}function HE(e,t,n){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(Xo,n)}catch{}switch(n.tag){case 26:Qt||On(n,t),$n(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Qt||On(n,t);var i=Mt,r=Be;pr(n.type)&&(Mt=n.stateNode,Be=!1),$n(e,t,n),po(n.stateNode),Mt=i,Be=r;break;case 5:Qt||On(n,t);case 6:if(i=Mt,r=Be,Mt=null,$n(e,t,n),Mt=i,Be=r,Mt!==null)if(Be)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(n.stateNode)}catch(s){Rt(n,t,s)}else try{Mt.removeChild(n.stateNode)}catch(s){Rt(n,t,s)}break;case 18:Mt!==null&&(Be?(e=Mt,Qy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Uo(e)):Qy(Mt,n.stateNode));break;case 4:i=Mt,r=Be,Mt=n.stateNode.containerInfo,Be=!0,$n(e,t,n),Mt=i,Be=r;break;case 0:case 11:case 14:case 15:Qt||ar(2,n,t),Qt||ar(4,n,t),$n(e,t,n);break;case 1:Qt||(On(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&UE(n,t,i)),$n(e,t,n);break;case 21:$n(e,t,n);break;case 22:Qt=(i=Qt)||n.memoizedState!==null,$n(e,t,n),Qt=i;break;default:$n(e,t,n)}}function FE(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Uo(e)}catch(n){Rt(t,t.return,n)}}function Vw(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new My),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new My),t;default:throw Error(U(435,e.tag))}}function ef(e,t){var n=Vw(e);t.forEach(function(i){var r=qw.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Ye(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(pr(l.type)){Mt=l.stateNode,Be=!1;break t}break;case 5:Mt=l.stateNode,Be=!1;break t;case 3:case 4:Mt=l.stateNode.containerInfo,Be=!0;break t}l=l.return}if(Mt===null)throw Error(U(160));HE(s,a,r),Mt=null,Be=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)GE(t,e),t=t.sibling}var bn=null;function GE(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ye(t,e),Ke(e),i&4&&(ar(3,e,e.return),al(3,e),ar(5,e,e.return));break;case 1:Ye(t,e),Ke(e),i&512&&(Qt||n===null||On(n,n.return)),i&64&&Zn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=bn;if(Ye(t,e),Ke(e),i&512&&(Qt||n===null||On(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Wo]||s[Ce]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Te(s,i,n),s[Ce]=e,ue(s),i=s;break t;case"link":var a=Zy("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),Te(s,i,n),r.head.appendChild(s);break;case"meta":if(a=Zy("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),Te(s,i,n),r.head.appendChild(s);break;default:throw Error(U(468,i))}s[Ce]=e,ue(s),i=s}e.stateNode=i}else Wy(r,e.type,e.stateNode);else e.stateNode=$y(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?Wy(r,e.type,e.stateNode):$y(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Wh(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ye(t,e),Ke(e),i&512&&(Qt||n===null||On(n,n.return)),n!==null&&i&4&&Wh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ye(t,e),Ke(e),i&512&&(Qt||n===null||On(n,n.return)),e.flags&32){r=e.stateNode;try{Xs(r,"")}catch(_){Rt(e,e.return,_)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,Wh(e,r,n!==null?n.memoizedProps:r)),i&1024&&(tf=!0);break;case 6:if(Ye(t,e),Ke(e),i&4){if(e.stateNode===null)throw Error(U(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){Rt(e,e.return,_)}}break;case 3:if(yu=null,r=bn,bn=ec(t.containerInfo),Ye(t,e),bn=r,Ke(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Uo(t.containerInfo)}catch(_){Rt(e,e.return,_)}tf&&(tf=!1,QE(e));break;case 4:i=bn,bn=ec(e.stateNode.containerInfo),Ye(t,e),Ke(e),bn=i;break;case 12:Ye(t,e),Ke(e);break;case 13:Ye(t,e),Ke(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(km=Mn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,ef(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Zn,d=Qt;if(Zn=h||r,Qt=d||u,Ye(t,e),Qt=d,Zn=h,Ke(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||Zn||Qt||Or(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){Rt(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(_){Rt(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,ef(e,n))));break;case 19:Ye(t,e),Ke(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,ef(e,i)));break;case 30:break;case 21:break;default:Ye(t,e),Ke(e)}}function Ke(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(jE(i)){n=i;break}i=i.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var r=n.stateNode,s=Jh(e);Ku(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Xs(a,""),n.flags&=-33);var l=Jh(e);Ku(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Jh(e);ed(e,h,u);break;default:throw Error(U(161))}}catch(d){Rt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function QE(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;QE(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ri(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)BE(e,t.alternate,t),t=t.sibling}function Or(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ar(4,t,t.return),Or(t);break;case 1:On(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&UE(t,t.return,n),Or(t);break;case 27:po(t.stateNode);case 26:case 5:On(t,t.return),Or(t);break;case 22:t.memoizedState===null&&Or(t);break;case 30:Or(t);break;default:Or(t)}e=e.sibling}}function Ci(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Ci(r,s,n),al(4,s);break;case 1:if(Ci(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){Rt(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)BT(u[r],l)}catch(h){Rt(i,i.return,h)}}n&&a&64&&PE(s),ho(s,s.return);break;case 27:zE(s);case 26:case 5:Ci(r,s,n),n&&i===null&&a&4&&LE(s),ho(s,s.return);break;case 12:Ci(r,s,n);break;case 13:Ci(r,s,n),n&&a&4&&FE(r,s);break;case 22:s.memoizedState===null&&Ci(r,s,n),ho(s,s.return);break;case 30:break;default:Ci(r,s,n)}t=t.sibling}}function Dm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&nl(n))}function Om(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&nl(e))}function Nn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)YE(e,t,n,i),t=t.sibling}function YE(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Nn(e,t,n,i),r&2048&&al(9,t);break;case 1:Nn(e,t,n,i);break;case 3:Nn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&nl(e)));break;case 12:if(r&2048){Nn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){Rt(t,t.return,u)}}else Nn(e,t,n,i);break;case 13:Nn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?Nn(e,t,n,i):fo(e,t):s._visibility&2?Nn(e,t,n,i):(s._visibility|=2,ds(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&Dm(a,t);break;case 24:Nn(e,t,n,i),r&2048&&Om(t.alternate,t);break;default:Nn(e,t,n,i)}}function ds(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:ds(s,a,l,u,r),al(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?ds(s,a,l,u,r):fo(s,a):(d._visibility|=2,ds(s,a,l,u,r)),r&&h&2048&&Dm(a.alternate,a);break;case 24:ds(s,a,l,u,r),r&&h&2048&&Om(a.alternate,a);break;default:ds(s,a,l,u,r)}t=t.sibling}}function fo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:fo(n,i),r&2048&&Dm(i.alternate,i);break;case 24:fo(n,i),r&2048&&Om(i.alternate,i);break;default:fo(n,i)}t=t.sibling}}var $a=8192;function us(e){if(e.subtreeFlags&$a)for(e=e.child;e!==null;)KE(e),e=e.sibling}function KE(e){switch(e.tag){case 26:us(e),e.flags&$a&&e.memoizedState!==null&&_R(bn,e.memoizedState,e.memoizedProps);break;case 5:us(e);break;case 3:case 4:var t=bn;bn=ec(e.stateNode.containerInfo),us(e),bn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=$a,$a=16777216,us(e),$a=t):us(e));break;default:us(e)}}function XE(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ga(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];le=i,ZE(i,e)}XE(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$E(e),e=e.sibling}function $E(e){switch(e.tag){case 0:case 11:case 15:Ga(e),e.flags&2048&&ar(9,e,e.return);break;case 3:Ga(e);break;case 12:Ga(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,gu(e)):Ga(e);break;default:Ga(e)}}function gu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];le=i,ZE(i,e)}XE(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ar(8,t,t.return),gu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,gu(t));break;default:gu(t)}e=e.sibling}}function ZE(e,t){for(;le!==null;){var n=le;switch(n.tag){case 0:case 11:case 15:ar(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:nl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,le=i;else t:for(n=e;le!==null;){i=le;var r=i.sibling,s=i.return;if(qE(i),i===n){le=null;break t}if(r!==null){r.return=s,le=r;break t}le=s}}}var Mw={getCacheForType:function(e){var t=Ne(ie),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},kw=typeof WeakMap=="function"?WeakMap:Map,Et=0,It=null,ot=null,dt=0,Tt=0,Xe=null,Bi=!1,ga=!1,Vm=!1,hi=0,Ft=0,or=0,zr=0,Mm=0,gn=0,ta=0,mo=null,qe=null,nd=!1,km=0,Xu=1/0,$u=null,Yi=null,ye=0,Ki=null,ea=null,zs=0,id=0,rd=null,WE=null,go=0,sd=null;function en(){if(Et&2&&dt!==0)return dt&-dt;if(W.T!==null){var e=$s;return e!==0?e:Um()}return uT()}function JE(){gn===0&&(gn=!(dt&536870912)||yt?sT():536870912);var e=pn.current;return e!==null&&(e.flags|=32),gn}function nn(e,t,n){(e===It&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)&&(na(e,0),qi(e,dt,gn,!1)),Zo(e,n),(!(Et&2)||e!==It)&&(e===It&&(!(Et&2)&&(zr|=n),Ft===4&&qi(e,dt,gn,!1)),Hn(e))}function t0(e,t,n){if(Et&6)throw Error(U(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||$o(e,t),r=i?Lw(e,t):nf(e,t,!0),s=i;do{if(r===0){ga&&!i&&qi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Pw(n)){r=nf(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=mo;var u=l.current.memoizedState.isDehydrated;if(u&&(na(l,a).flags|=256),a=nf(l,a,!1),a!==2){if(Vm&&!u){l.errorRecoveryDisabledLanes|=s,zr|=s,r=4;break t}s=qe,qe=r,s!==null&&(qe===null?qe=s:qe.push.apply(qe,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){na(e,0),qi(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(U(345));case 4:if((t&4194048)!==t)break;case 6:qi(i,t,gn,!Bi);break t;case 2:qe=null;break;case 3:case 5:break;default:throw Error(U(329))}if((t&62914560)===t&&(r=km+300-Mn(),10<r)){if(qi(i,t,gn,!Bi),Nc(i,0,!0)!==0)break t;i.timeoutHandle=v0(ky.bind(null,i,n,qe,$u,nd,t,gn,zr,ta,Bi,s,2,-0,0),r);break t}ky(i,n,qe,$u,nd,t,gn,zr,ta,Bi,s,0,-0,0)}}break}while(!0);Hn(e)}function ky(e,t,n,i,r,s,a,l,u,h,d,g,m,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(Vo={stylesheets:null,count:0,unsuspend:yR},KE(t),g=vR(),g!==null)){e.cancelPendingCommit=g(Uy.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,_)),qi(e,s,a,!h);return}Uy(e,t,s,n,i,r,a,l,u)}function Pw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!an(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qi(e,t,n,i){t&=~Mm,t&=~zr,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-tn(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&oT(e,n,t)}function jc(){return Et&6?!0:(ol(0),!1)}function Pm(){if(ot!==null){if(Tt===0)var e=ot.return;else e=ot,ei=es=null,Am(e),js=null,xo=0,e=ot;for(;e!==null;)kE(e.alternate,e),e=e.return;ot=null}}function na(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,tR(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Pm(),It=e,ot=n=si(e.current,null),dt=t,Tt=0,Xe=null,Bi=!1,ga=$o(e,t),Vm=!1,ta=gn=Mm=zr=or=Ft=0,qe=mo=null,nd=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-tn(i),s=1<<r;t|=e[r],i&=~s}return hi=t,Vc(),n}function e0(e,t){it=null,W.H=Hu,t===il||t===kc?(t=dy(),Tt=3):t===jT?(t=dy(),Tt=4):Tt=t===NE?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Xe=t,ot===null&&(Ft=1,Qu(e,mn(t,e.current)))}function n0(){var e=W.H;return W.H=Hu,e===null?Hu:e}function i0(){var e=W.A;return W.A=Mw,e}function ad(){Ft=4,Bi||(dt&4194048)!==dt&&pn.current!==null||(ga=!0),!(or&134217727)&&!(zr&134217727)||It===null||qi(It,dt,gn,!1)}function nf(e,t,n){var i=Et;Et|=2;var r=n0(),s=i0();(It!==e||dt!==t)&&($u=null,na(e,t)),t=!1;var a=Ft;t:do try{if(Tt!==0&&ot!==null){var l=ot,u=Xe;switch(Tt){case 8:Pm(),a=6;break t;case 3:case 2:case 9:case 6:pn.current===null&&(t=!0);var h=Tt;if(Tt=0,Xe=null,xs(e,l,u,h),n&&ga){a=0;break t}break;default:h=Tt,Tt=0,Xe=null,xs(e,l,u,h)}}Uw(),a=Ft;break}catch(d){e0(e,d)}while(!0);return t&&e.shellSuspendCounter++,ei=es=null,Et=i,W.H=r,W.A=s,ot===null&&(It=null,dt=0,Vc()),a}function Uw(){for(;ot!==null;)r0(ot)}function Lw(e,t){var n=Et;Et|=2;var i=n0(),r=i0();It!==e||dt!==t?($u=null,Xu=Mn()+500,na(e,t)):ga=$o(e,t);t:do try{if(Tt!==0&&ot!==null){t=ot;var s=Xe;e:switch(Tt){case 1:Tt=0,Xe=null,xs(e,t,s,1);break;case 2:case 9:if(fy(s)){Tt=0,Xe=null,Py(t);break}t=function(){Tt!==2&&Tt!==9||It!==e||(Tt=7),Hn(e)},s.then(t,t);break t;case 3:Tt=7;break t;case 4:Tt=5;break t;case 7:fy(s)?(Tt=0,Xe=null,Py(t)):(Tt=0,Xe=null,xs(e,t,s,7));break;case 5:var a=null;switch(ot.tag){case 26:a=ot.memoizedState;case 5:case 27:var l=ot;if(!a||b0(a)){Tt=0,Xe=null;var u=l.sibling;if(u!==null)ot=u;else{var h=l.return;h!==null?(ot=h,zc(h)):ot=null}break e}}Tt=0,Xe=null,xs(e,t,s,5);break;case 6:Tt=0,Xe=null,xs(e,t,s,6);break;case 8:Pm(),Ft=6;break t;default:throw Error(U(462))}}jw();break}catch(d){e0(e,d)}while(!0);return ei=es=null,W.H=i,W.A=r,Et=n,ot!==null?0:(It=null,dt=0,Vc(),Ft)}function jw(){for(;ot!==null&&!o1();)r0(ot)}function r0(e){var t=ME(e.alternate,e,hi);e.memoizedProps=e.pendingProps,t===null?zc(e):ot=t}function Py(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ny(n,t,t.pendingProps,t.type,void 0,dt);break;case 11:t=Ny(n,t,t.pendingProps,t.type.render,t.ref,dt);break;case 5:Am(t);default:kE(n,t),t=ot=kT(t,hi),t=ME(n,t,hi)}e.memoizedProps=e.pendingProps,t===null?zc(e):ot=t}function xs(e,t,n,i){ei=es=null,Am(t),js=null,xo=0;var r=t.return;try{if(Cw(e,r,t,n,dt)){Ft=1,Qu(e,mn(n,e.current)),ot=null;return}}catch(s){if(r!==null)throw ot=r,s;Ft=1,Qu(e,mn(n,e.current)),ot=null;return}t.flags&32768?(yt||i===1?e=!0:ga||dt&536870912?e=!1:(Bi=e=!0,(i===2||i===9||i===3||i===6)&&(i=pn.current,i!==null&&i.tag===13&&(i.flags|=16384))),s0(t,e)):zc(t)}function zc(e){var t=e;do{if(t.flags&32768){s0(t,Bi);return}e=t.return;var n=xw(t.alternate,t,hi);if(n!==null){ot=n;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);Ft===0&&(Ft=5)}function s0(e,t){do{var n=Dw(e.alternate,e);if(n!==null){n.flags&=32767,ot=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ot=e;return}ot=e=n}while(e!==null);Ft=6,ot=null}function Uy(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do Bc();while(ye!==0);if(Et&6)throw Error(U(327));if(t!==null){if(t===e.current)throw Error(U(177));if(s=t.lanes|t.childLanes,s|=um,y1(e,n,s,a,l,u),e===It&&(ot=It=null,dt=0),ea=t,Ki=e,zs=n,id=s,rd=r,WE=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Hw(Vu,function(){return c0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=W.T,W.T=null,r=_t.p,_t.p=2,a=Et,Et|=4;try{Ow(e,t,n)}finally{Et=a,_t.p=r,W.T=i}}ye=1,a0(),o0(),l0()}}function a0(){if(ye===1){ye=0;var e=Ki,t=ea,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=W.T,W.T=null;var i=_t.p;_t.p=2;var r=Et;Et|=4;try{GE(t,e);var s=cd,a=IT(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&RT(l.ownerDocument.documentElement,l)){if(u!==null&&lm(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var _=m.getSelection(),x=l.textContent.length,V=Math.min(u.start,x),M=u.end===void 0?V:Math.min(u.end,x);!_.extend&&V>M&&(a=M,M=V,V=a);var w=ry(l,V),v=ry(l,M);if(w&&v&&(_.rangeCount!==1||_.anchorNode!==w.node||_.anchorOffset!==w.offset||_.focusNode!==v.node||_.focusOffset!==v.offset)){var R=g.createRange();R.setStart(w.node,w.offset),_.removeAllRanges(),V>M?(_.addRange(R),_.extend(v.node,v.offset)):(R.setEnd(v.node,v.offset),_.addRange(R))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}rc=!!ud,cd=ud=null}finally{Et=r,_t.p=i,W.T=n}}e.current=t,ye=2}}function o0(){if(ye===2){ye=0;var e=Ki,t=ea,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=W.T,W.T=null;var i=_t.p;_t.p=2;var r=Et;Et|=4;try{BE(e,t.alternate,t)}finally{Et=r,_t.p=i,W.T=n}}ye=3}}function l0(){if(ye===4||ye===3){ye=0,l1();var e=Ki,t=ea,n=zs,i=WE;t.subtreeFlags&10256||t.flags&10256?ye=5:(ye=0,ea=Ki=null,u0(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Yi=null),em(n),t=t.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(Xo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=W.T,r=_t.p,_t.p=2,W.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{W.T=t,_t.p=r}}zs&3&&Bc(),Hn(e),r=e.pendingLanes,n&4194090&&r&42?e===sd?go++:(go=0,sd=e):go=0,ol(0)}}function u0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,nl(t)))}function Bc(e){return a0(),o0(),l0(),c0()}function c0(){if(ye!==5)return!1;var e=Ki,t=id;id=0;var n=em(zs),i=W.T,r=_t.p;try{_t.p=32>n?32:n,W.T=null,n=rd,rd=null;var s=Ki,a=zs;if(ye=0,ea=Ki=null,zs=0,Et&6)throw Error(U(331));var l=Et;if(Et|=4,$E(s.current),YE(s,s.current,a,n),Et=l,ol(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(Xo,s)}catch{}return!0}finally{_t.p=r,W.T=i,u0(e,t)}}function Ly(e,t,n){t=mn(n,t),t=Wf(e.stateNode,t,2),e=Qi(e,t,2),e!==null&&(Zo(e,2),Hn(e))}function Rt(e,t,n){if(e.tag===3)Ly(e,e,n);else for(;t!==null;){if(t.tag===3){Ly(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Yi===null||!Yi.has(i))){e=mn(n,e),n=IE(2),i=Qi(t,n,2),i!==null&&(CE(n,i,t,e),Zo(i,2),Hn(i));break}}t=t.return}}function rf(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new kw;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Vm=!0,r.add(n),e=zw.bind(null,e,t,n),t.then(e,e))}function zw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,It===e&&(dt&n)===n&&(Ft===4||Ft===3&&(dt&62914560)===dt&&300>Mn()-km?!(Et&2)&&na(e,0):Mm|=n,ta===dt&&(ta=0)),Hn(e)}function h0(e,t){t===0&&(t=aT()),e=ma(e,t),e!==null&&(Zo(e,t),Hn(e))}function Bw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),h0(e,n)}function qw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(t),h0(e,n)}function Hw(e,t){return Jd(e,t)}var Zu=null,ms=null,od=!1,Wu=!1,sf=!1,Br=0;function Hn(e){e!==ms&&e.next===null&&(ms===null?Zu=ms=e:ms=ms.next=e),Wu=!0,od||(od=!0,Gw())}function ol(e,t){if(!sf&&Wu){sf=!0;do for(var n=!1,i=Zu;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-tn(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,jy(i,s))}else s=dt,s=Nc(i,i===It?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||$o(i,s)||(n=!0,jy(i,s));i=i.next}while(n);sf=!1}}function Fw(){f0()}function f0(){Wu=od=!1;var e=0;Br!==0&&(Jw()&&(e=Br),Br=0);for(var t=Mn(),n=null,i=Zu;i!==null;){var r=i.next,s=d0(i,t);s===0?(i.next=null,n===null?Zu=r:n.next=r,r===null&&(ms=n)):(n=i,(e!==0||s&3)&&(Wu=!0)),i=r}ol(e)}function d0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-tn(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=p1(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=It,n=dt,n=Nc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&xh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||$o(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&xh(i),em(n)){case 2:case 8:n=iT;break;case 32:n=Vu;break;case 268435456:n=rT;break;default:n=Vu}return i=m0.bind(null,e),n=Jd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&xh(i),e.callbackPriority=2,e.callbackNode=null,2}function m0(e,t){if(ye!==0&&ye!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Bc()&&e.callbackNode!==n)return null;var i=dt;return i=Nc(e,e===It?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(t0(e,i,t),d0(e,Mn()),e.callbackNode!=null&&e.callbackNode===n?m0.bind(null,e):null)}function jy(e,t){if(Bc())return null;t0(e,t,!0)}function Gw(){eR(function(){Et&6?Jd(nT,Fw):f0()})}function Um(){return Br===0&&(Br=sT()),Br}function zy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ou(""+e)}function By(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Qw(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=zy((r[Fe]||null).action),a=i.submitter;a&&(t=(t=a[Fe]||null)?zy(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new xc("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Br!==0){var u=a?By(r,a):new FormData(r);$f(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?By(r,a):new FormData(r),$f(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var af=0;af<Lf.length;af++){var of=Lf[af],Yw=of.toLowerCase(),Kw=of[0].toUpperCase()+of.slice(1);Cn(Yw,"on"+Kw)}Cn(NT,"onAnimationEnd");Cn(xT,"onAnimationIteration");Cn(DT,"onAnimationStart");Cn("dblclick","onDoubleClick");Cn("focusin","onFocus");Cn("focusout","onBlur");Cn(hw,"onTransitionRun");Cn(fw,"onTransitionStart");Cn(dw,"onTransitionCancel");Cn(OT,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Do));function g0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Gu(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Gu(d)}r.currentTarget=null,s=u}}}}function at(e,t){var n=t[Df];n===void 0&&(n=t[Df]=new Set);var i=e+"__bubble";n.has(i)||(p0(t,e,2,!1),n.add(i))}function lf(e,t,n){var i=0;t&&(i|=4),p0(n,e,i,t)}var $l="_reactListening"+Math.random().toString(36).slice(2);function Lm(e){if(!e[$l]){e[$l]=!0,cT.forEach(function(n){n!=="selectionchange"&&(Xw.has(n)||lf(n,!1,e),lf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$l]||(t[$l]=!0,lf("selectionchange",!1,t))}}function p0(e,t,n,i){switch(C0(t)){case 2:var r=AR;break;case 8:r=bR;break;default:r=qm}n=r.bind(null,t,n,e),r=void 0,!kf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function uf(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=Es(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}_T(function(){var h=s,d=rm(n),g=[];t:{var m=VT.get(e);if(m!==void 0){var _=xc,x=e;switch(e){case"keypress":if(uu(n)===0)break t;case"keydown":case"keyup":_=H1;break;case"focusin":x="focus",_=Lh;break;case"focusout":x="blur",_=Lh;break;case"beforeblur":case"afterblur":_=Lh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=D1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Q1;break;case NT:case xT:case DT:_=M1;break;case OT:_=K1;break;case"scroll":case"scrollend":_=N1;break;case"wheel":_=$1;break;case"copy":case"cut":case"paste":_=P1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=$p;break;case"toggle":case"beforetoggle":_=W1}var V=(t&4)!==0,M=!V&&(e==="scroll"||e==="scrollend"),w=V?m!==null?m+"Capture":null:m;V=[];for(var v=h,R;v!==null;){var D=v;if(R=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||R===null||w===null||(D=wo(v,w),D!=null&&V.push(Oo(v,D,R))),M)break;v=v.return}0<V.length&&(m=new _(m,x,null,n,d),g.push({event:m,listeners:V}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==Mf&&(x=n.relatedTarget||n.fromElement)&&(Es(x)||x[fa]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(x=n.relatedTarget||n.toElement,_=h,x=x?Es(x):null,x!==null&&(M=Ko(x),V=x.tag,x!==M||V!==5&&V!==27&&V!==6)&&(x=null)):(_=null,x=h),_!==x)){if(V=Kp,D="onMouseLeave",w="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(V=$p,D="onPointerLeave",w="onPointerEnter",v="pointer"),M=_==null?m:Xa(_),R=x==null?m:Xa(x),m=new V(D,v+"leave",_,n,d),m.target=M,m.relatedTarget=R,D=null,Es(d)===h&&(V=new V(w,v+"enter",x,n,d),V.target=R,V.relatedTarget=M,D=V),M=D,_&&x)e:{for(V=_,w=x,v=0,R=V;R;R=cs(R))v++;for(R=0,D=w;D;D=cs(D))R++;for(;0<v-R;)V=cs(V),v--;for(;0<R-v;)w=cs(w),R--;for(;v--;){if(V===w||w!==null&&V===w.alternate)break e;V=cs(V),w=cs(w)}V=null}else V=null;_!==null&&qy(g,m,_,V,!1),x!==null&&M!==null&&qy(g,M,x,V,!0)}}t:{if(m=h?Xa(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var j=ty;else if(Jp(m))if(ST)j=lw;else{j=aw;var H=sw}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&im(h.elementType)&&(j=ty):j=ow;if(j&&(j=j(e,h))){bT(g,j,n,d);break t}H&&H(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Vf(m,"number",m.value)}switch(H=h?Xa(h):window,e){case"focusin":(Jp(H)||H.contentEditable==="true")&&(Ss=H,Pf=h,ro=null);break;case"focusout":ro=Pf=Ss=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,sy(g,n,d);break;case"selectionchange":if(cw)break;case"keydown":case"keyup":sy(g,n,d)}var E;if(om)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else bs?ET(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(TT&&n.locale!=="ko"&&(bs||y!=="onCompositionStart"?y==="onCompositionEnd"&&bs&&(E=vT()):(zi=d,sm="value"in zi?zi.value:zi.textContent,bs=!0)),H=Ju(h,y),0<H.length&&(y=new Xp(y,e,null,n,d),g.push({event:y,listeners:H}),E?y.data=E:(E=AT(n),E!==null&&(y.data=E)))),(E=tw?ew(e,n):nw(e,n))&&(y=Ju(h,"onBeforeInput"),0<y.length&&(H=new Xp("onBeforeInput","beforeinput",null,n,d),g.push({event:H,listeners:y}),H.data=E)),Qw(g,e,h,n,d)}g0(g,t)})}function Oo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ju(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=wo(e,n),r!=null&&i.unshift(Oo(e,r,s)),r=wo(e,t),r!=null&&i.push(Oo(e,r,s))),e.tag===3)return i;e=e.return}return[]}function cs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function qy(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=wo(n,s),h!=null&&a.unshift(Oo(n,h,u))):r||(h=wo(n,s),h!=null&&a.push(Oo(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var $w=/\r\n?/g,Zw=/\u0000|\uFFFD/g;function Hy(e){return(typeof e=="string"?e:""+e).replace($w,`
`).replace(Zw,"")}function y0(e,t){return t=Hy(t),Hy(e)===t}function qc(){}function At(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Xs(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Xs(e,""+i);break;case"className":Hl(e,"class",i);break;case"tabIndex":Hl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Hl(e,n,i);break;case"style":yT(e,i,s);break;case"data":if(t!=="object"){Hl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=ou(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&At(e,t,"name",r.name,r,null),At(e,t,"formEncType",r.formEncType,r,null),At(e,t,"formMethod",r.formMethod,r,null),At(e,t,"formTarget",r.formTarget,r,null)):(At(e,t,"encType",r.encType,r,null),At(e,t,"method",r.method,r,null),At(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=ou(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=qc);break;case"onScroll":i!=null&&at("scroll",e);break;case"onScrollEnd":i!=null&&at("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=ou(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":at("beforetoggle",e),at("toggle",e),au(e,"popover",i);break;case"xlinkActuate":Kn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Kn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Kn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Kn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Kn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Kn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Kn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Kn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Kn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":au(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=I1.get(n)||n,au(e,n,i))}}function ld(e,t,n,i,r,s){switch(n){case"style":yT(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Xs(e,i):(typeof i=="number"||typeof i=="bigint")&&Xs(e,""+i);break;case"onScroll":i!=null&&at("scroll",e);break;case"onScrollEnd":i!=null&&at("scrollend",e);break;case"onClick":i!=null&&(e.onclick=qc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hT.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Fe]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):au(e,n,i)}}}function Te(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",e),at("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:At(e,t,s,a,n,null)}}r&&At(e,t,"srcSet",n.srcSet,n,null),i&&At(e,t,"src",n.src,n,null);return;case"input":at("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,t));break;default:At(e,t,i,d,n,null)}}mT(e,s,l,u,h,a,r,!1),Mu(e);return;case"select":at("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:At(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?Ms(e,!!i,t,!1):n!=null&&Ms(e,!!i,n,!0);return;case"textarea":at("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:At(e,t,a,l,n,null)}pT(e,i,r,s),Mu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:At(e,t,u,i,n,null)}return;case"dialog":at("beforetoggle",e),at("toggle",e),at("cancel",e),at("close",e);break;case"iframe":case"object":at("load",e);break;case"video":case"audio":for(i=0;i<Do.length;i++)at(Do[i],e);break;case"image":at("error",e),at("load",e);break;case"details":at("toggle",e);break;case"embed":case"source":case"link":at("error",e),at("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:At(e,t,h,i,n,null)}return;default:if(im(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&ld(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&At(e,t,l,i,n,null))}function Ww(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||At(e,t,_,null,i,g)}}for(var m in i){var _=i[m];if(g=n[m],i.hasOwnProperty(m)&&(_!=null||g!=null))switch(m){case"type":s=_;break;case"name":r=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(U(137,t));break;default:_!==g&&At(e,t,m,_,i,g)}}Of(e,a,l,u,h,d,s,r);return;case"select":_=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(s)||At(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&At(e,t,r,s,i,u)}t=l,n=a,i=_,m!=null?Ms(e,!!n,m,!1):!!i!=!!n&&(t!=null?Ms(e,!!n,t,!0):Ms(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:At(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":_=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(U(91));break;default:r!==s&&At(e,t,a,r,i,s)}gT(e,m,_);return;case"option":for(var x in n)if(m=n[x],n.hasOwnProperty(x)&&m!=null&&!i.hasOwnProperty(x))switch(x){case"selected":e.selected=!1;break;default:At(e,t,x,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:At(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!=null&&!i.hasOwnProperty(V)&&At(e,t,V,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,t));break;default:At(e,t,h,m,i,_)}return;default:if(im(t)){for(var M in n)m=n[M],n.hasOwnProperty(M)&&m!==void 0&&!i.hasOwnProperty(M)&&ld(e,t,M,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||ld(e,t,d,m,i,_);return}}for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!=null&&!i.hasOwnProperty(w)&&At(e,t,w,null,i,m);for(g in i)m=i[g],_=n[g],!i.hasOwnProperty(g)||m===_||m==null&&_==null||At(e,t,g,m,i,_)}var ud=null,cd=null;function tc(e){return e.nodeType===9?e:e.ownerDocument}function Fy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function hd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cf=null;function Jw(){var e=window.event;return e&&e.type==="popstate"?e===cf?!1:(cf=e,!0):(cf=null,!1)}var v0=typeof setTimeout=="function"?setTimeout:void 0,tR=typeof clearTimeout=="function"?clearTimeout:void 0,Gy=typeof Promise=="function"?Promise:void 0,eR=typeof queueMicrotask=="function"?queueMicrotask:typeof Gy<"u"?function(e){return Gy.resolve(null).then(e).catch(nR)}:v0;function nR(e){setTimeout(function(){throw e})}function pr(e){return e==="head"}function Qy(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&po(a.documentElement),n&2&&po(a.body),n&4)for(n=a.head,po(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[Wo]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),Uo(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);Uo(t)}function fd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fd(n),nm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function iR(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Wo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Rn(e.nextSibling),e===null)break}return null}function rR(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Rn(e.nextSibling),e===null))return null;return e}function dd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function sR(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var md=null;function Yy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function T0(e,t,n){switch(t=tc(n),e){case"html":if(e=t.documentElement,!e)throw Error(U(452));return e;case"head":if(e=t.head,!e)throw Error(U(453));return e;case"body":if(e=t.body,!e)throw Error(U(454));return e;default:throw Error(U(451))}}function po(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);nm(e)}var yn=new Map,Ky=new Set;function ec(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var _i=_t.d;_t.d={f:aR,r:oR,D:lR,C:uR,L:cR,m:hR,X:dR,S:fR,M:mR};function aR(){var e=_i.f(),t=jc();return e||t}function oR(e){var t=da(e);t!==null&&t.tag===5&&t.type==="form"?dE(t):_i.r(e)}var pa=typeof document>"u"?null:document;function E0(e,t,n){var i=pa;if(i&&typeof t=="string"&&t){var r=dn(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Ky.has(r)||(Ky.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),Te(t,"link",e),ue(t),i.head.appendChild(t)))}}function lR(e){_i.D(e),E0("dns-prefetch",e,null)}function uR(e,t){_i.C(e,t),E0("preconnect",e,t)}function cR(e,t,n){_i.L(e,t,n);var i=pa;if(i&&e&&t){var r='link[rel="preload"][as="'+dn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+dn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+dn(n.imageSizes)+'"]')):r+='[href="'+dn(e)+'"]';var s=r;switch(t){case"style":s=ia(e);break;case"script":s=ya(e)}yn.has(s)||(e=Dt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),yn.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(ll(s))||t==="script"&&i.querySelector(ul(s))||(t=i.createElement("link"),Te(t,"link",e),ue(t),i.head.appendChild(t)))}}function hR(e,t){_i.m(e,t);var n=pa;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+dn(i)+'"][href="'+dn(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=ya(e)}if(!yn.has(s)&&(e=Dt({rel:"modulepreload",href:e},t),yn.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ul(s)))return}i=n.createElement("link"),Te(i,"link",e),ue(i),n.head.appendChild(i)}}}function fR(e,t,n){_i.S(e,t,n);var i=pa;if(i&&e){var r=Vs(i).hoistableStyles,s=ia(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(ll(s)))l.loading=5;else{e=Dt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=yn.get(s))&&jm(e,n);var u=a=i.createElement("link");ue(u),Te(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,pu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function dR(e,t){_i.X(e,t);var n=pa;if(n&&e){var i=Vs(n).hoistableScripts,r=ya(e),s=i.get(r);s||(s=n.querySelector(ul(r)),s||(e=Dt({src:e,async:!0},t),(t=yn.get(r))&&zm(e,t),s=n.createElement("script"),ue(s),Te(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function mR(e,t){_i.M(e,t);var n=pa;if(n&&e){var i=Vs(n).hoistableScripts,r=ya(e),s=i.get(r);s||(s=n.querySelector(ul(r)),s||(e=Dt({src:e,async:!0,type:"module"},t),(t=yn.get(r))&&zm(e,t),s=n.createElement("script"),ue(s),Te(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Xy(e,t,n,i){var r=(r=Fi.current)?ec(r):null;if(!r)throw Error(U(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ia(n.href),n=Vs(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ia(n.href);var s=Vs(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(ll(e)))&&!s._p&&(a.instance=s,a.state.loading=5),yn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},yn.set(e,n),s||gR(r,e,n,a.state))),t&&i===null)throw Error(U(528,""));return a}if(t&&i!==null)throw Error(U(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ya(n),n=Vs(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,e))}}function ia(e){return'href="'+dn(e)+'"'}function ll(e){return'link[rel="stylesheet"]['+e+"]"}function A0(e){return Dt({},e,{"data-precedence":e.precedence,precedence:null})}function gR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Te(t,"link",n),ue(t),e.head.appendChild(t))}function ya(e){return'[src="'+dn(e)+'"]'}function ul(e){return"script[async]"+e}function $y(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+dn(n.href)+'"]');if(i)return t.instance=i,ue(i),i;var r=Dt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ue(i),Te(i,"style",r),pu(i,n.precedence,e),t.instance=i;case"stylesheet":r=ia(n.href);var s=e.querySelector(ll(r));if(s)return t.state.loading|=4,t.instance=s,ue(s),s;i=A0(n),(r=yn.get(r))&&jm(i,r),s=(e.ownerDocument||e).createElement("link"),ue(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Te(s,"link",i),t.state.loading|=4,pu(s,n.precedence,e),t.instance=s;case"script":return s=ya(n.src),(r=e.querySelector(ul(s)))?(t.instance=r,ue(r),r):(i=n,(r=yn.get(s))&&(i=Dt({},n),zm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),ue(r),Te(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(U(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,pu(i,n.precedence,e));return t.instance}function pu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function jm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function zm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var yu=null;function Zy(e,t,n){if(yu===null){var i=new Map,r=yu=new Map;r.set(n,i)}else r=yu,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Wo]||s[Ce]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function Wy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function pR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function b0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Vo=null;function yR(){}function _R(e,t,n){if(Vo===null)throw Error(U(475));var i=Vo;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=ia(n.href),s=e.querySelector(ll(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=nc.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,ue(s);return}s=e.ownerDocument||e,n=A0(n),(r=yn.get(r))&&jm(n,r),s=s.createElement("link"),ue(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Te(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=nc.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function vR(){if(Vo===null)throw Error(U(475));var e=Vo;return e.stylesheets&&e.count===0&&gd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&gd(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function nc(){if(this.count--,this.count===0){if(this.stylesheets)gd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ic=null;function gd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ic=new Map,t.forEach(TR,e),ic=null,nc.call(e))}function TR(e,t){if(!(t.state.loading&4)){var n=ic.get(e);if(n)var i=n.get(null);else{n=new Map,ic.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=nc.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Mo={$$typeof:Wn,Provider:null,Consumer:null,_currentValue:kr,_currentValue2:kr,_threadCount:0};function ER(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dh(0),this.hiddenUpdates=Dh(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function S0(e,t,n,i,r,s,a,l,u,h,d,g){return e=new ER(e,t,n,a,l,u,h,g),t=1,s===!0&&(t|=24),s=$e(3,null,null,t),e.current=s,s.stateNode=e,t=mm(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},pm(s),e}function w0(e){return e?(e=Is,e):Is}function R0(e,t,n,i,r,s){r=w0(r),i.context===null?i.context=r:i.pendingContext=r,i=Gi(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Qi(e,i,t),n!==null&&(nn(n,e,t),oo(n,e,t))}function Jy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Bm(e,t){Jy(e,t),(e=e.alternate)&&Jy(e,t)}function I0(e){if(e.tag===13){var t=ma(e,67108864);t!==null&&nn(t,e,67108864),Bm(e,67108864)}}var rc=!0;function AR(e,t,n,i){var r=W.T;W.T=null;var s=_t.p;try{_t.p=2,qm(e,t,n,i)}finally{_t.p=s,W.T=r}}function bR(e,t,n,i){var r=W.T;W.T=null;var s=_t.p;try{_t.p=8,qm(e,t,n,i)}finally{_t.p=s,W.T=r}}function qm(e,t,n,i){if(rc){var r=pd(i);if(r===null)uf(e,t,i,sc,n),t_(e,i);else if(wR(r,e,t,n,i))i.stopPropagation();else if(t_(e,i),t&4&&-1<SR.indexOf(e)){for(;r!==null;){var s=da(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=xr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-tn(a);l.entanglements[1]|=u,a&=~u}Hn(s),!(Et&6)&&(Xu=Mn()+500,ol(0))}}break;case 13:l=ma(s,2),l!==null&&nn(l,s,2),jc(),Bm(s,2)}if(s=pd(i),s===null&&uf(e,t,i,sc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else uf(e,t,i,null,n)}}function pd(e){return e=rm(e),Hm(e)}var sc=null;function Hm(e){if(sc=null,e=Es(e),e!==null){var t=Ko(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Wv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sc=e,null}function C0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(u1()){case nT:return 2;case iT:return 8;case Vu:case c1:return 32;case rT:return 268435456;default:return 32}default:return 32}}var yd=!1,Xi=null,$i=null,Zi=null,ko=new Map,Po=new Map,Mi=[],SR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function t_(e,t){switch(e){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":ko.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(t.pointerId)}}function Qa(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=da(t),t!==null&&I0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function wR(e,t,n,i,r){switch(t){case"focusin":return Xi=Qa(Xi,e,t,n,i,r),!0;case"dragenter":return $i=Qa($i,e,t,n,i,r),!0;case"mouseover":return Zi=Qa(Zi,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return ko.set(s,Qa(ko.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Po.set(s,Qa(Po.get(s)||null,e,t,n,i,r)),!0}return!1}function N0(e){var t=Es(e.target);if(t!==null){var n=Ko(t);if(n!==null){if(t=n.tag,t===13){if(t=Wv(n),t!==null){e.blockedOn=t,_1(e.priority,function(){if(n.tag===13){var i=en();i=tm(i);var r=ma(n,i);r!==null&&nn(r,n,i),Bm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _u(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=pd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Mf=i,n.target.dispatchEvent(i),Mf=null}else return t=da(n),t!==null&&I0(t),e.blockedOn=n,!1;t.shift()}return!0}function e_(e,t,n){_u(e)&&n.delete(t)}function RR(){yd=!1,Xi!==null&&_u(Xi)&&(Xi=null),$i!==null&&_u($i)&&($i=null),Zi!==null&&_u(Zi)&&(Zi=null),ko.forEach(e_),Po.forEach(e_)}function Zl(e,t){e.blockedOn===t&&(e.blockedOn=null,yd||(yd=!0,ae.unstable_scheduleCallback(ae.unstable_NormalPriority,RR)))}var Wl=null;function n_(e){Wl!==e&&(Wl=e,ae.unstable_scheduleCallback(ae.unstable_NormalPriority,function(){Wl===e&&(Wl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(Hm(i||n)===null)continue;break}var s=da(n);s!==null&&(e.splice(t,3),t-=3,$f(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Uo(e){function t(u){return Zl(u,e)}Xi!==null&&Zl(Xi,e),$i!==null&&Zl($i,e),Zi!==null&&Zl(Zi,e),ko.forEach(t),Po.forEach(t);for(var n=0;n<Mi.length;n++){var i=Mi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Mi.length&&(n=Mi[0],n.blockedOn===null);)N0(n),n.blockedOn===null&&Mi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Fe]||null;if(typeof s=="function")a||n_(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Fe]||null)l=a.formAction;else if(Hm(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),n_(n)}}}function Fm(e){this._internalRoot=e}Hc.prototype.render=Fm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));var n=t.current,i=en();R0(n,i,e,t,null,null)};Hc.prototype.unmount=Fm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;R0(e.current,2,null,e,null,null),jc(),t[fa]=null}};function Hc(e){this._internalRoot=e}Hc.prototype.unstable_scheduleHydration=function(e){if(e){var t=uT();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mi.length&&t!==0&&t<Mi[n].priority;n++);Mi.splice(n,0,e),n===0&&N0(e)}};var i_=$v.version;if(i_!=="19.1.1")throw Error(U(527,i_,"19.1.1"));_t.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=n1(t),e=e!==null?Jv(e):null,e=e===null?null:e.stateNode,e};var IR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jl.isDisabled&&Jl.supportsFiber)try{Xo=Jl.inject(IR),Je=Jl}catch{}}Ic.createRoot=function(e,t){if(!Zv(e))throw Error(U(299));var n=!1,i="",r=SE,s=wE,a=RE,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=S0(e,1,!1,null,null,n,i,r,s,a,l,null),e[fa]=t.current,Lm(e),new Fm(t)};Ic.hydrateRoot=function(e,t,n){if(!Zv(e))throw Error(U(299));var i=!1,r="",s=SE,a=wE,l=RE,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=S0(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=w0(null),n=t.current,i=en(),i=tm(i),r=Gi(i),r.callback=null,Qi(n,r,i),n=i,t.current.lanes=n,Zo(t,n),Hn(t),e[fa]=t.current,Lm(e),new Hc(t)};Ic.version="19.1.1";function x0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x0)}catch(e){console.error(e)}}x0(),Fv.exports=Ic;var CR=Fv.exports;const NR=()=>{};var r_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},xR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},O0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[g],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(D0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):xR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const g=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||g==null)throw new DR;const m=s<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const x=h<<6&192|g;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class DR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OR=function(e){const t=D0(e);return O0.encodeByteArray(t,!0)},ac=function(e){return OR(e).replace(/\./g,"")},V0=function(e){try{return O0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=()=>VR().__FIREBASE_DEFAULTS__,kR=()=>{if(typeof process>"u"||typeof r_>"u")return;const e=r_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},PR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&V0(e[1]);return t&&JSON.parse(t)},Fc=()=>{try{return NR()||MR()||kR()||PR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},M0=e=>{var t,n;return(n=(t=Fc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},UR=e=>{const t=M0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},k0=()=>{var e;return(e=Fc())==null?void 0:e.config},P0=e=>{var t;return(t=Fc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function U0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ac(JSON.stringify(n)),ac(JSON.stringify(a)),""].join(".")}const yo={};function zR(){const e={prod:[],emulator:[]};for(const t of Object.keys(yo))yo[t]?e.emulator.push(t):e.prod.push(t);return e}function BR(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let s_=!1;function L0(e,t){if(typeof window>"u"||typeof document>"u"||!_a(window.location.host)||yo[e]===t||yo[e]||s_)return;yo[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=zR().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{s_=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=BR(i),_=n("text"),x=document.getElementById(_)||document.createElement("span"),V=n("learnmore"),M=document.getElementById(V)||document.createElement("a"),w=n("preprendIcon"),v=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(M,V);const D=h();u(v,w),R.append(v,x,M,D),document.body.appendChild(R)}s?(x.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xe())}function HR(){var t;const e=(t=Fc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function QR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YR(){const e=xe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function KR(){return!HR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XR(){try{return typeof indexedDB=="object"}catch{return!1}}function $R(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="FirebaseError";class vi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=ZR,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?WR(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new vi(r,l,i)}}function WR(e,t){return e.replace(JR,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const JR=/\{\$([^}]+)}/g;function t2(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Qr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(a_(s)&&a_(a)){if(!Qr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function a_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function e2(e,t){const n=new n2(e,t);return n.subscribe.bind(n)}class n2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");i2(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=hf),r.error===void 0&&(r.error=hf),r.complete===void 0&&(r.complete=hf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function i2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function hf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(e){return e&&e._delegate?e._delegate:e}class Yr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new LR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(a2(t))try{this.getOrInitializeService({instanceIdentifier:Vr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Vr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vr){return this.instances.has(t)}getOptions(t=Vr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:s2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Vr){return this.component?this.component.multipleInstances?t:Vr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function s2(e){return e===Vr?void 0:e}function a2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new r2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ut||(ut={}));const l2={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},u2=ut.INFO,c2={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},h2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=c2[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Gm{constructor(t){this.name=t,this._logLevel=u2,this._logHandler=h2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ut))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?l2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...t),this._logHandler(this,ut.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...t),this._logHandler(this,ut.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...t),this._logHandler(this,ut.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...t),this._logHandler(this,ut.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...t),this._logHandler(this,ut.ERROR,...t)}}const f2=(e,t)=>t.some(n=>e instanceof n);let o_,l_;function d2(){return o_||(o_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m2(){return l_||(l_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const j0=new WeakMap,_d=new WeakMap,z0=new WeakMap,ff=new WeakMap,Qm=new WeakMap;function g2(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(Wi(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&j0.set(n,e)}).catch(()=>{}),Qm.set(t,e),t}function p2(e){if(_d.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});_d.set(e,t)}let vd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return _d.get(e);if(t==="objectStoreNames")return e.objectStoreNames||z0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function y2(e){vd=e(vd)}function _2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(df(this),t,...n);return z0.set(i,t.sort?t.sort():[t]),Wi(i)}:m2().includes(e)?function(...t){return e.apply(df(this),t),Wi(j0.get(this))}:function(...t){return Wi(e.apply(df(this),t))}}function v2(e){return typeof e=="function"?_2(e):(e instanceof IDBTransaction&&p2(e),f2(e,d2())?new Proxy(e,vd):e)}function Wi(e){if(e instanceof IDBRequest)return g2(e);if(ff.has(e))return ff.get(e);const t=v2(e);return t!==e&&(ff.set(e,t),Qm.set(t,e)),t}const df=e=>Qm.get(e);function T2(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=Wi(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Wi(a.result),u.oldVersion,u.newVersion,Wi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const E2=["get","getKey","getAll","getAllKeys","count"],A2=["put","add","delete","clear"],mf=new Map;function u_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(mf.get(t))return mf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=A2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||E2.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return mf.set(t,s),s}y2(e=>({...e,get:(t,n,i)=>u_(t,n)||e.get(t,n,i),has:(t,n)=>!!u_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(S2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function S2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Td="@firebase/app",c_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new Gm("@firebase/app"),w2="@firebase/app-compat",R2="@firebase/analytics-compat",I2="@firebase/analytics",C2="@firebase/app-check-compat",N2="@firebase/app-check",x2="@firebase/auth",D2="@firebase/auth-compat",O2="@firebase/database",V2="@firebase/data-connect",M2="@firebase/database-compat",k2="@firebase/functions",P2="@firebase/functions-compat",U2="@firebase/installations",L2="@firebase/installations-compat",j2="@firebase/messaging",z2="@firebase/messaging-compat",B2="@firebase/performance",q2="@firebase/performance-compat",H2="@firebase/remote-config",F2="@firebase/remote-config-compat",G2="@firebase/storage",Q2="@firebase/storage-compat",Y2="@firebase/firestore",K2="@firebase/ai",X2="@firebase/firestore-compat",$2="firebase",Z2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="[DEFAULT]",W2={[Td]:"fire-core",[w2]:"fire-core-compat",[I2]:"fire-analytics",[R2]:"fire-analytics-compat",[N2]:"fire-app-check",[C2]:"fire-app-check-compat",[x2]:"fire-auth",[D2]:"fire-auth-compat",[O2]:"fire-rtdb",[V2]:"fire-data-connect",[M2]:"fire-rtdb-compat",[k2]:"fire-fn",[P2]:"fire-fn-compat",[U2]:"fire-iid",[L2]:"fire-iid-compat",[j2]:"fire-fcm",[z2]:"fire-fcm-compat",[B2]:"fire-perf",[q2]:"fire-perf-compat",[H2]:"fire-rc",[F2]:"fire-rc-compat",[G2]:"fire-gcs",[Q2]:"fire-gcs-compat",[Y2]:"fire-fst",[X2]:"fire-fst-compat",[K2]:"fire-vertex","fire-js":"fire-js",[$2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new Map,J2=new Map,Ad=new Map;function h_(e,t){try{e.container.addComponent(t)}catch(n){fi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ra(e){const t=e.name;if(Ad.has(t))return fi.debug(`There were multiple attempts to register component ${t}.`),!1;Ad.set(t,e);for(const n of oc.values())h_(n,e);for(const n of J2.values())h_(n,e);return!0}function Ym(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Sn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new cl("app","Firebase",tI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=Z2;function B0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:Ed,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Ji.create("bad-app-name",{appName:String(r)});if(n||(n=k0()),!n)throw Ji.create("no-options");const s=oc.get(r);if(s){if(Qr(n,s.options)&&Qr(i,s.config))return s;throw Ji.create("duplicate-app",{appName:r})}const a=new o2(r);for(const u of Ad.values())a.addComponent(u);const l=new eI(n,i,a);return oc.set(r,l),l}function q0(e=Ed){const t=oc.get(e);if(!t&&e===Ed&&k0())return B0();if(!t)throw Ji.create("no-app",{appName:e});return t}function tr(e,t,n){let i=W2[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),fi.warn(a.join(" "));return}ra(new Yr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="firebase-heartbeat-database",iI=1,Lo="firebase-heartbeat-store";let gf=null;function H0(){return gf||(gf=T2(nI,iI,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Lo)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ji.create("idb-open",{originalErrorMessage:e.message})})),gf}async function rI(e){try{const n=(await H0()).transaction(Lo),i=await n.objectStore(Lo).get(F0(e));return await n.done,i}catch(t){if(t instanceof vi)fi.warn(t.message);else{const n=Ji.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});fi.warn(n.message)}}}async function f_(e,t){try{const i=(await H0()).transaction(Lo,"readwrite");await i.objectStore(Lo).put(t,F0(e)),await i.done}catch(n){if(n instanceof vi)fi.warn(n.message);else{const i=Ji.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fi.warn(i.message)}}}function F0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=1024,aI=30;class oI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=d_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>aI){const a=cI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){fi.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=d_(),{heartbeatsToSend:i,unsentEntries:r}=lI(this._heartbeatsCache.heartbeats),s=ac(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return fi.warn(n),""}}}function d_(){return new Date().toISOString().substring(0,10)}function lI(e,t=sI){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),m_(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),m_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class uI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XR()?$R().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return f_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return f_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function m_(e){return ac(JSON.stringify({version:2,heartbeats:e})).length}function cI(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(e){ra(new Yr("platform-logger",t=>new b2(t),"PRIVATE")),ra(new Yr("heartbeat",t=>new oI(t),"PRIVATE")),tr(Td,c_,e),tr(Td,c_,"esm2020"),tr("fire-js","")}hI("");var fI="firebase",dI="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr(fI,dI,"app");var g_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var er,G0;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,y){function A(){}A.prototype=y.prototype,E.D=y.prototype,E.prototype=new A,E.prototype.constructor=E,E.C=function(S,I,C){for(var b=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)b[Ot-2]=arguments[Ot];return y.prototype[I].apply(S,b)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,y,A){A||(A=0);var S=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)S[I]=y.charCodeAt(A++)|y.charCodeAt(A++)<<8|y.charCodeAt(A++)<<16|y.charCodeAt(A++)<<24;else for(I=0;16>I;++I)S[I]=y[A++]|y[A++]<<8|y[A++]<<16|y[A++]<<24;y=E.g[0],A=E.g[1],I=E.g[2];var C=E.g[3],b=y+(C^A&(I^C))+S[0]+3614090360&4294967295;y=A+(b<<7&4294967295|b>>>25),b=C+(I^y&(A^I))+S[1]+3905402710&4294967295,C=y+(b<<12&4294967295|b>>>20),b=I+(A^C&(y^A))+S[2]+606105819&4294967295,I=C+(b<<17&4294967295|b>>>15),b=A+(y^I&(C^y))+S[3]+3250441966&4294967295,A=I+(b<<22&4294967295|b>>>10),b=y+(C^A&(I^C))+S[4]+4118548399&4294967295,y=A+(b<<7&4294967295|b>>>25),b=C+(I^y&(A^I))+S[5]+1200080426&4294967295,C=y+(b<<12&4294967295|b>>>20),b=I+(A^C&(y^A))+S[6]+2821735955&4294967295,I=C+(b<<17&4294967295|b>>>15),b=A+(y^I&(C^y))+S[7]+4249261313&4294967295,A=I+(b<<22&4294967295|b>>>10),b=y+(C^A&(I^C))+S[8]+1770035416&4294967295,y=A+(b<<7&4294967295|b>>>25),b=C+(I^y&(A^I))+S[9]+2336552879&4294967295,C=y+(b<<12&4294967295|b>>>20),b=I+(A^C&(y^A))+S[10]+4294925233&4294967295,I=C+(b<<17&4294967295|b>>>15),b=A+(y^I&(C^y))+S[11]+2304563134&4294967295,A=I+(b<<22&4294967295|b>>>10),b=y+(C^A&(I^C))+S[12]+1804603682&4294967295,y=A+(b<<7&4294967295|b>>>25),b=C+(I^y&(A^I))+S[13]+4254626195&4294967295,C=y+(b<<12&4294967295|b>>>20),b=I+(A^C&(y^A))+S[14]+2792965006&4294967295,I=C+(b<<17&4294967295|b>>>15),b=A+(y^I&(C^y))+S[15]+1236535329&4294967295,A=I+(b<<22&4294967295|b>>>10),b=y+(I^C&(A^I))+S[1]+4129170786&4294967295,y=A+(b<<5&4294967295|b>>>27),b=C+(A^I&(y^A))+S[6]+3225465664&4294967295,C=y+(b<<9&4294967295|b>>>23),b=I+(y^A&(C^y))+S[11]+643717713&4294967295,I=C+(b<<14&4294967295|b>>>18),b=A+(C^y&(I^C))+S[0]+3921069994&4294967295,A=I+(b<<20&4294967295|b>>>12),b=y+(I^C&(A^I))+S[5]+3593408605&4294967295,y=A+(b<<5&4294967295|b>>>27),b=C+(A^I&(y^A))+S[10]+38016083&4294967295,C=y+(b<<9&4294967295|b>>>23),b=I+(y^A&(C^y))+S[15]+3634488961&4294967295,I=C+(b<<14&4294967295|b>>>18),b=A+(C^y&(I^C))+S[4]+3889429448&4294967295,A=I+(b<<20&4294967295|b>>>12),b=y+(I^C&(A^I))+S[9]+568446438&4294967295,y=A+(b<<5&4294967295|b>>>27),b=C+(A^I&(y^A))+S[14]+3275163606&4294967295,C=y+(b<<9&4294967295|b>>>23),b=I+(y^A&(C^y))+S[3]+4107603335&4294967295,I=C+(b<<14&4294967295|b>>>18),b=A+(C^y&(I^C))+S[8]+1163531501&4294967295,A=I+(b<<20&4294967295|b>>>12),b=y+(I^C&(A^I))+S[13]+2850285829&4294967295,y=A+(b<<5&4294967295|b>>>27),b=C+(A^I&(y^A))+S[2]+4243563512&4294967295,C=y+(b<<9&4294967295|b>>>23),b=I+(y^A&(C^y))+S[7]+1735328473&4294967295,I=C+(b<<14&4294967295|b>>>18),b=A+(C^y&(I^C))+S[12]+2368359562&4294967295,A=I+(b<<20&4294967295|b>>>12),b=y+(A^I^C)+S[5]+4294588738&4294967295,y=A+(b<<4&4294967295|b>>>28),b=C+(y^A^I)+S[8]+2272392833&4294967295,C=y+(b<<11&4294967295|b>>>21),b=I+(C^y^A)+S[11]+1839030562&4294967295,I=C+(b<<16&4294967295|b>>>16),b=A+(I^C^y)+S[14]+4259657740&4294967295,A=I+(b<<23&4294967295|b>>>9),b=y+(A^I^C)+S[1]+2763975236&4294967295,y=A+(b<<4&4294967295|b>>>28),b=C+(y^A^I)+S[4]+1272893353&4294967295,C=y+(b<<11&4294967295|b>>>21),b=I+(C^y^A)+S[7]+4139469664&4294967295,I=C+(b<<16&4294967295|b>>>16),b=A+(I^C^y)+S[10]+3200236656&4294967295,A=I+(b<<23&4294967295|b>>>9),b=y+(A^I^C)+S[13]+681279174&4294967295,y=A+(b<<4&4294967295|b>>>28),b=C+(y^A^I)+S[0]+3936430074&4294967295,C=y+(b<<11&4294967295|b>>>21),b=I+(C^y^A)+S[3]+3572445317&4294967295,I=C+(b<<16&4294967295|b>>>16),b=A+(I^C^y)+S[6]+76029189&4294967295,A=I+(b<<23&4294967295|b>>>9),b=y+(A^I^C)+S[9]+3654602809&4294967295,y=A+(b<<4&4294967295|b>>>28),b=C+(y^A^I)+S[12]+3873151461&4294967295,C=y+(b<<11&4294967295|b>>>21),b=I+(C^y^A)+S[15]+530742520&4294967295,I=C+(b<<16&4294967295|b>>>16),b=A+(I^C^y)+S[2]+3299628645&4294967295,A=I+(b<<23&4294967295|b>>>9),b=y+(I^(A|~C))+S[0]+4096336452&4294967295,y=A+(b<<6&4294967295|b>>>26),b=C+(A^(y|~I))+S[7]+1126891415&4294967295,C=y+(b<<10&4294967295|b>>>22),b=I+(y^(C|~A))+S[14]+2878612391&4294967295,I=C+(b<<15&4294967295|b>>>17),b=A+(C^(I|~y))+S[5]+4237533241&4294967295,A=I+(b<<21&4294967295|b>>>11),b=y+(I^(A|~C))+S[12]+1700485571&4294967295,y=A+(b<<6&4294967295|b>>>26),b=C+(A^(y|~I))+S[3]+2399980690&4294967295,C=y+(b<<10&4294967295|b>>>22),b=I+(y^(C|~A))+S[10]+4293915773&4294967295,I=C+(b<<15&4294967295|b>>>17),b=A+(C^(I|~y))+S[1]+2240044497&4294967295,A=I+(b<<21&4294967295|b>>>11),b=y+(I^(A|~C))+S[8]+1873313359&4294967295,y=A+(b<<6&4294967295|b>>>26),b=C+(A^(y|~I))+S[15]+4264355552&4294967295,C=y+(b<<10&4294967295|b>>>22),b=I+(y^(C|~A))+S[6]+2734768916&4294967295,I=C+(b<<15&4294967295|b>>>17),b=A+(C^(I|~y))+S[13]+1309151649&4294967295,A=I+(b<<21&4294967295|b>>>11),b=y+(I^(A|~C))+S[4]+4149444226&4294967295,y=A+(b<<6&4294967295|b>>>26),b=C+(A^(y|~I))+S[11]+3174756917&4294967295,C=y+(b<<10&4294967295|b>>>22),b=I+(y^(C|~A))+S[2]+718787259&4294967295,I=C+(b<<15&4294967295|b>>>17),b=A+(C^(I|~y))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(I+(b<<21&4294967295|b>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+C&4294967295}i.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var A=y-this.blockSize,S=this.B,I=this.h,C=0;C<y;){if(I==0)for(;C<=A;)r(this,E,C),C+=this.blockSize;if(typeof E=="string"){for(;C<y;)if(S[I++]=E.charCodeAt(C++),I==this.blockSize){r(this,S),I=0;break}}else for(;C<y;)if(S[I++]=E[C++],I==this.blockSize){r(this,S),I=0;break}}this.h=I,this.o+=y},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var A=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=A&255,A/=256;for(this.u(E),E=Array(16),y=A=0;4>y;++y)for(var S=0;32>S;S+=8)E[A++]=this.g[y]>>>S&255;return E};function s(E,y){var A=l;return Object.prototype.hasOwnProperty.call(A,E)?A[E]:A[E]=y(E)}function a(E,y){this.h=y;for(var A=[],S=!0,I=E.length-1;0<=I;I--){var C=E[I]|0;S&&C==y||(A[I]=C,S=!1)}this.g=A}var l={};function u(E){return-128<=E&&128>E?s(E,function(y){return new a([y|0],0>y?-1:0)}):new a([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return M(h(-E));for(var y=[],A=1,S=0;E>=A;S++)y[S]=E/A|0,A*=4294967296;return new a(y,0)}function d(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return M(d(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(y,8)),S=g,I=0;I<E.length;I+=8){var C=Math.min(8,E.length-I),b=parseInt(E.substring(I,I+C),y);8>C?(C=h(Math.pow(y,C)),S=S.j(C).add(h(b))):(S=S.j(A),S=S.add(h(b)))}return S}var g=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(V(this))return-M(this).m();for(var E=0,y=1,A=0;A<this.g.length;A++){var S=this.i(A);E+=(0<=S?S:4294967296+S)*y,y*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(x(this))return"0";if(V(this))return"-"+M(this).toString(E);for(var y=h(Math.pow(E,6)),A=this,S="";;){var I=D(A,y).g;A=w(A,I.j(y));var C=((0<A.g.length?A.g[0]:A.h)>>>0).toString(E);if(A=I,x(A))return C+S;for(;6>C.length;)C="0"+C;S=C+S}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function x(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function V(E){return E.h==-1}e.l=function(E){return E=w(this,E),V(E)?-1:x(E)?0:1};function M(E){for(var y=E.g.length,A=[],S=0;S<y;S++)A[S]=~E.g[S];return new a(A,~E.h).add(m)}e.abs=function(){return V(this)?M(this):this},e.add=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],S=0,I=0;I<=y;I++){var C=S+(this.i(I)&65535)+(E.i(I)&65535),b=(C>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);S=b>>>16,C&=65535,b&=65535,A[I]=b<<16|C}return new a(A,A[A.length-1]&-2147483648?-1:0)};function w(E,y){return E.add(M(y))}e.j=function(E){if(x(this)||x(E))return g;if(V(this))return V(E)?M(this).j(M(E)):M(M(this).j(E));if(V(E))return M(this.j(M(E)));if(0>this.l(_)&&0>E.l(_))return h(this.m()*E.m());for(var y=this.g.length+E.g.length,A=[],S=0;S<2*y;S++)A[S]=0;for(S=0;S<this.g.length;S++)for(var I=0;I<E.g.length;I++){var C=this.i(S)>>>16,b=this.i(S)&65535,Ot=E.i(I)>>>16,Ae=E.i(I)&65535;A[2*S+2*I]+=b*Ae,v(A,2*S+2*I),A[2*S+2*I+1]+=C*Ae,v(A,2*S+2*I+1),A[2*S+2*I+1]+=b*Ot,v(A,2*S+2*I+1),A[2*S+2*I+2]+=C*Ot,v(A,2*S+2*I+2)}for(S=0;S<y;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=y;S<2*y;S++)A[S]=0;return new a(A,0)};function v(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function R(E,y){this.g=E,this.h=y}function D(E,y){if(x(y))throw Error("division by zero");if(x(E))return new R(g,g);if(V(E))return y=D(M(E),y),new R(M(y.g),M(y.h));if(V(y))return y=D(E,M(y)),new R(M(y.g),y.h);if(30<E.g.length){if(V(E)||V(y))throw Error("slowDivide_ only works with positive integers.");for(var A=m,S=y;0>=S.l(E);)A=j(A),S=j(S);var I=H(A,1),C=H(S,1);for(S=H(S,2),A=H(A,2);!x(S);){var b=C.add(S);0>=b.l(E)&&(I=I.add(A),C=b),S=H(S,1),A=H(A,1)}return y=w(E,I.j(y)),new R(I,y)}for(I=g;0<=E.l(y);){for(A=Math.max(1,Math.floor(E.m()/y.m())),S=Math.ceil(Math.log(A)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),C=h(A),b=C.j(y);V(b)||0<b.l(E);)A-=S,C=h(A),b=C.j(y);x(C)&&(C=m),I=I.add(C),E=w(E,b)}return new R(I,E)}e.A=function(E){return D(this,E).h},e.and=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],S=0;S<y;S++)A[S]=this.i(S)&E.i(S);return new a(A,this.h&E.h)},e.or=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],S=0;S<y;S++)A[S]=this.i(S)|E.i(S);return new a(A,this.h|E.h)},e.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],S=0;S<y;S++)A[S]=this.i(S)^E.i(S);return new a(A,this.h^E.h)};function j(E){for(var y=E.g.length+1,A=[],S=0;S<y;S++)A[S]=E.i(S)<<1|E.i(S-1)>>>31;return new a(A,E.h)}function H(E,y){var A=y>>5;y%=32;for(var S=E.g.length-A,I=[],C=0;C<S;C++)I[C]=0<y?E.i(C+A)>>>y|E.i(C+A+1)<<32-y:E.i(C+A);return new a(I,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,G0=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,er=a}).apply(typeof g_<"u"?g_:typeof self<"u"?self:typeof window<"u"?window:{});var tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Q0,Za,Y0,vu,bd,K0,X0,$0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof tu=="object"&&tu];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var N=o[p];if(!(N in f))break t;f=f[N]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,p=!1,N={next:function(){if(!p&&f<o.length){var O=f++;return{value:c(O,o[O]),done:!1}}return p=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,p),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function x(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,N,O){for(var B=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)B[wt-2]=arguments[wt];return c.prototype[N].apply(p,B)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function M(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const N=o.length||0,O=p.length||0;o.length=N+O;for(let B=0;B<O;B++)o[N+B]=p[B]}else o.push(p)}}class w{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var j=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function H(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function E(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(o,c){let f,p;for(let N=1;N<arguments.length;N++){p=arguments[N];for(f in p)o[f]=p[f];for(let O=0;O<A.length;O++)f=A[O],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function I(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function C(o){l.setTimeout(()=>{throw o},0)}function b(){var o=pt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Ot{constructor(){this.h=this.g=null}add(c,f){const p=Ae.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var Ae=new w(()=>new z,o=>o.reset());class z{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let X,$=!1,pt=new Ot,vt=()=>{const o=l.Promise.resolve(void 0);X=()=>{o.then(Ue)}};var Ue=()=>{for(var o;o=b();){try{o.h.call(o.g)}catch(f){C(f)}var c=Ae;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}$=!1};function Jt(){this.s=this.s,this.C=this.C}Jt.prototype.s=!1,Jt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Jt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ct(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function ee(o,c){if(Ct.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(j){t:{try{D(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:vr[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&ee.aa.h.call(this)}}x(ee,Ct);var vr={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),_n=0;function Tr(o,c,f,p,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=N,this.key=++_n,this.da=this.fa=!1}function Fn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Ti(o){this.src=o,this.g={},this.h=0}Ti.prototype.add=function(o,c,f,p,N){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var B=Er(o,c,p,N);return-1<B?(c=o[B],f||(c.fa=!1)):(c=new Tr(c,this.src,O,!!p,N),c.fa=f,o.push(c)),c};function Gn(o,c){var f=c.type;if(f in o.g){var p=o.g[f],N=Array.prototype.indexOf.call(p,c,void 0),O;(O=0<=N)&&Array.prototype.splice.call(p,N,1),O&&(Fn(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Er(o,c,f,p){for(var N=0;N<o.length;++N){var O=o[N];if(!O.da&&O.listener==c&&O.capture==!!f&&O.ha==p)return N}return-1}var Ar="closure_lm_"+(1e6*Math.random()|0),br={};function Ei(o,c,f,p,N){if(Array.isArray(c)){for(var O=0;O<c.length;O++)Ei(o,c[O],f,p,N);return null}return f=L(f),o&&o[Le]?o.K(c,f,h(p)?!!p.capture:!1,N):Ra(o,c,f,!1,p,N)}function Ra(o,c,f,p,N,O){if(!c)throw Error("Invalid event type");var B=h(N)?!!N.capture:!!N,wt=on(o);if(wt||(o[Ar]=wt=new Ti(o)),f=wt.add(c,f,p,B,O),f.proxy)return f;if(p=rt(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)te||(N=B),N===void 0&&(N=!1),o.addEventListener(c.toString(),p,N);else if(o.attachEvent)o.attachEvent(vn(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function rt(){function o(f){return c.call(o.src,o.listener,f)}const c=Tn;return o}function lt(o,c,f,p,N){if(Array.isArray(c))for(var O=0;O<c.length;O++)lt(o,c[O],f,p,N);else p=h(p)?!!p.capture:!!p,f=L(f),o&&o[Le]?(o=o.i,c=String(c).toString(),c in o.g&&(O=o.g[c],f=Er(O,f,p,N),-1<f&&(Fn(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete o.g[c],o.h--)))):o&&(o=on(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Er(c,f,p,N)),(f=-1<o?c[o]:null)&&zt(f))}function zt(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Le])Gn(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(vn(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=on(c))?(Gn(f,o),f.h==0&&(f.src=null,c[Ar]=null)):Fn(o)}}}function vn(o){return o in br?br[o]:br[o]="on"+o}function Tn(o,c){if(o.da)o=!0;else{c=new ee(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&zt(o),o=f.call(p,c)}return o}function on(o){return o=o[Ar],o instanceof Ti?o:null}var De="__closure_events_fn_"+(1e9*Math.random()>>>0);function L(o){return typeof o=="function"?o:(o[De]||(o[De]=function(c){return o.handleEvent(c)}),o[De])}function Q(){Jt.call(this),this.i=new Ti(this),this.M=this,this.F=null}x(Q,Jt),Q.prototype[Le]=!0,Q.prototype.removeEventListener=function(o,c,f,p){lt(this,o,c,f,p)};function et(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new Ct(c,o);else if(c instanceof Ct)c.target=c.target||o;else{var N=c;c=new Ct(p,o),S(c,N)}if(N=!0,f)for(var O=f.length-1;0<=O;O--){var B=c.g=f[O];N=st(B,p,!0,c)&&N}if(B=c.g=o,N=st(B,p,!0,c)&&N,N=st(B,p,!1,c)&&N,f)for(O=0;O<f.length;O++)B=c.g=f[O],N=st(B,p,!1,c)&&N}Q.prototype.N=function(){if(Q.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)Fn(f[p]);delete o.g[c],o.h--}}this.F=null},Q.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},Q.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function st(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,O=0;O<c.length;++O){var B=c[O];if(B&&!B.da&&B.capture==f){var wt=B.listener,me=B.ha||B.src;B.fa&&Gn(o.i,B),N=wt.call(me,p)!==!1&&N}}return N&&!p.defaultPrevented}function Vt(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Bt(o){o.g=Vt(()=>{o.g=null,o.i&&(o.i=!1,Bt(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class ln extends Jt{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Bt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function je(o){Jt.call(this),this.h=o,this.g={}}x(je,Jt);var Sr=[];function En(o){H(o.g,function(c,f){this.g.hasOwnProperty(f)&&zt(c)},o),o.g={}}je.prototype.N=function(){je.aa.N.call(this),En(this)},je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dh=l.JSON.stringify,lS=l.JSON.parse,uS=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function mh(){}mh.prototype.h=null;function qg(o){return o.h||(o.h=o.i())}function Hg(){}var Ia={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gh(){Ct.call(this,"d")}x(gh,Ct);function ph(){Ct.call(this,"c")}x(ph,Ct);var wr={},Fg=null;function Sl(){return Fg=Fg||new Q}wr.La="serverreachability";function Gg(o){Ct.call(this,wr.La,o)}x(Gg,Ct);function Ca(o){const c=Sl();et(c,new Gg(c))}wr.STAT_EVENT="statevent";function Qg(o,c){Ct.call(this,wr.STAT_EVENT,o),this.stat=c}x(Qg,Ct);function Oe(o){const c=Sl();et(c,new Qg(c,o))}wr.Ma="timingevent";function Yg(o,c){Ct.call(this,wr.Ma,o),this.size=c}x(Yg,Ct);function Na(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function xa(){this.g=!0}xa.prototype.xa=function(){this.g=!1};function cS(o,c,f,p,N,O){o.info(function(){if(o.g)if(O)for(var B="",wt=O.split("&"),me=0;me<wt.length;me++){var gt=wt[me].split("=");if(1<gt.length){var be=gt[0];gt=gt[1];var Se=be.split("_");B=2<=Se.length&&Se[1]=="type"?B+(be+"="+gt+"&"):B+(be+"=redacted&")}}else B=null;else B=O;return"XMLHTTP REQ ("+p+") [attempt "+N+"]: "+c+`
`+f+`
`+B})}function hS(o,c,f,p,N,O,B){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+N+"]: "+c+`
`+f+`
`+O+" "+B})}function ss(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+dS(o,f)+(p?" "+p:"")})}function fS(o,c){o.info(function(){return"TIMEOUT: "+c})}xa.prototype.info=function(){};function dS(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var N=p[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var B=1;B<N.length;B++)N[B]=""}}}}return dh(f)}catch{return c}}var wl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yh;function Rl(){}x(Rl,mh),Rl.prototype.g=function(){return new XMLHttpRequest},Rl.prototype.i=function(){return{}},yh=new Rl;function Ai(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new je(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xg}function Xg(){this.i=null,this.g="",this.h=!1}var $g={},_h={};function vh(o,c,f){o.L=1,o.v=xl(Qn(c)),o.m=f,o.P=!0,Zg(o,null)}function Zg(o,c){o.F=Date.now(),Il(o),o.A=Qn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),hp(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Xg,o.g=Np(o.j,f?c:null,!o.m),0<o.O&&(o.M=new ln(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Sr[0]=N.toString()),N=Sr);for(var O=0;O<N.length;O++){var B=Ei(f,N[O],p||c.handleEvent,!1,c.h||c);if(!B)break;c.g[B.key]=B}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Ca(),cS(o.i,o.u,o.A,o.l,o.R,o.m)}Ai.prototype.ca=function(o){o=o.target;const c=this.M;c&&Yn(o)==3?c.j():this.Y(o)},Ai.prototype.Y=function(o){try{if(o==this.g)t:{const Se=Yn(this.g);var c=this.g.Ba();const ls=this.g.Z();if(!(3>Se)&&(Se!=3||this.g&&(this.h.h||this.g.oa()||_p(this.g)))){this.J||Se!=4||c==7||(c==8||0>=ls?Ca(3):Ca(2)),Th(this);var f=this.g.Z();this.X=f;e:if(Wg(this)){var p=_p(this.g);o="";var N=p.length,O=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rr(this),Da(this);var B="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(O&&c==N-1)});p.length=0,this.h.g+=o,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,hS(this.i,this.u,this.A,this.l,this.R,Se,f),this.o){if(this.T&&!this.K){e:{if(this.g){var wt,me=this.g;if((wt=me.g?me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(wt)){var gt=wt;break e}}gt=null}if(f=gt)ss(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Eh(this,f);else{this.o=!1,this.s=3,Oe(12),Rr(this),Da(this);break t}}if(this.P){f=!0;let An;for(;!this.J&&this.C<B.length;)if(An=mS(this,B),An==_h){Se==4&&(this.s=4,Oe(14),f=!1),ss(this.i,this.l,null,"[Incomplete Response]");break}else if(An==$g){this.s=4,Oe(15),ss(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else ss(this.i,this.l,An,null),Eh(this,An);if(Wg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Se!=4||B.length!=0||this.h.h||(this.s=1,Oe(16),f=!1),this.o=this.o&&f,!f)ss(this.i,this.l,B,"[Invalid Chunked Response]"),Rr(this),Da(this);else if(0<B.length&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.ba&&!be.M&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Ih(be),be.M=!0,Oe(11))}}else ss(this.i,this.l,B,null),Eh(this,B);Se==4&&Rr(this),this.o&&!this.J&&(Se==4?wp(this.j,this):(this.o=!1,Il(this)))}else DS(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),Rr(this),Da(this)}}}catch{}finally{}};function Wg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function mS(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?_h:(f=Number(c.substring(f,p)),isNaN(f)?$g:(p+=1,p+f>c.length?_h:(c=c.slice(p,p+f),o.C=p+f,c)))}Ai.prototype.cancel=function(){this.J=!0,Rr(this)};function Il(o){o.S=Date.now()+o.I,Jg(o,o.I)}function Jg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Na(m(o.ba,o),c)}function Th(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Ai.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(fS(this.i,this.A),this.L!=2&&(Ca(),Oe(17)),Rr(this),this.s=2,Da(this)):Jg(this,this.S-o)};function Da(o){o.j.G==0||o.J||wp(o.j,o)}function Rr(o){Th(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,En(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Eh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||Ah(f.h,o))){if(!o.K&&Ah(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var N=p;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Pl(f),Ml(f);else break t;Rh(f),Oe(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=Na(m(f.Za,f),6e3));if(1>=np(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Cr(f,11)}else if((o.K||f.g==o)&&Pl(f),!v(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let gt=N[c];if(f.T=gt[0],gt=gt[1],f.G==2)if(gt[0]=="c"){f.K=gt[1],f.ia=gt[2];const be=gt[3];be!=null&&(f.la=be,f.j.info("VER="+f.la));const Se=gt[4];Se!=null&&(f.Aa=Se,f.j.info("SVER="+f.Aa));const ls=gt[5];ls!=null&&typeof ls=="number"&&0<ls&&(p=1.5*ls,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const An=o.g;if(An){const Ll=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ll){var O=p.h;O.g||Ll.indexOf("spdy")==-1&&Ll.indexOf("quic")==-1&&Ll.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(bh(O,O.h),O.h=null))}if(p.D){const Ch=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;Ch&&(p.ya=Ch,Nt(p.I,p.D,Ch))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var B=o;if(p.qa=Cp(p,p.J?p.ia:null,p.W),B.K){ip(p.h,B);var wt=B,me=p.L;me&&(wt.I=me),wt.B&&(Th(wt),Il(wt)),p.g=B}else bp(p);0<f.i.length&&kl(f)}else gt[0]!="stop"&&gt[0]!="close"||Cr(f,7);else f.G==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?Cr(f,7):wh(f):gt[0]!="noop"&&f.l&&f.l.ta(gt),f.v=0)}}Ca(4)}catch{}}var gS=class{constructor(o,c){this.g=o,this.map=c}};function tp(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ep(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function np(o){return o.h?1:o.g?o.g.size:0}function Ah(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function bh(o,c){o.g?o.g.add(c):o.h=c}function ip(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}tp.prototype.cancel=function(){if(this.i=rp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function rp(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function pS(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function yS(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function sp(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=yS(o),p=pS(o),N=p.length,O=0;O<N;O++)c.call(void 0,p[O],f&&f[O],o)}var ap=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _S(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),N=null;if(0<=p){var O=o[f].substring(0,p);N=o[f].substring(p+1)}else O=o[f];c(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Ir(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Ir){this.h=o.h,Cl(this,o.j),this.o=o.o,this.g=o.g,Nl(this,o.s),this.l=o.l;var c=o.i,f=new Ma;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),op(this,f),this.m=o.m}else o&&(c=String(o).match(ap))?(this.h=!1,Cl(this,c[1]||"",!0),this.o=Oa(c[2]||""),this.g=Oa(c[3]||"",!0),Nl(this,c[4]),this.l=Oa(c[5]||"",!0),op(this,c[6]||"",!0),this.m=Oa(c[7]||"")):(this.h=!1,this.i=new Ma(null,this.h))}Ir.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Va(c,lp,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Va(c,lp,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Va(f,f.charAt(0)=="/"?ES:TS,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Va(f,bS)),o.join("")};function Qn(o){return new Ir(o)}function Cl(o,c,f){o.j=f?Oa(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Nl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function op(o,c,f){c instanceof Ma?(o.i=c,SS(o.i,o.h)):(f||(c=Va(c,AS)),o.i=new Ma(c,o.h))}function Nt(o,c,f){o.i.set(c,f)}function xl(o){return Nt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Oa(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Va(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,vS),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function vS(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var lp=/[#\/\?@]/g,TS=/[#\?:]/g,ES=/[#\?]/g,AS=/[#\?@]/g,bS=/#/g;function Ma(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function bi(o){o.g||(o.g=new Map,o.h=0,o.i&&_S(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=Ma.prototype,e.add=function(o,c){bi(this),this.i=null,o=as(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function up(o,c){bi(o),c=as(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function cp(o,c){return bi(o),c=as(o,c),o.g.has(c)}e.forEach=function(o,c){bi(this),this.g.forEach(function(f,p){f.forEach(function(N){o.call(c,N,p,this)},this)},this)},e.na=function(){bi(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const N=o[p];for(let O=0;O<N.length;O++)f.push(c[p])}return f},e.V=function(o){bi(this);let c=[];if(typeof o=="string")cp(this,o)&&(c=c.concat(this.g.get(as(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return bi(this),this.i=null,o=as(this,o),cp(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function hp(o,c,f){up(o,c),0<f.length&&(o.i=null,o.g.set(as(o,c),V(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const O=encodeURIComponent(String(p)),B=this.V(p);for(p=0;p<B.length;p++){var N=O;B[p]!==""&&(N+="="+encodeURIComponent(String(B[p]))),o.push(N)}}return this.i=o.join("&")};function as(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function SS(o,c){c&&!o.j&&(bi(o),o.i=null,o.g.forEach(function(f,p){var N=p.toLowerCase();p!=N&&(up(this,p),hp(this,N,f))},o)),o.j=c}function wS(o,c){const f=new xa;if(l.Image){const p=new Image;p.onload=_(Si,f,"TestLoadImage: loaded",!0,c,p),p.onerror=_(Si,f,"TestLoadImage: error",!1,c,p),p.onabort=_(Si,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=_(Si,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function RS(o,c){const f=new xa,p=new AbortController,N=setTimeout(()=>{p.abort(),Si(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(O=>{clearTimeout(N),O.ok?Si(f,"TestPingServer: ok",!0,c):Si(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Si(f,"TestPingServer: error",!1,c)})}function Si(o,c,f,p,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),p(f)}catch{}}function IS(){this.g=new uS}function CS(o,c,f){const p=f||"";try{sp(o,function(N,O){let B=N;h(N)&&(B=dh(N)),c.push(p+O+"="+encodeURIComponent(B))})}catch(N){throw c.push(p+"type="+encodeURIComponent("_badmap")),N}}function Dl(o){this.l=o.Ub||null,this.j=o.eb||!1}x(Dl,mh),Dl.prototype.g=function(){return new Ol(this.l,this.j)},Dl.prototype.i=function(o){return function(){return o}}({});function Ol(o,c){Q.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ol,Q),e=Ol.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Pa(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ka(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Pa(this)),this.g&&(this.readyState=3,Pa(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fp(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function fp(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?ka(this):Pa(this),this.readyState==3&&fp(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,ka(this))},e.Qa=function(o){this.g&&(this.response=o,ka(this))},e.ga=function(){this.g&&ka(this)};function ka(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Pa(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Pa(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function dp(o){let c="";return H(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function Sh(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=dp(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Nt(o,c,f))}function qt(o){Q.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(qt,Q);var NS=/^https?$/i,xS=["POST","PUT"];e=qt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yh.g(),this.v=this.o?qg(this.o):qg(yh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(O){mp(this,O);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var N in p)f.set(N,p[N]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const O of p.keys())f.set(O,p.get(O));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(xS,c,void 0))||p||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,B]of f)this.g.setRequestHeader(O,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yp(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){mp(this,O)}};function mp(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,gp(o),Vl(o)}function gp(o){o.A||(o.A=!0,et(o,"complete"),et(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,et(this,"complete"),et(this,"abort"),Vl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vl(this,!0)),qt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?pp(this):this.bb())},e.bb=function(){pp(this)};function pp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Yn(o)!=4||o.Z()!=2)){if(o.u&&Yn(o)==4)Vt(o.Ea,0,o);else if(et(o,"readystatechange"),Yn(o)==4){o.h=!1;try{const B=o.Z();t:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=B===0){var N=String(o.D).match(ap)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),p=!NS.test(N?N.toLowerCase():"")}f=p}if(f)et(o,"complete"),et(o,"success");else{o.m=6;try{var O=2<Yn(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",gp(o)}}finally{Vl(o)}}}}function Vl(o,c){if(o.g){yp(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||et(o,"ready");try{f.onreadystatechange=p}catch{}}}function yp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Yn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),lS(c)}};function _p(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function DS(o){const c={};o=(o.g&&2<=Yn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(v(o[p]))continue;var f=I(o[p]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=c[N]||[];c[N]=O,O.push(f)}E(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ua(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function vp(o){this.Aa=0,this.i=[],this.j=new xa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ua("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ua("baseRetryDelayMs",5e3,o),this.cb=Ua("retryDelaySeedMs",1e4,o),this.Wa=Ua("forwardChannelMaxRetries",2,o),this.wa=Ua("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new tp(o&&o.concurrentRequestLimit),this.Da=new IS,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=vp.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){Oe(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=Cp(this,null,this.W),kl(this)};function wh(o){if(Tp(o),o.G==3){var c=o.U++,f=Qn(o.I);if(Nt(f,"SID",o.K),Nt(f,"RID",c),Nt(f,"TYPE","terminate"),La(o,f),c=new Ai(o,o.j,c),c.L=2,c.v=xl(Qn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Np(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Il(c)}Ip(o)}function Ml(o){o.g&&(Ih(o),o.g.cancel(),o.g=null)}function Tp(o){Ml(o),o.u&&(l.clearTimeout(o.u),o.u=null),Pl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function kl(o){if(!ep(o.h)&&!o.s){o.s=!0;var c=o.Ga;X||vt(),$||(X(),$=!0),pt.add(c,o),o.B=0}}function OS(o,c){return np(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Na(m(o.Ga,o,c),Rp(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new Ai(this,this.j,o);let O=this.o;if(this.S&&(O?(O=y(O),S(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=Ap(this,N,c),f=Qn(this.I),Nt(f,"RID",o),Nt(f,"CVER",22),this.D&&Nt(f,"X-HTTP-Session-Id",this.D),La(this,f),O&&(this.O?c="headers="+encodeURIComponent(String(dp(O)))+"&"+c:this.m&&Sh(f,this.m,O)),bh(this.h,N),this.Ua&&Nt(f,"TYPE","init"),this.P?(Nt(f,"$req",c),Nt(f,"SID","null"),N.T=!0,vh(N,f,null)):vh(N,f,c),this.G=2}}else this.G==3&&(o?Ep(this,o):this.i.length==0||ep(this.h)||Ep(this))};function Ep(o,c){var f;c?f=c.l:f=o.U++;const p=Qn(o.I);Nt(p,"SID",o.K),Nt(p,"RID",f),Nt(p,"AID",o.T),La(o,p),o.m&&o.o&&Sh(p,o.m,o.o),f=new Ai(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Ap(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),bh(o.h,f),vh(f,p,c)}function La(o,c){o.H&&H(o.H,function(f,p){Nt(c,p,f)}),o.l&&sp({},function(f,p){Nt(c,p,f)})}function Ap(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let O=-1;for(;;){const B=["count="+f];O==-1?0<f?(O=N[0].g,B.push("ofs="+O)):O=0:B.push("ofs="+O);let wt=!0;for(let me=0;me<f;me++){let gt=N[me].g;const be=N[me].map;if(gt-=O,0>gt)O=Math.max(0,N[me].g-100),wt=!1;else try{CS(be,B,"req"+gt+"_")}catch{p&&p(be)}}if(wt){p=B.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function bp(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;X||vt(),$||(X(),$=!0),pt.add(c,o),o.v=0}}function Rh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Na(m(o.Fa,o),Rp(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Sp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Na(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),Ml(this),Sp(this))};function Ih(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Sp(o){o.g=new Ai(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Qn(o.qa);Nt(c,"RID","rpc"),Nt(c,"SID",o.K),Nt(c,"AID",o.T),Nt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Nt(c,"TO",o.ja),Nt(c,"TYPE","xmlhttp"),La(o,c),o.m&&o.o&&Sh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=xl(Qn(c)),f.m=null,f.P=!0,Zg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Ml(this),Rh(this),Oe(19))};function Pl(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function wp(o,c){var f=null;if(o.g==c){Pl(o),Ih(o),o.g=null;var p=2}else if(Ah(o.h,c))f=c.D,ip(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;p=Sl(),et(p,new Yg(p,f)),kl(o)}else bp(o);else if(N=c.s,N==3||N==0&&0<c.X||!(p==1&&OS(o,c)||p==2&&Rh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:Cr(o,5);break;case 4:Cr(o,10);break;case 3:Cr(o,6);break;default:Cr(o,2)}}}function Rp(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function Cr(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const N=!p;p=new Ir(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Cl(p,"https"),xl(p),N?wS(p.toString(),f):RS(p.toString(),f)}else Oe(2);o.G=0,o.l&&o.l.sa(c),Ip(o),Tp(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Ip(o){if(o.G=0,o.ka=[],o.l){const c=rp(o.h);(c.length!=0||o.i.length!=0)&&(M(o.ka,c),M(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Cp(o,c,f){var p=f instanceof Ir?Qn(f):new Ir(f);if(p.g!="")c&&(p.g=c+"."+p.g),Nl(p,p.s);else{var N=l.location;p=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var O=new Ir(null);p&&Cl(O,p),c&&(O.g=c),N&&Nl(O,N),f&&(O.l=f),p=O}return f=o.D,c=o.ya,f&&c&&Nt(p,f,c),Nt(p,"VER",o.la),La(o,p),p}function Np(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new qt(new Dl({eb:f})):new qt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function xp(){}e=xp.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ul(){}Ul.prototype.g=function(o,c){return new Qe(o,c)};function Qe(o,c){Q.call(this),this.g=new vp(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new os(this)}x(Qe,Q),Qe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qe.prototype.close=function(){wh(this.g)},Qe.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=dh(o),o=f);c.i.push(new gS(c.Ya++,o)),c.G==3&&kl(c)},Qe.prototype.N=function(){this.g.l=null,delete this.j,wh(this.g),delete this.g,Qe.aa.N.call(this)};function Dp(o){gh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}x(Dp,gh);function Op(){ph.call(this),this.status=1}x(Op,ph);function os(o){this.g=o}x(os,xp),os.prototype.ua=function(){et(this.g,"a")},os.prototype.ta=function(o){et(this.g,new Dp(o))},os.prototype.sa=function(o){et(this.g,new Op)},os.prototype.ra=function(){et(this.g,"b")},Ul.prototype.createWebChannel=Ul.prototype.g,Qe.prototype.send=Qe.prototype.o,Qe.prototype.open=Qe.prototype.m,Qe.prototype.close=Qe.prototype.close,$0=function(){return new Ul},X0=function(){return Sl()},K0=wr,bd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wl.NO_ERROR=0,wl.TIMEOUT=8,wl.HTTP_ERROR=6,vu=wl,Kg.COMPLETE="complete",Y0=Kg,Hg.EventType=Ia,Ia.OPEN="a",Ia.CLOSE="b",Ia.ERROR="c",Ia.MESSAGE="d",Q.prototype.listen=Q.prototype.K,Za=Hg,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,Q0=qt}).apply(typeof tu<"u"?tu:typeof self<"u"?self:typeof window<"u"?window:{});const p_="@firebase/firestore",y_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ie.UNAUTHENTICATED=new Ie(null),Ie.GOOGLE_CREDENTIALS=new Ie("google-credentials-uid"),Ie.FIRST_PARTY=new Ie("first-party-uid"),Ie.MOCK_USER=new Ie("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new Gm("@firebase/firestore");function gs(){return Kr.logLevel}function F(e,...t){if(Kr.logLevel<=ut.DEBUG){const n=t.map(Km);Kr.debug(`Firestore (${Ta}): ${e}`,...n)}}function di(e,...t){if(Kr.logLevel<=ut.ERROR){const n=t.map(Km);Kr.error(`Firestore (${Ta}): ${e}`,...n)}}function sa(e,...t){if(Kr.logLevel<=ut.WARN){const n=t.map(Km);Kr.warn(`Firestore (${Ta}): ${e}`,...n)}}function Km(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,Z0(e,i,n)}function Z0(e,t,n){let i=`FIRESTORE (${Ta}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw di(i),new Error(i)}function mt(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||Z0(t,r,i)}function tt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends vi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class mI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ie.UNAUTHENTICATED))}shutdown(){}}class gI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pI{constructor(t){this.t=t,this.currentUser=Ie.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){mt(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new oi,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new oi)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(mt(typeof i.accessToken=="string",31837,{l:i}),new W0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return mt(t===null||typeof t=="string",2055,{h:t}),new Ie(t)}}class yI{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Ie.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _I{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new yI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Ie.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class __{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){mt(this.o===void 0,3512);const i=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new __(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(mt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new __(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=TI(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function ct(e,t){return e<t?-1:e>t?1:0}function Sd(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return pf(r)===pf(s)?ct(r,s):pf(r)?1:-1}return ct(e.length,t.length)}const EI=55296,AI=57343;function pf(e){const t=e.charCodeAt(0);return t>=EI&&t<=AI}function aa(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="__name__";class xn{constructor(t,n,i){n===void 0?n=0:n>t.length&&K(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&K(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return xn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof xn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=xn.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return ct(t.length,n.length)}static compareSegments(t,n){const i=xn.isNumericId(t),r=xn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?xn.extractNumericId(t).compare(xn.extractNumericId(n)):Sd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return er.fromString(t.substring(4,t.length-2))}}class St extends xn{construct(t,n,i){return new St(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new q(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new St(n)}static emptyPath(){return new St([])}}const bI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _e extends xn{construct(t,n,i){return new _e(t,n,i)}static isValidIdentifier(t){return bI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v_}static keyField(){return new _e([v_])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new q(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new q(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new q(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new _e(n)}static emptyPath(){return new _e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.path=t}static fromPath(t){return new Y(St.fromString(t))}static fromName(t){return new Y(St.fromString(t).popFirst(5))}static empty(){return new Y(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&St.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return St.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Y(new St(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(e,t,n){if(!n)throw new q(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function SI(e,t,n,i){if(t===!0&&i===!0)throw new q(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function T_(e){if(!Y.isDocumentKey(e))throw new q(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function E_(e){if(Y.isDocumentKey(e))throw new q(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function tA(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Gc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":K(12329,{type:typeof e})}function rn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new q(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gc(e);throw new q(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(e,t){const n={typeString:e};return t&&(n.value=t),n}function fl(e,t){if(!tA(e))throw new q(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new q(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=-62135596800,b_=1e6;class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(t){return xt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*b_);return new xt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new q(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<A_)throw new q(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new q(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/b_}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(fl(t,xt._jsonSchema))return new xt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-A_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xt._jsonSchemaVersion="firestore/timestamp/1.0",xt._jsonSchema={type:Zt("string",xt._jsonSchemaVersion),seconds:Zt("number"),nanoseconds:Zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(t){return new Z(t)}static min(){return new Z(new xt(0,0))}static max(){return new Z(new xt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=-1;function wI(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(i===1e9?new xt(n+1,0):new xt(n,i));return new lr(r,Y.empty(),t)}function RI(e){return new lr(e.readTime,e.key,jo)}class lr{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new lr(Z.min(),Y.empty(),jo)}static max(){return new lr(Z.max(),Y.empty(),jo)}}function II(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Y.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==CI)throw e;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(r=>r?P.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new P((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new P((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function xI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Aa(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Qc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=-1;function dl(e){return e==null}function lc(e){return e===0&&1/e==-1/0}function DI(e){return typeof e=="number"&&Number.isInteger(e)&&!lc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="";function OI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=S_(t)),t=VI(e.get(n),t);return S_(t)}function VI(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case eA:n+="";break;default:n+=s}}return n}function S_(e){return e+eA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function yr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function nA(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(t,n){this.comparator=t,this.root=n||pe.EMPTY}insert(t,n){return new jt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,pe.BLACK,null,null))}remove(t){return new jt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,pe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new eu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new eu(this.root,t,this.comparator,!1)}getReverseIterator(){return new eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new eu(this.root,t,this.comparator,!0)}}class eu{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class pe{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??pe.RED,this.left=r??pe.EMPTY,this.right=s??pe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new pe(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return pe.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,pe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,pe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw K(27949);return t+(this.isRed()?0:1)}}pe.EMPTY=null,pe.RED=!0,pe.BLACK=!1;pe.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new pe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t){this.comparator=t,this.data=new jt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new R_(this.data.getIterator())}getIteratorFrom(t){return new R_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof se)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new se(this.comparator);return n.data=t,n}}class R_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.fields=t,t.sort(_e.comparator)}static empty(){return new We([])}unionWith(t){let n=new se(_e.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new We(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return aa(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iA("Invalid base64 string: "+s):s}}(t);return new Ee(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new Ee(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ee.EMPTY_BYTE_STRING=new Ee("");const MI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(e){if(mt(!!e,39018),typeof e=="string"){let t=0;const n=MI.exec(e);if(mt(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Yt(e.seconds),nanos:Yt(e.nanos)}}function Yt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function cr(e){return typeof e=="string"?Ee.fromBase64String(e):Ee.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="server_timestamp",sA="__type__",aA="__previous_value__",oA="__local_write_time__";function Zm(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[sA])==null?void 0:i.stringValue)===rA}function Yc(e){const t=e.mapValue.fields[aA];return Zm(t)?Yc(t):t}function zo(e){const t=ur(e.mapValue.fields[oA].timestampValue);return new xt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const uc="(default)";class Bo{constructor(t,n){this.projectId=t,this.database=n||uc}static empty(){return new Bo("","")}get isDefaultDatabase(){return this.database===uc}isEqual(t){return t instanceof Bo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="__type__",PI="__max__",nu={mapValue:{}},uA="__vector__",cc="value";function hr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zm(e)?4:LI(e)?9007199254740991:UI(e)?10:11:K(28295,{value:e})}function Bn(e,t){if(e===t)return!0;const n=hr(e);if(n!==hr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zo(e).isEqual(zo(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=ur(r.timestampValue),l=ur(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return cr(r.bytesValue).isEqual(cr(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Yt(r.geoPointValue.latitude)===Yt(s.geoPointValue.latitude)&&Yt(r.geoPointValue.longitude)===Yt(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Yt(r.integerValue)===Yt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Yt(r.doubleValue),l=Yt(s.doubleValue);return a===l?lc(a)===lc(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return aa(e.arrayValue.values||[],t.arrayValue.values||[],Bn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(w_(a)!==w_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Bn(a[u],l[u])))return!1;return!0}(e,t);default:return K(52216,{left:e})}}function qo(e,t){return(e.values||[]).find(n=>Bn(n,t))!==void 0}function oa(e,t){if(e===t)return 0;const n=hr(e),i=hr(t);if(n!==i)return ct(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=Yt(s.integerValue||s.doubleValue),u=Yt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return I_(e.timestampValue,t.timestampValue);case 4:return I_(zo(e),zo(t));case 5:return Sd(e.stringValue,t.stringValue);case 6:return function(s,a){const l=cr(s),u=cr(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=ct(l[h],u[h]);if(d!==0)return d}return ct(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=ct(Yt(s.latitude),Yt(a.latitude));return l!==0?l:ct(Yt(s.longitude),Yt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return C_(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,_,x,V;const l=s.fields||{},u=a.fields||{},h=(m=l[cc])==null?void 0:m.arrayValue,d=(_=u[cc])==null?void 0:_.arrayValue,g=ct(((x=h==null?void 0:h.values)==null?void 0:x.length)||0,((V=d==null?void 0:d.values)==null?void 0:V.length)||0);return g!==0?g:C_(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===nu.mapValue&&a===nu.mapValue)return 0;if(s===nu.mapValue)return 1;if(a===nu.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=Sd(u[g],d[g]);if(m!==0)return m;const _=oa(l[u[g]],h[d[g]]);if(_!==0)return _}return ct(u.length,d.length)}(e.mapValue,t.mapValue);default:throw K(23264,{he:n})}}function I_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=ur(e),i=ur(t),r=ct(n.seconds,i.seconds);return r!==0?r:ct(n.nanos,i.nanos)}function C_(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=oa(n[r],i[r]);if(s)return s}return ct(n.length,i.length)}function la(e){return wd(e)}function wd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=ur(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return cr(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Y.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=wd(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${wd(n.fields[a])}`;return r+"}"}(e.mapValue):K(61005,{value:e})}function Tu(e){switch(hr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Yc(e);return t?16+Tu(t):16;case 5:return 2*e.stringValue.length;case 6:return cr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Tu(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return yr(i.fields,(s,a)=>{r+=s.length+Tu(a)}),r}(e.mapValue);default:throw K(13486,{value:e})}}function N_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Rd(e){return!!e&&"integerValue"in e}function Wm(e){return!!e&&"arrayValue"in e}function x_(e){return!!e&&"nullValue"in e}function D_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Eu(e){return!!e&&"mapValue"in e}function UI(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[lA])==null?void 0:i.stringValue)===uA}function _o(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return yr(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=_o(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=_o(e.arrayValue.values[n]);return t}return{...e}}function LI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===PI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.value=t}static empty(){return new Me({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Eu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=_o(n)}setAll(t){let n=_e.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=_o(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());Eu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Bn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];Eu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){yr(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Me(_o(this.value))}}function cA(e){const t=[];return yr(e.fields,(n,i)=>{const r=new _e([n]);if(Eu(i)){const s=cA(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new We(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ce(t,0,Z.min(),Z.min(),Z.min(),Me.empty(),0)}static newFoundDocument(t,n,i,r){return new ce(t,1,n,Z.min(),i,r,0)}static newNoDocument(t,n){return new ce(t,2,n,Z.min(),Z.min(),Me.empty(),0)}static newUnknownDocument(t,n){return new ce(t,3,n,Z.min(),Z.min(),Me.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Me.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Me.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ce&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ce(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,n){this.position=t,this.inclusive=n}}function O_(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=Y.comparator(Y.fromName(a.referenceValue),n.key):i=oa(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function V_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Bn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(t,n="asc"){this.field=t,this.dir=n}}function jI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{}class $t extends hA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new BI(t,n,i):n==="array-contains"?new FI(t,i):n==="in"?new GI(t,i):n==="not-in"?new QI(t,i):n==="array-contains-any"?new YI(t,i):new $t(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new qI(t,i):new HI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(oa(n,this.value)):n!==null&&hr(this.value)===hr(n)&&this.matchesComparison(oa(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class In extends hA{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new In(t,n)}matches(t){return fA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fA(e){return e.op==="and"}function dA(e){return zI(e)&&fA(e)}function zI(e){for(const t of e.filters)if(t instanceof In)return!1;return!0}function Id(e){if(e instanceof $t)return e.field.canonicalString()+e.op.toString()+la(e.value);if(dA(e))return e.filters.map(t=>Id(t)).join(",");{const t=e.filters.map(n=>Id(n)).join(",");return`${e.op}(${t})`}}function mA(e,t){return e instanceof $t?function(i,r){return r instanceof $t&&i.op===r.op&&i.field.isEqual(r.field)&&Bn(i.value,r.value)}(e,t):e instanceof In?function(i,r){return r instanceof In&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&mA(a,r.filters[l]),!0):!1}(e,t):void K(19439)}function gA(e){return e instanceof $t?function(n){return`${n.field.canonicalString()} ${n.op} ${la(n.value)}`}(e):e instanceof In?function(n){return n.op.toString()+" {"+n.getFilters().map(gA).join(" ,")+"}"}(e):"Filter"}class BI extends $t{constructor(t,n,i){super(t,n,i),this.key=Y.fromName(i.referenceValue)}matches(t){const n=Y.comparator(t.key,this.key);return this.matchesComparison(n)}}class qI extends $t{constructor(t,n){super(t,"in",n),this.keys=pA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class HI extends $t{constructor(t,n){super(t,"not-in",n),this.keys=pA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function pA(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>Y.fromName(i.referenceValue))}class FI extends $t{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Wm(n)&&qo(n.arrayValue,this.value)}}class GI extends $t{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&qo(this.value.arrayValue,n)}}class QI extends $t{constructor(t,n){super(t,"not-in",n)}matches(t){if(qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qo(this.value.arrayValue,n)}}class YI extends $t{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Wm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>qo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function M_(e,t=null,n=[],i=[],r=null,s=null,a=null){return new KI(e,t,n,i,r,s,a)}function Jm(e){const t=tt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Id(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),dl(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>la(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>la(i)).join(",")),t.Te=n}return t.Te}function tg(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!jI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!mA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!V_(e.startAt,t.startAt)&&V_(e.endAt,t.endAt)}function Cd(e){return Y.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XI(e,t,n,i,r,s,a,l){return new ba(e,t,n,i,r,s,a,l)}function Kc(e){return new ba(e)}function k_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function yA(e){return e.collectionGroup!==null}function vo(e){const t=tt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new se(_e.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Ho(s,i))}),n.has(_e.keyField().canonicalString())||t.Ie.push(new Ho(_e.keyField(),i))}return t.Ie}function Pn(e){const t=tt(e);return t.Ee||(t.Ee=$I(t,vo(e))),t.Ee}function $I(e,t){if(e.limitType==="F")return M_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Ho(r.field,s)});const n=e.endAt?new hc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new hc(e.startAt.position,e.startAt.inclusive):null;return M_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Nd(e,t){const n=e.filters.concat([t]);return new ba(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function xd(e,t,n){return new ba(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Xc(e,t){return tg(Pn(e),Pn(t))&&e.limitType===t.limitType}function _A(e){return`${Jm(Pn(e))}|lt:${e.limitType}`}function ps(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>gA(r)).join(", ")}]`),dl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>la(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>la(r)).join(",")),`Target(${i})`}(Pn(e))}; limitType=${e.limitType})`}function $c(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Y.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of vo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=O_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,vo(i),r)||i.endAt&&!function(a,l,u){const h=O_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,vo(i),r))}(e,t)}function ZI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function vA(e){return(t,n)=>{let i=!1;for(const r of vo(e)){const s=WI(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function WI(e,t,n){const i=e.field.isKeyField()?Y.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?oa(u,h):K(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return K(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){yr(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return nA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=new jt(Y.comparator);function mi(){return JI}const TA=new jt(Y.comparator);function Wa(...e){let t=TA;for(const n of e)t=t.insert(n.key,n);return t}function EA(e){let t=TA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Mr(){return To()}function AA(){return To()}function To(){return new ns(e=>e.toString(),(e,t)=>e.isEqual(t))}const tC=new jt(Y.comparator),eC=new se(Y.comparator);function ht(...e){let t=eC;for(const n of e)t=t.add(n);return t}const nC=new se(ct);function iC(){return nC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lc(t)?"-0":t}}function bA(e){return{integerValue:""+e}}function rC(e,t){return DI(t)?bA(t):eg(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this._=void 0}}function sC(e,t,n){return e instanceof Fo?function(r,s){const a={fields:{[sA]:{stringValue:rA},[oA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Zm(s)&&(s=Yc(s)),s&&(a.fields[aA]=s),{mapValue:a}}(n,t):e instanceof Go?wA(e,t):e instanceof Qo?RA(e,t):function(r,s){const a=SA(r,s),l=P_(a)+P_(r.Ae);return Rd(a)&&Rd(r.Ae)?bA(l):eg(r.serializer,l)}(e,t)}function aC(e,t,n){return e instanceof Go?wA(e,t):e instanceof Qo?RA(e,t):n}function SA(e,t){return e instanceof fc?function(i){return Rd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class Fo extends Zc{}class Go extends Zc{constructor(t){super(),this.elements=t}}function wA(e,t){const n=IA(t);for(const i of e.elements)n.some(r=>Bn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Qo extends Zc{constructor(t){super(),this.elements=t}}function RA(e,t){let n=IA(t);for(const i of e.elements)n=n.filter(r=>!Bn(r,i));return{arrayValue:{values:n}}}class fc extends Zc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function P_(e){return Yt(e.integerValue||e.doubleValue)}function IA(e){return Wm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t,n){this.field=t,this.transform=n}}function lC(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Go&&r instanceof Go||i instanceof Qo&&r instanceof Qo?aa(i.elements,r.elements,Bn):i instanceof fc&&r instanceof fc?Bn(i.Ae,r.Ae):i instanceof Fo&&r instanceof Fo}(e.transform,t.transform)}class uC{constructor(t,n){this.version=t,this.transformResults=n}}class ve{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ve}static exists(t){return new ve(void 0,t)}static updateTime(t){return new ve(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Au(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Wc{}function CA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Jc(e.key,ve.none()):new ml(e.key,e.data,ve.none());{const n=e.data,i=Me.empty();let r=new se(_e.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new _r(e.key,i,new We(r.toArray()),ve.none())}}function cC(e,t,n){e instanceof ml?function(r,s,a){const l=r.value.clone(),u=L_(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof _r?function(r,s,a){if(!Au(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=L_(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(NA(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function Eo(e,t,n,i){return e instanceof ml?function(s,a,l,u){if(!Au(s.precondition,a))return l;const h=s.value.clone(),d=j_(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof _r?function(s,a,l,u){if(!Au(s.precondition,a))return l;const h=j_(s.fieldTransforms,u,a),d=a.data;return d.setAll(NA(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(s,a,l){return Au(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function hC(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=SA(i.transform,r||null);s!=null&&(n===null&&(n=Me.empty()),n.set(i.field,s))}return n||null}function U_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&aa(i,r,(s,a)=>lC(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ml extends Wc{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class _r extends Wc{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function NA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function L_(e,t,n){const i=new Map;mt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,aC(a,l,n[r]))}return i}function j_(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,sC(s,a,t))}return i}class Jc extends Wc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xA extends Wc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&cC(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=Eo(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=Eo(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=AA();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=CA(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ht())}isEqual(t){return this.batchId===t.batchId&&aa(this.mutations,t.mutations,(n,i)=>U_(n,i))&&aa(this.baseMutations,t.baseMutations,(n,i)=>U_(n,i))}}class ng{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){mt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return tC}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new ng(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,ft;function DA(e){switch(e){case k.OK:return K(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return K(15467,{code:e})}}function OA(e){if(e===void 0)return di("GRPC error has no .code"),k.UNKNOWN;switch(e){case Kt.OK:return k.OK;case Kt.CANCELLED:return k.CANCELLED;case Kt.UNKNOWN:return k.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return k.INTERNAL;case Kt.UNAVAILABLE:return k.UNAVAILABLE;case Kt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Kt.NOT_FOUND:return k.NOT_FOUND;case Kt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Kt.ABORTED:return k.ABORTED;case Kt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Kt.DATA_LOSS:return k.DATA_LOSS;default:return K(39323,{code:e})}}(ft=Kt||(Kt={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new er([4294967295,4294967295],0);function z_(e){const t=gC().encode(e),n=new G0;return n.update(t),new Uint8Array(n.digest())}function B_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new er([n,i],0),new er([r,s],0)]}class ig{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ja(`Invalid padding: ${n}`);if(i<0)throw new Ja(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ja(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Ja(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=er.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(er.fromNumber(i)));return r.compare(pC)===1&&(r=new er([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=z_(t),[i,r]=B_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new ig(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=z_(t),[i,r]=B_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,gl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new th(Z.min(),r,new jt(ct),mi(),ht())}}class gl{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new gl(i,n,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class VA{constructor(t,n){this.targetId=t,this.Ce=n}}class MA{constructor(t,n,i=Ee.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class q_{constructor(){this.ve=0,this.Fe=H_(),this.Me=Ee.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ht(),n=ht(),i=ht();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:K(38017,{changeType:s})}}),new gl(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=H_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yC{constructor(t){this.Ge=t,this.ze=new Map,this.je=mi(),this.Je=iu(),this.He=iu(),this.Ye=new jt(ct)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:K(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(Cd(s))if(i===0){const a=new Y(s.path);this.et(n,a,ce.newNoDocument(a,Z.min()))}else mt(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=cr(i).toUint8Array()}catch(u){if(u instanceof iA)return sa("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new ig(a,r,s)}catch(u){return sa(u instanceof Ja?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&Cd(l.target)){const u=new Y(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,ce.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ht();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new th(t,n,this.Ye,this.je,i);return this.je=mi(),this.Je=iu(),this.He=iu(),this.Ye=new jt(ct),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new q_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new se(ct),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new se(ct),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||F("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new q_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function iu(){return new jt(Y.comparator)}function H_(){return new jt(Y.comparator)}const _C={asc:"ASCENDING",desc:"DESCENDING"},vC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TC={and:"AND",or:"OR"};class EC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Dd(e,t){return e.useProto3Json||dl(t)?t:{value:t}}function dc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function AC(e,t){return dc(e,t.toTimestamp())}function sn(e){return mt(!!e,49232),Z.fromTimestamp(function(n){const i=ur(n);return new xt(i.seconds,i.nanos)}(e))}function rg(e,t){return Od(e,t).canonicalString()}function Od(e,t){const n=function(r){return new St(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function PA(e){const t=St.fromString(e);return mt(qA(t),10190,{key:t.toString()}),t}function mc(e,t){return rg(e.databaseId,t.path)}function Ao(e,t){const n=PA(t);if(n.get(1)!==e.databaseId.projectId)throw new q(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new q(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Y(LA(n))}function UA(e,t){return rg(e.databaseId,t)}function bC(e){const t=PA(e);return t.length===4?St.emptyPath():LA(t)}function Vd(e){return new St(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function LA(e){return mt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function F_(e,t,n){return{name:mc(e,t),fields:n.value.mapValue.fields}}function SC(e,t){return"found"in t?function(i,r){mt(!!r.found,43571),r.found.name,r.found.updateTime;const s=Ao(i,r.found.name),a=sn(r.found.updateTime),l=r.found.createTime?sn(r.found.createTime):Z.min(),u=new Me({mapValue:{fields:r.found.fields}});return ce.newFoundDocument(s,a,l,u)}(e,t):"missing"in t?function(i,r){mt(!!r.missing,3894),mt(!!r.readTime,22933);const s=Ao(i,r.missing),a=sn(r.readTime);return ce.newNoDocument(s,a)}(e,t):K(7234,{result:t})}function wC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:K(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(mt(d===void 0||typeof d=="string",58123),Ee.fromBase64String(d||"")):(mt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ee.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?k.UNKNOWN:OA(h.code);return new q(d,h.message||"")}(a);n=new MA(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ao(e,i.document.name),s=sn(i.document.updateTime),a=i.document.createTime?sn(i.document.createTime):Z.min(),l=new Me({mapValue:{fields:i.document.fields}}),u=ce.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new bu(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Ao(e,i.document),s=i.readTime?sn(i.readTime):Z.min(),a=ce.newNoDocument(r,s),l=i.removedTargetIds||[];n=new bu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Ao(e,i.document),s=i.removedTargetIds||[];n=new bu([],s,r,null)}else{if(!("filter"in t))return K(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new mC(r,s),l=i.targetId;n=new VA(l,a)}}return n}function jA(e,t){let n;if(t instanceof ml)n={update:F_(e,t.key,t.value)};else if(t instanceof Jc)n={delete:mc(e,t.key)};else if(t instanceof _r)n={update:F_(e,t.key,t.data),updateMask:MC(t.fieldMask)};else{if(!(t instanceof xA))return K(16599,{Vt:t.type});n={verify:mc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Fo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Go)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Qo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof fc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw K(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:AC(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K(27497)}(e,t.precondition)),n}function RC(e,t){return e&&e.length>0?(mt(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?sn(r.updateTime):sn(s);return a.isEqual(Z.min())&&(a=sn(s)),new uC(a,r.transformResults||[])}(n,t))):[]}function IC(e,t){return{documents:[UA(e,t.path)]}}function CC(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=UA(e,r);const s=function(h){if(h.length!==0)return BA(In.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:ys(m.field),direction:DC(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Dd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function NC(e){let t=bC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){mt(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(g){const m=zA(g);return m instanceof In&&dA(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(x){return new Ho(_s(x.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,dl(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,_=g.values||[];return new hc(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,_=g.values||[];return new hc(_,m)}(n.endAt)),XI(t,r,a,s,l,"F",u,h)}function xC(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function zA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=_s(n.unaryFilter.field);return $t.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=_s(n.unaryFilter.field);return $t.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=_s(n.unaryFilter.field);return $t.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=_s(n.unaryFilter.field);return $t.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(e):e.fieldFilter!==void 0?function(n){return $t.create(_s(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return In.create(n.compositeFilter.filters.map(i=>zA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(e):K(30097,{filter:e})}function DC(e){return _C[e]}function OC(e){return vC[e]}function VC(e){return TC[e]}function ys(e){return{fieldPath:e.canonicalString()}}function _s(e){return _e.fromServerFormat(e.fieldPath)}function BA(e){return e instanceof $t?function(n){if(n.op==="=="){if(D_(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NAN"}};if(x_(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(D_(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NAN"}};if(x_(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ys(n.field),op:OC(n.op),value:n.value}}}(e):e instanceof In?function(n){const i=n.getFilters().map(r=>BA(r));return i.length===1?i[0]:{compositeFilter:{op:VC(n.op),filters:i}}}(e):K(54877,{filter:e})}function MC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function qA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t,n,i,r,s=Z.min(),a=Z.min(),l=Ee.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Hi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t){this.yt=t}}function PC(e){const t=NC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?xd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.Cn=new LC}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(lr.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(lr.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class LC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new se(St.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new se(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HA=41943040;class He{static withCacheSize(t){return new He(t,He.DEFAULT_COLLECTION_PERCENTILE,He.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */He.DEFAULT_COLLECTION_PERCENTILE=10,He.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,He.DEFAULT=new He(HA,He.DEFAULT_COLLECTION_PERCENTILE,He.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),He.DISABLED=new He(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ua(0)}static cr(){return new ua(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="LruGarbageCollector",jC=1048576;function Y_([e,t],[n,i]){const r=ct(e,n);return r===0?ct(t,i):r}class zC{constructor(t){this.Ir=t,this.buffer=new se(Y_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Y_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){F(Q_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Aa(n)?F(Q_,"Ignoring IndexedDB error during garbage collection: ",n):await Ea(n)}await this.Vr(3e5)})}}class qC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(Qc.ce);const i=new zC(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(G_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),G_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(t,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),gs()<=ut.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function HC(e,t){return new qC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.changes=new ns(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ce.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&Eo(i.mutation,r,We.empty(),xt.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ht()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ht()){const r=Mr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=Wa();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=Mr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ht()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=mi();const a=To(),l=function(){return To()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof _r)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),Eo(d.mutation,h,d.mutation.getFieldMask(),xt.now())):a.set(h.key,We.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new GC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=To();let r=new jt((a,l)=>a-l),s=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||We.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(r.get(l.batchId)||ht()).add(u);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=AA();d.forEach(m=>{if(!s.has(m)){const _=CA(n.get(m),i.get(m));_!==null&&g.set(m,_),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return Y.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):yA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):P.resolve(Mr());let l=jo,u=s;return a.next(h=>P.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,ht())).next(d=>({batchId:l,changes:EA(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Y(n)).next(i=>{let r=Wa();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=Wa();return this.indexManager.getCollectionParents(t,s).next(l=>P.forEach(l,u=>{const h=function(g,m){return new ba(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,ce.newInvalidDocument(d)))});let l=Wa();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&Eo(d.mutation,h,We.empty(),xt.now()),$c(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:sn(r.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:PC(r.bundledQuery),readTime:sn(r.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.overlays=new jt(Y.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Mr();return P.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const r=Mr(),s=n.length+1,a=new Y(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return P.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new jt((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=Mr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Mr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return P.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new dC(n,i));let s=this.qr.get(n);s===void 0&&(s=ht(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.sessionToken=Ee.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(){this.Qr=new se(oe.$r),this.Ur=new se(oe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new oe(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new oe(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new Y(new St([])),i=new oe(n,t),r=new oe(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Y(new St([])),i=new oe(n,t),r=new oe(n,t+1);let s=ht();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new oe(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class oe{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Y.comparator(t.key,n.key)||ct(t.Yr,n.Yr)}static Kr(t,n){return ct(t.Yr,n.Yr)||Y.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new se(oe.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new fC(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new oe(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?$m:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new oe(n,0),r=new oe(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new se(ct);return n.forEach(r=>{const s=new oe(r,0),a=new oe(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;Y.isDocumentKey(s)||(s=s.child(""));const a=new oe(new Y(s),0);let l=new se(ct);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){mt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,r=>{const s=new oe(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new oe(n,0),r=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(t){this.ri=t,this.docs=function(){return new jt(Y.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():ce.newInvalidDocument(n))}getEntries(t,n){let i=mi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ce.newInvalidDocument(r))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=mi();const a=n.path,l=new Y(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||II(RI(d),i)<=0||(r.has(d.key)||$c(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(t,n,i,r){K(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new WC(this)}getSize(t){return P.resolve(this.size)}}class WC extends FC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t){this.persistence=t,this.si=new ns(n=>Jm(n),tg),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new sg,this.targetCount=0,this.ai=ua.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new ua(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),P.waitFor(s).next(()=>r)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(t,n){this.ui={},this.overlays={},this.ci=new Qc(0),this.li=!1,this.li=!0,this.hi=new XC,this.referenceDelegate=t(this),this.Pi=new JC(this),this.indexManager=new UC,this.remoteDocumentCache=function(r){return new ZC(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new kC(n),this.Ii=new YC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new KC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new $C(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){F("MemoryPersistence","Starting transaction:",t);const r=new tN(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class tN extends NI{constructor(t){super(),this.currentSequenceNumber=t}}class ag{constructor(t){this.persistence=t,this.Ri=new sg,this.Vi=null}static mi(t){return new ag(t)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const r=Y.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,Z.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class gc{constructor(t,n){this.persistence=t,this.pi=new ns(i=>OI(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=HC(this,n)}static mi(t,n){return new gc(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?P.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,Z.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Tu(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return P.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=ht(),r=ht();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new og(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return KR()?8:xI(xe())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new eN;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(gs()<=ut.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",ps(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(gs()<=ut.DEBUG&&F("QueryEngine","Query:",ps(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(gs()<=ut.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",ps(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Pn(n))):P.resolve())}ys(t,n){if(k_(n))return P.resolve(null);let i=Pn(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=xd(n,null,"F"),i=Pn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=ht(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,xd(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return k_(n)||r.isEqual(Z.min())?P.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?P.resolve(null):(gs()<=ut.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ps(n)),this.vs(t,a,n,wI(r,jo)).next(l=>l))})}Ds(t,n){let i=new se(vA(t));return n.forEach((r,s)=>{$c(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return gs()<=ut.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",ps(n)),this.ps.getDocumentsMatchingQuery(t,n,lr.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="LocalStore",iN=3e8;class rN{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new jt(ct),this.xs=new ns(s=>Jm(s),tg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new QC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function sN(e,t,n,i){return new rN(e,t,n,i)}async function GA(e,t){const n=tt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=ht();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function aN(e,t){const n=tt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let _=P.resolve();return m.forEach(x=>{_=_.next(()=>d.getEntry(u,x)).next(V=>{const M=h.docVersions.get(x);mt(M!==null,48541),V.version.compareTo(M)<0&&(g.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ht();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function QA(e){const t=tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function oN(e,t){const n=tt(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=r.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,g)));let _=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(Ee.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(g,_),function(V,M,w){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=iN?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(s,_))});let u=mi(),h=ht();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(lN(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual(Z.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(g=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function lN(e,t,n){let i=ht(),r=ht();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=mi();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):F(lg,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function uN(e,t){const n=tt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=$m),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function cN(e,t){const n=tt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,P.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Hi(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Md(e,t,n){const i=tt(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Aa(a))throw a;F(lg,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function K_(e,t,n){const i=tt(e);let r=Z.min(),s=ht();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=tt(u),m=g.xs.get(d);return m!==void 0?P.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,Pn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:Z.min(),n?s:ht())).next(l=>(hN(i,ZI(t),l),{documents:l,Qs:s})))}function hN(e,t,n){let i=e.Os.get(t)||Z.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class X_{constructor(){this.activeTargetIds=iC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fN{constructor(){this.Mo=new X_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new X_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="ConnectivityMonitor";class Z_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F($_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){F($_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru=null;function kd(){return ru===null?ru=function(){return 268435456+Math.round(2147483648*Math.random())}():ru++,"0x"+ru.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="RestConnection",mN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===uc?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=kd(),l=this.zo(t,n.toUriEncodedString());F(yf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=_a(h);return this.Jo(t,l,u,i,d).then(g=>(F(yf,`Received RPC '${t}' ${a}: `,g),g),g=>{throw sa(yf,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ta}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=mN[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we="WebChannelConnection";class yN extends gN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=kd();return new Promise((l,u)=>{const h=new Q0;h.setWithCredentials(!0),h.listenOnce(Y0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case vu.NO_ERROR:const g=h.getResponseJson();F(we,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case vu.TIMEOUT:F(we,`RPC '${t}' ${a} timed out`),u(new q(k.DEADLINE_EXCEEDED,"Request time out"));break;case vu.HTTP_ERROR:const m=h.getStatus();if(F(we,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const x=_==null?void 0:_.error;if(x&&x.status&&x.message){const V=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(v)>=0?v:k.UNKNOWN}(x.status);u(new q(V,x.message))}else u(new q(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new q(k.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{F(we,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);F(we,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=kd(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=$0(),l=X0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");F(we,`Creating RPC '${t}' stream ${r}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,_=!1;const x=new pN({Yo:M=>{_?F(we,`Not sending because RPC '${t}' stream ${r} is closed:`,M):(m||(F(we,`Opening RPC '${t}' stream ${r} transport.`),g.open(),m=!0),F(we,`RPC '${t}' stream ${r} sending:`,M),g.send(M))},Zo:()=>g.close()}),V=(M,w,v)=>{M.listen(w,R=>{try{v(R)}catch(D){setTimeout(()=>{throw D},0)}})};return V(g,Za.EventType.OPEN,()=>{_||(F(we,`RPC '${t}' stream ${r} transport opened.`),x.o_())}),V(g,Za.EventType.CLOSE,()=>{_||(_=!0,F(we,`RPC '${t}' stream ${r} transport closed`),x.a_(),this.E_(g))}),V(g,Za.EventType.ERROR,M=>{_||(_=!0,sa(we,`RPC '${t}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),x.a_(new q(k.UNAVAILABLE,"The operation could not be completed")))}),V(g,Za.EventType.MESSAGE,M=>{var w;if(!_){const v=M.data[0];mt(!!v,16349);const R=v,D=(R==null?void 0:R.error)||((w=R[0])==null?void 0:w.error);if(D){F(we,`RPC '${t}' stream ${r} received error:`,D);const j=D.status;let H=function(A){const S=Kt[A];if(S!==void 0)return OA(S)}(j),E=D.message;H===void 0&&(H=k.INTERNAL,E="Unknown error status: "+j+" with message "+D.message),_=!0,x.a_(new q(H,E)),g.close()}else F(we,`RPC '${t}' stream ${r} received:`,v),x.u_(v)}}),V(l,K0.STAT_EVENT,M=>{M.stat===bd.PROXY?F(we,`RPC '${t}' stream ${r} detected buffering proxy`):M.stat===bd.NOPROXY&&F(we,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function _f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(e){return new EC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&F("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="PersistentStream";class YA{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ug(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(di(n.toString()),di("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new q(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return F(W_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(F(W_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _N extends YA{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=wC(this.serializer,t),i=function(s){if(!("targetChange"in s))return Z.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?sn(a.readTime):Z.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Vd(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Cd(u)?{documents:IC(s,u)}:{query:CC(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=kA(s,a.resumeToken);const h=Dd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Z.min())>0){l.readTime=dc(s,a.snapshotVersion.toTimestamp());const h=Dd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=xC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Vd(this.serializer),n.removeTarget=t,this.q_(n)}}class vN extends YA{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return mt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,mt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){mt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=RC(t.writeResults,t.commitTime),i=sn(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Vd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>jA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{}class EN extends TN{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new q(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,Od(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(k.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Od(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new q(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class AN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(di(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="RemoteStore";class bN{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{is(this)&&(F(Xr,"Restarting streams for network reachability change."),await async function(u){const h=tt(u);h.Ea.add(4),await pl(h),h.Ra.set("Unknown"),h.Ea.delete(4),await nh(h)}(this))})}),this.Ra=new AN(i,r)}}async function nh(e){if(is(e))for(const t of e.da)await t(!0)}async function pl(e){for(const t of e.da)await t(!1)}function KA(e,t){const n=tt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),dg(n)?fg(n):Sa(n).O_()&&hg(n,t))}function cg(e,t){const n=tt(e),i=Sa(n);n.Ia.delete(t),i.O_()&&XA(n,t),n.Ia.size===0&&(i.O_()?i.L_():is(n)&&n.Ra.set("Unknown"))}function hg(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Z.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Sa(e).Y_(t)}function XA(e,t){e.Va.Ue(t),Sa(e).Z_(t)}function fg(e){e.Va=new yC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Sa(e).start(),e.Ra.ua()}function dg(e){return is(e)&&!Sa(e).x_()&&e.Ia.size>0}function is(e){return tt(e).Ea.size===0}function $A(e){e.Va=void 0}async function SN(e){e.Ra.set("Online")}async function wN(e){e.Ia.forEach((t,n)=>{hg(e,t)})}async function RN(e,t){$A(e),dg(e)?(e.Ra.ha(t),fg(e)):e.Ra.set("Unknown")}async function IN(e,t,n){if(e.Ra.set("Online"),t instanceof MA&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){F(Xr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await pc(e,i)}else if(t instanceof bu?e.Va.Ze(t):t instanceof VA?e.Va.st(t):e.Va.tt(t),!n.isEqual(Z.min()))try{const i=await QA(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(Ee.EMPTY_BYTE_STRING,d.snapshotVersion)),XA(s,u);const g=new Hi(d.target,u,h,d.sequenceNumber);hg(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){F(Xr,"Failed to raise snapshot:",i),await pc(e,i)}}async function pc(e,t,n){if(!Aa(t))throw t;e.Ea.add(1),await pl(e),e.Ra.set("Offline"),n||(n=()=>QA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{F(Xr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await nh(e)})}function ZA(e,t){return t().catch(n=>pc(e,n,t))}async function ih(e){const t=tt(e),n=fr(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:$m;for(;CN(t);)try{const r=await uN(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,NN(t,r)}catch(r){await pc(t,r)}WA(t)&&JA(t)}function CN(e){return is(e)&&e.Ta.length<10}function NN(e,t){e.Ta.push(t);const n=fr(e);n.O_()&&n.X_&&n.ea(t.mutations)}function WA(e){return is(e)&&!fr(e).x_()&&e.Ta.length>0}function JA(e){fr(e).start()}async function xN(e){fr(e).ra()}async function DN(e){const t=fr(e);for(const n of e.Ta)t.ea(n.mutations)}async function ON(e,t,n){const i=e.Ta.shift(),r=ng.from(i,t,n);await ZA(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await ih(e)}async function VN(e,t){t&&fr(e).X_&&await async function(i,r){if(function(a){return DA(a)&&a!==k.ABORTED}(r.code)){const s=i.Ta.shift();fr(i).B_(),await ZA(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await ih(i)}}(e,t),WA(e)&&JA(e)}async function J_(e,t){const n=tt(e);n.asyncQueue.verifyOperationInProgress(),F(Xr,"RemoteStore received new credentials");const i=is(n);n.Ea.add(3),await pl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await nh(n)}async function MN(e,t){const n=tt(e);t?(n.Ea.delete(2),await nh(n)):t||(n.Ea.add(2),await pl(n),n.Ra.set("Unknown"))}function Sa(e){return e.ma||(e.ma=function(n,i,r){const s=tt(n);return s.sa(),new _N(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:SN.bind(null,e),t_:wN.bind(null,e),r_:RN.bind(null,e),H_:IN.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),dg(e)?fg(e):e.Ra.set("Unknown")):(await e.ma.stop(),$A(e))})),e.ma}function fr(e){return e.fa||(e.fa=function(n,i,r){const s=tt(n);return s.sa(),new vN(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:xN.bind(null,e),r_:VN.bind(null,e),ta:DN.bind(null,e),na:ON.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await ih(e)):(await e.fa.stop(),e.Ta.length>0&&(F(Xr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new mg(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(e,t){if(di("AsyncQueue",`${t}: ${e}`),Aa(e))return new q(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{static emptySet(t){return new Bs(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Y.comparator(n.key,i.key):(n,i)=>Y.comparator(n.key,i.key),this.keyedMap=Wa(),this.sortedSet=new jt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Bs)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Bs;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this.ga=new jt(Y.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):K(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class ca{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ca(t,n,Bs.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Xc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class PN{constructor(){this.queries=ev(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=tt(n),s=r.queries;r.queries=ev(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new q(k.ABORTED,"Firestore shutting down"))}}function ev(){return new ns(e=>_A(e),Xc)}async function tb(e,t){const n=tt(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new kN,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=gg(a,`Initialization of query '${ps(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&pg(n)}async function eb(e,t){const n=tt(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function UN(e,t){const n=tt(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&pg(n)}function LN(e,t,n){const i=tt(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function pg(e){e.Ca.forEach(t=>{t.next()})}var Pd,nv;(nv=Pd||(Pd={})).Ma="default",nv.Cache="cache";class nb{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new ca(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=ca.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Pd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(t){this.key=t}}class rb{constructor(t){this.key=t}}class jN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ht(),this.mutatedKeys=ht(),this.eu=vA(t),this.tu=new Bs(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new tv,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,g)=>{const m=r.get(d),_=$c(this.query,g)?g:null,x=!!m&&this.mutatedKeys.has(m.key),V=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let M=!1;m&&_?m.data.isEqual(_.data)?x!==V&&(i.track({type:3,doc:_}),M=!0):this.su(m,_)||(i.track({type:2,doc:_}),M=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),M=!0):m&&!_&&(i.track({type:1,doc:m}),M=!0,(u||h)&&(l=!0)),M&&(_?(a=a.add(_),s=V?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(_,x){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Rt:M})}};return V(_)-V(x)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new ca(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ht(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new rb(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new ib(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ht();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return ca.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yg="SyncEngine";class zN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class BN{constructor(t){this.key=t,this.hu=!1}}class qN{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ns(l=>_A(l),Xc),this.Iu=new Map,this.Eu=new Set,this.du=new jt(Y.comparator),this.Au=new Map,this.Ru=new sg,this.Vu={},this.mu=new Map,this.fu=ua.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HN(e,t,n=!0){const i=cb(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await sb(i,t,n,!0),r}async function FN(e,t){const n=cb(e);await sb(n,t,!0,!1)}async function sb(e,t,n,i){const r=await cN(e.localStore,Pn(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await GN(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&KA(e.remoteStore,r),l}async function GN(e,t,n,i,r){e.pu=(g,m,_)=>async function(V,M,w,v){let R=M.view.ru(w);R.Cs&&(R=await K_(V.localStore,M.query,!1).then(({documents:E})=>M.view.ru(E,R)));const D=v&&v.targetChanges.get(M.targetId),j=v&&v.targetMismatches.get(M.targetId)!=null,H=M.view.applyChanges(R,V.isPrimaryClient,D,j);return rv(V,M.targetId,H.au),H.snapshot}(e,g,m,_);const s=await K_(e.localStore,t,!0),a=new jN(t,s.Qs),l=a.ru(s.documents),u=gl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);rv(e,n,h.au);const d=new zN(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function QN(e,t,n){const i=tt(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!Xc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Md(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&cg(i.remoteStore,r.targetId),Ud(i,r.targetId)}).catch(Ea)):(Ud(i,r.targetId),await Md(i.localStore,r.targetId,!0))}async function YN(e,t){const n=tt(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),cg(n.remoteStore,i.targetId))}async function KN(e,t,n){const i=ex(e);try{const r=await function(a,l){const u=tt(a),h=xt.now(),d=l.reduce((_,x)=>_.add(x.key),ht());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let x=mi(),V=ht();return u.Ns.getEntries(_,d).next(M=>{x=M,x.forEach((w,v)=>{v.isValidDocument()||(V=V.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,x)).next(M=>{g=M;const w=[];for(const v of l){const R=hC(v,g.get(v.key).overlayedDocument);R!=null&&w.push(new _r(v.key,R,cA(R.value.mapValue),ve.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,w,l)}).next(M=>{m=M;const w=M.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(_,M.batchId,w)})}).then(()=>({batchId:m.batchId,changes:EA(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new jt(ct)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await yl(i,r.changes),await ih(i.remoteStore)}catch(r){const s=gg(r,"Failed to persist write");n.reject(s)}}async function ab(e,t){const n=tt(e);try{const i=await oN(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(mt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?mt(a.hu,14607):r.removedDocuments.size>0&&(mt(a.hu,42227),a.hu=!1))}),await yl(n,i,t)}catch(i){await Ea(i)}}function iv(e,t,n){const i=tt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=tt(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&pg(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function XN(e,t,n){const i=tt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new jt(Y.comparator);a=a.insert(s,ce.newNoDocument(s,Z.min()));const l=ht().add(s),u=new th(Z.min(),new Map,new jt(ct),a,l);await ab(i,u),i.du=i.du.remove(s),i.Au.delete(t),_g(i)}else await Md(i.localStore,t,!1).then(()=>Ud(i,t,n)).catch(Ea)}async function $N(e,t){const n=tt(e),i=t.batch.batchId;try{const r=await aN(n.localStore,t);lb(n,i,null),ob(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await yl(n,r)}catch(r){await Ea(r)}}async function ZN(e,t,n){const i=tt(e);try{const r=await function(a,l){const u=tt(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(mt(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);lb(i,t,n),ob(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await yl(i,r)}catch(r){await Ea(r)}}function ob(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function lb(e,t,n){const i=tt(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Ud(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||ub(e,i)})}function ub(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(cg(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),_g(e))}function rv(e,t,n){for(const i of n)i instanceof ib?(e.Ru.addReference(i.key,t),WN(e,i)):i instanceof rb?(F(yg,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||ub(e,i.key)):K(19791,{wu:i})}function WN(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(F(yg,"New document in limbo: "+n),e.Eu.add(i),_g(e))}function _g(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Y(St.fromString(t)),i=e.fu.next();e.Au.set(i,new BN(n)),e.du=e.du.insert(n,i),KA(e.remoteStore,new Hi(Pn(Kc(n.path)),i,"TargetPurposeLimboResolution",Qc.ce))}}async function yl(e,t,n){const i=tt(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){r.push(h);const g=og.As(u.targetId,h);s.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=tt(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,m=>P.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>P.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!Aa(g))throw g;F(lg,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const _=d.Ms.get(m),x=_.snapshotVersion,V=_.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(m,V)}}}(i.localStore,s))}async function JN(e,t){const n=tt(e);if(!n.currentUser.isEqual(t)){F(yg,"User change. New user:",t.toKey());const i=await GA(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new q(k.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await yl(n,i.Ls)}}function tx(e,t){const n=tt(e),i=n.Au.get(t);if(i&&i.hu)return ht().add(i.key);{let r=ht();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function cb(e){const t=tt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ab.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=XN.bind(null,t),t.Pu.H_=UN.bind(null,t.eventManager),t.Pu.yu=LN.bind(null,t.eventManager),t}function ex(e){const t=tt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$N.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ZN.bind(null,t),t}class yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=eh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return sN(this.persistence,new nN,t.initialUser,this.serializer)}Cu(t){return new FA(ag.mi,this.serializer)}Du(t){return new fN}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yc.provider={build:()=>new yc};class nx extends yc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){mt(this.persistence.referenceDelegate instanceof gc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new BC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?He.withCacheSize(this.cacheSizeBytes):He.DEFAULT;return new FA(i=>gc.mi(i,n),this.serializer)}}class Ld{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>iv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=JN.bind(null,this.syncEngine),await MN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new PN}()}createDatastore(t){const n=eh(t.databaseInfo.databaseId),i=function(s){return new yN(s)}(t.databaseInfo);return function(s,a,l,u){return new EN(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new bN(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>iv(this.syncEngine,n,0),function(){return Z_.v()?new Z_:new dN}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const g=new qN(r,s,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=tt(r);F(Xr,"RemoteStore shutting down."),s.Ea.add(5),await pl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Ld.provider={build:()=>new Ld};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):di("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=tt(r),l={documents:s.map(g=>mc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,St.emptyPath(),l,s.length),h=new Map;u.forEach(g=>{const m=SC(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return s.forEach(g=>{const m=h.get(g.toString());mt(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Jc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=Y.fromPath(i);this.mutations.push(new xA(r,this.precondition(r)))}),await async function(i,r){const s=tt(i),a={writes:r.map(l=>jA(s.serializer,l))};await s.Go("Commit",s.serializer.databaseId,St.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw K(50498,{Gu:t.constructor.name});n=Z.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new q(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Z.min())?ve.exists(!1):ve.updateTime(n):ve.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Z.min()))throw new q(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ve.updateTime(n)}return ve.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new ug(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new ix(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!dl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!DA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr="FirestoreClient";class sx{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ie.UNAUTHENTICATED,this.clientId=Xm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{F(dr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(F(dr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=gg(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function vf(e,t){e.asyncQueue.verifyOperationInProgress(),F(dr,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await GA(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function sv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ax(e);F(dr,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>J_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>J_(t.remoteStore,r)),e._onlineComponents=t}async function ax(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){F(dr,"Using user provided OfflineComponentProvider");try{await vf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===k.FAILED_PRECONDITION||r.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;sa("Error using user provided cache. Falling back to memory cache: "+n),await vf(e,new yc)}}else F(dr,"Using default OfflineComponentProvider"),await vf(e,new nx(void 0));return e._offlineComponents}async function vg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(F(dr,"Using user provided OnlineComponentProvider"),await sv(e,e._uninitializedComponentsProvider._online)):(F(dr,"Using default OnlineComponentProvider"),await sv(e,new Ld))),e._onlineComponents}function ox(e){return vg(e).then(t=>t.syncEngine)}function lx(e){return vg(e).then(t=>t.datastore)}async function jd(e){const t=await vg(e),n=t.eventManager;return n.onListen=HN.bind(null,t.syncEngine),n.onUnlisten=QN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=FN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=YN.bind(null,t.syncEngine),n}function ux(e,t,n={}){const i=new oi;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new hb({next:m=>{d.Nu(),a.enqueueAndForget(()=>eb(s,g));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new q(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new q(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new nb(Kc(l.path),d,{includeMetadataChanges:!0,qa:!0});return tb(s,g)}(await jd(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="firestore.googleapis.com",ov=!0;class lv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new q(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=db,this.ssl=ov}else this.host=t.host,this.ssl=t.ssl??ov;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=HA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<jC)throw new q(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}SI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fb(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rh{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new q(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new mI;switch(i.type){case"firstParty":return new _I(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new q(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=av.get(n);i&&(F("ComponentProvider","Removing Datastore"),av.delete(n),i.terminate())}(this),Promise.resolve()}}function cx(e,t,n,i={}){var h;e=rn(e,rh);const r=_a(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(U0(`https://${l}`),L0("Firestore",!0)),s.host!==db&&s.host!==l&&sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!Qr(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=Ie.MOCK_USER;else{d=jR(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new q(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ie(m)}e._authCredentials=new gI(new W0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new rs(this.firestore,t,this._query)}}class Lt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Lt(this.firestore,t,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(fl(n,Lt._jsonSchema))return new Lt(t,i||null,new Y(St.fromString(n.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:Zt("string",Lt._jsonSchemaVersion),referencePath:Zt("string")};class nr extends rs{constructor(t,n,i){super(t,n,Kc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Lt(this.firestore,null,new Y(t))}withConverter(t){return new nr(this.firestore,t,this._path)}}function uv(e,t,...n){if(e=de(e),J0("collection","path",t),e instanceof rh){const i=St.fromString(t,...n);return E_(i),new nr(e,null,i)}{if(!(e instanceof Lt||e instanceof nr))throw new q(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(St.fromString(t,...n));return E_(i),new nr(e.firestore,null,i)}}function Re(e,t,...n){if(e=de(e),arguments.length===1&&(t=Xm.newId()),J0("doc","path",t),e instanceof rh){const i=St.fromString(t,...n);return T_(i),new Lt(e,null,new Y(i))}{if(!(e instanceof Lt||e instanceof nr))throw new q(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(St.fromString(t,...n));return T_(i),new Lt(e.firestore,e instanceof nr?e.converter:null,new Y(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="AsyncQueue";class hv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ug(this,"async_queue_retry"),this._c=()=>{const i=_f();i&&F(cv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=_f();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=_f();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new oi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Aa(t))throw t;F(cv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,di("INTERNAL UNHANDLED ERROR: ",fv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=mg.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&K(47125,{Pc:fv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function fv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class gi extends rh{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new hv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new hv(t),this._firestoreClient=void 0,await t}}}function hx(e,t){const n=typeof e=="object"?e:q0(),i=typeof e=="string"?e:uc,r=Ym(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=UR("firestore");s&&cx(r,...s)}return r}function sh(e){if(e._terminated)throw new q(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||fx(e),e._firestoreClient}function fx(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new kI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,fb(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new sx(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ze(Ee.fromBase64String(t))}catch(n){throw new q(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ze(Ee.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ze._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(fl(t,Ze._jsonSchema))return Ze.fromBase64String(t.bytes)}}Ze._jsonSchemaVersion="firestore/bytes/1.0",Ze._jsonSchema={type:Zt("string",Ze._jsonSchemaVersion),bytes:Zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new q(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _e(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new q(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new q(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Un._jsonSchemaVersion}}static fromJSON(t){if(fl(t,Un._jsonSchema))return new Un(t.latitude,t.longitude)}}Un._jsonSchemaVersion="firestore/geoPoint/1.0",Un._jsonSchema={type:Zt("string",Un._jsonSchemaVersion),latitude:Zt("number"),longitude:Zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Ln._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(fl(t,Ln._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Ln(t.vectorValues);throw new q(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ln._jsonSchemaVersion="firestore/vectorValue/1.0",Ln._jsonSchema={type:Zt("string",Ln._jsonSchemaVersion),vectorValues:Zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=/^__.*__$/;class mx{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new _r(t,this.data,this.fieldMask,n,this.fieldTransforms):new ml(t,this.data,n,this.fieldTransforms)}}class mb{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new _r(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function gb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:e})}}class Tg{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Tg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return _c(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(gb(this.Ac)&&dx.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class gx{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||eh(t)}Cc(t,n,i,r=!1){return new Tg({Ac:t,methodName:n,Dc:i,path:_e.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vl(e){const t=e._freezeSettings(),n=eh(e._databaseId);return new gx(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Eg(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);bg("Data must be an object, but it was:",a,i);const l=_b(i,a);let u,h;if(s.merge)u=new We(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=zd(t,g,n);if(!a.contains(m))throw new q(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Tb(d,m)||d.push(m)}u=new We(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new mx(new Me(l),u,h)}class oh extends ah{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof oh}}class Ag extends ah{_toFieldTransform(t){return new oC(t.path,new Fo)}isEqual(t){return t instanceof Ag}}function pb(e,t,n,i){const r=e.Cc(1,t,n);bg("Data must be an object, but it was:",r,i);const s=[],a=Me.empty();yr(i,(u,h)=>{const d=Sg(t,u,n);h=de(h);const g=r.yc(d);if(h instanceof oh)s.push(d);else{const m=Tl(h,g);m!=null&&(s.push(d),a.set(d,m))}});const l=new We(s);return new mb(a,l,r.fieldTransforms)}function yb(e,t,n,i,r,s){const a=e.Cc(1,t,n),l=[zd(t,i,n)],u=[r];if(s.length%2!=0)throw new q(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(zd(t,s[m])),u.push(s[m+1]);const h=[],d=Me.empty();for(let m=l.length-1;m>=0;--m)if(!Tb(h,l[m])){const _=l[m];let x=u[m];x=de(x);const V=a.yc(_);if(x instanceof oh)h.push(_);else{const M=Tl(x,V);M!=null&&(h.push(_),d.set(_,M))}}const g=new We(h);return new mb(d,g,a.fieldTransforms)}function px(e,t,n,i=!1){return Tl(n,e.Cc(i?4:3,t))}function Tl(e,t){if(vb(e=de(e)))return bg("Unsupported field value:",t,e),_b(e,t);if(e instanceof ah)return function(i,r){if(!gb(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=Tl(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=de(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return rC(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=xt.fromDate(i);return{timestampValue:dc(r.serializer,s)}}if(i instanceof xt){const s=new xt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:dc(r.serializer,s)}}if(i instanceof Un)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ze)return{bytesValue:kA(r.serializer,i._byteString)};if(i instanceof Lt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ln)return function(a,l){return{mapValue:{fields:{[lA]:{stringValue:uA},[cc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return eg(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Gc(i)}`)}(e,t)}function _b(e,t){const n={};return nA(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):yr(e,(i,r)=>{const s=Tl(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function vb(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof xt||e instanceof Un||e instanceof Ze||e instanceof Lt||e instanceof ah||e instanceof Ln)}function bg(e,t,n){if(!vb(n)||!tA(n)){const i=Gc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function zd(e,t,n){if((t=de(t))instanceof _l)return t._internalPath;if(typeof t=="string")return Sg(e,t);throw _c("Field path arguments must be of type string or ",e,!1,void 0,n)}const yx=new RegExp("[~\\*/\\[\\]]");function Sg(e,t,n){if(t.search(yx)>=0)throw _c(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new _l(...t.split("."))._internalPath}catch{throw _c(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function _c(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new q(k.INVALID_ARGUMENT,l+e+u)}function Tb(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new _x(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(wg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _x extends vc{data(){return super.data()}}function wg(e,t){return typeof t=="string"?Sg(e,t):t instanceof _l?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new q(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rg{}class Eb extends Rg{}function Tx(e,t,...n){let i=[];t instanceof Rg&&i.push(t),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof Cg).length,l=s.filter(u=>u instanceof Ig).length;if(a>1||a>0&&l>0)throw new q(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class Ig extends Eb{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Ig(t,n,i)}_apply(t){const n=this._parse(t);return Ab(t._query,n),new rs(t.firestore,t.converter,Nd(t._query,n))}_parse(t){const n=vl(t.firestore);return function(s,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){gv(g,d);const x=[];for(const V of g)x.push(mv(u,s,V));m={arrayValue:{values:x}}}else m=mv(u,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||gv(g,d),m=px(l,a,g,d==="in"||d==="not-in");return $t.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Cg extends Rg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Cg(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:In.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)Ab(a,u),a=Nd(a,u)}(t._query,n),new rs(t.firestore,t.converter,Nd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ng extends Eb{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Ng(t,n)}_apply(t){const n=function(r,s,a){if(r.startAt!==null)throw new q(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new q(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ho(s,a)}(t._query,this._field,this._direction);return new rs(t.firestore,t.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new ba(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}}function Ex(e,t="asc"){const n=t,i=wg("orderBy",e);return Ng._create(i,n)}function mv(e,t,n){if(typeof(n=de(n))=="string"){if(n==="")throw new q(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yA(t)&&n.indexOf("/")!==-1)throw new q(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(St.fromString(n));if(!Y.isDocumentKey(i))throw new q(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return N_(e,new Y(i))}if(n instanceof Lt)return N_(e,n._key);throw new q(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gc(n)}.`)}function gv(e,t){if(!Array.isArray(e)||e.length===0)throw new q(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Ab(e,t){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new q(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new q(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class bb{convertValue(t,n="none"){switch(hr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Yt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(cr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw K(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return yr(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[cc].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>Yt(a.doubleValue));return new Ln(n)}convertGeoPoint(t){return new Un(Yt(t.latitude),Yt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Yc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(zo(t));default:return null}}convertTimestamp(t){const n=ur(t);return new xt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=St.fromString(t);mt(qA(i),9688,{name:t});const r=new Bo(i.get(1),i.get(3)),s=new Y(i.popFirst(5));return r.isEqual(n)||di(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class Ax extends bb{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ze(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}class Ds{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ir extends vc{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(wg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=ir._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ir._jsonSchemaVersion="firestore/documentSnapshot/1.0",ir._jsonSchema={type:Zt("string",ir._jsonSchemaVersion),bundleSource:Zt("string","DocumentSnapshot"),bundleName:Zt("string"),bundle:Zt("string")};class Su extends ir{data(t={}){return super.data(t)}}class qs{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ds(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Su(this._firestore,this._userDataWriter,i.key,i,new Ds(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new Su(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ds(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Su(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ds(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:bx(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=qs._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Xm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function bx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(e){e=rn(e,Lt);const t=rn(e.firestore,gi);return ux(sh(t),e._key).then(n=>Sb(t,e,n))}qs._jsonSchemaVersion="firestore/querySnapshot/1.0",qs._jsonSchema={type:Zt("string",qs._jsonSchemaVersion),bundleSource:Zt("string","QuerySnapshot"),bundleName:Zt("string"),bundle:Zt("string")};class Dg extends bb{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ze(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}function Hs(e,t,n){e=rn(e,Lt);const i=rn(e.firestore,gi),r=xg(e.converter,t,n);return lh(i,[Eg(vl(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,ve.none())])}function Sx(e,t,n,...i){e=rn(e,Lt);const r=rn(e.firestore,gi),s=vl(r);let a;return a=typeof(t=de(t))=="string"||t instanceof _l?yb(s,"updateDoc",e._key,t,n,i):pb(s,"updateDoc",e._key,t),lh(r,[a.toMutation(e._key,ve.exists(!0))])}function wx(e){return lh(rn(e.firestore,gi),[new Jc(e._key,ve.none())])}function Rx(e,t){const n=rn(e.firestore,gi),i=Re(e),r=xg(e.converter,t);return lh(n,[Eg(vl(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,ve.exists(!1))]).then(()=>i)}function wu(e,...t){var u,h,d;e=de(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||dv(t[i])||(n=t[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(dv(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let s,a,l;if(e instanceof Lt)a=rn(e.firestore,gi),l=Kc(e._key.path),s={next:g=>{t[i]&&t[i](Sb(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=rn(e,rs);a=rn(g.firestore,gi),l=g._query;const m=new Dg(a);s={next:_=>{t[i]&&t[i](new qs(a,m,g,_))},error:t[i+1],complete:t[i+2]},vx(e._query)}return function(m,_,x,V){const M=new hb(V),w=new nb(_,M,x);return m.asyncQueue.enqueueAndForget(async()=>tb(await jd(m),w)),()=>{M.Nu(),m.asyncQueue.enqueueAndForget(async()=>eb(await jd(m),w))}}(sh(a),l,r,s)}function lh(e,t){return function(i,r){const s=new oi;return i.asyncQueue.enqueueAndForget(async()=>KN(await ox(i),r,s)),s.promise}(sh(e),t)}function Sb(e,t,n){const i=n.docs.get(t._key),r=new Dg(e);return new ir(e,r,t._key,i,new Ds(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix={maxAttempts:5};function to(e,t){if((e=de(e)).firestore!==t)throw new q(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=vl(t)}get(t){const n=to(t,this._firestore),i=new Ax(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return K(24041);const s=r[0];if(s.isFoundDocument())return new vc(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new vc(this._firestore,i,n._key,null,n.converter);throw K(18433,{doc:s})})}set(t,n,i){const r=to(t,this._firestore),s=xg(r.converter,n,i),a=Eg(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(t,n,i,...r){const s=to(t,this._firestore);let a;return a=typeof(n=de(n))=="string"||n instanceof _l?yb(this._dataReader,"Transaction.update",s._key,n,i,r):pb(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(t){const n=to(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx extends Cx{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=to(t,this._firestore),i=new Dg(this._firestore);return super.get(t).then(r=>new ir(this._firestore,i,n._key,r._document,new Ds(!1,!1),n.converter))}}function pv(e,t,n){e=rn(e,gi);const i={...Ix,...n};return function(s){if(s.maxAttempts<1)throw new q(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,l){const u=new oi;return s.asyncQueue.enqueueAndForget(async()=>{const h=await lx(s);new rx(s.asyncQueue,h,l,a,u).ju()}),u.promise}(sh(e),r=>t(new Nx(e,r)),i)}function Tf(){return new Ag("serverTimestamp")}(function(t,n=!0){(function(r){Ta=r})(va),ra(new Yr("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new gi(new pI(i.getProvider("auth-internal")),new vI(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new q(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bo(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),tr(p_,y_,t),tr(p_,y_,"esm2020")})();function wb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xx=wb,Rb=new cl("auth","Firebase",wb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Gm("@firebase/auth");function Dx(e,...t){Tc.logLevel<=ut.WARN&&Tc.warn(`Auth (${va}): ${e}`,...t)}function Ru(e,...t){Tc.logLevel<=ut.ERROR&&Tc.error(`Auth (${va}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(e,...t){throw Og(e,...t)}function jn(e,...t){return Og(e,...t)}function Ib(e,t,n){const i={...xx(),[t]:n};return new cl("auth","Firebase",i).create(t,{appName:e.name})}function rr(e){return Ib(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Og(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return Rb.create(e,...t)}function J(e,t,...n){if(!e)throw Og(t,...n)}function ii(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ru(t),new Error(t)}function yi(e,t){e||ii(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function Ox(){return yv()==="http:"||yv()==="https:"}function yv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ox()||GR()||"connection"in navigator)?navigator.onLine:!0}function Mx(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t,n){this.shortDelay=t,this.longDelay=n,yi(n>t,"Short delay should be less than long delay!"),this.isMobile=qR()||QR()}get(){return Vx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(e,t){yi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ux=new El(3e4,6e4);function uh(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function wa(e,t,n,i,r={}){return Nb(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=hl({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return FR()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&_a(e.emulatorConfig.host)&&(h.credentials="include"),Cb.fetch()(await Db(e,e.config.apiHost,n,l),h)})}async function Nb(e,t,n){e._canInitEmulator=!1;const i={...kx,...t};try{const r=new Lx(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw su(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw su(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw su(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw su(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Ib(e,d,h);pi(e,d)}}catch(r){if(r instanceof vi)throw r;pi(e,"network-request-failed",{message:String(r)})}}async function xb(e,t,n,i,r={}){const s=await wa(e,t,n,i,r);return"mfaPendingCredential"in s&&pi(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Db(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?Vg(e.config,r):`${e.config.apiScheme}://${r}`;return Px.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class Lx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(jn(this.auth,"network-request-failed")),Ux.get())})}}function su(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=jn(e,t,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(e,t){return wa(e,"POST","/v1/accounts:delete",t)}async function Ec(e,t){return wa(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function zx(e,t=!1){const n=de(e),i=await n.getIdToken(t),r=Mg(i);J(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:bo(Ef(r.auth_time)),issuedAtTime:bo(Ef(r.iat)),expirationTime:bo(Ef(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ef(e){return Number(e)*1e3}function Mg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Ru("JWT malformed, contained fewer than 3 sections"),null;try{const r=V0(n);return r?JSON.parse(r):(Ru("Failed to decode base64 JWT payload"),null)}catch(r){return Ru("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function _v(e){const t=Mg(e);return J(t,"internal-error"),J(typeof t.exp<"u","internal-error"),J(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof vi&&Bx(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function Bx({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bo(this.lastLoginAt),this.creationTime=bo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(e){var g;const t=e.auth,n=await e.getIdToken(),i=await Yo(e,Ec(t,{idToken:n}));J(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(g=r.providerUserInfo)!=null&&g.length?Ob(r.providerUserInfo):[],a=Fx(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Hd(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function Hx(e){const t=de(e);await Ac(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Fx(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function Ob(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gx(e,t){const n=await Nb(e,{},async()=>{const i=hl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await Db(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&_a(e.emulatorConfig.host)&&(u.credentials="include"),Cb.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Qx(e,t){return wa(e,"POST","/v2/accounts:revokeToken",uh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){J(t.idToken,"internal-error"),J(typeof t.idToken<"u","internal-error"),J(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):_v(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){J(t.length!==0,"internal-error");const n=_v(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await Gx(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Fs;return i&&(J(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(J(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(J(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Fs,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(e,t){J(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class wn{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new qx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Hd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Yo(this,this.stsTokenManager.getToken(this.auth,t));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return zx(this,t)}reload(){return Hx(this)}_assign(t){this!==t&&(J(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new wn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Ac(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sn(this.auth.app))return Promise.reject(rr(this.auth));const t=await this.getIdToken();return await Yo(this,jx(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:_,providerData:x,stsTokenManager:V}=n;J(g&&V,t,"internal-error");const M=Fs.fromJSON(this.name,V);J(typeof g=="string",t,"internal-error"),Ii(i,t.name),Ii(r,t.name),J(typeof m=="boolean",t,"internal-error"),J(typeof _=="boolean",t,"internal-error"),Ii(s,t.name),Ii(a,t.name),Ii(l,t.name),Ii(u,t.name),Ii(h,t.name),Ii(d,t.name);const w=new wn({uid:g,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:M,createdAt:h,lastLoginAt:d});return x&&Array.isArray(x)&&(w.providerData=x.map(v=>({...v}))),u&&(w._redirectEventId=u),w}static async _fromIdTokenResponse(t,n,i=!1){const r=new Fs;r.updateFromServerResponse(n);const s=new wn({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Ac(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];J(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?Ob(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new Fs;l.updateFromIdToken(i);const u=new wn({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Hd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=new Map;function ri(e){yi(e instanceof Function,"Expected a class definition");let t=vv.get(e);return t?(yi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Vb.type="NONE";const Tv=Vb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(e,t,n){return`firebase:${e}:${t}:${n}`}class Gs{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Iu(this.userKey,r.apiKey,s),this.fullPersistenceKey=Iu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Ec(this.auth,{idToken:t}).catch(()=>{});return n?wn._fromGetAccountInfoResponse(this.auth,n,t):null}return wn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Gs(ri(Tv),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||ri(Tv);const a=Iu(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await Ec(t,{idToken:d}).catch(()=>{});if(!m)break;g=await wn._fromGetAccountInfoResponse(t,m,d)}else g=wn._fromJSON(t,d);h!==s&&(l=g),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Gs(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Gs(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ub(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Mb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(jb(t))return"Blackberry";if(zb(t))return"Webos";if(kb(t))return"Safari";if((t.includes("chrome/")||Pb(t))&&!t.includes("edge/"))return"Chrome";if(Lb(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Mb(e=xe()){return/firefox\//i.test(e)}function kb(e=xe()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Pb(e=xe()){return/crios\//i.test(e)}function Ub(e=xe()){return/iemobile/i.test(e)}function Lb(e=xe()){return/android/i.test(e)}function jb(e=xe()){return/blackberry/i.test(e)}function zb(e=xe()){return/webos/i.test(e)}function kg(e=xe()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Yx(e=xe()){var t;return kg(e)&&!!((t=window.navigator)!=null&&t.standalone)}function Kx(){return YR()&&document.documentMode===10}function Bb(e=xe()){return kg(e)||Lb(e)||zb(e)||jb(e)||/windows phone/i.test(e)||Ub(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(e,t=[]){let n;switch(e){case"Browser":n=Ev(xe());break;case"Worker":n=`${Ev(xe())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${va}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(e,t={}){return wa(e,"GET","/v2/passwordPolicy",uh(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=6;class Wx{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Zx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Av(this),this.idTokenSubscription=new Av(this),this.beforeStateQueue=new Xx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ri(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Gs.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Ec(this,{idToken:t}),i=await wn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Sn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Ac(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Mx()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Sn(this.app))return Promise.reject(rr(this));const n=t?de(t):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&J(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Sn(this.app)?Promise.reject(rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Sn(this.app)?Promise.reject(rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ri(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await $x(this),n=new Wx(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new cl("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Qx(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ri(t)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Gs.create(this,[ri(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=qb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&Dx(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ch(e){return de(e)}class Av{constructor(t){this.auth=t,this.observer=null,this.addObserver=e2(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tD(e){Pg=e}function eD(e){return Pg.loadJS(e)}function nD(){return Pg.gapiScript}function iD(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(e,t){const n=Ym(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Qr(s,t??{}))return r;pi(r,"already-initialized")}return n.initialize({options:t})}function sD(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ri);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function aD(e,t,n){const i=ch(e);J(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=Hb(t),{host:a,port:l}=oD(t),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){J(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),J(Qr(h,i.config.emulator)&&Qr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,_a(a)?(U0(`${s}//${a}${u}`),L0("Auth",!0)):lD()}function Hb(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function oD(e){const t=Hb(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:bv(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:bv(a)}}}function bv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function lD(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ii("not implemented")}_getIdTokenResponse(t){return ii("not implemented")}_linkToIdToken(t,n){return ii("not implemented")}_getReauthenticationResolver(t){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(e,t){return xb(e,"POST","/v1/accounts:signInWithIdp",uh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="http://localhost";class $r extends Fb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new $r(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):pi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new $r(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Qs(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Qs(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Qs(t,n)}buildRequest(){const t={requestUri:uD,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=hl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends Gb{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Al{constructor(){super("facebook.com")}static credential(t){return $r._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ki.credentialFromTaggedObject(t)}static credentialFromError(t){return ki.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ki.credential(t.oauthAccessToken)}catch{return null}}}ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Al{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return $r._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Pi.credentialFromTaggedObject(t)}static credentialFromError(t){return Pi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Pi.credential(n,i)}catch{return null}}}Pi.GOOGLE_SIGN_IN_METHOD="google.com";Pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Al{constructor(){super("github.com")}static credential(t){return $r._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ui.credentialFromTaggedObject(t)}static credentialFromError(t){return Ui.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ui.credential(t.oauthAccessToken)}catch{return null}}}Ui.GITHUB_SIGN_IN_METHOD="github.com";Ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Al{constructor(){super("twitter.com")}static credential(t,n){return $r._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Li.credentialFromTaggedObject(t)}static credentialFromError(t){return Li.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Li.credential(n,i)}catch{return null}}}Li.TWITTER_SIGN_IN_METHOD="twitter.com";Li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(e,t){return xb(e,"POST","/v1/accounts:signUp",uh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await wn._fromIdTokenResponse(t,i,r),a=Sv(i);return new mr({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=Sv(i);return new mr({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function Sv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(e){var r;if(Sn(e.app))return Promise.reject(rr(e));const t=ch(e);if(await t._initializationPromise,(r=t.currentUser)!=null&&r.isAnonymous)return new mr({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await cD(t,{returnSecureToken:!0}),i=await mr._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends vi{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,bc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new bc(t,n,i,r)}}function Qb(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?bc._fromErrorAndOperation(e,s,t,i):s})}async function fD(e,t,n=!1){const i=await Yo(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return mr._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(e,t,n=!1){const{auth:i}=e;if(Sn(i.app))return Promise.reject(rr(i));const r="reauthenticate";try{const s=await Yo(e,Qb(i,r,t,e),n);J(s.idToken,i,"internal-error");const a=Mg(s.idToken);J(a,i,"internal-error");const{sub:l}=a;return J(e.uid===l,i,"user-mismatch"),mr._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&pi(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(e,t,n=!1){if(Sn(e.app))return Promise.reject(rr(e));const i="signIn",r=await Qb(e,i,t),s=await mr._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}function gD(e,t,n,i){return de(e).onIdTokenChanged(t,n,i)}function pD(e,t,n){return de(e).beforeAuthStateChanged(t,n)}const Sc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sc,"1"),this.storage.removeItem(Sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=1e3,_D=10;class Kb extends Yb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Kx()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,_D):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},yD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Kb.type="LOCAL";const vD=Kb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb extends Yb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Xb.type="SESSION";const $b=Xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new hh(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await TD(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=Ug("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return window}function AD(e){zn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(){return typeof zn().WorkerGlobalScope<"u"&&typeof zn().importScripts=="function"}async function bD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SD(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function wD(){return Zb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="firebaseLocalStorageDb",RD=1,wc="firebaseLocalStorage",Jb="fbase_key";class bl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fh(e,t){return e.transaction([wc],t?"readwrite":"readonly").objectStore(wc)}function ID(){const e=indexedDB.deleteDatabase(Wb);return new bl(e).toPromise()}function Fd(){const e=indexedDB.open(Wb,RD);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(wc,{keyPath:Jb})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(wc)?t(i):(i.close(),await ID(),t(await Fd()))})})}async function wv(e,t,n){const i=fh(e,!0).put({[Jb]:t,value:n});return new bl(i).toPromise()}async function CD(e,t){const n=fh(e,!1).get(t),i=await new bl(n).toPromise();return i===void 0?null:i.value}function Rv(e,t){const n=fh(e,!0).delete(t);return new bl(n).toPromise()}const ND=800,xD=3;class tS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>xD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hh._getInstance(wD()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await bD(),!this.activeServiceWorker)return;this.sender=new ED(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||SD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Fd();return await wv(t,Sc,"1"),await Rv(t,Sc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>wv(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>CD(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Rv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=fh(r,!1).getAll();return new bl(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ND)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tS.type="LOCAL";const DD=tS;new El(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(e,t){return t?ri(t):(J(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends Fb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Qs(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Qs(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Qs(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function VD(e){return mD(e.auth,new Lg(e),e.bypassAuthState)}function MD(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),dD(n,new Lg(e),e.bypassAuthState)}async function kD(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),fD(n,new Lg(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return VD;case"linkViaPopup":case"linkViaRedirect":return kD;case"reauthViaPopup":case"reauthViaRedirect":return MD;default:pi(this.auth,"internal-error")}}resolve(t){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=new El(2e3,1e4);class Os extends eS{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Os.currentPopupAction&&Os.currentPopupAction.cancel(),Os.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return J(t,this.auth,"internal-error"),t}async onExecution(){yi(this.filter.length===1,"Popup operations only handle one event");const t=Ug();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Os.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,PD.get())};t()}}Os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="pendingRedirect",Cu=new Map;class LD extends eS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Cu.get(this.auth._key());if(!t){try{const i=await jD(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Cu.set(this.auth._key(),t)}return this.bypassAuthState||Cu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jD(e,t){const n=qD(t),i=BD(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function zD(e,t){Cu.set(e._key(),t)}function BD(e){return ri(e._redirectPersistence)}function qD(e){return Iu(UD,e.config.apiKey,e.name)}async function HD(e,t,n=!1){if(Sn(e.app))return Promise.reject(rr(e));const i=ch(e),r=OD(i,t),a=await new LD(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=10*60*1e3;class GD{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!QD(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!nS(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(jn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=FD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iv(t))}saveEventToCache(t){this.cachedEventUids.add(Iv(t)),this.lastProcessedEventTime=Date.now()}}function Iv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function nS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function QD(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(e,t={}){return wa(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XD=/^https?/;async function $D(e){if(e.config.emulator)return;const{authorizedDomains:t}=await YD(e);for(const n of t)try{if(ZD(n))return}catch{}pi(e,"unauthorized-domain")}function ZD(e){const t=qd(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!XD.test(n))return!1;if(KD.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=new El(3e4,6e4);function Cv(){const e=zn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function JD(e){return new Promise((t,n)=>{var r,s,a;function i(){Cv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Cv(),n(jn(e,"network-request-failed"))},timeout:WD.get()})}if((s=(r=zn().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=zn().gapi)!=null&&a.load)i();else{const l=iD("iframefcb");return zn()[l]=()=>{gapi.load?i():n(jn(e,"network-request-failed"))},eD(`${nD()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Nu=null,t})}let Nu=null;function t4(e){return Nu=Nu||JD(e),Nu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=new El(5e3,15e3),n4="__/auth/iframe",i4="emulator/auth/iframe",r4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a4(e){const t=e.config;J(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Vg(t,i4):`https://${e.config.authDomain}/${n4}`,i={apiKey:t.apiKey,appName:e.name,v:va},r=s4.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${hl(i).slice(1)}`}async function o4(e){const t=await t4(e),n=zn().gapi;return J(n,e,"internal-error"),t.open({where:document.body,url:a4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r4,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=jn(e,"network-request-failed"),l=zn().setTimeout(()=>{s(a)},e4.get());function u(){zn().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u4=500,c4=600,h4="_blank",f4="http://localhost";class Nv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function d4(e,t,n,i=u4,r=c4){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...l4,width:i.toString(),height:r.toString(),top:s,left:a},h=xe().toLowerCase();n&&(l=Pb(h)?h4:n),Mb(h)&&(t=t||f4,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,x])=>`${m}${_}=${x},`,"");if(Yx(h)&&l!=="_self")return m4(t||"",l),new Nv(null);const g=window.open(t||"",l,d);J(g,e,"popup-blocked");try{g.focus()}catch{}return new Nv(g)}function m4(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4="__/auth/handler",p4="emulator/auth/handler",y4=encodeURIComponent("fac");async function xv(e,t,n,i,r,s){J(e.config.authDomain,e,"auth-domain-config-required"),J(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:va,eventId:r};if(t instanceof Gb){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",t2(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof Al){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${y4}=${encodeURIComponent(u)}`:"";return`${_4(e)}?${hl(l).slice(1)}${h}`}function _4({config:e}){return e.emulator?Vg(e,p4):`https://${e.authDomain}/${g4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="webStorageSupport";class v4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$b,this._completeRedirectFn=HD,this._overrideRedirectResult=zD}async _openPopup(t,n,i,r){var a;yi((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await xv(t,n,i,qd(),r);return d4(t,s,Ug())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await xv(t,n,i,qd(),r);return AD(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(yi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await o4(t),i=new GD(t);return n.register("authEvent",r=>(J(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Af,{type:Af},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[Af];s!==void 0&&n(!!s),pi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$D(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Bb()||kb()||kg()}}const T4=v4;var Dv="@firebase/auth",Ov="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function b4(e){ra(new Yr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qb(e)},h=new Jx(i,r,s,u);return sD(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),ra(new Yr("auth-internal",t=>{const n=ch(t.getProvider("auth").getImmediate());return(i=>new E4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),tr(Dv,Ov,A4(e)),tr(Dv,Ov,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=5*60,w4=P0("authIdTokenMaxAge")||S4;let Vv=null;const R4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>w4)return;const r=n==null?void 0:n.token;Vv!==r&&(Vv=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function I4(e=q0()){const t=Ym(e,"auth");if(t.isInitialized())return t.getImmediate();const n=rD(e,{popupRedirectResolver:T4,persistence:[DD,vD,$b]}),i=P0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=R4(s.toString());pD(n,a,()=>a(n.currentUser)),gD(n,l=>a(l))}}const r=M0("auth");return r&&aD(n,`http://${r}`),n}function C4(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}tD({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=jn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",C4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});b4("Browser");const N4={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},iS=B0(N4),ne=hx(iS),x4=I4(iS),rS=({className:e=""})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:T.jsx("path",{d:"m9 18 6-6-6-6"})}),sS=({className:e=""})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("path",{d:"M19 12H5"}),T.jsx("polyline",{points:"12 19 5 12 12 5"})]}),aS=({className:e="",filled:t=!1})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("circle",{cx:"11",cy:"11",r:"8"}),T.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),D4=({className:e=""})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[T.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),T.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),O4=({className:e=""})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:T.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),Gd=({className:e="",filled:t=!1})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:T.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),Mv=({className:e=""})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),T.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),oS=({className:e="",filled:t=!1})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:T.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),V4=({className:e="",filled:t=!1})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),T.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),M4=({className:e="",filled:t=!1})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("path",{d:"M4 22h16"}),T.jsx("path",{d:"M7 22V2h10v20"}),T.jsx("path",{d:"M7 12h4"})]}),k4=({className:e=""})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:T.jsx("path",{d:"m15 18-6-6 6-6"})}),P4=({className:e=""})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:T.jsx("path",{d:"m9 18 6-6-6-6"})}),U4=({className:e=""})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),T.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),L4=()=>T.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main",children:[T.jsx(Gd,{className:"animate-pulse-heart text-accent",filled:!0}),T.jsx("p",{className:"mt-4 text-lg opacity-70",children:"Загрузка..."})]}),jg=({onClose:e,onSelectPlan:t})=>{const n=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return T.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:T.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[T.jsx(O4,{className:"mx-auto mb-4 text-accent"}),T.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),T.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),T.jsx("div",{className:"space-y-3",children:n.map(i=>T.jsxs("button",{onClick:()=>t(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[T.jsx("p",{className:"font-bold",children:i.name}),T.jsxs("p",{className:"text-sm",children:[i.price," ₽"]})]},i.duration))}),T.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},zg=({onClose:e,onSelectMethod:t,plan:n})=>T.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:T.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[T.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),T.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),T.jsxs("div",{className:"space-y-3",children:[T.jsxs("button",{onClick:()=>t("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[T.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),T.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),T.jsxs("button",{onClick:()=>t("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[T.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),T.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]})]}),T.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Назад"})]})}),Zr=({title:e,onBack:t})=>T.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[t&&T.jsx("button",{onClick:t,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:T.jsx(sS,{})}),T.jsx("h1",{className:"text-xl font-bold",children:e})]}),Bg=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>T.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:e.length>0?e.map((r,s)=>T.jsx("div",{onClick:()=>t(r),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${s*50}ms`},children:T.jsxs("div",{className:"relative transition-all duration-300",children:[T.jsx("button",{onClick:a=>{a.stopPropagation(),i(r.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(r.id)?"text-accent":""}`,children:T.jsx(oS,{filled:n.includes(r.id),width:"20",height:"20"})}),T.jsx("img",{src:`/tene/${r.coverUrl}`,alt:r.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),T.jsx("h2",{className:"mt-2 font-semibold text-xs truncate",children:r.title})]})},r.id)):T.jsx("p",{className:"col-span-3 text-center opacity-70",children:"Ничего не найдено."})}),j4=({novel:e,onSelectChapter:t,onGenreSelect:n,subscription:i,botUsername:r,userId:s,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:h})=>{const[d,g]=G.useState(!1),[m,_]=G.useState(null),[x,V]=G.useState("newest"),[M,w]=G.useState(!1),v=G.useRef(null),[R,D]=G.useState(!1),j=i&&new Date(i.expires_at)>new Date,H=G.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);G.useEffect(()=>{v.current&&setTimeout(()=>{v.current&&D(v.current.scrollHeight>v.current.clientHeight)},100)},[e.description]);const E=G.useMemo(()=>{const C=[...a];return x==="newest"?C.reverse():a},[a,x]),y=C=>{!j&&C.isPaid?g(!0):t(C)},A=()=>{if(H){const C=a.find(b=>b.id===H);C&&t(C)}},S=C=>_(C),I=async C=>{var Ot;const b=(Ot=window.Telegram)==null?void 0:Ot.WebApp;if(!b||!s||!m){console.error("Telegram Web App, userId, or selectedPlan is not available."),b&&b.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}b.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не реагирует после того, как вы выбрали тариф, не волнуйтесь! Попробуйте отправить команду /start еще раз.",async Ae=>{if(!Ae)return;const z=Re(ne,"users",s);try{await Hs(z,{pendingSubscription:{...m,method:C,date:new Date().toISOString()}},{merge:!0}),b.openTelegramLink(`https://t.me/${r}?start=${s}`),b.close()}catch(X){console.error("Ошибка записи в Firebase:",X),b.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};return T.jsxs("div",{className:"text-text-main",children:[T.jsx(Zr,{title:e.title,onBack:h}),T.jsxs("div",{className:"relative h-64",children:[T.jsx("img",{src:`/tene/${e.coverUrl}`,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),T.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[T.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:e.title}),T.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:e.author})]})]}),T.jsxs("div",{className:"p-4",children:[T.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(C=>T.jsx("button",{onClick:()=>n(C),className:"text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 bg-component-bg text-text-main border border-border-color hover:bg-border-color",children:C},C))}),T.jsx("div",{ref:v,className:`relative overflow-hidden transition-all duration-500 ${M?"max-h-full":"max-h-24"}`,children:T.jsx("p",{className:"text-sm mb-2 opacity-80 font-body",children:e.description})}),R&&T.jsx("div",{className:"text-right",children:T.jsx("button",{onClick:()=>w(!M),className:"text-sm font-semibold text-accent mb-4",children:M?"Скрыть":"Читать полностью..."})}),H&&T.jsxs("button",{onClick:A,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",H,")"]}),T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),T.jsx("button",{onClick:()=>V(C=>C==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:x==="newest"?"Сначала новые":"Сначала старые"})]}),j&&T.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",new Date(i.expires_at).toLocaleDateString()]}),l?T.jsx("p",{children:"Загрузка глав..."}):T.jsx("div",{className:"flex flex-col gap-3",children:E.map(C=>{const b=!j&&C.isPaid,Ot=H===C.id;return T.jsxs("div",{onClick:()=>y(C),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${b?"opacity-70":""}`,children:[T.jsxs("div",{className:"flex items-center gap-3",children:[Ot&&T.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),T.jsx("p",{className:"font-semibold",children:C.title})]}),b?T.jsx(D4,{}):T.jsx(rS,{})]},C.id)})}),d&&T.jsx(jg,{onClose:()=>g(!1),onSelectPlan:S}),m&&T.jsx(zg,{onClose:()=>_(null),onSelectMethod:I,plan:m})]})]})},z4=({chapter:e,novel:t,fontSize:n,onFontSizeChange:i,userId:r,userName:s,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,botUsername:d,onBack:g,isUserAdmin:m})=>{const[_,x]=G.useState([]),[V,M]=G.useState(""),[w,v]=G.useState(null),[R,D]=G.useState(""),[j,H]=G.useState(null),[E,y]=G.useState(""),[A,S]=G.useState(0),[I,C]=G.useState(!1),[b,Ot]=G.useState({}),[Ae,z]=G.useState(!1),[X,$]=G.useState(!1),[pt,vt]=G.useState(!1),[Ue,Jt]=G.useState(null),[Ct,te]=G.useState(""),[ee,vr]=G.useState(!0),Le=h&&new Date(h.expires_at)>new Date,_n=G.useMemo(()=>Re(ne,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]),Tr=L=>L!=null&&L.toDate?L.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"";G.useEffect(()=>{const L=wu(_n,Vt=>{var Bt;S(((Bt=Vt.data())==null?void 0:Bt.likeCount)||0)}),Q=Tx(uv(ne,`chapters_metadata/${t.id}_${e.id}/comments`),Ex("timestamp","asc")),et=wu(Q,Vt=>{const Bt=Vt.docs.map(ln=>({id:ln.id,...ln.data()}));x(Bt),r&&Bt.forEach(ln=>{const je=Re(ne,`chapters_metadata/${t.id}_${e.id}/comments/${ln.id}/likes`,r);Bd(je).then(Sr=>{Ot(En=>({...En,[ln.id]:Sr.exists()}))})})});let st=()=>{};if(r){const Vt=Re(ne,`chapters_metadata/${t.id}_${e.id}/likes`,r);st=wu(Vt,Bt=>{C(Bt.exists())})}return()=>{L(),et(),st()}},[_n,t.id,e.id,r]),G.useEffect(()=>{(async()=>{if(vr(!0),te(""),e.isPaid&&!Le){vr(!1),te(`### 🔒 Для доступа к этой главе необходима подписка.

Пожалуйста, оформите подписку в разделе "Профиль", чтобы продолжить чтение.`);return}try{const Q=Re(ne,"chapter_content",`${t.id}-${e.id}`),et=await Bd(Q);et.exists()?te(et.data().content):te(`## Ошибка

Не удалось загрузить текст главы. Пожалуйста, попробуйте позже.`)}catch(Q){console.error("Ошибка загрузки главы:",Q),te(`## Ошибка

Произошла ошибка при загрузке. Проверьте ваше интернет-соединение.`)}finally{vr(!1)}})()},[t.id,e.id,Le]);const Fn=async(L,Q=null)=>{L.preventDefault();const et=Q?E:V;if(!(!et.trim()||!r))try{await Hs(_n,{},{merge:!0});const st=uv(ne,`chapters_metadata/${t.id}_${e.id}/comments`),Vt={userId:r,userName:s||"Аноним",text:et,timestamp:Tf(),likeCount:0};Q&&(Vt.replyTo=Q),await Rx(st,Vt),Q?(H(null),y("")):M("")}catch(st){console.error("Ошибка добавления комментария:",st)}},Ti=async L=>{if(!r)return;const Q=Re(ne,`chapters_metadata/${t.id}_${e.id}/comments`,L),et=Re(ne,`chapters_metadata/${t.id}_${e.id}/comments/${L}/likes`,r);try{await pv(ne,async st=>{const Vt=await st.get(et),Bt=await st.get(Q);if(!Bt.exists())return;const ln=Bt.data().likeCount||0;Vt.exists()?(st.delete(et),st.update(Q,{likeCount:Math.max(0,ln-1)}),Ot(je=>({...je,[L]:!1}))):(st.set(et,{timestamp:Tf()}),st.update(Q,{likeCount:ln+1}),Ot(je=>({...je,[L]:!0})))})}catch(st){console.error("Ошибка при обновлении лайка комментария:",st)}},Gn=L=>{v(L.id),D(L.text)},Er=async L=>{if(!R.trim())return;const Q=Re(ne,`chapters_metadata/${t.id}_${e.id}/comments`,L);await Sx(Q,{text:R}),v(null),D("")},Ar=async L=>{const Q=Re(ne,`chapters_metadata/${t.id}_${e.id}/comments`,L);await wx(Q)},br=async()=>{if(!r)return;const L=Re(ne,`chapters_metadata/${t.id}_${e.id}/likes`,r);try{await pv(ne,async Q=>{var Bt;const et=await Q.get(L),Vt=((Bt=(await Q.get(_n)).data())==null?void 0:Bt.likeCount)||0;et.exists()?(Q.delete(L),Q.set(_n,{likeCount:Math.max(0,Vt-1)},{merge:!0})):(Q.set(L,{timestamp:Tf()}),Q.set(_n,{likeCount:Vt+1},{merge:!0}))})}catch(Q){console.error("Ошибка при обновлении лайка:",Q)}},Ei=L=>{L&&(!Le&&L.isPaid?(z(!1),vt(!0)):(l(L),z(!1)))},Ra=L=>{Jt(L),vt(!1)},rt=async L=>{var et;const Q=(et=window.Telegram)==null?void 0:et.WebApp;Q&&r&&Ue&&Q.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async st=>{if(st){const Vt=Re(ne,"users",r);try{await Hs(Vt,{pendingSubscription:{...Ue,method:L,date:new Date().toISOString()}},{merge:!0}),Q.openTelegramLink(`https://t.me/${d}?start=${r}`),Q.close()}catch(Bt){console.error("Ошибка записи в Firebase:",Bt),Q.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})},lt=u.findIndex(L=>L.id===e.id),zt=u[lt-1],vn=u[lt+1],Tn=L=>window.marked?`<div class="prose">${window.marked.parse(L)}</div>`:L,on=L=>{const Q={},et=[];return L.forEach(st=>{Q[st.id]={...st,replies:[]}}),L.forEach(st=>{st.replyTo&&Q[st.replyTo]?Q[st.replyTo].replies.push(Q[st.id]):et.push(Q[st.id])}),et},De=({comment:L,level:Q=0})=>T.jsxs("div",{style:{marginLeft:`${Q*16}px`},className:"flex flex-col",children:[T.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[T.jsxs("div",{className:"flex justify-between items-center text-xs opacity-70 mb-1",children:[T.jsx("p",{className:"font-bold text-sm text-text-main opacity-100",children:L.userName}),T.jsx("span",{children:Tr(L.timestamp)})]}),w===L.id?T.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[T.jsx("input",{type:"text",value:R,onChange:et=>D(et.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),T.jsx("button",{onClick:()=>Er(L.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),T.jsx("button",{onClick:()=>v(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):T.jsx("p",{className:"text-sm mt-1 opacity-90",children:L.text}),T.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[T.jsxs("button",{onClick:()=>Ti(L.id),className:"flex items-center gap-1 text-xs text-gray-500",children:[T.jsx(Gd,{filled:b[L.id],className:`w-4 h-4 ${b[L.id]?"text-accent":""}`}),T.jsx("span",{children:L.likeCount||0})]}),T.jsx("button",{onClick:()=>{H(L.id),y("")},className:"text-xs text-gray-500",children:"Ответить"}),(r===L.userId||m)&&T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:()=>Gn(L),className:"text-xs text-gray-500",children:"Редактировать"}),T.jsx("button",{onClick:()=>Ar(L.id),className:"text-xs text-red-500",children:"Удалить"})]})]})]}),j===L.id&&T.jsxs("form",{onSubmit:et=>Fn(et,L.id),className:"flex items-center gap-2 mt-2",children:[T.jsx("input",{type:"text",value:E,onChange:et=>y(et.target.value),placeholder:`Ответ для ${L.userName}...`,className:"w-full bg-background border border-border-color rounded-lg py-1 px-3 text-sm"}),T.jsx("button",{type:"submit",className:"p-1.5 rounded-full bg-accent text-white",children:T.jsx(Mv,{className:"w-4 h-4"})})]}),L.replies&&L.replies.length>0&&T.jsx("div",{className:"mt-2 space-y-2 border-l-2 border-border-color pl-2",children:L.replies.map(et=>T.jsx(De,{comment:et,level:0},et.id))})]});return T.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[T.jsx(Zr,{title:t.title,onBack:g}),T.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[T.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:e.title}),T.jsx("div",{className:`whitespace-normal leading-relaxed ${a}`,style:{fontSize:`${n}px`},dangerouslySetInnerHTML:{__html:ee?"<p>Загрузка...</p>":Tn(Ct)}}),T.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"╚══ ≪ °❈° ≫ ══╝"}),T.jsxs("div",{className:"border-t border-border-color pt-8",children:[T.jsx("div",{className:"flex items-center gap-4 mb-8",children:T.jsxs("button",{onClick:br,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[T.jsx(Gd,{filled:I,className:I?"text-accent":""}),T.jsx("span",{className:"font-bold text-lg",children:A})]})}),T.jsx("h3",{className:"text-xl font-bold mb-4",children:"Комментарии"}),T.jsx("div",{className:"space-y-4 mb-6",children:_.length>0?on(_).map(L=>T.jsx(De,{comment:L},L.id)):T.jsx("p",{className:"opacity-70 text-sm",children:"Комментариев пока нет. Будьте первым!"})}),T.jsxs("form",{onSubmit:L=>Fn(L,null),className:"flex items-center gap-2",children:[T.jsx("input",{type:"text",value:V,onChange:L=>M(L.target.value),placeholder:"Написать комментарий...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),T.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:T.jsx(Mv,{className:"w-5 h-5"})})]})]})]}),T.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[T.jsx("button",{onClick:()=>Ei(zt),disabled:!zt,className:"p-2 disabled:opacity-50",children:T.jsx(sS,{})}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:()=>z(!0),className:"px-4 py-2 rounded-lg bg-background",children:"Оглавление"}),T.jsx("button",{onClick:()=>$(!0),className:"p-2 rounded-lg bg-background",children:T.jsx(U4,{})})]}),T.jsx("button",{onClick:()=>Ei(vn),disabled:!vn,className:"p-2 disabled:opacity-50",children:T.jsx(rS,{className:"opacity-100"})})]}),Ae&&T.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>z(!1),children:T.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:L=>L.stopPropagation(),children:[T.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:"Главы"}),T.jsx("div",{className:"overflow-y-auto",children:T.jsx("div",{className:"flex flex-col gap-2",children:u.map(L=>T.jsx("button",{onClick:()=>Ei(L),className:`p-2 text-left rounded-md ${L.id===e.id?"bg-accent text-white":"bg-background"}`,children:L.title},L.id))})})]})}),X&&T.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>$(!1),children:T.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:L=>L.stopPropagation(),children:[T.jsx("h3",{className:"font-bold text-lg mb-4",children:"Настройки чтения"}),T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("span",{children:"Размер текста"}),T.jsxs("div",{className:"w-28 h-12 rounded-full bg-background flex items-center justify-around border border-border-color",children:[T.jsx("button",{onClick:()=>i(-1),className:"text-2xl font-bold",children:"-"}),T.jsx("button",{onClick:()=>i(1),className:"text-2xl font-bold",children:"+"})]})]})]})}),pt&&T.jsx(jg,{onClose:()=>vt(!1),onSelectPlan:Ra}),Ue&&T.jsx(zg,{onClose:()=>Jt(null),onSelectMethod:rt,plan:Ue})]})},B4=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>{const[r,s]=G.useState(""),a=G.useMemo(()=>r?e.filter(l=>l.title.toLowerCase().includes(r.toLowerCase())):[],[e,r]);return T.jsxs("div",{children:[T.jsx(Zr,{title:"Поиск"}),T.jsxs("div",{className:"p-4",children:[T.jsxs("div",{className:"relative mb-6",children:[T.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:T.jsx(aS,{className:"text-text-main opacity-50"})}),T.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:r,onChange:l=>s(l.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent transition-shadow duration-300"})]}),T.jsx(Bg,{novels:a,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]})]})},q4=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>T.jsxs("div",{children:[T.jsx(Zr,{title:"Закладки"}),T.jsx(Bg,{novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]}),H4=({subscription:e,onGetSubscriptionClick:t,userId:n})=>{const i=e&&new Date(e.expires_at)>new Date,r=()=>{n&&navigator.clipboard.writeText(n).then(()=>{console.log("Firebase UID скопирован в буфер обмена")}).catch(s=>{console.error("Не удалось скопировать UID: ",s)})};return T.jsxs("div",{children:[T.jsx(Zr,{title:"Профиль"}),T.jsxs("div",{className:"p-4 space-y-4",children:[T.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[T.jsx("h3",{className:"font-bold mb-2",children:"Подписка"}),i?T.jsxs("div",{children:[T.jsx("p",{className:"text-green-500",children:"Активна"}),T.jsxs("p",{className:"text-sm opacity-70",children:["Заканчивается: ",new Date(e.expires_at).toLocaleDateString()]})]}):T.jsxs("div",{children:[T.jsx("p",{className:"text-red-500",children:"Неактивна"}),T.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Оформите подписку, чтобы получить доступ ко всем платным главам."}),T.jsx("button",{onClick:t,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:"Оформить подписку"})]})]}),T.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[T.jsx("h3",{className:"font-bold mb-2",children:"Ваш ID для администрирования"}),T.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Этот ID нужен для назначения прав администратора через Telegram-бота."}),T.jsx("div",{className:"bg-background p-2 rounded-md text-xs break-all mb-3",children:T.jsx("code",{children:n||"Загрузка..."})}),T.jsx("button",{onClick:r,disabled:!n,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold transition-all hover:scale-105 disabled:opacity-50",children:"Копировать ID"})]})]})]})},F4=({activeTab:e,setActiveTab:t})=>{const n=[{id:"library",label:"Библиотека",icon:M4},{id:"search",label:"Поиск",icon:aS},{id:"bookmarks",label:"Закладки",icon:oS},{id:"profile",label:"Профиль",icon:V4}];return T.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:T.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>T.jsxs("button",{onClick:()=>t(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===i.id?"text-accent":"text-text-main opacity-60"}`,children:[T.jsx(i.icon,{filled:e===i.id}),T.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},G4=({onReadMore:e})=>{const[t,n]=G.useState([]),[i,r]=G.useState(0);G.useEffect(()=>{fetch("/tene/data/news.json").then(u=>u.json()).then(n).catch(u=>console.error("Failed to fetch news",u))},[]);const s=()=>r(u=>(u+1)%t.length),a=()=>r(u=>(u-1+t.length)%t.length);if(t.length===0)return null;const l=t[i];return T.jsx("div",{className:"p-4",children:T.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[T.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h3",{className:"font-bold text-text-main",children:l.title}),T.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),T.jsx("button",{onClick:()=>e(l),className:"text-sm font-bold text-accent mt-1",children:"Читать далее"})]}),T.jsxs("div",{className:"flex flex-col",children:[T.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:T.jsx(k4,{className:"w-5 h-5"})}),T.jsx("button",{onClick:s,className:"p-1 rounded-full hover:bg-background",children:T.jsx(P4,{className:"w-5 h-5"})})]})]})})},Q4=({newsItem:e,onClose:t})=>T.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:T.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main",onClick:n=>n.stopPropagation(),children:[T.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title}),T.jsx("p",{className:"whitespace-pre-wrap opacity-80",children:e.fullText}),T.jsx("button",{onClick:t,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})});function Y4(){const[e,t]=G.useState(16),[n,i]=G.useState("font-sans"),[r,s]=G.useState("list"),[a,l]=G.useState("library"),[u,h]=G.useState([]),[d,g]=G.useState(null),[m,_]=G.useState(null),[x,V]=G.useState(null),[M,w]=G.useState(null),[v,R]=G.useState(null),[D,j]=G.useState(null),[H,E]=G.useState(!0),[y,A]=G.useState(!1),[S,I]=G.useState([]),[C,b]=G.useState(!0),[Ot,Ae]=G.useState(null),[z,X]=G.useState([]),[$,pt]=G.useState(!1),[vt,Ue]=G.useState(null),[Jt,Ct]=G.useState(null),te="tenebrisverbot",ee=G.useCallback(async rt=>{if(v){const lt=Re(ne,"users",v);try{await Hs(lt,rt,{merge:!0})}catch(zt){console.error("Не удалось обновить данные пользователя:",zt)}}},[v]),vr=G.useCallback(rt=>{t(lt=>{const zt=Math.max(12,Math.min(32,lt+rt));return ee({settings:{fontSize:zt,fontClass:n}}),zt})},[n,ee]);G.useEffect(()=>{(async()=>{var lt,zt,vn,Tn,on,De;try{const L=await fetch("/tene/data/novels.json");if(!L.ok)throw console.error("Ошибка загрузки novels.json. Статус:",L.status),new Error("Failed to fetch novels");const Q=await L.json();h(Q.novels);const st=(await hD(x4)).user,Vt=(lt=window.Telegram)==null?void 0:lt.WebApp;let Bt=null;Vt?(Vt.ready(),Vt.expand(),j(((vn=(zt=Vt.initDataUnsafe)==null?void 0:zt.user)==null?void 0:vn.first_name)||"Аноним"),Bt=(De=(on=(Tn=Vt.initDataUnsafe)==null?void 0:Tn.user)==null?void 0:on.id)==null?void 0:De.toString()):j("Аноним"),R(st.uid);const ln=await st.getIdTokenResult();if(A(!!ln.claims.admin),st.uid){const je=Re(ne,"users",st.uid);Bt&&await Hs(je,{telegramId:Bt},{merge:!0}),wu(je,Sr=>{if(Sr.exists()){const En=Sr.data();w(En.subscription||null),Ae(En.lastRead||null),X(En.bookmarks||[]),En.settings&&(t(En.settings.fontSize||16),i(En.settings.fontClass||"font-sans"))}})}}catch(L){console.error("Критическая ошибка инициализации:",L)}finally{E(!1)}})()},[]),G.useEffect(()=>{if(!d){I([]);return}(async()=>{b(!0);try{const lt=Re(ne,"chapter_info",d.id.toString()),zt=await Bd(lt);if(zt.exists()){const Tn=zt.data().chapters||{},on=Object.keys(Tn).map(De=>({id:parseInt(De),title:`Глава ${De}`,isPaid:Tn[De].isPaid||!1})).sort((De,L)=>De.id-L.id);I(on)}else console.log("Документ с главами не найден в chapter_info!"),I([])}catch(lt){console.error("Ошибка загрузки глав из Firebase:",lt),I([])}finally{b(!1)}})()},[d]);const Le=G.useCallback(()=>{r==="reader"?s("details"):r==="details"&&(s("list"),V(null))},[r]);G.useEffect(()=>{var lt;const rt=(lt=window.Telegram)==null?void 0:lt.WebApp;if(rt)return rt.onEvent("backButtonClicked",Le),r==="list"?rt.BackButton.hide():rt.BackButton.show(),()=>rt.offEvent("backButtonClicked",Le)},[r,Le]),G.useEffect(()=>{var lt;const rt=(lt=window.Telegram)==null?void 0:lt.WebApp;rt&&(rt.setHeaderColor("#FFFFFF"),rt.setBackgroundColor("#F5F1ED"))},[]);const _n=G.useCallback(async rt=>{if(_(rt),s("reader"),v&&d){const lt={...Ot||{},[d.id]:{novelId:d.id,chapterId:rt.id,timestamp:new Date().toISOString()}};Ae(lt),await ee({lastRead:lt})}},[v,d,Ot,ee]),Tr=rt=>{g(rt),s("details")},Fn=rt=>{V(rt),s("list"),l("library")},Ti=()=>{V(null)},Gn=G.useCallback(async rt=>{const lt=z.includes(rt)?z.filter(zt=>zt!==rt):[...z,rt];X(lt),await ee({bookmarks:lt})},[z,ee]),Er=G.useMemo(()=>u.filter(rt=>z.includes(rt.id)),[u,z]),Ar=()=>{pt(!0)},br=rt=>{Ue(rt),pt(!1)},Ei=async rt=>{var zt;const lt=(zt=window.Telegram)==null?void 0:zt.WebApp;if(!lt||!v||!vt){console.error("Telegram Web App, userId, or selectedPlan is not available."),lt&&lt.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}lt.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не реагирует после того, как вы выбрали тариф, не волнуйтесь! Попробуйте отправить команду /start еще раз.",async vn=>{if(!vn)return;const Tn=Re(ne,"users",v);try{await Hs(Tn,{pendingSubscription:{...vt,method:rt,date:new Date().toISOString()}},{merge:!0}),lt.openTelegramLink(`https://t.me/${te}?start=true`),lt.close()}catch(on){console.error("Ошибка записи в Firebase:",on),lt.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};if(H)return T.jsx(L4,{});const Ra=()=>{if(r==="details")return T.jsx(j4,{novel:d,onSelectChapter:_n,onGenreSelect:Fn,subscription:M,botUsername:te,userId:v,chapters:S,isLoadingChapters:C,lastReadData:Ot,onBack:Le});if(r==="reader")return T.jsx(z4,{chapter:m,novel:d,fontSize:e,onFontSizeChange:vr,userId:v,userName:D,currentFontClass:n,onSelectChapter:_n,allChapters:S,subscription:M,botUsername:te,onBack:Le,isUserAdmin:y});switch(a){case"library":return T.jsxs(T.Fragment,{children:[T.jsx(Zr,{title:"Библиотека"}),T.jsx(G4,{onReadMore:Ct}),x&&T.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[T.jsxs("p",{className:"text-sm",children:[T.jsx("span",{className:"opacity-70",children:"Жанр:"}),T.jsx("strong",{className:"ml-2",children:x})]}),T.jsx("button",{onClick:Ti,className:"text-xs font-bold text-accent hover:underline",children:"Сбросить"})]}),T.jsx(Bg,{novels:u.filter(rt=>!x||rt.genres.includes(x)),onSelectNovel:Tr,bookmarks:z,onToggleBookmark:Gn})]});case"search":return T.jsx(B4,{novels:u,onSelectNovel:Tr,bookmarks:z,onToggleBookmark:Gn});case"bookmarks":return T.jsx(q4,{novels:Er,onSelectNovel:Tr,bookmarks:z,onToggleBookmark:Gn});case"profile":return T.jsx(H4,{subscription:M,onGetSubscriptionClick:Ar,userId:v});default:return T.jsx(Zr,{title:"Библиотека"})}};return T.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${y?"":"no-select"}`,children:[T.jsx("div",{className:"pb-20",children:Ra()}),r==="list"&&T.jsx(F4,{activeTab:a,setActiveTab:l}),$&&T.jsx(jg,{onClose:()=>pt(!1),onSelectPlan:br}),vt&&T.jsx(zg,{onClose:()=>Ue(null),onSelectMethod:Ei,plan:vt}),Jt&&T.jsx(Q4,{newsItem:Jt,onClose:()=>Ct(null)})]})}CR.createRoot(document.getElementById("root")).render(T.jsx(G.StrictMode,{children:T.jsx(Y4,{})}));
