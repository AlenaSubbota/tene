(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function dE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mE={exports:{}},Wc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dA=Symbol.for("react.transitional.element"),mA=Symbol.for("react.fragment");function pE(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:dA,type:t,key:i,ref:e!==void 0?e:null,props:n}}Wc.Fragment=mA;Wc.jsx=pE;Wc.jsxs=pE;mE.exports=Wc;var c=mE.exports,gE={exports:{}},se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm=Symbol.for("react.transitional.element"),pA=Symbol.for("react.portal"),gA=Symbol.for("react.fragment"),yA=Symbol.for("react.strict_mode"),_A=Symbol.for("react.profiler"),vA=Symbol.for("react.consumer"),EA=Symbol.for("react.context"),TA=Symbol.for("react.forward_ref"),bA=Symbol.for("react.suspense"),wA=Symbol.for("react.memo"),yE=Symbol.for("react.lazy"),hy=Symbol.iterator;function SA(t){return t===null||typeof t!="object"?null:(t=hy&&t[hy]||t["@@iterator"],typeof t=="function"?t:null)}var _E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vE=Object.assign,EE={};function Na(t,e,n){this.props=t,this.context=e,this.refs=EE,this.updater=n||_E}Na.prototype.isReactComponent={};Na.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Na.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function TE(){}TE.prototype=Na.prototype;function Am(t,e,n){this.props=t,this.context=e,this.refs=EE,this.updater=n||_E}var xm=Am.prototype=new TE;xm.constructor=Am;vE(xm,Na.prototype);xm.isPureReactComponent=!0;var fy=Array.isArray,Ue={H:null,A:null,T:null,S:null,V:null},bE=Object.prototype.hasOwnProperty;function Rm(t,e,n,i,s,r){return n=r.ref,{$$typeof:Sm,type:t,key:e,ref:n!==void 0?n:null,props:r}}function AA(t,e){return Rm(t.type,e,void 0,void 0,void 0,t.props)}function Im(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sm}function xA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dy=/\/+/g;function uf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xA(""+t.key):e.toString(36)}function my(){}function RA(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(my,my):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function xr(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Sm:case pA:a=!0;break;case yE:return a=t._init,xr(a(t._payload),e,n,i,s)}}if(a)return s=s(t),a=i===""?"."+uf(t,0):i,fy(s)?(n="",a!=null&&(n=a.replace(dy,"$&/")+"/"),xr(s,e,n,"",function(f){return f})):s!=null&&(Im(s)&&(s=AA(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(dy,"$&/")+"/")+a)),e.push(s)),1;a=0;var l=i===""?".":i+":";if(fy(t))for(var u=0;u<t.length;u++)i=t[u],r=l+uf(i,u),a+=xr(i,e,n,r,s);else if(u=SA(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,r=l+uf(i,u++),a+=xr(i,e,n,r,s);else if(r==="object"){if(typeof t.then=="function")return xr(RA(t),e,n,i,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function hu(t,e,n){if(t==null)return t;var i=[],s=0;return xr(t,i,"","",function(r){return e.call(n,r,s++)}),i}function IA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var py=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function CA(){}se.Children={map:hu,forEach:function(t,e,n){hu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hu(t,function(){e++}),e},toArray:function(t){return hu(t,function(e){return e})||[]},only:function(t){if(!Im(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Na;se.Fragment=gA;se.Profiler=_A;se.PureComponent=Am;se.StrictMode=yA;se.Suspense=bA;se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ue;se.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ue.H.useMemoCache(t)}};se.cache=function(t){return function(){return t.apply(null,arguments)}};se.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=vE({},t.props),s=t.key,r=void 0;if(e!=null)for(a in e.ref!==void 0&&(r=void 0),e.key!==void 0&&(s=""+e.key),e)!bE.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(i[a]=e[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Rm(t.type,s,void 0,void 0,r,i)};se.createContext=function(t){return t={$$typeof:EA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:vA,_context:t},t};se.createElement=function(t,e,n){var i,s={},r=null;if(e!=null)for(i in e.key!==void 0&&(r=""+e.key),e)bE.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return Rm(t,r,void 0,void 0,null,s)};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:TA,render:t}};se.isValidElement=Im;se.lazy=function(t){return{$$typeof:yE,_payload:{_status:-1,_result:t},_init:IA}};se.memo=function(t,e){return{$$typeof:wA,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=Ue.T,n={};Ue.T=n;try{var i=t(),s=Ue.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(CA,py)}catch(r){py(r)}finally{Ue.T=e}};se.unstable_useCacheRefresh=function(){return Ue.H.useCacheRefresh()};se.use=function(t){return Ue.H.use(t)};se.useActionState=function(t,e,n){return Ue.H.useActionState(t,e,n)};se.useCallback=function(t,e){return Ue.H.useCallback(t,e)};se.useContext=function(t){return Ue.H.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t,e){return Ue.H.useDeferredValue(t,e)};se.useEffect=function(t,e,n){var i=Ue.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(t,e)};se.useId=function(){return Ue.H.useId()};se.useImperativeHandle=function(t,e,n){return Ue.H.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return Ue.H.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return Ue.H.useLayoutEffect(t,e)};se.useMemo=function(t,e){return Ue.H.useMemo(t,e)};se.useOptimistic=function(t,e){return Ue.H.useOptimistic(t,e)};se.useReducer=function(t,e,n){return Ue.H.useReducer(t,e,n)};se.useRef=function(t){return Ue.H.useRef(t)};se.useState=function(t){return Ue.H.useState(t)};se.useSyncExternalStore=function(t,e,n){return Ue.H.useSyncExternalStore(t,e,n)};se.useTransition=function(){return Ue.H.useTransition()};se.version="19.1.1";gE.exports=se;var L=gE.exports;const wE=dE(L);var SE={exports:{}},Jc={},AE={exports:{}},xE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,$){var Y=B.length;B.push($);e:for(;0<Y;){var ue=Y-1>>>1,ce=B[ue];if(0<s(ce,$))B[ue]=$,B[Y]=ce,Y=ue;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var $=B[0],Y=B.pop();if(Y!==$){B[0]=Y;e:for(var ue=0,ce=B.length,Zt=ce>>>1;ue<Zt;){var ot=2*(ue+1)-1,me=B[ot],lt=ot+1,qe=B[lt];if(0>s(me,Y))lt<ce&&0>s(qe,me)?(B[ue]=qe,B[lt]=Y,ue=lt):(B[ue]=me,B[ot]=Y,ue=ot);else if(lt<ce&&0>s(qe,Y))B[ue]=qe,B[lt]=Y,ue=lt;else break e}}return $}function s(B,$){var Y=B.sortIndex-$.sortIndex;return Y!==0?Y:B.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],f=[],m=1,g=null,p=3,_=!1,C=!1,V=!1,D=!1,w=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function O(B){for(var $=n(f);$!==null;){if($.callback===null)i(f);else if($.startTime<=B)i(f),$.sortIndex=$.expirationTime,e(u,$);else break;$=n(f)}}function U(B){if(V=!1,O(B),!C)if(n(u)!==null)C=!0,H||(H=!0,I());else{var $=n(f);$!==null&&pe(U,$.startTime-B)}}var H=!1,T=-1,v=5,b=-1;function S(){return D?!0:!(t.unstable_now()-b<v)}function R(){if(D=!1,H){var B=t.unstable_now();b=B;var $=!0;try{e:{C=!1,V&&(V=!1,E(T),T=-1),_=!0;var Y=p;try{t:{for(O(B),g=n(u);g!==null&&!(g.expirationTime>B&&S());){var ue=g.callback;if(typeof ue=="function"){g.callback=null,p=g.priorityLevel;var ce=ue(g.expirationTime<=B);if(B=t.unstable_now(),typeof ce=="function"){g.callback=ce,O(B),$=!0;break t}g===n(u)&&i(u),O(B)}else i(u);g=n(u)}if(g!==null)$=!0;else{var Zt=n(f);Zt!==null&&pe(U,Zt.startTime-B),$=!1}}break e}finally{g=null,p=Y,_=!1}$=void 0}}finally{$?I():H=!1}}}var I;if(typeof x=="function")I=function(){x(R)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Z=A.port2;A.port1.onmessage=R,I=function(){Z.postMessage(null)}}else I=function(){w(R,0)};function pe(B,$){T=w(function(){B(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var Y=p;p=$;try{return B()}finally{p=Y}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(B,$){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Y=p;p=B;try{return $()}finally{p=Y}},t.unstable_scheduleCallback=function(B,$,Y){var ue=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ue+Y:ue):Y=ue,B){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Y+ce,B={id:m++,callback:$,priorityLevel:B,startTime:Y,expirationTime:ce,sortIndex:-1},Y>ue?(B.sortIndex=Y,e(f,B),n(u)===null&&B===n(f)&&(V?(E(T),T=-1):V=!0,pe(U,Y-ue))):(B.sortIndex=ce,e(u,B),C||_||(C=!0,H||(H=!0,I()))),B},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(B){var $=p;return function(){var Y=p;p=$;try{return B.apply(this,arguments)}finally{p=Y}}}})(xE);AE.exports=xE;var NA=AE.exports,RE={exports:{}},Ft={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DA=L;function IE(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ui(){}var qt={d:{f:Ui,r:function(){throw Error(IE(522))},D:Ui,C:Ui,L:Ui,m:Ui,X:Ui,S:Ui,M:Ui},p:0,findDOMNode:null},OA=Symbol.for("react.portal");function VA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:OA,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var To=DA.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function eh(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=qt;Ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(IE(299));return VA(t,e,null,n)};Ft.flushSync=function(t){var e=To.T,n=qt.p;try{if(To.T=null,qt.p=2,t)return t()}finally{To.T=e,qt.p=n,qt.d.f()}};Ft.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,qt.d.C(t,e))};Ft.prefetchDNS=function(t){typeof t=="string"&&qt.d.D(t)};Ft.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=eh(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?qt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&qt.d.X(t,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Ft.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=eh(e.as,e.crossOrigin);qt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&qt.d.M(t)};Ft.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=eh(n,e.crossOrigin);qt.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Ft.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=eh(e.as,e.crossOrigin);qt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else qt.d.m(t)};Ft.requestFormReset=function(t){qt.d.r(t)};Ft.unstable_batchedUpdates=function(t,e){return t(e)};Ft.useFormState=function(t,e,n){return To.H.useFormState(t,e,n)};Ft.useFormStatus=function(){return To.H.useHostTransitionStatus()};Ft.version="19.1.1";function CE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CE)}catch(t){console.error(t)}}CE(),RE.exports=Ft;var MA=RE.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dt=NA,NE=L,kA=MA;function P(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function DE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function OE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gy(t){if(pl(t)!==t)throw Error(P(188))}function jA(t){var e=t.alternate;if(!e){if(e=pl(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return gy(s),t;if(r===i)return gy(s),e;r=r.sibling}throw Error(P(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(P(189))}}if(n.alternate!==i)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function VE(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=VE(t),e!==null)return e;t=t.sibling}return null}var je=Object.assign,PA=Symbol.for("react.element"),fu=Symbol.for("react.transitional.element"),co=Symbol.for("react.portal"),kr=Symbol.for("react.fragment"),ME=Symbol.for("react.strict_mode"),td=Symbol.for("react.profiler"),LA=Symbol.for("react.provider"),kE=Symbol.for("react.consumer"),ci=Symbol.for("react.context"),Cm=Symbol.for("react.forward_ref"),nd=Symbol.for("react.suspense"),id=Symbol.for("react.suspense_list"),Nm=Symbol.for("react.memo"),Hi=Symbol.for("react.lazy"),sd=Symbol.for("react.activity"),UA=Symbol.for("react.memo_cache_sentinel"),yy=Symbol.iterator;function no(t){return t===null||typeof t!="object"?null:(t=yy&&t[yy]||t["@@iterator"],typeof t=="function"?t:null)}var zA=Symbol.for("react.client.reference");function rd(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===zA?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kr:return"Fragment";case td:return"Profiler";case ME:return"StrictMode";case nd:return"Suspense";case id:return"SuspenseList";case sd:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case co:return"Portal";case ci:return(t.displayName||"Context")+".Provider";case kE:return(t._context.displayName||"Context")+".Consumer";case Cm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Nm:return e=t.displayName||null,e!==null?e:rd(t.type)||"Memo";case Hi:e=t._payload,t=t._init;try{return rd(t(e))}catch{}}return null}var ho=Array.isArray,te=NE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=kA.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fs={pending:!1,data:null,method:null,action:null},ad=[],jr=-1;function Yn(t){return{current:t}}function Et(t){0>jr||(t.current=ad[jr],ad[jr]=null,jr--)}function ze(t,e){jr++,ad[jr]=t.current,t.current=e}var jn=Yn(null),qo=Yn(null),ss=Yn(null),tc=Yn(null);function nc(t,e){switch(ze(ss,e),ze(qo,t),ze(jn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?b_(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=b_(e),t=WT(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Et(jn),ze(jn,t)}function la(){Et(jn),Et(qo),Et(ss)}function od(t){t.memoizedState!==null&&ze(tc,t);var e=jn.current,n=WT(e,t.type);e!==n&&(ze(qo,t),ze(jn,n))}function ic(t){qo.current===t&&(Et(jn),Et(qo)),tc.current===t&&(Et(tc),Wo._currentValue=Fs)}var ld=Object.prototype.hasOwnProperty,Dm=dt.unstable_scheduleCallback,cf=dt.unstable_cancelCallback,BA=dt.unstable_shouldYield,qA=dt.unstable_requestPaint,Pn=dt.unstable_now,HA=dt.unstable_getCurrentPriorityLevel,jE=dt.unstable_ImmediatePriority,PE=dt.unstable_UserBlockingPriority,sc=dt.unstable_NormalPriority,FA=dt.unstable_LowPriority,LE=dt.unstable_IdlePriority,GA=dt.log,QA=dt.unstable_setDisableYieldValue,gl=null,on=null;function Ji(t){if(typeof GA=="function"&&QA(t),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(gl,t)}catch{}}var ln=Math.clz32?Math.clz32:$A,KA=Math.log,YA=Math.LN2;function $A(t){return t>>>=0,t===0?32:31-(KA(t)/YA|0)|0}var du=256,mu=4194304;function Us(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function th(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var s=0,r=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var l=i&134217727;return l!==0?(i=l&~r,i!==0?s=Us(i):(a&=l,a!==0?s=Us(a):n||(n=l&~t,n!==0&&(s=Us(n))))):(l=i&~r,l!==0?s=Us(l):a!==0?s=Us(a):n||(n=i&~t,n!==0&&(s=Us(n)))),s===0?0:e!==0&&e!==s&&!(e&r)&&(r=s&-s,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:s}function yl(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function XA(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UE(){var t=du;return du<<=1,!(du&4194048)&&(du=256),t}function zE(){var t=mu;return mu<<=1,!(mu&62914560)&&(mu=4194304),t}function hf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _l(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ZA(t,e,n,i,s,r){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,f=t.hiddenUpdates;for(n=a&~n;0<n;){var m=31-ln(n),g=1<<m;l[m]=0,u[m]=-1;var p=f[m];if(p!==null)for(f[m]=null,m=0;m<p.length;m++){var _=p[m];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&BE(t,i,0),r!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=r&~(a&~e))}function BE(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-ln(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&4194090}function qE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ln(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}function Om(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Vm(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function HE(){var t=be.p;return t!==0?t:(t=window.event,t===void 0?32:lb(t.type))}function WA(t,e){var n=be.p;try{return be.p=t,e()}finally{be.p=n}}var Rs=Math.random().toString(36).slice(2),jt="__reactFiber$"+Rs,$t="__reactProps$"+Rs,Da="__reactContainer$"+Rs,ud="__reactEvents$"+Rs,JA="__reactListeners$"+Rs,e1="__reactHandles$"+Rs,_y="__reactResources$"+Rs,vl="__reactMarker$"+Rs;function Mm(t){delete t[jt],delete t[$t],delete t[ud],delete t[JA],delete t[e1]}function Pr(t){var e=t[jt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Da]||n[jt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=A_(t);t!==null;){if(n=t[jt])return n;t=A_(t)}return e}t=n,n=t.parentNode}return null}function Oa(t){if(t=t[jt]||t[Da]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function fo(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(P(33))}function $r(t){var e=t[_y];return e||(e=t[_y]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function yt(t){t[vl]=!0}var FE=new Set,GE={};function or(t,e){ua(t,e),ua(t+"Capture",e)}function ua(t,e){for(GE[t]=e,t=0;t<e.length;t++)FE.add(e[t])}var t1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vy={},Ey={};function n1(t){return ld.call(Ey,t)?!0:ld.call(vy,t)?!1:t1.test(t)?Ey[t]=!0:(vy[t]=!0,!1)}function Ou(t,e,n){if(n1(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function pu(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function ai(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}var ff,Ty;function Rr(t){if(ff===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ff=e&&e[1]||"",Ty=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ff+t+Ty}var df=!1;function mf(t,e){if(!t||df)return"";df=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var p=_}Reflect.construct(t,[],g)}else{try{g.call()}catch(_){p=_}t.call(g.prototype)}}else{try{throw Error()}catch(_){p=_}(g=t())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&p&&typeof _.stack=="string")return[_.stack,p.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),f=l.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<f.length&&!f[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===f.length)for(i=u.length-1,s=f.length-1;1<=i&&0<=s&&u[i]!==f[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==f[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==f[s]){var m=`
`+u[i].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=i&&0<=s);break}}}finally{df=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Rr(n):""}function i1(t){switch(t.tag){case 26:case 27:case 5:return Rr(t.type);case 16:return Rr("Lazy");case 13:return Rr("Suspense");case 19:return Rr("SuspenseList");case 0:case 15:return mf(t.type,!1);case 11:return mf(t.type.render,!1);case 1:return mf(t.type,!0);case 31:return Rr("Activity");default:return""}}function by(t){try{var e="";do e+=i1(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function mn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function QE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function s1(t){var e=QE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rc(t){t._valueTracker||(t._valueTracker=s1(t))}function KE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=QE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ac(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var r1=/[\n"\\]/g;function yn(t){return t.replace(r1,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function cd(t,e,n,i,s,r,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+mn(e)):t.value!==""+mn(e)&&(t.value=""+mn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?hd(t,a,mn(e)):n!=null?hd(t,a,mn(n)):i!=null&&t.removeAttribute("value"),s==null&&r!=null&&(t.defaultChecked=!!r),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+mn(l):t.removeAttribute("name")}function YE(t,e,n,i,s,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null))return;n=n!=null?""+mn(n):"",e=e!=null?""+mn(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function hd(t,e,n){e==="number"&&ac(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Xr(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+mn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function $E(t,e,n){if(e!=null&&(e=""+mn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+mn(n):""}function XE(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(P(92));if(ho(i)){if(1<i.length)throw Error(P(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=mn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i)}function ca(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var a1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wy(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||a1.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function ZE(t,e,n){if(e!=null&&typeof e!="object")throw Error(P(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var s in e)i=e[s],e.hasOwnProperty(s)&&n[s]!==i&&wy(t,s,i)}else for(var r in e)e.hasOwnProperty(r)&&wy(t,r,e[r])}function km(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var o1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),l1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vu(t){return l1.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var fd=null;function jm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lr=null,Zr=null;function Sy(t){var e=Oa(t);if(e&&(t=e.stateNode)){var n=t[$t]||null;e:switch(t=e.stateNode,e.type){case"input":if(cd(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=i[$t]||null;if(!s)throw Error(P(90));cd(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&KE(i)}break e;case"textarea":$E(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Xr(t,!!n.multiple,e,!1)}}}var pf=!1;function WE(t,e,n){if(pf)return t(e,n);pf=!0;try{var i=t(e);return i}finally{if(pf=!1,(Lr!==null||Zr!==null)&&(hh(),Lr&&(e=Lr,t=Zr,Zr=Lr=null,Sy(e),t)))for(e=0;e<t.length;e++)Sy(t[e])}}function Ho(t,e){var n=t.stateNode;if(n===null)return null;var i=n[$t]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dd=!1;if(Ei)try{var io={};Object.defineProperty(io,"passive",{get:function(){dd=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{dd=!1}var es=null,Pm=null,Mu=null;function JE(){if(Mu)return Mu;var t,e=Pm,n=e.length,i,s="value"in es?es.value:es.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===s[r-i];i++);return Mu=s.slice(t,1<i?1-i:void 0)}function ku(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gu(){return!0}function Ay(){return!1}function Xt(t){function e(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?gu:Ay,this.isPropagationStopped=Ay,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gu)},persist:function(){},isPersistent:gu}),e}var lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nh=Xt(lr),El=je({},lr,{view:0,detail:0}),u1=Xt(El),gf,yf,so,ih=je({},El,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==so&&(so&&t.type==="mousemove"?(gf=t.screenX-so.screenX,yf=t.screenY-so.screenY):yf=gf=0,so=t),gf)},movementY:function(t){return"movementY"in t?t.movementY:yf}}),xy=Xt(ih),c1=je({},ih,{dataTransfer:0}),h1=Xt(c1),f1=je({},El,{relatedTarget:0}),_f=Xt(f1),d1=je({},lr,{animationName:0,elapsedTime:0,pseudoElement:0}),m1=Xt(d1),p1=je({},lr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),g1=Xt(p1),y1=je({},lr,{data:0}),Ry=Xt(y1),_1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=E1[t])?!!e[t]:!1}function Lm(){return T1}var b1=je({},El,{key:function(t){if(t.key){var e=_1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ku(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?v1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lm,charCode:function(t){return t.type==="keypress"?ku(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ku(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),w1=Xt(b1),S1=je({},ih,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Iy=Xt(S1),A1=je({},El,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lm}),x1=Xt(A1),R1=je({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),I1=Xt(R1),C1=je({},ih,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),N1=Xt(C1),D1=je({},lr,{newState:0,oldState:0}),O1=Xt(D1),V1=[9,13,27,32],Um=Ei&&"CompositionEvent"in window,bo=null;Ei&&"documentMode"in document&&(bo=document.documentMode);var M1=Ei&&"TextEvent"in window&&!bo,e0=Ei&&(!Um||bo&&8<bo&&11>=bo),Cy=" ",Ny=!1;function t0(t,e){switch(t){case"keyup":return V1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function n0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ur=!1;function k1(t,e){switch(t){case"compositionend":return n0(e);case"keypress":return e.which!==32?null:(Ny=!0,Cy);case"textInput":return t=e.data,t===Cy&&Ny?null:t;default:return null}}function j1(t,e){if(Ur)return t==="compositionend"||!Um&&t0(t,e)?(t=JE(),Mu=Pm=es=null,Ur=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return e0&&e.locale!=="ko"?null:e.data;default:return null}}var P1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!P1[t.type]:e==="textarea"}function i0(t,e,n,i){Lr?Zr?Zr.push(i):Zr=[i]:Lr=i,e=Sc(e,"onChange"),0<e.length&&(n=new nh("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var wo=null,Fo=null;function L1(t){$T(t,0)}function sh(t){var e=fo(t);if(KE(e))return t}function Oy(t,e){if(t==="change")return e}var s0=!1;if(Ei){var vf;if(Ei){var Ef="oninput"in document;if(!Ef){var Vy=document.createElement("div");Vy.setAttribute("oninput","return;"),Ef=typeof Vy.oninput=="function"}vf=Ef}else vf=!1;s0=vf&&(!document.documentMode||9<document.documentMode)}function My(){wo&&(wo.detachEvent("onpropertychange",r0),Fo=wo=null)}function r0(t){if(t.propertyName==="value"&&sh(Fo)){var e=[];i0(e,Fo,t,jm(t)),WE(L1,e)}}function U1(t,e,n){t==="focusin"?(My(),wo=e,Fo=n,wo.attachEvent("onpropertychange",r0)):t==="focusout"&&My()}function z1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sh(Fo)}function B1(t,e){if(t==="click")return sh(e)}function q1(t,e){if(t==="input"||t==="change")return sh(e)}function H1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fn=typeof Object.is=="function"?Object.is:H1;function Go(t,e){if(fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!ld.call(e,s)||!fn(t[s],e[s]))return!1}return!0}function ky(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jy(t,e){var n=ky(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ky(n)}}function a0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?a0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function o0(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=ac(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ac(t.document)}return e}function zm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var F1=Ei&&"documentMode"in document&&11>=document.documentMode,zr=null,md=null,So=null,pd=!1;function Py(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pd||zr==null||zr!==ac(i)||(i=zr,"selectionStart"in i&&zm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),So&&Go(So,i)||(So=i,i=Sc(md,"onSelect"),0<i.length&&(e=new nh("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=zr)))}function Ls(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Br={animationend:Ls("Animation","AnimationEnd"),animationiteration:Ls("Animation","AnimationIteration"),animationstart:Ls("Animation","AnimationStart"),transitionrun:Ls("Transition","TransitionRun"),transitionstart:Ls("Transition","TransitionStart"),transitioncancel:Ls("Transition","TransitionCancel"),transitionend:Ls("Transition","TransitionEnd")},Tf={},l0={};Ei&&(l0=document.createElement("div").style,"AnimationEvent"in window||(delete Br.animationend.animation,delete Br.animationiteration.animation,delete Br.animationstart.animation),"TransitionEvent"in window||delete Br.transitionend.transition);function ur(t){if(Tf[t])return Tf[t];if(!Br[t])return t;var e=Br[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in l0)return Tf[t]=e[n];return t}var u0=ur("animationend"),c0=ur("animationiteration"),h0=ur("animationstart"),G1=ur("transitionrun"),Q1=ur("transitionstart"),K1=ur("transitioncancel"),f0=ur("transitionend"),d0=new Map,gd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gd.push("scrollEnd");function Nn(t,e){d0.set(t,e),or(e,[t])}var Ly=new WeakMap;function _n(t,e){if(typeof t=="object"&&t!==null){var n=Ly.get(t);return n!==void 0?n:(e={value:t,source:e,stack:by(e)},Ly.set(t,e),e)}return{value:t,source:e,stack:by(e)}}var dn=[],qr=0,Bm=0;function rh(){for(var t=qr,e=Bm=qr=0;e<t;){var n=dn[e];dn[e++]=null;var i=dn[e];dn[e++]=null;var s=dn[e];dn[e++]=null;var r=dn[e];if(dn[e++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&m0(n,s,r)}}function ah(t,e,n,i){dn[qr++]=t,dn[qr++]=e,dn[qr++]=n,dn[qr++]=i,Bm|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function qm(t,e,n,i){return ah(t,e,n,i),oc(t)}function Va(t,e){return ah(t,null,null,e),oc(t)}function m0(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=t.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(s=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,s&&e!==null&&(s=31-ln(n),t=r.hiddenUpdates,i=t[s],i===null?t[s]=[e]:i.push(e),e.lane=n|536870912),r):null}function oc(t){if(50<Mo)throw Mo=0,Pd=null,Error(P(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Hr={};function Y1(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(t,e,n,i){return new Y1(t,e,n,i)}function Hm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yi(t,e){var n=t.alternate;return n===null?(n=sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function p0(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ju(t,e,n,i,s,r){var a=0;if(i=t,typeof t=="function")Hm(t)&&(a=1);else if(typeof t=="string")a=Xx(t,n,jn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case sd:return t=sn(31,n,e,s),t.elementType=sd,t.lanes=r,t;case kr:return Gs(n.children,s,r,e);case ME:a=8,s|=24;break;case td:return t=sn(12,n,e,s|2),t.elementType=td,t.lanes=r,t;case nd:return t=sn(13,n,e,s),t.elementType=nd,t.lanes=r,t;case id:return t=sn(19,n,e,s),t.elementType=id,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case LA:case ci:a=10;break e;case kE:a=9;break e;case Cm:a=11;break e;case Nm:a=14;break e;case Hi:a=16,i=null;break e}a=29,n=Error(P(130,t===null?"null":typeof t,"")),i=null}return e=sn(a,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function Gs(t,e,n,i){return t=sn(7,t,i,e),t.lanes=n,t}function bf(t,e,n){return t=sn(6,t,null,e),t.lanes=n,t}function wf(t,e,n){return e=sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Fr=[],Gr=0,lc=null,uc=0,pn=[],gn=0,Qs=null,hi=1,fi="";function zs(t,e){Fr[Gr++]=uc,Fr[Gr++]=lc,lc=t,uc=e}function g0(t,e,n){pn[gn++]=hi,pn[gn++]=fi,pn[gn++]=Qs,Qs=t;var i=hi;t=fi;var s=32-ln(i)-1;i&=~(1<<s),n+=1;var r=32-ln(e)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,hi=1<<32-ln(e)+s|n<<s|i,fi=r+t}else hi=1<<r|n<<s|i,fi=t}function Fm(t){t.return!==null&&(zs(t,1),g0(t,1,0))}function Gm(t){for(;t===lc;)lc=Fr[--Gr],Fr[Gr]=null,uc=Fr[--Gr],Fr[Gr]=null;for(;t===Qs;)Qs=pn[--gn],pn[gn]=null,fi=pn[--gn],pn[gn]=null,hi=pn[--gn],pn[gn]=null}var zt=null,$e=null,Te=!1,Ks=null,Mn=!1,yd=Error(P(519));function Ws(t){var e=Error(P(418,""));throw Qo(_n(e,t)),yd}function Uy(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[jt]=t,e[$t]=i,n){case"dialog":oe("cancel",e),oe("close",e);break;case"iframe":case"object":case"embed":oe("load",e);break;case"video":case"audio":for(n=0;n<$o.length;n++)oe($o[n],e);break;case"source":oe("error",e);break;case"img":case"image":case"link":oe("error",e),oe("load",e);break;case"details":oe("toggle",e);break;case"input":oe("invalid",e),YE(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),rc(e);break;case"select":oe("invalid",e);break;case"textarea":oe("invalid",e),XE(e,i.value,i.defaultValue,i.children),rc(e)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||ZT(e.textContent,n)?(i.popover!=null&&(oe("beforetoggle",e),oe("toggle",e)),i.onScroll!=null&&oe("scroll",e),i.onScrollEnd!=null&&oe("scrollend",e),i.onClick!=null&&(e.onclick=mh),e=!0):e=!1,e||Ws(t)}function zy(t){for(zt=t.return;zt;)switch(zt.tag){case 5:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:zt=zt.return}}function ro(t){if(t!==zt)return!1;if(!Te)return zy(t),Te=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Hd(t.type,t.memoizedProps)),n=!n),n&&$e&&Ws(t),zy(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){$e=Rn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}$e=null}}else e===27?(e=$e,Is(t.type)?(t=Qd,Qd=null,$e=t):$e=e):$e=zt?Rn(t.stateNode.nextSibling):null;return!0}function Tl(){$e=zt=null,Te=!1}function By(){var t=Ks;return t!==null&&(Kt===null?Kt=t:Kt.push.apply(Kt,t),Ks=null),t}function Qo(t){Ks===null?Ks=[t]:Ks.push(t)}var _d=Yn(null),cr=null,di=null;function Gi(t,e,n){ze(_d,e._currentValue),e._currentValue=n}function _i(t){t._currentValue=_d.current,Et(_d)}function vd(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ed(t,e,n,i){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;e:for(;r!==null;){var l=r;r=s;for(var u=0;u<e.length;u++)if(l.context===e[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),vd(r.return,n,t),i||(a=null);break e}r=l.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(P(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),vd(a,n,t),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function bl(t,e,n,i){t=null;for(var s=e,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(P(387));if(a=a.memoizedProps,a!==null){var l=s.type;fn(s.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(s===tc.current){if(a=s.alternate,a===null)throw Error(P(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(Wo):t=[Wo])}s=s.return}t!==null&&Ed(e,t,n,i),e.flags|=262144}function cc(t){for(t=t.firstContext;t!==null;){if(!fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Js(t){cr=t,di=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Pt(t){return y0(cr,t)}function yu(t,e){return cr===null&&Js(t),y0(t,e)}function y0(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},di===null){if(t===null)throw Error(P(308));di=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else di=di.next=e;return n}var $1=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},X1=dt.unstable_scheduleCallback,Z1=dt.unstable_NormalPriority,ct={$$typeof:ci,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qm(){return{controller:new $1,data:new Map,refCount:0}}function wl(t){t.refCount--,t.refCount===0&&X1(Z1,function(){t.controller.abort()})}var Ao=null,Td=0,ha=0,Wr=null;function W1(t,e){if(Ao===null){var n=Ao=[];Td=0,ha=pp(),Wr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Td++,e.then(qy,qy),e}function qy(){if(--Td===0&&Ao!==null){Wr!==null&&(Wr.status="fulfilled");var t=Ao;Ao=null,ha=0,Wr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function J1(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var Hy=te.S;te.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&W1(t,e),Hy!==null&&Hy(t,e)};var Ys=Yn(null);function Km(){var t=Ys.current;return t!==null?t:Ve.pooledCache}function Pu(t,e){e===null?ze(Ys,Ys.current):ze(Ys,e.pool)}function _0(){var t=Km();return t===null?null:{parent:ct._currentValue,pool:t}}var Sl=Error(P(460)),v0=Error(P(474)),oh=Error(P(542)),bd={then:function(){}};function Fy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function _u(){}function E0(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(_u,_u),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Qy(t),t;default:if(typeof e.status=="string")e.then(_u,_u);else{if(t=Ve,t!==null&&100<t.shellSuspendCounter)throw Error(P(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=i}},function(i){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Qy(t),t}throw xo=e,Sl}}var xo=null;function Gy(){if(xo===null)throw Error(P(459));var t=xo;return xo=null,t}function Qy(t){if(t===Sl||t===oh)throw Error(P(483))}var Fi=!1;function Ym(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function rs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function as(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,xe&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,e=oc(t),m0(t,null,n),e}return ah(t,i,e,n),oc(t)}function Ro(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,qE(t,n)}}function Sf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Sd=!1;function Io(){if(Sd){var t=Wr;if(t!==null)throw t}}function Co(t,e,n,i){Sd=!1;var s=t.updateQueue;Fi=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,f=u.next;u.next=null,a===null?r=f:a.next=f,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=f:l.next=f,m.lastBaseUpdate=u))}if(r!==null){var g=s.baseState;a=0,m=f=u=null,l=r;do{var p=l.lane&-536870913,_=p!==l.lane;if(_?(ye&p)===p:(i&p)===p){p!==0&&p===ha&&(Sd=!0),m!==null&&(m=m.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var C=t,V=l;p=e;var D=n;switch(V.tag){case 1:if(C=V.payload,typeof C=="function"){g=C.call(D,g,p);break e}g=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=V.payload,p=typeof C=="function"?C.call(D,g,p):C,p==null)break e;g=je({},g,p);break e;case 2:Fi=!0}}p=l.callback,p!==null&&(t.flags|=64,_&&(t.flags|=8192),_=s.callbacks,_===null?s.callbacks=[p]:_.push(p))}else _={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(f=m=_,u=g):m=m.next=_,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);m===null&&(u=g),s.baseState=u,s.firstBaseUpdate=f,s.lastBaseUpdate=m,r===null&&(s.shared.lanes=0),Es|=a,t.lanes=a,t.memoizedState=g}}function T0(t,e){if(typeof t!="function")throw Error(P(191,t));t.call(e)}function b0(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)T0(n[t],e)}var fa=Yn(null),hc=Yn(0);function Ky(t,e){t=wi,ze(hc,t),ze(fa,e),wi=t|e.baseLanes}function Ad(){ze(hc,wi),ze(fa,fa.current)}function $m(){wi=hc.current,Et(fa),Et(hc)}var _s=0,ae=null,Ie=null,it=null,fc=!1,Jr=!1,er=!1,dc=0,Ko=0,ea=null,ex=0;function Ze(){throw Error(P(321))}function Xm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fn(t[n],e[n]))return!1;return!0}function Zm(t,e,n,i,s,r){return _s=r,ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,te.H=t===null||t.memoizedState===null?J0:eT,er=!1,r=n(i,s),er=!1,Jr&&(r=S0(e,n,i,s)),w0(t),r}function w0(t){te.H=mc;var e=Ie!==null&&Ie.next!==null;if(_s=0,it=Ie=ae=null,fc=!1,Ko=0,ea=null,e)throw Error(P(300));t===null||vt||(t=t.dependencies,t!==null&&cc(t)&&(vt=!0))}function S0(t,e,n,i){ae=t;var s=0;do{if(Jr&&(ea=null),Ko=0,Jr=!1,25<=s)throw Error(P(301));if(s+=1,it=Ie=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}te.H=ox,r=e(n,i)}while(Jr);return r}function tx(){var t=te.H,e=t.useState()[0];return e=typeof e.then=="function"?Al(e):e,t=t.useState()[0],(Ie!==null?Ie.memoizedState:null)!==t&&(ae.flags|=1024),e}function Wm(){var t=dc!==0;return dc=0,t}function Jm(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function ep(t){if(fc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}fc=!1}_s=0,it=Ie=ae=null,Jr=!1,Ko=dc=0,ea=null}function Gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?ae.memoizedState=it=t:it=it.next=t,it}function at(){if(Ie===null){var t=ae.alternate;t=t!==null?t.memoizedState:null}else t=Ie.next;var e=it===null?ae.memoizedState:it.next;if(e!==null)it=e,Ie=t;else{if(t===null)throw ae.alternate===null?Error(P(467)):Error(P(310));Ie=t,t={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},it===null?ae.memoizedState=it=t:it=it.next=t}return it}function tp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Al(t){var e=Ko;return Ko+=1,ea===null&&(ea=[]),t=E0(ea,t,e),e=ae,(it===null?e.memoizedState:it.next)===null&&(e=e.alternate,te.H=e===null||e.memoizedState===null?J0:eT),t}function lh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Al(t);if(t.$$typeof===ci)return Pt(t)}throw Error(P(438,String(t)))}function np(t){var e=null,n=ae.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=ae.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=tp(),ae.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=UA;return e.index++,n}function Ti(t,e){return typeof e=="function"?e(t):e}function Lu(t){var e=at();return ip(e,Ie,t)}function ip(t,e,n){var i=t.queue;if(i===null)throw Error(P(311));i.lastRenderedReducer=n;var s=t.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}e.baseQueue=s=r,i.pending=null}if(r=t.baseState,s===null)t.memoizedState=r;else{e=s.next;var l=a=null,u=null,f=e,m=!1;do{var g=f.lane&-536870913;if(g!==f.lane?(ye&g)===g:(_s&g)===g){var p=f.revertLane;if(p===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),g===ha&&(m=!0);else if((_s&p)===p){f=f.next,p===ha&&(m=!0);continue}else g={lane:0,revertLane:f.revertLane,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(l=u=g,a=r):u=u.next=g,ae.lanes|=p,Es|=p;g=f.action,er&&n(r,g),r=f.hasEagerState?f.eagerState:n(r,g)}else p={lane:g,revertLane:f.revertLane,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(l=u=p,a=r):u=u.next=p,ae.lanes|=g,Es|=g;f=f.next}while(f!==null&&f!==e);if(u===null?a=r:u.next=l,!fn(r,t.memoizedState)&&(vt=!0,m&&(n=Wr,n!==null)))throw n;t.memoizedState=r,t.baseState=a,t.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Af(t){var e=at(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=t(r,a.action),a=a.next;while(a!==s);fn(r,e.memoizedState)||(vt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function A0(t,e,n){var i=ae,s=at(),r=Te;if(r){if(n===void 0)throw Error(P(407));n=n()}else n=e();var a=!fn((Ie||s).memoizedState,n);a&&(s.memoizedState=n,vt=!0),s=s.queue;var l=I0.bind(null,i,s,t);if(xl(2048,8,l,[t]),s.getSnapshot!==e||a||it!==null&&it.memoizedState.tag&1){if(i.flags|=2048,da(9,uh(),R0.bind(null,i,s,n,e),null),Ve===null)throw Error(P(349));r||_s&124||x0(i,e,n)}return n}function x0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ae.updateQueue,e===null?(e=tp(),ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function R0(t,e,n,i){e.value=n,e.getSnapshot=i,C0(e)&&N0(t)}function I0(t,e,n){return n(function(){C0(e)&&N0(t)})}function C0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fn(t,n)}catch{return!0}}function N0(t){var e=Va(t,2);e!==null&&cn(e,t,2)}function xd(t){var e=Gt();if(typeof t=="function"){var n=t;if(t=n(),er){Ji(!0);try{n()}finally{Ji(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:t},e}function D0(t,e,n,i){return t.baseState=n,ip(t,Ie,typeof i=="function"?i:Ti)}function nx(t,e,n,i,s){if(ch(t))throw Error(P(485));if(t=e.action,t!==null){var r={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};te.T!==null?n(!0):r.isTransition=!1,i(r),n=e.pending,n===null?(r.next=e.pending=r,O0(e,r)):(r.next=n.next,e.pending=n.next=r)}}function O0(t,e){var n=e.action,i=e.payload,s=t.state;if(e.isTransition){var r=te.T,a={};te.T=a;try{var l=n(s,i),u=te.S;u!==null&&u(a,l),Yy(t,e,l)}catch(f){Rd(t,e,f)}finally{te.T=r}}else try{r=n(s,i),Yy(t,e,r)}catch(f){Rd(t,e,f)}}function Yy(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){$y(t,e,i)},function(i){return Rd(t,e,i)}):$y(t,e,n)}function $y(t,e,n){e.status="fulfilled",e.value=n,V0(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,O0(t,n)))}function Rd(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,V0(e),e=e.next;while(e!==i)}t.action=null}function V0(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function M0(t,e){return e}function Xy(t,e){if(Te){var n=Ve.formState;if(n!==null){e:{var i=ae;if(Te){if($e){t:{for(var s=$e,r=Mn;s.nodeType!==8;){if(!r){s=null;break t}if(s=Rn(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){$e=Rn(s.nextSibling),i=s.data==="F!";break e}}Ws(i)}i=!1}i&&(e=n[0])}}return n=Gt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:M0,lastRenderedState:e},n.queue=i,n=X0.bind(null,ae,i),i.dispatch=n,i=xd(!1),r=op.bind(null,ae,!1,i.queue),i=Gt(),s={state:e,dispatch:null,action:t,pending:null},i.queue=s,n=nx.bind(null,ae,s,r,n),s.dispatch=n,i.memoizedState=t,[e,n,!1]}function Zy(t){var e=at();return k0(e,Ie,t)}function k0(t,e,n){if(e=ip(t,e,M0)[0],t=Lu(Ti)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=Al(e)}catch(a){throw a===Sl?oh:a}else i=e;e=at();var s=e.queue,r=s.dispatch;return n!==e.memoizedState&&(ae.flags|=2048,da(9,uh(),ix.bind(null,s,n),null)),[i,r,t]}function ix(t,e){t.action=e}function Wy(t){var e=at(),n=Ie;if(n!==null)return k0(e,n,t);at(),e=e.memoizedState,n=at();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function da(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=ae.updateQueue,e===null&&(e=tp(),ae.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function uh(){return{destroy:void 0,resource:void 0}}function j0(){return at().memoizedState}function Uu(t,e,n,i){var s=Gt();i=i===void 0?null:i,ae.flags|=t,s.memoizedState=da(1|e,uh(),n,i)}function xl(t,e,n,i){var s=at();i=i===void 0?null:i;var r=s.memoizedState.inst;Ie!==null&&i!==null&&Xm(i,Ie.memoizedState.deps)?s.memoizedState=da(e,r,n,i):(ae.flags|=t,s.memoizedState=da(1|e,r,n,i))}function Jy(t,e){Uu(8390656,8,t,e)}function P0(t,e){xl(2048,8,t,e)}function L0(t,e){return xl(4,2,t,e)}function U0(t,e){return xl(4,4,t,e)}function z0(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function B0(t,e,n){n=n!=null?n.concat([t]):null,xl(4,4,z0.bind(null,e,t),n)}function sp(){}function q0(t,e){var n=at();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Xm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function H0(t,e){var n=at();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Xm(e,i[1]))return i[0];if(i=t(),er){Ji(!0);try{t()}finally{Ji(!1)}}return n.memoizedState=[i,e],i}function rp(t,e,n){return n===void 0||_s&1073741824?t.memoizedState=e:(t.memoizedState=n,t=VT(),ae.lanes|=t,Es|=t,n)}function F0(t,e,n,i){return fn(n,e)?n:fa.current!==null?(t=rp(t,n,i),fn(t,e)||(vt=!0),t):_s&42?(t=VT(),ae.lanes|=t,Es|=t,e):(vt=!0,t.memoizedState=n)}function G0(t,e,n,i,s){var r=be.p;be.p=r!==0&&8>r?r:8;var a=te.T,l={};te.T=l,op(t,!1,e,n);try{var u=s(),f=te.S;if(f!==null&&f(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var m=J1(u,i);No(t,e,m,un(t))}else No(t,e,i,un(t))}catch(g){No(t,e,{then:function(){},status:"rejected",reason:g},un())}finally{be.p=r,te.T=a}}function sx(){}function Id(t,e,n,i){if(t.tag!==5)throw Error(P(476));var s=Q0(t).queue;G0(t,s,e,Fs,n===null?sx:function(){return K0(t),n(i)})}function Q0(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Fs,baseState:Fs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:Fs},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function K0(t){var e=Q0(t).next.queue;No(t,e,{},un())}function ap(){return Pt(Wo)}function Y0(){return at().memoizedState}function $0(){return at().memoizedState}function rx(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=un();t=rs(n);var i=as(e,t,n);i!==null&&(cn(i,e,n),Ro(i,e,n)),e={cache:Qm()},t.payload=e;return}e=e.return}}function ax(t,e,n){var i=un();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},ch(t)?Z0(e,n):(n=qm(t,e,n,i),n!==null&&(cn(n,t,i),W0(n,e,i)))}function X0(t,e,n){var i=un();No(t,e,n,i)}function No(t,e,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(ch(t))Z0(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,fn(l,a))return ah(t,e,s,0),Ve===null&&rh(),!1}catch{}finally{}if(n=qm(t,e,s,i),n!==null)return cn(n,t,i),W0(n,e,i),!0}return!1}function op(t,e,n,i){if(i={lane:2,revertLane:pp(),action:i,hasEagerState:!1,eagerState:null,next:null},ch(t)){if(e)throw Error(P(479))}else e=qm(t,n,i,2),e!==null&&cn(e,t,2)}function ch(t){var e=t.alternate;return t===ae||e!==null&&e===ae}function Z0(t,e){Jr=fc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function W0(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,qE(t,n)}}var mc={readContext:Pt,use:lh,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useLayoutEffect:Ze,useInsertionEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useSyncExternalStore:Ze,useId:Ze,useHostTransitionStatus:Ze,useFormState:Ze,useActionState:Ze,useOptimistic:Ze,useMemoCache:Ze,useCacheRefresh:Ze},J0={readContext:Pt,use:lh,useCallback:function(t,e){return Gt().memoizedState=[t,e===void 0?null:e],t},useContext:Pt,useEffect:Jy,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Uu(4194308,4,z0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uu(4194308,4,t,e)},useInsertionEffect:function(t,e){Uu(4,2,t,e)},useMemo:function(t,e){var n=Gt();e=e===void 0?null:e;var i=t();if(er){Ji(!0);try{t()}finally{Ji(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Gt();if(n!==void 0){var s=n(e);if(er){Ji(!0);try{n(e)}finally{Ji(!1)}}}else s=e;return i.memoizedState=i.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=ax.bind(null,ae,t),[i.memoizedState,t]},useRef:function(t){var e=Gt();return t={current:t},e.memoizedState=t},useState:function(t){t=xd(t);var e=t.queue,n=X0.bind(null,ae,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:sp,useDeferredValue:function(t,e){var n=Gt();return rp(n,t,e)},useTransition:function(){var t=xd(!1);return t=G0.bind(null,ae,t.queue,!0,!1),Gt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=ae,s=Gt();if(Te){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),Ve===null)throw Error(P(349));ye&124||x0(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,Jy(I0.bind(null,i,r,t),[t]),i.flags|=2048,da(9,uh(),R0.bind(null,i,r,n,e),null),n},useId:function(){var t=Gt(),e=Ve.identifierPrefix;if(Te){var n=fi,i=hi;n=(i&~(1<<32-ln(i)-1)).toString(32)+n,e="«"+e+"R"+n,n=dc++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=ex++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:ap,useFormState:Xy,useActionState:Xy,useOptimistic:function(t){var e=Gt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=op.bind(null,ae,!0,n),n.dispatch=e,[t,e]},useMemoCache:np,useCacheRefresh:function(){return Gt().memoizedState=rx.bind(null,ae)}},eT={readContext:Pt,use:lh,useCallback:q0,useContext:Pt,useEffect:P0,useImperativeHandle:B0,useInsertionEffect:L0,useLayoutEffect:U0,useMemo:H0,useReducer:Lu,useRef:j0,useState:function(){return Lu(Ti)},useDebugValue:sp,useDeferredValue:function(t,e){var n=at();return F0(n,Ie.memoizedState,t,e)},useTransition:function(){var t=Lu(Ti)[0],e=at().memoizedState;return[typeof t=="boolean"?t:Al(t),e]},useSyncExternalStore:A0,useId:Y0,useHostTransitionStatus:ap,useFormState:Zy,useActionState:Zy,useOptimistic:function(t,e){var n=at();return D0(n,Ie,t,e)},useMemoCache:np,useCacheRefresh:$0},ox={readContext:Pt,use:lh,useCallback:q0,useContext:Pt,useEffect:P0,useImperativeHandle:B0,useInsertionEffect:L0,useLayoutEffect:U0,useMemo:H0,useReducer:Af,useRef:j0,useState:function(){return Af(Ti)},useDebugValue:sp,useDeferredValue:function(t,e){var n=at();return Ie===null?rp(n,t,e):F0(n,Ie.memoizedState,t,e)},useTransition:function(){var t=Af(Ti)[0],e=at().memoizedState;return[typeof t=="boolean"?t:Al(t),e]},useSyncExternalStore:A0,useId:Y0,useHostTransitionStatus:ap,useFormState:Wy,useActionState:Wy,useOptimistic:function(t,e){var n=at();return Ie!==null?D0(n,Ie,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:np,useCacheRefresh:$0},ta=null,Yo=0;function vu(t){var e=Yo;return Yo+=1,ta===null&&(ta=[]),E0(ta,t,e)}function ao(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Eu(t,e){throw e.$$typeof===PA?Error(P(525)):(t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function e_(t){var e=t._init;return e(t._payload)}function tT(t){function e(w,E){if(t){var x=w.deletions;x===null?(w.deletions=[E],w.flags|=16):x.push(E)}}function n(w,E){if(!t)return null;for(;E!==null;)e(w,E),E=E.sibling;return null}function i(w){for(var E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(w,E){return w=yi(w,E),w.index=0,w.sibling=null,w}function r(w,E,x){return w.index=x,t?(x=w.alternate,x!==null?(x=x.index,x<E?(w.flags|=67108866,E):x):(w.flags|=67108866,E)):(w.flags|=1048576,E)}function a(w){return t&&w.alternate===null&&(w.flags|=67108866),w}function l(w,E,x,O){return E===null||E.tag!==6?(E=bf(x,w.mode,O),E.return=w,E):(E=s(E,x),E.return=w,E)}function u(w,E,x,O){var U=x.type;return U===kr?m(w,E,x.props.children,O,x.key):E!==null&&(E.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Hi&&e_(U)===E.type)?(E=s(E,x.props),ao(E,x),E.return=w,E):(E=ju(x.type,x.key,x.props,null,w.mode,O),ao(E,x),E.return=w,E)}function f(w,E,x,O){return E===null||E.tag!==4||E.stateNode.containerInfo!==x.containerInfo||E.stateNode.implementation!==x.implementation?(E=wf(x,w.mode,O),E.return=w,E):(E=s(E,x.children||[]),E.return=w,E)}function m(w,E,x,O,U){return E===null||E.tag!==7?(E=Gs(x,w.mode,O,U),E.return=w,E):(E=s(E,x),E.return=w,E)}function g(w,E,x){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=bf(""+E,w.mode,x),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case fu:return x=ju(E.type,E.key,E.props,null,w.mode,x),ao(x,E),x.return=w,x;case co:return E=wf(E,w.mode,x),E.return=w,E;case Hi:var O=E._init;return E=O(E._payload),g(w,E,x)}if(ho(E)||no(E))return E=Gs(E,w.mode,x,null),E.return=w,E;if(typeof E.then=="function")return g(w,vu(E),x);if(E.$$typeof===ci)return g(w,yu(w,E),x);Eu(w,E)}return null}function p(w,E,x,O){var U=E!==null?E.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return U!==null?null:l(w,E,""+x,O);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case fu:return x.key===U?u(w,E,x,O):null;case co:return x.key===U?f(w,E,x,O):null;case Hi:return U=x._init,x=U(x._payload),p(w,E,x,O)}if(ho(x)||no(x))return U!==null?null:m(w,E,x,O,null);if(typeof x.then=="function")return p(w,E,vu(x),O);if(x.$$typeof===ci)return p(w,E,yu(w,x),O);Eu(w,x)}return null}function _(w,E,x,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return w=w.get(x)||null,l(E,w,""+O,U);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case fu:return w=w.get(O.key===null?x:O.key)||null,u(E,w,O,U);case co:return w=w.get(O.key===null?x:O.key)||null,f(E,w,O,U);case Hi:var H=O._init;return O=H(O._payload),_(w,E,x,O,U)}if(ho(O)||no(O))return w=w.get(x)||null,m(E,w,O,U,null);if(typeof O.then=="function")return _(w,E,x,vu(O),U);if(O.$$typeof===ci)return _(w,E,x,yu(E,O),U);Eu(E,O)}return null}function C(w,E,x,O){for(var U=null,H=null,T=E,v=E=0,b=null;T!==null&&v<x.length;v++){T.index>v?(b=T,T=null):b=T.sibling;var S=p(w,T,x[v],O);if(S===null){T===null&&(T=b);break}t&&T&&S.alternate===null&&e(w,T),E=r(S,E,v),H===null?U=S:H.sibling=S,H=S,T=b}if(v===x.length)return n(w,T),Te&&zs(w,v),U;if(T===null){for(;v<x.length;v++)T=g(w,x[v],O),T!==null&&(E=r(T,E,v),H===null?U=T:H.sibling=T,H=T);return Te&&zs(w,v),U}for(T=i(T);v<x.length;v++)b=_(T,w,v,x[v],O),b!==null&&(t&&b.alternate!==null&&T.delete(b.key===null?v:b.key),E=r(b,E,v),H===null?U=b:H.sibling=b,H=b);return t&&T.forEach(function(R){return e(w,R)}),Te&&zs(w,v),U}function V(w,E,x,O){if(x==null)throw Error(P(151));for(var U=null,H=null,T=E,v=E=0,b=null,S=x.next();T!==null&&!S.done;v++,S=x.next()){T.index>v?(b=T,T=null):b=T.sibling;var R=p(w,T,S.value,O);if(R===null){T===null&&(T=b);break}t&&T&&R.alternate===null&&e(w,T),E=r(R,E,v),H===null?U=R:H.sibling=R,H=R,T=b}if(S.done)return n(w,T),Te&&zs(w,v),U;if(T===null){for(;!S.done;v++,S=x.next())S=g(w,S.value,O),S!==null&&(E=r(S,E,v),H===null?U=S:H.sibling=S,H=S);return Te&&zs(w,v),U}for(T=i(T);!S.done;v++,S=x.next())S=_(T,w,v,S.value,O),S!==null&&(t&&S.alternate!==null&&T.delete(S.key===null?v:S.key),E=r(S,E,v),H===null?U=S:H.sibling=S,H=S);return t&&T.forEach(function(I){return e(w,I)}),Te&&zs(w,v),U}function D(w,E,x,O){if(typeof x=="object"&&x!==null&&x.type===kr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case fu:e:{for(var U=x.key;E!==null;){if(E.key===U){if(U=x.type,U===kr){if(E.tag===7){n(w,E.sibling),O=s(E,x.props.children),O.return=w,w=O;break e}}else if(E.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Hi&&e_(U)===E.type){n(w,E.sibling),O=s(E,x.props),ao(O,x),O.return=w,w=O;break e}n(w,E);break}else e(w,E);E=E.sibling}x.type===kr?(O=Gs(x.props.children,w.mode,O,x.key),O.return=w,w=O):(O=ju(x.type,x.key,x.props,null,w.mode,O),ao(O,x),O.return=w,w=O)}return a(w);case co:e:{for(U=x.key;E!==null;){if(E.key===U)if(E.tag===4&&E.stateNode.containerInfo===x.containerInfo&&E.stateNode.implementation===x.implementation){n(w,E.sibling),O=s(E,x.children||[]),O.return=w,w=O;break e}else{n(w,E);break}else e(w,E);E=E.sibling}O=wf(x,w.mode,O),O.return=w,w=O}return a(w);case Hi:return U=x._init,x=U(x._payload),D(w,E,x,O)}if(ho(x))return C(w,E,x,O);if(no(x)){if(U=no(x),typeof U!="function")throw Error(P(150));return x=U.call(x),V(w,E,x,O)}if(typeof x.then=="function")return D(w,E,vu(x),O);if(x.$$typeof===ci)return D(w,E,yu(w,x),O);Eu(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,E!==null&&E.tag===6?(n(w,E.sibling),O=s(E,x),O.return=w,w=O):(n(w,E),O=bf(x,w.mode,O),O.return=w,w=O),a(w)):n(w,E)}return function(w,E,x,O){try{Yo=0;var U=D(w,E,x,O);return ta=null,U}catch(T){if(T===Sl||T===oh)throw T;var H=sn(29,T,null,w.mode);return H.lanes=O,H.return=w,H}finally{}}}var ma=tT(!0),nT=tT(!1),Tn=Yn(null),Ln=null;function Qi(t){var e=t.alternate;ze(ht,ht.current&1),ze(Tn,t),Ln===null&&(e===null||fa.current!==null||e.memoizedState!==null)&&(Ln=t)}function iT(t){if(t.tag===22){if(ze(ht,ht.current),ze(Tn,t),Ln===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Ln=t)}}else Ki()}function Ki(){ze(ht,ht.current),ze(Tn,Tn.current)}function mi(t){Et(Tn),Ln===t&&(Ln=null),Et(ht)}var ht=Yn(0);function pc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Gd(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function xf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cd={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=un(),s=rs(i);s.payload=e,n!=null&&(s.callback=n),e=as(t,s,i),e!==null&&(cn(e,t,i),Ro(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=un(),s=rs(i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=as(t,s,i),e!==null&&(cn(e,t,i),Ro(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=un(),i=rs(n);i.tag=2,e!=null&&(i.callback=e),e=as(t,i,n),e!==null&&(cn(e,t,n),Ro(e,t,n))}};function t_(t,e,n,i,s,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,a):e.prototype&&e.prototype.isPureReactComponent?!Go(n,i)||!Go(s,r):!0}function n_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Cd.enqueueReplaceState(e,e.state,null)}function tr(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=je({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}var gc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function sT(t){gc(t)}function rT(t){console.error(t)}function aT(t){gc(t)}function yc(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function i_(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Nd(t,e,n){return n=rs(n),n.tag=3,n.payload={element:null},n.callback=function(){yc(t,e)},n}function oT(t){return t=rs(t),t.tag=3,t}function lT(t,e,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;t.payload=function(){return s(r)},t.callback=function(){i_(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){i_(e,n,i),typeof s!="function"&&(os===null?os=new Set([this]):os.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function lx(t,e,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&bl(e,n,s,!0),n=Tn.current,n!==null){switch(n.tag){case 13:return Ln===null?Ld():n.alternate===null&&Xe===0&&(Xe=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===bd?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Pf(t,i,s)),!1;case 22:return n.flags|=65536,i===bd?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Pf(t,i,s)),!1}throw Error(P(435,n.tag))}return Pf(t,i,s),Ld(),!1}if(Te)return e=Tn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,i!==yd&&(t=Error(P(422),{cause:i}),Qo(_n(t,n)))):(i!==yd&&(e=Error(P(423),{cause:i}),Qo(_n(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,i=_n(i,n),s=Nd(t.stateNode,i,s),Sf(t,s),Xe!==4&&(Xe=2)),!1;var r=Error(P(520),{cause:i});if(r=_n(r,n),Vo===null?Vo=[r]:Vo.push(r),Xe!==4&&(Xe=2),e===null)return!0;i=_n(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=Nd(n.stateNode,i,t),Sf(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(os===null||!os.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=oT(s),lT(s,t,n,i),Sf(n,s),!1}n=n.return}while(n!==null);return!1}var uT=Error(P(461)),vt=!1;function At(t,e,n,i){e.child=t===null?nT(e,null,n,i):ma(e,t.child,n,i)}function s_(t,e,n,i,s){n=n.render;var r=e.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Js(e),i=Zm(t,e,n,a,r,s),l=Wm(),t!==null&&!vt?(Jm(t,e,s),bi(t,e,s)):(Te&&l&&Fm(e),e.flags|=1,At(t,e,i,s),e.child)}function r_(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!Hm(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,cT(t,e,r,i,s)):(t=ju(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!lp(t,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:Go,n(a,i)&&t.ref===e.ref)return bi(t,e,s)}return e.flags|=1,t=yi(r,i),t.ref=e.ref,t.return=e,e.child=t}function cT(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(Go(r,i)&&t.ref===e.ref)if(vt=!1,e.pendingProps=i=r,lp(t,s))t.flags&131072&&(vt=!0);else return e.lanes=t.lanes,bi(t,e,s)}return Dd(t,e,n,i,s)}function hT(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden"){if(e.flags&128){if(i=r!==null?r.baseLanes|n:n,t!==null){for(s=e.child=t.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;e.childLanes=r&~i}else e.childLanes=0,e.child=null;return a_(t,e,i,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Pu(e,r!==null?r.cachePool:null),r!==null?Ky(e,r):Ad(),iT(e);else return e.lanes=e.childLanes=536870912,a_(t,e,r!==null?r.baseLanes|n:n,n)}else r!==null?(Pu(e,r.cachePool),Ky(e,r),Ki(),e.memoizedState=null):(t!==null&&Pu(e,null),Ad(),Ki());return At(t,e,s,n),e.child}function a_(t,e,n,i){var s=Km();return s=s===null?null:{parent:ct._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&Pu(e,null),Ad(),iT(e),t!==null&&bl(t,e,i,!0),null}function zu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(P(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Dd(t,e,n,i,s){return Js(e),n=Zm(t,e,n,i,void 0,s),i=Wm(),t!==null&&!vt?(Jm(t,e,s),bi(t,e,s)):(Te&&i&&Fm(e),e.flags|=1,At(t,e,n,s),e.child)}function o_(t,e,n,i,s,r){return Js(e),e.updateQueue=null,n=S0(e,i,n,s),w0(t),i=Wm(),t!==null&&!vt?(Jm(t,e,r),bi(t,e,r)):(Te&&i&&Fm(e),e.flags|=1,At(t,e,n,r),e.child)}function l_(t,e,n,i,s){if(Js(e),e.stateNode===null){var r=Hr,a=n.contextType;typeof a=="object"&&a!==null&&(r=Pt(a)),r=new n(i,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Cd,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=i,r.state=e.memoizedState,r.refs={},Ym(e),a=n.contextType,r.context=typeof a=="object"&&a!==null?Pt(a):Hr,r.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(xf(e,n,a,i),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&Cd.enqueueReplaceState(r,r.state,null),Co(e,i,r,s),Io(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){r=e.stateNode;var l=e.memoizedProps,u=tr(n,l);r.props=u;var f=r.context,m=n.contextType;a=Hr,typeof m=="object"&&m!==null&&(a=Pt(m));var g=n.getDerivedStateFromProps;m=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,m||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||f!==a)&&n_(e,r,i,a),Fi=!1;var p=e.memoizedState;r.state=p,Co(e,i,r,s),Io(),f=e.memoizedState,l||p!==f||Fi?(typeof g=="function"&&(xf(e,n,g,i),f=e.memoizedState),(u=Fi||t_(e,n,u,i,p,f,a))?(m||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=f),r.props=i,r.state=f,r.context=a,i=u):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,wd(t,e),a=e.memoizedProps,m=tr(n,a),r.props=m,g=e.pendingProps,p=r.context,f=n.contextType,u=Hr,typeof f=="object"&&f!==null&&(u=Pt(f)),l=n.getDerivedStateFromProps,(f=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==g||p!==u)&&n_(e,r,i,u),Fi=!1,p=e.memoizedState,r.state=p,Co(e,i,r,s),Io();var _=e.memoizedState;a!==g||p!==_||Fi||t!==null&&t.dependencies!==null&&cc(t.dependencies)?(typeof l=="function"&&(xf(e,n,l,i),_=e.memoizedState),(m=Fi||t_(e,n,m,i,p,_,u)||t!==null&&t.dependencies!==null&&cc(t.dependencies))?(f||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,_,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,_,u)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),r.props=i,r.state=_,r.context=u,i=m):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return r=i,zu(t,e),i=(e.flags&128)!==0,r||i?(r=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&i?(e.child=ma(e,t.child,null,s),e.child=ma(e,null,n,s)):At(t,e,n,s),e.memoizedState=r.state,t=e.child):t=bi(t,e,s),t}function u_(t,e,n,i){return Tl(),e.flags|=256,At(t,e,n,i),e.child}var Rf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function If(t){return{baseLanes:t,cachePool:_0()}}function Cf(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=En),t}function fT(t,e,n){var i=e.pendingProps,s=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=t!==null&&t.memoizedState===null?!1:(ht.current&2)!==0),a&&(s=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(Te){if(s?Qi(e):Ki(),Te){var l=$e,u;if(u=l){e:{for(u=l,l=Mn;u.nodeType!==8;){if(!l){l=null;break e}if(u=Rn(u.nextSibling),u===null){l=null;break e}}l=u}l!==null?(e.memoizedState={dehydrated:l,treeContext:Qs!==null?{id:hi,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},u=sn(18,null,null,0),u.stateNode=l,u.return=e,e.child=u,zt=e,$e=null,u=!0):u=!1}u||Ws(e)}if(l=e.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return Gd(l)?e.lanes=32:e.lanes=536870912,null;mi(e)}return l=i.children,i=i.fallback,s?(Ki(),s=e.mode,l=_c({mode:"hidden",children:l},s),i=Gs(i,s,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,s=e.child,s.memoizedState=If(n),s.childLanes=Cf(t,a,n),e.memoizedState=Rf,i):(Qi(e),Od(e,l))}if(u=t.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(r)e.flags&256?(Qi(e),e.flags&=-257,e=Nf(t,e,n)):e.memoizedState!==null?(Ki(),e.child=t.child,e.flags|=128,e=null):(Ki(),s=i.fallback,l=e.mode,i=_c({mode:"visible",children:i.children},l),s=Gs(s,l,n,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,ma(e,t.child,null,n),i=e.child,i.memoizedState=If(n),i.childLanes=Cf(t,a,n),e.memoizedState=Rf,e=s);else if(Qi(e),Gd(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var f=a.dgst;a=f,i=Error(P(419)),i.stack="",i.digest=a,Qo({value:i,source:null,stack:null}),e=Nf(t,e,n)}else if(vt||bl(t,e,n,!1),a=(n&t.childLanes)!==0,vt||a){if(a=Ve,a!==null&&(i=n&-n,i=i&42?1:Om(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,Va(t,i),cn(a,t,i),uT;l.data==="$?"||Ld(),e=Nf(t,e,n)}else l.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,$e=Rn(l.nextSibling),zt=e,Te=!0,Ks=null,Mn=!1,t!==null&&(pn[gn++]=hi,pn[gn++]=fi,pn[gn++]=Qs,hi=t.id,fi=t.overflow,Qs=e),e=Od(e,i.children),e.flags|=4096);return e}return s?(Ki(),s=i.fallback,l=e.mode,u=t.child,f=u.sibling,i=yi(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,f!==null?s=yi(f,s):(s=Gs(s,l,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=t.child.memoizedState,l===null?l=If(n):(u=l.cachePool,u!==null?(f=ct._currentValue,u=u.parent!==f?{parent:f,pool:f}:u):u=_0(),l={baseLanes:l.baseLanes|n,cachePool:u}),s.memoizedState=l,s.childLanes=Cf(t,a,n),e.memoizedState=Rf,i):(Qi(e),n=t.child,t=n.sibling,n=yi(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Od(t,e){return e=_c({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function _c(t,e){return t=sn(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Nf(t,e,n){return ma(e,t.child,null,n),t=Od(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function c_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),vd(t.return,e,n)}function Df(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function dT(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(At(t,e,i.children,n),i=ht.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&c_(t,n,e);else if(t.tag===19)c_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch(ze(ht,i),s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&pc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Df(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&pc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Df(e,!0,n,null,r);break;case"together":Df(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Es|=e.lanes,!(n&e.childLanes))if(t!==null){if(bl(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=yi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lp(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&cc(t)))}function ux(t,e,n){switch(e.tag){case 3:nc(e,e.stateNode.containerInfo),Gi(e,ct,t.memoizedState.cache),Tl();break;case 27:case 5:od(e);break;case 4:nc(e,e.stateNode.containerInfo);break;case 10:Gi(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Qi(e),e.flags|=128,null):n&e.child.childLanes?fT(t,e,n):(Qi(e),t=bi(t,e,n),t!==null?t.sibling:null);Qi(e);break;case 19:var s=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(bl(t,e,n,!1),i=(n&e.childLanes)!==0),s){if(i)return dT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ze(ht,ht.current),i)break;return null;case 22:case 23:return e.lanes=0,hT(t,e,n);case 24:Gi(e,ct,t.memoizedState.cache)}return bi(t,e,n)}function mT(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)vt=!0;else{if(!lp(t,n)&&!(e.flags&128))return vt=!1,ux(t,e,n);vt=!!(t.flags&131072)}else vt=!1,Te&&e.flags&1048576&&g0(e,uc,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var i=e.elementType,s=i._init;if(i=s(i._payload),e.type=i,typeof i=="function")Hm(i)?(t=tr(i,t),e.tag=1,e=l_(null,e,i,t,n)):(e.tag=0,e=Dd(null,e,i,t,n));else{if(i!=null){if(s=i.$$typeof,s===Cm){e.tag=11,e=s_(null,e,i,t,n);break e}else if(s===Nm){e.tag=14,e=r_(null,e,i,t,n);break e}}throw e=rd(i)||i,Error(P(306,e,""))}}return e;case 0:return Dd(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,s=tr(i,e.pendingProps),l_(t,e,i,s,n);case 3:e:{if(nc(e,e.stateNode.containerInfo),t===null)throw Error(P(387));i=e.pendingProps;var r=e.memoizedState;s=r.element,wd(t,e),Co(e,i,null,n);var a=e.memoizedState;if(i=a.cache,Gi(e,ct,i),i!==r.cache&&Ed(e,[ct],n,!0),Io(),i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=u_(t,e,i,n);break e}else if(i!==s){s=_n(Error(P(424)),e),Qo(s),e=u_(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for($e=Rn(t.firstChild),zt=e,Te=!0,Ks=null,Mn=!0,n=nT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Tl(),i===s){e=bi(t,e,n);break e}At(t,e,i,n)}e=e.child}return e;case 26:return zu(t,e),t===null?(n=R_(e.type,null,e.pendingProps,null))?e.memoizedState=n:Te||(n=e.type,t=e.pendingProps,i=Ac(ss.current).createElement(n),i[jt]=e,i[$t]=t,Nt(i,n,t),yt(i),e.stateNode=i):e.memoizedState=R_(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return od(e),t===null&&Te&&(i=e.stateNode=eb(e.type,e.pendingProps,ss.current),zt=e,Mn=!0,s=$e,Is(e.type)?(Qd=s,$e=Rn(i.firstChild)):$e=s),At(t,e,e.pendingProps.children,n),zu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Te&&((s=i=$e)&&(i=Px(i,e.type,e.pendingProps,Mn),i!==null?(e.stateNode=i,zt=e,$e=Rn(i.firstChild),Mn=!1,s=!0):s=!1),s||Ws(e)),od(e),s=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,i=r.children,Hd(s,r)?i=null:a!==null&&Hd(s,a)&&(e.flags|=32),e.memoizedState!==null&&(s=Zm(t,e,tx,null,null,n),Wo._currentValue=s),zu(t,e),At(t,e,i,n),e.child;case 6:return t===null&&Te&&((t=n=$e)&&(n=Lx(n,e.pendingProps,Mn),n!==null?(e.stateNode=n,zt=e,$e=null,t=!0):t=!1),t||Ws(e)),null;case 13:return fT(t,e,n);case 4:return nc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ma(e,null,i,n):At(t,e,i,n),e.child;case 11:return s_(t,e,e.type,e.pendingProps,n);case 7:return At(t,e,e.pendingProps,n),e.child;case 8:return At(t,e,e.pendingProps.children,n),e.child;case 12:return At(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Gi(e,e.type,i.value),At(t,e,i.children,n),e.child;case 9:return s=e.type._context,i=e.pendingProps.children,Js(e),s=Pt(s),i=i(s),e.flags|=1,At(t,e,i,n),e.child;case 14:return r_(t,e,e.type,e.pendingProps,n);case 15:return cT(t,e,e.type,e.pendingProps,n);case 19:return dT(t,e,n);case 31:return i=e.pendingProps,n=e.mode,i={mode:i.mode,children:i.children},t===null?(n=_c(i,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=yi(t.child,i),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return hT(t,e,n);case 24:return Js(e),i=Pt(ct),t===null?(s=Km(),s===null&&(s=Ve,r=Qm(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),e.memoizedState={parent:i,cache:s},Ym(e),Gi(e,ct,s)):(t.lanes&n&&(wd(t,e),Co(e,null,null,n),Io()),s=t.memoizedState,r=e.memoizedState,s.parent!==i?(s={parent:i,cache:i},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),Gi(e,ct,i)):(i=r.cache,Gi(e,ct,i),i!==s.cache&&Ed(e,[ct],n,!0))),At(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(P(156,e.tag))}function oi(t){t.flags|=4}function h_(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!ib(e)){if(e=Tn.current,e!==null&&((ye&4194048)===ye?Ln!==null:(ye&62914560)!==ye&&!(ye&536870912)||e!==Ln))throw xo=bd,v0;t.flags|=8192}}function Tu(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?zE():536870912,t.lanes|=e,pa|=e)}function oo(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Fe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function cx(t,e,n){var i=e.pendingProps;switch(Gm(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(e),null;case 1:return Fe(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),_i(ct),la(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ro(e)?oi(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,By())),Fe(e),null;case 26:return n=e.memoizedState,t===null?(oi(e),n!==null?(Fe(e),h_(e,n)):(Fe(e),e.flags&=-16777217)):n?n!==t.memoizedState?(oi(e),Fe(e),h_(e,n)):(Fe(e),e.flags&=-16777217):(t.memoizedProps!==i&&oi(e),Fe(e),e.flags&=-16777217),null;case 27:ic(e),n=ss.current;var s=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==i&&oi(e);else{if(!i){if(e.stateNode===null)throw Error(P(166));return Fe(e),null}t=jn.current,ro(e)?Uy(e):(t=eb(s,i,n),e.stateNode=t,oi(e))}return Fe(e),null;case 5:if(ic(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&oi(e);else{if(!i){if(e.stateNode===null)throw Error(P(166));return Fe(e),null}if(t=jn.current,ro(e))Uy(e);else{switch(s=Ac(ss.current),t){case 1:t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}t[jt]=e,t[$t]=i;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=t;e:switch(Nt(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&oi(e)}}return Fe(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&oi(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(P(166));if(t=ss.current,ro(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,s=zt,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}t[jt]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||ZT(t.nodeValue,n)),t||Ws(e)}else t=Ac(t).createTextNode(i),t[jt]=e,e.stateNode=t}return Fe(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=ro(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(P(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(P(317));s[jt]=e}else Tl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fe(e),s=!1}else s=By(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(mi(e),e):(mi(e),null)}if(mi(e),e.flags&128)return e.lanes=n,e;if(n=i!==null,t=t!==null&&t.memoizedState!==null,n){i=e.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Tu(e,e.updateQueue),Fe(e),null;case 4:return la(),t===null&&gp(e.stateNode.containerInfo),Fe(e),null;case 10:return _i(e.type),Fe(e),null;case 19:if(Et(ht),s=e.memoizedState,s===null)return Fe(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)oo(s,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=pc(t),r!==null){for(e.flags|=128,oo(s,!1),t=r.updateQueue,e.updateQueue=t,Tu(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)p0(n,t),n=n.sibling;return ze(ht,ht.current&1|2),e.child}t=t.sibling}s.tail!==null&&Pn()>Ec&&(e.flags|=128,i=!0,oo(s,!1),e.lanes=4194304)}else{if(!i)if(t=pc(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Tu(e,t),oo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!Te)return Fe(e),null}else 2*Pn()-s.renderingStartTime>Ec&&n!==536870912&&(e.flags|=128,i=!0,oo(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Pn(),e.sibling=null,t=ht.current,ze(ht,i?t&1|2:t&1),e):(Fe(e),null);case 22:case 23:return mi(e),$m(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Fe(e),e.subtreeFlags&6&&(e.flags|=8192)):Fe(e),n=e.updateQueue,n!==null&&Tu(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Et(Ys),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),_i(ct),Fe(e),null;case 25:return null;case 30:return null}throw Error(P(156,e.tag))}function hx(t,e){switch(Gm(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _i(ct),la(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return ic(e),null;case 13:if(mi(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));Tl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Et(ht),null;case 4:return la(),null;case 10:return _i(e.type),null;case 22:case 23:return mi(e),$m(),t!==null&&Et(Ys),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return _i(ct),null;case 25:return null;default:return null}}function pT(t,e){switch(Gm(e),e.tag){case 3:_i(ct),la();break;case 26:case 27:case 5:ic(e);break;case 4:la();break;case 13:mi(e);break;case 19:Et(ht);break;case 10:_i(e.type);break;case 22:case 23:mi(e),$m(),t!==null&&Et(Ys);break;case 24:_i(ct)}}function Rl(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&t)===t){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(l){De(e,e.return,l)}}function vs(t,e,n){try{var i=e.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&t)===t){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,s=e;var u=n,f=l;try{f()}catch(m){De(s,u,m)}}}i=i.next}while(i!==r)}}catch(m){De(e,e.return,m)}}function gT(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{b0(e,n)}catch(i){De(t,t.return,i)}}}function yT(t,e,n){n.props=tr(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){De(t,e,i)}}function Do(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(s){De(t,e,s)}}function kn(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){De(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){De(t,e,s)}else n.current=null}function _T(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){De(t,t.return,s)}}function Of(t,e,n){try{var i=t.stateNode;Ox(i,t.type,n,e),i[$t]=e}catch(s){De(t,t.return,s)}}function vT(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Is(t.type)||t.tag===4}function Vf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Is(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vd(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mh));else if(i!==4&&(i===27&&Is(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Vd(t,e,n),t=t.sibling;t!==null;)Vd(t,e,n),t=t.sibling}function vc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Is(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(vc(t,e,n),t=t.sibling;t!==null;)vc(t,e,n),t=t.sibling}function ET(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);Nt(e,i,n),e[jt]=t,e[$t]=n}catch(r){De(t,t.return,r)}}var ui=!1,Je=!1,Mf=!1,f_=typeof WeakSet=="function"?WeakSet:Set,gt=null;function fx(t,e){if(t=t.containerInfo,Bd=Cc,t=o0(t),zm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,f=0,m=0,g=t,p=null;t:for(;;){for(var _;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==r||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)p=g,g=_;for(;;){if(g===t)break t;if(p===n&&++f===s&&(l=a),p===r&&++m===i&&(u=a),(_=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(qd={focusedElem:t,selectionRange:n},Cc=!1,gt=e;gt!==null;)if(e=gt,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,gt=t;else for(;gt!==null;){switch(e=gt,r=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var C=tr(n.type,s,n.elementType===n.type);t=i.getSnapshotBeforeUpdate(C,r),i.__reactInternalSnapshotBeforeUpdate=t}catch(V){De(n,n.return,V)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Fd(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Fd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(P(163))}if(t=e.sibling,t!==null){t.return=e.return,gt=t;break}gt=e.return}}function TT(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:zi(t,n),i&4&&Rl(5,n);break;case 1:if(zi(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){De(n,n.return,a)}else{var s=tr(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){De(n,n.return,a)}}i&64&&gT(n),i&512&&Do(n,n.return);break;case 3:if(zi(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{b0(t,e)}catch(a){De(n,n.return,a)}}break;case 27:e===null&&i&4&&ET(n);case 26:case 5:zi(t,n),e===null&&i&4&&_T(n),i&512&&Do(n,n.return);break;case 12:zi(t,n);break;case 13:zi(t,n),i&4&&ST(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=Tx.bind(null,n),Ux(t,n))));break;case 22:if(i=n.memoizedState!==null||ui,!i){e=e!==null&&e.memoizedState!==null||Je,s=ui;var r=Je;ui=i,(Je=e)&&!r?qi(t,n,(n.subtreeFlags&8772)!==0):zi(t,n),ui=s,Je=r}break;case 30:break;default:zi(t,n)}}function bT(t){var e=t.alternate;e!==null&&(t.alternate=null,bT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Mm(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Le=null,Qt=!1;function li(t,e,n){for(n=n.child;n!==null;)wT(t,e,n),n=n.sibling}function wT(t,e,n){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(gl,n)}catch{}switch(n.tag){case 26:Je||kn(n,e),li(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Je||kn(n,e);var i=Le,s=Qt;Is(n.type)&&(Le=n.stateNode,Qt=!1),li(t,e,n),ko(n.stateNode),Le=i,Qt=s;break;case 5:Je||kn(n,e);case 6:if(i=Le,s=Qt,Le=null,li(t,e,n),Le=i,Qt=s,Le!==null)if(Qt)try{(Le.nodeType===9?Le.body:Le.nodeName==="HTML"?Le.ownerDocument.body:Le).removeChild(n.stateNode)}catch(r){De(n,e,r)}else try{Le.removeChild(n.stateNode)}catch(r){De(n,e,r)}break;case 18:Le!==null&&(Qt?(t=Le,S_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),tl(t)):S_(Le,n.stateNode));break;case 4:i=Le,s=Qt,Le=n.stateNode.containerInfo,Qt=!0,li(t,e,n),Le=i,Qt=s;break;case 0:case 11:case 14:case 15:Je||vs(2,n,e),Je||vs(4,n,e),li(t,e,n);break;case 1:Je||(kn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&yT(n,e,i)),li(t,e,n);break;case 21:li(t,e,n);break;case 22:Je=(i=Je)||n.memoizedState!==null,li(t,e,n),Je=i;break;default:li(t,e,n)}}function ST(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{tl(t)}catch(n){De(e,e.return,n)}}function dx(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new f_),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new f_),e;default:throw Error(P(435,t.tag))}}function kf(t,e){var n=dx(t);e.forEach(function(i){var s=bx.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}function en(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:if(Is(l.type)){Le=l.stateNode,Qt=!1;break e}break;case 5:Le=l.stateNode,Qt=!1;break e;case 3:case 4:Le=l.stateNode.containerInfo,Qt=!0;break e}l=l.return}if(Le===null)throw Error(P(160));wT(r,a,s),Le=null,Qt=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)AT(e,t),e=e.sibling}var An=null;function AT(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:en(e,t),tn(t),i&4&&(vs(3,t,t.return),Rl(3,t),vs(5,t,t.return));break;case 1:en(e,t),tn(t),i&512&&(Je||n===null||kn(n,n.return)),i&64&&ui&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=An;if(en(e,t),tn(t),i&512&&(Je||n===null||kn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[vl]||r[jt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),Nt(r,i,n),r[jt]=t,yt(r),i=r;break e;case"link":var a=C_("link","href",s).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}r=s.createElement(i),Nt(r,i,n),s.head.appendChild(r);break;case"meta":if(a=C_("meta","content",s).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}r=s.createElement(i),Nt(r,i,n),s.head.appendChild(r);break;default:throw Error(P(468,i))}r[jt]=t,yt(r),i=r}t.stateNode=i}else N_(s,t.type,t.stateNode);else t.stateNode=I_(s,i,t.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?N_(s,t.type,t.stateNode):I_(s,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Of(t,t.memoizedProps,n.memoizedProps)}break;case 27:en(e,t),tn(t),i&512&&(Je||n===null||kn(n,n.return)),n!==null&&i&4&&Of(t,t.memoizedProps,n.memoizedProps);break;case 5:if(en(e,t),tn(t),i&512&&(Je||n===null||kn(n,n.return)),t.flags&32){s=t.stateNode;try{ca(s,"")}catch(_){De(t,t.return,_)}}i&4&&t.stateNode!=null&&(s=t.memoizedProps,Of(t,s,n!==null?n.memoizedProps:s)),i&1024&&(Mf=!0);break;case 6:if(en(e,t),tn(t),i&4){if(t.stateNode===null)throw Error(P(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(_){De(t,t.return,_)}}break;case 3:if(Hu=null,s=An,An=xc(e.containerInfo),en(e,t),An=s,tn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{tl(e.containerInfo)}catch(_){De(t,t.return,_)}Mf&&(Mf=!1,xT(t));break;case 4:i=An,An=xc(t.stateNode.containerInfo),en(e,t),tn(t),An=i;break;case 12:en(e,t),tn(t);break;case 13:en(e,t),tn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(dp=Pn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,kf(t,i)));break;case 22:s=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,f=ui,m=Je;if(ui=f||s,Je=m||u,en(e,t),Je=m,ui=f,tn(t),i&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(n===null||u||ui||Je||Bs(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(r=u.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,p=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(_){De(u,u.return,_)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(_){De(u,u.return,_)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,kf(t,n))));break;case 19:en(e,t),tn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,kf(t,i)));break;case 30:break;case 21:break;default:en(e,t),tn(t)}}function tn(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(vT(i)){n=i;break}i=i.return}if(n==null)throw Error(P(160));switch(n.tag){case 27:var s=n.stateNode,r=Vf(t);vc(t,r,s);break;case 5:var a=n.stateNode;n.flags&32&&(ca(a,""),n.flags&=-33);var l=Vf(t);vc(t,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,f=Vf(t);Vd(t,f,u);break;default:throw Error(P(161))}}catch(m){De(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xT(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;xT(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function zi(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)TT(t,e.alternate,e),e=e.sibling}function Bs(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:vs(4,e,e.return),Bs(e);break;case 1:kn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&yT(e,e.return,n),Bs(e);break;case 27:ko(e.stateNode);case 26:case 5:kn(e,e.return),Bs(e);break;case 22:e.memoizedState===null&&Bs(e);break;case 30:Bs(e);break;default:Bs(e)}t=t.sibling}}function qi(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,s=t,r=e,a=r.flags;switch(r.tag){case 0:case 11:case 15:qi(s,r,n),Rl(4,r);break;case 1:if(qi(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(f){De(i,i.return,f)}if(i=r,s=i.updateQueue,s!==null){var l=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)T0(u[s],l)}catch(f){De(i,i.return,f)}}n&&a&64&&gT(r),Do(r,r.return);break;case 27:ET(r);case 26:case 5:qi(s,r,n),n&&i===null&&a&4&&_T(r),Do(r,r.return);break;case 12:qi(s,r,n);break;case 13:qi(s,r,n),n&&a&4&&ST(s,r);break;case 22:r.memoizedState===null&&qi(s,r,n),Do(r,r.return);break;case 30:break;default:qi(s,r,n)}e=e.sibling}}function up(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&wl(n))}function cp(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&wl(t))}function On(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)RT(t,e,n,i),e=e.sibling}function RT(t,e,n,i){var s=e.flags;switch(e.tag){case 0:case 11:case 15:On(t,e,n,i),s&2048&&Rl(9,e);break;case 1:On(t,e,n,i);break;case 3:On(t,e,n,i),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&wl(t)));break;case 12:if(s&2048){On(t,e,n,i),t=e.stateNode;try{var r=e.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){De(e,e.return,u)}}else On(t,e,n,i);break;case 13:On(t,e,n,i);break;case 23:break;case 22:r=e.stateNode,a=e.alternate,e.memoizedState!==null?r._visibility&2?On(t,e,n,i):Oo(t,e):r._visibility&2?On(t,e,n,i):(r._visibility|=2,Ir(t,e,n,i,(e.subtreeFlags&10256)!==0)),s&2048&&up(a,e);break;case 24:On(t,e,n,i),s&2048&&cp(e.alternate,e);break;default:On(t,e,n,i)}}function Ir(t,e,n,i,s){for(s=s&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var r=t,a=e,l=n,u=i,f=a.flags;switch(a.tag){case 0:case 11:case 15:Ir(r,a,l,u,s),Rl(8,a);break;case 23:break;case 22:var m=a.stateNode;a.memoizedState!==null?m._visibility&2?Ir(r,a,l,u,s):Oo(r,a):(m._visibility|=2,Ir(r,a,l,u,s)),s&&f&2048&&up(a.alternate,a);break;case 24:Ir(r,a,l,u,s),s&&f&2048&&cp(a.alternate,a);break;default:Ir(r,a,l,u,s)}e=e.sibling}}function Oo(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,s=i.flags;switch(i.tag){case 22:Oo(n,i),s&2048&&up(i.alternate,i);break;case 24:Oo(n,i),s&2048&&cp(i.alternate,i);break;default:Oo(n,i)}e=e.sibling}}var mo=8192;function Sr(t){if(t.subtreeFlags&mo)for(t=t.child;t!==null;)IT(t),t=t.sibling}function IT(t){switch(t.tag){case 26:Sr(t),t.flags&mo&&t.memoizedState!==null&&Wx(An,t.memoizedState,t.memoizedProps);break;case 5:Sr(t);break;case 3:case 4:var e=An;An=xc(t.stateNode.containerInfo),Sr(t),An=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=mo,mo=16777216,Sr(t),mo=e):Sr(t));break;default:Sr(t)}}function CT(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function lo(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];gt=i,DT(i,t)}CT(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)NT(t),t=t.sibling}function NT(t){switch(t.tag){case 0:case 11:case 15:lo(t),t.flags&2048&&vs(9,t,t.return);break;case 3:lo(t);break;case 12:lo(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Bu(t)):lo(t);break;default:lo(t)}}function Bu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];gt=i,DT(i,t)}CT(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:vs(8,e,e.return),Bu(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Bu(e));break;default:Bu(e)}t=t.sibling}}function DT(t,e){for(;gt!==null;){var n=gt;switch(n.tag){case 0:case 11:case 15:vs(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:wl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,gt=i;else e:for(n=t;gt!==null;){i=gt;var s=i.sibling,r=i.return;if(bT(i),i===n){gt=null;break e}if(s!==null){s.return=r,gt=s;break e}gt=r}}}var mx={getCacheForType:function(t){var e=Pt(ct),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},px=typeof WeakMap=="function"?WeakMap:Map,xe=0,Ve=null,le=null,ye=0,Se=0,nn=null,ts=!1,Ma=!1,hp=!1,wi=0,Xe=0,Es=0,$s=0,fp=0,En=0,pa=0,Vo=null,Kt=null,Md=!1,dp=0,Ec=1/0,Tc=null,os=null,Rt=0,ls=null,ga=null,na=0,kd=0,jd=null,OT=null,Mo=0,Pd=null;function un(){if(xe&2&&ye!==0)return ye&-ye;if(te.T!==null){var t=ha;return t!==0?t:pp()}return HE()}function VT(){En===0&&(En=!(ye&536870912)||Te?UE():536870912);var t=Tn.current;return t!==null&&(t.flags|=32),En}function cn(t,e,n){(t===Ve&&(Se===2||Se===9)||t.cancelPendingCommit!==null)&&(ya(t,0),ns(t,ye,En,!1)),_l(t,n),(!(xe&2)||t!==Ve)&&(t===Ve&&(!(xe&2)&&($s|=n),Xe===4&&ns(t,ye,En,!1)),$n(t))}function MT(t,e,n){if(xe&6)throw Error(P(327));var i=!n&&(e&124)===0&&(e&t.expiredLanes)===0||yl(t,e),s=i?_x(t,e):jf(t,e,!0),r=i;do{if(s===0){Ma&&!i&&ns(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!gx(n)){s=jf(t,e,!1),r=!1;continue}if(s===2){if(r=e,t.errorRecoveryDisabledLanes&r)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;s=Vo;var u=l.current.memoizedState.isDehydrated;if(u&&(ya(l,a).flags|=256),a=jf(l,a,!1),a!==2){if(hp&&!u){l.errorRecoveryDisabledLanes|=r,$s|=r,s=4;break e}r=Kt,Kt=s,r!==null&&(Kt===null?Kt=r:Kt.push.apply(Kt,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){ya(t,0),ns(t,e,0,!0);break}e:{switch(i=t,r=s,r){case 0:case 1:throw Error(P(345));case 4:if((e&4194048)!==e)break;case 6:ns(i,e,En,!ts);break e;case 2:Kt=null;break;case 3:case 5:break;default:throw Error(P(329))}if((e&62914560)===e&&(s=dp+300-Pn(),10<s)){if(ns(i,e,En,!ts),th(i,0,!0)!==0)break e;i.timeoutHandle=JT(d_.bind(null,i,n,Kt,Tc,Md,e,En,$s,pa,ts,r,2,-0,0),s);break e}d_(i,n,Kt,Tc,Md,e,En,$s,pa,ts,r,0,-0,0)}}break}while(!0);$n(t)}function d_(t,e,n,i,s,r,a,l,u,f,m,g,p,_){if(t.timeoutHandle=-1,g=e.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(Zo={stylesheets:null,count:0,unsuspend:Zx},IT(e),g=Jx(),g!==null)){t.cancelPendingCommit=g(p_.bind(null,t,e,r,n,i,s,a,l,u,m,1,p,_)),ns(t,r,a,!f);return}p_(t,e,r,n,i,s,a,l,u)}function gx(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!fn(r(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ns(t,e,n,i){e&=~fp,e&=~$s,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var s=e;0<s;){var r=31-ln(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&BE(t,n,e)}function hh(){return xe&6?!0:(Il(0),!1)}function mp(){if(le!==null){if(Se===0)var t=le.return;else t=le,di=cr=null,ep(t),ta=null,Yo=0,t=le;for(;t!==null;)pT(t.alternate,t),t=t.return;le=null}}function ya(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Mx(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),mp(),Ve=t,le=n=yi(t.current,null),ye=e,Se=0,nn=null,ts=!1,Ma=yl(t,e),hp=!1,pa=En=fp=$s=Es=Xe=0,Kt=Vo=null,Md=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var s=31-ln(i),r=1<<s;e|=t[s],i&=~r}return wi=e,rh(),n}function kT(t,e){ae=null,te.H=mc,e===Sl||e===oh?(e=Gy(),Se=3):e===v0?(e=Gy(),Se=4):Se=e===uT?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,nn=e,le===null&&(Xe=1,yc(t,_n(e,t.current)))}function jT(){var t=te.H;return te.H=mc,t===null?mc:t}function PT(){var t=te.A;return te.A=mx,t}function Ld(){Xe=4,ts||(ye&4194048)!==ye&&Tn.current!==null||(Ma=!0),!(Es&134217727)&&!($s&134217727)||Ve===null||ns(Ve,ye,En,!1)}function jf(t,e,n){var i=xe;xe|=2;var s=jT(),r=PT();(Ve!==t||ye!==e)&&(Tc=null,ya(t,e)),e=!1;var a=Xe;e:do try{if(Se!==0&&le!==null){var l=le,u=nn;switch(Se){case 8:mp(),a=6;break e;case 3:case 2:case 9:case 6:Tn.current===null&&(e=!0);var f=Se;if(Se=0,nn=null,Qr(t,l,u,f),n&&Ma){a=0;break e}break;default:f=Se,Se=0,nn=null,Qr(t,l,u,f)}}yx(),a=Xe;break}catch(m){kT(t,m)}while(!0);return e&&t.shellSuspendCounter++,di=cr=null,xe=i,te.H=s,te.A=r,le===null&&(Ve=null,ye=0,rh()),a}function yx(){for(;le!==null;)LT(le)}function _x(t,e){var n=xe;xe|=2;var i=jT(),s=PT();Ve!==t||ye!==e?(Tc=null,Ec=Pn()+500,ya(t,e)):Ma=yl(t,e);e:do try{if(Se!==0&&le!==null){e=le;var r=nn;t:switch(Se){case 1:Se=0,nn=null,Qr(t,e,r,1);break;case 2:case 9:if(Fy(r)){Se=0,nn=null,m_(e);break}e=function(){Se!==2&&Se!==9||Ve!==t||(Se=7),$n(t)},r.then(e,e);break e;case 3:Se=7;break e;case 4:Se=5;break e;case 7:Fy(r)?(Se=0,nn=null,m_(e)):(Se=0,nn=null,Qr(t,e,r,7));break;case 5:var a=null;switch(le.tag){case 26:a=le.memoizedState;case 5:case 27:var l=le;if(!a||ib(a)){Se=0,nn=null;var u=l.sibling;if(u!==null)le=u;else{var f=l.return;f!==null?(le=f,fh(f)):le=null}break t}}Se=0,nn=null,Qr(t,e,r,5);break;case 6:Se=0,nn=null,Qr(t,e,r,6);break;case 8:mp(),Xe=6;break e;default:throw Error(P(462))}}vx();break}catch(m){kT(t,m)}while(!0);return di=cr=null,te.H=i,te.A=s,xe=n,le!==null?0:(Ve=null,ye=0,rh(),Xe)}function vx(){for(;le!==null&&!BA();)LT(le)}function LT(t){var e=mT(t.alternate,t,wi);t.memoizedProps=t.pendingProps,e===null?fh(t):le=e}function m_(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=o_(n,e,e.pendingProps,e.type,void 0,ye);break;case 11:e=o_(n,e,e.pendingProps,e.type.render,e.ref,ye);break;case 5:ep(e);default:pT(n,e),e=le=p0(e,wi),e=mT(n,e,wi)}t.memoizedProps=t.pendingProps,e===null?fh(t):le=e}function Qr(t,e,n,i){di=cr=null,ep(e),ta=null,Yo=0;var s=e.return;try{if(lx(t,s,e,n,ye)){Xe=1,yc(t,_n(n,t.current)),le=null;return}}catch(r){if(s!==null)throw le=s,r;Xe=1,yc(t,_n(n,t.current)),le=null;return}e.flags&32768?(Te||i===1?t=!0:Ma||ye&536870912?t=!1:(ts=t=!0,(i===2||i===9||i===3||i===6)&&(i=Tn.current,i!==null&&i.tag===13&&(i.flags|=16384))),UT(e,t)):fh(e)}function fh(t){var e=t;do{if(e.flags&32768){UT(e,ts);return}t=e.return;var n=cx(e.alternate,e,wi);if(n!==null){le=n;return}if(e=e.sibling,e!==null){le=e;return}le=e=t}while(e!==null);Xe===0&&(Xe=5)}function UT(t,e){do{var n=hx(t.alternate,t);if(n!==null){n.flags&=32767,le=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){le=t;return}le=t=n}while(t!==null);Xe=6,le=null}function p_(t,e,n,i,s,r,a,l,u){t.cancelPendingCommit=null;do dh();while(Rt!==0);if(xe&6)throw Error(P(327));if(e!==null){if(e===t.current)throw Error(P(177));if(r=e.lanes|e.childLanes,r|=Bm,ZA(t,n,r,a,l,u),t===Ve&&(le=Ve=null,ye=0),ga=e,ls=t,na=n,kd=r,jd=s,OT=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,wx(sc,function(){return FT(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=te.T,te.T=null,s=be.p,be.p=2,a=xe,xe|=4;try{fx(t,e,n)}finally{xe=a,be.p=s,te.T=i}}Rt=1,zT(),BT(),qT()}}function zT(){if(Rt===1){Rt=0;var t=ls,e=ga,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=te.T,te.T=null;var i=be.p;be.p=2;var s=xe;xe|=4;try{AT(e,t);var r=qd,a=o0(t.containerInfo),l=r.focusedElem,u=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&a0(l.ownerDocument.documentElement,l)){if(u!==null&&zm(l)){var f=u.start,m=u.end;if(m===void 0&&(m=f),"selectionStart"in l)l.selectionStart=f,l.selectionEnd=Math.min(m,l.value.length);else{var g=l.ownerDocument||document,p=g&&g.defaultView||window;if(p.getSelection){var _=p.getSelection(),C=l.textContent.length,V=Math.min(u.start,C),D=u.end===void 0?V:Math.min(u.end,C);!_.extend&&V>D&&(a=D,D=V,V=a);var w=jy(l,V),E=jy(l,D);if(w&&E&&(_.rangeCount!==1||_.anchorNode!==w.node||_.anchorOffset!==w.offset||_.focusNode!==E.node||_.focusOffset!==E.offset)){var x=g.createRange();x.setStart(w.node,w.offset),_.removeAllRanges(),V>D?(_.addRange(x),_.extend(E.node,E.offset)):(x.setEnd(E.node,E.offset),_.addRange(x))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var O=g[l];O.element.scrollLeft=O.left,O.element.scrollTop=O.top}}Cc=!!Bd,qd=Bd=null}finally{xe=s,be.p=i,te.T=n}}t.current=e,Rt=2}}function BT(){if(Rt===2){Rt=0;var t=ls,e=ga,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=te.T,te.T=null;var i=be.p;be.p=2;var s=xe;xe|=4;try{TT(t,e.alternate,e)}finally{xe=s,be.p=i,te.T=n}}Rt=3}}function qT(){if(Rt===4||Rt===3){Rt=0,qA();var t=ls,e=ga,n=na,i=OT;e.subtreeFlags&10256||e.flags&10256?Rt=5:(Rt=0,ga=ls=null,HT(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(os=null),Vm(n),e=e.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(gl,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=te.T,s=be.p,be.p=2,te.T=null;try{for(var r=t.onRecoverableError,a=0;a<i.length;a++){var l=i[a];r(l.value,{componentStack:l.stack})}}finally{te.T=e,be.p=s}}na&3&&dh(),$n(t),s=t.pendingLanes,n&4194090&&s&42?t===Pd?Mo++:(Mo=0,Pd=t):Mo=0,Il(0)}}function HT(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,wl(e)))}function dh(t){return zT(),BT(),qT(),FT()}function FT(){if(Rt!==5)return!1;var t=ls,e=kd;kd=0;var n=Vm(na),i=te.T,s=be.p;try{be.p=32>n?32:n,te.T=null,n=jd,jd=null;var r=ls,a=na;if(Rt=0,ga=ls=null,na=0,xe&6)throw Error(P(331));var l=xe;if(xe|=4,NT(r.current),RT(r,r.current,a,n),xe=l,Il(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(gl,r)}catch{}return!0}finally{be.p=s,te.T=i,HT(t,e)}}function g_(t,e,n){e=_n(n,e),e=Nd(t.stateNode,e,2),t=as(t,e,2),t!==null&&(_l(t,2),$n(t))}function De(t,e,n){if(t.tag===3)g_(t,t,n);else for(;e!==null;){if(e.tag===3){g_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(os===null||!os.has(i))){t=_n(n,t),n=oT(2),i=as(e,n,2),i!==null&&(lT(n,i,e,t),_l(i,2),$n(i));break}}e=e.return}}function Pf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new px;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(hp=!0,s.add(n),t=Ex.bind(null,t,e,n),e.then(t,t))}function Ex(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ve===t&&(ye&n)===n&&(Xe===4||Xe===3&&(ye&62914560)===ye&&300>Pn()-dp?!(xe&2)&&ya(t,0):fp|=n,pa===ye&&(pa=0)),$n(t)}function GT(t,e){e===0&&(e=zE()),t=Va(t,e),t!==null&&(_l(t,e),$n(t))}function Tx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),GT(t,n)}function bx(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(P(314))}i!==null&&i.delete(e),GT(t,n)}function wx(t,e){return Dm(t,e)}var bc=null,Cr=null,Ud=!1,wc=!1,Lf=!1,Xs=0;function $n(t){t!==Cr&&t.next===null&&(Cr===null?bc=Cr=t:Cr=Cr.next=t),wc=!0,Ud||(Ud=!0,Ax())}function Il(t,e){if(!Lf&&wc){Lf=!0;do for(var n=!1,i=bc;i!==null;){if(t!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,l=i.pingedLanes;r=(1<<31-ln(42|t)+1)-1,r&=s&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,y_(i,r))}else r=ye,r=th(i,i===Ve?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||yl(i,r)||(n=!0,y_(i,r));i=i.next}while(n);Lf=!1}}function Sx(){QT()}function QT(){wc=Ud=!1;var t=0;Xs!==0&&(Vx()&&(t=Xs),Xs=0);for(var e=Pn(),n=null,i=bc;i!==null;){var s=i.next,r=KT(i,e);r===0?(i.next=null,n===null?bc=s:n.next=s,s===null&&(Cr=n)):(n=i,(t!==0||r&3)&&(wc=!0)),i=s}Il(t)}function KT(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var a=31-ln(r),l=1<<a,u=s[a];u===-1?(!(l&n)||l&i)&&(s[a]=XA(l,e)):u<=e&&(t.expiredLanes|=l),r&=~l}if(e=Ve,n=ye,n=th(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Se===2||Se===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&cf(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||yl(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&cf(i),Vm(n)){case 2:case 8:n=PE;break;case 32:n=sc;break;case 268435456:n=LE;break;default:n=sc}return i=YT.bind(null,t),n=Dm(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&cf(i),t.callbackPriority=2,t.callbackNode=null,2}function YT(t,e){if(Rt!==0&&Rt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(dh()&&t.callbackNode!==n)return null;var i=ye;return i=th(t,t===Ve?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(MT(t,i,e),KT(t,Pn()),t.callbackNode!=null&&t.callbackNode===n?YT.bind(null,t):null)}function y_(t,e){if(dh())return null;MT(t,e,!0)}function Ax(){kx(function(){xe&6?Dm(jE,Sx):QT()})}function pp(){return Xs===0&&(Xs=UE()),Xs}function __(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Vu(""+t)}function v_(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function xx(t,e,n,i,s){if(e==="submit"&&n&&n.stateNode===s){var r=__((s[$t]||null).action),a=i.submitter;a&&(e=(e=a[$t]||null)?__(e.formAction):a.getAttribute("formAction"),e!==null&&(r=e,a=null));var l=new nh("action","action",null,i,s);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Xs!==0){var u=a?v_(s,a):new FormData(s);Id(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?v_(s,a):new FormData(s),Id(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var Uf=0;Uf<gd.length;Uf++){var zf=gd[Uf],Rx=zf.toLowerCase(),Ix=zf[0].toUpperCase()+zf.slice(1);Nn(Rx,"on"+Ix)}Nn(u0,"onAnimationEnd");Nn(c0,"onAnimationIteration");Nn(h0,"onAnimationStart");Nn("dblclick","onDoubleClick");Nn("focusin","onFocus");Nn("focusout","onBlur");Nn(G1,"onTransitionRun");Nn(Q1,"onTransitionStart");Nn(K1,"onTransitionCancel");Nn(f0,"onTransitionEnd");ua("onMouseEnter",["mouseout","mouseover"]);ua("onMouseLeave",["mouseout","mouseover"]);ua("onPointerEnter",["pointerout","pointerover"]);ua("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($o));function $T(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=f;try{r(s)}catch(m){gc(m)}s.currentTarget=null,r=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,f=l.currentTarget,l=l.listener,u!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=f;try{r(s)}catch(m){gc(m)}s.currentTarget=null,r=u}}}}function oe(t,e){var n=e[ud];n===void 0&&(n=e[ud]=new Set);var i=t+"__bubble";n.has(i)||(XT(e,t,2,!1),n.add(i))}function Bf(t,e,n){var i=0;e&&(i|=4),XT(n,t,i,e)}var bu="_reactListening"+Math.random().toString(36).slice(2);function gp(t){if(!t[bu]){t[bu]=!0,FE.forEach(function(n){n!=="selectionchange"&&(Cx.has(n)||Bf(n,!1,t),Bf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bu]||(e[bu]=!0,Bf("selectionchange",!1,e))}}function XT(t,e,n,i){switch(lb(e)){case 2:var s=n2;break;case 8:s=i2;break;default:s=Ep}n=s.bind(null,e,n,t),s=void 0,!dd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function qf(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;l!==null;){if(a=Pr(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=r=a;continue e}l=l.parentNode}}i=i.return}WE(function(){var f=r,m=jm(n),g=[];e:{var p=d0.get(t);if(p!==void 0){var _=nh,C=t;switch(t){case"keypress":if(ku(n)===0)break e;case"keydown":case"keyup":_=w1;break;case"focusin":C="focus",_=_f;break;case"focusout":C="blur",_=_f;break;case"beforeblur":case"afterblur":_=_f;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=xy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=h1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=x1;break;case u0:case c0:case h0:_=m1;break;case f0:_=I1;break;case"scroll":case"scrollend":_=u1;break;case"wheel":_=N1;break;case"copy":case"cut":case"paste":_=g1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Iy;break;case"toggle":case"beforetoggle":_=O1}var V=(e&4)!==0,D=!V&&(t==="scroll"||t==="scrollend"),w=V?p!==null?p+"Capture":null:p;V=[];for(var E=f,x;E!==null;){var O=E;if(x=O.stateNode,O=O.tag,O!==5&&O!==26&&O!==27||x===null||w===null||(O=Ho(E,w),O!=null&&V.push(Xo(E,O,x))),D)break;E=E.return}0<V.length&&(p=new _(p,C,null,n,m),g.push({event:p,listeners:V}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==fd&&(C=n.relatedTarget||n.fromElement)&&(Pr(C)||C[Da]))break e;if((_||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,_?(C=n.relatedTarget||n.toElement,_=f,C=C?Pr(C):null,C!==null&&(D=pl(C),V=C.tag,C!==D||V!==5&&V!==27&&V!==6)&&(C=null)):(_=null,C=f),_!==C)){if(V=xy,O="onMouseLeave",w="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(V=Iy,O="onPointerLeave",w="onPointerEnter",E="pointer"),D=_==null?p:fo(_),x=C==null?p:fo(C),p=new V(O,E+"leave",_,n,m),p.target=D,p.relatedTarget=x,O=null,Pr(m)===f&&(V=new V(w,E+"enter",C,n,m),V.target=x,V.relatedTarget=D,O=V),D=O,_&&C)t:{for(V=_,w=C,E=0,x=V;x;x=Ar(x))E++;for(x=0,O=w;O;O=Ar(O))x++;for(;0<E-x;)V=Ar(V),E--;for(;0<x-E;)w=Ar(w),x--;for(;E--;){if(V===w||w!==null&&V===w.alternate)break t;V=Ar(V),w=Ar(w)}V=null}else V=null;_!==null&&E_(g,p,_,V,!1),C!==null&&D!==null&&E_(g,D,C,V,!0)}}e:{if(p=f?fo(f):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var U=Oy;else if(Dy(p))if(s0)U=q1;else{U=z1;var H=U1}else _=p.nodeName,!_||_.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?f&&km(f.elementType)&&(U=Oy):U=B1;if(U&&(U=U(t,f))){i0(g,U,n,m);break e}H&&H(t,p,f),t==="focusout"&&f&&p.type==="number"&&f.memoizedProps.value!=null&&hd(p,"number",p.value)}switch(H=f?fo(f):window,t){case"focusin":(Dy(H)||H.contentEditable==="true")&&(zr=H,md=f,So=null);break;case"focusout":So=md=zr=null;break;case"mousedown":pd=!0;break;case"contextmenu":case"mouseup":case"dragend":pd=!1,Py(g,n,m);break;case"selectionchange":if(F1)break;case"keydown":case"keyup":Py(g,n,m)}var T;if(Um)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ur?t0(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(e0&&n.locale!=="ko"&&(Ur||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ur&&(T=JE()):(es=m,Pm="value"in es?es.value:es.textContent,Ur=!0)),H=Sc(f,v),0<H.length&&(v=new Ry(v,t,null,n,m),g.push({event:v,listeners:H}),T?v.data=T:(T=n0(n),T!==null&&(v.data=T)))),(T=M1?k1(t,n):j1(t,n))&&(v=Sc(f,"onBeforeInput"),0<v.length&&(H=new Ry("onBeforeInput","beforeinput",null,n,m),g.push({event:H,listeners:v}),H.data=T)),xx(g,t,f,n,m)}$T(g,e)})}function Xo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=Ho(t,n),s!=null&&i.unshift(Xo(t,s,r)),s=Ho(t,e),s!=null&&i.push(Xo(t,s,r))),t.tag===3)return i;t=t.return}return[]}function Ar(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function E_(t,e,n,i,s){for(var r=e._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,f=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||f===null||(u=f,s?(f=Ho(n,r),f!=null&&a.unshift(Xo(n,f,u))):s||(f=Ho(n,r),f!=null&&a.push(Xo(n,f,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Nx=/\r\n?/g,Dx=/\u0000|\uFFFD/g;function T_(t){return(typeof t=="string"?t:""+t).replace(Nx,`
`).replace(Dx,"")}function ZT(t,e){return e=T_(e),T_(t)===e}function mh(){}function Re(t,e,n,i,s,r){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||ca(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&ca(t,""+i);break;case"className":pu(t,"class",i);break;case"tabIndex":pu(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":pu(t,n,i);break;case"style":ZE(t,i,r);break;case"data":if(e!=="object"){pu(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Vu(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&Re(t,e,"name",s.name,s,null),Re(t,e,"formEncType",s.formEncType,s,null),Re(t,e,"formMethod",s.formMethod,s,null),Re(t,e,"formTarget",s.formTarget,s,null)):(Re(t,e,"encType",s.encType,s,null),Re(t,e,"method",s.method,s,null),Re(t,e,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Vu(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=mh);break;case"onScroll":i!=null&&oe("scroll",t);break;case"onScrollEnd":i!=null&&oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(P(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Vu(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":oe("beforetoggle",t),oe("toggle",t),Ou(t,"popover",i);break;case"xlinkActuate":ai(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ai(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ai(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ai(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ai(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ai(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ai(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ai(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ai(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Ou(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=o1.get(n)||n,Ou(t,n,i))}}function zd(t,e,n,i,s,r){switch(n){case"style":ZE(t,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(P(60));t.innerHTML=n}}break;case"children":typeof i=="string"?ca(t,i):(typeof i=="number"||typeof i=="bigint")&&ca(t,""+i);break;case"onScroll":i!=null&&oe("scroll",t);break;case"onScrollEnd":i!=null&&oe("scrollend",t);break;case"onClick":i!=null&&(t.onclick=mh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!GE.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),r=t[$t]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,s);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Ou(t,n,i)}}}function Nt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":oe("error",t),oe("load",t);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(P(137,e));default:Re(t,e,r,a,n,null)}}s&&Re(t,e,"srcSet",n.srcSet,n,null),i&&Re(t,e,"src",n.src,n,null);return;case"input":oe("invalid",t);var l=r=a=s=null,u=null,f=null;for(i in n)if(n.hasOwnProperty(i)){var m=n[i];if(m!=null)switch(i){case"name":s=m;break;case"type":a=m;break;case"checked":u=m;break;case"defaultChecked":f=m;break;case"value":r=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(P(137,e));break;default:Re(t,e,i,m,n,null)}}YE(t,r,l,u,f,a,s,!1),rc(t);return;case"select":oe("invalid",t),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Re(t,e,s,l,n,null)}e=r,n=a,t.multiple=!!i,e!=null?Xr(t,!!i,e,!1):n!=null&&Xr(t,!!i,n,!0);return;case"textarea":oe("invalid",t),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(P(91));break;default:Re(t,e,a,l,n,null)}XE(t,i,s,r),rc(t);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Re(t,e,u,i,n,null)}return;case"dialog":oe("beforetoggle",t),oe("toggle",t),oe("cancel",t),oe("close",t);break;case"iframe":case"object":oe("load",t);break;case"video":case"audio":for(i=0;i<$o.length;i++)oe($o[i],t);break;case"image":oe("error",t),oe("load",t);break;case"details":oe("toggle",t);break;case"embed":case"source":case"link":oe("error",t),oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(f in n)if(n.hasOwnProperty(f)&&(i=n[f],i!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(P(137,e));default:Re(t,e,f,i,n,null)}return;default:if(km(e)){for(m in n)n.hasOwnProperty(m)&&(i=n[m],i!==void 0&&zd(t,e,m,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Re(t,e,l,i,n,null))}function Ox(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,u=null,f=null,m=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||Re(t,e,_,null,i,g)}}for(var p in i){var _=i[p];if(g=n[p],i.hasOwnProperty(p)&&(_!=null||g!=null))switch(p){case"type":r=_;break;case"name":s=_;break;case"checked":f=_;break;case"defaultChecked":m=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(P(137,e));break;default:_!==g&&Re(t,e,p,_,i,g)}}cd(t,a,l,u,f,m,r,s);return;case"select":_=a=l=p=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(r)||Re(t,e,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":p=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&Re(t,e,s,r,i,u)}e=l,n=a,i=_,p!=null?Xr(t,!!n,p,!1):!!i!=!!n&&(e!=null?Xr(t,!!n,e,!0):Xr(t,!!n,n?[]:"",!1));return;case"textarea":_=p=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Re(t,e,l,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":p=s;break;case"defaultValue":_=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(P(91));break;default:s!==r&&Re(t,e,a,s,i,r)}$E(t,p,_);return;case"option":for(var C in n)if(p=n[C],n.hasOwnProperty(C)&&p!=null&&!i.hasOwnProperty(C))switch(C){case"selected":t.selected=!1;break;default:Re(t,e,C,null,i,p)}for(u in i)if(p=i[u],_=n[u],i.hasOwnProperty(u)&&p!==_&&(p!=null||_!=null))switch(u){case"selected":t.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Re(t,e,u,p,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var V in n)p=n[V],n.hasOwnProperty(V)&&p!=null&&!i.hasOwnProperty(V)&&Re(t,e,V,null,i,p);for(f in i)if(p=i[f],_=n[f],i.hasOwnProperty(f)&&p!==_&&(p!=null||_!=null))switch(f){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(P(137,e));break;default:Re(t,e,f,p,i,_)}return;default:if(km(e)){for(var D in n)p=n[D],n.hasOwnProperty(D)&&p!==void 0&&!i.hasOwnProperty(D)&&zd(t,e,D,void 0,i,p);for(m in i)p=i[m],_=n[m],!i.hasOwnProperty(m)||p===_||p===void 0&&_===void 0||zd(t,e,m,p,i,_);return}}for(var w in n)p=n[w],n.hasOwnProperty(w)&&p!=null&&!i.hasOwnProperty(w)&&Re(t,e,w,null,i,p);for(g in i)p=i[g],_=n[g],!i.hasOwnProperty(g)||p===_||p==null&&_==null||Re(t,e,g,p,i,_)}var Bd=null,qd=null;function Ac(t){return t.nodeType===9?t:t.ownerDocument}function b_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function WT(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Hd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hf=null;function Vx(){var t=window.event;return t&&t.type==="popstate"?t===Hf?!1:(Hf=t,!0):(Hf=null,!1)}var JT=typeof setTimeout=="function"?setTimeout:void 0,Mx=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,kx=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(t){return w_.resolve(null).then(t).catch(jx)}:JT;function jx(t){setTimeout(function(){throw t})}function Is(t){return t==="head"}function S_(t,e){var n=e,i=0,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var a=t.ownerDocument;if(n&1&&ko(a.documentElement),n&2&&ko(a.body),n&4)for(n=a.head,ko(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[vl]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(s===0){t.removeChild(r),tl(e);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);tl(e)}function Fd(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Fd(n),Mm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function Px(t,e,n,i){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[vl])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=Rn(t.nextSibling),t===null)break}return null}function Lx(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Rn(t.nextSibling),t===null))return null;return t}function Gd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Ux(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function Rn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var Qd=null;function A_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function eb(t,e,n){switch(e=Ac(n),t){case"html":if(t=e.documentElement,!t)throw Error(P(452));return t;case"head":if(t=e.head,!t)throw Error(P(453));return t;case"body":if(t=e.body,!t)throw Error(P(454));return t;default:throw Error(P(451))}}function ko(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Mm(t)}var bn=new Map,x_=new Set;function xc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ci=be.d;be.d={f:zx,r:Bx,D:qx,C:Hx,L:Fx,m:Gx,X:Kx,S:Qx,M:Yx};function zx(){var t=Ci.f(),e=hh();return t||e}function Bx(t){var e=Oa(t);e!==null&&e.tag===5&&e.type==="form"?K0(e):Ci.r(t)}var ka=typeof document>"u"?null:document;function tb(t,e,n){var i=ka;if(i&&typeof e=="string"&&e){var s=yn(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),x_.has(s)||(x_.add(s),t={rel:t,crossOrigin:n,href:e},i.querySelector(s)===null&&(e=i.createElement("link"),Nt(e,"link",t),yt(e),i.head.appendChild(e)))}}function qx(t){Ci.D(t),tb("dns-prefetch",t,null)}function Hx(t,e){Ci.C(t,e),tb("preconnect",t,e)}function Fx(t,e,n){Ci.L(t,e,n);var i=ka;if(i&&t&&e){var s='link[rel="preload"][as="'+yn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+yn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+yn(n.imageSizes)+'"]')):s+='[href="'+yn(t)+'"]';var r=s;switch(e){case"style":r=_a(t);break;case"script":r=ja(t)}bn.has(r)||(t=je({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),bn.set(r,t),i.querySelector(s)!==null||e==="style"&&i.querySelector(Cl(r))||e==="script"&&i.querySelector(Nl(r))||(e=i.createElement("link"),Nt(e,"link",t),yt(e),i.head.appendChild(e)))}}function Gx(t,e){Ci.m(t,e);var n=ka;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+yn(i)+'"][href="'+yn(t)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=ja(t)}if(!bn.has(r)&&(t=je({rel:"modulepreload",href:t},e),bn.set(r,t),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Nl(r)))return}i=n.createElement("link"),Nt(i,"link",t),yt(i),n.head.appendChild(i)}}}function Qx(t,e,n){Ci.S(t,e,n);var i=ka;if(i&&t){var s=$r(i).hoistableStyles,r=_a(t);e=e||"default";var a=s.get(r);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Cl(r)))l.loading=5;else{t=je({rel:"stylesheet",href:t,"data-precedence":e},n),(n=bn.get(r))&&yp(t,n);var u=a=i.createElement("link");yt(u),Nt(u,"link",t),u._p=new Promise(function(f,m){u.onload=f,u.onerror=m}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,qu(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:l},s.set(r,a)}}}function Kx(t,e){Ci.X(t,e);var n=ka;if(n&&t){var i=$r(n).hoistableScripts,s=ja(t),r=i.get(s);r||(r=n.querySelector(Nl(s)),r||(t=je({src:t,async:!0},e),(e=bn.get(s))&&_p(t,e),r=n.createElement("script"),yt(r),Nt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function Yx(t,e){Ci.M(t,e);var n=ka;if(n&&t){var i=$r(n).hoistableScripts,s=ja(t),r=i.get(s);r||(r=n.querySelector(Nl(s)),r||(t=je({src:t,async:!0,type:"module"},e),(e=bn.get(s))&&_p(t,e),r=n.createElement("script"),yt(r),Nt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function R_(t,e,n,i){var s=(s=ss.current)?xc(s):null;if(!s)throw Error(P(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=_a(n.href),n=$r(s).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=_a(n.href);var r=$r(s).hoistableStyles,a=r.get(t);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,a),(r=s.querySelector(Cl(t)))&&!r._p&&(a.instance=r,a.state.loading=5),bn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},bn.set(t,n),r||$x(s,t,n,a.state))),e&&i===null)throw Error(P(528,""));return a}if(e&&i!==null)throw Error(P(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=ja(n),n=$r(s).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(P(444,t))}}function _a(t){return'href="'+yn(t)+'"'}function Cl(t){return'link[rel="stylesheet"]['+t+"]"}function nb(t){return je({},t,{"data-precedence":t.precedence,precedence:null})}function $x(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Nt(e,"link",n),yt(e),t.head.appendChild(e))}function ja(t){return'[src="'+yn(t)+'"]'}function Nl(t){return"script[async]"+t}function I_(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+yn(n.href)+'"]');if(i)return e.instance=i,yt(i),i;var s=je({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),yt(i),Nt(i,"style",s),qu(i,n.precedence,t),e.instance=i;case"stylesheet":s=_a(n.href);var r=t.querySelector(Cl(s));if(r)return e.state.loading|=4,e.instance=r,yt(r),r;i=nb(n),(s=bn.get(s))&&yp(i,s),r=(t.ownerDocument||t).createElement("link"),yt(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Nt(r,"link",i),e.state.loading|=4,qu(r,n.precedence,t),e.instance=r;case"script":return r=ja(n.src),(s=t.querySelector(Nl(r)))?(e.instance=s,yt(s),s):(i=n,(s=bn.get(r))&&(i=je({},n),_p(i,s)),t=t.ownerDocument||t,s=t.createElement("script"),yt(s),Nt(s,"link",i),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(P(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,qu(i,n.precedence,t));return e.instance}function qu(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===e)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function yp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function _p(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Hu=null;function C_(t,e,n){if(Hu===null){var i=new Map,s=Hu=new Map;s.set(n,i)}else s=Hu,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var r=n[s];if(!(r[vl]||r[jt]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(e)||"";a=t+a;var l=i.get(a);l?l.push(r):i.set(a,[r])}}return i}function N_(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Xx(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function ib(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Zo=null;function Zx(){}function Wx(t,e,n){if(Zo===null)throw Error(P(475));var i=Zo;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var s=_a(n.href),r=t.querySelector(Cl(s));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=Rc.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=r,yt(r);return}r=t.ownerDocument||t,n=nb(n),(s=bn.get(s))&&yp(n,s),r=r.createElement("link"),yt(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Nt(r,"link",n),e.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(i.count++,e=Rc.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}function Jx(){if(Zo===null)throw Error(P(475));var t=Zo;return t.stylesheets&&t.count===0&&Kd(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&Kd(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Rc(){if(this.count--,this.count===0){if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ic=null;function Kd(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ic=new Map,e.forEach(e2,t),Ic=null,Rc.call(t))}function e2(t,e){if(!(e.state.loading&4)){var n=Ic.get(t);if(n)var i=n.get(null);else{n=new Map,Ic.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=e.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=Rc.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var Wo={$$typeof:ci,Provider:null,Consumer:null,_currentValue:Fs,_currentValue2:Fs,_threadCount:0};function t2(t,e,n,i,s,r,a,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hf(0),this.hiddenUpdates=hf(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function sb(t,e,n,i,s,r,a,l,u,f,m,g){return t=new t2(t,e,n,a,l,u,f,g),e=1,r===!0&&(e|=24),r=sn(3,null,null,e),t.current=r,r.stateNode=t,e=Qm(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:e},Ym(r),t}function rb(t){return t?(t=Hr,t):Hr}function ab(t,e,n,i,s,r){s=rb(s),i.context===null?i.context=s:i.pendingContext=s,i=rs(e),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=as(t,i,e),n!==null&&(cn(n,t,e),Ro(n,t,e))}function D_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vp(t,e){D_(t,e),(t=t.alternate)&&D_(t,e)}function ob(t){if(t.tag===13){var e=Va(t,67108864);e!==null&&cn(e,t,67108864),vp(t,67108864)}}var Cc=!0;function n2(t,e,n,i){var s=te.T;te.T=null;var r=be.p;try{be.p=2,Ep(t,e,n,i)}finally{be.p=r,te.T=s}}function i2(t,e,n,i){var s=te.T;te.T=null;var r=be.p;try{be.p=8,Ep(t,e,n,i)}finally{be.p=r,te.T=s}}function Ep(t,e,n,i){if(Cc){var s=Yd(i);if(s===null)qf(t,e,i,Nc,n),O_(t,i);else if(r2(s,t,e,n,i))i.stopPropagation();else if(O_(t,i),e&4&&-1<s2.indexOf(t)){for(;s!==null;){var r=Oa(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=Us(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-ln(a);l.entanglements[1]|=u,a&=~u}$n(r),!(xe&6)&&(Ec=Pn()+500,Il(0))}}break;case 13:l=Va(r,2),l!==null&&cn(l,r,2),hh(),vp(r,2)}if(r=Yd(i),r===null&&qf(t,e,i,Nc,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else qf(t,e,i,null,n)}}function Yd(t){return t=jm(t),Tp(t)}var Nc=null;function Tp(t){if(Nc=null,t=Pr(t),t!==null){var e=pl(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=OE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Nc=t,null}function lb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(HA()){case jE:return 2;case PE:return 8;case sc:case FA:return 32;case LE:return 268435456;default:return 32}default:return 32}}var $d=!1,us=null,cs=null,hs=null,Jo=new Map,el=new Map,Yi=[],s2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O_(t,e){switch(t){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":Jo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":el.delete(e.pointerId)}}function uo(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Oa(e),e!==null&&ob(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function r2(t,e,n,i,s){switch(e){case"focusin":return us=uo(us,t,e,n,i,s),!0;case"dragenter":return cs=uo(cs,t,e,n,i,s),!0;case"mouseover":return hs=uo(hs,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return Jo.set(r,uo(Jo.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,el.set(r,uo(el.get(r)||null,t,e,n,i,s)),!0}return!1}function ub(t){var e=Pr(t.target);if(e!==null){var n=pl(e);if(n!==null){if(e=n.tag,e===13){if(e=OE(n),e!==null){t.blockedOn=e,WA(t.priority,function(){if(n.tag===13){var i=un();i=Om(i);var s=Va(n,i);s!==null&&cn(s,n,i),vp(n,i)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yd(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);fd=i,n.target.dispatchEvent(i),fd=null}else return e=Oa(n),e!==null&&ob(e),t.blockedOn=n,!1;e.shift()}return!0}function V_(t,e,n){Fu(t)&&n.delete(e)}function a2(){$d=!1,us!==null&&Fu(us)&&(us=null),cs!==null&&Fu(cs)&&(cs=null),hs!==null&&Fu(hs)&&(hs=null),Jo.forEach(V_),el.forEach(V_)}function wu(t,e){t.blockedOn===e&&(t.blockedOn=null,$d||($d=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,a2)))}var Su=null;function M_(t){Su!==t&&(Su=t,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,function(){Su===t&&(Su=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],s=t[e+2];if(typeof i!="function"){if(Tp(i||n)===null)continue;break}var r=Oa(n);r!==null&&(t.splice(e,3),e-=3,Id(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function tl(t){function e(u){return wu(u,t)}us!==null&&wu(us,t),cs!==null&&wu(cs,t),hs!==null&&wu(hs,t),Jo.forEach(e),el.forEach(e);for(var n=0;n<Yi.length;n++){var i=Yi[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Yi.length&&(n=Yi[0],n.blockedOn===null);)ub(n),n.blockedOn===null&&Yi.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[$t]||null;if(typeof r=="function")a||M_(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[$t]||null)l=a.formAction;else if(Tp(s)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),M_(n)}}}function bp(t){this._internalRoot=t}ph.prototype.render=bp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));var n=e.current,i=un();ab(n,i,t,e,null,null)};ph.prototype.unmount=bp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ab(t.current,2,null,t,null,null),hh(),e[Da]=null}};function ph(t){this._internalRoot=t}ph.prototype.unstable_scheduleHydration=function(t){if(t){var e=HE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yi.length&&e!==0&&e<Yi[n].priority;n++);Yi.splice(n,0,t),n===0&&ub(t)}};var k_=NE.version;if(k_!=="19.1.1")throw Error(P(527,k_,"19.1.1"));be.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=jA(e),t=t!==null?VE(t):null,t=t===null?null:t.stateNode,t};var o2={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Au.isDisabled&&Au.supportsFiber)try{gl=Au.inject(o2),on=Au}catch{}}Jc.createRoot=function(t,e){if(!DE(t))throw Error(P(299));var n=!1,i="",s=sT,r=rT,a=aT,l=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(l=e.unstable_transitionCallbacks)),e=sb(t,1,!1,null,null,n,i,s,r,a,l,null),t[Da]=e.current,gp(t),new bp(e)};Jc.hydrateRoot=function(t,e,n){if(!DE(t))throw Error(P(299));var i=!1,s="",r=sT,a=rT,l=aT,u=null,f=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(f=n.formState)),e=sb(t,1,!0,e,n??null,i,s,r,a,l,u,f),e.context=rb(null),n=e.current,i=un(),i=Om(i),s=rs(i),s.callback=null,as(n,s,i),n=i,e.current.lanes=n,_l(e,n),$n(e),t[Da]=e.current,gp(t),new ph(e)};Jc.version="19.1.1";function cb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cb)}catch(t){console.error(t)}}cb(),SE.exports=Jc;var l2=SE.exports;const u2=dE(l2),c2=()=>{};var j_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},h2=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const r=t[n++],a=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return e.join("")},fb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,f=u?t[s+2]:0,m=r>>2,g=(r&3)<<4|l>>4;let p=(l&15)<<2|f>>6,_=f&63;u||(_=64,a||(p=64)),i.push(n[m],n[g],n[p],n[_])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):h2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||l==null||f==null||g==null)throw new f2;const p=r<<2|l>>4;if(i.push(p),f!==64){const _=l<<4&240|f>>2;if(i.push(_),g!==64){const C=f<<6&192|g;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class f2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d2=function(t){const e=hb(t);return fb.encodeByteArray(e,!0)},Dc=function(t){return d2(t).replace(/\./g,"")},db=function(t){try{return fb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=()=>m2().__FIREBASE_DEFAULTS__,g2=()=>{if(typeof process>"u"||typeof j_>"u")return;const t=j_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&db(t[1]);return e&&JSON.parse(e)},gh=()=>{try{return c2()||p2()||g2()||y2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mb=t=>{var e,n;return(n=(e=gh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},_2=t=>{const e=mb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},pb=()=>{var t;return(t=gh())==null?void 0:t.config},gb=t=>{var e;return(e=gh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Dc(JSON.stringify(n)),Dc(JSON.stringify(a)),""].join(".")}const jo={};function T2(){const t={prod:[],emulator:[]};for(const e of Object.keys(jo))jo[e]?t.emulator.push(e):t.prod.push(e);return t}function b2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let P_=!1;function _b(t,e){if(typeof window>"u"||typeof document>"u"||!Pa(window.location.host)||jo[t]===e||jo[t]||P_)return;jo[t]=e;function n(p){return`__firebase__banner__${p}`}const i="__firebase__banner",r=T2().prod.length>0;function a(){const p=document.getElementById(i);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,_){p.setAttribute("width","24"),p.setAttribute("id",_),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function f(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{P_=!0,a()},p}function m(p,_){p.setAttribute("id",_),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function g(){const p=b2(i),_=n("text"),C=document.getElementById(_)||document.createElement("span"),V=n("learnmore"),D=document.getElementById(V)||document.createElement("a"),w=n("preprendIcon"),E=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;l(x),m(D,V);const O=f();u(E,w),x.append(E,C,D,O),document.body.appendChild(x)}r?(C.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function S2(){var e;const t=(e=gh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function A2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function x2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function R2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I2(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C2(){return!S2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N2(){try{return typeof indexedDB=="object"}catch{return!1}}function D2(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="FirebaseError";class Ni extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=O2,Object.setPrototypeOf(this,Ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dl.prototype.create)}}class Dl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],a=r?V2(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ni(s,l,i)}}function V2(t,e){return t.replace(M2,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const M2=/\{\$([^}]+)}/g;function k2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Si(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],a=e[s];if(L_(r)&&L_(a)){if(!Si(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function L_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function po(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function go(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function j2(t,e){const n=new P2(t,e);return n.subscribe.bind(n)}class P2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");L2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Ff),s.error===void 0&&(s.error=Ff),s.complete===void 0&&(s.complete=Ff);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ff(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t){return t&&t._delegate?t._delegate:t}class nr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new v2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(B2(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:z2(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function z2(t){return t===qs?void 0:t}function B2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new U2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const H2={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},F2=he.INFO,G2={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},Q2=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=G2[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wp{constructor(e){this.name=e,this._logLevel=F2,this._logHandler=Q2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?H2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const K2=(t,e)=>e.some(n=>t instanceof n);let U_,z_;function Y2(){return U_||(U_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $2(){return z_||(z_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vb=new WeakMap,Xd=new WeakMap,Eb=new WeakMap,Gf=new WeakMap,Sp=new WeakMap;function X2(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",a)},r=()=>{n(fs(t.result)),s()},a=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&vb.set(n,t)}).catch(()=>{}),Sp.set(e,t),e}function Z2(t){if(Xd.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",a),t.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",a),t.addEventListener("abort",a)});Xd.set(t,e)}let Zd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Eb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function W2(t){Zd=t(Zd)}function J2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Qf(this),e,...n);return Eb.set(i,e.sort?e.sort():[e]),fs(i)}:$2().includes(t)?function(...e){return t.apply(Qf(this),e),fs(vb.get(this))}:function(...e){return fs(t.apply(Qf(this),e))}}function eR(t){return typeof t=="function"?J2(t):(t instanceof IDBTransaction&&Z2(t),K2(t,Y2())?new Proxy(t,Zd):t)}function fs(t){if(t instanceof IDBRequest)return X2(t);if(Gf.has(t))return Gf.get(t);const e=eR(t);return e!==t&&(Gf.set(t,e),Sp.set(e,t)),e}const Qf=t=>Sp.get(t);function tR(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(t,e),l=fs(a);return i&&a.addEventListener("upgradeneeded",u=>{i(fs(a.result),u.oldVersion,u.newVersion,fs(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const nR=["get","getKey","getAll","getAllKeys","count"],iR=["put","add","delete","clear"],Kf=new Map;function B_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kf.get(e))return Kf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=iR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||nR.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let f=u.store;return i&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&u.done]))[0]};return Kf.set(e,r),r}W2(t=>({...t,get:(e,n,i)=>B_(e,n)||t.get(e,n,i),has:(e,n)=>!!B_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function rR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wd="@firebase/app",q_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new wp("@firebase/app"),aR="@firebase/app-compat",oR="@firebase/analytics-compat",lR="@firebase/analytics",uR="@firebase/app-check-compat",cR="@firebase/app-check",hR="@firebase/auth",fR="@firebase/auth-compat",dR="@firebase/database",mR="@firebase/data-connect",pR="@firebase/database-compat",gR="@firebase/functions",yR="@firebase/functions-compat",_R="@firebase/installations",vR="@firebase/installations-compat",ER="@firebase/messaging",TR="@firebase/messaging-compat",bR="@firebase/performance",wR="@firebase/performance-compat",SR="@firebase/remote-config",AR="@firebase/remote-config-compat",xR="@firebase/storage",RR="@firebase/storage-compat",IR="@firebase/firestore",CR="@firebase/ai",NR="@firebase/firestore-compat",DR="firebase",OR="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="[DEFAULT]",VR={[Wd]:"fire-core",[aR]:"fire-core-compat",[lR]:"fire-analytics",[oR]:"fire-analytics-compat",[cR]:"fire-app-check",[uR]:"fire-app-check-compat",[hR]:"fire-auth",[fR]:"fire-auth-compat",[dR]:"fire-rtdb",[mR]:"fire-data-connect",[pR]:"fire-rtdb-compat",[gR]:"fire-fn",[yR]:"fire-fn-compat",[_R]:"fire-iid",[vR]:"fire-iid-compat",[ER]:"fire-fcm",[TR]:"fire-fcm-compat",[bR]:"fire-perf",[wR]:"fire-perf-compat",[SR]:"fire-rc",[AR]:"fire-rc-compat",[xR]:"fire-gcs",[RR]:"fire-gcs-compat",[IR]:"fire-fst",[NR]:"fire-fst-compat",[CR]:"fire-vertex","fire-js":"fire-js",[DR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Map,MR=new Map,em=new Map;function H_(t,e){try{t.container.addComponent(e)}catch(n){Ai.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function va(t){const e=t.name;if(em.has(e))return Ai.debug(`There were multiple attempts to register component ${e}.`),!1;em.set(e,t);for(const n of Oc.values())H_(n,t);for(const n of MR.values())H_(n,t);return!0}function Ap(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ds=new Dl("app","Firebase",kR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=OR;function Tb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Jd,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw ds.create("bad-app-name",{appName:String(s)});if(n||(n=pb()),!n)throw ds.create("no-options");const r=Oc.get(s);if(r){if(Si(n,r.options)&&Si(i,r.config))return r;throw ds.create("duplicate-app",{appName:s})}const a=new q2(s);for(const u of em.values())a.addComponent(u);const l=new jR(n,i,a);return Oc.set(s,l),l}function bb(t=Jd){const e=Oc.get(t);if(!e&&t===Jd&&pb())return Tb();if(!e)throw ds.create("no-app",{appName:t});return e}function ms(t,e,n){let i=VR[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ai.warn(a.join(" "));return}va(new nr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="firebase-heartbeat-database",LR=1,nl="firebase-heartbeat-store";let Yf=null;function wb(){return Yf||(Yf=tR(PR,LR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ds.create("idb-open",{originalErrorMessage:t.message})})),Yf}async function UR(t){try{const n=(await wb()).transaction(nl),i=await n.objectStore(nl).get(Sb(t));return await n.done,i}catch(e){if(e instanceof Ni)Ai.warn(e.message);else{const n=ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ai.warn(n.message)}}}async function F_(t,e){try{const i=(await wb()).transaction(nl,"readwrite");await i.objectStore(nl).put(e,Sb(t)),await i.done}catch(n){if(n instanceof Ni)Ai.warn(n.message);else{const i=ds.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ai.warn(i.message)}}}function Sb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=1024,BR=30;class qR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new FR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=G_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>BR){const a=GR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ai.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=G_(),{heartbeatsToSend:i,unsentEntries:s}=HR(this._heartbeatsCache.heartbeats),r=Dc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Ai.warn(n),""}}}function G_(){return new Date().toISOString().substring(0,10)}function HR(t,e=zR){const n=[];let i=t.slice();for(const s of t){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),Q_(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Q_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class FR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N2()?D2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return F_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return F_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Q_(t){return Dc(JSON.stringify({version:2,heartbeats:t})).length}function GR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){va(new nr("platform-logger",e=>new sR(e),"PRIVATE")),va(new nr("heartbeat",e=>new qR(e),"PRIVATE")),ms(Wd,q_,t),ms(Wd,q_,"esm2020"),ms("fire-js","")}QR("");var K_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ps,Ab;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function b(){}b.prototype=v.prototype,T.D=v.prototype,T.prototype=new b,T.prototype.constructor=T,T.C=function(S,R,I){for(var A=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)A[Z-2]=arguments[Z];return v.prototype[R].apply(S,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,v,b){b||(b=0);var S=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)S[R]=v.charCodeAt(b++)|v.charCodeAt(b++)<<8|v.charCodeAt(b++)<<16|v.charCodeAt(b++)<<24;else for(R=0;16>R;++R)S[R]=v[b++]|v[b++]<<8|v[b++]<<16|v[b++]<<24;v=T.g[0],b=T.g[1],R=T.g[2];var I=T.g[3],A=v+(I^b&(R^I))+S[0]+3614090360&4294967295;v=b+(A<<7&4294967295|A>>>25),A=I+(R^v&(b^R))+S[1]+3905402710&4294967295,I=v+(A<<12&4294967295|A>>>20),A=R+(b^I&(v^b))+S[2]+606105819&4294967295,R=I+(A<<17&4294967295|A>>>15),A=b+(v^R&(I^v))+S[3]+3250441966&4294967295,b=R+(A<<22&4294967295|A>>>10),A=v+(I^b&(R^I))+S[4]+4118548399&4294967295,v=b+(A<<7&4294967295|A>>>25),A=I+(R^v&(b^R))+S[5]+1200080426&4294967295,I=v+(A<<12&4294967295|A>>>20),A=R+(b^I&(v^b))+S[6]+2821735955&4294967295,R=I+(A<<17&4294967295|A>>>15),A=b+(v^R&(I^v))+S[7]+4249261313&4294967295,b=R+(A<<22&4294967295|A>>>10),A=v+(I^b&(R^I))+S[8]+1770035416&4294967295,v=b+(A<<7&4294967295|A>>>25),A=I+(R^v&(b^R))+S[9]+2336552879&4294967295,I=v+(A<<12&4294967295|A>>>20),A=R+(b^I&(v^b))+S[10]+4294925233&4294967295,R=I+(A<<17&4294967295|A>>>15),A=b+(v^R&(I^v))+S[11]+2304563134&4294967295,b=R+(A<<22&4294967295|A>>>10),A=v+(I^b&(R^I))+S[12]+1804603682&4294967295,v=b+(A<<7&4294967295|A>>>25),A=I+(R^v&(b^R))+S[13]+4254626195&4294967295,I=v+(A<<12&4294967295|A>>>20),A=R+(b^I&(v^b))+S[14]+2792965006&4294967295,R=I+(A<<17&4294967295|A>>>15),A=b+(v^R&(I^v))+S[15]+1236535329&4294967295,b=R+(A<<22&4294967295|A>>>10),A=v+(R^I&(b^R))+S[1]+4129170786&4294967295,v=b+(A<<5&4294967295|A>>>27),A=I+(b^R&(v^b))+S[6]+3225465664&4294967295,I=v+(A<<9&4294967295|A>>>23),A=R+(v^b&(I^v))+S[11]+643717713&4294967295,R=I+(A<<14&4294967295|A>>>18),A=b+(I^v&(R^I))+S[0]+3921069994&4294967295,b=R+(A<<20&4294967295|A>>>12),A=v+(R^I&(b^R))+S[5]+3593408605&4294967295,v=b+(A<<5&4294967295|A>>>27),A=I+(b^R&(v^b))+S[10]+38016083&4294967295,I=v+(A<<9&4294967295|A>>>23),A=R+(v^b&(I^v))+S[15]+3634488961&4294967295,R=I+(A<<14&4294967295|A>>>18),A=b+(I^v&(R^I))+S[4]+3889429448&4294967295,b=R+(A<<20&4294967295|A>>>12),A=v+(R^I&(b^R))+S[9]+568446438&4294967295,v=b+(A<<5&4294967295|A>>>27),A=I+(b^R&(v^b))+S[14]+3275163606&4294967295,I=v+(A<<9&4294967295|A>>>23),A=R+(v^b&(I^v))+S[3]+4107603335&4294967295,R=I+(A<<14&4294967295|A>>>18),A=b+(I^v&(R^I))+S[8]+1163531501&4294967295,b=R+(A<<20&4294967295|A>>>12),A=v+(R^I&(b^R))+S[13]+2850285829&4294967295,v=b+(A<<5&4294967295|A>>>27),A=I+(b^R&(v^b))+S[2]+4243563512&4294967295,I=v+(A<<9&4294967295|A>>>23),A=R+(v^b&(I^v))+S[7]+1735328473&4294967295,R=I+(A<<14&4294967295|A>>>18),A=b+(I^v&(R^I))+S[12]+2368359562&4294967295,b=R+(A<<20&4294967295|A>>>12),A=v+(b^R^I)+S[5]+4294588738&4294967295,v=b+(A<<4&4294967295|A>>>28),A=I+(v^b^R)+S[8]+2272392833&4294967295,I=v+(A<<11&4294967295|A>>>21),A=R+(I^v^b)+S[11]+1839030562&4294967295,R=I+(A<<16&4294967295|A>>>16),A=b+(R^I^v)+S[14]+4259657740&4294967295,b=R+(A<<23&4294967295|A>>>9),A=v+(b^R^I)+S[1]+2763975236&4294967295,v=b+(A<<4&4294967295|A>>>28),A=I+(v^b^R)+S[4]+1272893353&4294967295,I=v+(A<<11&4294967295|A>>>21),A=R+(I^v^b)+S[7]+4139469664&4294967295,R=I+(A<<16&4294967295|A>>>16),A=b+(R^I^v)+S[10]+3200236656&4294967295,b=R+(A<<23&4294967295|A>>>9),A=v+(b^R^I)+S[13]+681279174&4294967295,v=b+(A<<4&4294967295|A>>>28),A=I+(v^b^R)+S[0]+3936430074&4294967295,I=v+(A<<11&4294967295|A>>>21),A=R+(I^v^b)+S[3]+3572445317&4294967295,R=I+(A<<16&4294967295|A>>>16),A=b+(R^I^v)+S[6]+76029189&4294967295,b=R+(A<<23&4294967295|A>>>9),A=v+(b^R^I)+S[9]+3654602809&4294967295,v=b+(A<<4&4294967295|A>>>28),A=I+(v^b^R)+S[12]+3873151461&4294967295,I=v+(A<<11&4294967295|A>>>21),A=R+(I^v^b)+S[15]+530742520&4294967295,R=I+(A<<16&4294967295|A>>>16),A=b+(R^I^v)+S[2]+3299628645&4294967295,b=R+(A<<23&4294967295|A>>>9),A=v+(R^(b|~I))+S[0]+4096336452&4294967295,v=b+(A<<6&4294967295|A>>>26),A=I+(b^(v|~R))+S[7]+1126891415&4294967295,I=v+(A<<10&4294967295|A>>>22),A=R+(v^(I|~b))+S[14]+2878612391&4294967295,R=I+(A<<15&4294967295|A>>>17),A=b+(I^(R|~v))+S[5]+4237533241&4294967295,b=R+(A<<21&4294967295|A>>>11),A=v+(R^(b|~I))+S[12]+1700485571&4294967295,v=b+(A<<6&4294967295|A>>>26),A=I+(b^(v|~R))+S[3]+2399980690&4294967295,I=v+(A<<10&4294967295|A>>>22),A=R+(v^(I|~b))+S[10]+4293915773&4294967295,R=I+(A<<15&4294967295|A>>>17),A=b+(I^(R|~v))+S[1]+2240044497&4294967295,b=R+(A<<21&4294967295|A>>>11),A=v+(R^(b|~I))+S[8]+1873313359&4294967295,v=b+(A<<6&4294967295|A>>>26),A=I+(b^(v|~R))+S[15]+4264355552&4294967295,I=v+(A<<10&4294967295|A>>>22),A=R+(v^(I|~b))+S[6]+2734768916&4294967295,R=I+(A<<15&4294967295|A>>>17),A=b+(I^(R|~v))+S[13]+1309151649&4294967295,b=R+(A<<21&4294967295|A>>>11),A=v+(R^(b|~I))+S[4]+4149444226&4294967295,v=b+(A<<6&4294967295|A>>>26),A=I+(b^(v|~R))+S[11]+3174756917&4294967295,I=v+(A<<10&4294967295|A>>>22),A=R+(v^(I|~b))+S[2]+718787259&4294967295,R=I+(A<<15&4294967295|A>>>17),A=b+(I^(R|~v))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+I&4294967295}i.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var b=v-this.blockSize,S=this.B,R=this.h,I=0;I<v;){if(R==0)for(;I<=b;)s(this,T,I),I+=this.blockSize;if(typeof T=="string"){for(;I<v;)if(S[R++]=T.charCodeAt(I++),R==this.blockSize){s(this,S),R=0;break}}else for(;I<v;)if(S[R++]=T[I++],R==this.blockSize){s(this,S),R=0;break}}this.h=R,this.o+=v},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var b=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=b&255,b/=256;for(this.u(T),T=Array(16),v=b=0;4>v;++v)for(var S=0;32>S;S+=8)T[b++]=this.g[v]>>>S&255;return T};function r(T,v){var b=l;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=v(T)}function a(T,v){this.h=v;for(var b=[],S=!0,R=T.length-1;0<=R;R--){var I=T[R]|0;S&&I==v||(b[R]=I,S=!1)}this.g=b}var l={};function u(T){return-128<=T&&128>T?r(T,function(v){return new a([v|0],0>v?-1:0)}):new a([T|0],0>T?-1:0)}function f(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return D(f(-T));for(var v=[],b=1,S=0;T>=b;S++)v[S]=T/b|0,b*=4294967296;return new a(v,0)}function m(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return D(m(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=f(Math.pow(v,8)),S=g,R=0;R<T.length;R+=8){var I=Math.min(8,T.length-R),A=parseInt(T.substring(R,R+I),v);8>I?(I=f(Math.pow(v,I)),S=S.j(I).add(f(A))):(S=S.j(b),S=S.add(f(A)))}return S}var g=u(0),p=u(1),_=u(16777216);t=a.prototype,t.m=function(){if(V(this))return-D(this).m();for(var T=0,v=1,b=0;b<this.g.length;b++){var S=this.i(b);T+=(0<=S?S:4294967296+S)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(V(this))return"-"+D(this).toString(T);for(var v=f(Math.pow(T,6)),b=this,S="";;){var R=O(b,v).g;b=w(b,R.j(v));var I=((0<b.g.length?b.g[0]:b.h)>>>0).toString(T);if(b=R,C(b))return I+S;for(;6>I.length;)I="0"+I;S=I+S}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function V(T){return T.h==-1}t.l=function(T){return T=w(this,T),V(T)?-1:C(T)?0:1};function D(T){for(var v=T.g.length,b=[],S=0;S<v;S++)b[S]=~T.g[S];return new a(b,~T.h).add(p)}t.abs=function(){return V(this)?D(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],S=0,R=0;R<=v;R++){var I=S+(this.i(R)&65535)+(T.i(R)&65535),A=(I>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);S=A>>>16,I&=65535,A&=65535,b[R]=A<<16|I}return new a(b,b[b.length-1]&-2147483648?-1:0)};function w(T,v){return T.add(D(v))}t.j=function(T){if(C(this)||C(T))return g;if(V(this))return V(T)?D(this).j(D(T)):D(D(this).j(T));if(V(T))return D(this.j(D(T)));if(0>this.l(_)&&0>T.l(_))return f(this.m()*T.m());for(var v=this.g.length+T.g.length,b=[],S=0;S<2*v;S++)b[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<T.g.length;R++){var I=this.i(S)>>>16,A=this.i(S)&65535,Z=T.i(R)>>>16,pe=T.i(R)&65535;b[2*S+2*R]+=A*pe,E(b,2*S+2*R),b[2*S+2*R+1]+=I*pe,E(b,2*S+2*R+1),b[2*S+2*R+1]+=A*Z,E(b,2*S+2*R+1),b[2*S+2*R+2]+=I*Z,E(b,2*S+2*R+2)}for(S=0;S<v;S++)b[S]=b[2*S+1]<<16|b[2*S];for(S=v;S<2*v;S++)b[S]=0;return new a(b,0)};function E(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function x(T,v){this.g=T,this.h=v}function O(T,v){if(C(v))throw Error("division by zero");if(C(T))return new x(g,g);if(V(T))return v=O(D(T),v),new x(D(v.g),D(v.h));if(V(v))return v=O(T,D(v)),new x(D(v.g),v.h);if(30<T.g.length){if(V(T)||V(v))throw Error("slowDivide_ only works with positive integers.");for(var b=p,S=v;0>=S.l(T);)b=U(b),S=U(S);var R=H(b,1),I=H(S,1);for(S=H(S,2),b=H(b,2);!C(S);){var A=I.add(S);0>=A.l(T)&&(R=R.add(b),I=A),S=H(S,1),b=H(b,1)}return v=w(T,R.j(v)),new x(R,v)}for(R=g;0<=T.l(v);){for(b=Math.max(1,Math.floor(T.m()/v.m())),S=Math.ceil(Math.log(b)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),I=f(b),A=I.j(v);V(A)||0<A.l(T);)b-=S,I=f(b),A=I.j(v);C(I)&&(I=p),R=R.add(I),T=w(T,A)}return new x(R,T)}t.A=function(T){return O(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],S=0;S<v;S++)b[S]=this.i(S)&T.i(S);return new a(b,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],S=0;S<v;S++)b[S]=this.i(S)|T.i(S);return new a(b,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],S=0;S<v;S++)b[S]=this.i(S)^T.i(S);return new a(b,this.h^T.h)};function U(T){for(var v=T.g.length+1,b=[],S=0;S<v;S++)b[S]=T.i(S)<<1|T.i(S-1)>>>31;return new a(b,T.h)}function H(T,v){var b=v>>5;v%=32;for(var S=T.g.length-b,R=[],I=0;I<S;I++)R[I]=0<v?T.i(I+b)>>>v|T.i(I+b+1)<<32-v:T.i(I+b);return new a(R,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Ab=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,ps=a}).apply(typeof K_<"u"?K_:typeof self<"u"?self:typeof window<"u"?window:{});var xu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xb,yo,Rb,Gu,tm,Ib,Cb,Nb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,h,d){return o==Array.prototype||o==Object.prototype||(o[h]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof xu=="object"&&xu];for(var h=0;h<o.length;++h){var d=o[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=n(this);function s(o,h){if(h)e:{var d=i;o=o.split(".");for(var y=0;y<o.length-1;y++){var N=o[y];if(!(N in d))break e;d=d[N]}o=o[o.length-1],y=d[o],h=h(y),h!=y&&h!=null&&e(d,o,{configurable:!0,writable:!0,value:h})}}function r(o,h){o instanceof String&&(o+="");var d=0,y=!1,N={next:function(){if(!y&&d<o.length){var M=d++;return{value:h(M,o[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}s("Array.prototype.values",function(o){return o||function(){return r(this,function(h,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var h=typeof o;return h=h!="object"?h:o?Array.isArray(o)?"array":h:"null",h=="array"||h=="object"&&typeof o.length=="number"}function f(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function m(o,h,d){return o.call.apply(o.bind,arguments)}function g(o,h,d){if(!o)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,y),o.apply(h,N)}}return function(){return o.apply(h,arguments)}}function p(o,h,d){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,p.apply(null,arguments)}function _(o,h){var d=Array.prototype.slice.call(arguments,1);return function(){var y=d.slice();return y.push.apply(y,arguments),o.apply(this,y)}}function C(o,h){function d(){}d.prototype=h.prototype,o.aa=h.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(y,N,M){for(var q=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)q[Ne-2]=arguments[Ne];return h.prototype[N].apply(y,q)}}function V(o){const h=o.length;if(0<h){const d=Array(h);for(let y=0;y<h;y++)d[y]=o[y];return d}return[]}function D(o,h){for(let d=1;d<arguments.length;d++){const y=arguments[d];if(u(y)){const N=o.length||0,M=y.length||0;o.length=N+M;for(let q=0;q<M;q++)o[N+q]=y[q]}else o.push(y)}}class w{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(o){return/^[\s\xa0]*$/.test(o)}function x(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function O(o){return O[" "](o),o}O[" "]=function(){};var U=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function H(o,h,d){for(const y in o)h.call(d,o[y],y,o)}function T(o,h){for(const d in o)h.call(void 0,o[d],d,o)}function v(o){const h={};for(const d in o)h[d]=o[d];return h}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(o,h){let d,y;for(let N=1;N<arguments.length;N++){y=arguments[N];for(d in y)o[d]=y[d];for(let M=0;M<b.length;M++)d=b[M],Object.prototype.hasOwnProperty.call(y,d)&&(o[d]=y[d])}}function R(o){var h=1;o=o.split(":");const d=[];for(;0<h&&o.length;)d.push(o.shift()),h--;return o.length&&d.push(o.join(":")),d}function I(o){l.setTimeout(()=>{throw o},0)}function A(){var o=ue;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class Z{constructor(){this.h=this.g=null}add(h,d){const y=pe.get();y.set(h,d),this.h?this.h.next=y:this.g=y,this.h=y}}var pe=new w(()=>new B,o=>o.reset());class B{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let $,Y=!1,ue=new Z,ce=()=>{const o=l.Promise.resolve(void 0);$=()=>{o.then(Zt)}};var Zt=()=>{for(var o;o=A();){try{o.h.call(o.g)}catch(d){I(d)}var h=pe;h.j(o),100>h.h&&(h.h++,o.next=h.g,h.g=o)}Y=!1};function ot(){this.s=this.s,this.C=this.C}ot.prototype.s=!1,ot.prototype.ma=function(){this.s||(this.s=!0,this.N())},ot.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var lt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,h),l.removeEventListener("test",d,h)}catch{}return o}();function qe(o,h){if(me.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,y=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget){if(U){e:{try{O(h.nodeName);var N=!0;break e}catch{}N=!1}N||(h=null)}}else d=="mouseover"?h=o.fromElement:d=="mouseout"&&(h=o.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Qa[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&qe.aa.h.call(this)}}C(qe,me);var Qa={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ut="closure_listenable_"+(1e6*Math.random()|0),Oi=0;function Zn(o,h,d,y,N){this.listener=o,this.proxy=null,this.src=h,this.type=d,this.capture=!!y,this.ha=N,this.key=++Oi,this.da=this.fa=!1}function Vi(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function wn(o){this.src=o,this.g={},this.h=0}wn.prototype.add=function(o,h,d,y,N){var M=o.toString();o=this.g[M],o||(o=this.g[M]=[],this.h++);var q=Mi(o,h,y,N);return-1<q?(h=o[q],d||(h.fa=!1)):(h=new Zn(h,this.src,M,!!y,N),h.fa=d,o.push(h)),h};function Wn(o,h){var d=h.type;if(d in o.g){var y=o.g[d],N=Array.prototype.indexOf.call(y,h,void 0),M;(M=0<=N)&&Array.prototype.splice.call(y,N,1),M&&(Vi(h),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Mi(o,h,d,y){for(var N=0;N<o.length;++N){var M=o[N];if(!M.da&&M.listener==h&&M.capture==!!d&&M.ha==y)return N}return-1}var Os="closure_lm_"+(1e6*Math.random()|0),Jn={};function ei(o,h,d,y,N){if(Array.isArray(h)){for(var M=0;M<h.length;M++)ei(o,h[M],d,y,N);return null}return d=Fl(d),o&&o[Ut]?o.K(h,d,f(y)?!!y.capture:!1,N):K(o,h,d,!1,y,N)}function K(o,h,d,y,N,M){if(!h)throw Error("Invalid event type");var q=f(N)?!!N.capture:!!N,Ne=mt(o);if(Ne||(o[Os]=Ne=new wn(o)),d=Ne.add(h,d,y,q,M),d.proxy)return d;if(y=re(),d.proxy=y,y.src=o,y.listener=d,o.addEventListener)lt||(N=q),N===void 0&&(N=!1),o.addEventListener(h.toString(),y,N);else if(o.attachEvent)o.attachEvent(Ke(h.toString()),y);else if(o.addListener&&o.removeListener)o.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return d}function re(){function o(d){return h.call(o.src,o.listener,d)}const h=ti;return o}function Pe(o,h,d,y,N){if(Array.isArray(h))for(var M=0;M<h.length;M++)Pe(o,h[M],d,y,N);else y=f(y)?!!y.capture:!!y,d=Fl(d),o&&o[Ut]?(o=o.i,h=String(h).toString(),h in o.g&&(M=o.g[h],d=Mi(M,d,y,N),-1<d&&(Vi(M[d]),Array.prototype.splice.call(M,d,1),M.length==0&&(delete o.g[h],o.h--)))):o&&(o=mt(o))&&(h=o.g[h.toString()],o=-1,h&&(o=Mi(h,d,y,N)),(d=-1<o?h[o]:null)&&He(d))}function He(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[Ut])Wn(h.i,o);else{var d=o.type,y=o.proxy;h.removeEventListener?h.removeEventListener(d,y,o.capture):h.detachEvent?h.detachEvent(Ke(d),y):h.addListener&&h.removeListener&&h.removeListener(y),(d=mt(h))?(Wn(d,o),d.h==0&&(d.src=null,h[Os]=null)):Vi(o)}}}function Ke(o){return o in Jn?Jn[o]:Jn[o]="on"+o}function ti(o,h){if(o.da)o=!0;else{h=new qe(h,this);var d=o.listener,y=o.ha||o.src;o.fa&&He(o),o=d.call(y,h)}return o}function mt(o){return o=o[Os],o instanceof wn?o:null}var Wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fl(o){return typeof o=="function"?o:(o[Wt]||(o[Wt]=function(h){return o.handleEvent(h)}),o[Wt])}function ut(){ot.call(this),this.i=new wn(this),this.M=this,this.F=null}C(ut,ot),ut.prototype[Ut]=!0,ut.prototype.removeEventListener=function(o,h,d,y){Pe(this,o,h,d,y)};function Tt(o,h){var d,y=o.F;if(y)for(d=[];y;y=y.F)d.push(y);if(o=o.M,y=h.type||h,typeof h=="string")h=new me(h,o);else if(h instanceof me)h.target=h.target||o;else{var N=h;h=new me(y,o),S(h,N)}if(N=!0,d)for(var M=d.length-1;0<=M;M--){var q=h.g=d[M];N=yr(q,y,!0,h)&&N}if(q=h.g=o,N=yr(q,y,!0,h)&&N,N=yr(q,y,!1,h)&&N,d)for(M=0;M<d.length;M++)q=h.g=d[M],N=yr(q,y,!1,h)&&N}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var o=this.i,h;for(h in o.g){for(var d=o.g[h],y=0;y<d.length;y++)Vi(d[y]);delete o.g[h],o.h--}}this.F=null},ut.prototype.K=function(o,h,d,y){return this.i.add(String(o),h,!1,d,y)},ut.prototype.L=function(o,h,d,y){return this.i.add(String(o),h,!0,d,y)};function yr(o,h,d,y){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();for(var N=!0,M=0;M<h.length;++M){var q=h[M];if(q&&!q.da&&q.capture==d){var Ne=q.listener,wt=q.ha||q.src;q.fa&&Wn(o.i,q),N=Ne.call(wt,y)!==!1&&N}}return N&&!y.defaultPrevented}function Gl(o,h,d){if(typeof o=="function")d&&(o=p(o,d));else if(o&&typeof o.handleEvent=="function")o=p(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(o,h||0)}function Ql(o){o.g=Gl(()=>{o.g=null,o.i&&(o.i=!1,Ql(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class Gh extends ot{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Ql(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vs(o){ot.call(this),this.h=o,this.g={}}C(Vs,ot);var _r=[];function Kl(o){H(o.g,function(h,d){this.g.hasOwnProperty(d)&&He(h)},o),o.g={}}Vs.prototype.N=function(){Vs.aa.N.call(this),Kl(this)},Vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ka=l.JSON.stringify,Yl=l.JSON.parse,$l=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function vr(){}vr.prototype.h=null;function Xl(o){return o.h||(o.h=o.i())}function Zl(){}var Ms={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function F(){me.call(this,"d")}C(F,me);function ee(){me.call(this,"c")}C(ee,me);var ie={},Ee=null;function Oe(){return Ee=Ee||new ut}ie.La="serverreachability";function we(o){me.call(this,ie.La,o)}C(we,me);function Ce(o){const h=Oe();Tt(h,new we(h))}ie.STAT_EVENT="statevent";function bt(o,h){me.call(this,ie.STAT_EVENT,o),this.stat=h}C(bt,me);function tt(o){const h=Oe();Tt(h,new bt(h,o))}ie.Ma="timingevent";function Er(o,h){me.call(this,ie.Ma,o),this.size=h}C(Er,me);function ni(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},h)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function Qh(o,h,d,y,N,M){o.info(function(){if(o.g)if(M)for(var q="",Ne=M.split("&"),wt=0;wt<Ne.length;wt++){var ve=Ne[wt].split("=");if(1<ve.length){var Ot=ve[0];ve=ve[1];var Vt=Ot.split("_");q=2<=Vt.length&&Vt[1]=="type"?q+(Ot+"="+ve+"&"):q+(Ot+"=redacted&")}}else q=null;else q=M;return"XMLHTTP REQ ("+y+") [attempt "+N+"]: "+h+`
`+d+`
`+q})}function Kh(o,h,d,y,N,M,q){o.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+N+"]: "+h+`
`+d+`
`+M+" "+q})}function ii(o,h,d,y){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+$h(o,d)+(y?" "+y:"")})}function Yh(o,h){o.info(function(){return"TIMEOUT: "+h})}Dn.prototype.info=function(){};function $h(o,h){if(!o.g)return h;if(!h)return null;try{var d=JSON.parse(h);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var y=d[o];if(!(2>y.length)){var N=y[1];if(Array.isArray(N)&&!(1>N.length)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(var q=1;q<N.length;q++)N[q]=""}}}}return Ka(d)}catch{return h}}var ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xh;function Wl(){}C(Wl,vr),Wl.prototype.g=function(){return new XMLHttpRequest},Wl.prototype.i=function(){return{}},Xh=new Wl;function ji(o,h,d,y){this.j=o,this.i=h,this.l=d,this.R=y||1,this.U=new Vs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rg}function Rg(){this.i=null,this.g="",this.h=!1}var Ig={},Zh={};function Wh(o,h,d){o.L=1,o.v=nu(si(h)),o.m=d,o.P=!0,Cg(o,null)}function Cg(o,h){o.F=Date.now(),Jl(o),o.A=si(o.v);var d=o.A,y=o.R;Array.isArray(y)||(y=[String(y)]),Hg(d.i,"t",y),o.C=0,d=o.j.J,o.h=new Rg,o.g=oy(o.j,d?h:null,!o.m),0<o.O&&(o.M=new Gh(p(o.Y,o,o.g),o.O)),h=o.U,d=o.g,y=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(_r[0]=N.toString()),N=_r);for(var M=0;M<N.length;M++){var q=ei(d,N[M],y||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=o.H?v(o.H):{},o.m?(o.u||(o.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,h)):(o.u="GET",o.g.ea(o.A,o.u,null,h)),Ce(),Qh(o.i,o.u,o.A,o.l,o.R,o.m)}ji.prototype.ca=function(o){o=o.target;const h=this.M;h&&ri(o)==3?h.j():this.Y(o)},ji.prototype.Y=function(o){try{if(o==this.g)e:{const Vt=ri(this.g);var h=this.g.Ba();const wr=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||Xg(this.g)))){this.J||Vt!=4||h==7||(h==8||0>=wr?Ce(3):Ce(2)),Jh(this);var d=this.g.Z();this.X=d;t:if(Ng(this)){var y=Xg(this.g);o="";var N=y.length,M=ri(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ks(this),Ya(this);var q="";break t}this.h.i=new l.TextDecoder}for(h=0;h<N;h++)this.h.h=!0,o+=this.h.i.decode(y[h],{stream:!(M&&h==N-1)});y.length=0,this.h.g+=o,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=d==200,Kh(this.i,this.u,this.A,this.l,this.R,Vt,d),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,wt=this.g;if((Ne=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ne)){var ve=Ne;break t}}ve=null}if(d=ve)ii(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ef(this,d);else{this.o=!1,this.s=3,tt(12),ks(this),Ya(this);break e}}if(this.P){d=!0;let Sn;for(;!this.J&&this.C<q.length;)if(Sn=YS(this,q),Sn==Zh){Vt==4&&(this.s=4,tt(14),d=!1),ii(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==Ig){this.s=4,tt(15),ii(this.i,this.l,q,"[Invalid Chunk]"),d=!1;break}else ii(this.i,this.l,Sn,null),ef(this,Sn);if(Ng(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||q.length!=0||this.h.h||(this.s=1,tt(16),d=!1),this.o=this.o&&d,!d)ii(this.i,this.l,q,"[Invalid Chunked Response]"),ks(this),Ya(this);else if(0<q.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),of(Ot),Ot.M=!0,tt(11))}}else ii(this.i,this.l,q,null),ef(this,q);Vt==4&&ks(this),this.o&&!this.J&&(Vt==4?iy(this.j,this):(this.o=!1,Jl(this)))}else hA(this.g),d==400&&0<q.indexOf("Unknown SID")?(this.s=3,tt(12)):(this.s=0,tt(13)),ks(this),Ya(this)}}}catch{}finally{}};function Ng(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function YS(o,h){var d=o.C,y=h.indexOf(`
`,d);return y==-1?Zh:(d=Number(h.substring(d,y)),isNaN(d)?Ig:(y+=1,y+d>h.length?Zh:(h=h.slice(y,y+d),o.C=y+d,h)))}ji.prototype.cancel=function(){this.J=!0,ks(this)};function Jl(o){o.S=Date.now()+o.I,Dg(o,o.I)}function Dg(o,h){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ni(p(o.ba,o),h)}function Jh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}ji.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Yh(this.i,this.A),this.L!=2&&(Ce(),tt(17)),ks(this),this.s=2,Ya(this)):Dg(this,this.S-o)};function Ya(o){o.j.G==0||o.J||iy(o.j,o)}function ks(o){Jh(o);var h=o.M;h&&typeof h.ma=="function"&&h.ma(),o.M=null,Kl(o.U),o.g&&(h=o.g,o.g=null,h.abort(),h.ma())}function ef(o,h){try{var d=o.j;if(d.G!=0&&(d.g==o||tf(d.h,o))){if(!o.K&&tf(d.h,o)&&d.G==3){try{var y=d.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var N=y;if(N[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)lu(d),au(d);else break e;af(d),tt(18)}}else d.za=N[1],0<d.za-d.T&&37500>N[2]&&d.F&&d.v==0&&!d.C&&(d.C=ni(p(d.Za,d),6e3));if(1>=Mg(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Ps(d,11)}else if((o.K||d.g==o)&&lu(d),!E(h))for(N=d.Da.g.parse(h),h=0;h<N.length;h++){let ve=N[h];if(d.T=ve[0],ve=ve[1],d.G==2)if(ve[0]=="c"){d.K=ve[1],d.ia=ve[2];const Ot=ve[3];Ot!=null&&(d.la=Ot,d.j.info("VER="+d.la));const Vt=ve[4];Vt!=null&&(d.Aa=Vt,d.j.info("SVER="+d.Aa));const wr=ve[5];wr!=null&&typeof wr=="number"&&0<wr&&(y=1.5*wr,d.L=y,d.j.info("backChannelRequestTimeoutMs_="+y)),y=d;const Sn=o.g;if(Sn){const cu=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cu){var M=y.h;M.g||cu.indexOf("spdy")==-1&&cu.indexOf("quic")==-1&&cu.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(nf(M,M.h),M.h=null))}if(y.D){const lf=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;lf&&(y.ya=lf,Me(y.I,y.D,lf))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),y=d;var q=o;if(y.qa=ay(y,y.J?y.ia:null,y.W),q.K){kg(y.h,q);var Ne=q,wt=y.L;wt&&(Ne.I=wt),Ne.B&&(Jh(Ne),Jl(Ne)),y.g=q}else ty(y);0<d.i.length&&ou(d)}else ve[0]!="stop"&&ve[0]!="close"||Ps(d,7);else d.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Ps(d,7):rf(d):ve[0]!="noop"&&d.l&&d.l.ta(ve),d.v=0)}}Ce(4)}catch{}}var $S=class{constructor(o,h){this.g=o,this.map=h}};function Og(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Mg(o){return o.h?1:o.g?o.g.size:0}function tf(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function nf(o,h){o.g?o.g.add(h):o.h=h}function kg(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}Og.prototype.cancel=function(){if(this.i=jg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function jg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const d of o.g.values())h=h.concat(d.D);return h}return V(o.i)}function XS(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var h=[],d=o.length,y=0;y<d;y++)h.push(o[y]);return h}h=[],d=0;for(y in o)h[d++]=o[y];return h}function ZS(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var h=[];o=o.length;for(var d=0;d<o;d++)h.push(d);return h}h=[],d=0;for(const y in o)h[d++]=y;return h}}}function Pg(o,h){if(o.forEach&&typeof o.forEach=="function")o.forEach(h,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,h,void 0);else for(var d=ZS(o),y=XS(o),N=y.length,M=0;M<N;M++)h.call(void 0,y[M],d&&d[M],o)}var Lg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WS(o,h){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var y=o[d].indexOf("="),N=null;if(0<=y){var M=o[d].substring(0,y);N=o[d].substring(y+1)}else M=o[d];h(M,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function js(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof js){this.h=o.h,eu(this,o.j),this.o=o.o,this.g=o.g,tu(this,o.s),this.l=o.l;var h=o.i,d=new Za;d.i=h.i,h.g&&(d.g=new Map(h.g),d.h=h.h),Ug(this,d),this.m=o.m}else o&&(h=String(o).match(Lg))?(this.h=!1,eu(this,h[1]||"",!0),this.o=$a(h[2]||""),this.g=$a(h[3]||"",!0),tu(this,h[4]),this.l=$a(h[5]||"",!0),Ug(this,h[6]||"",!0),this.m=$a(h[7]||"")):(this.h=!1,this.i=new Za(null,this.h))}js.prototype.toString=function(){var o=[],h=this.j;h&&o.push(Xa(h,zg,!0),":");var d=this.g;return(d||h=="file")&&(o.push("//"),(h=this.o)&&o.push(Xa(h,zg,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Xa(d,d.charAt(0)=="/"?tA:eA,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Xa(d,iA)),o.join("")};function si(o){return new js(o)}function eu(o,h,d){o.j=d?$a(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function tu(o,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);o.s=h}else o.s=null}function Ug(o,h,d){h instanceof Za?(o.i=h,sA(o.i,o.h)):(d||(h=Xa(h,nA)),o.i=new Za(h,o.h))}function Me(o,h,d){o.i.set(h,d)}function nu(o){return Me(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function $a(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Xa(o,h,d){return typeof o=="string"?(o=encodeURI(o).replace(h,JS),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function JS(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var zg=/[#\/\?@]/g,eA=/[#\?:]/g,tA=/[#\?]/g,nA=/[#\?@]/g,iA=/#/g;function Za(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function Pi(o){o.g||(o.g=new Map,o.h=0,o.i&&WS(o.i,function(h,d){o.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}t=Za.prototype,t.add=function(o,h){Pi(this),this.i=null,o=Tr(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(h),this.h+=1,this};function Bg(o,h){Pi(o),h=Tr(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function qg(o,h){return Pi(o),h=Tr(o,h),o.g.has(h)}t.forEach=function(o,h){Pi(this),this.g.forEach(function(d,y){d.forEach(function(N){o.call(h,N,y,this)},this)},this)},t.na=function(){Pi(this);const o=Array.from(this.g.values()),h=Array.from(this.g.keys()),d=[];for(let y=0;y<h.length;y++){const N=o[y];for(let M=0;M<N.length;M++)d.push(h[y])}return d},t.V=function(o){Pi(this);let h=[];if(typeof o=="string")qg(this,o)&&(h=h.concat(this.g.get(Tr(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)h=h.concat(o[d])}return h},t.set=function(o,h){return Pi(this),this.i=null,o=Tr(this,o),qg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=this.V(o),0<o.length?String(o[0]):h):h};function Hg(o,h,d){Bg(o,h),0<d.length&&(o.i=null,o.g.set(Tr(o,h),V(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(var d=0;d<h.length;d++){var y=h[d];const M=encodeURIComponent(String(y)),q=this.V(y);for(y=0;y<q.length;y++){var N=M;q[y]!==""&&(N+="="+encodeURIComponent(String(q[y]))),o.push(N)}}return this.i=o.join("&")};function Tr(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function sA(o,h){h&&!o.j&&(Pi(o),o.i=null,o.g.forEach(function(d,y){var N=y.toLowerCase();y!=N&&(Bg(this,y),Hg(this,N,d))},o)),o.j=h}function rA(o,h){const d=new Dn;if(l.Image){const y=new Image;y.onload=_(Li,d,"TestLoadImage: loaded",!0,h,y),y.onerror=_(Li,d,"TestLoadImage: error",!1,h,y),y.onabort=_(Li,d,"TestLoadImage: abort",!1,h,y),y.ontimeout=_(Li,d,"TestLoadImage: timeout",!1,h,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=o}else h(!1)}function aA(o,h){const d=new Dn,y=new AbortController,N=setTimeout(()=>{y.abort(),Li(d,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:y.signal}).then(M=>{clearTimeout(N),M.ok?Li(d,"TestPingServer: ok",!0,h):Li(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(N),Li(d,"TestPingServer: error",!1,h)})}function Li(o,h,d,y,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),y(d)}catch{}}function oA(){this.g=new $l}function lA(o,h,d){const y=d||"";try{Pg(o,function(N,M){let q=N;f(N)&&(q=Ka(N)),h.push(y+M+"="+encodeURIComponent(q))})}catch(N){throw h.push(y+"type="+encodeURIComponent("_badmap")),N}}function iu(o){this.l=o.Ub||null,this.j=o.eb||!1}C(iu,vr),iu.prototype.g=function(){return new su(this.l,this.j)},iu.prototype.i=function(o){return function(){return o}}({});function su(o,h){ut.call(this),this.D=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(su,ut),t=su.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=h,this.readyState=1,Ja(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(h.body=o),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wa(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fg(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fg(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?Wa(this):Ja(this),this.readyState==3&&Fg(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Wa(this))},t.Qa=function(o){this.g&&(this.response=o,Wa(this))},t.ga=function(){this.g&&Wa(this)};function Wa(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ja(o)}t.setRequestHeader=function(o,h){this.u.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=h.next();return o.join(`\r
`)};function Ja(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(su.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Gg(o){let h="";return H(o,function(d,y){h+=y,h+=":",h+=d,h+=`\r
`}),h}function sf(o,h,d){e:{for(y in d){var y=!1;break e}y=!0}y||(d=Gg(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):Me(o,h,d))}function Ye(o){ut.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ye,ut);var uA=/^https?$/i,cA=["POST","PUT"];t=Ye.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,h,d,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xh.g(),this.v=this.o?Xl(this.o):Xl(Xh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(M){Qg(this,M);return}if(o=d||"",d=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var N in y)d.set(N,y[N]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())d.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(d.keys()).find(M=>M.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(cA,h,void 0))||y||N||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,q]of d)this.g.setRequestHeader(M,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$g(this),this.u=!0,this.g.send(o),this.u=!1}catch(M){Qg(this,M)}};function Qg(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.m=5,Kg(o),ru(o)}function Kg(o){o.A||(o.A=!0,Tt(o,"complete"),Tt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Tt(this,"complete"),Tt(this,"abort"),ru(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ru(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yg(this):this.bb())},t.bb=function(){Yg(this)};function Yg(o){if(o.h&&typeof a<"u"&&(!o.v[1]||ri(o)!=4||o.Z()!=2)){if(o.u&&ri(o)==4)Gl(o.Ea,0,o);else if(Tt(o,"readystatechange"),ri(o)==4){o.h=!1;try{const q=o.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var d;if(!(d=h)){var y;if(y=q===0){var N=String(o.D).match(Lg)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),y=!uA.test(N?N.toLowerCase():"")}d=y}if(d)Tt(o,"complete"),Tt(o,"success");else{o.m=6;try{var M=2<ri(o)?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.Z()+"]",Kg(o)}}finally{ru(o)}}}}function ru(o,h){if(o.g){$g(o);const d=o.g,y=o.v[0]?()=>{}:null;o.g=null,o.v=null,h||Tt(o,"ready");try{d.onreadystatechange=y}catch{}}}function $g(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function ri(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<ri(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),Yl(h)}};function Xg(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function hA(o){const h={};o=(o.g&&2<=ri(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<o.length;y++){if(E(o[y]))continue;var d=R(o[y]);const N=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const M=h[N]||[];h[N]=M,M.push(d)}T(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function eo(o,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||h}function Zg(o){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=eo("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=eo("baseRetryDelayMs",5e3,o),this.cb=eo("retryDelaySeedMs",1e4,o),this.Wa=eo("forwardChannelMaxRetries",2,o),this.wa=eo("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Og(o&&o.concurrentRequestLimit),this.Da=new oA,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zg.prototype,t.la=8,t.G=1,t.connect=function(o,h,d,y){tt(0),this.W=o,this.H=h||{},d&&y!==void 0&&(this.H.OSID=d,this.H.OAID=y),this.F=this.X,this.I=ay(this,null,this.W),ou(this)};function rf(o){if(Wg(o),o.G==3){var h=o.U++,d=si(o.I);if(Me(d,"SID",o.K),Me(d,"RID",h),Me(d,"TYPE","terminate"),to(o,d),h=new ji(o,o.j,h),h.L=2,h.v=nu(si(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=h.v,d=!0),d||(h.g=oy(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Jl(h)}ry(o)}function au(o){o.g&&(of(o),o.g.cancel(),o.g=null)}function Wg(o){au(o),o.u&&(l.clearTimeout(o.u),o.u=null),lu(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function ou(o){if(!Vg(o.h)&&!o.s){o.s=!0;var h=o.Ga;$||ce(),Y||($(),Y=!0),ue.add(h,o),o.B=0}}function fA(o,h){return Mg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=h.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ni(p(o.Ga,o,h),sy(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new ji(this,this.j,o);let M=this.o;if(this.S&&(M?(M=v(M),S(M,this.S)):M=this.S),this.m!==null||this.O||(N.H=M,M=null),this.P)e:{for(var h=0,d=0;d<this.i.length;d++){t:{var y=this.i[d];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=d;break e}if(h===4096||d===this.i.length-1){h=d+1;break e}}h=1e3}else h=1e3;h=ey(this,N,h),d=si(this.I),Me(d,"RID",o),Me(d,"CVER",22),this.D&&Me(d,"X-HTTP-Session-Id",this.D),to(this,d),M&&(this.O?h="headers="+encodeURIComponent(String(Gg(M)))+"&"+h:this.m&&sf(d,this.m,M)),nf(this.h,N),this.Ua&&Me(d,"TYPE","init"),this.P?(Me(d,"$req",h),Me(d,"SID","null"),N.T=!0,Wh(N,d,null)):Wh(N,d,h),this.G=2}}else this.G==3&&(o?Jg(this,o):this.i.length==0||Vg(this.h)||Jg(this))};function Jg(o,h){var d;h?d=h.l:d=o.U++;const y=si(o.I);Me(y,"SID",o.K),Me(y,"RID",d),Me(y,"AID",o.T),to(o,y),o.m&&o.o&&sf(y,o.m,o.o),d=new ji(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),h&&(o.i=h.D.concat(o.i)),h=ey(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),nf(o.h,d),Wh(d,y,h)}function to(o,h){o.H&&H(o.H,function(d,y){Me(h,y,d)}),o.l&&Pg({},function(d,y){Me(h,y,d)})}function ey(o,h,d){d=Math.min(o.i.length,d);var y=o.l?p(o.l.Na,o.l,o):null;e:{var N=o.i;let M=-1;for(;;){const q=["count="+d];M==-1?0<d?(M=N[0].g,q.push("ofs="+M)):M=0:q.push("ofs="+M);let Ne=!0;for(let wt=0;wt<d;wt++){let ve=N[wt].g;const Ot=N[wt].map;if(ve-=M,0>ve)M=Math.max(0,N[wt].g-100),Ne=!1;else try{lA(Ot,q,"req"+ve+"_")}catch{y&&y(Ot)}}if(Ne){y=q.join("&");break e}}}return o=o.i.splice(0,d),h.D=o,y}function ty(o){if(!o.g&&!o.u){o.Y=1;var h=o.Fa;$||ce(),Y||($(),Y=!0),ue.add(h,o),o.v=0}}function af(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ni(p(o.Fa,o),sy(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,ny(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ni(p(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tt(10),au(this),ny(this))};function of(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function ny(o){o.g=new ji(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var h=si(o.qa);Me(h,"RID","rpc"),Me(h,"SID",o.K),Me(h,"AID",o.T),Me(h,"CI",o.F?"0":"1"),!o.F&&o.ja&&Me(h,"TO",o.ja),Me(h,"TYPE","xmlhttp"),to(o,h),o.m&&o.o&&sf(h,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=nu(si(h)),d.m=null,d.P=!0,Cg(d,o)}t.Za=function(){this.C!=null&&(this.C=null,au(this),af(this),tt(19))};function lu(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function iy(o,h){var d=null;if(o.g==h){lu(o),of(o),o.g=null;var y=2}else if(tf(o.h,h))d=h.D,kg(o.h,h),y=1;else return;if(o.G!=0){if(h.o)if(y==1){d=h.m?h.m.length:0,h=Date.now()-h.F;var N=o.B;y=Oe(),Tt(y,new Er(y,d)),ou(o)}else ty(o);else if(N=h.s,N==3||N==0&&0<h.X||!(y==1&&fA(o,h)||y==2&&af(o)))switch(d&&0<d.length&&(h=o.h,h.i=h.i.concat(d)),N){case 1:Ps(o,5);break;case 4:Ps(o,10);break;case 3:Ps(o,6);break;default:Ps(o,2)}}}function sy(o,h){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*h}function Ps(o,h){if(o.j.info("Error code "+h),h==2){var d=p(o.fb,o),y=o.Xa;const N=!y;y=new js(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||eu(y,"https"),nu(y),N?rA(y.toString(),d):aA(y.toString(),d)}else tt(2);o.G=0,o.l&&o.l.sa(h),ry(o),Wg(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function ry(o){if(o.G=0,o.ka=[],o.l){const h=jg(o.h);(h.length!=0||o.i.length!=0)&&(D(o.ka,h),D(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function ay(o,h,d){var y=d instanceof js?si(d):new js(d);if(y.g!="")h&&(y.g=h+"."+y.g),tu(y,y.s);else{var N=l.location;y=N.protocol,h=h?h+"."+N.hostname:N.hostname,N=+N.port;var M=new js(null);y&&eu(M,y),h&&(M.g=h),N&&tu(M,N),d&&(M.l=d),y=M}return d=o.D,h=o.ya,d&&h&&Me(y,d,h),Me(y,"VER",o.la),to(o,y),y}function oy(o,h,d){if(h&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Ca&&!o.pa?new Ye(new iu({eb:d})):new Ye(o.pa),h.Ha(o.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ly(){}t=ly.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function uu(){}uu.prototype.g=function(o,h){return new Jt(o,h)};function Jt(o,h){ut.call(this),this.g=new Zg(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(o?o["X-WebChannel-Client-Profile"]=h.va:o={"X-WebChannel-Client-Profile":h.va}),this.g.S=o,(o=h&&h.Sb)&&!E(o)&&(this.g.m=o),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new br(this)}C(Jt,ut),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){rf(this.g)},Jt.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Ka(o),o=d);h.i.push(new $S(h.Ya++,o)),h.G==3&&ou(h)},Jt.prototype.N=function(){this.g.l=null,delete this.j,rf(this.g),delete this.g,Jt.aa.N.call(this)};function uy(o){F.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const d in h){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}C(uy,F);function cy(){ee.call(this),this.status=1}C(cy,ee);function br(o){this.g=o}C(br,ly),br.prototype.ua=function(){Tt(this.g,"a")},br.prototype.ta=function(o){Tt(this.g,new uy(o))},br.prototype.sa=function(o){Tt(this.g,new cy)},br.prototype.ra=function(){Tt(this.g,"b")},uu.prototype.createWebChannel=uu.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,Nb=function(){return new uu},Cb=function(){return Oe()},Ib=ie,tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ki.NO_ERROR=0,ki.TIMEOUT=8,ki.HTTP_ERROR=6,Gu=ki,xg.COMPLETE="complete",Rb=xg,Zl.EventType=Ms,Ms.OPEN="a",Ms.CLOSE="b",Ms.ERROR="c",Ms.MESSAGE="d",ut.prototype.listen=ut.prototype.K,yo=Zl,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,xb=Ye}).apply(typeof xu<"u"?xu:typeof self<"u"?self:typeof window<"u"?window:{});const Y_="@firebase/firestore",$_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ua="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new wp("@firebase/firestore");function Nr(){return ir.logLevel}function G(t,...e){if(ir.logLevel<=he.DEBUG){const n=e.map(xp);ir.debug(`Firestore (${Ua}): ${t}`,...n)}}function xi(t,...e){if(ir.logLevel<=he.ERROR){const n=e.map(xp);ir.error(`Firestore (${Ua}): ${t}`,...n)}}function Ea(t,...e){if(ir.logLevel<=he.WARN){const n=e.map(xp);ir.warn(`Firestore (${Ua}): ${t}`,...n)}}function xp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Db(t,i,n)}function Db(t,e,n){let i=`FIRESTORE (${Ua}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw xi(i),new Error(i)}function _e(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||Db(e,s,i)}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Ni{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(kt.UNAUTHENTICATED))}shutdown(){}}class YR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $R{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Un,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Un)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_e(typeof i.accessToken=="string",31837,{l:i}),new Ob(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new kt(e)}}class XR{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZR{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new XR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class X_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);const i=r=>{r.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,G("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new X_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new X_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=JR(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%62))}return i}}function fe(t,e){return t<e?-1:t>e?1:0}function nm(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),r=e.charAt(i);if(s!==r)return $f(s)===$f(r)?fe(s,r):$f(s)?1:-1}return fe(t.length,e.length)}const eI=55296,tI=57343;function $f(t){const e=t.charCodeAt(0);return e>=eI&&e<=tI}function Ta(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="__name__";class Vn{constructor(e,n,i){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&X(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vn?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=Vn.compareSegments(e.get(s),n.get(s));if(r!==0)return r}return fe(e.length,n.length)}static compareSegments(e,n){const i=Vn.isNumericId(e),s=Vn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Vn.extractNumericId(e).compare(Vn.extractNumericId(n)):nm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ps.fromString(e.substring(4,e.length-2))}}class Ae extends Vn{construct(e,n,i){return new Ae(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const nI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends Vn{construct(e,n,i){return new It(e,n,i)}static isValidIdentifier(e){return nI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===im}static keyField(){return new It([im])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Ae.fromString(e))}static fromName(e){return new Q(Ae.fromString(e).popFirst(5))}static empty(){return new Q(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Ae(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e,n){if(!n)throw new z(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function iI(t,e,n,i){if(e===!0&&i===!0)throw new z(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Z_(t){if(!Q.isDocumentKey(t))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function W_(t){if(Q.isDocumentKey(t))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function yh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function Ht(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yh(t);throw new z(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function sI(t,e){if(e<=0)throw new z(k.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Vl(t,e){if(!Mb(t))throw new z(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,r="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new z(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=-62135596800,ev=1e6;class ke{static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*ev);return new ke(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<J_)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ev}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vl(e,ke._jsonSchema))return new ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-J_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ke._jsonSchemaVersion="firestore/timestamp/1.0",ke._jsonSchema={type:rt("string",ke._jsonSchemaVersion),seconds:rt("number"),nanoseconds:rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{static fromTimestamp(e){return new W(e)}static min(){return new W(new ke(0,0))}static max(){return new W(new ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=-1;function rI(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=W.fromTimestamp(i===1e9?new ke(n+1,0):new ke(n,i));return new Ts(s,Q.empty(),e)}function aI(t){return new Ts(t.readTime,t.key,il)}class Ts{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ts(W.min(),Q.empty(),il)}static max(){return new Ts(W.max(),Q.empty(),il)}}function oI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==lI)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,i)=>{n(e)})}static reject(e){return new j((n,i)=>{i(e)})}static waitFor(e){return new j((n,i)=>{let s=0,r=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(e){let n=j.resolve(!1);for(const i of e)n=n.next(s=>s?j.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new j((i,s)=>{const r=e.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const f=u;n(e[f]).next(m=>{a[f]=m,++l,l===r&&i(a)},m=>s(m))}})}static doWhile(e,n){return new j((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}function cI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ba(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_h.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=-1;function Ml(t){return t==null}function Vc(t){return t===0&&1/t==-1/0}function hI(t){return typeof t=="number"&&Number.isInteger(t)&&!Vc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="";function fI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=tv(e)),e=dI(t.get(n),e);return tv(e)}function dI(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const r=t.charAt(s);switch(r){case"\0":n+="";break;case kb:n+="";break;default:n+=r}}return n}function tv(t){return t+kb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ru(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ru(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ru(this.root,e,this.comparator,!0)}}class Ru{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??xt.RED,this.left=s??xt.EMPTY,this.right=r??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new xt(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return xt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,i,s,r){return this}insert(e,n,i){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iv(this.data.getIterator())}getIteratorFrom(e){return new iv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class iv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new an([])}unionWith(e){let n=new ft(It.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ta(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Pb("Invalid base64 string: "+r):r}}(e);return new Dt(n)}static fromUint8Array(e){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(e);return new Dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const mI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(t){if(_e(!!t,39018),typeof t=="string"){let e=0;const n=mI.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ws(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="server_timestamp",Ub="__type__",zb="__previous_value__",Bb="__local_write_time__";function vh(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Ub])==null?void 0:i.stringValue)===Lb}function Eh(t){const e=t.mapValue.fields[zb];return vh(e)?Eh(e):e}function sl(t){const e=bs(t.mapValue.fields[Bb].timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,i,s,r,a,l,u,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=m}}const Mc="(default)";class rl{constructor(e,n){this.projectId=e,this.database=n||Mc}static empty(){return new rl("","")}get isDefaultDatabase(){return this.database===Mc}isEqual(e){return e instanceof rl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="__type__",gI="__max__",Iu={mapValue:{}},Hb="__vector__",kc="value";function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vh(t)?4:_I(t)?9007199254740991:yI(t)?10:11:X(28295,{value:t})}function Gn(t,e){if(t===e)return!0;const n=Ss(t);if(n!==Ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sl(t).isEqual(sl(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=bs(s.timestampValue),l=bs(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return ws(s.bytesValue).isEqual(ws(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return et(s.geoPointValue.latitude)===et(r.geoPointValue.latitude)&&et(s.geoPointValue.longitude)===et(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return et(s.integerValue)===et(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=et(s.doubleValue),l=et(r.doubleValue);return a===l?Vc(a)===Vc(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Ta(t.arrayValue.values||[],e.arrayValue.values||[],Gn);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(nv(a)!==nv(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Gn(a[u],l[u])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function al(t,e){return(t.values||[]).find(n=>Gn(n,e))!==void 0}function ba(t,e){if(t===e)return 0;const n=Ss(t),i=Ss(e);if(n!==i)return fe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(r,a){const l=et(r.integerValue||r.doubleValue),u=et(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return sv(t.timestampValue,e.timestampValue);case 4:return sv(sl(t),sl(e));case 5:return nm(t.stringValue,e.stringValue);case 6:return function(r,a){const l=ws(r),u=ws(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){const m=fe(l[f],u[f]);if(m!==0)return m}return fe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,a){const l=fe(et(r.latitude),et(a.latitude));return l!==0?l:fe(et(r.longitude),et(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return rv(t.arrayValue,e.arrayValue);case 10:return function(r,a){var p,_,C,V;const l=r.fields||{},u=a.fields||{},f=(p=l[kc])==null?void 0:p.arrayValue,m=(_=u[kc])==null?void 0:_.arrayValue,g=fe(((C=f==null?void 0:f.values)==null?void 0:C.length)||0,((V=m==null?void 0:m.values)==null?void 0:V.length)||0);return g!==0?g:rv(f,m)}(t.mapValue,e.mapValue);case 11:return function(r,a){if(r===Iu.mapValue&&a===Iu.mapValue)return 0;if(r===Iu.mapValue)return 1;if(a===Iu.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),f=a.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const p=nm(u[g],m[g]);if(p!==0)return p;const _=ba(l[u[g]],f[m[g]]);if(_!==0)return _}return fe(u.length,m.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function sv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=bs(t),i=bs(e),s=fe(n.seconds,i.seconds);return s!==0?s:fe(n.nanos,i.nanos)}function rv(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=ba(n[s],i[s]);if(r)return r}return fe(n.length,i.length)}function wa(t){return sm(t)}function sm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=bs(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ws(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=sm(r);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${sm(n.fields[a])}`;return s+"}"}(t.mapValue):X(61005,{value:t})}function Qu(t){switch(Ss(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Eh(t);return e?16+Qu(e):16;case 5:return 2*t.stringValue.length;case 6:return ws(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+Qu(r),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Cs(i.fields,(r,a)=>{s+=r.length+Qu(a)}),s}(t.mapValue);default:throw X(13486,{value:t})}}function jc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rm(t){return!!t&&"integerValue"in t}function Cp(t){return!!t&&"arrayValue"in t}function av(t){return!!t&&"nullValue"in t}function ov(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ku(t){return!!t&&"mapValue"in t}function yI(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[qb])==null?void 0:i.stringValue)===Hb}function Po(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Cs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Po(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Po(t.arrayValue.values[n]);return e}return{...t}}function _I(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===gI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Ku(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Po(n)}setAll(e){let n=It.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=Po(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());Ku(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Ku(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Cs(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Bt(Po(this.value))}}function Fb(t){const e=[];return Cs(t.fields,(n,i)=>{const s=new It([n]);if(Ku(i)){const r=Fb(i.mapValue).fields;if(r.length===0)e.push(s);else for(const a of r)e.push(s.child(a))}else e.push(s)}),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,i,s,r,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(e){return new _t(e,0,W.min(),W.min(),W.min(),Bt.empty(),0)}static newFoundDocument(e,n,i,s){return new _t(e,1,n,W.min(),i,s,0)}static newNoDocument(e,n){return new _t(e,2,n,W.min(),W.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,W.min(),W.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){this.position=e,this.inclusive=n}}function lv(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],a=t.position[s];if(r.field.isKeyField()?i=Q.comparator(Q.fromName(a.referenceValue),n.key):i=ba(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function uv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n="asc"){this.field=e,this.dir=n}}function vI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{}class st extends Gb{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new TI(e,n,i):n==="array-contains"?new SI(e,i):n==="in"?new AI(e,i):n==="not-in"?new xI(e,i):n==="array-contains-any"?new RI(e,i):new st(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new bI(e,i):new wI(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ba(n,this.value)):n!==null&&Ss(this.value)===Ss(n)&&this.matchesComparison(ba(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class In extends Gb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new In(e,n)}matches(e){return Qb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Qb(t){return t.op==="and"}function Kb(t){return EI(t)&&Qb(t)}function EI(t){for(const e of t.filters)if(e instanceof In)return!1;return!0}function am(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+wa(t.value);if(Kb(t))return t.filters.map(e=>am(e)).join(",");{const e=t.filters.map(n=>am(n)).join(",");return`${t.op}(${e})`}}function Yb(t,e){return t instanceof st?function(i,s){return s instanceof st&&i.op===s.op&&i.field.isEqual(s.field)&&Gn(i.value,s.value)}(t,e):t instanceof In?function(i,s){return s instanceof In&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&Yb(a,s.filters[l]),!0):!1}(t,e):void X(19439)}function $b(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${wa(n.value)}`}(t):t instanceof In?function(n){return n.op.toString()+" {"+n.getFilters().map($b).join(" ,")+"}"}(t):"Filter"}class TI extends st{constructor(e,n,i){super(e,n,i),this.key=Q.fromName(i.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class bI extends st{constructor(e,n){super(e,"in",n),this.keys=Xb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wI extends st{constructor(e,n){super(e,"not-in",n),this.keys=Xb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Xb(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class SI extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Cp(n)&&al(n.arrayValue,this.value)}}class AI extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&al(this.value.arrayValue,n)}}class xI extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!al(this.value.arrayValue,n)}}class RI extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Cp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>al(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n=null,i=[],s=[],r=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function cv(t,e=null,n=[],i=[],s=null,r=null,a=null){return new II(t,e,n,i,s,r,a)}function Np(t){const e=ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>am(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Ml(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>wa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>wa(i)).join(",")),e.Te=n}return e.Te}function Dp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Yb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uv(t.startAt,e.startAt)&&uv(t.endAt,e.endAt)}function om(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n=null,i=[],s=[],r=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function CI(t,e,n,i,s,r,a,l){return new hr(t,e,n,i,s,r,a,l)}function Th(t){return new hr(t)}function hv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Op(t){return t.collectionGroup!==null}function ia(t){const e=ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ft(It.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new ol(r,i))}),n.has(It.keyField().canonicalString())||e.Ie.push(new ol(It.keyField(),i))}return e.Ie}function zn(t){const e=ne(t);return e.Ee||(e.Ee=NI(e,ia(t))),e.Ee}function NI(t,e){if(t.limitType==="F")return cv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new ol(s.field,r)});const n=t.endAt?new Sa(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Sa(t.startAt.position,t.startAt.inclusive):null;return cv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function lm(t,e){const n=t.filters.concat([e]);return new hr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Pc(t,e,n){return new hr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bh(t,e){return Dp(zn(t),zn(e))&&t.limitType===e.limitType}function Zb(t){return`${Np(zn(t))}|lt:${t.limitType}`}function Dr(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>$b(s)).join(", ")}]`),Ml(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>wa(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>wa(s)).join(",")),`Target(${i})`}(zn(t))}; limitType=${t.limitType})`}function wh(t,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):Q.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(t,e)&&function(i,s){for(const r of ia(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(a,l,u){const f=lv(a,l,u);return a.inclusive?f<=0:f<0}(i.startAt,ia(i),s)||i.endAt&&!function(a,l,u){const f=lv(a,l,u);return a.inclusive?f>=0:f>0}(i.endAt,ia(i),s))}(t,e)}function DI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Wb(t){return(e,n)=>{let i=!1;for(const s of ia(t)){const r=OI(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function OI(t,e,n){const i=t.field.isKeyField()?Q.comparator(e.key,n.key):function(r,a,l){const u=a.data.field(r),f=l.data.field(r);return u!==null&&f!==null?ba(u,f):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return jb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=new Qe(Q.comparator);function Ri(){return VI}const Jb=new Qe(Q.comparator);function _o(...t){let e=Jb;for(const n of t)e=e.insert(n.key,n);return e}function ew(t){let e=Jb;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Hs(){return Lo()}function tw(){return Lo()}function Lo(){return new fr(t=>t.toString(),(t,e)=>t.isEqual(e))}const MI=new Qe(Q.comparator),kI=new ft(Q.comparator);function de(...t){let e=kI;for(const n of t)e=e.add(n);return e}const jI=new ft(fe);function PI(){return jI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vc(e)?"-0":e}}function nw(t){return{integerValue:""+t}}function iw(t,e){return hI(e)?nw(e):Vp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(){this._=void 0}}function LI(t,e,n){return t instanceof ll?function(s,r){const a={fields:{[Ub]:{stringValue:Lb},[Bb]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&vh(r)&&(r=Eh(r)),r&&(a.fields[zb]=r),{mapValue:a}}(n,e):t instanceof Aa?rw(t,e):t instanceof xa?aw(t,e):function(s,r){const a=sw(s,r),l=fv(a)+fv(s.Ae);return rm(a)&&rm(s.Ae)?nw(l):Vp(s.serializer,l)}(t,e)}function UI(t,e,n){return t instanceof Aa?rw(t,e):t instanceof xa?aw(t,e):n}function sw(t,e){return t instanceof ul?function(i){return rm(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class ll extends Sh{}class Aa extends Sh{constructor(e){super(),this.elements=e}}function rw(t,e){const n=ow(e);for(const i of t.elements)n.some(s=>Gn(s,i))||n.push(i);return{arrayValue:{values:n}}}class xa extends Sh{constructor(e){super(),this.elements=e}}function aw(t,e){let n=ow(e);for(const i of t.elements)n=n.filter(s=>!Gn(s,i));return{arrayValue:{values:n}}}class ul extends Sh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function fv(t){return et(t.integerValue||t.doubleValue)}function ow(t){return Cp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n){this.field=e,this.transform=n}}function zI(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Aa&&s instanceof Aa||i instanceof xa&&s instanceof xa?Ta(i.elements,s.elements,Gn):i instanceof ul&&s instanceof ul?Gn(i.Ae,s.Ae):i instanceof ll&&s instanceof ll}(t.transform,e.transform)}class BI{constructor(e,n){this.version=e,this.transformResults=n}}class Ct{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ct}static exists(e){return new Ct(void 0,e)}static updateTime(e){return new Ct(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xh{}function lw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rh(t.key,Ct.none()):new kl(t.key,t.data,Ct.none());{const n=t.data,i=Bt.empty();let s=new ft(It.comparator);for(let r of e.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new Ns(t.key,i,new an(s.toArray()),Ct.none())}}function qI(t,e,n){t instanceof kl?function(s,r,a){const l=s.value.clone(),u=mv(s.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ns?function(s,r,a){if(!Yu(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=mv(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(uw(s)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Uo(t,e,n,i){return t instanceof kl?function(r,a,l,u){if(!Yu(r.precondition,a))return l;const f=r.value.clone(),m=pv(r.fieldTransforms,u,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ns?function(r,a,l,u){if(!Yu(r.precondition,a))return l;const f=pv(r.fieldTransforms,u,a),m=a.data;return m.setAll(uw(r)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(r,a,l){return Yu(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function HI(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=sw(i.transform,s||null);r!=null&&(n===null&&(n=Bt.empty()),n.set(i.field,r))}return n||null}function dv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Ta(i,s,(r,a)=>zI(r,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kl extends xh{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ns extends xh{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function uw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function mv(t,e,n){const i=new Map;_e(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const r=t[s],a=r.transform,l=e.data.field(r.field);i.set(r.field,UI(a,l,n[s]))}return i}function pv(t,e,n){const i=new Map;for(const s of t){const r=s.transform,a=n.data.field(s.field);i.set(s.field,LI(r,a,e))}return i}class Rh extends xh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cw extends xh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&qI(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Uo(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Uo(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=tw();return this.mutations.forEach(s=>{const r=e.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const u=lw(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(W.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&Ta(this.mutations,e.mutations,(n,i)=>dv(n,i))&&Ta(this.baseMutations,e.baseMutations,(n,i)=>dv(n,i))}}class Mp{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){_e(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return MI}();const r=e.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new Mp(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,ge;function hw(t){switch(t){case k.OK:return X(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function fw(t){if(t===void 0)return xi("GRPC error has no .code"),k.UNKNOWN;switch(t){case nt.OK:return k.OK;case nt.CANCELLED:return k.CANCELLED;case nt.UNKNOWN:return k.UNKNOWN;case nt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case nt.INTERNAL:return k.INTERNAL;case nt.UNAVAILABLE:return k.UNAVAILABLE;case nt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case nt.NOT_FOUND:return k.NOT_FOUND;case nt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case nt.ABORTED:return k.ABORTED;case nt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case nt.DATA_LOSS:return k.DATA_LOSS;default:return X(39323,{code:t})}}(ge=nt||(nt={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=new ps([4294967295,4294967295],0);function gv(t){const e=KI().encode(t),n=new Ab;return n.update(e),new Uint8Array(n.digest())}function yv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new ps([n,i],0),new ps([s,r],0)]}class kp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new vo(`Invalid padding: ${n}`);if(i<0)throw new vo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new vo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new vo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ps.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(ps.fromNumber(i)));return s.compare(YI)===1&&(s=new ps([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=gv(e),[i,s]=yv(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);if(!this.we(a))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),a=new kp(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=gv(e),[i,s]=yv(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class vo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,jl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ih(W.min(),s,new Qe(fe),Ri(),de())}}class jl{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new jl(i,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class dw{constructor(e,n){this.targetId=e,this.Ce=n}}class mw{constructor(e,n,i=Dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class _v{constructor(){this.ve=0,this.Fe=vv(),this.Me=Dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=de(),n=de(),i=de();return this.Fe.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:X(38017,{changeType:r})}}),new jl(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=vv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $I{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ri(),this.Je=Cu(),this.He=Cu(),this.Ye=new Qe(fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const r=s.target;if(om(r))if(i===0){const a=new Q(r.path);this.et(n,a,_t.newNoDocument(a,W.min()))}else _e(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=ws(i).toUint8Array()}catch(u){if(u instanceof Pb)return Ea("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new kp(a,s,r)}catch(u){return Ea(u instanceof vo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(l)||(this.et(n,r,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((r,a)=>{const l=this.ot(a);if(l){if(r.current&&om(l.target)){const u=new Q(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,_t.newNoDocument(u,e))}r.Be&&(n.set(a,r.ke()),r.qe())}});let i=de();this.He.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.je.forEach((r,a)=>a.setReadTime(e));const s=new Ih(e,n,this.Ye,this.je,i);return this.je=Ri(),this.Je=Cu(),this.He=Cu(),this.Ye=new Qe(fe),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new _v,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ft(fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ft(fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _v),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Cu(){return new Qe(Q.comparator)}function vv(){return new Qe(Q.comparator)}const XI={asc:"ASCENDING",desc:"DESCENDING"},ZI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WI={and:"AND",or:"OR"};class JI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function um(t,e){return t.useProto3Json||Ml(e)?e:{value:e}}function Lc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eC(t,e){return Lc(t,e.toTimestamp())}function hn(t){return _e(!!t,49232),W.fromTimestamp(function(n){const i=bs(n);return new ke(i.seconds,i.nanos)}(t))}function jp(t,e){return cm(t,e).canonicalString()}function cm(t,e){const n=function(s){return new Ae(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gw(t){const e=Ae.fromString(t);return _e(bw(e),10190,{key:e.toString()}),e}function Uc(t,e){return jp(t.databaseId,e.path)}function zo(t,e){const n=gw(e);if(n.get(1)!==t.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(_w(n))}function yw(t,e){return jp(t.databaseId,e)}function tC(t){const e=gw(t);return e.length===4?Ae.emptyPath():_w(e)}function hm(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _w(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ev(t,e,n){return{name:Uc(t,e),fields:n.value.mapValue.fields}}function nC(t,e){return"found"in e?function(i,s){_e(!!s.found,43571),s.found.name,s.found.updateTime;const r=zo(i,s.found.name),a=hn(s.found.updateTime),l=s.found.createTime?hn(s.found.createTime):W.min(),u=new Bt({mapValue:{fields:s.found.fields}});return _t.newFoundDocument(r,a,l,u)}(t,e):"missing"in e?function(i,s){_e(!!s.missing,3894),_e(!!s.readTime,22933);const r=zo(i,s.missing),a=hn(s.readTime);return _t.newNoDocument(r,a)}(t,e):X(7234,{result:e})}function iC(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:X(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(f,m){return f.useProto3Json?(_e(m===void 0||typeof m=="string",58123),Dt.fromBase64String(m||"")):(_e(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Dt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(f){const m=f.code===void 0?k.UNKNOWN:fw(f.code);return new z(m,f.message||"")}(a);n=new mw(i,s,r,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=zo(t,i.document.name),r=hn(i.document.updateTime),a=i.document.createTime?hn(i.document.createTime):W.min(),l=new Bt({mapValue:{fields:i.document.fields}}),u=_t.newFoundDocument(s,r,a,l),f=i.targetIds||[],m=i.removedTargetIds||[];n=new $u(f,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=zo(t,i.document),r=i.readTime?hn(i.readTime):W.min(),a=_t.newNoDocument(s,r),l=i.removedTargetIds||[];n=new $u([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=zo(t,i.document),r=i.removedTargetIds||[];n=new $u([],r,s,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new QI(s,r),l=i.targetId;n=new dw(l,a)}}return n}function vw(t,e){let n;if(e instanceof kl)n={update:Ev(t,e.key,e.value)};else if(e instanceof Rh)n={delete:Uc(t,e.key)};else if(e instanceof Ns)n={update:Ev(t,e.key,e.data),updateMask:fC(e.fieldMask)};else{if(!(e instanceof cw))return X(16599,{Vt:e.type});n={verify:Uc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof ll)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Aa)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof xa)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ul)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw X(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:eC(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:X(27497)}(t,e.precondition)),n}function sC(t,e){return t&&t.length>0?(_e(e!==void 0,14353),t.map(n=>function(s,r){let a=s.updateTime?hn(s.updateTime):hn(r);return a.isEqual(W.min())&&(a=hn(r)),new BI(a,s.transformResults||[])}(n,e))):[]}function rC(t,e){return{documents:[yw(t,e.path)]}}function aC(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=yw(t,s);const r=function(f){if(f.length!==0)return Tw(In.create(f,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const a=function(f){if(f.length!==0)return f.map(m=>function(p){return{field:Or(p.field),direction:uC(p.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=um(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:s}}function oC(t){let e=tC(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){_e(i===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let r=[];n.where&&(r=function(g){const p=Ew(g);return p instanceof In&&Kb(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(p=>function(C){return new ol(Vr(C.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(g){let p;return p=typeof g=="object"?g.value:g,Ml(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(g){const p=!!g.before,_=g.values||[];return new Sa(_,p)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const p=!g.before,_=g.values||[];return new Sa(_,p)}(n.endAt)),CI(e,s,a,r,l,"F",u,f)}function lC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ew(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Vr(n.unaryFilter.field);return st.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Vr(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vr(n.unaryFilter.field);return st.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Vr(n.unaryFilter.field);return st.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return st.create(Vr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return In.create(n.compositeFilter.filters.map(i=>Ew(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function uC(t){return XI[t]}function cC(t){return ZI[t]}function hC(t){return WI[t]}function Or(t){return{fieldPath:t.canonicalString()}}function Vr(t){return It.fromServerFormat(t.fieldPath)}function Tw(t){return t instanceof st?function(n){if(n.op==="=="){if(ov(n.value))return{unaryFilter:{field:Or(n.field),op:"IS_NAN"}};if(av(n.value))return{unaryFilter:{field:Or(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ov(n.value))return{unaryFilter:{field:Or(n.field),op:"IS_NOT_NAN"}};if(av(n.value))return{unaryFilter:{field:Or(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Or(n.field),op:cC(n.op),value:n.value}}}(t):t instanceof In?function(n){const i=n.getFilters().map(s=>Tw(s));return i.length===1?i[0]:{compositeFilter:{op:hC(n.op),filters:i}}}(t):X(54877,{filter:t})}function fC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,i,s,r=W.min(),a=W.min(),l=Dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.yt=e}}function mC(t){const e=oC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.Cn=new gC}addToCollectionParentIndex(e,n){return this.Cn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Ts.min())}updateCollectionGroup(e,n,i){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class gC{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new ft(Ae.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new ft(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ww=41943040;class Yt{static withCacheSize(e){return new Yt(e,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(ww,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ra(0)}static cr(){return new Ra(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="LruGarbageCollector",yC=1048576;function wv([t,e],[n,i]){const s=fe(t,n);return s===0?fe(e,i):s}class _C{constructor(e){this.Ir=e,this.buffer=new ft(wv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();wv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vC{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){G(bv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ba(n)?G(bv,"Ignoring IndexedDB error during garbage collection: ",n):await za(n)}await this.Vr(3e5)})}}class EC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return j.resolve(_h.ce);const i=new _C(n);return this.mr.forEachTarget(e,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Tv)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,r,a,l,u,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(e,s))).next(g=>(i=g,l=Date.now(),this.removeTargets(e,i,n))).next(g=>(r=g,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),Nr()<=he.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(f-u)+`ms
Total Duration: ${f-m}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:g})))}}function TC(t,e){return new EC(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.changes=new fr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?j.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Uo(i.mutation,s,an.empty(),ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,de()).next(()=>i))}getLocalViewOfDocuments(e,n,i=de()){const s=Hs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let a=_o();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Hs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,de()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,s){let r=Ri();const a=Lo(),l=function(){return Lo()}();return n.forEach((u,f)=>{const m=i.get(f.key);s.has(f.key)&&(m===void 0||m.mutation instanceof Ns)?r=r.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),Uo(m.mutation,f,m.mutation.getFieldMask(),ke.now())):a.set(f.key,an.empty())}),this.recalculateAndSaveOverlays(e,r).next(u=>(u.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>l.set(f,new wC(m,a.get(f)??null))),l))}recalculateAndSaveOverlays(e,n){const i=Lo();let s=new Qe((a,l)=>a-l),r=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const f=n.get(u);if(f===null)return;let m=i.get(u)||an.empty();m=l.applyToLocalView(f,m),i.set(u,m);const g=(s.get(l.batchId)||de()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,m=u.value,g=tw();m.forEach(p=>{if(!r.has(p)){const _=lw(n.get(p),i.get(p));_!==null&&g.set(p,_),r=r.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return j.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Op(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):j.resolve(Hs());let l=il,u=r;return a.next(f=>j.forEach(f,(m,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),r.get(m)?j.resolve():this.remoteDocumentCache.getEntry(e,m).next(p=>{u=u.insert(m,p)}))).next(()=>this.populateOverlays(e,f,r)).next(()=>this.computeViews(e,u,f,de())).next(m=>({batchId:l,changes:ew(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(i=>{let s=_o();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const r=n.collectionGroup;let a=_o();return this.indexManager.getCollectionParents(e,r).next(l=>j.forEach(l,u=>{const f=function(g,p){return new hr(p,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next(m=>{m.forEach((g,p)=>{a=a.insert(g,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r,s))).next(a=>{r.forEach((u,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,_t.newInvalidDocument(m)))});let l=_o();return a.forEach((u,f)=>{const m=r.get(u);m!==void 0&&Uo(m.mutation,f,an.empty(),ke.now()),wh(n,f)&&(l=l.insert(u,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hn(s.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:mC(s.bundledQuery),readTime:hn(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.overlays=new Qe(Q.comparator),this.qr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Hs();return j.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.St(e,n,r)}),j.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),j.resolve()}getOverlaysForCollection(e,n,i){const s=Hs(),r=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new Qe((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=r.get(f.largestBatchId);m===null&&(m=Hs(),r=r.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const l=Hs(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>l.set(f,m)),!(l.size()>=s)););return j.resolve(l)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new GI(n,i));let r=this.qr.get(n);r===void 0&&(r=de(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(){this.Qr=new ft(pt.$r),this.Ur=new ft(pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new pt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new pt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new Q(new Ae([])),i=new pt(n,e),s=new pt(n,e+1),r=[];return this.Ur.forEachInRange([i,s],a=>{this.Gr(a),r.push(a.key)}),r}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Q(new Ae([])),i=new pt(n,e),s=new pt(n,e+1);let r=de();return this.Ur.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(e){const n=new pt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Q.comparator(e.key,n.key)||fe(e.Yr,n.Yr)}static Kr(e,n){return fe(e.Yr,n.Yr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ft(pt.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new FI(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new pt(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return j.resolve(a)}lookupMutationBatch(e,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return j.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Ip:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new pt(n,0),s=new pt(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],a=>{const l=this.Xr(a.Yr);r.push(l)}),j.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ft(fe);return n.forEach(s=>{const r=new pt(s,0),a=new pt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],l=>{i=i.add(l.Yr)})}),j.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;Q.isDocumentKey(r)||(r=r.child(""));const a=new pt(new Q(r),0);let l=new ft(fe);return this.Zr.forEachWhile(u=>{const f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(l=l.add(u.Yr)),!0)},a),j.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return j.forEach(n.mutations,s=>{const r=new pt(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new pt(n,0),s=this.Zr.firstAfterOrEqual(i);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.ri=e,this.docs=function(){return new Qe(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return j.resolve(i?i.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let i=Ri();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():_t.newInvalidDocument(s))}),j.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=Ri();const a=n.path,l=new Q(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:m}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||oI(aI(m),i)<=0||(s.has(m.key)||wh(n,m))&&(r=r.insert(m.key,m.mutableCopy()))}return j.resolve(r)}getAllFromCollectionGroup(e,n,i,s){X(9500)}ii(e,n){return j.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new NC(this)}getSize(e){return j.resolve(this.size)}}class NC extends bC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)}),j.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.persistence=e,this.si=new fr(n=>Np(n),Dp),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.oi=0,this._i=new Pp,this.targetCount=0,this.ai=Ra.ur()}forEachTarget(e,n){return this.si.forEach((i,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),j.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ra(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Pr(n),j.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),j.waitFor(r).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return j.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),j.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(e,a))}),j.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return j.resolve(i)}containsKey(e,n){return j.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,n){this.ui={},this.overlays={},this.ci=new _h(0),this.li=!1,this.li=!0,this.hi=new RC,this.referenceDelegate=e(this),this.Pi=new DC(this),this.indexManager=new pC,this.remoteDocumentCache=function(s){return new CC(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new dC(n),this.Ii=new AC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new IC(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){G("MemoryPersistence","Starting transaction:",e);const s=new OC(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(e,n){return j.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class OC extends uI{constructor(e){super(),this.currentSequenceNumber=e}}class Lp{constructor(e){this.persistence=e,this.Ri=new Pp,this.Vi=null}static mi(e){return new Lp(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),j.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,i=>{const s=Q.fromPath(i);return this.gi(e,s).next(r=>{r||n.removeEntry(s,W.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class zc{constructor(e,n){this.persistence=e,this.pi=new fr(i=>fI(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=TC(this,n)}static mi(e,n){return new zc(e,n)}Ei(){}di(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return j.forEach(this.pi,(i,s)=>this.br(e,i,s).next(r=>r?j.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(i++,r.removeEntry(a,W.min()))})).next(()=>r.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),j.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qu(e.data.value)),n}br(e,n,i){return j.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return j.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=de(),s=de();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Up(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return C2()?8:cI(Lt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const r={result:null};return this.ys(e,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ws(e,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new VC;return this.Ss(e,n,a).next(l=>{if(r.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>r.result)}bs(e,n,i,s){return i.documentReadCount<this.fs?(Nr()<=he.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Dr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Nr()<=he.DEBUG&&G("QueryEngine","Query:",Dr(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Nr()<=he.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Dr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(n))):j.resolve())}ys(e,n){if(hv(n))return j.resolve(null);let i=zn(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Pc(n,null,"F"),i=zn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const a=de(...r);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const f=this.Ds(n,l);return this.Cs(n,f,a,u.readTime)?this.ys(e,Pc(n,null,"F")):this.vs(e,f,n,u)}))})))}ws(e,n,i,s){return hv(n)||s.isEqual(W.min())?j.resolve(null):this.ps.getDocuments(e,i).next(r=>{const a=this.Ds(n,r);return this.Cs(n,a,i,s)?j.resolve(null):(Nr()<=he.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Dr(n)),this.vs(e,a,n,rI(s,il)).next(l=>l))})}Ds(e,n){let i=new ft(Wb(e));return n.forEach((s,r)=>{wh(e,r)&&(i=i.add(r))}),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(e,n,i){return Nr()<=he.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Dr(n)),this.ps.getDocumentsMatchingQuery(e,n,Ts.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="LocalStore",kC=3e8;class jC{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Qe(fe),this.xs=new fr(r=>Np(r),Dp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function PC(t,e,n,i){return new jC(t,e,n,i)}async function Aw(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let u=de();for(const f of s){a.push(f.batchId);for(const m of f.mutations)u=u.add(m.key)}for(const f of r){l.push(f.batchId);for(const m of f.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(i,u).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:l}))})})}function LC(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,f,m){const g=f.batch,p=g.keys();let _=j.resolve();return p.forEach(C=>{_=_.next(()=>m.getEntry(u,C)).next(V=>{const D=f.docVersions.get(C);_e(D!==null,48541),V.version.compareTo(D)<0&&(g.applyToRemoteDocument(V,f),V.isValidDocument()&&(V.setReadTime(f.commitVersion),m.addEntry(V)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,e,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=de();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function xw(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function UC(t,e){const n=ne(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((m,g)=>{const p=s.get(g);if(!p)return;l.push(n.Pi.removeMatchingKeys(r,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(r,m.addedDocuments,g)));let _=p.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(Dt.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):m.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(m.resumeToken,i)),s=s.insert(g,_),function(V,D,w){return V.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=kC?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,_,m)&&l.push(n.Pi.updateTargetData(r,_))});let u=Ri(),f=de();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,m))}),l.push(zC(r,a,e.documentUpdates).next(m=>{u=m.ks,f=m.qs})),!i.isEqual(W.min())){const m=n.Pi.getLastRemoteSnapshotVersion(r).next(g=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(m)}return j.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,f)).next(()=>u)}).then(r=>(n.Ms=s,r))}function zC(t,e,n){let i=de(),s=de();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let a=Ri();return n.forEach((l,u)=>{const f=r.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(W.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):G(zp,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{ks:a,qs:s}})}function BC(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Ip),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function qC(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,e).next(r=>r?(s=r,j.resolve(s)):n.Pi.allocateTargetId(i).next(a=>(s=new is(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function fm(t,e,n){const i=ne(t),s=i.Ms.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ba(a))throw a;G(zp,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function Sv(t,e,n){const i=ne(t);let s=W.min(),r=de();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,f,m){const g=ne(u),p=g.xs.get(m);return p!==void 0?j.resolve(g.Ms.get(p)):g.Pi.getTargetData(f,m)}(i,a,zn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?s:W.min(),n?r:de())).next(l=>(HC(i,DI(e),l),{documents:l,Qs:r})))}function HC(t,e,n){let i=t.Os.get(e)||W.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.Os.set(e,i)}class Av{constructor(){this.activeTargetIds=PI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FC{constructor(){this.Mo=new Av,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Av,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="ConnectivityMonitor";class Rv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){G(xv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){G(xv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu=null;function dm(){return Nu===null?Nu=function(){return 268435456+Math.round(2147483648*Math.random())}():Nu++,"0x"+Nu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="RestConnection",QC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Mc?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,r){const a=dm(),l=this.zo(e,n.toUriEncodedString());G(Xf,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,r);const{host:f}=new URL(l),m=Pa(f);return this.Jo(e,l,u,i,m).then(g=>(G(Xf,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Ea(Xf,`RPC '${e}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(e,n,i,s,r,a){return this.Go(e,n,i,s,r)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ua}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}zo(e,n){const i=QC[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class $C extends KC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,r){const a=dm();return new Promise((l,u)=>{const f=new xb;f.setWithCredentials(!0),f.listenOnce(Rb.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Gu.NO_ERROR:const g=f.getResponseJson();G(Mt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),l(g);break;case Gu.TIMEOUT:G(Mt,`RPC '${e}' ${a} timed out`),u(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case Gu.HTTP_ERROR:const p=f.getStatus();if(G(Mt,`RPC '${e}' ${a} failed with status:`,p,"response text:",f.getResponseText()),p>0){let _=f.getResponseJson();Array.isArray(_)&&(_=_[0]);const C=_==null?void 0:_.error;if(C&&C.status&&C.message){const V=function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(E)>=0?E:k.UNKNOWN}(C.status);u(new z(V,C.message))}else u(new z(k.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new z(k.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{G(Mt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);G(Mt,`RPC '${e}' ${a} sending request:`,s),f.send(n,"POST",m,i,15)})}T_(e,n,i){const s=dm(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Nb(),l=Cb(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const m=r.join("");G(Mt,`Creating RPC '${e}' stream ${s}: ${m}`,u);const g=a.createWebChannel(m,u);this.I_(g);let p=!1,_=!1;const C=new YC({Yo:D=>{_?G(Mt,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(p||(G(Mt,`Opening RPC '${e}' stream ${s} transport.`),g.open(),p=!0),G(Mt,`RPC '${e}' stream ${s} sending:`,D),g.send(D))},Zo:()=>g.close()}),V=(D,w,E)=>{D.listen(w,x=>{try{E(x)}catch(O){setTimeout(()=>{throw O},0)}})};return V(g,yo.EventType.OPEN,()=>{_||(G(Mt,`RPC '${e}' stream ${s} transport opened.`),C.o_())}),V(g,yo.EventType.CLOSE,()=>{_||(_=!0,G(Mt,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(g))}),V(g,yo.EventType.ERROR,D=>{_||(_=!0,Ea(Mt,`RPC '${e}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),C.a_(new z(k.UNAVAILABLE,"The operation could not be completed")))}),V(g,yo.EventType.MESSAGE,D=>{var w;if(!_){const E=D.data[0];_e(!!E,16349);const x=E,O=(x==null?void 0:x.error)||((w=x[0])==null?void 0:w.error);if(O){G(Mt,`RPC '${e}' stream ${s} received error:`,O);const U=O.status;let H=function(b){const S=nt[b];if(S!==void 0)return fw(S)}(U),T=O.message;H===void 0&&(H=k.INTERNAL,T="Unknown error status: "+U+" with message "+O.message),_=!0,C.a_(new z(H,T)),g.close()}else G(Mt,`RPC '${e}' stream ${s} received:`,E),C.u_(E)}}),V(l,Ib.STAT_EVENT,D=>{D.stat===tm.PROXY?G(Mt,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===tm.NOPROXY&&G(Mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Zf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(t){return new JI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n,i=1e3,s=1.5,r=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="PersistentStream";class Rw{constructor(e,n,i,s,r,a,l,u){this.Mi=e,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Bp(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(xi(n.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{e(()=>{const s=new z(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return G(Iv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(G(Iv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XC extends Rw{constructor(e,n,i,s,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=iC(this.serializer,e),i=function(r){if(!("targetChange"in r))return W.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?W.min():a.readTime?hn(a.readTime):W.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=hm(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=om(u)?{documents:rC(r,u)}:{query:aC(r,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=pw(r,a.resumeToken);const f=um(r,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(W.min())>0){l.readTime=Lc(r,a.snapshotVersion.toTimestamp());const f=um(r,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);const i=lC(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=hm(this.serializer),n.removeTarget=e,this.q_(n)}}class ZC extends Rw{constructor(e,n,i,s,r,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=sC(e.writeResults,e.commitTime),i=hn(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=hm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>vw(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{}class JC extends WC{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Go(e,cm(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new z(k.UNKNOWN,r.toString())})}Ho(e,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,cm(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class eN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xi(n),this.aa=!1):G("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr="RemoteStore";class tN{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{dr(this)&&(G(sr,"Restarting streams for network reachability change."),await async function(u){const f=ne(u);f.Ea.add(4),await Pl(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Nh(f)}(this))})}),this.Ra=new eN(i,s)}}async function Nh(t){if(dr(t))for(const e of t.da)await e(!0)}async function Pl(t){for(const e of t.da)await e(!1)}function Iw(t,e){const n=ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gp(n)?Fp(n):qa(n).O_()&&Hp(n,e))}function qp(t,e){const n=ne(t),i=qa(n);n.Ia.delete(e),i.O_()&&Cw(n,e),n.Ia.size===0&&(i.O_()?i.L_():dr(n)&&n.Ra.set("Unknown"))}function Hp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qa(t).Y_(e)}function Cw(t,e){t.Va.Ue(e),qa(t).Z_(e)}function Fp(t){t.Va=new $I({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),qa(t).start(),t.Ra.ua()}function Gp(t){return dr(t)&&!qa(t).x_()&&t.Ia.size>0}function dr(t){return ne(t).Ea.size===0}function Nw(t){t.Va=void 0}async function nN(t){t.Ra.set("Online")}async function iN(t){t.Ia.forEach((e,n)=>{Hp(t,e)})}async function sN(t,e){Nw(t),Gp(t)?(t.Ra.ha(e),Fp(t)):t.Ra.set("Unknown")}async function rN(t,e,n){if(t.Ra.set("Online"),e instanceof mw&&e.state===2&&e.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(i){G(sr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Bc(t,i)}else if(e instanceof $u?t.Va.Ze(e):e instanceof dw?t.Va.st(e):t.Va.tt(e),!n.isEqual(W.min()))try{const i=await xw(t.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.Va.Tt(a);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const m=r.Ia.get(f);m&&r.Ia.set(f,m.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,f)=>{const m=r.Ia.get(u);if(!m)return;r.Ia.set(u,m.withResumeToken(Dt.EMPTY_BYTE_STRING,m.snapshotVersion)),Cw(r,u);const g=new is(m.target,u,f,m.sequenceNumber);Hp(r,g)}),r.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){G(sr,"Failed to raise snapshot:",i),await Bc(t,i)}}async function Bc(t,e,n){if(!Ba(e))throw e;t.Ea.add(1),await Pl(t),t.Ra.set("Offline"),n||(n=()=>xw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(sr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Nh(t)})}function Dw(t,e){return e().catch(n=>Bc(t,n,e))}async function Dh(t){const e=ne(t),n=As(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ip;for(;aN(e);)try{const s=await BC(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,oN(e,s)}catch(s){await Bc(e,s)}Ow(e)&&Vw(e)}function aN(t){return dr(t)&&t.Ta.length<10}function oN(t,e){t.Ta.push(e);const n=As(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Ow(t){return dr(t)&&!As(t).x_()&&t.Ta.length>0}function Vw(t){As(t).start()}async function lN(t){As(t).ra()}async function uN(t){const e=As(t);for(const n of t.Ta)e.ea(n.mutations)}async function cN(t,e,n){const i=t.Ta.shift(),s=Mp.from(i,e,n);await Dw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Dh(t)}async function hN(t,e){e&&As(t).X_&&await async function(i,s){if(function(a){return hw(a)&&a!==k.ABORTED}(s.code)){const r=i.Ta.shift();As(i).B_(),await Dw(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Dh(i)}}(t,e),Ow(t)&&Vw(t)}async function Cv(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),G(sr,"RemoteStore received new credentials");const i=dr(n);n.Ea.add(3),await Pl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Nh(n)}async function fN(t,e){const n=ne(t);e?(n.Ea.delete(2),await Nh(n)):e||(n.Ea.add(2),await Pl(n),n.Ra.set("Unknown"))}function qa(t){return t.ma||(t.ma=function(n,i,s){const r=ne(n);return r.sa(),new XC(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:nN.bind(null,t),t_:iN.bind(null,t),r_:sN.bind(null,t),H_:rN.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Gp(t)?Fp(t):t.Ra.set("Unknown")):(await t.ma.stop(),Nw(t))})),t.ma}function As(t){return t.fa||(t.fa=function(n,i,s){const r=ne(n);return r.sa(),new ZC(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:lN.bind(null,t),r_:hN.bind(null,t),ta:uN.bind(null,t),na:cN.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Dh(t)):(await t.fa.stop(),t.Ta.length>0&&(G(sr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,r){const a=Date.now()+i,l=new Qp(e,n,a,s,r);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(t,e){if(xi("AsyncQueue",`${e}: ${t}`),Ba(t))return new z(k.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{static emptySet(e){return new sa(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=_o(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new sa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(){this.ga=new Qe(Q.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ia{constructor(e,n,i,s,r,a,l,u,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ia(e,n,sa.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class mN{constructor(){this.queries=Dv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=ne(n),r=s.queries;s.queries=Dv(),r.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new z(k.ABORTED,"Firestore shutting down"))}}function Dv(){return new fr(t=>Zb(t),bh)}async function Yp(t,e){const n=ne(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.ba()&&e.Da()&&(i=2):(r=new dN,i=e.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Kp(a,`Initialization of query '${Dr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,r),r.Sa.push(e),e.va(n.onlineState),r.wa&&e.Fa(r.wa)&&Xp(n)}async function $p(t,e){const n=ne(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const a=r.Sa.indexOf(e);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?s=e.Da()?0:1:!r.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function pN(t,e){const n=ne(t);let i=!1;for(const s of e){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.Sa)l.Fa(s)&&(i=!0);a.wa=s}}i&&Xp(n)}function gN(t,e,n){const i=ne(t),s=i.queries.get(e);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(e)}function Xp(t){t.Ca.forEach(e=>{e.next()})}var mm,Ov;(Ov=mm||(mm={})).Ma="default",Ov.Cache="cache";class Zp{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Ia(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.key=e}}class kw{constructor(e){this.key=e}}class yN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=de(),this.mutatedKeys=de(),this.eu=Wb(e),this.tu=new sa(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Nv,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,g)=>{const p=s.get(m),_=wh(this.query,g)?g:null,C=!!p&&this.mutatedKeys.has(p.key),V=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let D=!1;p&&_?p.data.isEqual(_.data)?C!==V&&(i.track({type:3,doc:_}),D=!0):this.su(p,_)||(i.track({type:2,doc:_}),D=!0,(u&&this.eu(_,u)>0||f&&this.eu(_,f)<0)&&(l=!0)):!p&&_?(i.track({type:0,doc:_}),D=!0):p&&!_&&(i.track({type:1,doc:p}),D=!0,(u||f)&&(l=!0)),D&&(_?(a=a.add(_),r=V?r.add(m):r.delete(m)):(a=a.delete(m),r=r.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),r=r.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:l,mutatedKeys:r}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(_,C){const V=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:D})}};return V(_)-V(C)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,f=u!==this.Za;return this.Za=u,a.length!==0||f?{snapshot:new Ia(this.query,e.tu,r,a,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Nv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=de(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new kw(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new Mw(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=de();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ia.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Wp="SyncEngine";class _N{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class vN{constructor(e){this.key=e,this.hu=!1}}class EN{constructor(e,n,i,s,r,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new fr(l=>Zb(l),bh),this.Iu=new Map,this.Eu=new Set,this.du=new Qe(Q.comparator),this.Au=new Map,this.Ru=new Pp,this.Vu={},this.mu=new Map,this.fu=Ra.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TN(t,e,n=!0){const i=Bw(t);let s;const r=i.Tu.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await jw(i,e,n,!0),s}async function bN(t,e){const n=Bw(t);await jw(n,e,!0,!1)}async function jw(t,e,n,i){const s=await qC(t.localStore,zn(e)),r=s.targetId,a=t.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await wN(t,e,r,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Iw(t.remoteStore,s),l}async function wN(t,e,n,i,s){t.pu=(g,p,_)=>async function(V,D,w,E){let x=D.view.ru(w);x.Cs&&(x=await Sv(V.localStore,D.query,!1).then(({documents:T})=>D.view.ru(T,x)));const O=E&&E.targetChanges.get(D.targetId),U=E&&E.targetMismatches.get(D.targetId)!=null,H=D.view.applyChanges(x,V.isPrimaryClient,O,U);return Mv(V,D.targetId,H.au),H.snapshot}(t,g,p,_);const r=await Sv(t.localStore,e,!0),a=new yN(e,r.Qs),l=a.ru(r.documents),u=jl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),f=a.applyChanges(l,t.isPrimaryClient,u);Mv(t,n,f.au);const m=new _N(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function SN(t,e,n){const i=ne(t),s=i.Tu.get(e),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(a=>!bh(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await fm(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&qp(i.remoteStore,s.targetId),pm(i,s.targetId)}).catch(za)):(pm(i,s.targetId),await fm(i.localStore,s.targetId,!0))}async function AN(t,e){const n=ne(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),qp(n.remoteStore,i.targetId))}async function xN(t,e,n){const i=VN(t);try{const s=await function(a,l){const u=ne(a),f=ke.now(),m=l.reduce((_,C)=>_.add(C.key),de());let g,p;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let C=Ri(),V=de();return u.Ns.getEntries(_,m).next(D=>{C=D,C.forEach((w,E)=>{E.isValidDocument()||(V=V.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,C)).next(D=>{g=D;const w=[];for(const E of l){const x=HI(E,g.get(E.key).overlayedDocument);x!=null&&w.push(new Ns(E.key,x,Fb(x.value.mapValue),Ct.exists(!0)))}return u.mutationQueue.addMutationBatch(_,f,w,l)}).next(D=>{p=D;const w=D.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(_,D.batchId,w)})}).then(()=>({batchId:p.batchId,changes:ew(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let f=a.Vu[a.currentUser.toKey()];f||(f=new Qe(fe)),f=f.insert(l,u),a.Vu[a.currentUser.toKey()]=f}(i,s.batchId,n),await Ll(i,s.changes),await Dh(i.remoteStore)}catch(s){const r=Kp(s,"Failed to persist write");n.reject(r)}}async function Pw(t,e){const n=ne(t);try{const i=await UC(n.localStore,e);e.targetChanges.forEach((s,r)=>{const a=n.Au.get(r);a&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?_e(a.hu,14607):s.removedDocuments.size>0&&(_e(a.hu,42227),a.hu=!1))}),await Ll(n,i,e)}catch(i){await za(i)}}function Vv(t,e,n){const i=ne(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=ne(a);u.onlineState=l;let f=!1;u.queries.forEach((m,g)=>{for(const p of g.Sa)p.va(l)&&(f=!0)}),f&&Xp(u)}(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function RN(t,e,n){const i=ne(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),r=s&&s.key;if(r){let a=new Qe(Q.comparator);a=a.insert(r,_t.newNoDocument(r,W.min()));const l=de().add(r),u=new Ih(W.min(),new Map,new Qe(fe),a,l);await Pw(i,u),i.du=i.du.remove(r),i.Au.delete(e),Jp(i)}else await fm(i.localStore,e,!1).then(()=>pm(i,e,n)).catch(za)}async function IN(t,e){const n=ne(t),i=e.batch.batchId;try{const s=await LC(n.localStore,e);Uw(n,i,null),Lw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ll(n,s)}catch(s){await za(s)}}async function CN(t,e,n){const i=ne(t);try{const s=await function(a,l){const u=ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return u.mutationQueue.lookupMutationBatch(f,l).next(g=>(_e(g!==null,37113),m=g.keys(),u.mutationQueue.removeMutationBatch(f,g))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>u.localDocuments.getDocuments(f,m))})}(i.localStore,e);Uw(i,e,n),Lw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ll(i,s)}catch(s){await za(s)}}function Lw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Uw(t,e,n){const i=ne(t);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function pm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||zw(t,i)})}function zw(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(qp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Jp(t))}function Mv(t,e,n){for(const i of n)i instanceof Mw?(t.Ru.addReference(i.key,e),NN(t,i)):i instanceof kw?(G(Wp,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||zw(t,i.key)):X(19791,{wu:i})}function NN(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(G(Wp,"New document in limbo: "+n),t.Eu.add(i),Jp(t))}function Jp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Q(Ae.fromString(e)),i=t.fu.next();t.Au.set(i,new vN(n)),t.du=t.du.insert(n,i),Iw(t.remoteStore,new is(zn(Th(n.path)),i,"TargetPurposeLimboResolution",_h.ce))}}async function Ll(t,e,n){const i=ne(t),s=[],r=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(f){s.push(f);const g=Up.As(u.targetId,f);r.push(g)}}))}),await Promise.all(a),i.Pu.H_(s),await async function(u,f){const m=ne(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>j.forEach(f,p=>j.forEach(p.Es,_=>m.persistence.referenceDelegate.addReference(g,p.targetId,_)).next(()=>j.forEach(p.ds,_=>m.persistence.referenceDelegate.removeReference(g,p.targetId,_)))))}catch(g){if(!Ba(g))throw g;G(zp,"Failed to update sequence numbers: "+g)}for(const g of f){const p=g.targetId;if(!g.fromCache){const _=m.Ms.get(p),C=_.snapshotVersion,V=_.withLastLimboFreeSnapshotVersion(C);m.Ms=m.Ms.insert(p,V)}}}(i.localStore,r))}async function DN(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){G(Wp,"User change. New user:",e.toKey());const i=await Aw(n.localStore,e);n.currentUser=e,function(r,a){r.mu.forEach(l=>{l.forEach(u=>{u.reject(new z(k.CANCELLED,a))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ll(n,i.Ls)}}function ON(t,e){const n=ne(t),i=n.Au.get(e);if(i&&i.hu)return de().add(i.key);{let s=de();const r=n.Iu.get(e);if(!r)return s;for(const a of r){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function Bw(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ON.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RN.bind(null,e),e.Pu.H_=pN.bind(null,e.eventManager),e.Pu.yu=gN.bind(null,e.eventManager),e}function VN(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CN.bind(null,e),e}class qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ch(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return PC(this.persistence,new MC,e.initialUser,this.serializer)}Cu(e){return new Sw(Lp.mi,this.serializer)}Du(e){return new FC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qc.provider={build:()=>new qc};class MN extends qc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){_e(this.persistence.referenceDelegate instanceof zc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new vC(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new Sw(i=>zc.mi(i,n),this.serializer)}}class gm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Vv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=DN.bind(null,this.syncEngine),await fN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mN}()}createDatastore(e){const n=Ch(e.databaseInfo.databaseId),i=function(r){return new $C(r)}(e.databaseInfo);return function(r,a,l,u){return new JC(r,a,l,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,r,a,l){return new tN(i,s,r,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Vv(this.syncEngine,n,0),function(){return Rv.v()?new Rv:new GC}())}createSyncEngine(e,n){return function(s,r,a,l,u,f,m){const g=new EN(s,r,a,l,u,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const r=ne(s);G(sr,"RemoteStore shutting down."),r.Ea.add(5),await Pl(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}gm.provider={build:()=>new gm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,r){const a=ne(s),l={documents:r.map(g=>Uc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,Ae.emptyPath(),l,r.length),f=new Map;u.forEach(g=>{const p=nC(a.serializer,g);f.set(p.key.toString(),p)});const m=[];return r.forEach(g=>{const p=f.get(g.toString());_e(!!p,55234,{key:g}),m.push(p)}),m}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const s=Q.fromPath(i);this.mutations.push(new cw(s,this.precondition(s)))}),await async function(i,s){const r=ne(i),a={writes:s.map(l=>vw(r.serializer,l))};await r.Go("Commit",r.serializer.databaseId,Ae.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X(50498,{Gu:e.constructor.name});n=W.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new z(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(W.min())?Ct.exists(!1):Ct.updateTime(n):Ct.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(W.min()))throw new z(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ct.updateTime(n)}return Ct.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n,i,s,r){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new Bp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new kN(this.datastore),n=this.Hu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Yu(s)}))}).catch(i=>{this.Yu(i)})})}Hu(e){try{const n=this.updateFunction(e);return!Ml(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!hw(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="FirestoreClient";class PN{constructor(e,n,i,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=kt.UNAUTHENTICATED,this.clientId=Rp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{G(xs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(G(xs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Kp(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Wf(t,e){t.asyncQueue.verifyOperationInProgress(),G(xs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await Aw(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function kv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await LN(t);G(xs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Cv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Cv(e.remoteStore,s)),t._onlineComponents=e}async function LN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(xs,"Using user provided OfflineComponentProvider");try{await Wf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===k.FAILED_PRECONDITION||s.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ea("Error using user provided cache. Falling back to memory cache: "+n),await Wf(t,new qc)}}else G(xs,"Using default OfflineComponentProvider"),await Wf(t,new MN(void 0));return t._offlineComponents}async function tg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(xs,"Using user provided OnlineComponentProvider"),await kv(t,t._uninitializedComponentsProvider._online)):(G(xs,"Using default OnlineComponentProvider"),await kv(t,new gm))),t._onlineComponents}function UN(t){return tg(t).then(e=>e.syncEngine)}function zN(t){return tg(t).then(e=>e.datastore)}async function Hc(t){const e=await tg(t),n=e.eventManager;return n.onListen=TN.bind(null,e.syncEngine),n.onUnlisten=SN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AN.bind(null,e.syncEngine),n}function BN(t,e,n={}){const i=new Un;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,f){const m=new eg({next:p=>{m.Nu(),a.enqueueAndForget(()=>$p(r,g));const _=p.docs.has(l);!_&&p.fromCache?f.reject(new z(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&u&&u.source==="server"?f.reject(new z(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(p)},error:p=>f.reject(p)}),g=new Zp(Th(l.path),m,{includeMetadataChanges:!0,qa:!0});return Yp(r,g)}(await Hc(t),t.asyncQueue,e,n,i)),i.promise}function qN(t,e,n={}){const i=new Un;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,f){const m=new eg({next:p=>{m.Nu(),a.enqueueAndForget(()=>$p(r,g)),p.fromCache&&u.source==="server"?f.reject(new z(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(p)},error:p=>f.reject(p)}),g=new Zp(l,m,{includeMetadataChanges:!0,qa:!0});return Yp(r,g)}(await Hc(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="firestore.googleapis.com",Pv=!0;class Lv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Hw,this.ssl=Pv}else this.host=e.host,this.ssl=e.ssl??Pv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ww;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yC)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qw(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oh{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new KR;switch(i.type){case"firstParty":return new ZR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=jv.get(n);i&&(G("ComponentProvider","Removing Datastore"),jv.delete(n),i.terminate())}(this),Promise.resolve()}}function HN(t,e,n,i={}){var f;t=Ht(t,Oh);const s=Pa(e),r=t._getSettings(),a={...r,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(yb(`https://${l}`),_b("Firestore",!0)),r.host!==Hw&&r.host!==l&&Ea("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:l,ssl:s,emulatorOptions:i};if(!Si(u,a)&&(t._setSettings(u),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=kt.MOCK_USER;else{m=E2(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new kt(p)}t._authCredentials=new YR(new Ob(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Xn(this.firestore,e,this._query)}}class Ge{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ge(this.firestore,e,this._key)}toJSON(){return{type:Ge._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Vl(n,Ge._jsonSchema))return new Ge(e,i||null,new Q(Ae.fromString(n.referencePath)))}}Ge._jsonSchemaVersion="firestore/documentReference/1.0",Ge._jsonSchema={type:rt("string",Ge._jsonSchemaVersion),referencePath:rt("string")};class gs extends Xn{constructor(e,n,i){super(e,n,Th(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new Q(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function Vh(t,e,...n){if(t=Be(t),Vb("collection","path",e),t instanceof Oh){const i=Ae.fromString(e,...n);return W_(i),new gs(t,null,i)}{if(!(t instanceof Ge||t instanceof gs))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ae.fromString(e,...n));return W_(i),new gs(t.firestore,null,i)}}function St(t,e,...n){if(t=Be(t),arguments.length===1&&(e=Rp.newId()),Vb("doc","path",e),t instanceof Oh){const i=Ae.fromString(e,...n);return Z_(i),new Ge(t,null,new Q(i))}{if(!(t instanceof Ge||t instanceof gs))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ae.fromString(e,...n));return Z_(i),new Ge(t.firestore,t instanceof gs?t.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="AsyncQueue";class zv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Bp(this,"async_queue_retry"),this._c=()=>{const i=Zf();i&&G(Uv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Zf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Zf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Un;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ba(e))throw e;G(Uv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,xi("INTERNAL UNHANDLED ERROR: ",Bv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Qp.createAndSchedule(this,e,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&X(47125,{Pc:Bv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Bv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Qn extends Oh{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new zv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zv(e),this._firestoreClient=void 0,await e}}}function FN(t,e){const n=typeof t=="object"?t:bb(),i=typeof t=="string"?t:Mc,s=Ap(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=_2("firestore");r&&HN(s,...r)}return s}function Ul(t){if(t._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GN(t),t._firestoreClient}function GN(t){var i,s,r;const e=t._freezeSettings(),n=function(l,u,f,m){return new pI(l,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,qw(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((r=e.localCache)!=null&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new PN(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rn(Dt.fromBase64String(e))}catch(n){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rn(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vl(e,rn._jsonSchema))return rn.fromBase64String(e.bytes)}}rn._jsonSchemaVersion="firestore/bytes/1.0",rn._jsonSchema={type:rt("string",rn._jsonSchemaVersion),bytes:rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function QN(){return new Ha(im)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bn._jsonSchemaVersion}}static fromJSON(e){if(Vl(e,Bn._jsonSchema))return new Bn(e.latitude,e.longitude)}}Bn._jsonSchemaVersion="firestore/geoPoint/1.0",Bn._jsonSchema={type:rt("string",Bn._jsonSchemaVersion),latitude:rt("number"),longitude:rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:qn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vl(e,qn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new qn(e.vectorValues);throw new z(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qn._jsonSchemaVersion="firestore/vectorValue/1.0",qn._jsonSchema={type:rt("string",qn._jsonSchemaVersion),vectorValues:rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=/^__.*__$/;class YN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new kl(e,this.data,n,this.fieldTransforms)}}class Fw{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Gw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class Mh{constructor(e,n,i,s,r,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Mh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Fc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Gw(this.Ac)&&KN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $N{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Ch(e)}Cc(e,n,i,s=!1){return new Mh({Ac:e,methodName:n,Dc:i,path:It.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fa(t){const e=t._freezeSettings(),n=Ch(t._databaseId);return new $N(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ng(t,e,n,i,s,r={}){const a=t.Cc(r.merge||r.mergeFields?2:0,e,n,s);og("Data must be an object, but it was:",a,i);const l=Xw(i,a);let u,f;if(r.merge)u=new an(a.fieldMask),f=a.fieldTransforms;else if(r.mergeFields){const m=[];for(const g of r.mergeFields){const p=ym(e,g,n);if(!a.contains(p))throw new z(k.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Ww(m,p)||m.push(p)}u=new an(m),f=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,f=a.fieldTransforms;return new YN(new Bt(l),u,f)}class kh extends mr{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kh}}function Qw(t,e,n){return new Mh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ig extends mr{_toFieldTransform(e){return new Ah(e.path,new ll)}isEqual(e){return e instanceof ig}}class sg extends mr{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Qw(this,e,!0),i=this.vc.map(r=>pr(r,n)),s=new Aa(i);return new Ah(e.path,s)}isEqual(e){return e instanceof sg&&Si(this.vc,e.vc)}}class rg extends mr{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Qw(this,e,!0),i=this.vc.map(r=>pr(r,n)),s=new xa(i);return new Ah(e.path,s)}isEqual(e){return e instanceof rg&&Si(this.vc,e.vc)}}class ag extends mr{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new ul(e.serializer,iw(e.serializer,this.Fc));return new Ah(e.path,n)}isEqual(e){return e instanceof ag&&this.Fc===e.Fc}}function Kw(t,e,n,i){const s=t.Cc(1,e,n);og("Data must be an object, but it was:",s,i);const r=[],a=Bt.empty();Cs(i,(u,f)=>{const m=lg(e,u,n);f=Be(f);const g=s.yc(m);if(f instanceof kh)r.push(m);else{const p=pr(f,g);p!=null&&(r.push(m),a.set(m,p))}});const l=new an(r);return new Fw(a,l,s.fieldTransforms)}function Yw(t,e,n,i,s,r){const a=t.Cc(1,e,n),l=[ym(e,i,n)],u=[s];if(r.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<r.length;p+=2)l.push(ym(e,r[p])),u.push(r[p+1]);const f=[],m=Bt.empty();for(let p=l.length-1;p>=0;--p)if(!Ww(f,l[p])){const _=l[p];let C=u[p];C=Be(C);const V=a.yc(_);if(C instanceof kh)f.push(_);else{const D=pr(C,V);D!=null&&(f.push(_),m.set(_,D))}}const g=new an(f);return new Fw(m,g,a.fieldTransforms)}function $w(t,e,n,i=!1){return pr(n,t.Cc(i?4:3,e))}function pr(t,e){if(Zw(t=Be(t)))return og("Unsupported field value:",e,t),Xw(t,e);if(t instanceof mr)return function(i,s){if(!Gw(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let u=pr(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(t,e)}return function(i,s){if((i=Be(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return iw(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=ke.fromDate(i);return{timestampValue:Lc(s.serializer,r)}}if(i instanceof ke){const r=new ke(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Lc(s.serializer,r)}}if(i instanceof Bn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof rn)return{bytesValue:pw(s.serializer,i._byteString)};if(i instanceof Ge){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:jp(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof qn)return function(a,l){return{mapValue:{fields:{[qb]:{stringValue:Hb},[kc]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return Vp(l.serializer,f)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${yh(i)}`)}(t,e)}function Xw(t,e){const n={};return jb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(t,(i,s)=>{const r=pr(s,e.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function Zw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof Bn||t instanceof rn||t instanceof Ge||t instanceof mr||t instanceof qn)}function og(t,e,n){if(!Zw(n)||!Mb(n)){const i=yh(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function ym(t,e,n){if((e=Be(e))instanceof Ha)return e._internalPath;if(typeof e=="string")return lg(t,e);throw Fc("Field path arguments must be of type string or ",t,!1,void 0,n)}const XN=new RegExp("[~\\*/\\[\\]]");function lg(t,e,n){if(e.search(XN)>=0)throw Fc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ha(...e.split("."))._internalPath}catch{throw Fc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fc(t,e,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new z(k.INVALID_ARGUMENT,l+t+u)}function Ww(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZN extends cl{data(){return super.data()}}function jh(t,e){return typeof e=="string"?lg(t,e):e instanceof Ha?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class Ph extends ug{}function Gc(t,e,...n){let i=[];e instanceof ug&&i.push(e),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof cg).length,l=r.filter(u=>u instanceof Lh).length;if(a>1||a>0&&l>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Lh extends Ph{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Lh(e,n,i)}_apply(e){const n=this._parse(e);return nS(e._query,n),new Xn(e.firestore,e.converter,lm(e._query,n))}_parse(e){const n=Fa(e.firestore);return function(r,a,l,u,f,m,g){let p;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Fv(g,m);const C=[];for(const V of g)C.push(Hv(u,r,V));p={arrayValue:{values:C}}}else p=Hv(u,r,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Fv(g,m),p=$w(l,a,g,m==="in"||m==="not-in");return st.create(f,m,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function eS(t,e,n){const i=e,s=jh("where",t);return Lh._create(s,i,n)}class cg extends ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:In.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,r){let a=s;const l=r.getFlattenedFilters();for(const u of l)nS(a,u),a=lm(a,u)}(e._query,n),new Xn(e.firestore,e.converter,lm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hg extends Ph{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hg(e,n)}_apply(e){const n=function(s,r,a){if(s.startAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ol(r,a)}(e._query,this._field,this._direction);return new Xn(e.firestore,e.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new hr(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function _m(t,e="asc"){const n=e,i=jh("orderBy",t);return hg._create(i,n)}class fg extends Ph{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new fg(e,n,i)}_apply(e){return new Xn(e.firestore,e.converter,Pc(e._query,this._limit,this._limitType))}}function vm(t){return sI("limit",t),fg._create("limit",t,"F")}class dg extends Ph{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new dg(e,n,i)}_apply(e){const n=WN(e,this.type,this._docOrFields,this._inclusive);return new Xn(e.firestore,e.converter,function(s,r){return new hr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,r,s.endAt)}(e._query,n))}}function tS(...t){return dg._create("startAfter",t,!1)}function WN(t,e,n,i){if(n[0]=Be(n[0]),n[0]instanceof cl)return function(r,a,l,u,f){if(!u)throw new z(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const m=[];for(const g of ia(r))if(g.field.isKeyField())m.push(jc(a,u.key));else{const p=u.data.field(g.field);if(vh(p))throw new z(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const _=g.field.canonicalString();throw new z(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}m.push(p)}return new Sa(m,f)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const s=Fa(t.firestore);return function(a,l,u,f,m,g){const p=a.explicitOrderBy;if(m.length>p.length)throw new z(k.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let C=0;C<m.length;C++){const V=m[C];if(p[C].field.isKeyField()){if(typeof V!="string")throw new z(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof V}`);if(!Op(a)&&V.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${V}' contains a slash.`);const D=a.path.child(Ae.fromString(V));if(!Q.isDocumentKey(D))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);const w=new Q(D);_.push(jc(l,w))}else{const D=$w(u,f,V);_.push(D)}}return new Sa(_,g)}(t._query,t.firestore._databaseId,s,e,n,i)}}function Hv(t,e,n){if(typeof(n=Be(n))=="string"){if(n==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Op(e)&&n.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ae.fromString(n));if(!Q.isDocumentKey(i))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return jc(t,new Q(i))}if(n instanceof Ge)return jc(t,n._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yh(n)}.`)}function Fv(t,e){if(!Array.isArray(t)||t.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nS(t,e){const n=function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class iS{convertValue(e,n="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Cs(e,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(e){var i,s,r;const n=(r=(s=(i=e.fields)==null?void 0:i[kc].arrayValue)==null?void 0:s.values)==null?void 0:r.map(a=>et(a.doubleValue));return new qn(n)}convertGeoPoint(e){return new Bn(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Eh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(sl(e));default:return null}}convertTimestamp(e){const n=bs(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ae.fromString(e);_e(bw(i),9688,{name:e});const s=new rl(i.get(1),i.get(3)),r=new Q(i.popFirst(5));return s.isEqual(n)||xi(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class JN extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}class Kr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ys extends cl{constructor(e,n,i,s,r,a){super(e,n,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(jh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ys._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:rt("string",ys._jsonSchemaVersion),bundleSource:rt("string","DocumentSnapshot"),bundleName:rt("string"),bundle:rt("string")};class Xu extends ys{data(e={}){return super.data(e)}}class Zs{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Kr(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Xu(this._firestore,this._userDataWriter,i.key,i,new Kr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Xu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Kr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new Xu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Kr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,m=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:eD(l.type),doc:u,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t){t=Ht(t,Ge);const e=Ht(t.firestore,Qn);return BN(Ul(e),t._key).then(n=>sS(e,t,n))}Zs._jsonSchemaVersion="firestore/querySnapshot/1.0",Zs._jsonSchema={type:rt("string",Zs._jsonSchemaVersion),bundleSource:rt("string","QuerySnapshot"),bundleName:rt("string"),bundle:rt("string")};class Uh extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}function hl(t){t=Ht(t,Xn);const e=Ht(t.firestore,Qn),n=Ul(e),i=new Uh(e);return Jw(t._query),qN(n,t._query).then(s=>new Zs(e,i,t,s))}function fl(t,e,n){t=Ht(t,Ge);const i=Ht(t.firestore,Qn),s=mg(t.converter,e,n);return zh(i,[ng(Fa(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ct.none())])}function tD(t,e,n,...i){t=Ht(t,Ge);const s=Ht(t.firestore,Qn),r=Fa(s);let a;return a=typeof(e=Be(e))=="string"||e instanceof Ha?Yw(r,"updateDoc",t._key,e,n,i):Kw(r,"updateDoc",t._key,e),zh(s,[a.toMutation(t._key,Ct.exists(!0))])}function nD(t){return zh(Ht(t.firestore,Qn),[new Rh(t._key,Ct.none())])}function iD(t,e){const n=Ht(t.firestore,Qn),i=St(t),s=mg(t.converter,e);return zh(n,[ng(Fa(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Ct.exists(!1))]).then(()=>i)}function sD(t,...e){var u,f,m;t=Be(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||qv(e[i])||(n=e[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(qv(e[i])){const g=e[i];e[i]=(u=g.next)==null?void 0:u.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let r,a,l;if(t instanceof Ge)a=Ht(t.firestore,Qn),l=Th(t._key.path),r={next:g=>{e[i]&&e[i](sS(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=Ht(t,Xn);a=Ht(g.firestore,Qn),l=g._query;const p=new Uh(a);r={next:_=>{e[i]&&e[i](new Zs(a,p,g,_))},error:e[i+1],complete:e[i+2]},Jw(t._query)}return function(p,_,C,V){const D=new eg(V),w=new Zp(_,D,C);return p.asyncQueue.enqueueAndForget(async()=>Yp(await Hc(p),w)),()=>{D.Nu(),p.asyncQueue.enqueueAndForget(async()=>$p(await Hc(p),w))}}(Ul(a),l,s,r)}function zh(t,e){return function(i,s){const r=new Un;return i.asyncQueue.enqueueAndForget(async()=>xN(await UN(i),s,r)),r.promise}(Ul(t),e)}function sS(t,e,n){const i=n.docs.get(e._key),s=new Uh(t);return new ys(t,s,e._key,i,new Kr(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD={maxAttempts:5};function Eo(t,e){if((t=Be(t)).firestore!==e)throw new z(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Fa(e)}get(e){const n=Eo(e,this._firestore),i=new JN(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return X(24041);const r=s[0];if(r.isFoundDocument())return new cl(this._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new cl(this._firestore,i,n._key,null,n.converter);throw X(18433,{doc:r})})}set(e,n,i){const s=Eo(e,this._firestore),r=mg(s.converter,n,i),a=ng(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(e,n,i,...s){const r=Eo(e,this._firestore);let a;return a=typeof(n=Be(n))=="string"||n instanceof Ha?Yw(this._dataReader,"Transaction.update",r._key,n,i,s):Kw(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,a),this}delete(e){const n=Eo(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD extends aD{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Eo(e,this._firestore),i=new Uh(this._firestore);return super.get(e).then(s=>new ys(this._firestore,i,n._key,s._document,new Kr(!1,!1),n.converter))}}function Gv(t,e,n){t=Ht(t,Qn);const i={...rD,...n};return function(r){if(r.maxAttempts<1)throw new z(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,a,l){const u=new Un;return r.asyncQueue.enqueueAndForget(async()=>{const f=await zN(r);new jN(r.asyncQueue,f,l,a,u).ju()}),u.promise}(Ul(t),s=>e(new oD(t,s)),i)}function Qv(){return new ig("serverTimestamp")}function lD(...t){return new sg("arrayUnion",t)}function uD(...t){return new rg("arrayRemove",t)}function cD(t){return new ag("increment",t)}(function(e,n=!0){(function(s){Ua=s})(La),va(new nr("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new Qn(new $R(i.getProvider("auth-internal")),new WR(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rl(f.options.projectId,m)}(a,s),a);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),ms(Y_,$_,e),ms(Y_,$_,"esm2020")})();var hD="firebase",fD="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(hD,fD,"app");function rS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dD=rS,aS=new Dl("auth","Firebase",rS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new wp("@firebase/auth");function mD(t,...e){Qc.logLevel<=he.WARN&&Qc.warn(`Auth (${La}): ${t}`,...e)}function Zu(t,...e){Qc.logLevel<=he.ERROR&&Qc.error(`Auth (${La}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,...e){throw pg(t,...e)}function Hn(t,...e){return pg(t,...e)}function oS(t,e,n){const i={...dD(),[e]:n};return new Dl("auth","Firebase",i).create(e,{appName:t.name})}function vi(t){return oS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return aS.create(t,...e)}function J(t,e,...n){if(!t)throw pg(e,...n)}function pi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zu(e),new Error(e)}function Ii(t,e){t||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function pD(){return Kv()==="http:"||Kv()==="https:"}function Kv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pD()||x2()||"connection"in navigator)?navigator.onLine:!0}function yD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ii(n>e,"Short delay should be less than long delay!"),this.isMobile=w2()||R2()}get(){return gD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t,e){Ii(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ED=new zl(3e4,6e4);function Ds(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Di(t,e,n,i,s={}){return uS(t,s,async()=>{let r={},a={};i&&(e==="GET"?a=i:r={body:JSON.stringify(i)});const l=Ol({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:u,...r};return A2()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Pa(t.emulatorConfig.host)&&(f.credentials="include"),lS.fetch()(await cS(t,t.config.apiHost,n,l),f)})}async function uS(t,e,n){t._canInitEmulator=!1;const i={..._D,...e};try{const s=new bD(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Du(t,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,f]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Du(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Du(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Du(t,"user-disabled",a);const m=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw oS(t,m,f);Cn(t,m)}}catch(s){if(s instanceof Ni)throw s;Cn(t,"network-request-failed",{message:String(s)})}}async function Bl(t,e,n,i,s={}){const r=await Di(t,e,n,i,s);return"mfaPendingCredential"in r&&Cn(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function cS(t,e,n,i){const s=`${e}${n}?${i}`,r=t,a=r.config.emulator?gg(t.config,s):`${t.config.apiScheme}://${s}`;return vD.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}function TD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Hn(this.auth,"network-request-failed")),ED.get())})}}function Du(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Hn(t,e,i);return s.customData._tokenResponse=n,s}function Yv(t){return t!==void 0&&t.enterprise!==void 0}class wD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SD(t,e){return Di(t,"GET","/v2/recaptchaConfig",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(t,e){return Di(t,"POST","/v1/accounts:delete",e)}async function Kc(t,e){return Di(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xD(t,e=!1){const n=Be(t),i=await n.getIdToken(e),s=yg(i);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Bo(Jf(s.auth_time)),issuedAtTime:Bo(Jf(s.iat)),expirationTime:Bo(Jf(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Jf(t){return Number(t)*1e3}function yg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Zu("JWT malformed, contained fewer than 3 sections"),null;try{const s=db(n);return s?JSON.parse(s):(Zu("Failed to decode base64 JWT payload"),null)}catch(s){return Zu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $v(t){const e=yg(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ni&&RD(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function RD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bo(this.lastLoginAt),this.creationTime=Bo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(t){var g;const e=t.auth,n=await t.getIdToken(),i=await Ca(t,Kc(e,{idToken:n}));J(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const r=(g=s.providerUserInfo)!=null&&g.length?hS(s.providerUserInfo):[],a=ND(t.providerData,r),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),f=l?u:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Tm(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function CD(t){const e=Be(t);await Yc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ND(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function hS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DD(t,e){const n=await uS(t,{},async()=>{const i=Ol({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,a=await cS(t,s,"/v1/token",`key=${r}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return t.emulatorConfig&&Pa(t.emulatorConfig.host)&&(u.credentials="include"),lS.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OD(t,e){return Di(t,"POST","/v2/accounts:revokeToken",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$v(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=$v(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await DD(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new ra;return i&&(J(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(J(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),r&&(J(typeof r=="number","internal-error",{appName:e}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ra,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xn{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new ID(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Tm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ca(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xD(this,e)}reload(){return CD(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Yc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(vi(this.auth));const e=await this.getIdToken();return await Ca(this,AD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:p,isAnonymous:_,providerData:C,stsTokenManager:V}=n;J(g&&V,e,"internal-error");const D=ra.fromJSON(this.name,V);J(typeof g=="string",e,"internal-error"),Bi(i,e.name),Bi(s,e.name),J(typeof p=="boolean",e,"internal-error"),J(typeof _=="boolean",e,"internal-error"),Bi(r,e.name),Bi(a,e.name),Bi(l,e.name),Bi(u,e.name),Bi(f,e.name),Bi(m,e.name);const w=new xn({uid:g,auth:e,email:s,emailVerified:p,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:D,createdAt:f,lastLoginAt:m});return C&&Array.isArray(C)&&(w.providerData=C.map(E=>({...E}))),u&&(w._redirectEventId=u),w}static async _fromIdTokenResponse(e,n,i=!1){const s=new ra;s.updateFromServerResponse(n);const r=new xn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Yc(r),r}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];J(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?hS(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new ra;l.updateFromIdToken(i);const u=new xn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Tm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,f),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=new Map;function gi(t){Ii(t instanceof Function,"Expected a class definition");let e=Xv.get(t);return e?(Ii(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Xv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fS.type="NONE";const Zv=fS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t,e,n){return`firebase:${t}:${e}:${n}`}class aa{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Wu(this.userKey,s.apiKey,r),this.fullPersistenceKey=Wu("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kc(this.auth,{idToken:e}).catch(()=>{});return n?xn._fromGetAccountInfoResponse(this.auth,n,e):null}return xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new aa(gi(Zv),e,i);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let r=s[0]||gi(Zv);const a=Wu(i,e.config.apiKey,e.name);let l=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const p=await Kc(e,{idToken:m}).catch(()=>{});if(!p)break;g=await xn._fromGetAccountInfoResponse(e,p,m)}else g=xn._fromJSON(e,m);f!==r&&(l=g),r=f;break}}catch{}const u=s.filter(f=>f._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new aa(r,e,i):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==r)try{await f._remove(a)}catch{}})),new aa(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_S(e))return"Blackberry";if(vS(e))return"Webos";if(mS(e))return"Safari";if((e.includes("chrome/")||pS(e))&&!e.includes("edge/"))return"Chrome";if(yS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function dS(t=Lt()){return/firefox\//i.test(t)}function mS(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pS(t=Lt()){return/crios\//i.test(t)}function gS(t=Lt()){return/iemobile/i.test(t)}function yS(t=Lt()){return/android/i.test(t)}function _S(t=Lt()){return/blackberry/i.test(t)}function vS(t=Lt()){return/webos/i.test(t)}function _g(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function VD(t=Lt()){var e;return _g(t)&&!!((e=window.navigator)!=null&&e.standalone)}function MD(){return I2()&&document.documentMode===10}function ES(t=Lt()){return _g(t)||yS(t)||vS(t)||_S(t)||/windows phone/i.test(t)||gS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(t,e=[]){let n;switch(t){case"Browser":n=Wv(Lt());break;case"Worker":n=`${Wv(Lt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${La}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((a,l)=>{try{const u=e(r);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(t,e={}){return Di(t,"GET","/v2/passwordPolicy",Ds(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=6;class LD{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??PD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jv(this),this.idTokenSubscription=new Jv(this),this.beforeStateQueue=new kD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gi(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await aa.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kc(this,{idToken:e}),i=await xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(vn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(vi(this));const n=e?Be(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jD(this),n=new LD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await OD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gi(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await aa.create(this,[gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&mD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function gr(t){return Be(t)}class Jv{constructor(e){this.auth=e,this.observer=null,this.addObserver=j2(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zD(t){Bh=t}function bS(t){return Bh.loadJS(t)}function BD(){return Bh.recaptchaEnterpriseScript}function qD(){return Bh.gapiScript}function HD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class FD{constructor(){this.enterprise=new GD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class GD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const QD="recaptcha-enterprise",wS="NO_RECAPTCHA";class KD{constructor(e){this.type=QD,this.auth=gr(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,l)=>{SD(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const f=new wD(u);return r.tenantId==null?r._agentRecaptchaConfig=f:r._tenantRecaptchaConfigs[r.tenantId]=f,a(f.siteKey)}}).catch(u=>{l(u)})})}function s(r,a,l){const u=window.grecaptcha;Yv(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:e}).then(f=>{a(f)}).catch(()=>{a(wS)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new FD().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{i(this.auth).then(l=>{if(!n&&Yv(window.grecaptcha))s(l,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=BD();u.length!==0&&(u+=l),bS(u).then(()=>{s(l,r,a)}).catch(f=>{a(f)})}}).catch(l=>{a(l)})})}}async function eE(t,e,n,i=!1,s=!1){const r=new KD(t);let a;if(s)a=wS;else try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function bm(t,e,n,i,s){var r;if((r=t._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await eE(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await eE(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t,e){const n=Ap(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Si(r,e??{}))return s;Cn(s,"already-initialized")}return n.initialize({options:e})}function $D(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(gi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function XD(t,e,n){const i=gr(t);J(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=SS(e),{host:a,port:l}=ZD(e),u=l===null?"":`:${l}`,f={url:`${r}//${a}${u}/`},m=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){J(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),J(Si(f,i.config.emulator)&&Si(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,Pa(a)?(yb(`${r}//${a}${u}`),_b("Auth",!0)):WD()}function SS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZD(t){const e=SS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:tE(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:tE(a)}}}function tE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,n){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}async function JD(t,e){return Di(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e4(t,e){return Bl(t,"POST","/v1/accounts:signInWithPassword",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t4(t,e){return Bl(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}async function n4(t,e){return Bl(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends vg{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new dl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new dl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bm(e,n,"signInWithPassword",e4);case"emailLink":return t4(e,{email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bm(e,i,"signUpPassword",JD);case"emailLink":return n4(e,{idToken:n,email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(t,e){return Bl(t,"POST","/v1/accounts:signInWithIdp",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4="http://localhost";class rr extends vg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new rr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const a=new rr(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return oa(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,oa(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,oa(e,n)}buildRequest(){const e={requestUri:i4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ol(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function r4(t){const e=po(go(t)).link,n=e?po(go(e)).deep_link_id:null,i=po(go(t)).deep_link_id;return(i?po(go(i)).link:null)||i||n||e||t}class Eg{constructor(e){const n=po(go(e)),i=n.apiKey??null,s=n.oobCode??null,r=s4(n.mode??null);J(i&&s&&r,"argument-error"),this.apiKey=i,this.operation=r,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=r4(e);try{return new Eg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.providerId=Ga.PROVIDER_ID}static credential(e,n){return dl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Eg.parseLink(n);return J(i,"argument-error"),dl._fromEmailAndCode(e,i.code,i.tenantId)}}Ga.PROVIDER_ID="password";Ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends AS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends ql{constructor(){super("facebook.com")}static credential(e){return rr._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.FACEBOOK_SIGN_IN_METHOD="facebook.com";$i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends ql{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return rr._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Xi.credential(n,i)}catch{return null}}}Xi.GOOGLE_SIGN_IN_METHOD="google.com";Xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends ql{constructor(){super("github.com")}static credential(e){return rr._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.GITHUB_SIGN_IN_METHOD="github.com";Zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends ql{constructor(){super("twitter.com")}static credential(e,n){return rr._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Wi.credential(n,i)}catch{return null}}}Wi.TWITTER_SIGN_IN_METHOD="twitter.com";Wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4(t,e){return Bl(t,"POST","/v1/accounts:signUp",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await xn._fromIdTokenResponse(e,i,s),a=nE(i);return new ar({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=nE(i);return new ar({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function nE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends Ni{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,$c.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new $c(e,n,i,s)}}function xS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?$c._fromErrorAndOperation(t,r,e,i):r})}async function o4(t,e,n=!1){const i=await Ca(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ar._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l4(t,e,n=!1){const{auth:i}=t;if(vn(i.app))return Promise.reject(vi(i));const s="reauthenticate";try{const r=await Ca(t,xS(i,s,e,t),n);J(r.idToken,i,"internal-error");const a=yg(r.idToken);J(a,i,"internal-error");const{sub:l}=a;return J(t.uid===l,i,"user-mismatch"),ar._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Cn(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(t,e,n=!1){if(vn(t.app))return Promise.reject(vi(t));const i="signIn",s=await xS(t,i,e),r=await ar._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function u4(t,e){return RS(gr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IS(t){const e=gr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function c4(t,e,n){if(vn(t.app))return Promise.reject(vi(t));const i=gr(t),a=await bm(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",a4).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&IS(t),u}),l=await ar._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function h4(t,e,n){return vn(t.app)?Promise.reject(vi(t)):u4(Be(t),Ga.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&IS(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f4(t,e){return Di(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Be(t),r={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Ca(i,f4(i.auth,r));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const l=i.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t,e){return Be(t).setPersistence(e)}function p4(t,e,n,i){return Be(t).onIdTokenChanged(e,n,i)}function g4(t,e,n){return Be(t).beforeAuthStateChanged(e,n)}function y4(t,e,n,i){return Be(t).onAuthStateChanged(e,n,i)}function _4(t){return Be(t).signOut()}const Xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xc,"1"),this.storage.removeItem(Xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=1e3,E4=10;class NS extends CS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ES(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);MD()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,E4):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},v4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NS.type="LOCAL";const DS=NS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS extends CS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OS.type="SESSION";const VS=OS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new qh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async f=>f(n.origin,r)),u=await T4(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const f=Tg("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(g){const p=g;if(p.data.eventId===f)switch(p.data.status){case"ack":clearTimeout(m),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(p.data.response);break;default:clearTimeout(m),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){return window}function w4(t){Fn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){return typeof Fn().WorkerGlobalScope<"u"&&typeof Fn().importScripts=="function"}async function S4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function A4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function x4(){return MS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="firebaseLocalStorageDb",R4=1,Zc="firebaseLocalStorage",jS="fbase_key";class Hl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hh(t,e){return t.transaction([Zc],e?"readwrite":"readonly").objectStore(Zc)}function I4(){const t=indexedDB.deleteDatabase(kS);return new Hl(t).toPromise()}function wm(){const t=indexedDB.open(kS,R4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Zc,{keyPath:jS})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Zc)?e(i):(i.close(),await I4(),e(await wm()))})})}async function iE(t,e,n){const i=Hh(t,!0).put({[jS]:e,value:n});return new Hl(i).toPromise()}async function C4(t,e){const n=Hh(t,!1).get(e),i=await new Hl(n).toPromise();return i===void 0?null:i.value}function sE(t,e){const n=Hh(t,!0).delete(e);return new Hl(n).toPromise()}const N4=800,D4=3;class PS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>D4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qh._getInstance(x4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await S4(),!this.activeServiceWorker)return;this.sender=new b4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||A4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wm();return await iE(e,Xc,"1"),await sE(e,Xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>iE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>C4(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Hh(s,!1).getAll();return new Hl(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),N4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PS.type="LOCAL";const O4=PS;new zl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(t,e){return e?gi(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg extends vg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function M4(t){return RS(t.auth,new bg(t),t.bypassAuthState)}function k4(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),l4(n,new bg(t),t.bypassAuthState)}async function j4(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),o4(n,new bg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return M4;case"linkViaPopup":case"linkViaRedirect":return j4;case"reauthViaPopup":case"reauthViaRedirect":return k4;default:Cn(this.auth,"internal-error")}}resolve(e){Ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=new zl(2e3,1e4);class Yr extends LS{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Yr.currentPopupAction&&Yr.currentPopupAction.cancel(),Yr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){Ii(this.filter.length===1,"Popup operations only handle one event");const e=Tg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,P4.get())};e()}}Yr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4="pendingRedirect",Ju=new Map;class U4 extends LS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ju.get(this.auth._key());if(!e){try{const i=await z4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ju.set(this.auth._key(),e)}return this.bypassAuthState||Ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function z4(t,e){const n=H4(e),i=q4(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function B4(t,e){Ju.set(t._key(),e)}function q4(t){return gi(t._redirectPersistence)}function H4(t){return Wu(L4,t.config.apiKey,t.name)}async function F4(t,e,n=!1){if(vn(t.app))return Promise.reject(vi(t));const i=gr(t),s=V4(i,e),a=await new U4(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=10*60*1e3;class Q4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!K4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!US(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Hn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=G4&&this.cachedEventUids.clear(),this.cachedEventUids.has(rE(e))}saveEventToCache(e){this.cachedEventUids.add(rE(e)),this.lastProcessedEventTime=Date.now()}}function rE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function US({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function K4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return US(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y4(t,e={}){return Di(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,X4=/^https?/;async function Z4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Y4(t);for(const n of e)try{if(W4(n))return}catch{}Cn(t,"unauthorized-domain")}function W4(t){const e=Em(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!X4.test(n))return!1;if($4.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new zl(3e4,6e4);function aE(){const t=Fn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function eO(t){return new Promise((e,n)=>{var s,r,a;function i(){aE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aE(),n(Hn(t,"network-request-failed"))},timeout:J4.get()})}if((r=(s=Fn().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((a=Fn().gapi)!=null&&a.load)i();else{const l=HD("iframefcb");return Fn()[l]=()=>{gapi.load?i():n(Hn(t,"network-request-failed"))},bS(`${qD()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw ec=null,e})}let ec=null;function tO(t){return ec=ec||eO(t),ec}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=new zl(5e3,15e3),iO="__/auth/iframe",sO="emulator/auth/iframe",rO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oO(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?gg(e,sO):`https://${t.config.authDomain}/${iO}`,i={apiKey:e.apiKey,appName:t.name,v:La},s=aO.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Ol(i).slice(1)}`}async function lO(t){const e=await tO(t),n=Fn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:oO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rO,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=Hn(t,"network-request-failed"),l=Fn().setTimeout(()=>{r(a)},nO.get());function u(){Fn().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cO=500,hO=600,fO="_blank",dO="http://localhost";class oE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mO(t,e,n,i=cO,s=hO){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...uO,width:i.toString(),height:s.toString(),top:r,left:a},f=Lt().toLowerCase();n&&(l=pS(f)?fO:n),dS(f)&&(e=e||dO,u.scrollbars="yes");const m=Object.entries(u).reduce((p,[_,C])=>`${p}${_}=${C},`,"");if(VD(f)&&l!=="_self")return pO(e||"",l),new oE(null);const g=window.open(e||"",l,m);J(g,t,"popup-blocked");try{g.focus()}catch{}return new oE(g)}function pO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO="__/auth/handler",yO="emulator/auth/handler",_O=encodeURIComponent("fac");async function lE(t,e,n,i,s,r){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:La,eventId:s};if(e instanceof AS){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",k2(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof ql){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const u=await t._getAppCheckToken(),f=u?`#${_O}=${encodeURIComponent(u)}`:"";return`${vO(t)}?${Ol(l).slice(1)}${f}`}function vO({config:t}){return t.emulator?gg(t,yO):`https://${t.authDomain}/${gO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="webStorageSupport";class EO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VS,this._completeRedirectFn=F4,this._overrideRedirectResult=B4}async _openPopup(e,n,i,s){var a;Ii((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=await lE(e,n,i,Em(),s);return mO(e,r,Tg())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await lE(e,n,i,Em(),s);return w4(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(Ii(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await lO(e),i=new Q4(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ed,{type:ed},s=>{var a;const r=(a=s==null?void 0:s[0])==null?void 0:a[ed];r!==void 0&&n(!!r),Cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Z4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ES()||mS()||_g()}}const TO=EO;var uE="@firebase/auth",cE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SO(t){va(new nr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TS(t)},f=new UD(i,s,r,u);return $D(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),va(new nr("auth-internal",e=>{const n=gr(e.getProvider("auth").getImmediate());return(i=>new bO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(uE,cE,wO(t)),ms(uE,cE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=5*60,xO=gb("authIdTokenMaxAge")||AO;let hE=null;const RO=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>xO)return;const s=n==null?void 0:n.token;hE!==s&&(hE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function IO(t=bb()){const e=Ap(t,"auth");if(e.isInitialized())return e.getImmediate();const n=YD(t,{popupRedirectResolver:TO,persistence:[O4,DS,VS]}),i=gb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=RO(r.toString());g4(n,a,()=>a(n.currentUser)),p4(n,l=>a(l))}}const s=mb("auth");return s&&XD(n,`http://${s}`),n}function CO(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}zD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=Hn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",CO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SO("Browser");const NO={apiKey:"AIzaSyAhMZTS-LgXURFr19kmDvVG3mc_j68PkNI",authDomain:"tene-9f8c9.firebaseapp.com",projectId:"tene-9f8c9",storageBucket:"tene-9f8c9.firebasestorage.app",messagingSenderId:"1096524923335",appId:"1:1096524923335:web:a2662d6197b49fe3bbd9e2"},zS=Tb(NO),We=FN(zS),ml=IO(zS);m4(ml,DS).catch(t=>{console.error("Firebase Persistence Error:",t)});const BS=L.createContext(),DO=({children:t})=>{const[e,n]=L.useState(null),[i,s]=L.useState(!0);L.useEffect(()=>{const a=y4(ml,l=>{n(l),s(!1)});return()=>a()},[]);const r={user:e,loading:i};return c.jsx(BS.Provider,{value:r,children:!i&&t})},qS=()=>L.useContext(BS),OO=({onRegisterClick:t})=>{const[e,n]=L.useState(!1),[i,s]=L.useState(""),[r,a]=L.useState(""),[l,u]=L.useState(""),[f,m]=L.useState(""),g=async _=>{if(_.preventDefault(),m(""),e){if(!l.trim()){m("Пожалуйста, введите имя.");return}try{const C=await c4(ml,i,r);await d4(C.user,{displayName:l})}catch(C){m(p(C.code))}}else try{await h4(ml,i,r)}catch(C){m(p(C.code))}},p=_=>{switch(_){case"auth/invalid-email":return"Неверный формат электронной почты.";case"auth/user-not-found":case"auth/wrong-password":return"Неверный email или пароль.";case"auth/email-already-in-use":return"Этот email уже зарегистрирован.";case"auth/weak-password":return"Пароль слишком слабый. Используйте не менее 6 символов.";default:return"Произошла ошибка. Пожалуйста, попробуйте еще раз."}};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e&&c.jsx("input",{type:"text",value:l,onChange:_=>u(_.target.value),placeholder:"Ваше имя",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),c.jsx("input",{type:"email",value:i,onChange:_=>s(_.target.value),placeholder:"Email",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),c.jsx("input",{type:"password",value:r,onChange:_=>a(_.target.value),placeholder:"Пароль",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),f&&c.jsx("p",{className:"text-red-500 text-sm text-center",children:f}),c.jsx("button",{type:"submit",className:"w-full py-3 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-transform hover:scale-105",children:e?"Зарегистрироваться":"Войти"})]}),c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("button",{onClick:()=>{!e&&t&&t(),n(!e),m("")},className:"text-sm text-accent hover:underline",children:e?"У меня уже есть аккаунт":"Создать новый аккаунт"})})]})},VO=({auth:t,onRegisterClick:e})=>c.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main p-4",children:c.jsxs("div",{className:"w-full max-w-sm text-center",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Добро пожаловать"}),c.jsx("p",{className:"text-text-main/70 mb-8",children:"Войдите или создайте аккаунт, чтобы продолжить."}),c.jsx("div",{className:"bg-component-bg p-6 rounded-2xl border border-border-color shadow-lg",children:c.jsx(OO,{onRegisterClick:e})})]})}),MO=({className:t=""})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${t}`,children:c.jsx("path",{d:"m9 18 6-6-6-6"})}),HS=({className:t=""})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[c.jsx("path",{d:"M19 12H5"}),c.jsx("polyline",{points:"12 19 5 12 12 5"})]}),FS=({className:t="",filled:e=!1})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[c.jsx("circle",{cx:"11",cy:"11",r:"8"}),c.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),kO=({className:t=""})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:c.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),GS=({className:t="",filled:e=!1})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:c.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),QS=({className:t=""})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[c.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),c.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),Fh=({className:t="",filled:e=!1})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:c.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),jO=({className:t="",filled:e=!1})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[c.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),PO=({className:t="",filled:e=!1})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[c.jsx("path",{d:"M4 22h16"}),c.jsx("path",{d:"M7 22V2h10v20"}),c.jsx("path",{d:"M7 12h4"})]}),LO=({className:t=""})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:c.jsx("path",{d:"m15 18-6-6 6-6"})}),UO=({className:t=""})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:c.jsx("path",{d:"m9 18 6-6-6-6"})}),zO=({className:t=""})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[c.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),c.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),BO=({className:t=""})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[c.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),c.jsx("polyline",{points:"16 17 21 12 16 7"}),c.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),wg=({className:t=""})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[c.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),c.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),qO=({onSelectNovel:t,bookmarks:e,onToggleBookmark:n,genreFilter:i})=>{const[s,r]=L.useState([]),[a,l]=L.useState(!1),[u,f]=L.useState(null),[m,g]=L.useState(!0),[p,_]=L.useState(null),C=L.useCallback(async(D,w=null)=>{l(!0);try{const E=Vh(We,"novels"),x=[_m("title"),vm(12)];D&&x.unshift(eS("genres","array-contains",D)),w&&x.push(tS(w));const O=Gc(E,...x),U=await hl(O),H=U.docs.map(v=>({id:v.id,...v.data()}));r(w?v=>[...v,...H]:H);const T=U.docs[U.docs.length-1];f(T||null),U.docs.length<12?g(!1):g(!0)}catch(E){console.error("Ошибка загрузки новелл: ",E)}finally{l(!1)}},[]);L.useEffect(()=>{r([]),f(null),g(!0),_(i),C(i,null)},[i,C]);const V=L.useCallback(()=>{!a&&m&&C(p,u)},[a,m,p,u,C]);return c.jsxs("div",{children:[c.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:s.map((D,w)=>c.jsx("div",{onClick:()=>t(D),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${w*50}ms`},children:c.jsxs("div",{className:"relative transition-all duration-300",children:[c.jsx("button",{onClick:E=>{E.stopPropagation(),n(D.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${e.includes(D.id)?"text-accent":""}`,children:c.jsx(Fh,{filled:e.includes(D.id),width:"20",height:"20"})}),c.jsx("img",{src:`/${D.coverUrl}`,alt:D.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),c.jsxs("div",{className:"flex items-center justify-between mt-2 gap-2",children:[c.jsx("div",{className:"flex-1 min-w-0",children:c.jsx("h2",{className:"font-semibold text-xs truncate text-text-main",children:D.title})}),D.views>0&&c.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-60 flex-shrink-0",children:[c.jsx(wg,{className:"w-4 h-4"}),c.jsx("span",{children:D.views})]})]})]})},D.id))}),a&&c.jsx("div",{className:"text-center p-4",children:c.jsx("p",{children:"Загрузка..."})}),!a&&s.length===0&&c.jsx("p",{className:"col-span-3 text-center opacity-70 p-4",children:i?`Новелл в жанре "${i}" не найдено.`:"Новеллы пока не добавлены."}),m&&!a&&s.length>0&&c.jsx("div",{className:"text-center p-4",children:c.jsx("button",{onClick:V,className:"bg-accent text-white font-bold py-2 px-6 rounded-lg hover:bg-accent-hover transition-colors",children:"Показать ещё"})})]})},HO=t=>{const e={},n=[];return t.forEach(i=>{e[i.id]={...i,replies:[]}}),t.forEach(i=>{i.replyTo&&e[i.replyTo]?e[i.replyTo].replies.push(e[i.id]):n.push(e[i.id])}),n},KS=wE.memo(({comment:t,onReply:e,onLike:n,onEdit:i,onDelete:s,onUpdate:r,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:f,setEditingText:m,replyingTo:g,replyText:p,setReplyText:_,onCommentSubmit:C})=>{const V=D=>D!=null&&D.toDate?D.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[c.jsxs("div",{className:"flex justify-between items-center text-xs opacity-70 mb-1",children:[c.jsx("p",{className:"font-bold text-sm text-text-main opacity-100",children:t.userName}),c.jsx("span",{children:V(t.timestamp)})]}),u===t.id?c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("input",{type:"text",value:f,autoFocus:!0,onChange:D=>m(D.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),c.jsx("button",{onClick:()=>r(t.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),c.jsx("button",{onClick:()=>i(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):c.jsx("p",{className:"text-sm mt-1 opacity-90",children:t.text}),c.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[c.jsxs("button",{onClick:()=>n(t.id),className:"flex items-center gap-1 text-xs text-gray-500",children:[c.jsx(GS,{filled:t.userHasLiked,className:`w-4 h-4 ${t.userHasLiked?"text-accent":""}`}),c.jsx("span",{children:t.likeCount||0})]}),c.jsx("button",{onClick:()=>e(t.id),className:"text-xs text-gray-500",children:"Ответить"}),(l===t.userId||a)&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>i(t),className:"text-xs text-gray-500",children:"Редактировать"}),c.jsx("button",{onClick:()=>s(t.id),className:"text-xs text-red-500",children:"Удалить"})]})]})]}),g===t.id&&c.jsxs("form",{onSubmit:D=>C(D,t.id),className:"flex items-center gap-2 mt-2",children:[c.jsx("input",{type:"text",value:p,autoFocus:!0,onChange:D=>_(D.target.value),placeholder:`Ответ для ${t.userName}...`,className:"w-full bg-background border border-border-color rounded-lg py-1 px-3 text-sm"}),c.jsx("button",{type:"submit",className:"p-1.5 rounded-full bg-accent text-white",children:c.jsx(QS,{className:"w-4 h-4"})})]}),t.replies&&t.replies.length>0&&c.jsx("div",{className:"mt-2 space-y-2 border-l-2 border-border-color pl-2",children:t.replies.map(D=>c.jsx(KS,{comment:D,onReply:e,onLike:n,onEdit:i,onDelete:s,onUpdate:r,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:f,setEditingText:m,replyingTo:g,replyText:p,setReplyText:_,onCommentSubmit:C},D.id))})]})}),FO=`
  @keyframes page-turn {
    0%, 100% { transform: rotateY(0deg); }
    50% { transform: rotateY(-180deg); }
  }

  .book-page {
    transform-origin: left center;
    animation: page-turn 1.8s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  }

  @keyframes dot-fade {
    0%, 100% { opacity: 0.2; }
    50% { opacity: 1; }
  }

  .dot-1 { animation: dot-fade 1.5s infinite; animation-delay: 0s; }
  .dot-2 { animation: dot-fade 1.5s infinite; animation-delay: 0.2s; }
  .dot-3 { animation: dot-fade 1.5s infinite; animation-delay: 0.4s; }
`,GO=()=>c.jsxs(c.Fragment,{children:[c.jsx("style",{children:FO}),c.jsxs("div",{className:"flex flex-col justify-center items-center h-screen bg-background text-text-main",children:[c.jsxs("div",{className:"relative w-20 h-16 mb-6",children:[c.jsx("div",{className:"absolute w-10 h-16 bg-component-bg border-2 border-border-color rounded-r-md left-1/2"}),c.jsx("div",{className:"absolute w-10 h-16 bg-component-bg border-2 border-border-color rounded-l-md right-1/2"}),c.jsx("div",{className:"book-page absolute w-10 h-16 bg-accent rounded-r-md left-1/2"})]}),c.jsxs("p",{className:"text-lg font-semibold text-text-main flex items-center",children:["Загрузка новелл",c.jsx("span",{className:"dot-1",children:"."}),c.jsx("span",{className:"dot-2",children:"."}),c.jsx("span",{className:"dot-3",children:"."})]})]})]}),Sg=({onClose:t,onSelectPlan:e})=>{const n=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[c.jsx(kO,{className:"mx-auto mb-4 text-accent"}),c.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),c.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),c.jsx("div",{className:"space-y-3",children:n.map(i=>c.jsxs("button",{onClick:()=>e(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[c.jsx("p",{className:"font-bold",children:i.name}),c.jsxs("p",{className:"text-sm",children:[i.price," ₽"]})]},i.duration))}),c.jsx("button",{onClick:t,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},Ag=({onClose:t,onSelectMethod:e,plan:n})=>c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[c.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),c.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:()=>e("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[c.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),c.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),c.jsxs("button",{onClick:()=>e("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[c.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),c.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),c.jsxs("button",{onClick:()=>e("boosty"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[c.jsx("p",{className:"font-bold",children:"🧡 Оплатить через Boosty"}),c.jsx("p",{className:"text-sm opacity-70",children:"Автоматическая активация через Telegram"})]}),c.jsx("div",{className:"text-center pt-2",children:c.jsx("button",{onClick:()=>e("boosty"),className:"text-sm text-accent hover:underline",children:"Уже есть подписка Boosty? Синхронизировать аккаунт"})})]}),c.jsx("button",{onClick:t,className:"w-full py-3 mt-6 rounded-lg border border-border-color hover:bg-white/5 transition-colors",children:"Назад"})]})}),QO=({activeTab:t,setActiveTab:e})=>{const n=[{id:"library",label:"Библиотека",icon:PO},{id:"search",label:"Поиск",icon:FS},{id:"bookmarks",label:"Закладки",icon:Fh},{id:"profile",label:"Профиль",icon:jO}];return c.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:c.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>c.jsxs("button",{onClick:()=>e(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${t===i.id?"text-accent":"text-text-main opacity-60"}`,children:[c.jsx(i.icon,{filled:t===i.id}),c.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},KO=({onReadMore:t})=>{const[e,n]=L.useState([]),[i,s]=L.useState(0);L.useEffect(()=>{fetch("/data/news.json").then(u=>{if(!u.ok)throw new Error("Network response was not ok");return u.json()}).then(u=>{const f=u.sort((m,g)=>new Date(g.date)-new Date(m.date));n(f)}).catch(u=>console.error("Не удалось загрузить news.json:",u))},[]);const r=()=>{e.length>0&&s(u=>(u+1)%e.length)},a=()=>{e.length>0&&s(u=>(u-1+e.length)%e.length)};if(e.length===0)return null;const l=e[i];return c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[c.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-text-main",children:l.title}),c.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),c.jsx("button",{onClick:()=>t(l),className:"text-sm font-bold text-accent mt-1",children:"Читать далее"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:c.jsx(LO,{className:"w-5 h-5"})}),c.jsx("button",{onClick:r,className:"p-1 rounded-full hover:bg-background",children:c.jsx(UO,{className:"w-5 h-5"})})]})]})})},YO=({newsItem:t,onClose:e})=>c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main flex flex-col",onClick:n=>n.stopPropagation(),children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 break-words",children:t.title}),c.jsx("div",{className:"prose prose-sm max-w-none text-text-main opacity-80 overflow-y-auto max-h-[60vh] ",dangerouslySetInnerHTML:{__html:t.fullText}}),c.jsx("button",{onClick:e,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})}),Kn=({title:t,onBack:e})=>c.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[e&&c.jsx("button",{onClick:e,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:c.jsx(HS,{})}),c.jsx("h1",{className:"text-xl font-bold",children:t})]}),$O=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold mb-2",children:"Что такое Tenebris Verbum?"}),c.jsx("p",{className:"opacity-80",children:"Tenebris Verbum — это веб-приложение, созданное для комфортного чтения новелл. Оно представляет собой цифровую библиотеку, доступную через Telegram, и оптимизировано для мобильных устройств."}),c.jsxs("div",{className:"mt-4 space-y-2 opacity-80",children:[c.jsx("p",{className:"font-semibold",children:"Ключевые возможности приложения:"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[c.jsxs("li",{children:[c.jsx("b",{children:"Библиотека новелл:"})," Главный экран, где вы можете просматривать доступные новеллы, их обложки и названия."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Подробная информация о новелле:"})," Нажав на новеллу, вы увидите детальную страницу с её описанием, автором, жанрами и списком глав."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Удобная читалка:"})," Приложение предлагает продуманный интерфейс для чтения глав с возможностью настройки размера шрифта."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Система закладок:"})," Вы можете добавлять понравившиеся новеллы в закладки для быстрого доступа."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Поиск и фильтрация:"})," Есть функция поиска по названию новеллы и возможность фильтрации по жанрам прямо из карточки новеллы."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Интерактивность:"})," Пользователи могут оставлять комментарии к главам, отвечать на комментарии других, ставить лайки главам и комментариям."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Персонализация:"})," В профиле можно переключаться между светлой и тёмной темами оформления."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Система подписок:"})," Для доступа к эксклюзивным (платным) главам в приложении реализована система подписок."]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold mb-2",children:"Руководство пользователя и правила"}),c.jsxs("div",{className:"space-y-4 opacity-80",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold",children:"1. Вход и Регистрация:"}),c.jsx("p",{children:"При первом входе в приложение вас встретит экран авторизации. Вы можете создать новый аккаунт, указав ваше имя, email и пароль, либо войти в уже существующий. Это необходимо для сохранения вашего прогресса, закладок и статуса подписки."})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold",children:"2. Навигация:"}),c.jsx("p",{children:"В нижней части экрана расположена панель навигации с четырьмя основными разделами:"}),c.jsxs("ul",{className:"list-disc list-inside ml-4",children:[c.jsxs("li",{children:[c.jsx("b",{children:"Библиотека:"})," Ваш основной экран с каталогом всех новелл."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Поиск:"})," Раздел для поиска новелл по названию."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Закладки:"})," Здесь хранятся все новеллы, которые вы отметили."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Профиль:"})," Управление вашим аккаунтом и подпиской."]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold",children:"3. Чтение:"}),c.jsx("p",{children:"На странице новеллы выберите нужную главу из списка. Некоторые главы могут быть отмечены иконкой замка (🔒) — это платный контент, доступный по подписке. В режиме чтения вы можете:"}),c.jsxs("ul",{className:"list-disc list-inside ml-4",children:[c.jsx("li",{children:"Переключаться между главами с помощью стрелок внизу экрана."}),c.jsx("li",{children:"Открыть оглавление, чтобы быстро перейти к другой главе."}),c.jsx("li",{children:'Зайти в настройки (иконка шестерёнки) и изменить размер текста кнопками "+" и "-".'})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold",children:"4. Профиль:"}),c.jsxs("p",{children:["В этом разделе вы можете видеть ваш email и имя. Здесь находится кнопка для выхода из аккаунта. Тут же можно включить или выключить тёмную тему. ",c.jsx("b",{children:"Ваш ID для привязки:"})," Это уникальный идентификатор вашего аккаунта. Он понадобится для активации подписки через Telegram-бота. Его можно скопировать одним нажатием."]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold mb-2",children:"Активация подписок"}),c.jsx("p",{className:"opacity-80 mb-3",children:"Подписка открывает доступ ко всем платным главам во всех новеллах. Процесс оформления разделён на несколько шагов."}),c.jsxs("div",{className:"space-y-4 opacity-80",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold",children:"Шаг 1: Выбор тарифа"}),c.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[c.jsxs("li",{children:["Зайдите в раздел ",c.jsx("b",{children:'"Профиль"'}),"."]}),c.jsxs("li",{children:["Нажмите кнопку ",c.jsx("b",{children:'"Оформить подписку"'}),"."]}),c.jsxs("li",{children:["Во всплывающем окне выберите один из доступных тарифов:",c.jsxs("ul",{className:"list-disc list-inside ml-6",children:[c.jsxs("li",{children:[c.jsx("b",{children:"1 месяц"})," за 199 ₽"]}),c.jsxs("li",{children:[c.jsx("b",{children:"3 месяца"})," за 539 ₽"]}),c.jsxs("li",{children:[c.jsx("b",{children:"1 год"})," за 1899 ₽"]})]})]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold",children:"Шаг 2: Выбор способа оплаты"}),c.jsxs("p",{className:"mb-2",children:["После выбора тарифа вам будет предложено три способа оплаты. Каждый из них требует взаимодействия с Telegram-ботом ",c.jsx("b",{children:"tenebrisverbot"}),"."]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h5",{className:"font-semibold",children:"Способ 1: Boosty (Автоматическая активация)"}),c.jsx("p",{children:"Это самый быстрый и рекомендуемый способ."}),c.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[c.jsxs("li",{children:["В приложении, после выбора тарифа, нажмите ",c.jsx("b",{children:'"Оплатить через Boosty"'}),"."]}),c.jsx("li",{children:"Вас автоматически перенаправит в Telegram-бот, который привяжет ваш Telegram-аккаунт к вашему профилю в приложении."}),c.jsx("li",{children:"Бот пришлет вам ссылку на Boosty и дальнейшие инструкции."}),c.jsx("li",{children:"Перейдите по ссылке, оформите подписку на Boosty и вступите в приватную Telegram-группу (ссылку предоставит Boosty после оплаты)."}),c.jsx("li",{children:"Как только вы вступите в группу, вернитесь в бот и отправьте ему команду /check ВАШ_ID (скопируйте ID из профиля в приложении)."}),c.jsxs("li",{children:["Бот проверит ваше членство в группе и ",c.jsx("b",{children:"автоматически активирует подписку на 1 месяц"}),"."]})]}),c.jsx("h5",{className:"font-semibold pt-2",children:"Способы 2 и 3: Банковская карта или Донат через Tribut (Ручная проверка)"}),c.jsx("p",{children:"Эти способы требуют ручного подтверждения администратором."}),c.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[c.jsxs("li",{children:["В приложении выберите тариф, а затем — ",c.jsx("b",{children:'"Банковской картой"'})," или ",c.jsx("b",{children:'"Донат через tribut"'}),"."]}),c.jsx("li",{children:"Вас перенаправит в Telegram-бот."}),c.jsxs("li",{children:["Бот сгенерирует для вас ",c.jsx("b",{children:"уникальный код платежа"})," (например, SUB12345-6789) и пришлет реквизиты."]}),c.jsxs("li",{children:[c.jsx("b",{children:"ЭТО ВАЖНО:"})," Совершите перевод/донат, и в поле ",c.jsx("b",{children:'"комментарий"'})," или ",c.jsx("b",{children:'"сообщение к донату" ОБЯЗАТЕЛЬНО'})," укажите тот самый уникальный код, который прислал бот. Без этого кода администратор не сможет найти ваш платеж."]}),c.jsx("li",{children:"После получения оплаты администратор воспользуется специальной командой, чтобы активировать вашу подписку."}),c.jsx("li",{children:"Бот пришлет вам уведомление об успешной активации."})]})]})]})]})]})]}),XO=()=>c.jsxs("div",{className:"space-y-4 text-sm opacity-90",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Последнее обновление:"})," 17 сентября 2025 г."]}),c.jsx("p",{children:"Настоящее Пользовательское соглашение (далее – «Соглашение») регулирует отношения между Администрацией приложения Tenebris Verbum (далее – «Администрация», «Сервис») и пользователем сети Интернет (далее – «Пользователь»), возникающие при использовании Сервиса."}),c.jsx("p",{children:"Перед началом использования Сервиса, пожалуйста, внимательно ознакомьтесь с его условиями. Начало использования Сервиса означает ваше полное и безоговорочное принятие (Акцепт) настоящего Соглашения. Если вы не согласны с какими-либо из его положений, вы должны немедленно прекратить использование Сервиса."}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-base mb-2",children:"1. Основные термины"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[c.jsxs("li",{children:[c.jsx("b",{children:"Сервис:"})," Веб-приложение Tenebris Verbum, предоставляющее доступ к художественным текстам (контенту) в режиме онлайн-чтения."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Пользователь:"})," Любое физическое лицо, достигшее 18 лет (или обладающее полной дееспособностью), которое осуществляет доступ к Сервису и принимает условия данного Соглашения."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Акцепт:"})," Полное и безоговорочное принятие Пользователем условий настоящего Соглашения, которое совершается путем продолжения использования Сервиса."]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-base mb-2",children:"2. Предмет Соглашения"}),c.jsx("p",{children:"2.1. Администрация предоставляет Пользователю неисключительное, безвозмездное право на доступ к контенту, размещенному в Сервисе, исключительно для личного некоммерческого ознакомления путем чтения."}),c.jsx("p",{children:"2.2. Сервис не предоставляет технической возможности для скачивания, сохранения или любого другого способа копирования контента."})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-base mb-2",children:"3. Интеллектуальная собственность и правила использования контента"}),c.jsxs("p",{children:["3.1. ",c.jsx("b",{children:"Авторские права:"})," Все тексты, изображения и другие материалы, размещенные в Сервисе, являются объектами авторского права и защищены законодательством."]}),c.jsxs("div",{className:"mt-2",children:[c.jsxs("p",{children:["3.2. ",c.jsx("b",{children:"Запрещенные действия:"})," Пользователю категорически запрещается:"]}),c.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[c.jsx("li",{children:"Копировать, распространять, публично воспроизводить или иным образом использовать контент Сервиса в коммерческих или неличных целях."}),c.jsx("li",{children:"Использовать скрипты, боты или любые другие автоматизированные средства для сбора данных, массового скачивания или взаимодействия с Сервисом."}),c.jsx("li",{children:"Предпринимать попытки обойти технические ограничения, установленные Администрацией."})]})]}),c.jsxs("p",{className:"mt-2",children:["3.3. ",c.jsx("b",{children:"Процедура для правообладателей:"})," Если вы являетесь правообладателем и считаете, что ваши права нарушены, просим вас связаться с Администрацией через доступные каналы связи. Администрация обязуется рассмотреть ваше обращение и, в случае подтверждения нарушения, незамедлительно удалить соответствующий контент."]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-base mb-2",children:"4. Правовой статус Сервиса и ограничение ответственности"}),c.jsxs("p",{children:["4.1. ",c.jsx("b",{children:"Информационный посредник:"})," В соответствии со ст. 1253.1 ГК РФ, Сервис является информационным посредником. Администрация предоставляет платформу для размещения материалов и не является инициатором их создания, не изменяет их содержание и не несет ответственности за него до момента получения обоснованного уведомления о нарушении."]}),c.jsxs("p",{children:["4.2. ",c.jsx("b",{children:"Ответственность за контент:"})," Ответственность за правомерность использования контента несут независимые подрядчики, предоставляющие материалы для размещения и гарантирующие наличие у них всех необходимых прав. Администрация не несет ответственности за недобросовестные действия таких подрядчиков."]}),c.jsxs("p",{children:["4.3. ",c.jsx("b",{children:"Соблюдение законодательства:"})," Администрация принимает меры для соблюдения законодательства РФ, включая добавление обязательной маркировки, установку возрастной маркировки («18+») и незамедлительное удаление запрещенных материалов."]}),c.jsxs("p",{children:["4.4. ",c.jsx("b",{children:"Ограничение ответственности:"})," Администрация не несет ответственности за технические сбои, содержание произведений и любой косвенный ущерб, который может быть причинен Пользователю."]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-base mb-2",children:"5. Права и обязанности сторон"}),c.jsxs("div",{children:[c.jsxs("p",{children:["5.1. ",c.jsx("b",{children:"Администрация вправе:"})]}),c.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[c.jsx("li",{children:"В любое время изменять или удалять любой контент, изменять дизайн и функционал Сервиса."}),c.jsx("li",{children:"Применять технические средства защиты от вредоносных действий (например, блокировать IP-адреса, с которых исходит чрезмерное количество запросов или иная подозрительная активность)."}),c.jsx("li",{children:"Вносить изменения в настоящее Соглашение в одностороннем порядке. Новая редакция вступает в силу с момента ее публикации."})]})]}),c.jsxs("div",{className:"mt-2",children:[c.jsxs("p",{children:["5.2. ",c.jsx("b",{children:"Пользователь обязан:"})]}),c.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[c.jsx("li",{children:"Соблюдать условия настоящего Соглашения."}),c.jsx("li",{children:"Не использовать Сервис для распространения любой запрещенной информации."}),c.jsx("li",{children:"Соблюдать установленные возрастные ограничения."})]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-base mb-2",children:"6. Разрешение споров"}),c.jsx("p",{children:"6.1. Все споры и разногласия подлежат разрешению в соответствии с действующим законодательством Российской Федерации."}),c.jsx("p",{children:"6.2. Местом разрешения споров в судебном порядке является суд по месту нахождения Администрации."})]})]}),ZO=()=>c.jsxs("div",{className:"space-y-4 text-sm opacity-90",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Последнее обновление:"})," 17 сентября 2025 г."]}),c.jsx("p",{children:"Настоящая Политика конфиденциальности (далее – «Политика») является неотъемлемой частью Пользовательского соглашения и объясняет, какие данные мы собираем и для каких целей. Используя Сервис, вы выражаете безоговорочное согласие с настоящей Политикой."}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-base mb-2",children:"1. Собираемая информация"}),c.jsxs("div",{children:[c.jsxs("p",{children:["1.1. ",c.jsx("b",{children:"Данные, предоставляемые Пользователем:"})]}),c.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[c.jsxs("li",{children:[c.jsx("b",{children:"При регистрации:"})," Ваше имя, адрес электронной почты (email) и пароль (хранится в зашифрованном виде)."]}),c.jsxs("li",{children:[c.jsx("b",{children:"При взаимодействии:"})," Комментарии, лайки, закладки."]}),c.jsxs("li",{children:[c.jsx("b",{children:"При оплате:"})," Ваш Telegram ID для привязки к аккаунту и проверки статуса подписки."]})]})]}),c.jsxs("div",{className:"mt-2",children:[c.jsxs("p",{children:["1.2. ",c.jsx("b",{children:"Технические данные, собираемые автоматически:"})]}),c.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[c.jsxs("li",{children:[c.jsx("b",{children:"IP-адрес:"})," Для обеспечения безопасности и предотвращения злоупотреблений."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Информация о браузере, ОС и типе устройства:"})," Для корректной и адаптивной работы Сервиса."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Данные о взаимодействии с Сервисом:"})," Время доступа и информация о посещенных страницах внутри Сервиса для ведения внутренней аналитики."]})]})]}),c.jsxs("p",{className:"mt-2",children:["1.3. ",c.jsx("b",{children:"Что мы НЕ собираем:"})," Сервис целенаправленно ",c.jsx("b",{children:"не собирает"})," и не обрабатывает ваши точные данные геолокации, историю просмотров вне нашего Сервиса и другие персональные данные, не указанные выше."]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-base mb-2",children:"2. Цели обработки данных"}),c.jsxs("p",{children:["2.1. ",c.jsx("b",{children:"Обеспечение работы Сервиса:"})," Собранные данные необходимы для управления вашей учетной записью, предоставления доступа к функциям, обработки подписок и защиты от мошеннических действий."]}),c.jsxs("p",{children:["2.2. ",c.jsx("b",{children:"Аналитика и улучшение:"})," Обезличенные технические данные используются для анализа работы Сервиса, выявления проблем и его дальнейшего совершенствования."]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-base mb-2",children:"3. Передача и хранение данных"}),c.jsxs("p",{children:["3.1. ",c.jsx("b",{children:"Хранение:"})," Данные хранятся на защищенных серверах в течение срока, необходимого для выполнения целей их обработки."]}),c.jsxs("div",{children:[c.jsxs("p",{children:["3.2. ",c.jsx("b",{children:"Передача третьим лицам:"})," Мы не продаем ваши данные. Передача возможна только:"]}),c.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[c.jsx("li",{children:"Техническим подрядчикам (например, хостинг-провайдерам), которые обеспечивают работу Сервиса."}),c.jsx("li",{children:"Государственным органам по законному и обоснованному запросу."})]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-base mb-2",children:"4. Защита информации"}),c.jsx("p",{children:"Администрация принимает все необходимые и достаточные технические и организационные меры для защиты вашей информации от несанкционированного доступа, изменения или раскрытия."})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-base mb-2",children:"5. Изменение Политики"}),c.jsx("p",{children:"Администрация оставляет за собой право вносить изменения в настоящую Политику. Новая редакция вступает в силу с момента ее размещения в Сервисе. Продолжение использования Сервиса после внесения изменений означает ваше согласие с новой редакцией."})]})]}),fE=({onBack:t,onAccept:e})=>{const[n,i]=L.useState("guide"),s=[{id:"guide",title:"Руководство"},{id:"terms",title:"Соглашение"},{id:"privacy",title:"Политика"}];return c.jsxs("div",{className:"bg-background min-h-screen text-text-main pb-24",children:[" ",c.jsx(Kn,{title:"Справка и информация",onBack:e?void 0:t}),c.jsx("div",{className:"px-4 pt-4",children:c.jsx("div",{className:"flex space-x-1 rounded-lg bg-component-bg p-1 border border-border-color",children:s.map(r=>c.jsx("button",{onClick:()=>i(r.id),className:`w-full rounded-md py-2.5 text-sm font-medium transition-colors
                                ${n===r.id?"bg-accent text-white shadow":"text-text-main/70 hover:bg-background"}`,children:r.title},r.id))})}),c.jsxs("div",{className:"p-4",children:[n==="guide"&&c.jsx($O,{}),n==="terms"&&c.jsx(XO,{}),n==="privacy"&&c.jsx(ZO,{})]}),e&&c.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-sm border-t border-border-color shadow-lg",children:c.jsx("button",{onClick:e,className:"w-full bg-accent text-white font-bold py-3 px-4 rounded-lg hover:bg-accent/90 transition-colors",children:"Принять и продолжить"})})]})},WO=t=>t?typeof t.toDate=="function"?t.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"2-digit"}):(console.warn("Получен неожиданный формат даты:",t),""):"",JO=({novel:t,onSelectChapter:e,onGenreSelect:n,subscription:i,botUsername:s,userId:r,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:f})=>{const{user:m}=qS();if(!t)return c.jsxs("div",{children:[c.jsx(Kn,{title:"Загрузка...",onBack:f}),c.jsx("div",{className:"p-4 text-center",children:"Загрузка данных о новелле..."})]});L.useEffect(()=>{if(m&&t&&t.id){const Z=`viewed-${t.id}`;if(!sessionStorage.getItem(Z)){sessionStorage.setItem(Z,"true");const pe=St(We,"novel_stats",t.id.toString());fl(pe,{views:cD(1)},{merge:!0}).catch(B=>console.error("Ошибка обновления счетчика просмотров:",B))}}},[t,m]);const[g,p]=L.useState(!1),[_,C]=L.useState(null),[V,D]=L.useState("newest"),[w,E]=L.useState(!1),x=L.useRef(null),[O,U]=L.useState(!1),H=Array.isArray(t.genres)?t.genres:[],T=i&&i.expires_at&&typeof i.expires_at.toDate=="function"&&i.expires_at.toDate()>new Date,v=L.useMemo(()=>u&&t&&u[t.id]?u[t.id].chapterId:null,[u,t]);L.useEffect(()=>{x.current&&setTimeout(()=>{x.current&&U(x.current.scrollHeight>x.current.clientHeight)},100)},[t.description]);const b=L.useMemo(()=>{if(!Array.isArray(a))return[];const Z=[...a];return V==="newest"?Z.reverse():a},[a,V]),S=Z=>{!T&&Z.isPaid?p(!0):e(Z)},R=()=>{if(v){const Z=a.find(pe=>pe.id===v);Z&&e(Z)}},I=Z=>C(Z),A=async Z=>{var B;const pe=(B=window.Telegram)==null?void 0:B.WebApp;if(!pe||!r||!_){console.error("Telegram Web App, userId, or selectedPlan is not available."),pe&&pe.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}pe.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не реагирует после того, как вы выбрали тариф, не волнуйтесь! Попробуйте отправить команду /start еще раз.",async $=>{if(!$)return;const Y=St(We,"users",r);try{await fl(Y,{pendingSubscription:{..._,method:Z,date:new Date().toISOString()}},{merge:!0}),pe.openTelegramLink(`https://t.me/${s}?start=${r}`),pe.close()}catch(ue){console.error("Ошибка записи в Firebase:",ue),pe.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};return console.log("Содержимое глав:",b),c.jsxs("div",{className:"text-text-main",children:[c.jsx(Kn,{title:t.title,onBack:f}),c.jsxs("div",{className:"relative h-64",children:[c.jsx("img",{src:`/${t.coverUrl}`,alt:t.title,className:"w-full h-full object-cover object-top absolute"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),c.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[c.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:t.title}),c.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:t.author})]})]}),c.jsxs("div",{className:"p-4",children:[c.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:H.map(Z=>{const B=`
            text-xs font-semibold px-3 py-1 rounded-full transition-colors 
            duration-200 bg-component-bg border hover:bg-border-color
            ${Z==="16+"||Z==="18+"?"border-genre-highlight-border text-genre-highlight-text":"border-border-color text-text-main"}
        `;return c.jsx("button",{onClick:()=>n(Z),className:B,children:Z},Z)})}),c.jsx("div",{ref:x,className:`relative overflow-hidden transition-all duration-500 ${w?"max-h-full":"max-h-24"}`,children:c.jsx("div",{className:"text-sm mb-2 opacity-80 font-body prose",dangerouslySetInnerHTML:{__html:t.description}})}),O&&c.jsx("div",{className:"text-right mt-2",children:c.jsx("button",{onClick:()=>E(!w),className:"text-sm font-semibold text-accent mb-4",children:w?"Скрыть":"Читать полностью..."})}),v&&c.jsxs("button",{onClick:R,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",v,")"]}),c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),c.jsx("button",{onClick:()=>D(Z=>Z==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:V==="newest"?"Сначала новые":"Сначала старые"})]}),T&&c.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",i.expires_at.toDate().toLocaleDateString()]}),l?c.jsx("p",{children:"Загрузка глав..."}):c.jsx("div",{className:"flex flex-col gap-3",children:b.map((Z,pe)=>{const B=!T&&Z.isPaid,$=v===Z.id,Y=V==="newest"?b.length-pe:pe+1;return c.jsxs("div",{onClick:()=>S(Z),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${B?"opacity-70":""}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[$&&c.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),c.jsx("p",{className:"font-semibold",children:Z.title})]}),c.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[c.jsx("div",{className:"bg-accent rounded-full w-8 h-8 flex items-center justify-center ml-auto",children:c.jsx("span",{className:"text-white font-bold text-sm",children:Y})}),c.jsx("p",{className:"text-text-main opacity-70 text-xs mt-1",children:WO(Z.published_at)})]})]},Z.id)})}),g&&c.jsx(Sg,{onClose:()=>p(!1),onSelectPlan:I}),_&&c.jsx(Ag,{onClose:()=>C(null),onSelectMethod:A,plan:_})]})]})},eV=({chapter:t,novel:e,userId:n,userName:i,subscription:s,botUsername:r,onBack:a,isUserAdmin:l,allChapters:u,onSelectChapter:f,fontSize:m,onFontSizeChange:g,fontFamily:p,onFontFamilyChange:_,lineHeight:C,onLineHeightChange:V,textAlign:D,onTextAlignChange:w,textIndent:E,onTextIndentChange:x,paragraphSpacing:O,onParagraphSpacingChange:U})=>{if(!e||!t)return c.jsxs("div",{children:[c.jsx(Kn,{title:"Загрузка...",onBack:a}),c.jsx("div",{className:"p-4 text-center",children:"Подготовка главы..."})]});const[H,T]=L.useState([]),[v,b]=L.useState(new Set),[S,R]=L.useState(null),[I,A]=L.useState(!0),[Z,pe]=L.useState(!1),[B,$]=L.useState(""),[Y,ue]=L.useState(null),[ce,Zt]=L.useState(""),[ot,me]=L.useState(null),[lt,qe]=L.useState(""),[Qa,Ut]=L.useState(0),[Oi,Zn]=L.useState(!1),[Vi,wn]=L.useState(!1),[Wn,Mi]=L.useState(!1),[Os,Jn]=L.useState(!1),[ei,K]=L.useState(null),[re,Pe]=L.useState(""),[He,Ke]=L.useState(!0),ti=s&&s.expires_at&&typeof s.expires_at.toDate=="function"&&s.expires_at.toDate()>new Date,mt=L.useMemo(()=>St(We,"chapters_metadata",`${e.id}_${t.id}`),[e.id,t.id]),Wt=L.useMemo(()=>Vh(We,`chapters_metadata/${e.id}_${t.id}/comments`),[e.id,t.id]),Fl=L.useCallback(async()=>{if(!(Z||!I||!S)){pe(!0);try{const F=Gc(Wt,_m("timestamp","desc"),tS(S),vm(20)),ee=await hl(F),ie=ee.docs.map(Oe=>({id:Oe.id,...Oe.data(),userHasLiked:v.has(Oe.id)}));T(Oe=>[...Oe,...ie]);const Ee=ee.docs[ee.docs.length-1];R(Ee||null),A(ee.docs.length>=20)}catch(F){console.error("Ошибка подгрузки комментариев: ",F)}finally{pe(!1)}}},[Z,I,S,Wt,v]);L.useEffect(()=>{if(!n||!(e!=null&&e.id)||!(t!=null&&t.id)){T([]),pe(!1);return}(async()=>{var ee,ie,Ee;pe(!0),T([]),R(null),A(!0);try{const Oe=Mr(mt),we=Mr(St(We,`chapters_metadata/${e.id}_${t.id}/likes`,n)),Ce=Mr(St(We,"user_comment_likes",n)),bt=hl(Gc(Wt,_m("timestamp","desc"),vm(20))),[tt,Er,ni,Dn]=await Promise.all([Oe,we,Ce,bt]);Ut(tt.exists()&&tt.data().likeCount||0),Zn((Er==null?void 0:Er.exists())??!1);const Qh=`${e.id}_${t.id}`,Kh=((Ee=(ie=(ee=ni==null?void 0:ni.data())==null?void 0:ee.chapters)==null?void 0:ie[Qh])==null?void 0:Ee.likedCommentIds)||[],ii=new Set(Kh);b(ii);const Yh=Dn.docs.map(ki=>({id:ki.id,...ki.data(),userHasLiked:ii.has(ki.id)}));T(Yh);const $h=Dn.docs[Dn.docs.length-1];R($h||null),A(Dn.docs.length>=20)}catch(Oe){console.error("Ошибка загрузки данных главы:",Oe),T([])}finally{pe(!1)}})()},[mt,n,e.id,t.id,Wt]),L.useEffect(()=>{(async()=>{if(Ke(!0),Pe(""),t.isPaid&&!ti){Ke(!1),Pe(`### 🔒 Для доступа к этой главе необходима подписка.

Пожалуйста, оформите подписку в разделе "Профиль", чтобы продолжить чтение.`);return}try{const ee=St(We,"chapter_content",`${e.id}-${t.id}`),ie=await Mr(ee);ie.exists()?Pe(ie.data().content):Pe(`## Ошибка

Не удалось загрузить текст главы. Пожалуйста, попробуйте позже.`)}catch(ee){console.error("Ошибка загрузки главы:",ee),Pe(`## Ошибка

Произошла ошибка при загрузке. Проверьте ваше интернет-соединение.`)}finally{Ke(!1)}})()},[e.id,t.id,t.isPaid,ti]);const ut=L.useCallback(async(F,ee=null)=>{F.preventDefault();const ie=ee?lt:B;if(!(!ie.trim()||!n))try{await fl(mt,{},{merge:!0});const Ee={userId:n,userName:i||"Аноним",text:ie,timestamp:Qv(),likeCount:0,novelTitle:e.title,chapterTitle:t.title,isNotified:!1};if(ee){Ee.replyTo=ee;const we=await Mr(St(Wt,ee));we.exists()&&(Ee.parentUserId=we.data().userId)}const Oe=await iD(Wt,Ee);T(we=>[{...Ee,id:Oe.id,userHasLiked:!1,timestamp:new Date},...we]),ee?(me(null),qe("")):$("")}catch(Ee){console.error("Ошибка добавления комментария:",Ee)}},[n,i,B,lt,mt,e.title,t.title,Wt]),Tt=L.useCallback(async F=>{if(!n)return;const ee=v.has(F);b(we=>{const Ce=new Set(we);return ee?Ce.delete(F):Ce.add(F),Ce}),T(we=>we.map(Ce=>Ce.id===F?{...Ce,userHasLiked:!ee,likeCount:ee?(Ce.likeCount||1)-1:(Ce.likeCount||0)+1}:Ce));const ie=St(We,`chapters_metadata/${e.id}_${t.id}/comments`,F),Ee=St(We,"user_comment_likes",n),Oe=`${e.id}_${t.id}`;try{await Gv(We,async we=>{const Ce=await we.get(ie);if(!Ce.exists())return;const bt=Ce.data().likeCount||0,tt=`chapters.${Oe}.likedCommentIds`;ee?(we.update(ie,{likeCount:Math.max(0,bt-1)}),we.update(Ee,{[tt]:uD(F)})):(we.update(ie,{likeCount:bt+1}),we.set(Ee,{chapters:{[Oe]:{likedCommentIds:lD(F)}}},{merge:!0}))})}catch(we){console.error("Ошибка при обновлении лайка комментария:",we),b(Ce=>{const bt=new Set(Ce);return ee?bt.add(F):bt.delete(F),bt}),T(Ce=>Ce.map(bt=>bt.id===F?{...bt,userHasLiked:ee,likeCount:ee?(bt.likeCount||0)+1:(bt.likeCount||1)-1}:bt))}},[n,e.id,t.id,v]),yr=L.useCallback(F=>{ue(F?F.id:null),Zt(F?F.text:"")},[]),Gl=L.useCallback(async F=>{if(!ce.trim())return;const ee=St(We,`chapters_metadata/${e.id}_${t.id}/comments`,F);await tD(ee,{text:ce}),T(ie=>ie.map(Ee=>Ee.id===F?{...Ee,text:ce}:Ee)),ue(null),Zt("")},[ce,e.id,t.id]),Ql=L.useCallback(async F=>{const ee=St(We,`chapters_metadata/${e.id}_${t.id}/comments`,F);await nD(ee),T(ie=>ie.filter(Ee=>Ee.id!==F))},[e.id,t.id]),Gh=L.useCallback(F=>{me(ee=>ee===F?null:F),qe("")},[]),Vs=async()=>{if(!n)return;const F=Oi;Zn(!F),Ut(ie=>F?ie-1:ie+1);const ee=St(We,`chapters_metadata/${e.id}_${t.id}/likes`,n);try{await Gv(We,async ie=>{var we;const Oe=((we=(await ie.get(mt)).data())==null?void 0:we.likeCount)||0;F?(ie.delete(ee),ie.set(mt,{likeCount:Math.max(0,Oe-1)},{merge:!0})):(ie.set(ee,{timestamp:Qv()}),ie.set(mt,{likeCount:Oe+1},{merge:!0}))})}catch(ie){console.error("Ошибка при обновлении лайка:",ie),Zn(F),Ut(Ee=>F?Ee+1:Ee-1)}},_r=F=>{F&&(!ti&&F.isPaid?(wn(!1),Jn(!0)):(f(F),wn(!1)))},Kl=F=>{K(F),Jn(!1)},Ka=async F=>{var ie;const ee=(ie=window.Telegram)==null?void 0:ie.WebApp;ee&&n&&ei&&ee.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async Ee=>{if(Ee){const Oe=St(We,"users",n);try{await fl(Oe,{pendingSubscription:{...ei,method:F,date:new Date().toISOString()}},{merge:!0}),ee.openTelegramLink(`https://t.me/${r}?start=${n}`),ee.close()}catch(we){console.error("Ошибка записи в Firebase:",we),ee.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})},Yl=u.findIndex(F=>F.id===t.id),$l=u[Yl-1],vr=u[Yl+1],Xl=F=>window.marked?`<div class="prose max-w-none">${window.marked.parse(F)}</div>`:F,Zl=L.useMemo(()=>{const F=[...H].sort((ee,ie)=>{var we,Ce;const Ee=(we=ee.timestamp)!=null&&we.toDate?ee.timestamp.toDate().getTime():0,Oe=(Ce=ie.timestamp)!=null&&Ce.toDate?ie.timestamp.toDate().getTime():0;return Ee-Oe});return HO(F)},[H]),Ms={fontSize:`${m}px`,fontFamily:p,lineHeight:C,textAlign:D};return c.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[c.jsx("style",{children:`
            .chapter-content p {
              text-indent: ${E}em;
              margin-bottom: ${O}em;
            }
          `}),c.jsx(Kn,{title:e.title,onBack:a}),c.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[c.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:t.title}),c.jsx("div",{className:"whitespace-normal chapter-content",style:Ms,dangerouslySetInnerHTML:{__html:He?'<p class="text-center">Загрузка текста главы...</p>':Xl(re)}}),c.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"╚══ ≪ °❈° ≫ ══╝"}),c.jsxs("div",{className:"border-t border-border-color pt-8",children:[c.jsx("div",{className:"flex items-center gap-4 mb-8",children:c.jsxs("button",{onClick:Vs,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[c.jsx(GS,{filled:Oi,className:Oi?"text-accent":""}),c.jsx("span",{className:"font-bold text-lg",children:Qa})]})}),c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Комментарии"}),c.jsxs("div",{className:"space-y-4 mb-6",children:[H.length>0?Zl.reverse().map(F=>c.jsx(KS,{comment:F,onReply:Gh,onLike:Tt,onEdit:yr,onDelete:Ql,onUpdate:Gl,isUserAdmin:l,currentUserId:n,editingCommentId:Y,editingText:ce,setEditingText:Zt,replyingTo:ot,replyText:lt,setReplyText:qe,onCommentSubmit:ut},F.id)):!Z&&c.jsx("p",{className:"opacity-70 text-sm",children:"Комментариев пока нет. Будьте первым!"}),Z&&H.length===0&&c.jsx("p",{className:"text-center opacity-70",children:"Загрузка комментариев..."}),I&&!Z&&H.length>0&&c.jsx("div",{className:"text-center pt-4",children:c.jsx("button",{onClick:Fl,disabled:Z,className:"text-accent hover:underline font-semibold px-4 py-2 rounded-lg disabled:opacity-50",children:Z?"Загрузка...":"Загрузить ещё"})})]}),c.jsxs("form",{onSubmit:F=>ut(F,null),className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:B,onChange:F=>$(F.target.value),placeholder:"Написать комментарий...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),c.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:c.jsx(QS,{className:"w-5 h-5"})})]})]})]}),c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[c.jsx("button",{onClick:()=>_r($l),disabled:!$l,className:"p-2 disabled:opacity-50",children:c.jsx(HS,{})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>wn(!0),className:"px-4 py-2 rounded-lg bg-background",children:"Оглавление"}),c.jsx("button",{onClick:()=>Mi(!0),className:"p-2 rounded-lg bg-background",children:c.jsx(zO,{})})]}),c.jsx("button",{onClick:()=>_r(vr),disabled:!vr,className:"p-2 disabled:opacity-50",children:c.jsx(MO,{className:"opacity-100"})})]}),Vi&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>wn(!1),children:c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:F=>F.stopPropagation(),children:[c.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:"Главы"}),c.jsx("div",{className:"overflow-y-auto",children:c.jsx("div",{className:"flex flex-col gap-2",children:u.map(F=>c.jsx("button",{onClick:()=>_r(F),className:`p-2 text-left rounded-md ${F.id===t.id?"bg-accent text-white":"bg-background"}`,children:F.title},F.id))})})]})}),Wn&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>Mi(!1),children:c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:F=>F.stopPropagation(),children:[c.jsx("h3",{className:"font-bold text-lg mb-4",children:"Настройки чтения"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Размер текста"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>g(-1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"-"}),c.jsx("span",{children:m}),c.jsx("button",{onClick:()=>g(1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"+"})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Шрифт"}),c.jsxs("div",{className:"flex gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>_("'JetBrains Mono', monospace"),className:`px-3 py-1 rounded-md text-sm ${p&&p.includes("JetBrains Mono")?"bg-accent text-white":"bg-background"}`,children:"Стандарт"}),c.jsx("button",{onClick:()=>_("'Montserrat', sans-serif"),className:`px-3 py-1 rounded-md text-sm ${p&&p.includes("Montserrat")?"bg-accent text-white":"bg-background"}`,children:"Montserrat"}),c.jsx("button",{onClick:()=>_("'Lora', serif"),className:`px-3 py-1 rounded-md text-sm ${p&&p.includes("Lora")?"bg-accent text-white":"bg-background"}`,children:"Lora"})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Интервал"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>V(-.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"-"}),c.jsx("span",{children:C.toFixed(1)}),c.jsx("button",{onClick:()=>V(.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"+"})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Выравнивание"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>w("left"),className:`px-3 py-1 rounded-md ${D==="left"?"bg-accent text-white":"bg-background"}`,children:"По левому"}),c.jsx("button",{onClick:()=>w("justify"),className:`px-3 py-1 rounded-md ${D==="justify"?"bg-accent text-white":"bg-background"}`,children:"По ширине"})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Красная строка"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>x(0),className:`px-3 py-1 rounded-md ${E===0?"bg-accent text-white":"bg-background"}`,children:"Нет"}),c.jsx("button",{onClick:()=>x(1.5),className:`px-3 py-1 rounded-md ${E===1.5?"bg-accent text-white":"bg-background"}`,children:"Да"}),c.jsx("button",{onClick:()=>x(3),className:`px-3 py-1 rounded-md ${E===3?"bg-accent text-white":"bg-background"}`,children:"Большая"})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Отступ абзаца"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>U(-.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"-"}),c.jsx("span",{children:O.toFixed(1)}),c.jsx("button",{onClick:()=>U(.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"+"})]})]})]})]})}),Os&&c.jsx(Sg,{onClose:()=>Jn(!1),onSelectPlan:Kl}),ei&&c.jsx(Ag,{onClose:()=>K(null),onSelectMethod:Ka,plan:ei})]})},tV=({onSelectNovel:t,bookmarks:e,onToggleBookmark:n})=>{const[i,s]=L.useState([]),[r,a]=L.useState(!0);return L.useEffect(()=>{(async()=>{if(a(!0),s([]),!e||e.length===0){a(!1);return}const u=[];for(let f=0;f<e.length;f+=30)u.push(e.slice(f,f+30));try{let f=[];const m=u.map(p=>{const _=Gc(Vh(We,"novels"),eS(QN(),"in",p));return hl(_)});(await Promise.all(m)).forEach(p=>{p.docs.forEach(_=>{f.push({id:_.id,..._.data()})})}),s(f)}catch(f){console.error("Ошибка загрузки новелл из закладок:",f)}a(!1)})()},[e]),c.jsxs("div",{children:[c.jsx(Kn,{title:"Закладки"}),r?c.jsx("div",{className:"text-center p-8",children:c.jsx("p",{children:"Загрузка..."})}):i.length>0?c.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:i.map((l,u)=>c.jsx("div",{onClick:()=>t(l),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${u*50}ms`},children:c.jsxs("div",{className:"relative transition-all duration-300",children:[c.jsx("button",{onClick:f=>{f.stopPropagation(),n(l.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${e.includes(l.id)?"text-accent":""}`,children:c.jsx(Fh,{filled:e.includes(l.id),width:"20",height:"20"})}),c.jsx("img",{src:`/${l.coverUrl}`,alt:l.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),c.jsxs("div",{className:"flex items-center justify-between mt-2 gap-2",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[" ",c.jsx("h2",{className:"font-semibold text-xs truncate text-text-main",children:l.title})]}),l.views>0&&c.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-60 flex-shrink-0",children:[" ",c.jsx(wg,{className:"w-4 h-4"})," ",c.jsx("span",{children:l.views})]})]})]})},l.id))}):c.jsx("p",{className:"text-center text-text-main opacity-70 mt-8",children:"У вас пока нет закладок."})]})},nV=({user:t,subscription:e,onGetSubscriptionClick:n,userId:i,auth:s,onThemeToggle:r,currentTheme:a,onShowHelp:l})=>{const u=()=>{_4(s).catch(_=>{console.error("Ошибка выхода:",_)})},f=()=>{i&&navigator.clipboard.writeText(i).then(()=>console.log("Firebase UID скопирован в буфер обмена")).catch(_=>console.error("Не удалось скопировать UID: ",_))},g=e&&e.expires_at&&typeof e.expires_at.toDate=="function"?e.expires_at.toDate():null,p=g&&g>new Date;return c.jsxs("div",{children:[c.jsx(Kn,{title:"Профиль"}),c.jsx("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg",children:(t==null?void 0:t.displayName)||"Аноним"}),c.jsx("p",{className:"text-sm text-text-main/70",children:t==null?void 0:t.email})]}),c.jsx("button",{onClick:u,className:"p-2 rounded-full hover:bg-background transition-colors",children:c.jsx(BO,{})})]})}),c.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[c.jsx("h3",{className:"font-bold mb-2",children:"Настройки"}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Тёмная тема"}),c.jsx("button",{onClick:r,className:"w-14 h-7 rounded-full bg-background flex items-center transition-colors p-1",children:c.jsx("div",{className:`w-5 h-5 rounded-full bg-accent shadow-md transform transition-transform ${a==="dark"?"translate-x-7":""}`})})]})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[c.jsx("h3",{className:"font-bold mb-2",children:"Подписка"}),p?c.jsxs("div",{children:[c.jsx("p",{className:"text-green-500",children:"Активна"}),c.jsxs("p",{className:"text-sm opacity-70",children:["Заканчивается: ",g.toLocaleDateString()]})]}):c.jsxs("div",{children:[c.jsx("p",{className:"text-red-500",children:"Неактивна"}),c.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Оформите подписку, чтобы получить доступ ко всем платным главам."}),c.jsx("button",{onClick:n,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:"Оформить подписку"})]})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[c.jsx("h3",{className:"font-bold mb-2",children:"Ваш ID для привязки"}),c.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Этот ID нужен для связи вашего аккаунта с Telegram-ботом. Например, после подписки на Boosty."}),c.jsx("div",{className:"bg-background p-2 rounded-md text-xs break-all mb-3",children:c.jsx("code",{children:i||"Загрузка..."})}),c.jsx("button",{onClick:f,disabled:!i,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold transition-all hover:scale-105 disabled:opacity-50",children:"Копировать ID"})]}),c.jsx("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4",children:c.jsx("button",{onClick:l,className:"w-full text-left text-sm text-accent hover:underline",children:"Справка и правовая информация"})})]})},iV=({onSelectNovel:t,bookmarks:e,onToggleBookmark:n})=>{const[i,s]=L.useState(""),[r,a]=L.useState([]),[l,u]=L.useState(!0);L.useEffect(()=>{(async()=>{u(!0);try{const p=(await hl(Vh(We,"novels"))).docs.map(_=>({id:_.id,..._.data()}));a(p)}catch(g){console.error("Ошибка загрузки новелл для поиска:",g)}u(!1)})()},[]);const f=L.useMemo(()=>i?r.filter(m=>m.title.toLowerCase().includes(i.toLowerCase())):[],[r,i]);return c.jsxs("div",{children:[c.jsx(Kn,{title:"Поиск"}),c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:c.jsx(FS,{className:"text-text-main opacity-50"})}),c.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:i,onChange:m=>s(m.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent"})]})}),l?c.jsx("div",{className:"text-center p-8",children:c.jsx("p",{children:"Загрузка..."})}):c.jsxs(c.Fragment,{children:[i&&c.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:f.map((m,g)=>c.jsx("div",{onClick:()=>t(m),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${g*50}ms`},children:c.jsxs("div",{className:"relative transition-all duration-300",children:[c.jsx("button",{onClick:p=>{p.stopPropagation(),n(m.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${e.includes(m.id)?"text-accent":""}`,children:c.jsx(Fh,{filled:e.includes(m.id),width:"20",height:"20"})}),c.jsx("img",{src:`/${m.coverUrl}`,alt:m.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),c.jsxs("div",{className:"flex items-center justify-between mt-2 gap-2",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[" ",c.jsx("h2",{className:"font-semibold text-xs truncate text-text-main",children:m.title})]}),m.views>0&&c.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-60 flex-shrink-0",children:[" ",c.jsx(wg,{className:"w-4 h-4"})," ",c.jsx("span",{children:m.views})]})]})]})},m.id))}),i&&f.length===0&&c.jsx("p",{className:"text-center text-text-main opacity-70 mt-8",children:"Ничего не найдено"}),!i&&c.jsx("p",{className:"text-center text-text-main opacity-70 mt-8",children:"Начните вводить название новеллы..."})]})]})};function sV(){const{user:t,loading:e}=qS(),[n,i]=L.useState(localStorage.getItem("theme")||"light"),[s,r]=L.useState("list"),[a,l]=L.useState("library"),[u,f]=L.useState(null),[m,g]=L.useState(null),[p,_]=L.useState(null),[C,V]=L.useState(null),[D,w]=L.useState(!1),[E,x]=L.useState([]),[O,U]=L.useState(!0),[H,T]=L.useState({}),[v,b]=L.useState([]),[S,R]=L.useState(!1),[I,A]=L.useState(null),[Z,pe]=L.useState(null),[B,$]=L.useState(!1),[Y,ue]=L.useState(!1),[ce,Zt]=L.useState(()=>{const K=localStorage.getItem("readingSettings"),re={fontSize:16,fontFamily:"'JetBrains Mono', monospace",lineHeight:1.6,textAlign:"left",textIndent:1.5,paragraphSpacing:1};return K?{...re,...JSON.parse(K)}:re}),ot="tenebrisverbot",me=t==null?void 0:t.uid,lt=L.useCallback(()=>{s==="reader"?(g(null),r("details")):s==="details"&&(f(null),_(null),r("list"))},[s]);L.useEffect(()=>{window.document.documentElement.classList.toggle("dark",n==="dark"),localStorage.setItem("theme",n)},[n]),L.useEffect(()=>{localStorage.setItem("readingSettings",JSON.stringify(ce))},[ce]),L.useEffect(()=>{if(e)return;if(!t){V(null),b([]),T({}),ue(!1);return}(async()=>{try{const He=await t.getIdTokenResult();w(!!He.claims.admin)}catch(He){console.error("Ошибка проверки статуса администратора:",He),w(!1)}})();const re=St(We,"users",t.uid),Pe=sD(re,He=>{if(He.exists()){const Ke=He.data();V(Ke.subscription||null),T(Ke.lastRead||{}),b(Ke.bookmarks||[]),Ke.settings&&Zt(ti=>({...ti,...Ke.settings})),Ke.policyAccepted?ue(!1):ue(!0)}else ue(!0)},He=>{console.error("Ошибка подписки на данные пользователя:",He)});return()=>Pe()},[t,e]),L.useEffect(()=>{if(!u){x([]);return}U(!0),(async()=>{try{const re=St(We,"chapter_info",u.id),Pe=await Mr(re);if(Pe.exists()&&Pe.data()){const Ke=Pe.data().chapters||{},ti=Object.keys(Ke).map(mt=>({id:parseInt(mt),title:`Глава ${mt}`,isPaid:Ke[mt].isPaid||!1,published_at:Ke[mt].published_at||null})).sort((mt,Wt)=>mt.id-Wt.id);x(ti)}else x([])}catch(re){console.error("Ошибка загрузки глав:",re),x([])}finally{U(!1)}})()},[u]),L.useEffect(()=>{var re;const K=(re=window.Telegram)==null?void 0:re.WebApp;if(K)return K.ready(),K.expand(),K.onEvent("backButtonClicked",lt),s==="list"||Y?K.BackButton.hide():K.BackButton.show(),()=>K.offEvent("backButtonClicked",lt)},[s,lt,Y]);const qe=L.useCallback(async K=>{me&&await fl(St(We,"users",me),K,{merge:!0})},[me]),Qa=()=>i(K=>K==="light"?"dark":"light"),Ut=L.useCallback((K,re)=>{Zt(Pe=>{const He=typeof re=="function"?re(Pe[K]):re;if(K==="fontSize"&&(He<12||He>28)||(K==="lineHeight"||K==="paragraphSpacing")&&(He<1||He>2.5))return Pe;const Ke={...Pe,[K]:He};return qe({settings:Ke}),Ke})},[qe]),Oi=L.useCallback(async K=>{if(g(K),r("reader"),me&&u){const re={...H,[u.id]:{novelId:u.id,chapterId:K.id,timestamp:new Date().toISOString()}};T(re),await qe({lastRead:re})}},[me,u,H,qe]),Zn=K=>{f(K),r("details")},Vi=K=>{_(K),r("list"),l("library")},wn=()=>_(null),Wn=L.useCallback(async K=>{const re=v.includes(K)?v.filter(Pe=>Pe!==K):[...v,K];b(re),await qe({bookmarks:re})},[v,qe]),Mi=K=>{A(K),R(!1)},Os=async K=>{var Pe;const re=(Pe=window.Telegram)==null?void 0:Pe.WebApp;if(!re||!me||!I){re&&re.showAlert("Произошла ошибка.");return}re.showConfirm("Вы будете перенаправлены в бот для завершения оплаты...",async He=>{if(He)try{await qe({pendingSubscription:{...I,method:K,date:new Date().toISOString()}}),re.openTelegramLink(`https://t.me/${ot}?start=${me}`),re.close()}catch(Ke){console.error("Ошибка записи в Firebase:",Ke),re.showAlert("Не удалось сохранить ваш выбор.")}})},Jn=async()=>{me&&(await qe({policyAccepted:!0}),ue(!1))};if(e)return c.jsx(GO,{});if(t&&Y)return c.jsx(fE,{onAccept:Jn});if(B)return c.jsx(fE,{onBack:()=>$(!1)});if(!t)return c.jsx(VO,{});const ei=()=>{if(s==="details")return c.jsx(JO,{novel:u,onSelectChapter:Oi,onGenreSelect:Vi,subscription:C,botUsername:ot,userId:me,chapters:E,isLoadingChapters:O,lastReadData:H,onBack:lt});if(s==="reader")return c.jsx(eV,{chapter:m,novel:u,userId:me,userName:(t==null?void 0:t.displayName)||"Аноним",allChapters:E,subscription:C,botUsername:ot,onBack:lt,isUserAdmin:D,onSelectChapter:Oi,fontSize:ce.fontSize,onFontSizeChange:K=>Ut("fontSize",re=>re+K),fontFamily:ce.fontFamily,onFontFamilyChange:K=>Ut("fontFamily",K),lineHeight:ce.lineHeight,onLineHeightChange:K=>Ut("lineHeight",re=>re+K),textAlign:ce.textAlign,onTextAlignChange:K=>Ut("textAlign",K),textIndent:ce.textIndent,onTextIndentChange:K=>Ut("textIndent",K),paragraphSpacing:ce.paragraphSpacing,onParagraphSpacingChange:K=>Ut("paragraphSpacing",re=>re+K)});switch(a){case"library":return c.jsxs(c.Fragment,{children:[c.jsx(Kn,{title:"Библиотека"}),c.jsx(KO,{onReadMore:pe}),p&&c.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[c.jsxs("p",{className:"text-sm",children:[c.jsx("span",{className:"opacity-70",children:"Жанр:"}),c.jsx("strong",{className:"ml-2",children:p})]}),c.jsx("button",{onClick:wn,className:"text-xs font-bold text-accent hover:underline",children:"Сбросить"})]}),c.jsx(qO,{onSelectNovel:Zn,bookmarks:v,onToggleBookmark:Wn,genreFilter:p})]});case"search":return c.jsx(iV,{onSelectNovel:Zn,bookmarks:v,onToggleBookmark:Wn});case"bookmarks":return c.jsx(tV,{onSelectNovel:Zn,bookmarks:v,onToggleBookmark:Wn});case"profile":return c.jsx(nV,{user:t,subscription:C,onGetSubscriptionClick:()=>R(!0),userId:me,auth:ml,onThemeToggle:Qa,currentTheme:n,onShowHelp:()=>$(!0)});default:return c.jsx(Kn,{title:"Библиотека"})}};return c.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${D?"":"no-select"}`,children:[c.jsx("div",{className:"pb-20",children:ei()}),s==="list"&&c.jsx(QO,{activeTab:a,setActiveTab:l}),S&&c.jsx(Sg,{onClose:()=>R(!1),onSelectPlan:Mi}),I&&c.jsx(Ag,{onClose:()=>A(null),onSelectMethod:Os,plan:I}),Z&&c.jsx(YO,{newsItem:Z,onClose:()=>pe(null)})]})}u2.createRoot(document.getElementById("root")).render(c.jsx(wE.StrictMode,{children:c.jsx(DO,{children:c.jsx(sV,{})})}));
