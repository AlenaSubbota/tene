(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function nw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rE={exports:{}},qc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw=Symbol.for("react.transitional.element"),rw=Symbol.for("react.fragment");function sE(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:iw,type:e,key:i,ref:t!==void 0?t:null,props:n}}qc.Fragment=rw;qc.jsx=sE;qc.jsxs=sE;rE.exports=qc;var _=rE.exports,aE={exports:{}},st={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm=Symbol.for("react.transitional.element"),sw=Symbol.for("react.portal"),aw=Symbol.for("react.fragment"),ow=Symbol.for("react.strict_mode"),lw=Symbol.for("react.profiler"),uw=Symbol.for("react.consumer"),cw=Symbol.for("react.context"),hw=Symbol.for("react.forward_ref"),fw=Symbol.for("react.suspense"),dw=Symbol.for("react.memo"),oE=Symbol.for("react.lazy"),Wg=Symbol.iterator;function mw(e){return e===null||typeof e!="object"?null:(e=Wg&&e[Wg]||e["@@iterator"],typeof e=="function"?e:null)}var lE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uE=Object.assign,cE={};function Ta(e,t,n){this.props=e,this.context=t,this.refs=cE,this.updater=n||lE}Ta.prototype.isReactComponent={};Ta.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ta.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hE(){}hE.prototype=Ta.prototype;function sm(e,t,n){this.props=e,this.context=t,this.refs=cE,this.updater=n||lE}var am=sm.prototype=new hE;am.constructor=sm;uE(am,Ta.prototype);am.isPureReactComponent=!0;var Jg=Array.isArray,zt={H:null,A:null,T:null,S:null,V:null},fE=Object.prototype.hasOwnProperty;function om(e,t,n,i,r,s){return n=s.ref,{$$typeof:rm,type:e,key:t,ref:n!==void 0?n:null,props:s}}function pw(e,t){return om(e.type,t,void 0,void 0,void 0,e.props)}function lm(e){return typeof e=="object"&&e!==null&&e.$$typeof===rm}function gw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ty=/\/+/g;function Gh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gw(""+e.key):t.toString(36)}function ey(){}function yw(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(ey,ey):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Es(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case rm:case sw:a=!0;break;case oE:return a=e._init,Es(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+Gh(e,0):i,Jg(r)?(n="",a!=null&&(n=a.replace(ty,"$&/")+"/"),Es(r,t,n,"",function(h){return h})):r!=null&&(lm(r)&&(r=pw(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(ty,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(Jg(e))for(var u=0;u<e.length;u++)i=e[u],s=l+Gh(i,u),a+=Es(i,t,n,s,r);else if(u=mw(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+Gh(i,u++),a+=Es(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return Es(yw(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function tu(e,t,n){if(e==null)return e;var i=[],r=0;return Es(e,i,"","",function(s){return t.call(n,s,r++)}),i}function _w(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ny=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function vw(){}st.Children={map:tu,forEach:function(e,t,n){tu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return tu(e,function(){t++}),t},toArray:function(e){return tu(e,function(t){return t})||[]},only:function(e){if(!lm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};st.Component=Ta;st.Fragment=aw;st.Profiler=lw;st.PureComponent=sm;st.StrictMode=ow;st.Suspense=fw;st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=zt;st.__COMPILER_RUNTIME={__proto__:null,c:function(e){return zt.H.useMemoCache(e)}};st.cache=function(e){return function(){return e.apply(null,arguments)}};st.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=uE({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!fE.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return om(e.type,r,void 0,void 0,s,i)};st.createContext=function(e){return e={$$typeof:cw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:uw,_context:e},e};st.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)fE.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return om(e,s,void 0,void 0,null,r)};st.createRef=function(){return{current:null}};st.forwardRef=function(e){return{$$typeof:hw,render:e}};st.isValidElement=lm;st.lazy=function(e){return{$$typeof:oE,_payload:{_status:-1,_result:e},_init:_w}};st.memo=function(e,t){return{$$typeof:dw,type:e,compare:t===void 0?null:t}};st.startTransition=function(e){var t=zt.T,n={};zt.T=n;try{var i=e(),r=zt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(vw,ny)}catch(s){ny(s)}finally{zt.T=t}};st.unstable_useCacheRefresh=function(){return zt.H.useCacheRefresh()};st.use=function(e){return zt.H.use(e)};st.useActionState=function(e,t,n){return zt.H.useActionState(e,t,n)};st.useCallback=function(e,t){return zt.H.useCallback(e,t)};st.useContext=function(e){return zt.H.useContext(e)};st.useDebugValue=function(){};st.useDeferredValue=function(e,t){return zt.H.useDeferredValue(e,t)};st.useEffect=function(e,t,n){var i=zt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};st.useId=function(){return zt.H.useId()};st.useImperativeHandle=function(e,t,n){return zt.H.useImperativeHandle(e,t,n)};st.useInsertionEffect=function(e,t){return zt.H.useInsertionEffect(e,t)};st.useLayoutEffect=function(e,t){return zt.H.useLayoutEffect(e,t)};st.useMemo=function(e,t){return zt.H.useMemo(e,t)};st.useOptimistic=function(e,t){return zt.H.useOptimistic(e,t)};st.useReducer=function(e,t,n){return zt.H.useReducer(e,t,n)};st.useRef=function(e){return zt.H.useRef(e)};st.useState=function(e){return zt.H.useState(e)};st.useSyncExternalStore=function(e,t,n){return zt.H.useSyncExternalStore(e,t,n)};st.useTransition=function(){return zt.H.useTransition()};st.version="19.1.1";aE.exports=st;var B=aE.exports;const Ew=nw(B);var dE={exports:{}},Hc={},mE={exports:{}},pE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,K){var Y=j.length;j.push(K);t:for(;0<Y;){var _t=Y-1>>>1,ft=j[_t];if(0<r(ft,K))j[_t]=K,j[Y]=ft,Y=_t;else break t}}function n(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var K=j[0],Y=j.pop();if(Y!==K){j[0]=Y;t:for(var _t=0,ft=j.length,hn=ft>>>1;_t<hn;){var ae=2*(_t+1)-1,Ot=j[ae],_e=ae+1,Ct=j[_e];if(0>r(Ot,Y))_e<ft&&0>r(Ct,Ot)?(j[_t]=Ct,j[_e]=Y,_t=_e):(j[_t]=Ot,j[ae]=Y,_t=ae);else if(_e<ft&&0>r(Ct,Y))j[_t]=Ct,j[_e]=Y,_t=_e;else break t}}return K}function r(j,K){var Y=j.sortIndex-K.sortIndex;return Y!==0?Y:j.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,p=null,m=3,y=!1,x=!1,V=!1,O=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(j){for(var K=n(h);K!==null;){if(K.callback===null)i(h);else if(K.startTime<=j)i(h),K.sortIndex=K.expirationTime,t(u,K);else break;K=n(h)}}function U(j){if(V=!1,D(j),!x)if(n(u)!==null)x=!0,H||(H=!0,C());else{var K=n(h);K!==null&&Ht(U,K.startTime-j)}}var H=!1,b=-1,v=5,A=-1;function w(){return O?!0:!(e.unstable_now()-A<v)}function I(){if(O=!1,H){var j=e.unstable_now();A=j;var K=!0;try{t:{x=!1,V&&(V=!1,E(b),b=-1),y=!0;var Y=m;try{e:{for(D(j),p=n(u);p!==null&&!(p.expirationTime>j&&w());){var _t=p.callback;if(typeof _t=="function"){p.callback=null,m=p.priorityLevel;var ft=_t(p.expirationTime<=j);if(j=e.unstable_now(),typeof ft=="function"){p.callback=ft,D(j),K=!0;break e}p===n(u)&&i(u),D(j)}else i(u);p=n(u)}if(p!==null)K=!0;else{var hn=n(h);hn!==null&&Ht(U,hn.startTime-j),K=!1}}break t}finally{p=null,m=Y,y=!1}K=void 0}}finally{K?C():H=!1}}}var C;if(typeof R=="function")C=function(){R(I)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,yt=T.port2;T.port1.onmessage=I,C=function(){yt.postMessage(null)}}else C=function(){S(I,0)};function Ht(j,K){b=S(function(){j(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(j){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var Y=m;m=K;try{return j()}finally{m=Y}},e.unstable_requestPaint=function(){O=!0},e.unstable_runWithPriority=function(j,K){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Y=m;m=j;try{return K()}finally{m=Y}},e.unstable_scheduleCallback=function(j,K,Y){var _t=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?_t+Y:_t):Y=_t,j){case 1:var ft=-1;break;case 2:ft=250;break;case 5:ft=1073741823;break;case 4:ft=1e4;break;default:ft=5e3}return ft=Y+ft,j={id:d++,callback:K,priorityLevel:j,startTime:Y,expirationTime:ft,sortIndex:-1},Y>_t?(j.sortIndex=Y,t(h,j),n(u)===null&&j===n(h)&&(V?(E(b),b=-1):V=!0,Ht(U,Y-_t))):(j.sortIndex=ft,t(u,j),x||y||(x=!0,H||(H=!0,C()))),j},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(j){var K=m;return function(){var Y=m;m=K;try{return j.apply(this,arguments)}finally{m=Y}}}})(pE);mE.exports=pE;var Tw=mE.exports,gE={exports:{}},ze={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bw=B;function yE(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Vi(){}var Ue={d:{f:Vi,r:function(){throw Error(yE(522))},D:Vi,C:Vi,L:Vi,m:Vi,X:Vi,S:Vi,M:Vi},p:0,findDOMNode:null},Aw=Symbol.for("react.portal");function Sw(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Aw,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var po=bw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Fc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ue;ze.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(yE(299));return Sw(e,t,null,n)};ze.flushSync=function(e){var t=po.T,n=Ue.p;try{if(po.T=null,Ue.p=2,e)return e()}finally{po.T=t,Ue.p=n,Ue.d.f()}};ze.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Ue.d.C(e,t))};ze.prefetchDNS=function(e){typeof e=="string"&&Ue.d.D(e)};ze.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Fc(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Ue.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Ue.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};ze.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Fc(t.as,t.crossOrigin);Ue.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Ue.d.M(e)};ze.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Fc(n,t.crossOrigin);Ue.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};ze.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Fc(t.as,t.crossOrigin);Ue.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Ue.d.m(e)};ze.requestFormReset=function(e){Ue.d.r(e)};ze.unstable_batchedUpdates=function(e,t){return e(t)};ze.useFormState=function(e,t,n){return po.H.useFormState(e,t,n)};ze.useFormStatus=function(){return po.H.useHostTransitionStatus()};ze.version="19.1.1";function _E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_E)}catch(e){console.error(e)}}_E(),gE.exports=ze;var ww=gE.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ce=Tw,vE=B,Rw=ww;function L(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function EE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function TE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function iy(e){if(ol(e)!==e)throw Error(L(188))}function Iw(e){var t=e.alternate;if(!t){if(t=ol(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return iy(r),e;if(s===i)return iy(r),t;s=s.sibling}throw Error(L(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(L(189))}}if(n.alternate!==i)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function bE(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=bE(e),t!==null)return t;e=e.sibling}return null}var Lt=Object.assign,Cw=Symbol.for("react.element"),eu=Symbol.for("react.transitional.element"),ro=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),AE=Symbol.for("react.strict_mode"),Uf=Symbol.for("react.profiler"),xw=Symbol.for("react.provider"),SE=Symbol.for("react.consumer"),ai=Symbol.for("react.context"),um=Symbol.for("react.forward_ref"),jf=Symbol.for("react.suspense"),zf=Symbol.for("react.suspense_list"),cm=Symbol.for("react.memo"),Li=Symbol.for("react.lazy"),Bf=Symbol.for("react.activity"),Nw=Symbol.for("react.memo_cache_sentinel"),ry=Symbol.iterator;function Xa(e){return e===null||typeof e!="object"?null:(e=ry&&e[ry]||e["@@iterator"],typeof e=="function"?e:null)}var Dw=Symbol.for("react.client.reference");function qf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Dw?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Cs:return"Fragment";case Uf:return"Profiler";case AE:return"StrictMode";case jf:return"Suspense";case zf:return"SuspenseList";case Bf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ro:return"Portal";case ai:return(e.displayName||"Context")+".Provider";case SE:return(e._context.displayName||"Context")+".Consumer";case um:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cm:return t=e.displayName||null,t!==null?t:qf(e.type)||"Memo";case Li:t=e._payload,e=e._init;try{return qf(e(t))}catch{}}return null}var so=Array.isArray,J=vE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bt=Rw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,zr={pending:!1,data:null,method:null,action:null},Hf=[],xs=-1;function Yn(e){return{current:e}}function ye(e){0>xs||(e.current=Hf[xs],Hf[xs]=null,xs--)}function Bt(e,t){xs++,Hf[xs]=e.current,e.current=t}var Ln=Yn(null),Po=Yn(null),Wi=Yn(null),Gu=Yn(null);function Qu(e,t){switch(Bt(Wi,t),Bt(Po,e),Bt(Ln,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?u_(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=u_(t),e=B0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ye(Ln),Bt(Ln,e)}function ea(){ye(Ln),ye(Po),ye(Wi)}function Ff(e){e.memoizedState!==null&&Bt(Gu,e);var t=Ln.current,n=B0(t,e.type);t!==n&&(Bt(Po,e),Bt(Ln,n))}function Ku(e){Po.current===e&&(ye(Ln),ye(Po)),Gu.current===e&&(ye(Gu),Qo._currentValue=zr)}var Gf=Object.prototype.hasOwnProperty,hm=ce.unstable_scheduleCallback,Qh=ce.unstable_cancelCallback,Ow=ce.unstable_shouldYield,Vw=ce.unstable_requestPaint,Un=ce.unstable_now,Mw=ce.unstable_getCurrentPriorityLevel,wE=ce.unstable_ImmediatePriority,RE=ce.unstable_UserBlockingPriority,Yu=ce.unstable_NormalPriority,kw=ce.unstable_LowPriority,IE=ce.unstable_IdlePriority,Pw=ce.log,Lw=ce.unstable_setDisableYieldValue,ll=null,sn=null;function Ki(e){if(typeof Pw=="function"&&Lw(e),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(ll,e)}catch{}}var an=Math.clz32?Math.clz32:zw,Uw=Math.log,jw=Math.LN2;function zw(e){return e>>>=0,e===0?32:31-(Uw(e)/jw|0)|0}var nu=256,iu=4194304;function Or(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Gc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=Or(i):(a&=l,a!==0?r=Or(a):n||(n=l&~e,n!==0&&(r=Or(n))))):(l=i&~s,l!==0?r=Or(l):a!==0?r=Or(a):n||(n=i&~e,n!==0&&(r=Or(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function ul(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Bw(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CE(){var e=nu;return nu<<=1,!(nu&4194048)&&(nu=256),e}function xE(){var e=iu;return iu<<=1,!(iu&62914560)&&(iu=4194304),e}function Kh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function cl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function qw(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-an(n),p=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var y=m[d];y!==null&&(y.lane&=-536870913)}n&=~p}i!==0&&NE(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function NE(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-an(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function DE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-an(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function fm(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function dm(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function OE(){var e=bt.p;return e!==0?e:(e=window.event,e===void 0?32:Z0(e.type))}function Hw(e,t){var n=bt.p;try{return bt.p=e,t()}finally{bt.p=n}}var Tr=Math.random().toString(36).slice(2),Oe="__reactFiber$"+Tr,Qe="__reactProps$"+Tr,ba="__reactContainer$"+Tr,Qf="__reactEvents$"+Tr,Fw="__reactListeners$"+Tr,Gw="__reactHandles$"+Tr,sy="__reactResources$"+Tr,hl="__reactMarker$"+Tr;function mm(e){delete e[Oe],delete e[Qe],delete e[Qf],delete e[Fw],delete e[Gw]}function Ns(e){var t=e[Oe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ba]||n[Oe]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=f_(e);e!==null;){if(n=e[Oe])return n;e=f_(e)}return t}e=n,n=e.parentNode}return null}function Aa(e){if(e=e[Oe]||e[ba]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function ao(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(L(33))}function qs(e){var t=e[sy];return t||(t=e[sy]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function me(e){e[hl]=!0}var VE=new Set,ME={};function rs(e,t){na(e,t),na(e+"Capture",t)}function na(e,t){for(ME[e]=t,e=0;e<t.length;e++)VE.add(t[e])}var Qw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ay={},oy={};function Kw(e){return Gf.call(oy,e)?!0:Gf.call(ay,e)?!1:Qw.test(e)?oy[e]=!0:(ay[e]=!0,!1)}function bu(e,t,n){if(Kw(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ru(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ni(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Yh,ly;function Ts(e){if(Yh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Yh=t&&t[1]||"",ly=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yh+e+ly}var $h=!1;function Xh(e,t){if(!e||$h)return"";$h=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(y){var m=y}Reflect.construct(e,[],p)}else{try{p.call()}catch(y){m=y}e.call(p.prototype)}}else{try{throw Error()}catch(y){m=y}(p=e())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(y){if(y&&m&&typeof y.stack=="string")return[y.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{$h=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ts(n):""}function Yw(e){switch(e.tag){case 26:case 27:case 5:return Ts(e.type);case 16:return Ts("Lazy");case 13:return Ts("Suspense");case 19:return Ts("SuspenseList");case 0:case 15:return Xh(e.type,!1);case 11:return Xh(e.type.render,!1);case 1:return Xh(e.type,!0);case 31:return Ts("Activity");default:return""}}function uy(e){try{var t="";do t+=Yw(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function pn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $w(e){var t=kE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $u(e){e._valueTracker||(e._valueTracker=$w(e))}function PE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=kE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Xu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Xw=/[\n"\\]/g;function _n(e){return e.replace(Xw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Kf(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+pn(t)):e.value!==""+pn(t)&&(e.value=""+pn(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Yf(e,a,pn(t)):n!=null?Yf(e,a,pn(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+pn(l):e.removeAttribute("name")}function LE(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+pn(n):"",t=t!=null?""+pn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Yf(e,t,n){t==="number"&&Xu(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Hs(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+pn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function UE(e,t,n){if(t!=null&&(t=""+pn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+pn(n):""}function jE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(L(92));if(so(i)){if(1<i.length)throw Error(L(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=pn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function ia(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Zw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cy(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||Zw.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function zE(e,t,n){if(t!=null&&typeof t!="object")throw Error(L(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&cy(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&cy(e,s,t[s])}function pm(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ww=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Au(e){return Jw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var $f=null;function gm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ds=null,Fs=null;function hy(e){var t=Aa(e);if(t&&(e=t.stateNode)){var n=e[Qe]||null;t:switch(e=t.stateNode,t.type){case"input":if(Kf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+_n(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Qe]||null;if(!r)throw Error(L(90));Kf(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&PE(i)}break t;case"textarea":UE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Hs(e,!!n.multiple,t,!1)}}}var Zh=!1;function BE(e,t,n){if(Zh)return e(t,n);Zh=!0;try{var i=e(t);return i}finally{if(Zh=!1,(Ds!==null||Fs!==null)&&(eh(),Ds&&(t=Ds,e=Fs,Fs=Ds=null,hy(t),e)))for(t=0;t<e.length;t++)hy(e[t])}}function Lo(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Qe]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xf=!1;if(gi)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){Xf=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{Xf=!1}var Yi=null,ym=null,Su=null;function qE(){if(Su)return Su;var e,t=ym,n=t.length,i,r="value"in Yi?Yi.value:Yi.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return Su=r.slice(e,1<i?1-i:void 0)}function wu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function su(){return!0}function fy(){return!1}function Ke(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?su:fy,this.isPropagationStopped=fy,this}return Lt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=su)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=su)},persist:function(){},isPersistent:su}),t}var ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qc=Ke(ss),fl=Lt({},ss,{view:0,detail:0}),t1=Ke(fl),Wh,Jh,Wa,Kc=Lt({},fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_m,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wa&&(Wa&&e.type==="mousemove"?(Wh=e.screenX-Wa.screenX,Jh=e.screenY-Wa.screenY):Jh=Wh=0,Wa=e),Wh)},movementY:function(e){return"movementY"in e?e.movementY:Jh}}),dy=Ke(Kc),e1=Lt({},Kc,{dataTransfer:0}),n1=Ke(e1),i1=Lt({},fl,{relatedTarget:0}),tf=Ke(i1),r1=Lt({},ss,{animationName:0,elapsedTime:0,pseudoElement:0}),s1=Ke(r1),a1=Lt({},ss,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),o1=Ke(a1),l1=Lt({},ss,{data:0}),my=Ke(l1),u1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},c1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=h1[e])?!!t[e]:!1}function _m(){return f1}var d1=Lt({},fl,{key:function(e){if(e.key){var t=u1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?c1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_m,charCode:function(e){return e.type==="keypress"?wu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),m1=Ke(d1),p1=Lt({},Kc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),py=Ke(p1),g1=Lt({},fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_m}),y1=Ke(g1),_1=Lt({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),v1=Ke(_1),E1=Lt({},Kc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),T1=Ke(E1),b1=Lt({},ss,{newState:0,oldState:0}),A1=Ke(b1),S1=[9,13,27,32],vm=gi&&"CompositionEvent"in window,go=null;gi&&"documentMode"in document&&(go=document.documentMode);var w1=gi&&"TextEvent"in window&&!go,HE=gi&&(!vm||go&&8<go&&11>=go),gy=" ",yy=!1;function FE(e,t){switch(e){case"keyup":return S1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Os=!1;function R1(e,t){switch(e){case"compositionend":return GE(t);case"keypress":return t.which!==32?null:(yy=!0,gy);case"textInput":return e=t.data,e===gy&&yy?null:e;default:return null}}function I1(e,t){if(Os)return e==="compositionend"||!vm&&FE(e,t)?(e=qE(),Su=ym=Yi=null,Os=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return HE&&t.locale!=="ko"?null:t.data;default:return null}}var C1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _y(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!C1[e.type]:t==="textarea"}function QE(e,t,n,i){Ds?Fs?Fs.push(i):Fs=[i]:Ds=i,t=mc(t,"onChange"),0<t.length&&(n=new Qc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var yo=null,Uo=null;function x1(e){U0(e,0)}function Yc(e){var t=ao(e);if(PE(t))return e}function vy(e,t){if(e==="change")return t}var KE=!1;if(gi){var ef;if(gi){var nf="oninput"in document;if(!nf){var Ey=document.createElement("div");Ey.setAttribute("oninput","return;"),nf=typeof Ey.oninput=="function"}ef=nf}else ef=!1;KE=ef&&(!document.documentMode||9<document.documentMode)}function Ty(){yo&&(yo.detachEvent("onpropertychange",YE),Uo=yo=null)}function YE(e){if(e.propertyName==="value"&&Yc(Uo)){var t=[];QE(t,Uo,e,gm(e)),BE(x1,t)}}function N1(e,t,n){e==="focusin"?(Ty(),yo=t,Uo=n,yo.attachEvent("onpropertychange",YE)):e==="focusout"&&Ty()}function D1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yc(Uo)}function O1(e,t){if(e==="click")return Yc(t)}function V1(e,t){if(e==="input"||e==="change")return Yc(t)}function M1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:M1;function jo(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Gf.call(t,r)||!cn(e[r],t[r]))return!1}return!0}function by(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ay(e,t){var n=by(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=by(n)}}function $E(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$E(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function XE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Xu(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Xu(e.document)}return t}function Em(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var k1=gi&&"documentMode"in document&&11>=document.documentMode,Vs=null,Zf=null,_o=null,Wf=!1;function Sy(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wf||Vs==null||Vs!==Xu(i)||(i=Vs,"selectionStart"in i&&Em(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),_o&&jo(_o,i)||(_o=i,i=mc(Zf,"onSelect"),0<i.length&&(t=new Qc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Vs)))}function Dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ms={animationend:Dr("Animation","AnimationEnd"),animationiteration:Dr("Animation","AnimationIteration"),animationstart:Dr("Animation","AnimationStart"),transitionrun:Dr("Transition","TransitionRun"),transitionstart:Dr("Transition","TransitionStart"),transitioncancel:Dr("Transition","TransitionCancel"),transitionend:Dr("Transition","TransitionEnd")},rf={},ZE={};gi&&(ZE=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function as(e){if(rf[e])return rf[e];if(!Ms[e])return e;var t=Ms[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ZE)return rf[e]=t[n];return e}var WE=as("animationend"),JE=as("animationiteration"),tT=as("animationstart"),P1=as("transitionrun"),L1=as("transitionstart"),U1=as("transitioncancel"),eT=as("transitionend"),nT=new Map,Jf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jf.push("scrollEnd");function Dn(e,t){nT.set(e,t),rs(t,[e])}var wy=new WeakMap;function vn(e,t){if(typeof e=="object"&&e!==null){var n=wy.get(e);return n!==void 0?n:(t={value:e,source:t,stack:uy(t)},wy.set(e,t),t)}return{value:e,source:t,stack:uy(t)}}var mn=[],ks=0,Tm=0;function $c(){for(var e=ks,t=Tm=ks=0;t<e;){var n=mn[t];mn[t++]=null;var i=mn[t];mn[t++]=null;var r=mn[t];mn[t++]=null;var s=mn[t];if(mn[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&iT(n,r,s)}}function Xc(e,t,n,i){mn[ks++]=e,mn[ks++]=t,mn[ks++]=n,mn[ks++]=i,Tm|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function bm(e,t,n,i){return Xc(e,t,n,i),Zu(e)}function Sa(e,t){return Xc(e,null,null,t),Zu(e)}function iT(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-an(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function Zu(e){if(50<Co)throw Co=0,Ed=null,Error(L(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ps={};function j1(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(e,t,n,i){return new j1(e,t,n,i)}function Am(e){return e=e.prototype,!(!e||!e.isReactComponent)}function di(e,t){var n=e.alternate;return n===null?(n=en(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function rT(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ru(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")Am(e)&&(a=1);else if(typeof e=="string")a=BR(e,n,Ln.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Bf:return e=en(31,n,t,r),e.elementType=Bf,e.lanes=s,e;case Cs:return Br(n.children,r,s,t);case AE:a=8,r|=24;break;case Uf:return e=en(12,n,t,r|2),e.elementType=Uf,e.lanes=s,e;case jf:return e=en(13,n,t,r),e.elementType=jf,e.lanes=s,e;case zf:return e=en(19,n,t,r),e.elementType=zf,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xw:case ai:a=10;break t;case SE:a=9;break t;case um:a=11;break t;case cm:a=14;break t;case Li:a=16,i=null;break t}a=29,n=Error(L(130,e===null?"null":typeof e,"")),i=null}return t=en(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Br(e,t,n,i){return e=en(7,e,i,t),e.lanes=n,e}function sf(e,t,n){return e=en(6,e,null,t),e.lanes=n,e}function af(e,t,n){return t=en(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ls=[],Us=0,Wu=null,Ju=0,gn=[],yn=0,qr=null,oi=1,li="";function Vr(e,t){Ls[Us++]=Ju,Ls[Us++]=Wu,Wu=e,Ju=t}function sT(e,t,n){gn[yn++]=oi,gn[yn++]=li,gn[yn++]=qr,qr=e;var i=oi;e=li;var r=32-an(i)-1;i&=~(1<<r),n+=1;var s=32-an(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,oi=1<<32-an(t)+r|n<<r|i,li=s+e}else oi=1<<s|n<<r|i,li=e}function Sm(e){e.return!==null&&(Vr(e,1),sT(e,1,0))}function wm(e){for(;e===Wu;)Wu=Ls[--Us],Ls[Us]=null,Ju=Ls[--Us],Ls[Us]=null;for(;e===qr;)qr=gn[--yn],gn[yn]=null,li=gn[--yn],gn[yn]=null,oi=gn[--yn],gn[yn]=null}var Pe=null,Yt=null,Tt=!1,Hr=null,kn=!1,td=Error(L(519));function Yr(e){var t=Error(L(418,""));throw zo(vn(t,e)),td}function Ry(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Oe]=e,t[Qe]=i,n){case"dialog":ot("cancel",t),ot("close",t);break;case"iframe":case"object":case"embed":ot("load",t);break;case"video":case"audio":for(n=0;n<Ho.length;n++)ot(Ho[n],t);break;case"source":ot("error",t);break;case"img":case"image":case"link":ot("error",t),ot("load",t);break;case"details":ot("toggle",t);break;case"input":ot("invalid",t),LE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),$u(t);break;case"select":ot("invalid",t);break;case"textarea":ot("invalid",t),jE(t,i.value,i.defaultValue,i.children),$u(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||z0(t.textContent,n)?(i.popover!=null&&(ot("beforetoggle",t),ot("toggle",t)),i.onScroll!=null&&ot("scroll",t),i.onScrollEnd!=null&&ot("scrollend",t),i.onClick!=null&&(t.onclick=rh),t=!0):t=!1,t||Yr(e)}function Iy(e){for(Pe=e.return;Pe;)switch(Pe.tag){case 5:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Pe=Pe.return}}function Ja(e){if(e!==Pe)return!1;if(!Tt)return Iy(e),Tt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Rd(e.type,e.memoizedProps)),n=!n),n&&Yt&&Yr(e),Iy(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Yt=Cn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Yt=null}}else t===27?(t=Yt,br(e.type)?(e=xd,xd=null,Yt=e):Yt=t):Yt=Pe?Cn(e.stateNode.nextSibling):null;return!0}function dl(){Yt=Pe=null,Tt=!1}function Cy(){var e=Hr;return e!==null&&(Fe===null?Fe=e:Fe.push.apply(Fe,e),Hr=null),e}function zo(e){Hr===null?Hr=[e]:Hr.push(e)}var ed=Yn(null),os=null,ui=null;function ji(e,t,n){Bt(ed,t._currentValue),t._currentValue=n}function mi(e){e._currentValue=ed.current,ye(ed)}function nd(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function id(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),nd(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(L(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),nd(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function ml(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(L(387));if(a=a.memoizedProps,a!==null){var l=r.type;cn(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===Gu.current){if(a=r.alternate,a===null)throw Error(L(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Qo):e=[Qo])}r=r.return}e!==null&&id(t,e,n,i),t.flags|=262144}function tc(e){for(e=e.firstContext;e!==null;){if(!cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $r(e){os=e,ui=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ve(e){return aT(os,e)}function au(e,t){return os===null&&$r(e),aT(e,t)}function aT(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ui===null){if(e===null)throw Error(L(308));ui=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ui=ui.next=t;return n}var z1=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},B1=ce.unstable_scheduleCallback,q1=ce.unstable_NormalPriority,oe={$$typeof:ai,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rm(){return{controller:new z1,data:new Map,refCount:0}}function pl(e){e.refCount--,e.refCount===0&&B1(q1,function(){e.controller.abort()})}var vo=null,rd=0,ra=0,Gs=null;function H1(e,t){if(vo===null){var n=vo=[];rd=0,ra=$m(),Gs={status:"pending",value:void 0,then:function(i){n.push(i)}}}return rd++,t.then(xy,xy),t}function xy(){if(--rd===0&&vo!==null){Gs!==null&&(Gs.status="fulfilled");var e=vo;vo=null,ra=0,Gs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function F1(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var Ny=J.S;J.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&H1(e,t),Ny!==null&&Ny(e,t)};var Fr=Yn(null);function Im(){var e=Fr.current;return e!==null?e:Dt.pooledCache}function Iu(e,t){t===null?Bt(Fr,Fr.current):Bt(Fr,t.pool)}function oT(){var e=Im();return e===null?null:{parent:oe._currentValue,pool:e}}var gl=Error(L(460)),lT=Error(L(474)),Zc=Error(L(542)),sd={then:function(){}};function Dy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ou(){}function uT(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ou,ou),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vy(e),e;default:if(typeof t.status=="string")t.then(ou,ou);else{if(e=Dt,e!==null&&100<e.shellSuspendCounter)throw Error(L(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vy(e),e}throw Eo=t,gl}}var Eo=null;function Oy(){if(Eo===null)throw Error(L(459));var e=Eo;return Eo=null,e}function Vy(e){if(e===gl||e===Zc)throw Error(L(483))}var Ui=!1;function Cm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ji(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function tr(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,wt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Zu(e),iT(e,null,n),t}return Xc(e,i,t,n),Zu(e)}function To(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,DE(e,n)}}function of(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var od=!1;function bo(){if(od){var e=Gs;if(e!==null)throw e}}function Ao(e,t,n,i){od=!1;var r=e.updateQueue;Ui=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var p=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,y=m!==l.lane;if(y?(pt&m)===m:(i&m)===m){m!==0&&m===ra&&(od=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var x=e,V=l;m=t;var O=n;switch(V.tag){case 1:if(x=V.payload,typeof x=="function"){p=x.call(O,p,m);break t}p=x;break t;case 3:x.flags=x.flags&-65537|128;case 0:if(x=V.payload,m=typeof x=="function"?x.call(O,p,m):x,m==null)break t;p=Lt({},p,m);break t;case 2:Ui=!0}}m=l.callback,m!==null&&(e.flags|=64,y&&(e.flags|=8192),y=r.callbacks,y===null?r.callbacks=[m]:y.push(m))}else y={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=y,u=p):d=d.next=y,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;y=l,l=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(!0);d===null&&(u=p),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),mr|=a,e.lanes=a,e.memoizedState=p}}function cT(e,t){if(typeof e!="function")throw Error(L(191,e));e.call(t)}function hT(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)cT(n[e],t)}var sa=Yn(null),ec=Yn(0);function My(e,t){e=vi,Bt(ec,e),Bt(sa,t),vi=e|t.baseLanes}function ld(){Bt(ec,vi),Bt(sa,sa.current)}function xm(){vi=ec.current,ye(sa),ye(ec)}var fr=0,at=null,It=null,ne=null,nc=!1,Qs=!1,Xr=!1,ic=0,Bo=0,Ks=null,G1=0;function Zt(){throw Error(L(321))}function Nm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cn(e[n],t[n]))return!1;return!0}function Dm(e,t,n,i,r,s){return fr=s,at=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,J.H=e===null||e.memoizedState===null?qT:HT,Xr=!1,s=n(i,r),Xr=!1,Qs&&(s=dT(t,n,i,r)),fT(e),s}function fT(e){J.H=rc;var t=It!==null&&It.next!==null;if(fr=0,ne=It=at=null,nc=!1,Bo=0,Ks=null,t)throw Error(L(300));e===null||ge||(e=e.dependencies,e!==null&&tc(e)&&(ge=!0))}function dT(e,t,n,i){at=e;var r=0;do{if(Qs&&(Ks=null),Bo=0,Qs=!1,25<=r)throw Error(L(301));if(r+=1,ne=It=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}J.H=W1,s=t(n,i)}while(Qs);return s}function Q1(){var e=J.H,t=e.useState()[0];return t=typeof t.then=="function"?yl(t):t,e=e.useState()[0],(It!==null?It.memoizedState:null)!==e&&(at.flags|=1024),t}function Om(){var e=ic!==0;return ic=0,e}function Vm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Mm(e){if(nc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}nc=!1}fr=0,ne=It=at=null,Qs=!1,Bo=ic=0,Ks=null}function qe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ne===null?at.memoizedState=ne=e:ne=ne.next=e,ne}function se(){if(It===null){var e=at.alternate;e=e!==null?e.memoizedState:null}else e=It.next;var t=ne===null?at.memoizedState:ne.next;if(t!==null)ne=t,It=e;else{if(e===null)throw at.alternate===null?Error(L(467)):Error(L(310));It=e,e={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},ne===null?at.memoizedState=ne=e:ne=ne.next=e}return ne}function km(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yl(e){var t=Bo;return Bo+=1,Ks===null&&(Ks=[]),e=uT(Ks,e,t),t=at,(ne===null?t.memoizedState:ne.next)===null&&(t=t.alternate,J.H=t===null||t.memoizedState===null?qT:HT),e}function Wc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return yl(e);if(e.$$typeof===ai)return Ve(e)}throw Error(L(438,String(e)))}function Pm(e){var t=null,n=at.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=at.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=km(),at.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=Nw;return t.index++,n}function yi(e,t){return typeof t=="function"?t(e):t}function Cu(e){var t=se();return Lm(t,It,e)}function Lm(e,t,n){var i=e.queue;if(i===null)throw Error(L(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var p=h.lane&-536870913;if(p!==h.lane?(pt&p)===p:(fr&p)===p){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),p===ra&&(d=!0);else if((fr&m)===m){h=h.next,m===ra&&(d=!0);continue}else p={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=p,a=s):u=u.next=p,at.lanes|=m,mr|=m;p=h.action,Xr&&n(s,p),s=h.hasEagerState?h.eagerState:n(s,p)}else m={lane:p,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,at.lanes|=p,mr|=p;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!cn(s,e.memoizedState)&&(ge=!0,d&&(n=Gs,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function lf(e){var t=se(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);cn(s,t.memoizedState)||(ge=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function mT(e,t,n){var i=at,r=se(),s=Tt;if(s){if(n===void 0)throw Error(L(407));n=n()}else n=t();var a=!cn((It||r).memoizedState,n);a&&(r.memoizedState=n,ge=!0),r=r.queue;var l=yT.bind(null,i,r,e);if(_l(2048,8,l,[e]),r.getSnapshot!==t||a||ne!==null&&ne.memoizedState.tag&1){if(i.flags|=2048,aa(9,Jc(),gT.bind(null,i,r,n,t),null),Dt===null)throw Error(L(349));s||fr&124||pT(i,t,n)}return n}function pT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=at.updateQueue,t===null?(t=km(),at.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function gT(e,t,n,i){t.value=n,t.getSnapshot=i,_T(t)&&vT(e)}function yT(e,t,n){return n(function(){_T(t)&&vT(e)})}function _T(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cn(e,n)}catch{return!0}}function vT(e){var t=Sa(e,2);t!==null&&ln(t,e,2)}function ud(e){var t=qe();if(typeof e=="function"){var n=e;if(e=n(),Xr){Ki(!0);try{n()}finally{Ki(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:e},t}function ET(e,t,n,i){return e.baseState=n,Lm(e,It,typeof i=="function"?i:yi)}function K1(e,t,n,i,r){if(th(e))throw Error(L(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};J.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,TT(t,s)):(s.next=n.next,t.pending=n.next=s)}}function TT(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=J.T,a={};J.T=a;try{var l=n(r,i),u=J.S;u!==null&&u(a,l),ky(e,t,l)}catch(h){cd(e,t,h)}finally{J.T=s}}else try{s=n(r,i),ky(e,t,s)}catch(h){cd(e,t,h)}}function ky(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Py(e,t,i)},function(i){return cd(e,t,i)}):Py(e,t,n)}function Py(e,t,n){t.status="fulfilled",t.value=n,bT(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,TT(e,n)))}function cd(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,bT(t),t=t.next;while(t!==i)}e.action=null}function bT(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function AT(e,t){return t}function Ly(e,t){if(Tt){var n=Dt.formState;if(n!==null){t:{var i=at;if(Tt){if(Yt){e:{for(var r=Yt,s=kn;r.nodeType!==8;){if(!s){r=null;break e}if(r=Cn(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Yt=Cn(r.nextSibling),i=r.data==="F!";break t}}Yr(i)}i=!1}i&&(t=n[0])}}return n=qe(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:AT,lastRenderedState:t},n.queue=i,n=jT.bind(null,at,i),i.dispatch=n,i=ud(!1),s=Bm.bind(null,at,!1,i.queue),i=qe(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=K1.bind(null,at,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function Uy(e){var t=se();return ST(t,It,e)}function ST(e,t,n){if(t=Lm(e,t,AT)[0],e=Cu(yi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=yl(t)}catch(a){throw a===gl?Zc:a}else i=t;t=se();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(at.flags|=2048,aa(9,Jc(),Y1.bind(null,r,n),null)),[i,s,e]}function Y1(e,t){e.action=t}function jy(e){var t=se(),n=It;if(n!==null)return ST(t,n,e);se(),t=t.memoizedState,n=se();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function aa(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=at.updateQueue,t===null&&(t=km(),at.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Jc(){return{destroy:void 0,resource:void 0}}function wT(){return se().memoizedState}function xu(e,t,n,i){var r=qe();i=i===void 0?null:i,at.flags|=e,r.memoizedState=aa(1|t,Jc(),n,i)}function _l(e,t,n,i){var r=se();i=i===void 0?null:i;var s=r.memoizedState.inst;It!==null&&i!==null&&Nm(i,It.memoizedState.deps)?r.memoizedState=aa(t,s,n,i):(at.flags|=e,r.memoizedState=aa(1|t,s,n,i))}function zy(e,t){xu(8390656,8,e,t)}function RT(e,t){_l(2048,8,e,t)}function IT(e,t){return _l(4,2,e,t)}function CT(e,t){return _l(4,4,e,t)}function xT(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function NT(e,t,n){n=n!=null?n.concat([e]):null,_l(4,4,xT.bind(null,t,e),n)}function Um(){}function DT(e,t){var n=se();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Nm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function OT(e,t){var n=se();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Nm(t,i[1]))return i[0];if(i=e(),Xr){Ki(!0);try{e()}finally{Ki(!1)}}return n.memoizedState=[i,t],i}function jm(e,t,n){return n===void 0||fr&1073741824?e.memoizedState=t:(e.memoizedState=n,e=b0(),at.lanes|=e,mr|=e,n)}function VT(e,t,n,i){return cn(n,t)?n:sa.current!==null?(e=jm(e,n,i),cn(e,t)||(ge=!0),e):fr&42?(e=b0(),at.lanes|=e,mr|=e,t):(ge=!0,e.memoizedState=n)}function MT(e,t,n,i,r){var s=bt.p;bt.p=s!==0&&8>s?s:8;var a=J.T,l={};J.T=l,Bm(e,!1,t,n);try{var u=r(),h=J.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=F1(u,i);So(e,t,d,on(e))}else So(e,t,i,on(e))}catch(p){So(e,t,{then:function(){},status:"rejected",reason:p},on())}finally{bt.p=s,J.T=a}}function $1(){}function hd(e,t,n,i){if(e.tag!==5)throw Error(L(476));var r=kT(e).queue;MT(e,r,t,zr,n===null?$1:function(){return PT(e),n(i)})}function kT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:zr,baseState:zr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:zr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function PT(e){var t=kT(e).next.queue;So(e,t,{},on())}function zm(){return Ve(Qo)}function LT(){return se().memoizedState}function UT(){return se().memoizedState}function X1(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=on();e=Ji(n);var i=tr(t,e,n);i!==null&&(ln(i,t,n),To(i,t,n)),t={cache:Rm()},e.payload=t;return}t=t.return}}function Z1(e,t,n){var i=on();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},th(e)?zT(t,n):(n=bm(e,t,n,i),n!==null&&(ln(n,e,i),BT(n,t,i)))}function jT(e,t,n){var i=on();So(e,t,n,i)}function So(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(th(e))zT(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,cn(l,a))return Xc(e,t,r,0),Dt===null&&$c(),!1}catch{}finally{}if(n=bm(e,t,r,i),n!==null)return ln(n,e,i),BT(n,t,i),!0}return!1}function Bm(e,t,n,i){if(i={lane:2,revertLane:$m(),action:i,hasEagerState:!1,eagerState:null,next:null},th(e)){if(t)throw Error(L(479))}else t=bm(e,n,i,2),t!==null&&ln(t,e,2)}function th(e){var t=e.alternate;return e===at||t!==null&&t===at}function zT(e,t){Qs=nc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function BT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,DE(e,n)}}var rc={readContext:Ve,use:Wc,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt},qT={readContext:Ve,use:Wc,useCallback:function(e,t){return qe().memoizedState=[e,t===void 0?null:t],e},useContext:Ve,useEffect:zy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,xu(4194308,4,xT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xu(4194308,4,e,t)},useInsertionEffect:function(e,t){xu(4,2,e,t)},useMemo:function(e,t){var n=qe();t=t===void 0?null:t;var i=e();if(Xr){Ki(!0);try{e()}finally{Ki(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=qe();if(n!==void 0){var r=n(t);if(Xr){Ki(!0);try{n(t)}finally{Ki(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Z1.bind(null,at,e),[i.memoizedState,e]},useRef:function(e){var t=qe();return e={current:e},t.memoizedState=e},useState:function(e){e=ud(e);var t=e.queue,n=jT.bind(null,at,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Um,useDeferredValue:function(e,t){var n=qe();return jm(n,e,t)},useTransition:function(){var e=ud(!1);return e=MT.bind(null,at,e.queue,!0,!1),qe().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=at,r=qe();if(Tt){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),Dt===null)throw Error(L(349));pt&124||pT(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,zy(yT.bind(null,i,s,e),[e]),i.flags|=2048,aa(9,Jc(),gT.bind(null,i,s,n,t),null),n},useId:function(){var e=qe(),t=Dt.identifierPrefix;if(Tt){var n=li,i=oi;n=(i&~(1<<32-an(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=ic++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=G1++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:zm,useFormState:Ly,useActionState:Ly,useOptimistic:function(e){var t=qe();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Bm.bind(null,at,!0,n),n.dispatch=t,[e,t]},useMemoCache:Pm,useCacheRefresh:function(){return qe().memoizedState=X1.bind(null,at)}},HT={readContext:Ve,use:Wc,useCallback:DT,useContext:Ve,useEffect:RT,useImperativeHandle:NT,useInsertionEffect:IT,useLayoutEffect:CT,useMemo:OT,useReducer:Cu,useRef:wT,useState:function(){return Cu(yi)},useDebugValue:Um,useDeferredValue:function(e,t){var n=se();return VT(n,It.memoizedState,e,t)},useTransition:function(){var e=Cu(yi)[0],t=se().memoizedState;return[typeof e=="boolean"?e:yl(e),t]},useSyncExternalStore:mT,useId:LT,useHostTransitionStatus:zm,useFormState:Uy,useActionState:Uy,useOptimistic:function(e,t){var n=se();return ET(n,It,e,t)},useMemoCache:Pm,useCacheRefresh:UT},W1={readContext:Ve,use:Wc,useCallback:DT,useContext:Ve,useEffect:RT,useImperativeHandle:NT,useInsertionEffect:IT,useLayoutEffect:CT,useMemo:OT,useReducer:lf,useRef:wT,useState:function(){return lf(yi)},useDebugValue:Um,useDeferredValue:function(e,t){var n=se();return It===null?jm(n,e,t):VT(n,It.memoizedState,e,t)},useTransition:function(){var e=lf(yi)[0],t=se().memoizedState;return[typeof e=="boolean"?e:yl(e),t]},useSyncExternalStore:mT,useId:LT,useHostTransitionStatus:zm,useFormState:jy,useActionState:jy,useOptimistic:function(e,t){var n=se();return It!==null?ET(n,It,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Pm,useCacheRefresh:UT},Ys=null,qo=0;function lu(e){var t=qo;return qo+=1,Ys===null&&(Ys=[]),uT(Ys,e,t)}function to(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function uu(e,t){throw t.$$typeof===Cw?Error(L(525)):(e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function By(e){var t=e._init;return t(e._payload)}function FT(e){function t(S,E){if(e){var R=S.deletions;R===null?(S.deletions=[E],S.flags|=16):R.push(E)}}function n(S,E){if(!e)return null;for(;E!==null;)t(S,E),E=E.sibling;return null}function i(S){for(var E=new Map;S!==null;)S.key!==null?E.set(S.key,S):E.set(S.index,S),S=S.sibling;return E}function r(S,E){return S=di(S,E),S.index=0,S.sibling=null,S}function s(S,E,R){return S.index=R,e?(R=S.alternate,R!==null?(R=R.index,R<E?(S.flags|=67108866,E):R):(S.flags|=67108866,E)):(S.flags|=1048576,E)}function a(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function l(S,E,R,D){return E===null||E.tag!==6?(E=sf(R,S.mode,D),E.return=S,E):(E=r(E,R),E.return=S,E)}function u(S,E,R,D){var U=R.type;return U===Cs?d(S,E,R.props.children,D,R.key):E!==null&&(E.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Li&&By(U)===E.type)?(E=r(E,R.props),to(E,R),E.return=S,E):(E=Ru(R.type,R.key,R.props,null,S.mode,D),to(E,R),E.return=S,E)}function h(S,E,R,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==R.containerInfo||E.stateNode.implementation!==R.implementation?(E=af(R,S.mode,D),E.return=S,E):(E=r(E,R.children||[]),E.return=S,E)}function d(S,E,R,D,U){return E===null||E.tag!==7?(E=Br(R,S.mode,D,U),E.return=S,E):(E=r(E,R),E.return=S,E)}function p(S,E,R){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=sf(""+E,S.mode,R),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case eu:return R=Ru(E.type,E.key,E.props,null,S.mode,R),to(R,E),R.return=S,R;case ro:return E=af(E,S.mode,R),E.return=S,E;case Li:var D=E._init;return E=D(E._payload),p(S,E,R)}if(so(E)||Xa(E))return E=Br(E,S.mode,R,null),E.return=S,E;if(typeof E.then=="function")return p(S,lu(E),R);if(E.$$typeof===ai)return p(S,au(S,E),R);uu(S,E)}return null}function m(S,E,R,D){var U=E!==null?E.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return U!==null?null:l(S,E,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case eu:return R.key===U?u(S,E,R,D):null;case ro:return R.key===U?h(S,E,R,D):null;case Li:return U=R._init,R=U(R._payload),m(S,E,R,D)}if(so(R)||Xa(R))return U!==null?null:d(S,E,R,D,null);if(typeof R.then=="function")return m(S,E,lu(R),D);if(R.$$typeof===ai)return m(S,E,au(S,R),D);uu(S,R)}return null}function y(S,E,R,D,U){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return S=S.get(R)||null,l(E,S,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case eu:return S=S.get(D.key===null?R:D.key)||null,u(E,S,D,U);case ro:return S=S.get(D.key===null?R:D.key)||null,h(E,S,D,U);case Li:var H=D._init;return D=H(D._payload),y(S,E,R,D,U)}if(so(D)||Xa(D))return S=S.get(R)||null,d(E,S,D,U,null);if(typeof D.then=="function")return y(S,E,R,lu(D),U);if(D.$$typeof===ai)return y(S,E,R,au(E,D),U);uu(E,D)}return null}function x(S,E,R,D){for(var U=null,H=null,b=E,v=E=0,A=null;b!==null&&v<R.length;v++){b.index>v?(A=b,b=null):A=b.sibling;var w=m(S,b,R[v],D);if(w===null){b===null&&(b=A);break}e&&b&&w.alternate===null&&t(S,b),E=s(w,E,v),H===null?U=w:H.sibling=w,H=w,b=A}if(v===R.length)return n(S,b),Tt&&Vr(S,v),U;if(b===null){for(;v<R.length;v++)b=p(S,R[v],D),b!==null&&(E=s(b,E,v),H===null?U=b:H.sibling=b,H=b);return Tt&&Vr(S,v),U}for(b=i(b);v<R.length;v++)A=y(b,S,v,R[v],D),A!==null&&(e&&A.alternate!==null&&b.delete(A.key===null?v:A.key),E=s(A,E,v),H===null?U=A:H.sibling=A,H=A);return e&&b.forEach(function(I){return t(S,I)}),Tt&&Vr(S,v),U}function V(S,E,R,D){if(R==null)throw Error(L(151));for(var U=null,H=null,b=E,v=E=0,A=null,w=R.next();b!==null&&!w.done;v++,w=R.next()){b.index>v?(A=b,b=null):A=b.sibling;var I=m(S,b,w.value,D);if(I===null){b===null&&(b=A);break}e&&b&&I.alternate===null&&t(S,b),E=s(I,E,v),H===null?U=I:H.sibling=I,H=I,b=A}if(w.done)return n(S,b),Tt&&Vr(S,v),U;if(b===null){for(;!w.done;v++,w=R.next())w=p(S,w.value,D),w!==null&&(E=s(w,E,v),H===null?U=w:H.sibling=w,H=w);return Tt&&Vr(S,v),U}for(b=i(b);!w.done;v++,w=R.next())w=y(b,S,v,w.value,D),w!==null&&(e&&w.alternate!==null&&b.delete(w.key===null?v:w.key),E=s(w,E,v),H===null?U=w:H.sibling=w,H=w);return e&&b.forEach(function(C){return t(S,C)}),Tt&&Vr(S,v),U}function O(S,E,R,D){if(typeof R=="object"&&R!==null&&R.type===Cs&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case eu:t:{for(var U=R.key;E!==null;){if(E.key===U){if(U=R.type,U===Cs){if(E.tag===7){n(S,E.sibling),D=r(E,R.props.children),D.return=S,S=D;break t}}else if(E.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Li&&By(U)===E.type){n(S,E.sibling),D=r(E,R.props),to(D,R),D.return=S,S=D;break t}n(S,E);break}else t(S,E);E=E.sibling}R.type===Cs?(D=Br(R.props.children,S.mode,D,R.key),D.return=S,S=D):(D=Ru(R.type,R.key,R.props,null,S.mode,D),to(D,R),D.return=S,S=D)}return a(S);case ro:t:{for(U=R.key;E!==null;){if(E.key===U)if(E.tag===4&&E.stateNode.containerInfo===R.containerInfo&&E.stateNode.implementation===R.implementation){n(S,E.sibling),D=r(E,R.children||[]),D.return=S,S=D;break t}else{n(S,E);break}else t(S,E);E=E.sibling}D=af(R,S.mode,D),D.return=S,S=D}return a(S);case Li:return U=R._init,R=U(R._payload),O(S,E,R,D)}if(so(R))return x(S,E,R,D);if(Xa(R)){if(U=Xa(R),typeof U!="function")throw Error(L(150));return R=U.call(R),V(S,E,R,D)}if(typeof R.then=="function")return O(S,E,lu(R),D);if(R.$$typeof===ai)return O(S,E,au(S,R),D);uu(S,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,E!==null&&E.tag===6?(n(S,E.sibling),D=r(E,R),D.return=S,S=D):(n(S,E),D=sf(R,S.mode,D),D.return=S,S=D),a(S)):n(S,E)}return function(S,E,R,D){try{qo=0;var U=O(S,E,R,D);return Ys=null,U}catch(b){if(b===gl||b===Zc)throw b;var H=en(29,b,null,S.mode);return H.lanes=D,H.return=S,H}finally{}}}var oa=FT(!0),GT=FT(!1),bn=Yn(null),jn=null;function zi(e){var t=e.alternate;Bt(le,le.current&1),Bt(bn,e),jn===null&&(t===null||sa.current!==null||t.memoizedState!==null)&&(jn=e)}function QT(e){if(e.tag===22){if(Bt(le,le.current),Bt(bn,e),jn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(jn=e)}}else Bi()}function Bi(){Bt(le,le.current),Bt(bn,bn.current)}function ci(e){ye(bn),jn===e&&(jn=null),ye(le)}var le=Yn(0);function sc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Cd(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function uf(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Lt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fd={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=on(),r=Ji(i);r.payload=t,n!=null&&(r.callback=n),t=tr(e,r,i),t!==null&&(ln(t,e,i),To(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=on(),r=Ji(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=tr(e,r,i),t!==null&&(ln(t,e,i),To(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=on(),i=Ji(n);i.tag=2,t!=null&&(i.callback=t),t=tr(e,i,n),t!==null&&(ln(t,e,n),To(t,e,n))}};function qy(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!jo(n,i)||!jo(r,s):!0}function Hy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&fd.enqueueReplaceState(t,t.state,null)}function Zr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Lt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var ac=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function KT(e){ac(e)}function YT(e){console.error(e)}function $T(e){ac(e)}function oc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Fy(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function dd(e,t,n){return n=Ji(n),n.tag=3,n.payload={element:null},n.callback=function(){oc(e,t)},n}function XT(e){return e=Ji(e),e.tag=3,e}function ZT(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){Fy(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){Fy(t,n,i),typeof r!="function"&&(er===null?er=new Set([this]):er.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function J1(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&ml(t,n,r,!0),n=bn.current,n!==null){switch(n.tag){case 13:return jn===null?Td():n.alternate===null&&$t===0&&($t=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===sd?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Ef(e,i,r)),!1;case 22:return n.flags|=65536,i===sd?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Ef(e,i,r)),!1}throw Error(L(435,n.tag))}return Ef(e,i,r),Td(),!1}if(Tt)return t=bn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==td&&(e=Error(L(422),{cause:i}),zo(vn(e,n)))):(i!==td&&(t=Error(L(423),{cause:i}),zo(vn(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=vn(i,n),r=dd(e.stateNode,i,r),of(e,r),$t!==4&&($t=2)),!1;var s=Error(L(520),{cause:i});if(s=vn(s,n),Io===null?Io=[s]:Io.push(s),$t!==4&&($t=2),t===null)return!0;i=vn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=dd(n.stateNode,i,e),of(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(er===null||!er.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=XT(r),ZT(r,e,n,i),of(n,r),!1}n=n.return}while(n!==null);return!1}var WT=Error(L(461)),ge=!1;function Te(e,t,n,i){t.child=e===null?GT(t,null,n,i):oa(t,e.child,n,i)}function Gy(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return $r(t),i=Dm(e,t,n,a,s,r),l=Om(),e!==null&&!ge?(Vm(e,t,r),_i(e,t,r)):(Tt&&l&&Sm(t),t.flags|=1,Te(e,t,i,r),t.child)}function Qy(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!Am(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,JT(e,t,s,i,r)):(e=Ru(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!qm(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:jo,n(a,i)&&e.ref===t.ref)return _i(e,t,r)}return t.flags|=1,e=di(s,i),e.ref=t.ref,e.return=t,t.child=e}function JT(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(jo(s,i)&&e.ref===t.ref)if(ge=!1,t.pendingProps=i=s,qm(e,r))e.flags&131072&&(ge=!0);else return t.lanes=e.lanes,_i(e,t,r)}return md(e,t,n,i,r)}function t0(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return Ky(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Iu(t,s!==null?s.cachePool:null),s!==null?My(t,s):ld(),QT(t);else return t.lanes=t.childLanes=536870912,Ky(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(Iu(t,s.cachePool),My(t,s),Bi(),t.memoizedState=null):(e!==null&&Iu(t,null),ld(),Bi());return Te(e,t,r,n),t.child}function Ky(e,t,n,i){var r=Im();return r=r===null?null:{parent:oe._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&Iu(t,null),ld(),QT(t),e!==null&&ml(e,t,i,!0),null}function Nu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(L(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function md(e,t,n,i,r){return $r(t),n=Dm(e,t,n,i,void 0,r),i=Om(),e!==null&&!ge?(Vm(e,t,r),_i(e,t,r)):(Tt&&i&&Sm(t),t.flags|=1,Te(e,t,n,r),t.child)}function Yy(e,t,n,i,r,s){return $r(t),t.updateQueue=null,n=dT(t,i,n,r),fT(e),i=Om(),e!==null&&!ge?(Vm(e,t,s),_i(e,t,s)):(Tt&&i&&Sm(t),t.flags|=1,Te(e,t,n,s),t.child)}function $y(e,t,n,i,r){if($r(t),t.stateNode===null){var s=Ps,a=n.contextType;typeof a=="object"&&a!==null&&(s=Ve(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=fd,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},Cm(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?Ve(a):Ps,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(uf(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&fd.enqueueReplaceState(s,s.state,null),Ao(t,i,s,r),bo(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=Zr(n,l);s.props=u;var h=s.context,d=n.contextType;a=Ps,typeof d=="object"&&d!==null&&(a=Ve(d));var p=n.getDerivedStateFromProps;d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&Hy(t,s,i,a),Ui=!1;var m=t.memoizedState;s.state=m,Ao(t,i,s,r),bo(),h=t.memoizedState,l||m!==h||Ui?(typeof p=="function"&&(uf(t,n,p,i),h=t.memoizedState),(u=Ui||qy(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,ad(e,t),a=t.memoizedProps,d=Zr(n,a),s.props=d,p=t.pendingProps,m=s.context,h=n.contextType,u=Ps,typeof h=="object"&&h!==null&&(u=Ve(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||m!==u)&&Hy(t,s,i,u),Ui=!1,m=t.memoizedState,s.state=m,Ao(t,i,s,r),bo();var y=t.memoizedState;a!==p||m!==y||Ui||e!==null&&e.dependencies!==null&&tc(e.dependencies)?(typeof l=="function"&&(uf(t,n,l,i),y=t.memoizedState),(d=Ui||qy(t,n,d,i,m,y,u)||e!==null&&e.dependencies!==null&&tc(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,y,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,y,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=y),s.props=i,s.state=y,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,Nu(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=oa(t,e.child,null,r),t.child=oa(t,null,n,r)):Te(e,t,n,r),t.memoizedState=s.state,e=t.child):e=_i(e,t,r),e}function Xy(e,t,n,i){return dl(),t.flags|=256,Te(e,t,n,i),t.child}var cf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hf(e){return{baseLanes:e,cachePool:oT()}}function ff(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Tn),e}function e0(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(le.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(Tt){if(r?zi(t):Bi(),Tt){var l=Yt,u;if(u=l){t:{for(u=l,l=kn;u.nodeType!==8;){if(!l){l=null;break t}if(u=Cn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:qr!==null?{id:oi,overflow:li}:null,retryLane:536870912,hydrationErrors:null},u=en(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Pe=t,Yt=null,u=!0):u=!1}u||Yr(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return Cd(l)?t.lanes=32:t.lanes=536870912,null;ci(t)}return l=i.children,i=i.fallback,r?(Bi(),r=t.mode,l=lc({mode:"hidden",children:l},r),i=Br(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=hf(n),r.childLanes=ff(e,a,n),t.memoizedState=cf,i):(zi(t),pd(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(zi(t),t.flags&=-257,t=df(e,t,n)):t.memoizedState!==null?(Bi(),t.child=e.child,t.flags|=128,t=null):(Bi(),r=i.fallback,l=t.mode,i=lc({mode:"visible",children:i.children},l),r=Br(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,oa(t,e.child,null,n),i=t.child,i.memoizedState=hf(n),i.childLanes=ff(e,a,n),t.memoizedState=cf,t=r);else if(zi(t),Cd(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(L(419)),i.stack="",i.digest=a,zo({value:i,source:null,stack:null}),t=df(e,t,n)}else if(ge||ml(e,t,n,!1),a=(n&e.childLanes)!==0,ge||a){if(a=Dt,a!==null&&(i=n&-n,i=i&42?1:fm(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,Sa(e,i),ln(a,e,i),WT;l.data==="$?"||Td(),t=df(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Yt=Cn(l.nextSibling),Pe=t,Tt=!0,Hr=null,kn=!1,e!==null&&(gn[yn++]=oi,gn[yn++]=li,gn[yn++]=qr,oi=e.id,li=e.overflow,qr=t),t=pd(t,i.children),t.flags|=4096);return t}return r?(Bi(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=di(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=di(h,r):(r=Br(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=hf(n):(u=l.cachePool,u!==null?(h=oe._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=oT(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=ff(e,a,n),t.memoizedState=cf,i):(zi(t),n=e.child,e=n.sibling,n=di(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function pd(e,t){return t=lc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function lc(e,t){return e=en(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function df(e,t,n){return oa(t,e.child,null,n),e=pd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),nd(e.return,t,n)}function mf(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function n0(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(Te(e,t,i.children,n),i=le.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zy(e,n,t);else if(e.tag===19)Zy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Bt(le,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&sc(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),mf(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&sc(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}mf(t,!0,n,null,s);break;case"together":mf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _i(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(n&t.childLanes))if(e!==null){if(ml(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=di(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=di(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function qm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&tc(e)))}function tR(e,t,n){switch(t.tag){case 3:Qu(t,t.stateNode.containerInfo),ji(t,oe,e.memoizedState.cache),dl();break;case 27:case 5:Ff(t);break;case 4:Qu(t,t.stateNode.containerInfo);break;case 10:ji(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(zi(t),t.flags|=128,null):n&t.child.childLanes?e0(e,t,n):(zi(t),e=_i(e,t,n),e!==null?e.sibling:null);zi(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(ml(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return n0(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Bt(le,le.current),i)break;return null;case 22:case 23:return t.lanes=0,t0(e,t,n);case 24:ji(t,oe,e.memoizedState.cache)}return _i(e,t,n)}function i0(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ge=!0;else{if(!qm(e,n)&&!(t.flags&128))return ge=!1,tR(e,t,n);ge=!!(e.flags&131072)}else ge=!1,Tt&&t.flags&1048576&&sT(t,Ju,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")Am(i)?(e=Zr(i,e),t.tag=1,t=$y(null,t,i,e,n)):(t.tag=0,t=md(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===um){t.tag=11,t=Gy(null,t,i,e,n);break t}else if(r===cm){t.tag=14,t=Qy(null,t,i,e,n);break t}}throw t=qf(i)||i,Error(L(306,t,""))}}return t;case 0:return md(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Zr(i,t.pendingProps),$y(e,t,i,r,n);case 3:t:{if(Qu(t,t.stateNode.containerInfo),e===null)throw Error(L(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,ad(e,t),Ao(t,i,null,n);var a=t.memoizedState;if(i=a.cache,ji(t,oe,i),i!==s.cache&&id(t,[oe],n,!0),bo(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Xy(e,t,i,n);break t}else if(i!==r){r=vn(Error(L(424)),t),zo(r),t=Xy(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Yt=Cn(e.firstChild),Pe=t,Tt=!0,Hr=null,kn=!0,n=GT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(dl(),i===r){t=_i(e,t,n);break t}Te(e,t,i,n)}t=t.child}return t;case 26:return Nu(e,t),e===null?(n=m_(t.type,null,t.pendingProps,null))?t.memoizedState=n:Tt||(n=t.type,e=t.pendingProps,i=pc(Wi.current).createElement(n),i[Oe]=t,i[Qe]=e,Re(i,n,e),me(i),t.stateNode=i):t.memoizedState=m_(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ff(t),e===null&&Tt&&(i=t.stateNode=H0(t.type,t.pendingProps,Wi.current),Pe=t,kn=!0,r=Yt,br(t.type)?(xd=r,Yt=Cn(i.firstChild)):Yt=r),Te(e,t,t.pendingProps.children,n),Nu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Tt&&((r=i=Yt)&&(i=CR(i,t.type,t.pendingProps,kn),i!==null?(t.stateNode=i,Pe=t,Yt=Cn(i.firstChild),kn=!1,r=!0):r=!1),r||Yr(t)),Ff(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,Rd(r,s)?i=null:a!==null&&Rd(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=Dm(e,t,Q1,null,null,n),Qo._currentValue=r),Nu(e,t),Te(e,t,i,n),t.child;case 6:return e===null&&Tt&&((e=n=Yt)&&(n=xR(n,t.pendingProps,kn),n!==null?(t.stateNode=n,Pe=t,Yt=null,e=!0):e=!1),e||Yr(t)),null;case 13:return e0(e,t,n);case 4:return Qu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=oa(t,null,i,n):Te(e,t,i,n),t.child;case 11:return Gy(e,t,t.type,t.pendingProps,n);case 7:return Te(e,t,t.pendingProps,n),t.child;case 8:return Te(e,t,t.pendingProps.children,n),t.child;case 12:return Te(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,ji(t,t.type,i.value),Te(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,$r(t),r=Ve(r),i=i(r),t.flags|=1,Te(e,t,i,n),t.child;case 14:return Qy(e,t,t.type,t.pendingProps,n);case 15:return JT(e,t,t.type,t.pendingProps,n);case 19:return n0(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=lc(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=di(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return t0(e,t,n);case 24:return $r(t),i=Ve(oe),e===null?(r=Im(),r===null&&(r=Dt,s=Rm(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},Cm(t),ji(t,oe,r)):(e.lanes&n&&(ad(e,t),Ao(t,null,null,n),bo()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),ji(t,oe,i)):(i=s.cache,ji(t,oe,i),i!==r.cache&&id(t,[oe],n,!0))),Te(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(L(156,t.tag))}function ii(e){e.flags|=4}function Wy(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Q0(t)){if(t=bn.current,t!==null&&((pt&4194048)===pt?jn!==null:(pt&62914560)!==pt&&!(pt&536870912)||t!==jn))throw Eo=sd,lT;e.flags|=8192}}function cu(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?xE():536870912,e.lanes|=t,la|=t)}function eo(e,t){if(!Tt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function eR(e,t,n){var i=t.pendingProps;switch(wm(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(t),null;case 1:return Ft(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),mi(oe),ea(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ja(t)?ii(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Cy())),Ft(t),null;case 26:return n=t.memoizedState,e===null?(ii(t),n!==null?(Ft(t),Wy(t,n)):(Ft(t),t.flags&=-16777217)):n?n!==e.memoizedState?(ii(t),Ft(t),Wy(t,n)):(Ft(t),t.flags&=-16777217):(e.memoizedProps!==i&&ii(t),Ft(t),t.flags&=-16777217),null;case 27:Ku(t),n=Wi.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ii(t);else{if(!i){if(t.stateNode===null)throw Error(L(166));return Ft(t),null}e=Ln.current,Ja(t)?Ry(t):(e=H0(r,i,n),t.stateNode=e,ii(t))}return Ft(t),null;case 5:if(Ku(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ii(t);else{if(!i){if(t.stateNode===null)throw Error(L(166));return Ft(t),null}if(e=Ln.current,Ja(t))Ry(t);else{switch(r=pc(Wi.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Oe]=t,e[Qe]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(Re(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ii(t)}}return Ft(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&ii(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(L(166));if(e=Wi.current,Ja(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Pe,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Oe]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||z0(e.nodeValue,n)),e||Yr(t)}else e=pc(e).createTextNode(i),e[Oe]=t,t.stateNode=e}return Ft(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Ja(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(L(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(L(317));r[Oe]=t}else dl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ft(t),r=!1}else r=Cy(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(ci(t),t):(ci(t),null)}if(ci(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),cu(t,t.updateQueue),Ft(t),null;case 4:return ea(),e===null&&Xm(t.stateNode.containerInfo),Ft(t),null;case 10:return mi(t.type),Ft(t),null;case 19:if(ye(le),r=t.memoizedState,r===null)return Ft(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)eo(r,!1);else{if($t!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=sc(e),s!==null){for(t.flags|=128,eo(r,!1),e=s.updateQueue,t.updateQueue=e,cu(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)rT(n,e),n=n.sibling;return Bt(le,le.current&1|2),t.child}e=e.sibling}r.tail!==null&&Un()>cc&&(t.flags|=128,i=!0,eo(r,!1),t.lanes=4194304)}else{if(!i)if(e=sc(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,cu(t,e),eo(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!Tt)return Ft(t),null}else 2*Un()-r.renderingStartTime>cc&&n!==536870912&&(t.flags|=128,i=!0,eo(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Un(),t.sibling=null,e=le.current,Bt(le,i?e&1|2:e&1),t):(Ft(t),null);case 22:case 23:return ci(t),xm(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Ft(t),t.subtreeFlags&6&&(t.flags|=8192)):Ft(t),n=t.updateQueue,n!==null&&cu(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&ye(Fr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),mi(oe),Ft(t),null;case 25:return null;case 30:return null}throw Error(L(156,t.tag))}function nR(e,t){switch(wm(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mi(oe),ea(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ku(t),null;case 13:if(ci(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));dl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ye(le),null;case 4:return ea(),null;case 10:return mi(t.type),null;case 22:case 23:return ci(t),xm(),e!==null&&ye(Fr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return mi(oe),null;case 25:return null;default:return null}}function r0(e,t){switch(wm(t),t.tag){case 3:mi(oe),ea();break;case 26:case 27:case 5:Ku(t);break;case 4:ea();break;case 13:ci(t);break;case 19:ye(le);break;case 10:mi(t.type);break;case 22:case 23:ci(t),xm(),e!==null&&ye(Fr);break;case 24:mi(oe)}}function vl(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Nt(t,t.return,l)}}function dr(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){Nt(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){Nt(t,t.return,d)}}function s0(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{hT(t,n)}catch(i){Nt(e,e.return,i)}}}function a0(e,t,n){n.props=Zr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Nt(e,t,i)}}function wo(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){Nt(e,t,r)}}function Pn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Nt(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Nt(e,t,r)}else n.current=null}function o0(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Nt(e,e.return,r)}}function pf(e,t,n){try{var i=e.stateNode;AR(i,e.type,n,t),i[Qe]=t}catch(r){Nt(e,e.return,r)}}function l0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&br(e.type)||e.tag===4}function gf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||l0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&br(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=rh));else if(i!==4&&(i===27&&br(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(gd(e,t,n),e=e.sibling;e!==null;)gd(e,t,n),e=e.sibling}function uc(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&br(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(uc(e,t,n),e=e.sibling;e!==null;)uc(e,t,n),e=e.sibling}function u0(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Re(t,i,n),t[Oe]=e,t[Qe]=n}catch(s){Nt(e,e.return,s)}}var si=!1,Wt=!1,yf=!1,Jy=typeof WeakSet=="function"?WeakSet:Set,de=null;function iR(e,t){if(e=e.containerInfo,Sd=vc,e=XE(e),Em(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,p=e,m=null;e:for(;;){for(var y;p!==n||r!==0&&p.nodeType!==3||(l=a+r),p!==s||i!==0&&p.nodeType!==3||(u=a+i),p.nodeType===3&&(a+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(wd={focusedElem:e,selectionRange:n},vc=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){switch(t=de,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var x=Zr(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(x,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(V){Nt(n,n.return,V)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Id(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Id(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(L(163))}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}}function c0(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Mi(e,n),i&4&&vl(5,n);break;case 1:if(Mi(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Nt(n,n.return,a)}else{var r=Zr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Nt(n,n.return,a)}}i&64&&s0(n),i&512&&wo(n,n.return);break;case 3:if(Mi(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{hT(e,t)}catch(a){Nt(n,n.return,a)}}break;case 27:t===null&&i&4&&u0(n);case 26:case 5:Mi(e,n),t===null&&i&4&&o0(n),i&512&&wo(n,n.return);break;case 12:Mi(e,n);break;case 13:Mi(e,n),i&4&&d0(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=fR.bind(null,n),NR(e,n))));break;case 22:if(i=n.memoizedState!==null||si,!i){t=t!==null&&t.memoizedState!==null||Wt,r=si;var s=Wt;si=i,(Wt=t)&&!s?Pi(e,n,(n.subtreeFlags&8772)!==0):Mi(e,n),si=r,Wt=s}break;case 30:break;default:Mi(e,n)}}function h0(e){var t=e.alternate;t!==null&&(e.alternate=null,h0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&mm(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var jt=null,He=!1;function ri(e,t,n){for(n=n.child;n!==null;)f0(e,t,n),n=n.sibling}function f0(e,t,n){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(ll,n)}catch{}switch(n.tag){case 26:Wt||Pn(n,t),ri(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Wt||Pn(n,t);var i=jt,r=He;br(n.type)&&(jt=n.stateNode,He=!1),ri(e,t,n),xo(n.stateNode),jt=i,He=r;break;case 5:Wt||Pn(n,t);case 6:if(i=jt,r=He,jt=null,ri(e,t,n),jt=i,He=r,jt!==null)if(He)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(n.stateNode)}catch(s){Nt(n,t,s)}else try{jt.removeChild(n.stateNode)}catch(s){Nt(n,t,s)}break;case 18:jt!==null&&(He?(e=jt,h_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),$o(e)):h_(jt,n.stateNode));break;case 4:i=jt,r=He,jt=n.stateNode.containerInfo,He=!0,ri(e,t,n),jt=i,He=r;break;case 0:case 11:case 14:case 15:Wt||dr(2,n,t),Wt||dr(4,n,t),ri(e,t,n);break;case 1:Wt||(Pn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&a0(n,t,i)),ri(e,t,n);break;case 21:ri(e,t,n);break;case 22:Wt=(i=Wt)||n.memoizedState!==null,ri(e,t,n),Wt=i;break;default:ri(e,t,n)}}function d0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{$o(e)}catch(n){Nt(t,t.return,n)}}function rR(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Jy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Jy),t;default:throw Error(L(435,e.tag))}}function _f(e,t){var n=rR(e);t.forEach(function(i){var r=dR.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function We(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(br(l.type)){jt=l.stateNode,He=!1;break t}break;case 5:jt=l.stateNode,He=!1;break t;case 3:case 4:jt=l.stateNode.containerInfo,He=!0;break t}l=l.return}if(jt===null)throw Error(L(160));f0(s,a,r),jt=null,He=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)m0(t,e),t=t.sibling}var Rn=null;function m0(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:We(t,e),Je(e),i&4&&(dr(3,e,e.return),vl(3,e),dr(5,e,e.return));break;case 1:We(t,e),Je(e),i&512&&(Wt||n===null||Pn(n,n.return)),i&64&&si&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Rn;if(We(t,e),Je(e),i&512&&(Wt||n===null||Pn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[hl]||s[Oe]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Re(s,i,n),s[Oe]=e,me(s),i=s;break t;case"link":var a=g_("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),Re(s,i,n),r.head.appendChild(s);break;case"meta":if(a=g_("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),Re(s,i,n),r.head.appendChild(s);break;default:throw Error(L(468,i))}s[Oe]=e,me(s),i=s}e.stateNode=i}else y_(r,e.type,e.stateNode);else e.stateNode=p_(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?y_(r,e.type,e.stateNode):p_(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&pf(e,e.memoizedProps,n.memoizedProps)}break;case 27:We(t,e),Je(e),i&512&&(Wt||n===null||Pn(n,n.return)),n!==null&&i&4&&pf(e,e.memoizedProps,n.memoizedProps);break;case 5:if(We(t,e),Je(e),i&512&&(Wt||n===null||Pn(n,n.return)),e.flags&32){r=e.stateNode;try{ia(r,"")}catch(y){Nt(e,e.return,y)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,pf(e,r,n!==null?n.memoizedProps:r)),i&1024&&(yf=!0);break;case 6:if(We(t,e),Je(e),i&4){if(e.stateNode===null)throw Error(L(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(y){Nt(e,e.return,y)}}break;case 3:if(Vu=null,r=Rn,Rn=gc(t.containerInfo),We(t,e),Rn=r,Je(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{$o(t.containerInfo)}catch(y){Nt(e,e.return,y)}yf&&(yf=!1,p0(e));break;case 4:i=Rn,Rn=gc(e.stateNode.containerInfo),We(t,e),Je(e),Rn=i;break;case 12:We(t,e),Je(e);break;case 13:We(t,e),Je(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Km=Un()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,_f(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=si,d=Wt;if(si=h||r,Wt=d||u,We(t,e),Wt=d,si=h,Je(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||si||Wt||Mr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var p=u.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(y){Nt(u,u.return,y)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(y){Nt(u,u.return,y)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,_f(e,n))));break;case 19:We(t,e),Je(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,_f(e,i)));break;case 30:break;case 21:break;default:We(t,e),Je(e)}}function Je(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(l0(i)){n=i;break}i=i.return}if(n==null)throw Error(L(160));switch(n.tag){case 27:var r=n.stateNode,s=gf(e);uc(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(ia(a,""),n.flags&=-33);var l=gf(e);uc(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=gf(e);gd(e,h,u);break;default:throw Error(L(161))}}catch(d){Nt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function p0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;p0(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Mi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)c0(e,t.alternate,t),t=t.sibling}function Mr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:dr(4,t,t.return),Mr(t);break;case 1:Pn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&a0(t,t.return,n),Mr(t);break;case 27:xo(t.stateNode);case 26:case 5:Pn(t,t.return),Mr(t);break;case 22:t.memoizedState===null&&Mr(t);break;case 30:Mr(t);break;default:Mr(t)}e=e.sibling}}function Pi(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Pi(r,s,n),vl(4,s);break;case 1:if(Pi(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){Nt(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)cT(u[r],l)}catch(h){Nt(i,i.return,h)}}n&&a&64&&s0(s),wo(s,s.return);break;case 27:u0(s);case 26:case 5:Pi(r,s,n),n&&i===null&&a&4&&o0(s),wo(s,s.return);break;case 12:Pi(r,s,n);break;case 13:Pi(r,s,n),n&&a&4&&d0(r,s);break;case 22:s.memoizedState===null&&Pi(r,s,n),wo(s,s.return);break;case 30:break;default:Pi(r,s,n)}t=t.sibling}}function Hm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&pl(n))}function Fm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&pl(e))}function Vn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)g0(e,t,n,i),t=t.sibling}function g0(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Vn(e,t,n,i),r&2048&&vl(9,t);break;case 1:Vn(e,t,n,i);break;case 3:Vn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&pl(e)));break;case 12:if(r&2048){Vn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){Nt(t,t.return,u)}}else Vn(e,t,n,i);break;case 13:Vn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?Vn(e,t,n,i):Ro(e,t):s._visibility&2?Vn(e,t,n,i):(s._visibility|=2,bs(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&Hm(a,t);break;case 24:Vn(e,t,n,i),r&2048&&Fm(t.alternate,t);break;default:Vn(e,t,n,i)}}function bs(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:bs(s,a,l,u,r),vl(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?bs(s,a,l,u,r):Ro(s,a):(d._visibility|=2,bs(s,a,l,u,r)),r&&h&2048&&Hm(a.alternate,a);break;case 24:bs(s,a,l,u,r),r&&h&2048&&Fm(a.alternate,a);break;default:bs(s,a,l,u,r)}t=t.sibling}}function Ro(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Ro(n,i),r&2048&&Hm(i.alternate,i);break;case 24:Ro(n,i),r&2048&&Fm(i.alternate,i);break;default:Ro(n,i)}t=t.sibling}}var oo=8192;function _s(e){if(e.subtreeFlags&oo)for(e=e.child;e!==null;)y0(e),e=e.sibling}function y0(e){switch(e.tag){case 26:_s(e),e.flags&oo&&e.memoizedState!==null&&HR(Rn,e.memoizedState,e.memoizedProps);break;case 5:_s(e);break;case 3:case 4:var t=Rn;Rn=gc(e.stateNode.containerInfo),_s(e),Rn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=oo,oo=16777216,_s(e),oo=t):_s(e));break;default:_s(e)}}function _0(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function no(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];de=i,E0(i,e)}_0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)v0(e),e=e.sibling}function v0(e){switch(e.tag){case 0:case 11:case 15:no(e),e.flags&2048&&dr(9,e,e.return);break;case 3:no(e);break;case 12:no(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Du(e)):no(e);break;default:no(e)}}function Du(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];de=i,E0(i,e)}_0(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:dr(8,t,t.return),Du(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Du(t));break;default:Du(t)}e=e.sibling}}function E0(e,t){for(;de!==null;){var n=de;switch(n.tag){case 0:case 11:case 15:dr(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:pl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,de=i;else t:for(n=e;de!==null;){i=de;var r=i.sibling,s=i.return;if(h0(i),i===n){de=null;break t}if(r!==null){r.return=s,de=r;break t}de=s}}}var sR={getCacheForType:function(e){var t=Ve(oe),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},aR=typeof WeakMap=="function"?WeakMap:Map,wt=0,Dt=null,lt=null,pt=0,At=0,tn=null,$i=!1,wa=!1,Gm=!1,vi=0,$t=0,mr=0,Gr=0,Qm=0,Tn=0,la=0,Io=null,Fe=null,yd=!1,Km=0,cc=1/0,hc=null,er=null,Ae=0,nr=null,ua=null,$s=0,_d=0,vd=null,T0=null,Co=0,Ed=null;function on(){if(wt&2&&pt!==0)return pt&-pt;if(J.T!==null){var e=ra;return e!==0?e:$m()}return OE()}function b0(){Tn===0&&(Tn=!(pt&536870912)||Tt?CE():536870912);var e=bn.current;return e!==null&&(e.flags|=32),Tn}function ln(e,t,n){(e===Dt&&(At===2||At===9)||e.cancelPendingCommit!==null)&&(ca(e,0),Xi(e,pt,Tn,!1)),cl(e,n),(!(wt&2)||e!==Dt)&&(e===Dt&&(!(wt&2)&&(Gr|=n),$t===4&&Xi(e,pt,Tn,!1)),$n(e))}function A0(e,t,n){if(wt&6)throw Error(L(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||ul(e,t),r=i?uR(e,t):vf(e,t,!0),s=i;do{if(r===0){wa&&!i&&Xi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!oR(n)){r=vf(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=Io;var u=l.current.memoizedState.isDehydrated;if(u&&(ca(l,a).flags|=256),a=vf(l,a,!1),a!==2){if(Gm&&!u){l.errorRecoveryDisabledLanes|=s,Gr|=s,r=4;break t}s=Fe,Fe=r,s!==null&&(Fe===null?Fe=s:Fe.push.apply(Fe,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){ca(e,0),Xi(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(L(345));case 4:if((t&4194048)!==t)break;case 6:Xi(i,t,Tn,!$i);break t;case 2:Fe=null;break;case 3:case 5:break;default:throw Error(L(329))}if((t&62914560)===t&&(r=Km+300-Un(),10<r)){if(Xi(i,t,Tn,!$i),Gc(i,0,!0)!==0)break t;i.timeoutHandle=q0(t_.bind(null,i,n,Fe,hc,yd,t,Tn,Gr,la,$i,s,2,-0,0),r);break t}t_(i,n,Fe,hc,yd,t,Tn,Gr,la,$i,s,0,-0,0)}}break}while(!0);$n(e)}function t_(e,t,n,i,r,s,a,l,u,h,d,p,m,y){if(e.timeoutHandle=-1,p=t.subtreeFlags,(p&8192||(p&16785408)===16785408)&&(Go={stylesheets:null,count:0,unsuspend:qR},y0(t),p=FR(),p!==null)){e.cancelPendingCommit=p(n_.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,y)),Xi(e,s,a,!h);return}n_(e,t,s,n,i,r,a,l,u)}function oR(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!cn(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xi(e,t,n,i){t&=~Qm,t&=~Gr,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-an(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&NE(e,n,t)}function eh(){return wt&6?!0:(El(0),!1)}function Ym(){if(lt!==null){if(At===0)var e=lt.return;else e=lt,ui=os=null,Mm(e),Ys=null,qo=0,e=lt;for(;e!==null;)r0(e.alternate,e),e=e.return;lt=null}}function ca(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,wR(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Ym(),Dt=e,lt=n=di(e.current,null),pt=t,At=0,tn=null,$i=!1,wa=ul(e,t),Gm=!1,la=Tn=Qm=Gr=mr=$t=0,Fe=Io=null,yd=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-an(i),s=1<<r;t|=e[r],i&=~s}return vi=t,$c(),n}function S0(e,t){at=null,J.H=rc,t===gl||t===Zc?(t=Oy(),At=3):t===lT?(t=Oy(),At=4):At=t===WT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,tn=t,lt===null&&($t=1,oc(e,vn(t,e.current)))}function w0(){var e=J.H;return J.H=rc,e===null?rc:e}function R0(){var e=J.A;return J.A=sR,e}function Td(){$t=4,$i||(pt&4194048)!==pt&&bn.current!==null||(wa=!0),!(mr&134217727)&&!(Gr&134217727)||Dt===null||Xi(Dt,pt,Tn,!1)}function vf(e,t,n){var i=wt;wt|=2;var r=w0(),s=R0();(Dt!==e||pt!==t)&&(hc=null,ca(e,t)),t=!1;var a=$t;t:do try{if(At!==0&&lt!==null){var l=lt,u=tn;switch(At){case 8:Ym(),a=6;break t;case 3:case 2:case 9:case 6:bn.current===null&&(t=!0);var h=At;if(At=0,tn=null,js(e,l,u,h),n&&wa){a=0;break t}break;default:h=At,At=0,tn=null,js(e,l,u,h)}}lR(),a=$t;break}catch(d){S0(e,d)}while(!0);return t&&e.shellSuspendCounter++,ui=os=null,wt=i,J.H=r,J.A=s,lt===null&&(Dt=null,pt=0,$c()),a}function lR(){for(;lt!==null;)I0(lt)}function uR(e,t){var n=wt;wt|=2;var i=w0(),r=R0();Dt!==e||pt!==t?(hc=null,cc=Un()+500,ca(e,t)):wa=ul(e,t);t:do try{if(At!==0&&lt!==null){t=lt;var s=tn;e:switch(At){case 1:At=0,tn=null,js(e,t,s,1);break;case 2:case 9:if(Dy(s)){At=0,tn=null,e_(t);break}t=function(){At!==2&&At!==9||Dt!==e||(At=7),$n(e)},s.then(t,t);break t;case 3:At=7;break t;case 4:At=5;break t;case 7:Dy(s)?(At=0,tn=null,e_(t)):(At=0,tn=null,js(e,t,s,7));break;case 5:var a=null;switch(lt.tag){case 26:a=lt.memoizedState;case 5:case 27:var l=lt;if(!a||Q0(a)){At=0,tn=null;var u=l.sibling;if(u!==null)lt=u;else{var h=l.return;h!==null?(lt=h,nh(h)):lt=null}break e}}At=0,tn=null,js(e,t,s,5);break;case 6:At=0,tn=null,js(e,t,s,6);break;case 8:Ym(),$t=6;break t;default:throw Error(L(462))}}cR();break}catch(d){S0(e,d)}while(!0);return ui=os=null,J.H=i,J.A=r,wt=n,lt!==null?0:(Dt=null,pt=0,$c(),$t)}function cR(){for(;lt!==null&&!Ow();)I0(lt)}function I0(e){var t=i0(e.alternate,e,vi);e.memoizedProps=e.pendingProps,t===null?nh(e):lt=t}function e_(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Yy(n,t,t.pendingProps,t.type,void 0,pt);break;case 11:t=Yy(n,t,t.pendingProps,t.type.render,t.ref,pt);break;case 5:Mm(t);default:r0(n,t),t=lt=rT(t,vi),t=i0(n,t,vi)}e.memoizedProps=e.pendingProps,t===null?nh(e):lt=t}function js(e,t,n,i){ui=os=null,Mm(t),Ys=null,qo=0;var r=t.return;try{if(J1(e,r,t,n,pt)){$t=1,oc(e,vn(n,e.current)),lt=null;return}}catch(s){if(r!==null)throw lt=r,s;$t=1,oc(e,vn(n,e.current)),lt=null;return}t.flags&32768?(Tt||i===1?e=!0:wa||pt&536870912?e=!1:($i=e=!0,(i===2||i===9||i===3||i===6)&&(i=bn.current,i!==null&&i.tag===13&&(i.flags|=16384))),C0(t,e)):nh(t)}function nh(e){var t=e;do{if(t.flags&32768){C0(t,$i);return}e=t.return;var n=eR(t.alternate,t,vi);if(n!==null){lt=n;return}if(t=t.sibling,t!==null){lt=t;return}lt=t=e}while(t!==null);$t===0&&($t=5)}function C0(e,t){do{var n=nR(e.alternate,e);if(n!==null){n.flags&=32767,lt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){lt=e;return}lt=e=n}while(e!==null);$t=6,lt=null}function n_(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do ih();while(Ae!==0);if(wt&6)throw Error(L(327));if(t!==null){if(t===e.current)throw Error(L(177));if(s=t.lanes|t.childLanes,s|=Tm,qw(e,n,s,a,l,u),e===Dt&&(lt=Dt=null,pt=0),ua=t,nr=e,$s=n,_d=s,vd=r,T0=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,mR(Yu,function(){return V0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=J.T,J.T=null,r=bt.p,bt.p=2,a=wt,wt|=4;try{iR(e,t,n)}finally{wt=a,bt.p=r,J.T=i}}Ae=1,x0(),N0(),D0()}}function x0(){if(Ae===1){Ae=0;var e=nr,t=ua,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=J.T,J.T=null;var i=bt.p;bt.p=2;var r=wt;wt|=4;try{m0(t,e);var s=wd,a=XE(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&$E(l.ownerDocument.documentElement,l)){if(u!==null&&Em(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var p=l.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var y=m.getSelection(),x=l.textContent.length,V=Math.min(u.start,x),O=u.end===void 0?V:Math.min(u.end,x);!y.extend&&V>O&&(a=O,O=V,V=a);var S=Ay(l,V),E=Ay(l,O);if(S&&E&&(y.rangeCount!==1||y.anchorNode!==S.node||y.anchorOffset!==S.offset||y.focusNode!==E.node||y.focusOffset!==E.offset)){var R=p.createRange();R.setStart(S.node,S.offset),y.removeAllRanges(),V>O?(y.addRange(R),y.extend(E.node,E.offset)):(R.setEnd(E.node,E.offset),y.addRange(R))}}}}for(p=[],y=l;y=y.parentNode;)y.nodeType===1&&p.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var D=p[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}vc=!!Sd,wd=Sd=null}finally{wt=r,bt.p=i,J.T=n}}e.current=t,Ae=2}}function N0(){if(Ae===2){Ae=0;var e=nr,t=ua,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=J.T,J.T=null;var i=bt.p;bt.p=2;var r=wt;wt|=4;try{c0(e,t.alternate,t)}finally{wt=r,bt.p=i,J.T=n}}Ae=3}}function D0(){if(Ae===4||Ae===3){Ae=0,Vw();var e=nr,t=ua,n=$s,i=T0;t.subtreeFlags&10256||t.flags&10256?Ae=5:(Ae=0,ua=nr=null,O0(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(er=null),dm(n),t=t.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(ll,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=J.T,r=bt.p,bt.p=2,J.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{J.T=t,bt.p=r}}$s&3&&ih(),$n(e),r=e.pendingLanes,n&4194090&&r&42?e===Ed?Co++:(Co=0,Ed=e):Co=0,El(0)}}function O0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,pl(t)))}function ih(e){return x0(),N0(),D0(),V0()}function V0(){if(Ae!==5)return!1;var e=nr,t=_d;_d=0;var n=dm($s),i=J.T,r=bt.p;try{bt.p=32>n?32:n,J.T=null,n=vd,vd=null;var s=nr,a=$s;if(Ae=0,ua=nr=null,$s=0,wt&6)throw Error(L(331));var l=wt;if(wt|=4,v0(s.current),g0(s,s.current,a,n),wt=l,El(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(ll,s)}catch{}return!0}finally{bt.p=r,J.T=i,O0(e,t)}}function i_(e,t,n){t=vn(n,t),t=dd(e.stateNode,t,2),e=tr(e,t,2),e!==null&&(cl(e,2),$n(e))}function Nt(e,t,n){if(e.tag===3)i_(e,e,n);else for(;t!==null;){if(t.tag===3){i_(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(er===null||!er.has(i))){e=vn(n,e),n=XT(2),i=tr(t,n,2),i!==null&&(ZT(n,i,t,e),cl(i,2),$n(i));break}}t=t.return}}function Ef(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new aR;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Gm=!0,r.add(n),e=hR.bind(null,e,t,n),t.then(e,e))}function hR(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Dt===e&&(pt&n)===n&&($t===4||$t===3&&(pt&62914560)===pt&&300>Un()-Km?!(wt&2)&&ca(e,0):Qm|=n,la===pt&&(la=0)),$n(e)}function M0(e,t){t===0&&(t=xE()),e=Sa(e,t),e!==null&&(cl(e,t),$n(e))}function fR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),M0(e,n)}function dR(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(L(314))}i!==null&&i.delete(t),M0(e,n)}function mR(e,t){return hm(e,t)}var fc=null,As=null,bd=!1,dc=!1,Tf=!1,Qr=0;function $n(e){e!==As&&e.next===null&&(As===null?fc=As=e:As=As.next=e),dc=!0,bd||(bd=!0,gR())}function El(e,t){if(!Tf&&dc){Tf=!0;do for(var n=!1,i=fc;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-an(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,r_(i,s))}else s=pt,s=Gc(i,i===Dt?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||ul(i,s)||(n=!0,r_(i,s));i=i.next}while(n);Tf=!1}}function pR(){k0()}function k0(){dc=bd=!1;var e=0;Qr!==0&&(SR()&&(e=Qr),Qr=0);for(var t=Un(),n=null,i=fc;i!==null;){var r=i.next,s=P0(i,t);s===0?(i.next=null,n===null?fc=r:n.next=r,r===null&&(As=n)):(n=i,(e!==0||s&3)&&(dc=!0)),i=r}El(e)}function P0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-an(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=Bw(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=Dt,n=pt,n=Gc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(At===2||At===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Qh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||ul(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Qh(i),dm(n)){case 2:case 8:n=RE;break;case 32:n=Yu;break;case 268435456:n=IE;break;default:n=Yu}return i=L0.bind(null,e),n=hm(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Qh(i),e.callbackPriority=2,e.callbackNode=null,2}function L0(e,t){if(Ae!==0&&Ae!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ih()&&e.callbackNode!==n)return null;var i=pt;return i=Gc(e,e===Dt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(A0(e,i,t),P0(e,Un()),e.callbackNode!=null&&e.callbackNode===n?L0.bind(null,e):null)}function r_(e,t){if(ih())return null;A0(e,t,!0)}function gR(){RR(function(){wt&6?hm(wE,pR):k0()})}function $m(){return Qr===0&&(Qr=CE()),Qr}function s_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Au(""+e)}function a_(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function yR(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=s_((r[Qe]||null).action),a=i.submitter;a&&(t=(t=a[Qe]||null)?s_(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new Qc("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Qr!==0){var u=a?a_(r,a):new FormData(r);hd(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?a_(r,a):new FormData(r),hd(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var bf=0;bf<Jf.length;bf++){var Af=Jf[bf],_R=Af.toLowerCase(),vR=Af[0].toUpperCase()+Af.slice(1);Dn(_R,"on"+vR)}Dn(WE,"onAnimationEnd");Dn(JE,"onAnimationIteration");Dn(tT,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(P1,"onTransitionRun");Dn(L1,"onTransitionStart");Dn(U1,"onTransitionCancel");Dn(eT,"onTransitionEnd");na("onMouseEnter",["mouseout","mouseover"]);na("onMouseLeave",["mouseout","mouseover"]);na("onPointerEnter",["pointerout","pointerover"]);na("onPointerLeave",["pointerout","pointerover"]);rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rs("onBeforeInput",["compositionend","keypress","textInput","paste"]);rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ER=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ho));function U0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){ac(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){ac(d)}r.currentTarget=null,s=u}}}}function ot(e,t){var n=t[Qf];n===void 0&&(n=t[Qf]=new Set);var i=e+"__bubble";n.has(i)||(j0(t,e,2,!1),n.add(i))}function Sf(e,t,n){var i=0;t&&(i|=4),j0(n,e,i,t)}var hu="_reactListening"+Math.random().toString(36).slice(2);function Xm(e){if(!e[hu]){e[hu]=!0,VE.forEach(function(n){n!=="selectionchange"&&(ER.has(n)||Sf(n,!1,e),Sf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hu]||(t[hu]=!0,Sf("selectionchange",!1,t))}}function j0(e,t,n,i){switch(Z0(t)){case 2:var r=KR;break;case 8:r=YR;break;default:r=tp}n=r.bind(null,t,n,e),r=void 0,!Xf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function wf(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=Ns(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}BE(function(){var h=s,d=gm(n),p=[];t:{var m=nT.get(e);if(m!==void 0){var y=Qc,x=e;switch(e){case"keypress":if(wu(n)===0)break t;case"keydown":case"keyup":y=m1;break;case"focusin":x="focus",y=tf;break;case"focusout":x="blur",y=tf;break;case"beforeblur":case"afterblur":y=tf;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=dy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=n1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=y1;break;case WE:case JE:case tT:y=s1;break;case eT:y=v1;break;case"scroll":case"scrollend":y=t1;break;case"wheel":y=T1;break;case"copy":case"cut":case"paste":y=o1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=py;break;case"toggle":case"beforetoggle":y=A1}var V=(t&4)!==0,O=!V&&(e==="scroll"||e==="scrollend"),S=V?m!==null?m+"Capture":null:m;V=[];for(var E=h,R;E!==null;){var D=E;if(R=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||R===null||S===null||(D=Lo(E,S),D!=null&&V.push(Fo(E,D,R))),O)break;E=E.return}0<V.length&&(m=new y(m,x,null,n,d),p.push({event:m,listeners:V}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&n!==$f&&(x=n.relatedTarget||n.fromElement)&&(Ns(x)||x[ba]))break t;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=h,x=x?Ns(x):null,x!==null&&(O=ol(x),V=x.tag,x!==O||V!==5&&V!==27&&V!==6)&&(x=null)):(y=null,x=h),y!==x)){if(V=dy,D="onMouseLeave",S="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(V=py,D="onPointerLeave",S="onPointerEnter",E="pointer"),O=y==null?m:ao(y),R=x==null?m:ao(x),m=new V(D,E+"leave",y,n,d),m.target=O,m.relatedTarget=R,D=null,Ns(d)===h&&(V=new V(S,E+"enter",x,n,d),V.target=R,V.relatedTarget=O,D=V),O=D,y&&x)e:{for(V=y,S=x,E=0,R=V;R;R=vs(R))E++;for(R=0,D=S;D;D=vs(D))R++;for(;0<E-R;)V=vs(V),E--;for(;0<R-E;)S=vs(S),R--;for(;E--;){if(V===S||S!==null&&V===S.alternate)break e;V=vs(V),S=vs(S)}V=null}else V=null;y!==null&&o_(p,m,y,V,!1),x!==null&&O!==null&&o_(p,O,x,V,!0)}}t:{if(m=h?ao(h):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var U=vy;else if(_y(m))if(KE)U=V1;else{U=D1;var H=N1}else y=m.nodeName,!y||y.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&pm(h.elementType)&&(U=vy):U=O1;if(U&&(U=U(e,h))){QE(p,U,n,d);break t}H&&H(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Yf(m,"number",m.value)}switch(H=h?ao(h):window,e){case"focusin":(_y(H)||H.contentEditable==="true")&&(Vs=H,Zf=h,_o=null);break;case"focusout":_o=Zf=Vs=null;break;case"mousedown":Wf=!0;break;case"contextmenu":case"mouseup":case"dragend":Wf=!1,Sy(p,n,d);break;case"selectionchange":if(k1)break;case"keydown":case"keyup":Sy(p,n,d)}var b;if(vm)t:{switch(e){case"compositionstart":var v="onCompositionStart";break t;case"compositionend":v="onCompositionEnd";break t;case"compositionupdate":v="onCompositionUpdate";break t}v=void 0}else Os?FE(e,n)&&(v="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(HE&&n.locale!=="ko"&&(Os||v!=="onCompositionStart"?v==="onCompositionEnd"&&Os&&(b=qE()):(Yi=d,ym="value"in Yi?Yi.value:Yi.textContent,Os=!0)),H=mc(h,v),0<H.length&&(v=new my(v,e,null,n,d),p.push({event:v,listeners:H}),b?v.data=b:(b=GE(n),b!==null&&(v.data=b)))),(b=w1?R1(e,n):I1(e,n))&&(v=mc(h,"onBeforeInput"),0<v.length&&(H=new my("onBeforeInput","beforeinput",null,n,d),p.push({event:H,listeners:v}),H.data=b)),yR(p,e,h,n,d)}U0(p,t)})}function Fo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function mc(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Lo(e,n),r!=null&&i.unshift(Fo(e,r,s)),r=Lo(e,t),r!=null&&i.push(Fo(e,r,s))),e.tag===3)return i;e=e.return}return[]}function vs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function o_(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=Lo(n,s),h!=null&&a.unshift(Fo(n,h,u))):r||(h=Lo(n,s),h!=null&&a.push(Fo(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var TR=/\r\n?/g,bR=/\u0000|\uFFFD/g;function l_(e){return(typeof e=="string"?e:""+e).replace(TR,`
`).replace(bR,"")}function z0(e,t){return t=l_(t),l_(e)===t}function rh(){}function Rt(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ia(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ia(e,""+i);break;case"className":ru(e,"class",i);break;case"tabIndex":ru(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ru(e,n,i);break;case"style":zE(e,i,s);break;case"data":if(t!=="object"){ru(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Au(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&Rt(e,t,"name",r.name,r,null),Rt(e,t,"formEncType",r.formEncType,r,null),Rt(e,t,"formMethod",r.formMethod,r,null),Rt(e,t,"formTarget",r.formTarget,r,null)):(Rt(e,t,"encType",r.encType,r,null),Rt(e,t,"method",r.method,r,null),Rt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Au(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=rh);break;case"onScroll":i!=null&&ot("scroll",e);break;case"onScrollEnd":i!=null&&ot("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(L(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(L(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Au(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":ot("beforetoggle",e),ot("toggle",e),bu(e,"popover",i);break;case"xlinkActuate":ni(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ni(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ni(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ni(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ni(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ni(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ni(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ni(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ni(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":bu(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Ww.get(n)||n,bu(e,n,i))}}function Ad(e,t,n,i,r,s){switch(n){case"style":zE(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(L(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(L(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ia(e,i):(typeof i=="number"||typeof i=="bigint")&&ia(e,""+i);break;case"onScroll":i!=null&&ot("scroll",e);break;case"onScrollEnd":i!=null&&ot("scrollend",e);break;case"onClick":i!=null&&(e.onclick=rh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ME.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Qe]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):bu(e,n,i)}}}function Re(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",e),ot("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(L(137,t));default:Rt(e,t,s,a,n,null)}}r&&Rt(e,t,"srcSet",n.srcSet,n,null),i&&Rt(e,t,"src",n.src,n,null);return;case"input":ot("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(L(137,t));break;default:Rt(e,t,i,d,n,null)}}LE(e,s,l,u,h,a,r,!1),$u(e);return;case"select":ot("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Rt(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?Hs(e,!!i,t,!1):n!=null&&Hs(e,!!i,n,!0);return;case"textarea":ot("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(L(91));break;default:Rt(e,t,a,l,n,null)}jE(e,i,r,s),$u(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Rt(e,t,u,i,n,null)}return;case"dialog":ot("beforetoggle",e),ot("toggle",e),ot("cancel",e),ot("close",e);break;case"iframe":case"object":ot("load",e);break;case"video":case"audio":for(i=0;i<Ho.length;i++)ot(Ho[i],e);break;case"image":ot("error",e),ot("load",e);break;case"details":ot("toggle",e);break;case"embed":case"source":case"link":ot("error",e),ot("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(L(137,t));default:Rt(e,t,h,i,n,null)}return;default:if(pm(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&Ad(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Rt(e,t,l,i,n,null))}function AR(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(y in n){var p=n[y];if(n.hasOwnProperty(y)&&p!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":u=p;default:i.hasOwnProperty(y)||Rt(e,t,y,null,i,p)}}for(var m in i){var y=i[m];if(p=n[m],i.hasOwnProperty(m)&&(y!=null||p!=null))switch(m){case"type":s=y;break;case"name":r=y;break;case"checked":h=y;break;case"defaultChecked":d=y;break;case"value":a=y;break;case"defaultValue":l=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(L(137,t));break;default:y!==p&&Rt(e,t,m,y,i,p)}}Kf(e,a,l,u,h,d,s,r);return;case"select":y=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":y=u;default:i.hasOwnProperty(s)||Rt(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&Rt(e,t,r,s,i,u)}t=l,n=a,i=y,m!=null?Hs(e,!!n,m,!1):!!i!=!!n&&(t!=null?Hs(e,!!n,t,!0):Hs(e,!!n,n?[]:"",!1));return;case"textarea":y=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Rt(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":y=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(L(91));break;default:r!==s&&Rt(e,t,a,r,i,s)}UE(e,m,y);return;case"option":for(var x in n)if(m=n[x],n.hasOwnProperty(x)&&m!=null&&!i.hasOwnProperty(x))switch(x){case"selected":e.selected=!1;break;default:Rt(e,t,x,null,i,m)}for(u in i)if(m=i[u],y=n[u],i.hasOwnProperty(u)&&m!==y&&(m!=null||y!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Rt(e,t,u,m,i,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!=null&&!i.hasOwnProperty(V)&&Rt(e,t,V,null,i,m);for(h in i)if(m=i[h],y=n[h],i.hasOwnProperty(h)&&m!==y&&(m!=null||y!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(L(137,t));break;default:Rt(e,t,h,m,i,y)}return;default:if(pm(t)){for(var O in n)m=n[O],n.hasOwnProperty(O)&&m!==void 0&&!i.hasOwnProperty(O)&&Ad(e,t,O,void 0,i,m);for(d in i)m=i[d],y=n[d],!i.hasOwnProperty(d)||m===y||m===void 0&&y===void 0||Ad(e,t,d,m,i,y);return}}for(var S in n)m=n[S],n.hasOwnProperty(S)&&m!=null&&!i.hasOwnProperty(S)&&Rt(e,t,S,null,i,m);for(p in i)m=i[p],y=n[p],!i.hasOwnProperty(p)||m===y||m==null&&y==null||Rt(e,t,p,m,i,y)}var Sd=null,wd=null;function pc(e){return e.nodeType===9?e:e.ownerDocument}function u_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Rd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Rf=null;function SR(){var e=window.event;return e&&e.type==="popstate"?e===Rf?!1:(Rf=e,!0):(Rf=null,!1)}var q0=typeof setTimeout=="function"?setTimeout:void 0,wR=typeof clearTimeout=="function"?clearTimeout:void 0,c_=typeof Promise=="function"?Promise:void 0,RR=typeof queueMicrotask=="function"?queueMicrotask:typeof c_<"u"?function(e){return c_.resolve(null).then(e).catch(IR)}:q0;function IR(e){setTimeout(function(){throw e})}function br(e){return e==="head"}function h_(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&xo(a.documentElement),n&2&&xo(a.body),n&4)for(n=a.head,xo(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[hl]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),$o(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);$o(t)}function Id(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Id(n),mm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function CR(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[hl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Cn(e.nextSibling),e===null)break}return null}function xR(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Cn(e.nextSibling),e===null))return null;return e}function Cd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function NR(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var xd=null;function f_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function H0(e,t,n){switch(t=pc(n),e){case"html":if(e=t.documentElement,!e)throw Error(L(452));return e;case"head":if(e=t.head,!e)throw Error(L(453));return e;case"body":if(e=t.body,!e)throw Error(L(454));return e;default:throw Error(L(451))}}function xo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);mm(e)}var An=new Map,d_=new Set;function gc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var wi=bt.d;bt.d={f:DR,r:OR,D:VR,C:MR,L:kR,m:PR,X:UR,S:LR,M:jR};function DR(){var e=wi.f(),t=eh();return e||t}function OR(e){var t=Aa(e);t!==null&&t.tag===5&&t.type==="form"?PT(t):wi.r(e)}var Ra=typeof document>"u"?null:document;function F0(e,t,n){var i=Ra;if(i&&typeof t=="string"&&t){var r=_n(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),d_.has(r)||(d_.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),Re(t,"link",e),me(t),i.head.appendChild(t)))}}function VR(e){wi.D(e),F0("dns-prefetch",e,null)}function MR(e,t){wi.C(e,t),F0("preconnect",e,t)}function kR(e,t,n){wi.L(e,t,n);var i=Ra;if(i&&e&&t){var r='link[rel="preload"][as="'+_n(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+_n(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+_n(n.imageSizes)+'"]')):r+='[href="'+_n(e)+'"]';var s=r;switch(t){case"style":s=ha(e);break;case"script":s=Ia(e)}An.has(s)||(e=Lt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),An.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Tl(s))||t==="script"&&i.querySelector(bl(s))||(t=i.createElement("link"),Re(t,"link",e),me(t),i.head.appendChild(t)))}}function PR(e,t){wi.m(e,t);var n=Ra;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+_n(i)+'"][href="'+_n(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Ia(e)}if(!An.has(s)&&(e=Lt({rel:"modulepreload",href:e},t),An.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(bl(s)))return}i=n.createElement("link"),Re(i,"link",e),me(i),n.head.appendChild(i)}}}function LR(e,t,n){wi.S(e,t,n);var i=Ra;if(i&&e){var r=qs(i).hoistableStyles,s=ha(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Tl(s)))l.loading=5;else{e=Lt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=An.get(s))&&Zm(e,n);var u=a=i.createElement("link");me(u),Re(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Ou(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function UR(e,t){wi.X(e,t);var n=Ra;if(n&&e){var i=qs(n).hoistableScripts,r=Ia(e),s=i.get(r);s||(s=n.querySelector(bl(r)),s||(e=Lt({src:e,async:!0},t),(t=An.get(r))&&Wm(e,t),s=n.createElement("script"),me(s),Re(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function jR(e,t){wi.M(e,t);var n=Ra;if(n&&e){var i=qs(n).hoistableScripts,r=Ia(e),s=i.get(r);s||(s=n.querySelector(bl(r)),s||(e=Lt({src:e,async:!0,type:"module"},t),(t=An.get(r))&&Wm(e,t),s=n.createElement("script"),me(s),Re(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function m_(e,t,n,i){var r=(r=Wi.current)?gc(r):null;if(!r)throw Error(L(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ha(n.href),n=qs(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ha(n.href);var s=qs(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(Tl(e)))&&!s._p&&(a.instance=s,a.state.loading=5),An.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},An.set(e,n),s||zR(r,e,n,a.state))),t&&i===null)throw Error(L(528,""));return a}if(t&&i!==null)throw Error(L(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ia(n),n=qs(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(L(444,e))}}function ha(e){return'href="'+_n(e)+'"'}function Tl(e){return'link[rel="stylesheet"]['+e+"]"}function G0(e){return Lt({},e,{"data-precedence":e.precedence,precedence:null})}function zR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Re(t,"link",n),me(t),e.head.appendChild(t))}function Ia(e){return'[src="'+_n(e)+'"]'}function bl(e){return"script[async]"+e}function p_(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+_n(n.href)+'"]');if(i)return t.instance=i,me(i),i;var r=Lt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),me(i),Re(i,"style",r),Ou(i,n.precedence,e),t.instance=i;case"stylesheet":r=ha(n.href);var s=e.querySelector(Tl(r));if(s)return t.state.loading|=4,t.instance=s,me(s),s;i=G0(n),(r=An.get(r))&&Zm(i,r),s=(e.ownerDocument||e).createElement("link"),me(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Re(s,"link",i),t.state.loading|=4,Ou(s,n.precedence,e),t.instance=s;case"script":return s=Ia(n.src),(r=e.querySelector(bl(s)))?(t.instance=r,me(r),r):(i=n,(r=An.get(s))&&(i=Lt({},n),Wm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),me(r),Re(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(L(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Ou(i,n.precedence,e));return t.instance}function Ou(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Zm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Wm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Vu=null;function g_(e,t,n){if(Vu===null){var i=new Map,r=Vu=new Map;r.set(n,i)}else r=Vu,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[hl]||s[Oe]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function y_(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function BR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Q0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Go=null;function qR(){}function HR(e,t,n){if(Go===null)throw Error(L(475));var i=Go;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=ha(n.href),s=e.querySelector(Tl(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=yc.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,me(s);return}s=e.ownerDocument||e,n=G0(n),(r=An.get(r))&&Zm(n,r),s=s.createElement("link"),me(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Re(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=yc.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function FR(){if(Go===null)throw Error(L(475));var e=Go;return e.stylesheets&&e.count===0&&Nd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Nd(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function yc(){if(this.count--,this.count===0){if(this.stylesheets)Nd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var _c=null;function Nd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,_c=new Map,t.forEach(GR,e),_c=null,yc.call(e))}function GR(e,t){if(!(t.state.loading&4)){var n=_c.get(e);if(n)var i=n.get(null);else{n=new Map,_c.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=yc.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Qo={$$typeof:ai,Provider:null,Consumer:null,_currentValue:zr,_currentValue2:zr,_threadCount:0};function QR(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kh(0),this.hiddenUpdates=Kh(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function K0(e,t,n,i,r,s,a,l,u,h,d,p){return e=new QR(e,t,n,a,l,u,h,p),t=1,s===!0&&(t|=24),s=en(3,null,null,t),e.current=s,s.stateNode=e,t=Rm(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},Cm(s),e}function Y0(e){return e?(e=Ps,e):Ps}function $0(e,t,n,i,r,s){r=Y0(r),i.context===null?i.context=r:i.pendingContext=r,i=Ji(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=tr(e,i,t),n!==null&&(ln(n,e,t),To(n,e,t))}function __(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Jm(e,t){__(e,t),(e=e.alternate)&&__(e,t)}function X0(e){if(e.tag===13){var t=Sa(e,67108864);t!==null&&ln(t,e,67108864),Jm(e,67108864)}}var vc=!0;function KR(e,t,n,i){var r=J.T;J.T=null;var s=bt.p;try{bt.p=2,tp(e,t,n,i)}finally{bt.p=s,J.T=r}}function YR(e,t,n,i){var r=J.T;J.T=null;var s=bt.p;try{bt.p=8,tp(e,t,n,i)}finally{bt.p=s,J.T=r}}function tp(e,t,n,i){if(vc){var r=Dd(i);if(r===null)wf(e,t,i,Ec,n),v_(e,i);else if(XR(r,e,t,n,i))i.stopPropagation();else if(v_(e,i),t&4&&-1<$R.indexOf(e)){for(;r!==null;){var s=Aa(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=Or(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-an(a);l.entanglements[1]|=u,a&=~u}$n(s),!(wt&6)&&(cc=Un()+500,El(0))}}break;case 13:l=Sa(s,2),l!==null&&ln(l,s,2),eh(),Jm(s,2)}if(s=Dd(i),s===null&&wf(e,t,i,Ec,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else wf(e,t,i,null,n)}}function Dd(e){return e=gm(e),ep(e)}var Ec=null;function ep(e){if(Ec=null,e=Ns(e),e!==null){var t=ol(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=TE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ec=e,null}function Z0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mw()){case wE:return 2;case RE:return 8;case Yu:case kw:return 32;case IE:return 268435456;default:return 32}default:return 32}}var Od=!1,ir=null,rr=null,sr=null,Ko=new Map,Yo=new Map,qi=[],$R="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function v_(e,t){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":Ko.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yo.delete(t.pointerId)}}function io(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Aa(t),t!==null&&X0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function XR(e,t,n,i,r){switch(t){case"focusin":return ir=io(ir,e,t,n,i,r),!0;case"dragenter":return rr=io(rr,e,t,n,i,r),!0;case"mouseover":return sr=io(sr,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Ko.set(s,io(Ko.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Yo.set(s,io(Yo.get(s)||null,e,t,n,i,r)),!0}return!1}function W0(e){var t=Ns(e.target);if(t!==null){var n=ol(t);if(n!==null){if(t=n.tag,t===13){if(t=TE(n),t!==null){e.blockedOn=t,Hw(e.priority,function(){if(n.tag===13){var i=on();i=fm(i);var r=Sa(n,i);r!==null&&ln(r,n,i),Jm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Dd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);$f=i,n.target.dispatchEvent(i),$f=null}else return t=Aa(n),t!==null&&X0(t),e.blockedOn=n,!1;t.shift()}return!0}function E_(e,t,n){Mu(e)&&n.delete(t)}function ZR(){Od=!1,ir!==null&&Mu(ir)&&(ir=null),rr!==null&&Mu(rr)&&(rr=null),sr!==null&&Mu(sr)&&(sr=null),Ko.forEach(E_),Yo.forEach(E_)}function fu(e,t){e.blockedOn===t&&(e.blockedOn=null,Od||(Od=!0,ce.unstable_scheduleCallback(ce.unstable_NormalPriority,ZR)))}var du=null;function T_(e){du!==e&&(du=e,ce.unstable_scheduleCallback(ce.unstable_NormalPriority,function(){du===e&&(du=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(ep(i||n)===null)continue;break}var s=Aa(n);s!==null&&(e.splice(t,3),t-=3,hd(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function $o(e){function t(u){return fu(u,e)}ir!==null&&fu(ir,e),rr!==null&&fu(rr,e),sr!==null&&fu(sr,e),Ko.forEach(t),Yo.forEach(t);for(var n=0;n<qi.length;n++){var i=qi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<qi.length&&(n=qi[0],n.blockedOn===null);)W0(n),n.blockedOn===null&&qi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Qe]||null;if(typeof s=="function")a||T_(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Qe]||null)l=a.formAction;else if(ep(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),T_(n)}}}function np(e){this._internalRoot=e}sh.prototype.render=np.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));var n=t.current,i=on();$0(n,i,e,t,null,null)};sh.prototype.unmount=np.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$0(e.current,2,null,e,null,null),eh(),t[ba]=null}};function sh(e){this._internalRoot=e}sh.prototype.unstable_scheduleHydration=function(e){if(e){var t=OE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<qi.length&&t!==0&&t<qi[n].priority;n++);qi.splice(n,0,e),n===0&&W0(e)}};var b_=vE.version;if(b_!=="19.1.1")throw Error(L(527,b_,"19.1.1"));bt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=Iw(t),e=e!==null?bE(e):null,e=e===null?null:e.stateNode,e};var WR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mu.isDisabled&&mu.supportsFiber)try{ll=mu.inject(WR),sn=mu}catch{}}Hc.createRoot=function(e,t){if(!EE(e))throw Error(L(299));var n=!1,i="",r=KT,s=YT,a=$T,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=K0(e,1,!1,null,null,n,i,r,s,a,l,null),e[ba]=t.current,Xm(e),new np(t)};Hc.hydrateRoot=function(e,t,n){if(!EE(e))throw Error(L(299));var i=!1,r="",s=KT,a=YT,l=$T,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=K0(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=Y0(null),n=t.current,i=on(),i=fm(i),r=Ji(i),r.callback=null,tr(n,r,i),n=i,t.current.lanes=n,cl(t,n),$n(t),e[ba]=t.current,Xm(e),new sh(t)};Hc.version="19.1.1";function J0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(J0)}catch(e){console.error(e)}}J0(),dE.exports=Hc;var JR=dE.exports;const t2=()=>{};var A_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},e2=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},eb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,p=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,y=h&63;u||(y=64,a||(m=64)),i.push(n[d],n[p],n[m],n[y])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(tb(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):e2(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const p=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||p==null)throw new n2;const m=s<<2|l>>4;if(i.push(m),h!==64){const y=l<<4&240|h>>2;if(i.push(y),p!==64){const x=h<<6&192|p;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class n2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i2=function(e){const t=tb(e);return eb.encodeByteArray(t,!0)},Tc=function(e){return i2(e).replace(/\./g,"")},nb=function(e){try{return eb.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=()=>r2().__FIREBASE_DEFAULTS__,a2=()=>{if(typeof process>"u"||typeof A_>"u")return;const e=A_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},o2=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&nb(e[1]);return t&&JSON.parse(t)},ah=()=>{try{return t2()||s2()||a2()||o2()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ib=e=>{var t,n;return(n=(t=ah())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},l2=e=>{const t=ib(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},rb=()=>{var e;return(e=ah())==null?void 0:e.config},sb=e=>{var t;return(t=ah())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ab(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Tc(JSON.stringify(n)),Tc(JSON.stringify(a)),""].join(".")}const No={};function h2(){const e={prod:[],emulator:[]};for(const t of Object.keys(No))No[t]?e.emulator.push(t):e.prod.push(t);return e}function f2(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let S_=!1;function ob(e,t){if(typeof window>"u"||typeof document>"u"||!Ca(window.location.host)||No[e]===t||No[e]||S_)return;No[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=h2().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{S_=!0,a()},m}function d(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=f2(i),y=n("text"),x=document.getElementById(y)||document.createElement("span"),V=n("learnmore"),O=document.getElementById(V)||document.createElement("a"),S=n("preprendIcon"),E=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(O,V);const D=h();u(E,S),R.append(E,x,O,D),document.body.appendChild(R)}s?(x.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function d2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function m2(){var t;const e=(t=ah())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function p2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function g2(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function y2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _2(){const e=Me();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function v2(){return!m2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E2(){try{return typeof indexedDB=="object"}catch{return!1}}function T2(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="FirebaseError";class Ri extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=b2,Object.setPrototypeOf(this,Ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Al.prototype.create)}}class Al{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?A2(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new Ri(r,l,i)}}function A2(e,t){return e.replace(S2,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const S2=/\{\$([^}]+)}/g;function w2(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Wr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(w_(s)&&w_(a)){if(!Wr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function w_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function lo(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(s)}}),t}function uo(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function R2(e,t){const n=new I2(e,t);return n.subscribe.bind(n)}class I2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");C2(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=If),r.error===void 0&&(r.error=If),r.complete===void 0&&(r.complete=If);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function C2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function If(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(e){return e&&e._delegate?e._delegate:e}class Jr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new u2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(D2(t))try{this.getOrInitializeService({instanceIdentifier:kr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=kr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=kr){return this.instances.has(t)}getOptions(t=kr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:N2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=kr){return this.component?this.component.multipleInstances?t:kr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function N2(e){return e===kr?void 0:e}function D2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new x2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ut||(ut={}));const V2={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},M2=ut.INFO,k2={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},P2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=k2[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ip{constructor(t){this.name=t,this._logLevel=M2,this._logHandler=P2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ut))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?V2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...t),this._logHandler(this,ut.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...t),this._logHandler(this,ut.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...t),this._logHandler(this,ut.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...t),this._logHandler(this,ut.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...t),this._logHandler(this,ut.ERROR,...t)}}const L2=(e,t)=>t.some(n=>e instanceof n);let R_,I_;function U2(){return R_||(R_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j2(){return I_||(I_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lb=new WeakMap,Vd=new WeakMap,ub=new WeakMap,Cf=new WeakMap,rp=new WeakMap;function z2(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(ar(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&lb.set(n,e)}).catch(()=>{}),rp.set(t,e),t}function B2(e){if(Vd.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});Vd.set(e,t)}let Md={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Vd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||ub.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ar(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function q2(e){Md=e(Md)}function H2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(xf(this),t,...n);return ub.set(i,t.sort?t.sort():[t]),ar(i)}:j2().includes(e)?function(...t){return e.apply(xf(this),t),ar(lb.get(this))}:function(...t){return ar(e.apply(xf(this),t))}}function F2(e){return typeof e=="function"?H2(e):(e instanceof IDBTransaction&&B2(e),L2(e,U2())?new Proxy(e,Md):e)}function ar(e){if(e instanceof IDBRequest)return z2(e);if(Cf.has(e))return Cf.get(e);const t=F2(e);return t!==e&&(Cf.set(e,t),rp.set(t,e)),t}const xf=e=>rp.get(e);function G2(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=ar(a);return i&&a.addEventListener("upgradeneeded",u=>{i(ar(a.result),u.oldVersion,u.newVersion,ar(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Q2=["get","getKey","getAll","getAllKeys","count"],K2=["put","add","delete","clear"],Nf=new Map;function C_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Nf.get(t))return Nf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=K2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Q2.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return Nf.set(t,s),s}q2(e=>({...e,get:(t,n,i)=>C_(t,n)||e.get(t,n,i),has:(t,n)=>!!C_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function $2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const kd="@firebase/app",x_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new ip("@firebase/app"),X2="@firebase/app-compat",Z2="@firebase/analytics-compat",W2="@firebase/analytics",J2="@firebase/app-check-compat",tI="@firebase/app-check",eI="@firebase/auth",nI="@firebase/auth-compat",iI="@firebase/database",rI="@firebase/data-connect",sI="@firebase/database-compat",aI="@firebase/functions",oI="@firebase/functions-compat",lI="@firebase/installations",uI="@firebase/installations-compat",cI="@firebase/messaging",hI="@firebase/messaging-compat",fI="@firebase/performance",dI="@firebase/performance-compat",mI="@firebase/remote-config",pI="@firebase/remote-config-compat",gI="@firebase/storage",yI="@firebase/storage-compat",_I="@firebase/firestore",vI="@firebase/ai",EI="@firebase/firestore-compat",TI="firebase",bI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="[DEFAULT]",AI={[kd]:"fire-core",[X2]:"fire-core-compat",[W2]:"fire-analytics",[Z2]:"fire-analytics-compat",[tI]:"fire-app-check",[J2]:"fire-app-check-compat",[eI]:"fire-auth",[nI]:"fire-auth-compat",[iI]:"fire-rtdb",[rI]:"fire-data-connect",[sI]:"fire-rtdb-compat",[aI]:"fire-fn",[oI]:"fire-fn-compat",[lI]:"fire-iid",[uI]:"fire-iid-compat",[cI]:"fire-fcm",[hI]:"fire-fcm-compat",[fI]:"fire-perf",[dI]:"fire-perf-compat",[mI]:"fire-rc",[pI]:"fire-rc-compat",[gI]:"fire-gcs",[yI]:"fire-gcs-compat",[_I]:"fire-fst",[EI]:"fire-fst-compat",[vI]:"fire-vertex","fire-js":"fire-js",[TI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new Map,SI=new Map,Ld=new Map;function N_(e,t){try{e.container.addComponent(t)}catch(n){Ei.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function fa(e){const t=e.name;if(Ld.has(t))return Ei.debug(`There were multiple attempts to register component ${t}.`),!1;Ld.set(t,e);for(const n of bc.values())N_(n,e);for(const n of SI.values())N_(n,e);return!0}function sp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function En(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},or=new Al("app","Firebase",wI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=bI;function cb(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:Pd,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw or.create("bad-app-name",{appName:String(r)});if(n||(n=rb()),!n)throw or.create("no-options");const s=bc.get(r);if(s){if(Wr(n,s.options)&&Wr(i,s.config))return s;throw or.create("duplicate-app",{appName:r})}const a=new O2(r);for(const u of Ld.values())a.addComponent(u);const l=new RI(n,i,a);return bc.set(r,l),l}function hb(e=Pd){const t=bc.get(e);if(!t&&e===Pd&&rb())return cb();if(!t)throw or.create("no-app",{appName:e});return t}function lr(e,t,n){let i=AI[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ei.warn(a.join(" "));return}fa(new Jr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="firebase-heartbeat-database",CI=1,Xo="firebase-heartbeat-store";let Df=null;function fb(){return Df||(Df=G2(II,CI,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Xo)}catch(n){console.warn(n)}}}}).catch(e=>{throw or.create("idb-open",{originalErrorMessage:e.message})})),Df}async function xI(e){try{const n=(await fb()).transaction(Xo),i=await n.objectStore(Xo).get(db(e));return await n.done,i}catch(t){if(t instanceof Ri)Ei.warn(t.message);else{const n=or.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ei.warn(n.message)}}}async function D_(e,t){try{const i=(await fb()).transaction(Xo,"readwrite");await i.objectStore(Xo).put(t,db(e)),await i.done}catch(n){if(n instanceof Ri)Ei.warn(n.message);else{const i=or.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ei.warn(i.message)}}}function db(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=1024,DI=30;class OI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=O_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>DI){const a=kI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ei.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=O_(),{heartbeatsToSend:i,unsentEntries:r}=VI(this._heartbeatsCache.heartbeats),s=Tc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ei.warn(n),""}}}function O_(){return new Date().toISOString().substring(0,10)}function VI(e,t=NI){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),V_(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),V_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class MI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return E2()?T2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return D_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return D_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function V_(e){return Tc(JSON.stringify({version:2,heartbeats:e})).length}function kI(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(e){fa(new Jr("platform-logger",t=>new Y2(t),"PRIVATE")),fa(new Jr("heartbeat",t=>new OI(t),"PRIVATE")),lr(kd,x_,e),lr(kd,x_,"esm2020"),lr("fire-js","")}PI("");var M_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ur,mb;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(b,v){function A(){}A.prototype=v.prototype,b.D=v.prototype,b.prototype=new A,b.prototype.constructor=b,b.C=function(w,I,C){for(var T=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)T[yt-2]=arguments[yt];return v.prototype[I].apply(w,T)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,v,A){A||(A=0);var w=Array(16);if(typeof v=="string")for(var I=0;16>I;++I)w[I]=v.charCodeAt(A++)|v.charCodeAt(A++)<<8|v.charCodeAt(A++)<<16|v.charCodeAt(A++)<<24;else for(I=0;16>I;++I)w[I]=v[A++]|v[A++]<<8|v[A++]<<16|v[A++]<<24;v=b.g[0],A=b.g[1],I=b.g[2];var C=b.g[3],T=v+(C^A&(I^C))+w[0]+3614090360&4294967295;v=A+(T<<7&4294967295|T>>>25),T=C+(I^v&(A^I))+w[1]+3905402710&4294967295,C=v+(T<<12&4294967295|T>>>20),T=I+(A^C&(v^A))+w[2]+606105819&4294967295,I=C+(T<<17&4294967295|T>>>15),T=A+(v^I&(C^v))+w[3]+3250441966&4294967295,A=I+(T<<22&4294967295|T>>>10),T=v+(C^A&(I^C))+w[4]+4118548399&4294967295,v=A+(T<<7&4294967295|T>>>25),T=C+(I^v&(A^I))+w[5]+1200080426&4294967295,C=v+(T<<12&4294967295|T>>>20),T=I+(A^C&(v^A))+w[6]+2821735955&4294967295,I=C+(T<<17&4294967295|T>>>15),T=A+(v^I&(C^v))+w[7]+4249261313&4294967295,A=I+(T<<22&4294967295|T>>>10),T=v+(C^A&(I^C))+w[8]+1770035416&4294967295,v=A+(T<<7&4294967295|T>>>25),T=C+(I^v&(A^I))+w[9]+2336552879&4294967295,C=v+(T<<12&4294967295|T>>>20),T=I+(A^C&(v^A))+w[10]+4294925233&4294967295,I=C+(T<<17&4294967295|T>>>15),T=A+(v^I&(C^v))+w[11]+2304563134&4294967295,A=I+(T<<22&4294967295|T>>>10),T=v+(C^A&(I^C))+w[12]+1804603682&4294967295,v=A+(T<<7&4294967295|T>>>25),T=C+(I^v&(A^I))+w[13]+4254626195&4294967295,C=v+(T<<12&4294967295|T>>>20),T=I+(A^C&(v^A))+w[14]+2792965006&4294967295,I=C+(T<<17&4294967295|T>>>15),T=A+(v^I&(C^v))+w[15]+1236535329&4294967295,A=I+(T<<22&4294967295|T>>>10),T=v+(I^C&(A^I))+w[1]+4129170786&4294967295,v=A+(T<<5&4294967295|T>>>27),T=C+(A^I&(v^A))+w[6]+3225465664&4294967295,C=v+(T<<9&4294967295|T>>>23),T=I+(v^A&(C^v))+w[11]+643717713&4294967295,I=C+(T<<14&4294967295|T>>>18),T=A+(C^v&(I^C))+w[0]+3921069994&4294967295,A=I+(T<<20&4294967295|T>>>12),T=v+(I^C&(A^I))+w[5]+3593408605&4294967295,v=A+(T<<5&4294967295|T>>>27),T=C+(A^I&(v^A))+w[10]+38016083&4294967295,C=v+(T<<9&4294967295|T>>>23),T=I+(v^A&(C^v))+w[15]+3634488961&4294967295,I=C+(T<<14&4294967295|T>>>18),T=A+(C^v&(I^C))+w[4]+3889429448&4294967295,A=I+(T<<20&4294967295|T>>>12),T=v+(I^C&(A^I))+w[9]+568446438&4294967295,v=A+(T<<5&4294967295|T>>>27),T=C+(A^I&(v^A))+w[14]+3275163606&4294967295,C=v+(T<<9&4294967295|T>>>23),T=I+(v^A&(C^v))+w[3]+4107603335&4294967295,I=C+(T<<14&4294967295|T>>>18),T=A+(C^v&(I^C))+w[8]+1163531501&4294967295,A=I+(T<<20&4294967295|T>>>12),T=v+(I^C&(A^I))+w[13]+2850285829&4294967295,v=A+(T<<5&4294967295|T>>>27),T=C+(A^I&(v^A))+w[2]+4243563512&4294967295,C=v+(T<<9&4294967295|T>>>23),T=I+(v^A&(C^v))+w[7]+1735328473&4294967295,I=C+(T<<14&4294967295|T>>>18),T=A+(C^v&(I^C))+w[12]+2368359562&4294967295,A=I+(T<<20&4294967295|T>>>12),T=v+(A^I^C)+w[5]+4294588738&4294967295,v=A+(T<<4&4294967295|T>>>28),T=C+(v^A^I)+w[8]+2272392833&4294967295,C=v+(T<<11&4294967295|T>>>21),T=I+(C^v^A)+w[11]+1839030562&4294967295,I=C+(T<<16&4294967295|T>>>16),T=A+(I^C^v)+w[14]+4259657740&4294967295,A=I+(T<<23&4294967295|T>>>9),T=v+(A^I^C)+w[1]+2763975236&4294967295,v=A+(T<<4&4294967295|T>>>28),T=C+(v^A^I)+w[4]+1272893353&4294967295,C=v+(T<<11&4294967295|T>>>21),T=I+(C^v^A)+w[7]+4139469664&4294967295,I=C+(T<<16&4294967295|T>>>16),T=A+(I^C^v)+w[10]+3200236656&4294967295,A=I+(T<<23&4294967295|T>>>9),T=v+(A^I^C)+w[13]+681279174&4294967295,v=A+(T<<4&4294967295|T>>>28),T=C+(v^A^I)+w[0]+3936430074&4294967295,C=v+(T<<11&4294967295|T>>>21),T=I+(C^v^A)+w[3]+3572445317&4294967295,I=C+(T<<16&4294967295|T>>>16),T=A+(I^C^v)+w[6]+76029189&4294967295,A=I+(T<<23&4294967295|T>>>9),T=v+(A^I^C)+w[9]+3654602809&4294967295,v=A+(T<<4&4294967295|T>>>28),T=C+(v^A^I)+w[12]+3873151461&4294967295,C=v+(T<<11&4294967295|T>>>21),T=I+(C^v^A)+w[15]+530742520&4294967295,I=C+(T<<16&4294967295|T>>>16),T=A+(I^C^v)+w[2]+3299628645&4294967295,A=I+(T<<23&4294967295|T>>>9),T=v+(I^(A|~C))+w[0]+4096336452&4294967295,v=A+(T<<6&4294967295|T>>>26),T=C+(A^(v|~I))+w[7]+1126891415&4294967295,C=v+(T<<10&4294967295|T>>>22),T=I+(v^(C|~A))+w[14]+2878612391&4294967295,I=C+(T<<15&4294967295|T>>>17),T=A+(C^(I|~v))+w[5]+4237533241&4294967295,A=I+(T<<21&4294967295|T>>>11),T=v+(I^(A|~C))+w[12]+1700485571&4294967295,v=A+(T<<6&4294967295|T>>>26),T=C+(A^(v|~I))+w[3]+2399980690&4294967295,C=v+(T<<10&4294967295|T>>>22),T=I+(v^(C|~A))+w[10]+4293915773&4294967295,I=C+(T<<15&4294967295|T>>>17),T=A+(C^(I|~v))+w[1]+2240044497&4294967295,A=I+(T<<21&4294967295|T>>>11),T=v+(I^(A|~C))+w[8]+1873313359&4294967295,v=A+(T<<6&4294967295|T>>>26),T=C+(A^(v|~I))+w[15]+4264355552&4294967295,C=v+(T<<10&4294967295|T>>>22),T=I+(v^(C|~A))+w[6]+2734768916&4294967295,I=C+(T<<15&4294967295|T>>>17),T=A+(C^(I|~v))+w[13]+1309151649&4294967295,A=I+(T<<21&4294967295|T>>>11),T=v+(I^(A|~C))+w[4]+4149444226&4294967295,v=A+(T<<6&4294967295|T>>>26),T=C+(A^(v|~I))+w[11]+3174756917&4294967295,C=v+(T<<10&4294967295|T>>>22),T=I+(v^(C|~A))+w[2]+718787259&4294967295,I=C+(T<<15&4294967295|T>>>17),T=A+(C^(I|~v))+w[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(I+(T<<21&4294967295|T>>>11))&4294967295,b.g[2]=b.g[2]+I&4294967295,b.g[3]=b.g[3]+C&4294967295}i.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var A=v-this.blockSize,w=this.B,I=this.h,C=0;C<v;){if(I==0)for(;C<=A;)r(this,b,C),C+=this.blockSize;if(typeof b=="string"){for(;C<v;)if(w[I++]=b.charCodeAt(C++),I==this.blockSize){r(this,w),I=0;break}}else for(;C<v;)if(w[I++]=b[C++],I==this.blockSize){r(this,w),I=0;break}}this.h=I,this.o+=v},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var A=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=A&255,A/=256;for(this.u(b),b=Array(16),v=A=0;4>v;++v)for(var w=0;32>w;w+=8)b[A++]=this.g[v]>>>w&255;return b};function s(b,v){var A=l;return Object.prototype.hasOwnProperty.call(A,b)?A[b]:A[b]=v(b)}function a(b,v){this.h=v;for(var A=[],w=!0,I=b.length-1;0<=I;I--){var C=b[I]|0;w&&C==v||(A[I]=C,w=!1)}this.g=A}var l={};function u(b){return-128<=b&&128>b?s(b,function(v){return new a([v|0],0>v?-1:0)}):new a([b|0],0>b?-1:0)}function h(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return O(h(-b));for(var v=[],A=1,w=0;b>=A;w++)v[w]=b/A|0,A*=4294967296;return new a(v,0)}function d(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return O(d(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(v,8)),w=p,I=0;I<b.length;I+=8){var C=Math.min(8,b.length-I),T=parseInt(b.substring(I,I+C),v);8>C?(C=h(Math.pow(v,C)),w=w.j(C).add(h(T))):(w=w.j(A),w=w.add(h(T)))}return w}var p=u(0),m=u(1),y=u(16777216);e=a.prototype,e.m=function(){if(V(this))return-O(this).m();for(var b=0,v=1,A=0;A<this.g.length;A++){var w=this.i(A);b+=(0<=w?w:4294967296+w)*v,v*=4294967296}return b},e.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(x(this))return"0";if(V(this))return"-"+O(this).toString(b);for(var v=h(Math.pow(b,6)),A=this,w="";;){var I=D(A,v).g;A=S(A,I.j(v));var C=((0<A.g.length?A.g[0]:A.h)>>>0).toString(b);if(A=I,x(A))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},e.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function x(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function V(b){return b.h==-1}e.l=function(b){return b=S(this,b),V(b)?-1:x(b)?0:1};function O(b){for(var v=b.g.length,A=[],w=0;w<v;w++)A[w]=~b.g[w];return new a(A,~b.h).add(m)}e.abs=function(){return V(this)?O(this):this},e.add=function(b){for(var v=Math.max(this.g.length,b.g.length),A=[],w=0,I=0;I<=v;I++){var C=w+(this.i(I)&65535)+(b.i(I)&65535),T=(C>>>16)+(this.i(I)>>>16)+(b.i(I)>>>16);w=T>>>16,C&=65535,T&=65535,A[I]=T<<16|C}return new a(A,A[A.length-1]&-2147483648?-1:0)};function S(b,v){return b.add(O(v))}e.j=function(b){if(x(this)||x(b))return p;if(V(this))return V(b)?O(this).j(O(b)):O(O(this).j(b));if(V(b))return O(this.j(O(b)));if(0>this.l(y)&&0>b.l(y))return h(this.m()*b.m());for(var v=this.g.length+b.g.length,A=[],w=0;w<2*v;w++)A[w]=0;for(w=0;w<this.g.length;w++)for(var I=0;I<b.g.length;I++){var C=this.i(w)>>>16,T=this.i(w)&65535,yt=b.i(I)>>>16,Ht=b.i(I)&65535;A[2*w+2*I]+=T*Ht,E(A,2*w+2*I),A[2*w+2*I+1]+=C*Ht,E(A,2*w+2*I+1),A[2*w+2*I+1]+=T*yt,E(A,2*w+2*I+1),A[2*w+2*I+2]+=C*yt,E(A,2*w+2*I+2)}for(w=0;w<v;w++)A[w]=A[2*w+1]<<16|A[2*w];for(w=v;w<2*v;w++)A[w]=0;return new a(A,0)};function E(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function R(b,v){this.g=b,this.h=v}function D(b,v){if(x(v))throw Error("division by zero");if(x(b))return new R(p,p);if(V(b))return v=D(O(b),v),new R(O(v.g),O(v.h));if(V(v))return v=D(b,O(v)),new R(O(v.g),v.h);if(30<b.g.length){if(V(b)||V(v))throw Error("slowDivide_ only works with positive integers.");for(var A=m,w=v;0>=w.l(b);)A=U(A),w=U(w);var I=H(A,1),C=H(w,1);for(w=H(w,2),A=H(A,2);!x(w);){var T=C.add(w);0>=T.l(b)&&(I=I.add(A),C=T),w=H(w,1),A=H(A,1)}return v=S(b,I.j(v)),new R(I,v)}for(I=p;0<=b.l(v);){for(A=Math.max(1,Math.floor(b.m()/v.m())),w=Math.ceil(Math.log(A)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=h(A),T=C.j(v);V(T)||0<T.l(b);)A-=w,C=h(A),T=C.j(v);x(C)&&(C=m),I=I.add(C),b=S(b,T)}return new R(I,b)}e.A=function(b){return D(this,b).h},e.and=function(b){for(var v=Math.max(this.g.length,b.g.length),A=[],w=0;w<v;w++)A[w]=this.i(w)&b.i(w);return new a(A,this.h&b.h)},e.or=function(b){for(var v=Math.max(this.g.length,b.g.length),A=[],w=0;w<v;w++)A[w]=this.i(w)|b.i(w);return new a(A,this.h|b.h)},e.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),A=[],w=0;w<v;w++)A[w]=this.i(w)^b.i(w);return new a(A,this.h^b.h)};function U(b){for(var v=b.g.length+1,A=[],w=0;w<v;w++)A[w]=b.i(w)<<1|b.i(w-1)>>>31;return new a(A,b.h)}function H(b,v){var A=v>>5;v%=32;for(var w=b.g.length-A,I=[],C=0;C<w;C++)I[C]=0<v?b.i(C+A)>>>v|b.i(C+A+1)<<32-v:b.i(C+A);return new a(I,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,mb=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,ur=a}).apply(typeof M_<"u"?M_:typeof self<"u"?self:typeof window<"u"?window:{});var pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pb,co,gb,ku,Ud,yb,_b,vb;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof pu=="object"&&pu];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var g=0;g<o.length-1;g++){var N=o[g];if(!(N in f))break t;f=f[N]}o=o[o.length-1],g=f[o],c=c(g),c!=g&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,g=!1,N={next:function(){if(!g&&f<o.length){var M=f++;return{value:c(M,o[M]),done:!1}}return g=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function p(o,c,f){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,g),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function y(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function x(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(g,N,M){for(var q=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)q[xt-2]=arguments[xt];return c.prototype[N].apply(g,q)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let g=0;g<c;g++)f[g]=o[g];return f}return[]}function O(o,c){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(u(g)){const N=o.length||0,M=g.length||0;o.length=N+M;for(let q=0;q<M;q++)o[N+q]=g[q]}else o.push(g)}}class S{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var U=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function H(o,c,f){for(const g in o)c.call(f,o[g],g,o)}function b(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function v(o){const c={};for(const f in o)c[f]=o[f];return c}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,c){let f,g;for(let N=1;N<arguments.length;N++){g=arguments[N];for(f in g)o[f]=g[f];for(let M=0;M<A.length;M++)f=A[M],Object.prototype.hasOwnProperty.call(g,f)&&(o[f]=g[f])}}function I(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function C(o){l.setTimeout(()=>{throw o},0)}function T(){var o=_t;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class yt{constructor(){this.h=this.g=null}add(c,f){const g=Ht.get();g.set(c,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ht=new S(()=>new j,o=>o.reset());class j{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let K,Y=!1,_t=new yt,ft=()=>{const o=l.Promise.resolve(void 0);K=()=>{o.then(hn)}};var hn=()=>{for(var o;o=T();){try{o.h.call(o.g)}catch(f){C(f)}var c=Ht;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}Y=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ot(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Ot.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function Ct(o,c){if(Ot.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(U){t:{try{D(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:hs[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Ct.aa.h.call(this)}}x(Ct,Ot);var hs={2:"touch",3:"pen",4:"mouse"};Ct.prototype.h=function(){Ct.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ye="closure_listenable_"+(1e6*Math.random()|0),Zn=0;function Wn(o,c,f,g,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!g,this.ha=N,this.key=++Zn,this.da=this.fa=!1}function Sn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function fn(o){this.src=o,this.g={},this.h=0}fn.prototype.add=function(o,c,f,g,N){var M=o.toString();o=this.g[M],o||(o=this.g[M]=[],this.h++);var q=dn(o,c,g,N);return-1<q?(c=o[q],f||(c.fa=!1)):(c=new Wn(c,this.src,M,!!g,N),c.fa=f,o.push(c)),c};function $e(o,c){var f=c.type;if(f in o.g){var g=o.g[f],N=Array.prototype.indexOf.call(g,c,void 0),M;(M=0<=N)&&Array.prototype.splice.call(g,N,1),M&&(Sn(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function dn(o,c,f,g){for(var N=0;N<o.length;++N){var M=o[N];if(!M.da&&M.listener==c&&M.capture==!!f&&M.ha==g)return N}return-1}var On="closure_lm_"+(1e6*Math.random()|0),Ci={};function fs(o,c,f,g,N){if(Array.isArray(c)){for(var M=0;M<c.length;M++)fs(o,c[M],f,g,N);return null}return f=ve(f),o&&o[Ye]?o.K(c,f,h(g)?!!g.capture:!1,N):Pa(o,c,f,!1,g,N)}function Pa(o,c,f,g,N,M){if(!c)throw Error("Invalid event type");var q=h(N)?!!N.capture:!!N,xt=Ut(o);if(xt||(o[On]=xt=new fn(o)),f=xt.add(c,f,g,q,M),f.proxy)return f;if(g=La(),f.proxy=g,g.src=o,g.listener=f,o.addEventListener)_e||(N=q),N===void 0&&(N=!1),o.addEventListener(c.toString(),g,N);else if(o.attachEvent)o.attachEvent(it(c.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function La(){function o(f){return c.call(o.src,o.listener,f)}const c=Xt;return o}function ds(o,c,f,g,N){if(Array.isArray(c))for(var M=0;M<c.length;M++)ds(o,c[M],f,g,N);else g=h(g)?!!g.capture:!!g,f=ve(f),o&&o[Ye]?(o=o.i,c=String(c).toString(),c in o.g&&(M=o.g[c],f=dn(M,f,g,N),-1<f&&(Sn(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete o.g[c],o.h--)))):o&&(o=Ut(o))&&(c=o.g[c.toString()],o=-1,c&&(o=dn(c,f,g,N)),(f=-1<o?c[o]:null)&&X(f))}function X(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Ye])$e(c.i,o);else{var f=o.type,g=o.proxy;c.removeEventListener?c.removeEventListener(f,g,o.capture):c.detachEvent?c.detachEvent(it(f),g):c.addListener&&c.removeListener&&c.removeListener(g),(f=Ut(c))?($e(f,o),f.h==0&&(f.src=null,c[On]=null)):Sn(o)}}}function it(o){return o in Ci?Ci[o]:Ci[o]="on"+o}function Xt(o,c){if(o.da)o=!0;else{c=new Ct(c,this);var f=o.listener,g=o.ha||o.src;o.fa&&X(o),o=f.call(g,c)}return o}function Ut(o){return o=o[On],o instanceof fn?o:null}var Be="__closure_events_fn_"+(1e9*Math.random()>>>0);function ve(o){return typeof o=="function"?o:(o[Be]||(o[Be]=function(c){return o.handleEvent(c)}),o[Be])}function Et(){ae.call(this),this.i=new fn(this),this.M=this,this.F=null}x(Et,ae),Et.prototype[Ye]=!0,Et.prototype.removeEventListener=function(o,c,f,g){ds(this,o,c,f,g)};function Vt(o,c){var f,g=o.F;if(g)for(f=[];g;g=g.F)f.push(g);if(o=o.M,g=c.type||c,typeof c=="string")c=new Ot(c,o);else if(c instanceof Ot)c.target=c.target||o;else{var N=c;c=new Ot(g,o),w(c,N)}if(N=!0,f)for(var M=f.length-1;0<=M;M--){var q=c.g=f[M];N=Jn(q,g,!0,c)&&N}if(q=c.g=o,N=Jn(q,g,!0,c)&&N,N=Jn(q,g,!1,c)&&N,f)for(M=0;M<f.length;M++)q=c.g=f[M],N=Jn(q,g,!1,c)&&N}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],g=0;g<f.length;g++)Sn(f[g]);delete o.g[c],o.h--}}this.F=null},Et.prototype.K=function(o,c,f,g){return this.i.add(String(o),c,!1,f,g)},Et.prototype.L=function(o,c,f,g){return this.i.add(String(o),c,!0,f,g)};function Jn(o,c,f,g){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,M=0;M<c.length;++M){var q=c[M];if(q&&!q.da&&q.capture==f){var xt=q.listener,Ee=q.ha||q.src;q.fa&&$e(o.i,q),N=xt.call(Ee,g)!==!1&&N}}return N&&!g.defaultPrevented}function Ul(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function G(o){o.g=Ul(()=>{o.g=null,o.i&&(o.i=!1,G(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class et extends ae{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:G(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nt(o){ae.call(this),this.h=o,this.g={}}x(nt,ae);var rt=[];function Mt(o){H(o.g,function(c,f){this.g.hasOwnProperty(f)&&X(c)},o),o.g={}}nt.prototype.N=function(){nt.aa.N.call(this),Mt(this)},nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dt=l.JSON.stringify,Xe=l.JSON.parse,xi=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Nh(){}Nh.prototype.h=null;function og(o){return o.h||(o.h=o.i())}function lg(){}var Ua={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dh(){Ot.call(this,"d")}x(Dh,Ot);function Oh(){Ot.call(this,"c")}x(Oh,Ot);var Ir={},ug=null;function jl(){return ug=ug||new Et}Ir.La="serverreachability";function cg(o){Ot.call(this,Ir.La,o)}x(cg,Ot);function ja(o){const c=jl();Vt(c,new cg(c))}Ir.STAT_EVENT="statevent";function hg(o,c){Ot.call(this,Ir.STAT_EVENT,o),this.stat=c}x(hg,Ot);function ke(o){const c=jl();Vt(c,new hg(c,o))}Ir.Ma="timingevent";function fg(o,c){Ot.call(this,Ir.Ma,o),this.size=c}x(fg,Ot);function za(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ba(){this.g=!0}Ba.prototype.xa=function(){this.g=!1};function VS(o,c,f,g,N,M){o.info(function(){if(o.g)if(M)for(var q="",xt=M.split("&"),Ee=0;Ee<xt.length;Ee++){var vt=xt[Ee].split("=");if(1<vt.length){var Ce=vt[0];vt=vt[1];var xe=Ce.split("_");q=2<=xe.length&&xe[1]=="type"?q+(Ce+"="+vt+"&"):q+(Ce+"=redacted&")}}else q=null;else q=M;return"XMLHTTP REQ ("+g+") [attempt "+N+"]: "+c+`
`+f+`
`+q})}function MS(o,c,f,g,N,M,q){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+N+"]: "+c+`
`+f+`
`+M+" "+q})}function ms(o,c,f,g){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+PS(o,f)+(g?" "+g:"")})}function kS(o,c){o.info(function(){return"TIMEOUT: "+c})}Ba.prototype.info=function(){};function PS(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var g=f[o];if(!(2>g.length)){var N=g[1];if(Array.isArray(N)&&!(1>N.length)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(var q=1;q<N.length;q++)N[q]=""}}}}return dt(f)}catch{return c}}var zl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vh;function Bl(){}x(Bl,Nh),Bl.prototype.g=function(){return new XMLHttpRequest},Bl.prototype.i=function(){return{}},Vh=new Bl;function Ni(o,c,f,g){this.j=o,this.i=c,this.l=f,this.R=g||1,this.U=new nt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mg}function mg(){this.i=null,this.g="",this.h=!1}var pg={},Mh={};function kh(o,c,f){o.L=1,o.v=Gl(ti(c)),o.m=f,o.P=!0,gg(o,null)}function gg(o,c){o.F=Date.now(),ql(o),o.A=ti(o.v);var f=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),Ng(f.i,"t",g),o.C=0,f=o.j.J,o.h=new mg,o.g=Yg(o.j,f?c:null,!o.m),0<o.O&&(o.M=new et(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,g=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(rt[0]=N.toString()),N=rt);for(var M=0;M<N.length;M++){var q=fs(f,N[M],g||c.handleEvent,!1,c.h||c);if(!q)break;c.g[q.key]=q}c=o.H?v(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),ja(),VS(o.i,o.u,o.A,o.l,o.R,o.m)}Ni.prototype.ca=function(o){o=o.target;const c=this.M;c&&ei(o)==3?c.j():this.Y(o)},Ni.prototype.Y=function(o){try{if(o==this.g)t:{const xe=ei(this.g);var c=this.g.Ba();const ys=this.g.Z();if(!(3>xe)&&(xe!=3||this.g&&(this.h.h||this.g.oa()||Lg(this.g)))){this.J||xe!=4||c==7||(c==8||0>=ys?ja(3):ja(2)),Ph(this);var f=this.g.Z();this.X=f;e:if(yg(this)){var g=Lg(this.g);o="";var N=g.length,M=ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cr(this),qa(this);var q="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(g[c],{stream:!(M&&c==N-1)});g.length=0,this.h.g+=o,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,MS(this.i,this.u,this.A,this.l,this.R,xe,f),this.o){if(this.T&&!this.K){e:{if(this.g){var xt,Ee=this.g;if((xt=Ee.g?Ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(xt)){var vt=xt;break e}}vt=null}if(f=vt)ms(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lh(this,f);else{this.o=!1,this.s=3,ke(12),Cr(this),qa(this);break t}}if(this.P){f=!0;let wn;for(;!this.J&&this.C<q.length;)if(wn=LS(this,q),wn==Mh){xe==4&&(this.s=4,ke(14),f=!1),ms(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==pg){this.s=4,ke(15),ms(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else ms(this.i,this.l,wn,null),Lh(this,wn);if(yg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||q.length!=0||this.h.h||(this.s=1,ke(16),f=!1),this.o=this.o&&f,!f)ms(this.i,this.l,q,"[Invalid Chunked Response]"),Cr(this),qa(this);else if(0<q.length&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.ba&&!Ce.M&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Hh(Ce),Ce.M=!0,ke(11))}}else ms(this.i,this.l,q,null),Lh(this,q);xe==4&&Cr(this),this.o&&!this.J&&(xe==4?Fg(this.j,this):(this.o=!1,ql(this)))}else tw(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Cr(this),qa(this)}}}catch{}finally{}};function yg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function LS(o,c){var f=o.C,g=c.indexOf(`
`,f);return g==-1?Mh:(f=Number(c.substring(f,g)),isNaN(f)?pg:(g+=1,g+f>c.length?Mh:(c=c.slice(g,g+f),o.C=g+f,c)))}Ni.prototype.cancel=function(){this.J=!0,Cr(this)};function ql(o){o.S=Date.now()+o.I,_g(o,o.I)}function _g(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=za(m(o.ba,o),c)}function Ph(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Ni.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(kS(this.i,this.A),this.L!=2&&(ja(),ke(17)),Cr(this),this.s=2,qa(this)):_g(this,this.S-o)};function qa(o){o.j.G==0||o.J||Fg(o.j,o)}function Cr(o){Ph(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Mt(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Lh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||Uh(f.h,o))){if(!o.K&&Uh(f.h,o)&&f.G==3){try{var g=f.Da.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var N=g;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Zl(f),$l(f);else break t;qh(f),ke(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=za(m(f.Za,f),6e3));if(1>=Tg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Nr(f,11)}else if((o.K||f.g==o)&&Zl(f),!E(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let vt=N[c];if(f.T=vt[0],vt=vt[1],f.G==2)if(vt[0]=="c"){f.K=vt[1],f.ia=vt[2];const Ce=vt[3];Ce!=null&&(f.la=Ce,f.j.info("VER="+f.la));const xe=vt[4];xe!=null&&(f.Aa=xe,f.j.info("SVER="+f.Aa));const ys=vt[5];ys!=null&&typeof ys=="number"&&0<ys&&(g=1.5*ys,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const wn=o.g;if(wn){const Jl=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jl){var M=g.h;M.g||Jl.indexOf("spdy")==-1&&Jl.indexOf("quic")==-1&&Jl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(jh(M,M.h),M.h=null))}if(g.D){const Fh=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fh&&(g.ya=Fh,kt(g.I,g.D,Fh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var q=o;if(g.qa=Kg(g,g.J?g.ia:null,g.W),q.K){bg(g.h,q);var xt=q,Ee=g.L;Ee&&(xt.I=Ee),xt.B&&(Ph(xt),ql(xt)),g.g=q}else qg(g);0<f.i.length&&Xl(f)}else vt[0]!="stop"&&vt[0]!="close"||Nr(f,7);else f.G==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?Nr(f,7):Bh(f):vt[0]!="noop"&&f.l&&f.l.ta(vt),f.v=0)}}ja(4)}catch{}}var US=class{constructor(o,c){this.g=o,this.map=c}};function vg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Eg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Tg(o){return o.h?1:o.g?o.g.size:0}function Uh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function jh(o,c){o.g?o.g.add(c):o.h=c}function bg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}vg.prototype.cancel=function(){if(this.i=Ag(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Ag(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function jS(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,g=0;g<f;g++)c.push(o[g]);return c}c=[],f=0;for(g in o)c[f++]=o[g];return c}function zS(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const g in o)c[f++]=g;return c}}}function Sg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=zS(o),g=jS(o),N=g.length,M=0;M<N;M++)c.call(void 0,g[M],f&&f[M],o)}var wg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function BS(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var g=o[f].indexOf("="),N=null;if(0<=g){var M=o[f].substring(0,g);N=o[f].substring(g+1)}else M=o[f];c(M,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function xr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof xr){this.h=o.h,Hl(this,o.j),this.o=o.o,this.g=o.g,Fl(this,o.s),this.l=o.l;var c=o.i,f=new Ga;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Rg(this,f),this.m=o.m}else o&&(c=String(o).match(wg))?(this.h=!1,Hl(this,c[1]||"",!0),this.o=Ha(c[2]||""),this.g=Ha(c[3]||"",!0),Fl(this,c[4]),this.l=Ha(c[5]||"",!0),Rg(this,c[6]||"",!0),this.m=Ha(c[7]||"")):(this.h=!1,this.i=new Ga(null,this.h))}xr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Fa(c,Ig,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Fa(c,Ig,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Fa(f,f.charAt(0)=="/"?FS:HS,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Fa(f,QS)),o.join("")};function ti(o){return new xr(o)}function Hl(o,c,f){o.j=f?Ha(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Fl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Rg(o,c,f){c instanceof Ga?(o.i=c,KS(o.i,o.h)):(f||(c=Fa(c,GS)),o.i=new Ga(c,o.h))}function kt(o,c,f){o.i.set(c,f)}function Gl(o){return kt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ha(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Fa(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,qS),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function qS(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Ig=/[#\/\?@]/g,HS=/[#\?:]/g,FS=/[#\?]/g,GS=/[#\?@]/g,QS=/#/g;function Ga(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Di(o){o.g||(o.g=new Map,o.h=0,o.i&&BS(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=Ga.prototype,e.add=function(o,c){Di(this),this.i=null,o=ps(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function Cg(o,c){Di(o),c=ps(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function xg(o,c){return Di(o),c=ps(o,c),o.g.has(c)}e.forEach=function(o,c){Di(this),this.g.forEach(function(f,g){f.forEach(function(N){o.call(c,N,g,this)},this)},this)},e.na=function(){Di(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let g=0;g<c.length;g++){const N=o[g];for(let M=0;M<N.length;M++)f.push(c[g])}return f},e.V=function(o){Di(this);let c=[];if(typeof o=="string")xg(this,o)&&(c=c.concat(this.g.get(ps(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return Di(this),this.i=null,o=ps(this,o),xg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Ng(o,c,f){Cg(o,c),0<f.length&&(o.i=null,o.g.set(ps(o,c),V(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var g=c[f];const M=encodeURIComponent(String(g)),q=this.V(g);for(g=0;g<q.length;g++){var N=M;q[g]!==""&&(N+="="+encodeURIComponent(String(q[g]))),o.push(N)}}return this.i=o.join("&")};function ps(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function KS(o,c){c&&!o.j&&(Di(o),o.i=null,o.g.forEach(function(f,g){var N=g.toLowerCase();g!=N&&(Cg(this,g),Ng(this,N,f))},o)),o.j=c}function YS(o,c){const f=new Ba;if(l.Image){const g=new Image;g.onload=y(Oi,f,"TestLoadImage: loaded",!0,c,g),g.onerror=y(Oi,f,"TestLoadImage: error",!1,c,g),g.onabort=y(Oi,f,"TestLoadImage: abort",!1,c,g),g.ontimeout=y(Oi,f,"TestLoadImage: timeout",!1,c,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else c(!1)}function $S(o,c){const f=new Ba,g=new AbortController,N=setTimeout(()=>{g.abort(),Oi(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:g.signal}).then(M=>{clearTimeout(N),M.ok?Oi(f,"TestPingServer: ok",!0,c):Oi(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Oi(f,"TestPingServer: error",!1,c)})}function Oi(o,c,f,g,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),g(f)}catch{}}function XS(){this.g=new xi}function ZS(o,c,f){const g=f||"";try{Sg(o,function(N,M){let q=N;h(N)&&(q=dt(N)),c.push(g+M+"="+encodeURIComponent(q))})}catch(N){throw c.push(g+"type="+encodeURIComponent("_badmap")),N}}function Ql(o){this.l=o.Ub||null,this.j=o.eb||!1}x(Ql,Nh),Ql.prototype.g=function(){return new Kl(this.l,this.j)},Ql.prototype.i=function(o){return function(){return o}}({});function Kl(o,c){Et.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Kl,Et),e=Kl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Ka(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qa(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ka(this)),this.g&&(this.readyState=3,Ka(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dg(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dg(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Qa(this):Ka(this),this.readyState==3&&Dg(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Qa(this))},e.Qa=function(o){this.g&&(this.response=o,Qa(this))},e.ga=function(){this.g&&Qa(this)};function Qa(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ka(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Ka(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Kl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Og(o){let c="";return H(o,function(f,g){c+=g,c+=":",c+=f,c+=`\r
`}),c}function zh(o,c,f){t:{for(g in f){var g=!1;break t}g=!0}g||(f=Og(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):kt(o,c,f))}function Kt(o){Et.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Kt,Et);var WS=/^https?$/i,JS=["POST","PUT"];e=Kt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vh.g(),this.v=this.o?og(this.o):og(Vh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(M){Vg(this,M);return}if(o=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var N in g)f.set(N,g[N]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const M of g.keys())f.set(M,g.get(M));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(JS,c,void 0))||g||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,q]of f)this.g.setRequestHeader(M,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pg(this),this.u=!0,this.g.send(o),this.u=!1}catch(M){Vg(this,M)}};function Vg(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Mg(o),Yl(o)}function Mg(o){o.A||(o.A=!0,Vt(o,"complete"),Vt(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Vt(this,"complete"),Vt(this,"abort"),Yl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yl(this,!0)),Kt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?kg(this):this.bb())},e.bb=function(){kg(this)};function kg(o){if(o.h&&typeof a<"u"&&(!o.v[1]||ei(o)!=4||o.Z()!=2)){if(o.u&&ei(o)==4)Ul(o.Ea,0,o);else if(Vt(o,"readystatechange"),ei(o)==4){o.h=!1;try{const q=o.Z();t:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var g;if(g=q===0){var N=String(o.D).match(wg)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),g=!WS.test(N?N.toLowerCase():"")}f=g}if(f)Vt(o,"complete"),Vt(o,"success");else{o.m=6;try{var M=2<ei(o)?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.Z()+"]",Mg(o)}}finally{Yl(o)}}}}function Yl(o,c){if(o.g){Pg(o);const f=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||Vt(o,"ready");try{f.onreadystatechange=g}catch{}}}function Pg(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function ei(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<ei(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Xe(c)}};function Lg(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function tw(o){const c={};o=(o.g&&2<=ei(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(E(o[g]))continue;var f=I(o[g]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=c[N]||[];c[N]=M,M.push(f)}b(c,function(g){return g.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ya(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function Ug(o){this.Aa=0,this.i=[],this.j=new Ba,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ya("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ya("baseRetryDelayMs",5e3,o),this.cb=Ya("retryDelaySeedMs",1e4,o),this.Wa=Ya("forwardChannelMaxRetries",2,o),this.wa=Ya("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new vg(o&&o.concurrentRequestLimit),this.Da=new XS,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Ug.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,g){ke(0),this.W=o,this.H=c||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Kg(this,null,this.W),Xl(this)};function Bh(o){if(jg(o),o.G==3){var c=o.U++,f=ti(o.I);if(kt(f,"SID",o.K),kt(f,"RID",c),kt(f,"TYPE","terminate"),$a(o,f),c=new Ni(o,o.j,c),c.L=2,c.v=Gl(ti(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Yg(c.j,null),c.g.ea(c.v)),c.F=Date.now(),ql(c)}Qg(o)}function $l(o){o.g&&(Hh(o),o.g.cancel(),o.g=null)}function jg(o){$l(o),o.u&&(l.clearTimeout(o.u),o.u=null),Zl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Xl(o){if(!Eg(o.h)&&!o.s){o.s=!0;var c=o.Ga;K||ft(),Y||(K(),Y=!0),_t.add(c,o),o.B=0}}function ew(o,c){return Tg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=za(m(o.Ga,o,c),Gg(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new Ni(this,this.j,o);let M=this.o;if(this.S&&(M?(M=v(M),w(M,this.S)):M=this.S),this.m!==null||this.O||(N.H=M,M=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break e}g=void 0}if(g===void 0)break;if(c+=g,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=Bg(this,N,c),f=ti(this.I),kt(f,"RID",o),kt(f,"CVER",22),this.D&&kt(f,"X-HTTP-Session-Id",this.D),$a(this,f),M&&(this.O?c="headers="+encodeURIComponent(String(Og(M)))+"&"+c:this.m&&zh(f,this.m,M)),jh(this.h,N),this.Ua&&kt(f,"TYPE","init"),this.P?(kt(f,"$req",c),kt(f,"SID","null"),N.T=!0,kh(N,f,null)):kh(N,f,c),this.G=2}}else this.G==3&&(o?zg(this,o):this.i.length==0||Eg(this.h)||zg(this))};function zg(o,c){var f;c?f=c.l:f=o.U++;const g=ti(o.I);kt(g,"SID",o.K),kt(g,"RID",f),kt(g,"AID",o.T),$a(o,g),o.m&&o.o&&zh(g,o.m,o.o),f=new Ni(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Bg(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),jh(o.h,f),kh(f,g,c)}function $a(o,c){o.H&&H(o.H,function(f,g){kt(c,g,f)}),o.l&&Sg({},function(f,g){kt(c,g,f)})}function Bg(o,c,f){f=Math.min(o.i.length,f);var g=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let M=-1;for(;;){const q=["count="+f];M==-1?0<f?(M=N[0].g,q.push("ofs="+M)):M=0:q.push("ofs="+M);let xt=!0;for(let Ee=0;Ee<f;Ee++){let vt=N[Ee].g;const Ce=N[Ee].map;if(vt-=M,0>vt)M=Math.max(0,N[Ee].g-100),xt=!1;else try{ZS(Ce,q,"req"+vt+"_")}catch{g&&g(Ce)}}if(xt){g=q.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,g}function qg(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;K||ft(),Y||(K(),Y=!0),_t.add(c,o),o.v=0}}function qh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=za(m(o.Fa,o),Gg(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Hg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=za(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),$l(this),Hg(this))};function Hh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Hg(o){o.g=new Ni(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=ti(o.qa);kt(c,"RID","rpc"),kt(c,"SID",o.K),kt(c,"AID",o.T),kt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&kt(c,"TO",o.ja),kt(c,"TYPE","xmlhttp"),$a(o,c),o.m&&o.o&&zh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Gl(ti(c)),f.m=null,f.P=!0,gg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,$l(this),qh(this),ke(19))};function Zl(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Fg(o,c){var f=null;if(o.g==c){Zl(o),Hh(o),o.g=null;var g=2}else if(Uh(o.h,c))f=c.D,bg(o.h,c),g=1;else return;if(o.G!=0){if(c.o)if(g==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;g=jl(),Vt(g,new fg(g,f)),Xl(o)}else qg(o);else if(N=c.s,N==3||N==0&&0<c.X||!(g==1&&ew(o,c)||g==2&&qh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:Nr(o,5);break;case 4:Nr(o,10);break;case 3:Nr(o,6);break;default:Nr(o,2)}}}function Gg(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function Nr(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),g=o.Xa;const N=!g;g=new xr(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Hl(g,"https"),Gl(g),N?YS(g.toString(),f):$S(g.toString(),f)}else ke(2);o.G=0,o.l&&o.l.sa(c),Qg(o),jg(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))};function Qg(o){if(o.G=0,o.ka=[],o.l){const c=Ag(o.h);(c.length!=0||o.i.length!=0)&&(O(o.ka,c),O(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Kg(o,c,f){var g=f instanceof xr?ti(f):new xr(f);if(g.g!="")c&&(g.g=c+"."+g.g),Fl(g,g.s);else{var N=l.location;g=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var M=new xr(null);g&&Hl(M,g),c&&(M.g=c),N&&Fl(M,N),f&&(M.l=f),g=M}return f=o.D,c=o.ya,f&&c&&kt(g,f,c),kt(g,"VER",o.la),$a(o,g),g}function Yg(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Kt(new Ql({eb:f})):new Kt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function $g(){}e=$g.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Wl(){}Wl.prototype.g=function(o,c){return new Ze(o,c)};function Ze(o,c){Et.call(this),this.g=new Ug(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new gs(this)}x(Ze,Et),Ze.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ze.prototype.close=function(){Bh(this.g)},Ze.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=dt(o),o=f);c.i.push(new US(c.Ya++,o)),c.G==3&&Xl(c)},Ze.prototype.N=function(){this.g.l=null,delete this.j,Bh(this.g),delete this.g,Ze.aa.N.call(this)};function Xg(o){Dh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}x(Xg,Dh);function Zg(){Oh.call(this),this.status=1}x(Zg,Oh);function gs(o){this.g=o}x(gs,$g),gs.prototype.ua=function(){Vt(this.g,"a")},gs.prototype.ta=function(o){Vt(this.g,new Xg(o))},gs.prototype.sa=function(o){Vt(this.g,new Zg)},gs.prototype.ra=function(){Vt(this.g,"b")},Wl.prototype.createWebChannel=Wl.prototype.g,Ze.prototype.send=Ze.prototype.o,Ze.prototype.open=Ze.prototype.m,Ze.prototype.close=Ze.prototype.close,vb=function(){return new Wl},_b=function(){return jl()},yb=Ir,Ud={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zl.NO_ERROR=0,zl.TIMEOUT=8,zl.HTTP_ERROR=6,ku=zl,dg.COMPLETE="complete",gb=dg,lg.EventType=Ua,Ua.OPEN="a",Ua.CLOSE="b",Ua.ERROR="c",Ua.MESSAGE="d",Et.prototype.listen=Et.prototype.K,co=lg,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,pb=Kt}).apply(typeof pu<"u"?pu:typeof self<"u"?self:typeof window<"u"?window:{});const k_="@firebase/firestore",P_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}De.UNAUTHENTICATED=new De(null),De.GOOGLE_CREDENTIALS=new De("google-credentials-uid"),De.FIRST_PARTY=new De("first-party-uid"),De.MOCK_USER=new De("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Na="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=new ip("@firebase/firestore");function Ss(){return ts.logLevel}function F(e,...t){if(ts.logLevel<=ut.DEBUG){const n=t.map(ap);ts.debug(`Firestore (${Na}): ${e}`,...n)}}function Ti(e,...t){if(ts.logLevel<=ut.ERROR){const n=t.map(ap);ts.error(`Firestore (${Na}): ${e}`,...n)}}function da(e,...t){if(ts.logLevel<=ut.WARN){const n=t.map(ap);ts.warn(`Firestore (${Na}): ${e}`,...n)}}function ap(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,Eb(e,i,n)}function Eb(e,t,n){let i=`FIRESTORE (${Na}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ti(i),new Error(i)}function gt(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||Eb(t,r,i)}function tt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Ri{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class LI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(De.UNAUTHENTICATED))}shutdown(){}}class UI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class jI{constructor(t){this.t=t,this.currentUser=De.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){gt(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new zn,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(gt(typeof i.accessToken=="string",31837,{l:i}),new Tb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return gt(t===null||typeof t=="string",2055,{h:t}),new De(t)}}class zI{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=De.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BI{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new zI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(De.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class L_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,En(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){gt(this.o===void 0,3512);const i=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new L_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(gt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new L_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=HI(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function ct(e,t){return e<t?-1:e>t?1:0}function jd(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return Of(r)===Of(s)?ct(r,s):Of(r)?1:-1}return ct(e.length,t.length)}const FI=55296,GI=57343;function Of(e){const t=e.charCodeAt(0);return t>=FI&&t<=GI}function ma(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="__name__";class Mn{constructor(t,n,i){n===void 0?n=0:n>t.length&&$(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&$(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Mn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Mn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=Mn.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return ct(t.length,n.length)}static compareSegments(t,n){const i=Mn.isNumericId(t),r=Mn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Mn.extractNumericId(t).compare(Mn.extractNumericId(n)):jd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ur.fromString(t.substring(4,t.length-2))}}class St extends Mn{construct(t,n,i){return new St(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new St(n)}static emptyPath(){return new St([])}}const QI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Se extends Mn{construct(t,n,i){return new Se(t,n,i)}static isValidIdentifier(t){return QI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Se.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===U_}static keyField(){return new Se([U_])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Se(n)}static emptyPath(){return new Se([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.path=t}static fromPath(t){return new Q(St.fromString(t))}static fromName(t){return new Q(St.fromString(t).popFirst(5))}static empty(){return new Q(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&St.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return St.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Q(new St(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(e,t,n){if(!n)throw new z(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function KI(e,t,n,i){if(t===!0&&i===!0)throw new z(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function j_(e){if(!Q.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function z_(e){if(Q.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ab(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function oh(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":$(12329,{type:typeof e})}function je(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=oh(e);throw new z(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(e,t){const n={typeString:e};return t&&(n.value=t),n}function wl(e,t){if(!Ab(e))throw new z(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new z(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=-62135596800,q_=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(t){return Pt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*q_);return new Pt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<B_)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q_}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(wl(t,Pt._jsonSchema))return new Pt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-B_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pt._jsonSchemaVersion="firestore/timestamp/1.0",Pt._jsonSchema={type:re("string",Pt._jsonSchemaVersion),seconds:re("number"),nanoseconds:re("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(t){return new Z(t)}static min(){return new Z(new Pt(0,0))}static max(){return new Z(new Pt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=-1;function YI(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(i===1e9?new Pt(n+1,0):new Pt(n,i));return new pr(r,Q.empty(),t)}function $I(e){return new pr(e.readTime,e.key,Zo)}class pr{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new pr(Z.min(),Q.empty(),Zo)}static max(){return new pr(Z.max(),Q.empty(),Zo)}}function XI(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Q.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==ZI)throw e;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&$(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(r=>r?P.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new P((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new P((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function JI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Oa(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}lh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp=-1;function Rl(e){return e==null}function Ac(e){return e===0&&1/e==-1/0}function tC(e){return typeof e=="number"&&Number.isInteger(e)&&!Ac(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="";function eC(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=H_(t)),t=nC(e.get(n),t);return H_(t)}function nC(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case Sb:n+="";break;default:n+=s}}return n}function H_(e){return e+Sb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ar(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wb(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(t,n){this.comparator=t,this.root=n||be.EMPTY}insert(t,n){return new Qt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,be.BLACK,null,null))}remove(t){return new Qt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,be.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gu(this.root,t,this.comparator,!1)}getReverseIterator(){return new gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gu(this.root,t,this.comparator,!0)}}class gu{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class be{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??be.RED,this.left=r??be.EMPTY,this.right=s??be.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new be(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return be.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return be.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,be.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw $(27949);return t+(this.isRed()?0:1)}}be.EMPTY=null,be.RED=!0,be.BLACK=!1;be.EMPTY=new class{constructor(){this.size=0}get key(){throw $(57766)}get value(){throw $(16141)}get color(){throw $(16727)}get left(){throw $(29726)}get right(){throw $(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new be(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t){this.comparator=t,this.data=new Qt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new G_(this.data.getIterator())}getIteratorFrom(t){return new G_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof ue)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ue(this.comparator);return n.data=t,n}}class G_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.fields=t,t.sort(Se.comparator)}static empty(){return new rn([])}unionWith(t){let n=new ue(Se.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new rn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ma(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Rb("Invalid base64 string: "+s):s}}(t);return new Ie(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new Ie(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ie.EMPTY_BYTE_STRING=new Ie("");const iC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(e){if(gt(!!e,39018),typeof e=="string"){let t=0;const n=iC.exec(e);if(gt(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Jt(e.seconds),nanos:Jt(e.nanos)}}function Jt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function yr(e){return typeof e=="string"?Ie.fromBase64String(e):Ie.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="server_timestamp",Cb="__type__",xb="__previous_value__",Nb="__local_write_time__";function uh(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[Cb])==null?void 0:i.stringValue)===Ib}function ch(e){const t=e.mapValue.fields[xb];return uh(t)?ch(t):t}function Wo(e){const t=gr(e.mapValue.fields[Nb].timestampValue);return new Pt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const Sc="(default)";class Jo{constructor(t,n){this.projectId=t,this.database=n||Sc}static empty(){return new Jo("","")}get isDefaultDatabase(){return this.database===Sc}isEqual(t){return t instanceof Jo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="__type__",sC="__max__",yu={mapValue:{}},Ob="__vector__",wc="value";function _r(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?uh(e)?4:oC(e)?9007199254740991:aC(e)?10:11:$(28295,{value:e})}function Qn(e,t){if(e===t)return!0;const n=_r(e);if(n!==_r(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Wo(e).isEqual(Wo(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=gr(r.timestampValue),l=gr(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return yr(r.bytesValue).isEqual(yr(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Jt(r.geoPointValue.latitude)===Jt(s.geoPointValue.latitude)&&Jt(r.geoPointValue.longitude)===Jt(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Jt(r.integerValue)===Jt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Jt(r.doubleValue),l=Jt(s.doubleValue);return a===l?Ac(a)===Ac(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return ma(e.arrayValue.values||[],t.arrayValue.values||[],Qn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(F_(a)!==F_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Qn(a[u],l[u])))return!1;return!0}(e,t);default:return $(52216,{left:e})}}function tl(e,t){return(e.values||[]).find(n=>Qn(n,t))!==void 0}function pa(e,t){if(e===t)return 0;const n=_r(e),i=_r(t);if(n!==i)return ct(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=Jt(s.integerValue||s.doubleValue),u=Jt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return Q_(e.timestampValue,t.timestampValue);case 4:return Q_(Wo(e),Wo(t));case 5:return jd(e.stringValue,t.stringValue);case 6:return function(s,a){const l=yr(s),u=yr(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=ct(l[h],u[h]);if(d!==0)return d}return ct(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=ct(Jt(s.latitude),Jt(a.latitude));return l!==0?l:ct(Jt(s.longitude),Jt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return K_(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,y,x,V;const l=s.fields||{},u=a.fields||{},h=(m=l[wc])==null?void 0:m.arrayValue,d=(y=u[wc])==null?void 0:y.arrayValue,p=ct(((x=h==null?void 0:h.values)==null?void 0:x.length)||0,((V=d==null?void 0:d.values)==null?void 0:V.length)||0);return p!==0?p:K_(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===yu.mapValue&&a===yu.mapValue)return 0;if(s===yu.mapValue)return 1;if(a===yu.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const m=jd(u[p],d[p]);if(m!==0)return m;const y=pa(l[u[p]],h[d[p]]);if(y!==0)return y}return ct(u.length,d.length)}(e.mapValue,t.mapValue);default:throw $(23264,{he:n})}}function Q_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=gr(e),i=gr(t),r=ct(n.seconds,i.seconds);return r!==0?r:ct(n.nanos,i.nanos)}function K_(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=pa(n[r],i[r]);if(s)return s}return ct(n.length,i.length)}function ga(e){return zd(e)}function zd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=gr(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return yr(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Q.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=zd(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${zd(n.fields[a])}`;return r+"}"}(e.mapValue):$(61005,{value:e})}function Pu(e){switch(_r(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ch(e);return t?16+Pu(t):16;case 5:return 2*e.stringValue.length;case 6:return yr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Pu(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return Ar(i.fields,(s,a)=>{r+=s.length+Pu(a)}),r}(e.mapValue);default:throw $(13486,{value:e})}}function Rc(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Bd(e){return!!e&&"integerValue"in e}function up(e){return!!e&&"arrayValue"in e}function Y_(e){return!!e&&"nullValue"in e}function $_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Lu(e){return!!e&&"mapValue"in e}function aC(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[Db])==null?void 0:i.stringValue)===Ob}function Do(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Ar(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Do(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Do(e.arrayValue.values[n]);return t}return{...e}}function oC(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===sC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t){this.value=t}static empty(){return new Le({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Lu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Do(n)}setAll(t){let n=Se.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=Do(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());Lu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Qn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];Lu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){Ar(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Le(Do(this.value))}}function Vb(e){const t=[];return Ar(e.fields,(n,i)=>{const r=new Se([n]);if(Lu(i)){const s=Vb(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new rn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new pe(t,0,Z.min(),Z.min(),Z.min(),Le.empty(),0)}static newFoundDocument(t,n,i,r){return new pe(t,1,n,Z.min(),i,r,0)}static newNoDocument(t,n){return new pe(t,2,n,Z.min(),Z.min(),Le.empty(),0)}static newUnknownDocument(t,n){return new pe(t,3,n,Z.min(),Z.min(),Le.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Le.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Le.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof pe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new pe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(t,n){this.position=t,this.inclusive=n}}function X_(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=Q.comparator(Q.fromName(a.referenceValue),n.key):i=pa(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Z_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Qn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(t,n="asc"){this.field=t,this.dir=n}}function lC(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{}class ie extends Mb{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new cC(t,n,i):n==="array-contains"?new dC(t,i):n==="in"?new mC(t,i):n==="not-in"?new pC(t,i):n==="array-contains-any"?new gC(t,i):new ie(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new hC(t,i):new fC(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(pa(n,this.value)):n!==null&&_r(this.value)===_r(n)&&this.matchesComparison(pa(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return $(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xn extends Mb{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new xn(t,n)}matches(t){return kb(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kb(e){return e.op==="and"}function Pb(e){return uC(e)&&kb(e)}function uC(e){for(const t of e.filters)if(t instanceof xn)return!1;return!0}function qd(e){if(e instanceof ie)return e.field.canonicalString()+e.op.toString()+ga(e.value);if(Pb(e))return e.filters.map(t=>qd(t)).join(",");{const t=e.filters.map(n=>qd(n)).join(",");return`${e.op}(${t})`}}function Lb(e,t){return e instanceof ie?function(i,r){return r instanceof ie&&i.op===r.op&&i.field.isEqual(r.field)&&Qn(i.value,r.value)}(e,t):e instanceof xn?function(i,r){return r instanceof xn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&Lb(a,r.filters[l]),!0):!1}(e,t):void $(19439)}function Ub(e){return e instanceof ie?function(n){return`${n.field.canonicalString()} ${n.op} ${ga(n.value)}`}(e):e instanceof xn?function(n){return n.op.toString()+" {"+n.getFilters().map(Ub).join(" ,")+"}"}(e):"Filter"}class cC extends ie{constructor(t,n,i){super(t,n,i),this.key=Q.fromName(i.referenceValue)}matches(t){const n=Q.comparator(t.key,this.key);return this.matchesComparison(n)}}class hC extends ie{constructor(t,n){super(t,"in",n),this.keys=jb("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class fC extends ie{constructor(t,n){super(t,"not-in",n),this.keys=jb("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function jb(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class dC extends ie{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return up(n)&&tl(n.arrayValue,this.value)}}class mC extends ie{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&tl(this.value.arrayValue,n)}}class pC extends ie{constructor(t,n){super(t,"not-in",n)}matches(t){if(tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!tl(this.value.arrayValue,n)}}class gC extends ie{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!up(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>tl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function W_(e,t=null,n=[],i=[],r=null,s=null,a=null){return new yC(e,t,n,i,r,s,a)}function cp(e){const t=tt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>qd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Rl(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>ga(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>ga(i)).join(",")),t.Te=n}return t.Te}function hp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!lC(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Lb(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Z_(e.startAt,t.startAt)&&Z_(e.endAt,t.endAt)}function Hd(e){return Q.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _C(e,t,n,i,r,s,a,l){return new ls(e,t,n,i,r,s,a,l)}function hh(e){return new ls(e)}function J_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function fp(e){return e.collectionGroup!==null}function Xs(e){const t=tt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ue(Se.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new el(s,i))}),n.has(Se.keyField().canonicalString())||t.Ie.push(new el(Se.keyField(),i))}return t.Ie}function Bn(e){const t=tt(e);return t.Ee||(t.Ee=vC(t,Xs(e))),t.Ee}function vC(e,t){if(e.limitType==="F")return W_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new el(r.field,s)});const n=e.endAt?new ya(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ya(e.startAt.position,e.startAt.inclusive):null;return W_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Fd(e,t){const n=e.filters.concat([t]);return new ls(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ic(e,t,n){return new ls(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function fh(e,t){return hp(Bn(e),Bn(t))&&e.limitType===t.limitType}function zb(e){return`${cp(Bn(e))}|lt:${e.limitType}`}function ws(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Ub(r)).join(", ")}]`),Rl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>ga(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>ga(r)).join(",")),`Target(${i})`}(Bn(e))}; limitType=${e.limitType})`}function dh(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of Xs(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=X_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,Xs(i),r)||i.endAt&&!function(a,l,u){const h=X_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,Xs(i),r))}(e,t)}function EC(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Bb(e){return(t,n)=>{let i=!1;for(const r of Xs(e)){const s=TC(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function TC(e,t,n){const i=e.field.isKeyField()?Q.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?pa(u,h):$(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return $(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Ar(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return wb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=new Qt(Q.comparator);function bi(){return bC}const qb=new Qt(Q.comparator);function ho(...e){let t=qb;for(const n of e)t=t.insert(n.key,n);return t}function Hb(e){let t=qb;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Ur(){return Oo()}function Fb(){return Oo()}function Oo(){return new us(e=>e.toString(),(e,t)=>e.isEqual(t))}const AC=new Qt(Q.comparator),SC=new ue(Q.comparator);function ht(...e){let t=SC;for(const n of e)t=t.add(n);return t}const wC=new ue(ct);function RC(){return wC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ac(t)?"-0":t}}function Gb(e){return{integerValue:""+e}}function IC(e,t){return tC(t)?Gb(t):dp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(){this._=void 0}}function CC(e,t,n){return e instanceof nl?function(r,s){const a={fields:{[Cb]:{stringValue:Ib},[Nb]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&uh(s)&&(s=ch(s)),s&&(a.fields[xb]=s),{mapValue:a}}(n,t):e instanceof il?Kb(e,t):e instanceof rl?Yb(e,t):function(r,s){const a=Qb(r,s),l=tv(a)+tv(r.Ae);return Bd(a)&&Bd(r.Ae)?Gb(l):dp(r.serializer,l)}(e,t)}function xC(e,t,n){return e instanceof il?Kb(e,t):e instanceof rl?Yb(e,t):n}function Qb(e,t){return e instanceof Cc?function(i){return Bd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class nl extends mh{}class il extends mh{constructor(t){super(),this.elements=t}}function Kb(e,t){const n=$b(t);for(const i of e.elements)n.some(r=>Qn(r,i))||n.push(i);return{arrayValue:{values:n}}}class rl extends mh{constructor(t){super(),this.elements=t}}function Yb(e,t){let n=$b(t);for(const i of e.elements)n=n.filter(r=>!Qn(r,i));return{arrayValue:{values:n}}}class Cc extends mh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function tv(e){return Jt(e.integerValue||e.doubleValue)}function $b(e){return up(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(t,n){this.field=t,this.transform=n}}function DC(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof il&&r instanceof il||i instanceof rl&&r instanceof rl?ma(i.elements,r.elements,Qn):i instanceof Cc&&r instanceof Cc?Qn(i.Ae,r.Ae):i instanceof nl&&r instanceof nl}(e.transform,t.transform)}class OC{constructor(t,n){this.version=t,this.transformResults=n}}class we{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new we}static exists(t){return new we(void 0,t)}static updateTime(t){return new we(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Uu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class ph{}function Xb(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new gh(e.key,we.none()):new Il(e.key,e.data,we.none());{const n=e.data,i=Le.empty();let r=new ue(Se.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Sr(e.key,i,new rn(r.toArray()),we.none())}}function VC(e,t,n){e instanceof Il?function(r,s,a){const l=r.value.clone(),u=nv(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Sr?function(r,s,a){if(!Uu(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=nv(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(Zb(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function Vo(e,t,n,i){return e instanceof Il?function(s,a,l,u){if(!Uu(s.precondition,a))return l;const h=s.value.clone(),d=iv(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof Sr?function(s,a,l,u){if(!Uu(s.precondition,a))return l;const h=iv(s.fieldTransforms,u,a),d=a.data;return d.setAll(Zb(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(e,t,n,i):function(s,a,l){return Uu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function MC(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=Qb(i.transform,r||null);s!=null&&(n===null&&(n=Le.empty()),n.set(i.field,s))}return n||null}function ev(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ma(i,r,(s,a)=>DC(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Il extends ph{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Sr extends ph{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Zb(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function nv(e,t,n){const i=new Map;gt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,xC(a,l,n[r]))}return i}function iv(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,CC(s,a,t))}return i}class gh extends ph{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wb extends ph{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&VC(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=Vo(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=Vo(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=Fb();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=Xb(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ht())}isEqual(t){return this.batchId===t.batchId&&ma(this.mutations,t.mutations,(n,i)=>ev(n,i))&&ma(this.baseMutations,t.baseMutations,(n,i)=>ev(n,i))}}class mp{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){gt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return AC}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new mp(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te,mt;function Jb(e){switch(e){case k.OK:return $(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return $(15467,{code:e})}}function tA(e){if(e===void 0)return Ti("GRPC error has no .code"),k.UNKNOWN;switch(e){case te.OK:return k.OK;case te.CANCELLED:return k.CANCELLED;case te.UNKNOWN:return k.UNKNOWN;case te.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case te.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case te.INTERNAL:return k.INTERNAL;case te.UNAVAILABLE:return k.UNAVAILABLE;case te.UNAUTHENTICATED:return k.UNAUTHENTICATED;case te.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case te.NOT_FOUND:return k.NOT_FOUND;case te.ALREADY_EXISTS:return k.ALREADY_EXISTS;case te.PERMISSION_DENIED:return k.PERMISSION_DENIED;case te.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case te.ABORTED:return k.ABORTED;case te.OUT_OF_RANGE:return k.OUT_OF_RANGE;case te.UNIMPLEMENTED:return k.UNIMPLEMENTED;case te.DATA_LOSS:return k.DATA_LOSS;default:return $(39323,{code:e})}}(mt=te||(te={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new ur([4294967295,4294967295],0);function rv(e){const t=UC().encode(e),n=new mb;return n.update(t),new Uint8Array(n.digest())}function sv(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ur([n,i],0),new ur([r,s],0)]}class pp{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new fo(`Invalid padding: ${n}`);if(i<0)throw new fo(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new fo(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new fo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=ur.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(ur.fromNumber(i)));return r.compare(jC)===1&&(r=new ur([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=rv(t),[i,r]=sv(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new pp(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=rv(t),[i,r]=sv(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class fo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,Cl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new yh(Z.min(),r,new Qt(ct),bi(),ht())}}class Cl{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Cl(i,n,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class eA{constructor(t,n){this.targetId=t,this.Ce=n}}class nA{constructor(t,n,i=Ie.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class av{constructor(){this.ve=0,this.Fe=ov(),this.Me=Ie.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ht(),n=ht(),i=ht();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:$(38017,{changeType:s})}}),new Cl(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=ov()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class zC{constructor(t){this.Ge=t,this.ze=new Map,this.je=bi(),this.Je=_u(),this.He=_u(),this.Ye=new Qt(ct)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:$(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(Hd(s))if(i===0){const a=new Q(s.path);this.et(n,a,pe.newNoDocument(a,Z.min()))}else gt(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=yr(i).toUint8Array()}catch(u){if(u instanceof Rb)return da("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new pp(a,r,s)}catch(u){return da(u instanceof fo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&Hd(l.target)){const u=new Q(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,pe.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ht();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new yh(t,n,this.Ye,this.je,i);return this.je=bi(),this.Je=_u(),this.He=_u(),this.Ye=new Qt(ct),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new av,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new ue(ct),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new ue(ct),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||F("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new av),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function _u(){return new Qt(Q.comparator)}function ov(){return new Qt(Q.comparator)}const BC={asc:"ASCENDING",desc:"DESCENDING"},qC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HC={and:"AND",or:"OR"};class FC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Gd(e,t){return e.useProto3Json||Rl(t)?t:{value:t}}function xc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function iA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function GC(e,t){return xc(e,t.toTimestamp())}function un(e){return gt(!!e,49232),Z.fromTimestamp(function(n){const i=gr(n);return new Pt(i.seconds,i.nanos)}(e))}function gp(e,t){return Qd(e,t).canonicalString()}function Qd(e,t){const n=function(r){return new St(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function rA(e){const t=St.fromString(e);return gt(cA(t),10190,{key:t.toString()}),t}function Nc(e,t){return gp(e.databaseId,t.path)}function Mo(e,t){const n=rA(t);if(n.get(1)!==e.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Q(aA(n))}function sA(e,t){return gp(e.databaseId,t)}function QC(e){const t=rA(e);return t.length===4?St.emptyPath():aA(t)}function Kd(e){return new St(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function aA(e){return gt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function lv(e,t,n){return{name:Nc(e,t),fields:n.value.mapValue.fields}}function KC(e,t){return"found"in t?function(i,r){gt(!!r.found,43571),r.found.name,r.found.updateTime;const s=Mo(i,r.found.name),a=un(r.found.updateTime),l=r.found.createTime?un(r.found.createTime):Z.min(),u=new Le({mapValue:{fields:r.found.fields}});return pe.newFoundDocument(s,a,l,u)}(e,t):"missing"in t?function(i,r){gt(!!r.missing,3894),gt(!!r.readTime,22933);const s=Mo(i,r.missing),a=un(r.readTime);return pe.newNoDocument(s,a)}(e,t):$(7234,{result:t})}function YC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:$(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(gt(d===void 0||typeof d=="string",58123),Ie.fromBase64String(d||"")):(gt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ie.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?k.UNKNOWN:tA(h.code);return new z(d,h.message||"")}(a);n=new nA(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Mo(e,i.document.name),s=un(i.document.updateTime),a=i.document.createTime?un(i.document.createTime):Z.min(),l=new Le({mapValue:{fields:i.document.fields}}),u=pe.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new ju(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Mo(e,i.document),s=i.readTime?un(i.readTime):Z.min(),a=pe.newNoDocument(r,s),l=i.removedTargetIds||[];n=new ju([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Mo(e,i.document),s=i.removedTargetIds||[];n=new ju([],s,r,null)}else{if(!("filter"in t))return $(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new LC(r,s),l=i.targetId;n=new eA(l,a)}}return n}function oA(e,t){let n;if(t instanceof Il)n={update:lv(e,t.key,t.value)};else if(t instanceof gh)n={delete:Nc(e,t.key)};else if(t instanceof Sr)n={update:lv(e,t.key,t.data),updateMask:ix(t.fieldMask)};else{if(!(t instanceof Wb))return $(16599,{Vt:t.type});n={verify:Nc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof nl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof il)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof rl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Cc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw $(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:GC(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$(27497)}(e,t.precondition)),n}function $C(e,t){return e&&e.length>0?(gt(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?un(r.updateTime):un(s);return a.isEqual(Z.min())&&(a=un(s)),new OC(a,r.transformResults||[])}(n,t))):[]}function XC(e,t){return{documents:[sA(e,t.path)]}}function ZC(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=sA(e,r);const s=function(h){if(h.length!==0)return uA(xn.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:Rs(m.field),direction:tx(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Gd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function WC(e){let t=QC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){gt(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(p){const m=lA(p);return m instanceof xn&&Pb(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(x){return new el(Is(x.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Rl(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,y=p.values||[];return new ya(y,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,y=p.values||[];return new ya(y,m)}(n.endAt)),_C(t,r,a,s,l,"F",u,h)}function JC(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function lA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Is(n.unaryFilter.field);return ie.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Is(n.unaryFilter.field);return ie.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Is(n.unaryFilter.field);return ie.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Is(n.unaryFilter.field);return ie.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $(61313);default:return $(60726)}}(e):e.fieldFilter!==void 0?function(n){return ie.create(Is(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $(58110);default:return $(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return xn.create(n.compositeFilter.filters.map(i=>lA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return $(1026)}}(n.compositeFilter.op))}(e):$(30097,{filter:e})}function tx(e){return BC[e]}function ex(e){return qC[e]}function nx(e){return HC[e]}function Rs(e){return{fieldPath:e.canonicalString()}}function Is(e){return Se.fromServerFormat(e.fieldPath)}function uA(e){return e instanceof ie?function(n){if(n.op==="=="){if($_(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NAN"}};if(Y_(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($_(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NAN"}};if(Y_(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rs(n.field),op:ex(n.op),value:n.value}}}(e):e instanceof xn?function(n){const i=n.getFilters().map(r=>uA(r));return i.length===1?i[0]:{compositeFilter:{op:nx(n.op),filters:i}}}(e):$(54877,{filter:e})}function ix(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function cA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t,n,i,r,s=Z.min(),a=Z.min(),l=Ie.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Zi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(t){this.yt=t}}function sx(e){const t=WC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Ic(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.Cn=new ox}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(pr.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(pr.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class ox{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new ue(St.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new ue(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hA=41943040;class Ge{static withCacheSize(t){return new Ge(t,Ge.DEFAULT_COLLECTION_PERCENTILE,Ge.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ge.DEFAULT_COLLECTION_PERCENTILE=10,Ge.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ge.DEFAULT=new Ge(hA,Ge.DEFAULT_COLLECTION_PERCENTILE,Ge.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ge.DISABLED=new Ge(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new _a(0)}static cr(){return new _a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="LruGarbageCollector",lx=1048576;function hv([e,t],[n,i]){const r=ct(e,n);return r===0?ct(t,i):r}class ux{constructor(t){this.Ir=t,this.buffer=new ue(hv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();hv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cx{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){F(cv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Oa(n)?F(cv,"Ignoring IndexedDB error during garbage collection: ",n):await Da(n)}await this.Vr(3e5)})}}class hx{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(lh.ce);const i=new ux(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(uv)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uv):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,a=Date.now(),this.nthSequenceNumber(t,r))).next(p=>(i=p,l=Date.now(),this.removeTargets(t,i,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(p=>(h=Date.now(),Ss()<=ut.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:p})))}}function fx(e,t){return new hx(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.changes=new us(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,pe.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&Vo(i.mutation,r,rn.empty(),Pt.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ht()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ht()){const r=Ur();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=ho();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=Ur();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ht()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=bi();const a=Oo(),l=function(){return Oo()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof Sr)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),Vo(d.mutation,h,d.mutation.getFieldMask(),Pt.now())):a.set(h.key,rn.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new mx(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=Oo();let r=new Qt((a,l)=>a-l),s=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||rn.empty();d=l.applyToLocalView(h,d),i.set(u,d);const p=(r.get(l.batchId)||ht()).add(u);r=r.insert(l.batchId,p)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,p=Fb();d.forEach(m=>{if(!s.has(m)){const y=Xb(n.get(m),i.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):fp(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):P.resolve(Ur());let l=Zo,u=s;return a.next(h=>P.forEach(h,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,ht())).next(d=>({batchId:l,changes:Hb(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Q(n)).next(i=>{let r=ho();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=ho();return this.indexManager.getCollectionParents(t,s).next(l=>P.forEach(l,u=>{const h=function(p,m){return new ls(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,pe.newInvalidDocument(d)))});let l=ho();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&Vo(d.mutation,h,rn.empty(),Pt.now()),dh(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:un(r.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:sx(r.bundledQuery),readTime:un(r.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this.overlays=new Qt(Q.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Ur();return P.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const r=Ur(),s=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return P.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Qt((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=Ur(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Ur(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return P.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new PC(n,i));let s=this.qr.get(n);s===void 0&&(s=ht(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this.sessionToken=Ie.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this.Qr=new ue(fe.$r),this.Ur=new ue(fe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new fe(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new fe(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new Q(new St([])),i=new fe(n,t),r=new fe(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Q(new St([])),i=new fe(n,t),r=new fe(n,t+1);let s=ht();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new fe(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class fe{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Q.comparator(t.key,n.key)||ct(t.Yr,n.Yr)}static Kr(t,n){return ct(t.Yr,n.Yr)||Q.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ue(fe.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new kC(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new fe(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?lp:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new fe(n,0),r=new fe(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new ue(ct);return n.forEach(r=>{const s=new fe(r,0),a=new fe(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;Q.isDocumentKey(s)||(s=s.child(""));const a=new fe(new Q(s),0);let l=new ue(ct);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){gt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,r=>{const s=new fe(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new fe(n,0),r=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(t){this.ri=t,this.docs=function(){return new Qt(Q.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():pe.newInvalidDocument(n))}getEntries(t,n){let i=bi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():pe.newInvalidDocument(r))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=bi();const a=n.path,l=new Q(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||XI($I(d),i)<=0||(r.has(d.key)||dh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(t,n,i,r){$(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new Tx(this)}getSize(t){return P.resolve(this.size)}}class Tx extends dx{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(t){this.persistence=t,this.si=new us(n=>cp(n),hp),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new yp,this.targetCount=0,this.ai=_a.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new _a(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),P.waitFor(s).next(()=>r)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(t,n){this.ui={},this.overlays={},this.ci=new lh(0),this.li=!1,this.li=!0,this.hi=new _x,this.referenceDelegate=t(this),this.Pi=new bx(this),this.indexManager=new ax,this.remoteDocumentCache=function(r){return new Ex(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new rx(n),this.Ii=new gx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new yx,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new vx(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){F("MemoryPersistence","Starting transaction:",t);const r=new Ax(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class Ax extends WI{constructor(t){super(),this.currentSequenceNumber=t}}class _p{constructor(t){this.persistence=t,this.Ri=new yp,this.Vi=null}static mi(t){return new _p(t)}get fi(){if(this.Vi)return this.Vi;throw $(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const r=Q.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,Z.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Dc{constructor(t,n){this.persistence=t,this.pi=new us(i=>eC(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=fx(this,n)}static mi(t,n){return new Dc(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?P.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,Z.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Pu(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return P.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=ht(),r=ht();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new vp(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return v2()?8:JI(Me())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Sx;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(Ss()<=ut.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",ws(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(Ss()<=ut.DEBUG&&F("QueryEngine","Query:",ws(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Ss()<=ut.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",ws(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Bn(n))):P.resolve())}ys(t,n){if(J_(n))return P.resolve(null);let i=Bn(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Ic(n,null,"F"),i=Bn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=ht(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,Ic(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return J_(n)||r.isEqual(Z.min())?P.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?P.resolve(null):(Ss()<=ut.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ws(n)),this.vs(t,a,n,YI(r,Zo)).next(l=>l))})}Ds(t,n){let i=new ue(Bb(t));return n.forEach((r,s)=>{dh(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return Ss()<=ut.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",ws(n)),this.ps.getDocumentsMatchingQuery(t,n,pr.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="LocalStore",Rx=3e8;class Ix{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Qt(ct),this.xs=new us(s=>cp(s),hp),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new px(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function Cx(e,t,n,i){return new Ix(e,t,n,i)}async function dA(e,t){const n=tt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=ht();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function xx(e,t){const n=tt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const p=h.batch,m=p.keys();let y=P.resolve();return m.forEach(x=>{y=y.next(()=>d.getEntry(u,x)).next(V=>{const O=h.docVersions.get(x);gt(O!==null,48541),V.version.compareTo(O)<0&&(p.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ht();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function mA(e){const t=tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function Nx(e,t){const n=tt(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,p)=>{const m=r.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?y=y.withResumeToken(Ie.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,i)),r=r.insert(p,y),function(V,O,S){return V.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=Rx?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,y,d)&&l.push(n.Pi.updateTargetData(s,y))});let u=bi(),h=ht();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(Dx(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual(Z.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function Dx(e,t,n){let i=ht(),r=ht();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=bi();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):F(Ep,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function Ox(e,t){const n=tt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=lp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Vx(e,t){const n=tt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,P.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Zi(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Yd(e,t,n){const i=tt(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Oa(a))throw a;F(Ep,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function fv(e,t,n){const i=tt(e);let r=Z.min(),s=ht();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const p=tt(u),m=p.xs.get(d);return m!==void 0?P.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,d)}(i,a,Bn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:Z.min(),n?s:ht())).next(l=>(Mx(i,EC(t),l),{documents:l,Qs:s})))}function Mx(e,t,n){let i=e.Os.get(t)||Z.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class dv{constructor(){this.activeTargetIds=RC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class kx{constructor(){this.Mo=new dv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new dv,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="ConnectivityMonitor";class pv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F(mv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){F(mv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vu=null;function $d(){return vu===null?vu=function(){return 268435456+Math.round(2147483648*Math.random())}():vu++,"0x"+vu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="RestConnection",Lx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ux{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Sc?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=$d(),l=this.zo(t,n.toUriEncodedString());F(Vf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=Ca(h);return this.Jo(t,l,u,i,d).then(p=>(F(Vf,`Received RPC '${t}' ${a}: `,p),p),p=>{throw da(Vf,`RPC '${t}' ${a} failed with error: `,p,"url: ",l,"request:",i),p})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Na}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=Lx[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne="WebChannelConnection";class zx extends Ux{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=$d();return new Promise((l,u)=>{const h=new pb;h.setWithCredentials(!0),h.listenOnce(gb.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ku.NO_ERROR:const p=h.getResponseJson();F(Ne,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),l(p);break;case ku.TIMEOUT:F(Ne,`RPC '${t}' ${a} timed out`),u(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case ku.HTTP_ERROR:const m=h.getStatus();if(F(Ne,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const V=function(S){const E=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(E)>=0?E:k.UNKNOWN}(x.status);u(new z(V,x.message))}else u(new z(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new z(k.UNAVAILABLE,"Connection failed."));break;default:$(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{F(Ne,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);F(Ne,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=$d(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=vb(),l=_b(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");F(Ne,`Creating RPC '${t}' stream ${r}: ${d}`,u);const p=a.createWebChannel(d,u);this.I_(p);let m=!1,y=!1;const x=new jx({Yo:O=>{y?F(Ne,`Not sending because RPC '${t}' stream ${r} is closed:`,O):(m||(F(Ne,`Opening RPC '${t}' stream ${r} transport.`),p.open(),m=!0),F(Ne,`RPC '${t}' stream ${r} sending:`,O),p.send(O))},Zo:()=>p.close()}),V=(O,S,E)=>{O.listen(S,R=>{try{E(R)}catch(D){setTimeout(()=>{throw D},0)}})};return V(p,co.EventType.OPEN,()=>{y||(F(Ne,`RPC '${t}' stream ${r} transport opened.`),x.o_())}),V(p,co.EventType.CLOSE,()=>{y||(y=!0,F(Ne,`RPC '${t}' stream ${r} transport closed`),x.a_(),this.E_(p))}),V(p,co.EventType.ERROR,O=>{y||(y=!0,da(Ne,`RPC '${t}' stream ${r} transport errored. Name:`,O.name,"Message:",O.message),x.a_(new z(k.UNAVAILABLE,"The operation could not be completed")))}),V(p,co.EventType.MESSAGE,O=>{var S;if(!y){const E=O.data[0];gt(!!E,16349);const R=E,D=(R==null?void 0:R.error)||((S=R[0])==null?void 0:S.error);if(D){F(Ne,`RPC '${t}' stream ${r} received error:`,D);const U=D.status;let H=function(A){const w=te[A];if(w!==void 0)return tA(w)}(U),b=D.message;H===void 0&&(H=k.INTERNAL,b="Unknown error status: "+U+" with message "+D.message),y=!0,x.a_(new z(H,b)),p.close()}else F(Ne,`RPC '${t}' stream ${r} received:`,E),x.u_(E)}}),V(l,yb.STAT_EVENT,O=>{O.stat===Ud.PROXY?F(Ne,`RPC '${t}' stream ${r} detected buffering proxy`):O.stat===Ud.NOPROXY&&F(Ne,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function Mf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(e){return new FC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&F("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="PersistentStream";class pA{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Tp(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Ti(n.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new z(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return F(gv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(F(gv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bx extends pA{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=YC(this.serializer,t),i=function(s){if(!("targetChange"in s))return Z.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?un(a.readTime):Z.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Kd(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Hd(u)?{documents:XC(s,u)}:{query:ZC(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=iA(s,a.resumeToken);const h=Gd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Z.min())>0){l.readTime=xc(s,a.snapshotVersion.toTimestamp());const h=Gd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=JC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Kd(this.serializer),n.removeTarget=t,this.q_(n)}}class qx extends pA{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return gt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,gt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){gt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=$C(t.writeResults,t.commitTime),i=un(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Kd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>oA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{}class Fx extends Hx{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,Qd(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(k.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Qd(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Gx{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ti(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="RemoteStore";class Qx{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{cs(this)&&(F(es,"Restarting streams for network reachability change."),await async function(u){const h=tt(u);h.Ea.add(4),await xl(h),h.Ra.set("Unknown"),h.Ea.delete(4),await vh(h)}(this))})}),this.Ra=new Gx(i,r)}}async function vh(e){if(cs(e))for(const t of e.da)await t(!0)}async function xl(e){for(const t of e.da)await t(!1)}function gA(e,t){const n=tt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),wp(n)?Sp(n):Va(n).O_()&&Ap(n,t))}function bp(e,t){const n=tt(e),i=Va(n);n.Ia.delete(t),i.O_()&&yA(n,t),n.Ia.size===0&&(i.O_()?i.L_():cs(n)&&n.Ra.set("Unknown"))}function Ap(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Z.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Va(e).Y_(t)}function yA(e,t){e.Va.Ue(t),Va(e).Z_(t)}function Sp(e){e.Va=new zC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Va(e).start(),e.Ra.ua()}function wp(e){return cs(e)&&!Va(e).x_()&&e.Ia.size>0}function cs(e){return tt(e).Ea.size===0}function _A(e){e.Va=void 0}async function Kx(e){e.Ra.set("Online")}async function Yx(e){e.Ia.forEach((t,n)=>{Ap(e,t)})}async function $x(e,t){_A(e),wp(e)?(e.Ra.ha(t),Sp(e)):e.Ra.set("Unknown")}async function Xx(e,t,n){if(e.Ra.set("Online"),t instanceof nA&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){F(es,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Oc(e,i)}else if(t instanceof ju?e.Va.Ze(t):t instanceof eA?e.Va.st(t):e.Va.tt(t),!n.isEqual(Z.min()))try{const i=await mA(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(Ie.EMPTY_BYTE_STRING,d.snapshotVersion)),yA(s,u);const p=new Zi(d.target,u,h,d.sequenceNumber);Ap(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){F(es,"Failed to raise snapshot:",i),await Oc(e,i)}}async function Oc(e,t,n){if(!Oa(t))throw t;e.Ea.add(1),await xl(e),e.Ra.set("Offline"),n||(n=()=>mA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{F(es,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await vh(e)})}function vA(e,t){return t().catch(n=>Oc(e,n,t))}async function Eh(e){const t=tt(e),n=vr(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:lp;for(;Zx(t);)try{const r=await Ox(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,Wx(t,r)}catch(r){await Oc(t,r)}EA(t)&&TA(t)}function Zx(e){return cs(e)&&e.Ta.length<10}function Wx(e,t){e.Ta.push(t);const n=vr(e);n.O_()&&n.X_&&n.ea(t.mutations)}function EA(e){return cs(e)&&!vr(e).x_()&&e.Ta.length>0}function TA(e){vr(e).start()}async function Jx(e){vr(e).ra()}async function tN(e){const t=vr(e);for(const n of e.Ta)t.ea(n.mutations)}async function eN(e,t,n){const i=e.Ta.shift(),r=mp.from(i,t,n);await vA(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Eh(e)}async function nN(e,t){t&&vr(e).X_&&await async function(i,r){if(function(a){return Jb(a)&&a!==k.ABORTED}(r.code)){const s=i.Ta.shift();vr(i).B_(),await vA(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Eh(i)}}(e,t),EA(e)&&TA(e)}async function yv(e,t){const n=tt(e);n.asyncQueue.verifyOperationInProgress(),F(es,"RemoteStore received new credentials");const i=cs(n);n.Ea.add(3),await xl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await vh(n)}async function iN(e,t){const n=tt(e);t?(n.Ea.delete(2),await vh(n)):t||(n.Ea.add(2),await xl(n),n.Ra.set("Unknown"))}function Va(e){return e.ma||(e.ma=function(n,i,r){const s=tt(n);return s.sa(),new Bx(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:Kx.bind(null,e),t_:Yx.bind(null,e),r_:$x.bind(null,e),H_:Xx.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),wp(e)?Sp(e):e.Ra.set("Unknown")):(await e.ma.stop(),_A(e))})),e.ma}function vr(e){return e.fa||(e.fa=function(n,i,r){const s=tt(n);return s.sa(),new qx(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Jx.bind(null,e),r_:nN.bind(null,e),ta:tN.bind(null,e),na:eN.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Eh(e)):(await e.fa.stop(),e.Ta.length>0&&(F(es,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new Rp(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ip(e,t){if(Ti("AsyncQueue",`${t}: ${e}`),Oa(e))return new z(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{static emptySet(t){return new Zs(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=ho(),this.sortedSet=new Qt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Zs)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Zs;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(){this.ga=new Qt(Q.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):$(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class va{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new va(t,n,Zs.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&fh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class sN{constructor(){this.queries=vv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=tt(n),s=r.queries;r.queries=vv(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new z(k.ABORTED,"Firestore shutting down"))}}function vv(){return new us(e=>zb(e),fh)}async function Cp(e,t){const n=tt(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new rN,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=Ip(a,`Initialization of query '${ws(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Np(n)}async function xp(e,t){const n=tt(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function aN(e,t){const n=tt(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&Np(n)}function oN(e,t,n){const i=tt(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function Np(e){e.Ca.forEach(t=>{t.next()})}var Xd,Ev;(Ev=Xd||(Xd={})).Ma="default",Ev.Cache="cache";class Dp{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new va(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=va.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Xd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(t){this.key=t}}class AA{constructor(t){this.key=t}}class lN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ht(),this.mutatedKeys=ht(),this.eu=Bb(t),this.tu=new Zs(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new _v,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,p)=>{const m=r.get(d),y=dh(this.query,p)?p:null,x=!!m&&this.mutatedKeys.has(m.key),V=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let O=!1;m&&y?m.data.isEqual(y.data)?x!==V&&(i.track({type:3,doc:y}),O=!0):this.su(m,y)||(i.track({type:2,doc:y}),O=!0,(u&&this.eu(y,u)>0||h&&this.eu(y,h)<0)&&(l=!0)):!m&&y?(i.track({type:0,doc:y}),O=!0):m&&!y&&(i.track({type:1,doc:m}),O=!0,(u||h)&&(l=!0)),O&&(y?(a=a.add(y),s=V?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,p)=>function(y,x){const V=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $(20277,{Rt:O})}};return V(y)-V(x)}(d.type,p.type)||this.eu(d.doc,p.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new va(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _v,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ht(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new AA(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new bA(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ht();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return va.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Op="SyncEngine";class uN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class cN{constructor(t){this.key=t,this.hu=!1}}class hN{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new us(l=>zb(l),fh),this.Iu=new Map,this.Eu=new Set,this.du=new Qt(Q.comparator),this.Au=new Map,this.Ru=new yp,this.Vu={},this.mu=new Map,this.fu=_a.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fN(e,t,n=!0){const i=xA(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await SA(i,t,n,!0),r}async function dN(e,t){const n=xA(e);await SA(n,t,!0,!1)}async function SA(e,t,n,i){const r=await Vx(e.localStore,Bn(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await mN(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&gA(e.remoteStore,r),l}async function mN(e,t,n,i,r){e.pu=(p,m,y)=>async function(V,O,S,E){let R=O.view.ru(S);R.Cs&&(R=await fv(V.localStore,O.query,!1).then(({documents:b})=>O.view.ru(b,R)));const D=E&&E.targetChanges.get(O.targetId),U=E&&E.targetMismatches.get(O.targetId)!=null,H=O.view.applyChanges(R,V.isPrimaryClient,D,U);return bv(V,O.targetId,H.au),H.snapshot}(e,p,m,y);const s=await fv(e.localStore,t,!0),a=new lN(t,s.Qs),l=a.ru(s.documents),u=Cl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);bv(e,n,h.au);const d=new uN(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function pN(e,t,n){const i=tt(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!fh(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Yd(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&bp(i.remoteStore,r.targetId),Zd(i,r.targetId)}).catch(Da)):(Zd(i,r.targetId),await Yd(i.localStore,r.targetId,!0))}async function gN(e,t){const n=tt(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),bp(n.remoteStore,i.targetId))}async function yN(e,t,n){const i=SN(e);try{const r=await function(a,l){const u=tt(a),h=Pt.now(),d=l.reduce((y,x)=>y.add(x.key),ht());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=bi(),V=ht();return u.Ns.getEntries(y,d).next(O=>{x=O,x.forEach((S,E)=>{E.isValidDocument()||(V=V.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,x)).next(O=>{p=O;const S=[];for(const E of l){const R=MC(E,p.get(E.key).overlayedDocument);R!=null&&S.push(new Sr(E.key,R,Vb(R.value.mapValue),we.exists(!0)))}return u.mutationQueue.addMutationBatch(y,h,S,l)}).next(O=>{m=O;const S=O.applyToLocalDocumentSet(p,V);return u.documentOverlayCache.saveOverlays(y,O.batchId,S)})}).then(()=>({batchId:m.batchId,changes:Hb(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Qt(ct)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await Nl(i,r.changes),await Eh(i.remoteStore)}catch(r){const s=Ip(r,"Failed to persist write");n.reject(s)}}async function wA(e,t){const n=tt(e);try{const i=await Nx(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(gt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?gt(a.hu,14607):r.removedDocuments.size>0&&(gt(a.hu,42227),a.hu=!1))}),await Nl(n,i,t)}catch(i){await Da(i)}}function Tv(e,t,n){const i=tt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=tt(a);u.onlineState=l;let h=!1;u.queries.forEach((d,p)=>{for(const m of p.Sa)m.va(l)&&(h=!0)}),h&&Np(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function _N(e,t,n){const i=tt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Qt(Q.comparator);a=a.insert(s,pe.newNoDocument(s,Z.min()));const l=ht().add(s),u=new yh(Z.min(),new Map,new Qt(ct),a,l);await wA(i,u),i.du=i.du.remove(s),i.Au.delete(t),Vp(i)}else await Yd(i.localStore,t,!1).then(()=>Zd(i,t,n)).catch(Da)}async function vN(e,t){const n=tt(e),i=t.batch.batchId;try{const r=await xx(n.localStore,t);IA(n,i,null),RA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Nl(n,r)}catch(r){await Da(r)}}async function EN(e,t,n){const i=tt(e);try{const r=await function(a,l){const u=tt(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(gt(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);IA(i,t,n),RA(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Nl(i,r)}catch(r){await Da(r)}}function RA(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function IA(e,t,n){const i=tt(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Zd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||CA(e,i)})}function CA(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(bp(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Vp(e))}function bv(e,t,n){for(const i of n)i instanceof bA?(e.Ru.addReference(i.key,t),TN(e,i)):i instanceof AA?(F(Op,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||CA(e,i.key)):$(19791,{wu:i})}function TN(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(F(Op,"New document in limbo: "+n),e.Eu.add(i),Vp(e))}function Vp(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Q(St.fromString(t)),i=e.fu.next();e.Au.set(i,new cN(n)),e.du=e.du.insert(n,i),gA(e.remoteStore,new Zi(Bn(hh(n.path)),i,"TargetPurposeLimboResolution",lh.ce))}}async function Nl(e,t,n){const i=tt(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){r.push(h);const p=vp.As(u.targetId,h);s.push(p)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=tt(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(h,m=>P.forEach(m.Es,y=>d.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.ds,y=>d.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Oa(p))throw p;F(Ep,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const y=d.Ms.get(m),x=y.snapshotVersion,V=y.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(m,V)}}}(i.localStore,s))}async function bN(e,t){const n=tt(e);if(!n.currentUser.isEqual(t)){F(Op,"User change. New user:",t.toKey());const i=await dA(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new z(k.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Nl(n,i.Ls)}}function AN(e,t){const n=tt(e),i=n.Au.get(t);if(i&&i.hu)return ht().add(i.key);{let r=ht();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function xA(e){const t=tt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=AN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_N.bind(null,t),t.Pu.H_=aN.bind(null,t.eventManager),t.Pu.yu=oN.bind(null,t.eventManager),t}function SN(e){const t=tt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=EN.bind(null,t),t}class Vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=_h(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return Cx(this.persistence,new wx,t.initialUser,this.serializer)}Cu(t){return new fA(_p.mi,this.serializer)}Du(t){return new kx}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vc.provider={build:()=>new Vc};class wN extends Vc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){gt(this.persistence.referenceDelegate instanceof Dc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new cx(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Ge.withCacheSize(this.cacheSizeBytes):Ge.DEFAULT;return new fA(i=>Dc.mi(i,n),this.serializer)}}class Wd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Tv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bN.bind(null,this.syncEngine),await iN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new sN}()}createDatastore(t){const n=_h(t.databaseInfo.databaseId),i=function(s){return new zx(s)}(t.databaseInfo);return function(s,a,l,u){return new Fx(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new Qx(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Tv(this.syncEngine,n,0),function(){return pv.v()?new pv:new Px}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const p=new hN(r,s,a,l,u,h);return d&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=tt(r);F(es,"RemoteStore shutting down."),s.Ea.add(5),await xl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Wd.provider={build:()=>new Wd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ti("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=tt(r),l={documents:s.map(p=>Nc(a.serializer,p))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,St.emptyPath(),l,s.length),h=new Map;u.forEach(p=>{const m=KC(a.serializer,p);h.set(m.key.toString(),m)});const d=[];return s.forEach(p=>{const m=h.get(p.toString());gt(!!m,55234,{key:p}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new gh(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=Q.fromPath(i);this.mutations.push(new Wb(r,this.precondition(r)))}),await async function(i,r){const s=tt(i),a={writes:r.map(l=>oA(s.serializer,l))};await s.Go("Commit",s.serializer.databaseId,St.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw $(50498,{Gu:t.constructor.name});n=Z.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new z(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Z.min())?we.exists(!1):we.updateTime(n):we.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Z.min()))throw new z(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return we.updateTime(n)}return we.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new Tp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new RN(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!Rl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Jb(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="FirestoreClient";class CN{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=De.UNAUTHENTICATED,this.clientId=op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{F(Er,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(F(Er,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Ip(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function kf(e,t){e.asyncQueue.verifyOperationInProgress(),F(Er,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await dA(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Av(e,t){e.asyncQueue.verifyOperationInProgress();const n=await xN(e);F(Er,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>yv(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>yv(t.remoteStore,r)),e._onlineComponents=t}async function xN(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){F(Er,"Using user provided OfflineComponentProvider");try{await kf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===k.FAILED_PRECONDITION||r.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;da("Error using user provided cache. Falling back to memory cache: "+n),await kf(e,new Vc)}}else F(Er,"Using default OfflineComponentProvider"),await kf(e,new wN(void 0));return e._offlineComponents}async function kp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(F(Er,"Using user provided OnlineComponentProvider"),await Av(e,e._uninitializedComponentsProvider._online)):(F(Er,"Using default OnlineComponentProvider"),await Av(e,new Wd))),e._onlineComponents}function NN(e){return kp(e).then(t=>t.syncEngine)}function DN(e){return kp(e).then(t=>t.datastore)}async function Mc(e){const t=await kp(e),n=t.eventManager;return n.onListen=fN.bind(null,t.syncEngine),n.onUnlisten=pN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=dN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=gN.bind(null,t.syncEngine),n}function ON(e,t,n={}){const i=new zn;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new Mp({next:m=>{d.Nu(),a.enqueueAndForget(()=>xp(s,p));const y=m.docs.has(l);!y&&m.fromCache?h.reject(new z(k.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?h.reject(new z(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new Dp(hh(l.path),d,{includeMetadataChanges:!0,qa:!0});return Cp(s,p)}(await Mc(e),e.asyncQueue,t,n,i)),i.promise}function VN(e,t,n={}){const i=new zn;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new Mp({next:m=>{d.Nu(),a.enqueueAndForget(()=>xp(s,p)),m.fromCache&&u.source==="server"?h.reject(new z(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new Dp(l,d,{includeMetadataChanges:!0,qa:!0});return Cp(s,p)}(await Mc(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="firestore.googleapis.com",wv=!0;class Rv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DA,this.ssl=wv}else this.host=t.host,this.ssl=t.ssl??wv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=hA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<lx)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}KI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NA(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Th{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new LI;switch(i.type){case"firstParty":return new BI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Sv.get(n);i&&(F("ComponentProvider","Removing Datastore"),Sv.delete(n),i.terminate())}(this),Promise.resolve()}}function MN(e,t,n,i={}){var h;e=je(e,Th);const r=Ca(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(ab(`https://${l}`),ob("Firestore",!0)),s.host!==DA&&s.host!==l&&da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!Wr(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=De.MOCK_USER;else{d=c2(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new De(m)}e._authCredentials=new UI(new Tb(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Xn(this.firestore,t,this._query)}}class Gt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Gt(this.firestore,t,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(wl(n,Gt._jsonSchema))return new Gt(t,i||null,new Q(St.fromString(n.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:re("string",Gt._jsonSchemaVersion),referencePath:re("string")};class cr extends Xn{constructor(t,n,i){super(t,n,hh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Gt(this.firestore,null,new Q(t))}withConverter(t){return new cr(this.firestore,t,this._path)}}function Iv(e,t,...n){if(e=qt(e),bb("collection","path",t),e instanceof Th){const i=St.fromString(t,...n);return z_(i),new cr(e,null,i)}{if(!(e instanceof Gt||e instanceof cr))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(St.fromString(t,...n));return z_(i),new cr(e.firestore,null,i)}}function he(e,t,...n){if(e=qt(e),arguments.length===1&&(t=op.newId()),bb("doc","path",t),e instanceof Th){const i=St.fromString(t,...n);return j_(i),new Gt(e,null,new Q(i))}{if(!(e instanceof Gt||e instanceof cr))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(St.fromString(t,...n));return j_(i),new Gt(e.firestore,e instanceof cr?e.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="AsyncQueue";class xv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Tp(this,"async_queue_retry"),this._c=()=>{const i=Mf();i&&F(Cv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=Mf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Mf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new zn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Oa(t))throw t;F(Cv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,Ti("INTERNAL UNHANDLED ERROR: ",Nv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=Rp.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&$(47125,{Pc:Nv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Nv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class Kn extends Th{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new xv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new xv(t),this._firestoreClient=void 0,await t}}}function kN(e,t){const n=typeof e=="object"?e:hb(),i=typeof e=="string"?e:Sc,r=sp(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=l2("firestore");s&&MN(r,...s)}return r}function Dl(e){if(e._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||PN(e),e._firestoreClient}function PN(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new rC(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,NA(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new CN(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new nn(Ie.fromBase64String(t))}catch(n){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new nn(Ie.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:nn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(wl(t,nn._jsonSchema))return nn.fromBase64String(t.bytes)}}nn._jsonSchemaVersion="firestore/bytes/1.0",nn._jsonSchema={type:re("string",nn._jsonSchemaVersion),bytes:re("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Se(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qn._jsonSchemaVersion}}static fromJSON(t){if(wl(t,qn._jsonSchema))return new qn(t.latitude,t.longitude)}}qn._jsonSchemaVersion="firestore/geoPoint/1.0",qn._jsonSchema={type:re("string",qn._jsonSchemaVersion),latitude:re("number"),longitude:re("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Hn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(wl(t,Hn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Hn(t.vectorValues);throw new z(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hn._jsonSchemaVersion="firestore/vectorValue/1.0",Hn._jsonSchema={type:re("string",Hn._jsonSchemaVersion),vectorValues:re("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=/^__.*__$/;class UN{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Sr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Il(t,this.data,n,this.fieldTransforms)}}class OA{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Sr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function VA(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $(40011,{Ac:e})}}class Pp{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Pp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return kc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(VA(this.Ac)&&LN.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class jN{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||_h(t)}Cc(t,n,i,r=!1){return new Pp({Ac:t,methodName:n,Dc:i,path:Se.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ma(e){const t=e._freezeSettings(),n=_h(e._databaseId);return new jN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lp(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);jp("Data must be an object, but it was:",a,i);const l=LA(i,a);let u,h;if(s.merge)u=new rn(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const m=Jd(t,p,n);if(!a.contains(m))throw new z(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);jA(d,m)||d.push(m)}u=new rn(d),h=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=a.fieldTransforms;return new UN(new Le(l),u,h)}class Ah extends bh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ah}}class Up extends bh{_toFieldTransform(t){return new NC(t.path,new nl)}isEqual(t){return t instanceof Up}}function MA(e,t,n,i){const r=e.Cc(1,t,n);jp("Data must be an object, but it was:",r,i);const s=[],a=Le.empty();Ar(i,(u,h)=>{const d=zp(t,u,n);h=qt(h);const p=r.yc(d);if(h instanceof Ah)s.push(d);else{const m=Vl(h,p);m!=null&&(s.push(d),a.set(d,m))}});const l=new rn(s);return new OA(a,l,r.fieldTransforms)}function kA(e,t,n,i,r,s){const a=e.Cc(1,t,n),l=[Jd(t,i,n)],u=[r];if(s.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(Jd(t,s[m])),u.push(s[m+1]);const h=[],d=Le.empty();for(let m=l.length-1;m>=0;--m)if(!jA(h,l[m])){const y=l[m];let x=u[m];x=qt(x);const V=a.yc(y);if(x instanceof Ah)h.push(y);else{const O=Vl(x,V);O!=null&&(h.push(y),d.set(y,O))}}const p=new rn(h);return new OA(d,p,a.fieldTransforms)}function PA(e,t,n,i=!1){return Vl(n,e.Cc(i?4:3,t))}function Vl(e,t){if(UA(e=qt(e)))return jp("Unsupported field value:",t,e),LA(e,t);if(e instanceof bh)return function(i,r){if(!VA(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=Vl(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=qt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return IC(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Pt.fromDate(i);return{timestampValue:xc(r.serializer,s)}}if(i instanceof Pt){const s=new Pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:xc(r.serializer,s)}}if(i instanceof qn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof nn)return{bytesValue:iA(r.serializer,i._byteString)};if(i instanceof Gt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gp(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Hn)return function(a,l){return{mapValue:{fields:{[Db]:{stringValue:Ob},[wc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return dp(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${oh(i)}`)}(e,t)}function LA(e,t){const n={};return wb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ar(e,(i,r)=>{const s=Vl(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function UA(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Pt||e instanceof qn||e instanceof nn||e instanceof Gt||e instanceof bh||e instanceof Hn)}function jp(e,t,n){if(!UA(n)||!Ab(n)){const i=oh(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Jd(e,t,n){if((t=qt(t))instanceof Ol)return t._internalPath;if(typeof t=="string")return zp(e,t);throw kc("Field path arguments must be of type string or ",e,!1,void 0,n)}const zN=new RegExp("[~\\*/\\[\\]]");function zp(e,t,n){if(t.search(zN)>=0)throw kc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ol(...t.split("."))._internalPath}catch{throw kc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function kc(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new z(k.INVALID_ARGUMENT,l+e+u)}function jA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new BN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Bp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BN extends sl{data(){return super.data()}}function Bp(e,t){return typeof t=="string"?zp(e,t):t instanceof Ol?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qp{}class Sh extends qp{}function Ov(e,t,...n){let i=[];t instanceof qp&&i.push(t),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof Fp).length,l=s.filter(u=>u instanceof Hp).length;if(a>1||a>0&&l>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class Hp extends Sh{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Hp(t,n,i)}_apply(t){const n=this._parse(t);return BA(t._query,n),new Xn(t.firestore,t.converter,Fd(t._query,n))}_parse(t){const n=Ma(t.firestore);return function(s,a,l,u,h,d,p){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Pv(p,d);const x=[];for(const V of p)x.push(kv(u,s,V));m={arrayValue:{values:x}}}else m=kv(u,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Pv(p,d),m=PA(l,a,p,d==="in"||d==="not-in");return ie.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Fp extends qp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Fp(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:xn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)BA(a,u),a=Fd(a,u)}(t._query,n),new Xn(t.firestore,t.converter,Fd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gp extends Sh{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Gp(t,n)}_apply(t){const n=function(r,s,a){if(r.startAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new el(s,a)}(t._query,this._field,this._direction);return new Xn(t.firestore,t.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new ls(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}}function Vv(e,t="asc"){const n=t,i=Bp("orderBy",e);return Gp._create(i,n)}class Qp extends Sh{constructor(t,n,i){super(),this.type=t,this._limit=n,this._limitType=i}static _create(t,n,i){return new Qp(t,n,i)}_apply(t){return new Xn(t.firestore,t.converter,Ic(t._query,this._limit,this._limitType))}}function Mv(e){return Qp._create("limit",e,"F")}class Kp extends Sh{constructor(t,n,i){super(),this.type=t,this._docOrFields=n,this._inclusive=i}static _create(t,n,i){return new Kp(t,n,i)}_apply(t){const n=HN(t,this.type,this._docOrFields,this._inclusive);return new Xn(t.firestore,t.converter,function(r,s){return new ls(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(t._query,n))}}function qN(...e){return Kp._create("startAfter",e,!1)}function HN(e,t,n,i){if(n[0]=qt(n[0]),n[0]instanceof sl)return function(s,a,l,u,h){if(!u)throw new z(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const p of Xs(s))if(p.field.isKeyField())d.push(Rc(a,u.key));else{const m=u.data.field(p.field);if(uh(m))throw new z(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const y=p.field.canonicalString();throw new z(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(m)}return new ya(d,h)}(e._query,e.firestore._databaseId,t,n[0]._document,i);{const r=Ma(e.firestore);return function(a,l,u,h,d,p){const m=a.explicitOrderBy;if(d.length>m.length)throw new z(k.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let x=0;x<d.length;x++){const V=d[x];if(m[x].field.isKeyField()){if(typeof V!="string")throw new z(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof V}`);if(!fp(a)&&V.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${V}' contains a slash.`);const O=a.path.child(St.fromString(V));if(!Q.isDocumentKey(O))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);const S=new Q(O);y.push(Rc(l,S))}else{const O=PA(u,h,V);y.push(O)}}return new ya(y,p)}(e._query,e.firestore._databaseId,r,t,n,i)}}function kv(e,t,n){if(typeof(n=qt(n))=="string"){if(n==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fp(t)&&n.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(St.fromString(n));if(!Q.isDocumentKey(i))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Rc(e,new Q(i))}if(n instanceof Gt)return Rc(e,n._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oh(n)}.`)}function Pv(e,t){if(!Array.isArray(e)||e.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function BA(e,t){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class qA{convertValue(t,n="none"){switch(_r(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Jt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(yr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw $(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Ar(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[wc].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>Jt(a.doubleValue));return new Hn(n)}convertGeoPoint(t){return new qn(Jt(t.latitude),Jt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=ch(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Wo(t));default:return null}}convertTimestamp(t){const n=gr(t);return new Pt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=St.fromString(t);gt(cA(i),9688,{name:t});const r=new Jo(i.get(1),i.get(3)),s=new Q(i.popFirst(5));return r.isEqual(n)||Ti(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class FN extends qA{constructor(t){super(),this.firestore=t}convertBytes(t){return new nn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}class zs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class hr extends sl{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new zu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(Bp("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=hr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}hr._jsonSchemaVersion="firestore/documentSnapshot/1.0",hr._jsonSchema={type:re("string",hr._jsonSchemaVersion),bundleSource:re("string","DocumentSnapshot"),bundleName:re("string"),bundle:re("string")};class zu extends hr{data(t={}){return super.data(t)}}class Kr{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new zs(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new zu(this._firestore,this._userDataWriter,i.key,i,new zs(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new zu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new zs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new zu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new zs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:GN(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Kr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function GN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(e){e=je(e,Gt);const t=je(e.firestore,Kn);return ON(Dl(t),e._key).then(n=>HA(t,e,n))}Kr._jsonSchemaVersion="firestore/querySnapshot/1.0",Kr._jsonSchema={type:re("string",Kr._jsonSchemaVersion),bundleSource:re("string","QuerySnapshot"),bundleName:re("string"),bundle:re("string")};class wh extends qA{constructor(t){super(),this.firestore=t}convertBytes(t){return new nn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}function QN(e){e=je(e,Xn);const t=je(e.firestore,Kn),n=Dl(t),i=new wh(t);return zA(e._query),VN(n,e._query).then(r=>new Kr(t,i,e,r))}function jr(e,t,n){e=je(e,Gt);const i=je(e.firestore,Kn),r=Yp(e.converter,t,n);return Rh(i,[Lp(Ma(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,we.none())])}function KN(e,t,n,...i){e=je(e,Gt);const r=je(e.firestore,Kn),s=Ma(r);let a;return a=typeof(t=qt(t))=="string"||t instanceof Ol?kA(s,"updateDoc",e._key,t,n,i):MA(s,"updateDoc",e._key,t),Rh(r,[a.toMutation(e._key,we.exists(!0))])}function YN(e){return Rh(je(e.firestore,Kn),[new gh(e._key,we.none())])}function Lv(e,t){const n=je(e.firestore,Kn),i=he(e),r=Yp(e.converter,t);return Rh(n,[Lp(Ma(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,we.exists(!1))]).then(()=>i)}function $N(e,...t){var u,h,d;e=qt(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||Dv(t[i])||(n=t[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Dv(t[i])){const p=t[i];t[i]=(u=p.next)==null?void 0:u.bind(p),t[i+1]=(h=p.error)==null?void 0:h.bind(p),t[i+2]=(d=p.complete)==null?void 0:d.bind(p)}let s,a,l;if(e instanceof Gt)a=je(e.firestore,Kn),l=hh(e._key.path),s={next:p=>{t[i]&&t[i](HA(a,e,p))},error:t[i+1],complete:t[i+2]};else{const p=je(e,Xn);a=je(p.firestore,Kn),l=p._query;const m=new wh(a);s={next:y=>{t[i]&&t[i](new Kr(a,m,p,y))},error:t[i+1],complete:t[i+2]},zA(e._query)}return function(m,y,x,V){const O=new Mp(V),S=new Dp(y,O,x);return m.asyncQueue.enqueueAndForget(async()=>Cp(await Mc(m),S)),()=>{O.Nu(),m.asyncQueue.enqueueAndForget(async()=>xp(await Mc(m),S))}}(Dl(a),l,r,s)}function Rh(e,t){return function(i,r){const s=new zn;return i.asyncQueue.enqueueAndForget(async()=>yN(await NN(i),r,s)),s.promise}(Dl(e),t)}function HA(e,t,n){const i=n.docs.get(t._key),r=new wh(e);return new hr(e,r,t._key,i,new zs(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN={maxAttempts:5};function mo(e,t){if((e=qt(e)).firestore!==t)throw new z(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=Ma(t)}get(t){const n=mo(t,this._firestore),i=new FN(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return $(24041);const s=r[0];if(s.isFoundDocument())return new sl(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new sl(this._firestore,i,n._key,null,n.converter);throw $(18433,{doc:s})})}set(t,n,i){const r=mo(t,this._firestore),s=Yp(r.converter,n,i),a=Lp(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(t,n,i,...r){const s=mo(t,this._firestore);let a;return a=typeof(n=qt(n))=="string"||n instanceof Ol?kA(this._dataReader,"Transaction.update",s._key,n,i,r):MA(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(t){const n=mo(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN extends ZN{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=mo(t,this._firestore),i=new wh(this._firestore);return super.get(t).then(r=>new hr(this._firestore,i,n._key,r._document,new zs(!1,!1),n.converter))}}function Uv(e,t,n){e=je(e,Kn);const i={...XN,...n};return function(s){if(s.maxAttempts<1)throw new z(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,l){const u=new zn;return s.asyncQueue.enqueueAndForget(async()=>{const h=await DN(s);new IN(s.asyncQueue,h,l,a,u).ju()}),u.promise}(Dl(e),r=>t(new WN(e,r)),i)}function Eu(){return new Up("serverTimestamp")}(function(t,n=!0){(function(r){Na=r})(xa),fa(new Jr("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new Kn(new jI(i.getProvider("auth-internal")),new qI(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),lr(k_,P_,t),lr(k_,P_,"esm2020")})();function FA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JN=FA,GA=new Al("auth","Firebase",FA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new ip("@firebase/auth");function tD(e,...t){Pc.logLevel<=ut.WARN&&Pc.warn(`Auth (${xa}): ${e}`,...t)}function Bu(e,...t){Pc.logLevel<=ut.ERROR&&Pc.error(`Auth (${xa}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(e,...t){throw $p(e,...t)}function Fn(e,...t){return $p(e,...t)}function QA(e,t,n){const i={...JN(),[t]:n};return new Al("auth","Firebase",i).create(t,{appName:e.name})}function pi(e){return QA(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $p(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return GA.create(e,...t)}function W(e,t,...n){if(!e)throw $p(t,...n)}function hi(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Bu(t),new Error(t)}function Ai(e,t){e||hi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function eD(){return jv()==="http:"||jv()==="https:"}function jv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eD()||g2()||"connection"in navigator)?navigator.onLine:!0}function iD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ai(n>t,"Short delay should be less than long delay!"),this.isMobile=d2()||y2()}get(){return nD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(e,t){Ai(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aD=new Ml(3e4,6e4);function wr(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Ii(e,t,n,i,r={}){return YA(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=Sl({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return p2()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&Ca(e.emulatorConfig.host)&&(h.credentials="include"),KA.fetch()(await $A(e,e.config.apiHost,n,l),h)})}async function YA(e,t,n){e._canInitEmulator=!1;const i={...rD,...t};try{const r=new lD(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Tu(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tu(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Tu(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw Tu(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw QA(e,d,h);Nn(e,d)}}catch(r){if(r instanceof Ri)throw r;Nn(e,"network-request-failed",{message:String(r)})}}async function kl(e,t,n,i,r={}){const s=await Ii(e,t,n,i,r);return"mfaPendingCredential"in s&&Nn(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function $A(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?Xp(e.config,r):`${e.config.apiScheme}://${r}`;return sD.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function oD(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Fn(this.auth,"network-request-failed")),aD.get())})}}function Tu(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Fn(e,t,i);return r.customData._tokenResponse=n,r}function zv(e){return e!==void 0&&e.enterprise!==void 0}class uD{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return oD(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cD(e,t){return Ii(e,"GET","/v2/recaptchaConfig",wr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(e,t){return Ii(e,"POST","/v1/accounts:delete",t)}async function Lc(e,t){return Ii(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function fD(e,t=!1){const n=qt(e),i=await n.getIdToken(t),r=Zp(i);W(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ko(Pf(r.auth_time)),issuedAtTime:ko(Pf(r.iat)),expirationTime:ko(Pf(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Pf(e){return Number(e)*1e3}function Zp(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Bu("JWT malformed, contained fewer than 3 sections"),null;try{const r=nb(n);return r?JSON.parse(r):(Bu("Failed to decode base64 JWT payload"),null)}catch(r){return Bu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Bv(e){const t=Zp(e);return W(t,"internal-error"),W(typeof t.exp<"u","internal-error"),W(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Ri&&dD(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function dD({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ko(this.lastLoginAt),this.creationTime=ko(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(e){var p;const t=e.auth,n=await e.getIdToken(),i=await Ea(e,Lc(t,{idToken:n}));W(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(p=r.providerUserInfo)!=null&&p.length?XA(r.providerUserInfo):[],a=gD(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new em(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function pD(e){const t=qt(e);await Uc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function gD(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function XA(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(e,t){const n=await YA(e,{},async()=>{const i=Sl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await $A(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&Ca(e.emulatorConfig.host)&&(u.credentials="include"),KA.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _D(e,t){return Ii(e,"POST","/v2/accounts:revokeToken",wr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){W(t.idToken,"internal-error"),W(typeof t.idToken<"u","internal-error"),W(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Bv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){W(t.length!==0,"internal-error");const n=Bv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await yD(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Ws;return i&&(W(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(W(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(W(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ws,this.toJSON())}_performRefresh(){return hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(e,t){W(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class In{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new mD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new em(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Ea(this,this.stsTokenManager.getToken(this.auth,t));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return fD(this,t)}reload(){return pD(this)}_assign(t){this!==t&&(W(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new In({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Uc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(En(this.auth.app))return Promise.reject(pi(this.auth));const t=await this.getIdToken();return await Ea(this,hD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:x,stsTokenManager:V}=n;W(p&&V,t,"internal-error");const O=Ws.fromJSON(this.name,V);W(typeof p=="string",t,"internal-error"),ki(i,t.name),ki(r,t.name),W(typeof m=="boolean",t,"internal-error"),W(typeof y=="boolean",t,"internal-error"),ki(s,t.name),ki(a,t.name),ki(l,t.name),ki(u,t.name),ki(h,t.name),ki(d,t.name);const S=new In({uid:p,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:y,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:O,createdAt:h,lastLoginAt:d});return x&&Array.isArray(x)&&(S.providerData=x.map(E=>({...E}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(t,n,i=!1){const r=new Ws;r.updateFromServerResponse(n);const s=new In({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Uc(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];W(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?XA(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new Ws;l.updateFromIdToken(i);const u=new In({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new em(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Map;function fi(e){Ai(e instanceof Function,"Expected a class definition");let t=qv.get(e);return t?(Ai(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,qv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}ZA.type="NONE";const Hv=ZA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(e,t,n){return`firebase:${e}:${t}:${n}`}class Js{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=qu(this.userKey,r.apiKey,s),this.fullPersistenceKey=qu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Lc(this.auth,{idToken:t}).catch(()=>{});return n?In._fromGetAccountInfoResponse(this.auth,n,t):null}return In._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Js(fi(Hv),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||fi(Hv);const a=qu(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let p;if(typeof d=="string"){const m=await Lc(t,{idToken:d}).catch(()=>{});if(!m)break;p=await In._fromGetAccountInfoResponse(t,m,d)}else p=In._fromJSON(t,d);h!==s&&(l=p),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Js(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Js(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(eS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(WA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(iS(t))return"Blackberry";if(rS(t))return"Webos";if(JA(t))return"Safari";if((t.includes("chrome/")||tS(t))&&!t.includes("edge/"))return"Chrome";if(nS(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function WA(e=Me()){return/firefox\//i.test(e)}function JA(e=Me()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function tS(e=Me()){return/crios\//i.test(e)}function eS(e=Me()){return/iemobile/i.test(e)}function nS(e=Me()){return/android/i.test(e)}function iS(e=Me()){return/blackberry/i.test(e)}function rS(e=Me()){return/webos/i.test(e)}function Wp(e=Me()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function vD(e=Me()){var t;return Wp(e)&&!!((t=window.navigator)!=null&&t.standalone)}function ED(){return _2()&&document.documentMode===10}function sS(e=Me()){return Wp(e)||nS(e)||rS(e)||iS(e)||/windows phone/i.test(e)||eS(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(e,t=[]){let n;switch(e){case"Browser":n=Fv(Me());break;case"Worker":n=`${Fv(Me())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${xa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(e,t={}){return Ii(e,"GET","/v2/passwordPolicy",wr(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=6;class SD{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??AD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gv(this),this.idTokenSubscription=new Gv(this),this.beforeStateQueue=new TD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=fi(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Js.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Lc(this,{idToken:t}),i=await In._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(En(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Uc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=iD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(En(this.app))return Promise.reject(pi(this));const n=t?qt(t):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&W(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return En(this.app)?Promise.reject(pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return En(this.app)?Promise.reject(pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await bD(this),n=new SD(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Al("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await _D(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&fi(t)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=await Js.create(this,[fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=aS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&tD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Rr(e){return qt(e)}class Gv{constructor(t){this.auth=t,this.observer=null,this.addObserver=R2(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RD(e){Ih=e}function oS(e){return Ih.loadJS(e)}function ID(){return Ih.recaptchaEnterpriseScript}function CD(){return Ih.gapiScript}function xD(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class ND{constructor(){this.enterprise=new DD}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class DD{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const OD="recaptcha-enterprise",lS="NO_RECAPTCHA";class VD{constructor(t){this.type=OD,this.auth=Rr(t)}async verify(t="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{cD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new uD(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(u=>{l(u)})})}function r(s,a,l){const u=window.grecaptcha;zv(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:t}).then(h=>{a(h)}).catch(()=>{a(lS)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ND().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(l=>{if(!n&&zv(window.grecaptcha))r(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=ID();u.length!==0&&(u+=l),oS(u).then(()=>{r(l,s,a)}).catch(h=>{a(h)})}}).catch(l=>{a(l)})})}}async function Qv(e,t,n,i=!1,r=!1){const s=new VD(e);let a;if(r)a=lS;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const l={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function nm(e,t,n,i,r){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Qv(e,t,n,n==="getOobCode");return i(e,a)}else return i(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Qv(e,t,n,n==="getOobCode");return i(e,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(e,t){const n=sp(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Wr(s,t??{}))return r;Nn(r,"already-initialized")}return n.initialize({options:t})}function kD(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(fi);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function PD(e,t,n){const i=Rr(e);W(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=uS(t),{host:a,port:l}=LD(t),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){W(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),W(Wr(h,i.config.emulator)&&Wr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,Ca(a)?(ab(`${s}//${a}${u}`),ob("Auth",!0)):UD()}function uS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function LD(e){const t=uS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Kv(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:Kv(a)}}}function Kv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function UD(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return hi("not implemented")}_getIdTokenResponse(t){return hi("not implemented")}_linkToIdToken(t,n){return hi("not implemented")}_getReauthenticationResolver(t){return hi("not implemented")}}async function jD(e,t){return Ii(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zD(e,t){return kl(e,"POST","/v1/accounts:signInWithPassword",wr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(e,t){return kl(e,"POST","/v1/accounts:signInWithEmailLink",wr(e,t))}async function qD(e,t){return kl(e,"POST","/v1/accounts:signInWithEmailLink",wr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends Jp{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new al(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new al(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nm(t,n,"signInWithPassword",zD);case"emailLink":return BD(t,{email:this._email,oobCode:this._password});default:Nn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nm(t,i,"signUpPassword",jD);case"emailLink":return qD(t,{idToken:n,email:this._email,oobCode:this._password});default:Nn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(e,t){return kl(e,"POST","/v1/accounts:signInWithIdp",wr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD="http://localhost";class ns extends Jp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ns(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Nn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new ns(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return ta(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,ta(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,ta(t,n)}buildRequest(){const t={requestUri:HD,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Sl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GD(e){const t=lo(uo(e)).link,n=t?lo(uo(t)).deep_link_id:null,i=lo(uo(e)).deep_link_id;return(i?lo(uo(i)).link:null)||i||n||t||e}class tg{constructor(t){const n=lo(uo(t)),i=n.apiKey??null,r=n.oobCode??null,s=FD(n.mode??null);W(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=GD(t);try{return new tg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.providerId=ka.PROVIDER_ID}static credential(t,n){return al._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=tg.parseLink(n);return W(i,"argument-error"),al._fromEmailAndCode(t,i.code,i.tenantId)}}ka.PROVIDER_ID="password";ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends cS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Pl{constructor(){super("facebook.com")}static credential(t){return ns._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Hi.credentialFromTaggedObject(t)}static credentialFromError(t){return Hi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Hi.credential(t.oauthAccessToken)}catch{return null}}}Hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Pl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ns._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Fi.credentialFromTaggedObject(t)}static credentialFromError(t){return Fi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Fi.credential(n,i)}catch{return null}}}Fi.GOOGLE_SIGN_IN_METHOD="google.com";Fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Pl{constructor(){super("github.com")}static credential(t){return ns._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gi.credentialFromTaggedObject(t)}static credentialFromError(t){return Gi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gi.credential(t.oauthAccessToken)}catch{return null}}}Gi.GITHUB_SIGN_IN_METHOD="github.com";Gi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Pl{constructor(){super("twitter.com")}static credential(t,n){return ns._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Qi.credentialFromTaggedObject(t)}static credentialFromError(t){return Qi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Qi.credential(n,i)}catch{return null}}}Qi.TWITTER_SIGN_IN_METHOD="twitter.com";Qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(e,t){return kl(e,"POST","/v1/accounts:signUp",wr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await In._fromIdTokenResponse(t,i,r),a=Yv(i);return new is({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=Yv(i);return new is({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function Yv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Ri{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,jc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new jc(t,n,i,r)}}function hS(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?jc._fromErrorAndOperation(e,s,t,i):s})}async function KD(e,t,n=!1){const i=await Ea(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return is._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(e,t,n=!1){const{auth:i}=e;if(En(i.app))return Promise.reject(pi(i));const r="reauthenticate";try{const s=await Ea(e,hS(i,r,t,e),n);W(s.idToken,i,"internal-error");const a=Zp(s.idToken);W(a,i,"internal-error");const{sub:l}=a;return W(e.uid===l,i,"user-mismatch"),is._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Nn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fS(e,t,n=!1){if(En(e.app))return Promise.reject(pi(e));const i="signIn",r=await hS(e,i,t),s=await is._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function $D(e,t){return fS(Rr(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(e){const t=Rr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function XD(e,t,n){if(En(e.app))return Promise.reject(pi(e));const i=Rr(e),a=await nm(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QD).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&dS(e),u}),l=await is._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function ZD(e,t,n){return En(e.app)?Promise.reject(pi(e)):$D(qt(e),ka.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dS(e),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(e,t){return Ii(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(e,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const i=qt(e),s={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},a=await Ea(i,WD(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const l=i.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(e,t){return qt(e).setPersistence(t)}function e4(e,t,n,i){return qt(e).onIdTokenChanged(t,n,i)}function n4(e,t,n){return qt(e).beforeAuthStateChanged(t,n)}function i4(e,t,n,i){return qt(e).onAuthStateChanged(t,n,i)}function r4(e){return qt(e).signOut()}const zc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zc,"1"),this.storage.removeItem(zc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=1e3,a4=10;class pS extends mS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);ED()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,a4):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},s4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}pS.type="LOCAL";const gS=pS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS extends mS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}yS.type="SESSION";const _S=yS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new Ch(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await o4(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ch.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=eg("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return window}function u4(e){Gn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}async function c4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h4(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function f4(){return vS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="firebaseLocalStorageDb",d4=1,Bc="firebaseLocalStorage",TS="fbase_key";class Ll{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xh(e,t){return e.transaction([Bc],t?"readwrite":"readonly").objectStore(Bc)}function m4(){const e=indexedDB.deleteDatabase(ES);return new Ll(e).toPromise()}function im(){const e=indexedDB.open(ES,d4);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Bc,{keyPath:TS})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Bc)?t(i):(i.close(),await m4(),t(await im()))})})}async function $v(e,t,n){const i=xh(e,!0).put({[TS]:t,value:n});return new Ll(i).toPromise()}async function p4(e,t){const n=xh(e,!1).get(t),i=await new Ll(n).toPromise();return i===void 0?null:i.value}function Xv(e,t){const n=xh(e,!0).delete(t);return new Ll(n).toPromise()}const g4=800,y4=3;class bS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await im(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>y4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ch._getInstance(f4()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await c4(),!this.activeServiceWorker)return;this.sender=new l4(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||h4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await im();return await $v(t,zc,"1"),await Xv(t,zc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>$v(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>p4(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=xh(r,!1).getAll();return new Ll(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),g4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bS.type="LOCAL";const _4=bS;new Ml(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(e,t){return t?fi(t):(W(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng extends Jp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ta(t,this._buildIdpRequest())}_linkToIdToken(t,n){return ta(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return ta(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function E4(e){return fS(e.auth,new ng(e),e.bypassAuthState)}function T4(e){const{auth:t,user:n}=e;return W(n,t,"internal-error"),YD(n,new ng(e),e.bypassAuthState)}async function b4(e){const{auth:t,user:n}=e;return W(n,t,"internal-error"),KD(n,new ng(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return E4;case"linkViaPopup":case"linkViaRedirect":return b4;case"reauthViaPopup":case"reauthViaRedirect":return T4;default:Nn(this.auth,"internal-error")}}resolve(t){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=new Ml(2e3,1e4);class Bs extends AS{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Bs.currentPopupAction&&Bs.currentPopupAction.cancel(),Bs.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return W(t,this.auth,"internal-error"),t}async onExecution(){Ai(this.filter.length===1,"Popup operations only handle one event");const t=eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bs.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,A4.get())};t()}}Bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4="pendingRedirect",Hu=new Map;class w4 extends AS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Hu.get(this.auth._key());if(!t){try{const i=await R4(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Hu.set(this.auth._key(),t)}return this.bypassAuthState||Hu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R4(e,t){const n=x4(t),i=C4(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function I4(e,t){Hu.set(e._key(),t)}function C4(e){return fi(e._redirectPersistence)}function x4(e){return qu(S4,e.config.apiKey,e.name)}async function N4(e,t){return await Rr(e)._initializationPromise,SS(e,t,!1)}async function SS(e,t,n=!1){if(En(e.app))return Promise.reject(pi(e));const i=Rr(e),r=v4(i,t),a=await new w4(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=10*60*1e3;class O4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!V4(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!wS(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Fn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=D4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zv(t))}saveEventToCache(t){this.cachedEventUids.add(Zv(t)),this.lastProcessedEventTime=Date.now()}}function Zv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function wS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function V4(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M4(e,t={}){return Ii(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P4=/^https?/;async function L4(e){if(e.config.emulator)return;const{authorizedDomains:t}=await M4(e);for(const n of t)try{if(U4(n))return}catch{}Nn(e,"unauthorized-domain")}function U4(e){const t=tm(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!P4.test(n))return!1;if(k4.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=new Ml(3e4,6e4);function Wv(){const e=Gn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function z4(e){return new Promise((t,n)=>{var r,s,a;function i(){Wv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Wv(),n(Fn(e,"network-request-failed"))},timeout:j4.get()})}if((s=(r=Gn().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=Gn().gapi)!=null&&a.load)i();else{const l=xD("iframefcb");return Gn()[l]=()=>{gapi.load?i():n(Fn(e,"network-request-failed"))},oS(`${CD()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Fu=null,t})}let Fu=null;function B4(e){return Fu=Fu||z4(e),Fu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=new Ml(5e3,15e3),H4="__/auth/iframe",F4="emulator/auth/iframe",G4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Q4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K4(e){const t=e.config;W(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Xp(t,F4):`https://${e.config.authDomain}/${H4}`,i={apiKey:t.apiKey,appName:e.name,v:xa},r=Q4.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Sl(i).slice(1)}`}async function Y4(e){const t=await B4(e),n=Gn().gapi;return W(n,e,"internal-error"),t.open({where:document.body,url:K4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G4,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Fn(e,"network-request-failed"),l=Gn().setTimeout(()=>{s(a)},q4.get());function u(){Gn().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X4=500,Z4=600,W4="_blank",J4="http://localhost";class Jv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tO(e,t,n,i=X4,r=Z4){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...$4,width:i.toString(),height:r.toString(),top:s,left:a},h=Me().toLowerCase();n&&(l=tS(h)?W4:n),WA(h)&&(t=t||J4,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[y,x])=>`${m}${y}=${x},`,"");if(vD(h)&&l!=="_self")return eO(t||"",l),new Jv(null);const p=window.open(t||"",l,d);W(p,e,"popup-blocked");try{p.focus()}catch{}return new Jv(p)}function eO(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO="__/auth/handler",iO="emulator/auth/handler",rO=encodeURIComponent("fac");async function tE(e,t,n,i,r,s){W(e.config.authDomain,e,"auth-domain-config-required"),W(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:xa,eventId:r};if(t instanceof cS){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",w2(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(t instanceof Pl){const d=t.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${rO}=${encodeURIComponent(u)}`:"";return`${sO(e)}?${Sl(l).slice(1)}${h}`}function sO({config:e}){return e.emulator?Xp(e,iO):`https://${e.authDomain}/${nO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="webStorageSupport";class aO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_S,this._completeRedirectFn=SS,this._overrideRedirectResult=I4}async _openPopup(t,n,i,r){var a;Ai((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await tE(t,n,i,tm(),r);return tO(t,s,eg())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await tE(t,n,i,tm(),r);return u4(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ai(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await Y4(t),i=new O4(t);return n.register("authEvent",r=>(W(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Lf,{type:Lf},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[Lf];s!==void 0&&n(!!s),Nn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=L4(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return sS()||JA()||Wp()}}const oO=aO;var eE="@firebase/auth",nE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cO(e){fa(new Jr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aS(e)},h=new wD(i,r,s,u);return kD(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),fa(new Jr("auth-internal",t=>{const n=Rr(t.getProvider("auth").getImmediate());return(i=>new lO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lr(eE,nE,uO(e)),lr(eE,nE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=5*60,fO=sb("authIdTokenMaxAge")||hO;let iE=null;const dO=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>fO)return;const r=n==null?void 0:n.token;iE!==r&&(iE=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function mO(e=hb()){const t=sp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=MD(e,{popupRedirectResolver:oO,persistence:[_4,gS,_S]}),i=sb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=dO(s.toString());n4(n,a,()=>a(n.currentUser)),e4(n,l=>a(l))}}const r=ib("auth");return r&&PD(n,`http://${r}`),n}function pO(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}RD({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=Fn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",pO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cO("Browser");var gO="firebase",yO="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(gO,yO,"app");const _O={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},RS=cb(_O),ee=kN(RS),Pr=mO(RS);t4(Pr,gS);const vO=({auth:e})=>{const[t,n]=B.useState(!1),[i,r]=B.useState(""),[s,a]=B.useState(""),[l,u]=B.useState(""),[h,d]=B.useState(""),p=async y=>{if(y.preventDefault(),d(""),t){if(!l.trim()){d("Пожалуйста, введите имя.");return}try{const x=await XD(e,i,s);await JD(x.user,{displayName:l})}catch(x){d(m(x.code))}}else try{await ZD(e,i,s)}catch(x){d(m(x.code))}},m=y=>{switch(y){case"auth/invalid-email":return"Неверный формат электронной почты.";case"auth/user-not-found":case"auth/wrong-password":return"Неверный email или пароль.";case"auth/email-already-in-use":return"Этот email уже зарегистрирован.";case"auth/weak-password":return"Пароль слишком слабый. Используйте не менее 6 символов.";default:return"Произошла ошибка. Пожалуйста, попробуйте еще раз."}};return _.jsxs("div",{className:"space-y-4",children:[_.jsxs("form",{onSubmit:p,className:"space-y-4",children:[t&&_.jsx("input",{type:"text",value:l,onChange:y=>u(y.target.value),placeholder:"Ваше имя",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),_.jsx("input",{type:"email",value:i,onChange:y=>r(y.target.value),placeholder:"Email",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),_.jsx("input",{type:"password",value:s,onChange:y=>a(y.target.value),placeholder:"Пароль",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),h&&_.jsx("p",{className:"text-red-500 text-sm text-center",children:h}),_.jsx("button",{type:"submit",className:"w-full py-3 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-transform hover:scale-105",children:t?"Зарегистрироваться":"Войти"})]}),_.jsx("div",{className:"flex items-center justify-center",children:_.jsx("button",{onClick:()=>{n(!t),d("")},className:"text-sm text-accent hover:underline",children:t?"У меня уже есть аккаунт":"Создать новый аккаунт"})})]})},EO=({auth:e})=>_.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main p-4",children:_.jsxs("div",{className:"w-full max-w-sm text-center",children:[_.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Добро пожаловать"}),_.jsx("p",{className:"text-text-main/70 mb-8",children:"Войдите или создайте аккаунт, чтобы продолжить."}),_.jsx("div",{className:"bg-component-bg p-6 rounded-2xl border border-border-color shadow-lg",children:_.jsx(vO,{auth:e})})]})}),IS=({className:e=""})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:_.jsx("path",{d:"m9 18 6-6-6-6"})}),CS=({className:e=""})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[_.jsx("path",{d:"M19 12H5"}),_.jsx("polyline",{points:"12 19 5 12 12 5"})]}),xS=({className:e="",filled:t=!1})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[_.jsx("circle",{cx:"11",cy:"11",r:"8"}),_.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),TO=({className:e=""})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[_.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),_.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),bO=({className:e=""})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:_.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),ig=({className:e="",filled:t=!1})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:_.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),NS=({className:e=""})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[_.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),_.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),DS=({className:e="",filled:t=!1})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:_.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),AO=({className:e="",filled:t=!1})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[_.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),_.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),SO=({className:e="",filled:t=!1})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[_.jsx("path",{d:"M4 22h16"}),_.jsx("path",{d:"M7 22V2h10v20"}),_.jsx("path",{d:"M7 12h4"})]}),wO=({className:e=""})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:_.jsx("path",{d:"m15 18-6-6 6-6"})}),RO=({className:e=""})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:_.jsx("path",{d:"m9 18 6-6-6-6"})}),IO=({className:e=""})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[_.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),_.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),CO=({className:e=""})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[_.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),_.jsx("polyline",{points:"16 17 21 12 16 7"}),_.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Si=({title:e,onBack:t})=>_.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[t&&_.jsx("button",{onClick:t,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:_.jsx(CS,{})}),_.jsx("h1",{className:"text-xl font-bold",children:e})]}),rg=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>_.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:e.length>0?e.map((r,s)=>_.jsx("div",{onClick:()=>t(r),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${s*50}ms`},children:_.jsxs("div",{className:"relative transition-all duration-300",children:[_.jsx("button",{onClick:a=>{a.stopPropagation(),i(r.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(r.id)?"text-accent":""}`,children:_.jsx(DS,{filled:n.includes(r.id),width:"20",height:"20"})}),_.jsx("img",{src:`/${r.coverUrl}`,alt:r.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),_.jsx("h2",{className:"mt-2 font-semibold text-xs truncate",children:r.title})]})},r.id)):_.jsx("p",{className:"col-span-3 text-center opacity-70",children:"Ничего не найдено."})}),xO=e=>{const t={},n=[];return e.forEach(i=>{t[i.id]={...i,replies:[]}}),e.forEach(i=>{i.replyTo&&t[i.replyTo]?t[i.replyTo].replies.push(t[i.id]):n.push(t[i.id])}),n},OS=Ew.memo(({comment:e,onReply:t,onLike:n,onEdit:i,onDelete:r,onUpdate:s,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:d,replyingTo:p,replyText:m,setReplyText:y,onCommentSubmit:x})=>{const V=O=>O!=null&&O.toDate?O.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return _.jsxs("div",{className:"flex flex-col",children:[_.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[_.jsxs("div",{className:"flex justify-between items-center text-xs opacity-70 mb-1",children:[_.jsx("p",{className:"font-bold text-sm text-text-main opacity-100",children:e.userName}),_.jsx("span",{children:V(e.timestamp)})]}),u===e.id?_.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[_.jsx("input",{type:"text",value:h,autoFocus:!0,onChange:O=>d(O.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),_.jsx("button",{onClick:()=>s(e.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),_.jsx("button",{onClick:()=>i(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):_.jsx("p",{className:"text-sm mt-1 opacity-90",children:e.text}),_.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[_.jsxs("button",{onClick:()=>n(e.id),className:"flex items-center gap-1 text-xs text-gray-500",children:[_.jsx(ig,{filled:e.userHasLiked,className:`w-4 h-4 ${e.userHasLiked?"text-accent":""}`}),_.jsx("span",{children:e.likeCount||0})]}),_.jsx("button",{onClick:()=>t(e.id),className:"text-xs text-gray-500",children:"Ответить"}),(l===e.userId||a)&&_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:()=>i(e),className:"text-xs text-gray-500",children:"Редактировать"}),_.jsx("button",{onClick:()=>r(e.id),className:"text-xs text-red-500",children:"Удалить"})]})]})]}),p===e.id&&_.jsxs("form",{onSubmit:O=>x(O,e.id),className:"flex items-center gap-2 mt-2",children:[_.jsx("input",{type:"text",value:m,autoFocus:!0,onChange:O=>y(O.target.value),placeholder:`Ответ для ${e.userName}...`,className:"w-full bg-background border border-border-color rounded-lg py-1 px-3 text-sm"}),_.jsx("button",{type:"submit",className:"p-1.5 rounded-full bg-accent text-white",children:_.jsx(NS,{className:"w-4 h-4"})})]}),e.replies&&e.replies.length>0&&_.jsx("div",{className:"mt-2 space-y-2 border-l-2 border-border-color pl-2",children:e.replies.map(O=>_.jsx(OS,{comment:O,onReply:t,onLike:n,onEdit:i,onDelete:r,onUpdate:s,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:d,replyingTo:p,replyText:m,setReplyText:y,onCommentSubmit:x},O.id))})]})}),sg=({onClose:e,onSelectPlan:t})=>{const n=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return _.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:_.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[_.jsx(bO,{className:"mx-auto mb-4 text-accent"}),_.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),_.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),_.jsx("div",{className:"space-y-3",children:n.map(i=>_.jsxs("button",{onClick:()=>t(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[_.jsx("p",{className:"font-bold",children:i.name}),_.jsxs("p",{className:"text-sm",children:[i.price," ₽"]})]},i.duration))}),_.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},ag=({onClose:e,onSelectMethod:t,plan:n})=>_.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:_.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[_.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),_.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("button",{onClick:()=>t("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[_.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),_.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),_.jsxs("button",{onClick:()=>t("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[_.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),_.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]}),_.jsxs("button",{onClick:()=>t("boosty"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[_.jsx("p",{className:"font-bold",children:"🧡 Оплатить через Boosty"}),_.jsx("p",{className:"text-sm opacity-70",children:"Автоматическая активация через Telegram"})]}),_.jsx("div",{className:"text-center pt-2",children:_.jsx("button",{onClick:()=>t("boosty"),className:"text-sm text-accent hover:underline",children:"Уже есть подписка? Синхронизировать аккаунт"})})]}),_.jsx("button",{onClick:e,className:"w-full py-3 mt-6 rounded-lg border border-border-color hover:bg-white/5 transition-colors",children:"Назад"})]})}),NO=({activeTab:e,setActiveTab:t})=>{const n=[{id:"library",label:"Библиотека",icon:SO},{id:"search",label:"Поиск",icon:xS},{id:"bookmarks",label:"Закладки",icon:DS},{id:"profile",label:"Профиль",icon:AO}];return _.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:_.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>_.jsxs("button",{onClick:()=>t(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===i.id?"text-accent":"text-text-main opacity-60"}`,children:[_.jsx(i.icon,{filled:e===i.id}),_.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},DO=({onReadMore:e})=>{const[t,n]=B.useState([]),[i,r]=B.useState(0);B.useEffect(()=>{fetch("/data/news.json").then(u=>u.json()).then(n).catch(u=>console.error("Failed to fetch news",u))},[]);const s=()=>r(u=>(u+1)%t.length),a=()=>r(u=>(u-1+t.length)%t.length);if(t.length===0)return null;const l=t[i];return _.jsx("div",{className:"p-4",children:_.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[_.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h3",{className:"font-bold text-text-main",children:l.title}),_.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),_.jsx("button",{onClick:()=>e(l),className:"text-sm font-bold text-accent mt-1",children:"Читать далее"})]}),_.jsxs("div",{className:"flex flex-col",children:[_.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:_.jsx(wO,{className:"w-5 h-5"})}),_.jsx("button",{onClick:s,className:"p-1 rounded-full hover:bg-background",children:_.jsx(RO,{className:"w-5 h-5"})})]})]})})},OO=({newsItem:e,onClose:t})=>_.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:_.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main",onClick:n=>n.stopPropagation(),children:[_.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title}),_.jsx("p",{className:"whitespace-pre-wrap opacity-80",children:e.fullText}),_.jsx("button",{onClick:t,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})}),VO=()=>_.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main",children:[_.jsx(ig,{className:"animate-pulse-heart text-accent",filled:!0}),_.jsx("p",{className:"mt-4 text-lg opacity-70",children:"Загрузка..."})]}),MO=({novel:e,onSelectChapter:t,onGenreSelect:n,subscription:i,botUsername:r,userId:s,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:h})=>{if(!e)return _.jsxs("div",{children:[_.jsx(Si,{title:"Загрузка...",onBack:h}),_.jsx("div",{className:"p-4 text-center",children:"Загрузка данных о новелле..."})]});const[d,p]=B.useState(!1),[m,y]=B.useState(null),[x,V]=B.useState("newest"),[O,S]=B.useState(!1),E=B.useRef(null),[R,D]=B.useState(!1),U=Array.isArray(e.genres)?e.genres:[],H=i&&i.expires_at&&typeof i.expires_at.toDate=="function"&&i.expires_at.toDate()>new Date,b=B.useMemo(()=>u&&e&&u[e.id]?u[e.id].chapterId:null,[u,e]);B.useEffect(()=>{E.current&&setTimeout(()=>{E.current&&D(E.current.scrollHeight>E.current.clientHeight)},100)},[e.description]);const v=B.useMemo(()=>{if(!Array.isArray(a))return[];const T=[...a];return x==="newest"?T.reverse():a},[a,x]),A=T=>{!H&&T.isPaid?p(!0):t(T)},w=()=>{if(b){const T=a.find(yt=>yt.id===b);T&&t(T)}},I=T=>y(T),C=async T=>{var Ht;const yt=(Ht=window.Telegram)==null?void 0:Ht.WebApp;if(!yt||!s||!m){console.error("Telegram Web App, userId, or selectedPlan is not available."),yt&&yt.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}yt.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не реагирует после того, как вы выбрали тариф, не волнуйтесь! Попробуйте отправить команду /start еще раз.",async j=>{if(!j)return;const K=he(ee,"users",s);try{await jr(K,{pendingSubscription:{...m,method:T,date:new Date().toISOString()}},{merge:!0}),yt.openTelegramLink(`https://t.me/${r}?start=${s}`),yt.close()}catch(Y){console.error("Ошибка записи в Firebase:",Y),yt.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};return _.jsxs("div",{className:"text-text-main",children:[_.jsx(Si,{title:e.title,onBack:h}),_.jsxs("div",{className:"relative h-64",children:[_.jsx("img",{src:`/${e.coverUrl}`,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),_.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),_.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[_.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:e.title}),_.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:e.author})]})]}),_.jsxs("div",{className:"p-4",children:[_.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:U.map(T=>{const Ht=`
            text-xs font-semibold px-3 py-1 rounded-full transition-colors 
            duration-200 bg-component-bg border hover:bg-border-color
            ${T==="16+"||T==="18+"?"border-genre-highlight-border text-genre-highlight-text":"border-border-color text-text-main"}
        `;return _.jsx("button",{onClick:()=>n(T),className:Ht,children:T},T)})}),_.jsx("div",{ref:E,className:`relative overflow-hidden transition-all duration-500 ${O?"max-h-full":"max-h-24"}`,children:_.jsx("div",{className:"text-sm mb-2 opacity-80 font-body prose",dangerouslySetInnerHTML:{__html:e.description}})}),R&&_.jsx("div",{className:"text-right",children:_.jsx("button",{onClick:()=>S(!O),className:"text-sm font-semibold text-accent mb-4",children:O?"Скрыть":"Читать полностью..."})}),b&&_.jsxs("button",{onClick:w,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",b,")"]}),_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),_.jsx("button",{onClick:()=>V(T=>T==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:x==="newest"?"Сначала новые":"Сначала старые"})]}),H&&_.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",i.expires_at.toDate().toLocaleDateString()]}),l?_.jsx("p",{children:"Загрузка глав..."}):_.jsx("div",{className:"flex flex-col gap-3",children:v.map(T=>{const yt=!H&&T.isPaid,Ht=b===T.id;return _.jsxs("div",{onClick:()=>A(T),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${yt?"opacity-70":""}`,children:[_.jsxs("div",{className:"flex items-center gap-3",children:[Ht&&_.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),_.jsx("p",{className:"font-semibold",children:T.title})]}),yt?_.jsx(TO,{}):_.jsx(IS,{})]},T.id)})}),d&&_.jsx(sg,{onClose:()=>p(!1),onSelectPlan:I}),m&&_.jsx(ag,{onClose:()=>y(null),onSelectMethod:C,plan:m})]})]})},kO=({chapter:e,novel:t,fontSize:n,onFontSizeChange:i,userId:r,userName:s,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,botUsername:d,onBack:p,isUserAdmin:m})=>{if(!t||!e)return _.jsxs("div",{children:[_.jsx(Si,{title:"Загрузка...",onBack:p}),_.jsx("div",{className:"p-4 text-center",children:"Подготовка главы..."})]});const[y,x]=B.useState([]),[V,O]=B.useState(null),[S,E]=B.useState(!0),[R,D]=B.useState(!1),[U,H]=B.useState(""),[b,v]=B.useState(null),[A,w]=B.useState(""),[I,C]=B.useState(null),[T,yt]=B.useState(""),[Ht,j]=B.useState(0),[K,Y]=B.useState(!1),[_t,ft]=B.useState(!1),[hn,ae]=B.useState(!1),[Ot,_e]=B.useState(!1),[Ct,hs]=B.useState(null),[Ye,Zn]=B.useState(""),[Wn,Sn]=B.useState(!0),fn=h&&h.expires_at&&typeof h.expires_at.toDate=="function"&&h.expires_at.toDate()>new Date,$e=B.useMemo(()=>he(ee,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]),dn=B.useMemo(()=>Iv(ee,`chapters_metadata/${t.id}_${e.id}/comments`),[t.id,e.id]),On=B.useCallback(async()=>{if(!(R||!S)){D(!0);try{let G;V?G=Ov(dn,Vv("timestamp","desc"),qN(V),Mv(20)):G=Ov(dn,Vv("timestamp","desc"),Mv(20));const et=await QN(G),nt=et.docs.map(dt=>({id:dt.id,...dt.data()}));let rt=nt;r&&nt.length>0&&(rt=await Promise.all(nt.map(async dt=>{const Xe=he(ee,`chapters_metadata/${t.id}_${e.id}/comments/${dt.id}/likes`,r),xi=await Lr(Xe);return{...dt,userHasLiked:xi.exists()}}))),x(dt=>[...dt,...rt]);const Mt=et.docs[et.docs.length-1];O(Mt),et.docs.length<20&&E(!1)}catch(G){console.error("Ошибка загрузки комментариев: ",G)}finally{D(!1)}}},[R,S,V,dn,r,t.id,e.id]);B.useEffect(()=>{x([]),O(null),E(!0),D(!1),(async()=>{try{const et=await Lr($e);if(j(et.exists()&&et.data().likeCount||0),r){const nt=he(ee,`chapters_metadata/${t.id}_${e.id}/likes`,r),rt=await Lr(nt);Y(rt.exists())}else Y(!1);await On()}catch(et){console.error("Ошибка загрузки данных главы:",et)}})()},[$e,r,t.id,e.id]),B.useEffect(()=>{(async()=>{if(Sn(!0),Zn(""),e.isPaid&&!fn){Sn(!1),Zn(`### 🔒 Для доступа к этой главе необходима подписка.

Пожалуйста, оформите подписку в разделе "Профиль", чтобы продолжить чтение.`);return}try{const et=he(ee,"chapter_content",`${t.id}-${e.id}`),nt=await Lr(et);nt.exists()?Zn(nt.data().content):Zn(`## Ошибка

Не удалось загрузить текст главы. Пожалуйста, попробуйте позже.`)}catch(et){console.error("Ошибка загрузки главы:",et),Zn(`## Ошибка

Произошла ошибка при загрузке. Проверьте ваше интернет-соединение.`)}finally{Sn(!1)}})()},[t.id,e.id,e.isPaid,fn]);const Ci=B.useCallback(async(G,et=null)=>{G.preventDefault();const nt=et?T:U;if(!(!nt.trim()||!r))try{await jr($e,{},{merge:!0});const rt={userId:r,userName:s||"Аноним",text:nt,timestamp:Eu(),likeCount:0,novelTitle:t.title,chapterTitle:e.title};let Mt=null;if(et){rt.replyTo=et;const xi=await Lr(he(dn,et));xi.exists()&&(Mt=xi.data().userId)}const dt=await Lv(dn,rt);x(xi=>[{...rt,id:dt.id,userHasLiked:!1,timestamp:new Date},...xi]);const Xe=Iv(ee,"notifications");await Lv(Xe,{...rt,processed:!1,createdAt:Eu(),replyToUid:Mt}),et?(C(null),yt("")):H("")}catch(rt){console.error("Ошибка добавления комментария:",rt)}},[r,s,U,T,$e,t.id,e.id,t.title,e.title,dn]),fs=B.useCallback(async G=>{if(!r)return;const et=he(ee,`chapters_metadata/${t.id}_${e.id}/comments`,G),nt=he(ee,`chapters_metadata/${t.id}_${e.id}/comments/${G}/likes`,r);x(rt=>rt.map(Mt=>{if(Mt.id===G){const dt=Mt.userHasLiked?(Mt.likeCount||1)-1:(Mt.likeCount||0)+1;return{...Mt,userHasLiked:!Mt.userHasLiked,likeCount:dt}}return Mt}));try{await Uv(ee,async rt=>{const Mt=await rt.get(nt),dt=await rt.get(et);if(!dt.exists())return;const Xe=dt.data().likeCount||0;Mt.exists()?(rt.delete(nt),rt.update(et,{likeCount:Math.max(0,Xe-1)})):(rt.set(nt,{timestamp:Eu()}),rt.update(et,{likeCount:Xe+1}))})}catch(rt){console.error("Ошибка при обновлении лайка комментария:",rt),x(Mt=>Mt.map(dt=>{if(dt.id===G){const Xe=dt.userHasLiked?(dt.likeCount||0)+1:(dt.likeCount||1)-1;return{...dt,userHasLiked:!dt.userHasLiked,likeCount:Xe}}return dt}))}},[r,t.id,e.id]),Pa=B.useCallback(G=>{G?(v(G.id),w(G.text)):(v(null),w(""))},[]),La=B.useCallback(async G=>{if(!A.trim())return;const et=he(ee,`chapters_metadata/${t.id}_${e.id}/comments`,G);await KN(et,{text:A}),x(nt=>nt.map(rt=>rt.id===G?{...rt,text:A}:rt)),v(null),w("")},[A,t.id,e.id]),ds=B.useCallback(async G=>{const et=he(ee,`chapters_metadata/${t.id}_${e.id}/comments`,G);await YN(et),x(nt=>nt.filter(rt=>rt.id!==G))},[t.id,e.id]),X=B.useCallback(G=>{C(et=>et===G?null:G),yt("")},[]),it=async()=>{if(!r)return;const G=K;Y(!G),j(nt=>G?nt-1:nt+1);const et=he(ee,`chapters_metadata/${t.id}_${e.id}/likes`,r);try{await Uv(ee,async nt=>{var Xe;const rt=await nt.get(et),dt=((Xe=(await nt.get($e)).data())==null?void 0:Xe.likeCount)||0;rt.exists()?(nt.delete(et),nt.set($e,{likeCount:Math.max(0,dt-1)},{merge:!0})):(nt.set(et,{timestamp:Eu()}),nt.set($e,{likeCount:dt+1},{merge:!0}))})}catch(nt){console.error("Ошибка при обновлении лайка:",nt),Y(G),j(rt=>G?rt+1:rt-1)}},Xt=G=>{G&&(!fn&&G.isPaid?(ft(!1),_e(!0)):(l(G),ft(!1)))},Ut=G=>{hs(G),_e(!1)},Be=async G=>{var nt;const et=(nt=window.Telegram)==null?void 0:nt.WebApp;et&&r&&Ct&&et.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async rt=>{if(rt){const Mt=he(ee,"users",r);try{await jr(Mt,{pendingSubscription:{...Ct,method:G,date:new Date().toISOString()}},{merge:!0}),et.openTelegramLink(`https://t.me/${d}?start=${r}`),et.close()}catch(dt){console.error("Ошибка записи в Firebase:",dt),et.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})},ve=u.findIndex(G=>G.id===e.id),Et=u[ve-1],Vt=u[ve+1],Jn=G=>window.marked?`<div class="prose">${window.marked.parse(G)}</div>`:G,Ul=B.useMemo(()=>[...y].sort((G,et)=>{var Mt,dt;const nt=(Mt=G.timestamp)!=null&&Mt.toDate?G.timestamp.toDate().getTime():0,rt=(dt=et.timestamp)!=null&&dt.toDate?et.timestamp.toDate().getTime():0;return nt-rt}),[y]);return _.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[_.jsx(Si,{title:t.title,onBack:p}),_.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[_.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:e.title}),_.jsx("div",{className:`whitespace-normal leading-relaxed ${a}`,style:{fontSize:`${n}px`},dangerouslySetInnerHTML:{__html:Wn?'<p class="text-center">Загрузка текста главы...</p>':Jn(Ye)}}),_.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"╚══ ≪ °❈° ≫ ══╝"}),_.jsxs("div",{className:"border-t border-border-color pt-8",children:[_.jsx("div",{className:"flex items-center gap-4 mb-8",children:_.jsxs("button",{onClick:it,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[_.jsx(ig,{filled:K,className:K?"text-accent":""}),_.jsx("span",{className:"font-bold text-lg",children:Ht})]})}),_.jsx("h3",{className:"text-xl font-bold mb-4",children:"Комментарии"}),_.jsxs("div",{className:"space-y-4 mb-6",children:[y.length>0?xO(Ul).map(G=>_.jsx(OS,{comment:G,onReply:X,onLike:fs,onEdit:Pa,onDelete:ds,onUpdate:La,isUserAdmin:m,currentUserId:r,editingCommentId:b,editingText:A,setEditingText:w,replyingTo:I,replyText:T,setReplyText:yt,onCommentSubmit:Ci},G.id)):!R&&_.jsx("p",{className:"opacity-70 text-sm",children:"Комментариев пока нет. Будьте первым!"}),R&&_.jsx("p",{className:"text-center opacity-70",children:"Загрузка комментариев..."}),S&&!R&&y.length>0&&_.jsx("div",{className:"text-center pt-4",children:_.jsx("button",{onClick:On,disabled:R,className:"text-accent hover:underline font-semibold px-4 py-2 rounded-lg disabled:opacity-50",children:R?"Загрузка...":"Загрузить ещё"})})]}),_.jsxs("form",{onSubmit:G=>Ci(G,null),className:"flex items-center gap-2",children:[_.jsx("input",{type:"text",value:U,onChange:G=>H(G.target.value),placeholder:"Написать комментарий...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),_.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:_.jsx(NS,{className:"w-5 h-5"})})]})]})]}),_.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[_.jsx("button",{onClick:()=>Xt(Et),disabled:!Et,className:"p-2 disabled:opacity-50",children:_.jsx(CS,{})}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>ft(!0),className:"px-4 py-2 rounded-lg bg-background",children:"Оглавление"}),_.jsx("button",{onClick:()=>ae(!0),className:"p-2 rounded-lg bg-background",children:_.jsx(IO,{})})]}),_.jsx("button",{onClick:()=>Xt(Vt),disabled:!Vt,className:"p-2 disabled:opacity-50",children:_.jsx(IS,{className:"opacity-100"})})]}),_t&&_.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>ft(!1),children:_.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:G=>G.stopPropagation(),children:[_.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:"Главы"}),_.jsx("div",{className:"overflow-y-auto",children:_.jsx("div",{className:"flex flex-col gap-2",children:u.map(G=>_.jsx("button",{onClick:()=>Xt(G),className:`p-2 text-left rounded-md ${G.id===e.id?"bg-accent text-white":"bg-background"}`,children:G.title},G.id))})})]})}),hn&&_.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>ae(!1),children:_.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:G=>G.stopPropagation(),children:[_.jsx("h3",{className:"font-bold text-lg mb-4",children:"Настройки чтения"}),_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("span",{children:"Размер текста"}),_.jsxs("div",{className:"w-28 h-12 rounded-full bg-background flex items-center justify-around border border-border-color",children:[_.jsx("button",{onClick:()=>i(-1),className:"text-2xl font-bold",children:"-"}),_.jsx("button",{onClick:()=>i(1),className:"text-2xl font-bold",children:"+"})]})]})]})}),Ot&&_.jsx(sg,{onClose:()=>_e(!1),onSelectPlan:Ut}),Ct&&_.jsx(ag,{onClose:()=>hs(null),onSelectMethod:Be,plan:Ct})]})},PO=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>_.jsxs("div",{children:[_.jsx(Si,{title:"Закладки"}),_.jsx(rg,{novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]}),LO=({user:e,subscription:t,onGetSubscriptionClick:n,userId:i,auth:r,onThemeToggle:s,currentTheme:a})=>{const l=()=>{r4(r).catch(m=>{console.error("Ошибка выхода:",m)})},u=()=>{i&&navigator.clipboard.writeText(i).then(()=>console.log("Firebase UID скопирован в буфер обмена")).catch(m=>console.error("Не удалось скопировать UID: ",m))},d=t&&t.expires_at&&typeof t.expires_at.toDate=="function"?t.expires_at.toDate():null,p=d&&d>new Date;return _.jsxs("div",{children:[_.jsx(Si,{title:"Профиль"}),_.jsx("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:_.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_.jsxs("div",{children:[_.jsx("p",{className:"font-bold text-lg",children:(e==null?void 0:e.displayName)||"Аноним"}),_.jsx("p",{className:"text-sm text-text-main/70",children:e==null?void 0:e.email})]}),_.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-background transition-colors",children:_.jsx(CO,{})})]})}),_.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[_.jsx("h3",{className:"font-bold mb-2",children:"Настройки"}),_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("span",{children:"Тёмная тема"}),_.jsx("button",{onClick:s,className:"w-14 h-7 rounded-full bg-background flex items-center transition-colors p-1",children:_.jsx("div",{className:`w-5 h-5 rounded-full bg-accent shadow-md transform transition-transform ${a==="dark"?"translate-x-7":""}`})})]})]}),_.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[_.jsx("h3",{className:"font-bold mb-2",children:"Подписка"}),p?_.jsxs("div",{children:[_.jsx("p",{className:"text-green-500",children:"Активна"}),_.jsxs("p",{className:"text-sm opacity-70",children:["Заканчивается: ",d.toLocaleDateString()]})]}):_.jsxs("div",{children:[_.jsx("p",{className:"text-red-500",children:"Неактивна"}),_.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Оформите подписку, чтобы получить доступ ко всем платным главам."}),_.jsx("button",{onClick:n,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:"Оформить подписку"})]})]}),_.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4",children:[_.jsx("h3",{className:"font-bold mb-2",children:"Ваш ID для привязки"}),_.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Этот ID нужен для связи вашего аккаунта с Telegram-ботом. Например, после подписки на Boosty."}),_.jsx("div",{className:"bg-background p-2 rounded-md text-xs break-all mb-3",children:_.jsx("code",{children:i||"Загрузка..."})}),_.jsx("button",{onClick:u,disabled:!i,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold transition-all hover:scale-105 disabled:opacity-50",children:"Копировать ID"})]})]})},UO=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>{const[r,s]=B.useState(""),a=B.useMemo(()=>e.filter(l=>l.title.toLowerCase().includes(r.toLowerCase())),[e,r]);return _.jsxs("div",{children:[_.jsx(Si,{title:"Поиск"}),_.jsx("div",{className:"p-4",children:_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:_.jsx(xS,{className:"text-text-main opacity-50"})}),_.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:r,onChange:l=>s(l.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent"})]})}),r&&a.length===0?_.jsx("p",{className:"text-center text-text-main opacity-70 mt-8",children:"Ничего не найдено"}):_.jsx(rg,{novels:a,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]})};function jO(){const[e,t]=B.useState(localStorage.getItem("theme")||"light"),[n,i]=B.useState(16),[r,s]=B.useState("font-sans"),[a,l]=B.useState("list"),[u,h]=B.useState("library"),[d,p]=B.useState([]),[m,y]=B.useState(null),[x,V]=B.useState(null),[O,S]=B.useState(null),[E,R]=B.useState(null),[D,U]=B.useState(null),[H,b]=B.useState(!0),[v,A]=B.useState(!1),[w,I]=B.useState([]),[C,T]=B.useState(!0),[yt,Ht]=B.useState(null),[j,K]=B.useState([]),[Y,_t]=B.useState(!1),[ft,hn]=B.useState(null),[ae,Ot]=B.useState(null),_e="tenebrisverbot",Ct=D==null?void 0:D.uid;B.useEffect(()=>{const X=window.document.documentElement;e==="dark"?X.classList.add("dark"):X.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const hs=()=>{t(X=>X==="light"?"dark":"light")},Ye=B.useCallback(async X=>{if(Ct){const it=he(ee,"users",Ct);try{await jr(it,X,{merge:!0})}catch(Xt){console.error("Не удалось обновить данные пользователя:",Xt)}}},[Ct]),Zn=B.useCallback(X=>{i(it=>{const Xt=Math.max(12,Math.min(32,it+X));return Ye({settings:{fontSize:Xt,fontClass:r}}),Xt})},[r,Ye]);B.useEffect(()=>{let X=()=>{},it=!0;const Xt=i4(Pr,async Ut=>{if(X(),Ut){if(!it)return;U(Ut);const Be=await Ut.getIdTokenResult();A(!!Be.claims.admin);const ve=he(ee,"users",Ut.uid),Et=await Lr(ve);if(it)if(Et.exists()){const Vt=Et.data();Ht(Vt.lastRead||null),K(Vt.bookmarks||[])}else jr(ve,{bookmarks:[],lastRead:{}}),Ht(null),K([]);X=$N(ve,Vt=>{var Jn;it&&R(((Jn=Vt.data())==null?void 0:Jn.subscription)||null)}),b(!1)}else{if(!it)return;U(null),A(!1),R(null),Ht(null),K([]),b(!1)}});return N4(Pr).catch(Ut=>{console.error("Ошибка при обработке входа через Telegram:",Ut)}),fetch("/data/novels.json").then(Ut=>Ut.json()).then(Ut=>{it&&p(Ut.novels)}).catch(Ut=>console.error("Ошибка загрузки новелл:",Ut)),()=>{it=!1,Xt(),X()}},[]),B.useEffect(()=>{if(!m){I([]);return}(async()=>{T(!0);try{const it=he(ee,"chapter_info",m.id.toString()),Xt=await Lr(it);if(Xt.exists()&&Xt.data()){const Be=Xt.data().chapters||{},ve=Object.keys(Be).map(Et=>({id:parseInt(Et),title:`Глава ${Et}`,isPaid:Be[Et].isPaid||!1})).sort((Et,Vt)=>Et.id-Vt.id);I(ve)}else console.log("Документ с главами не найден в chapter_info!"),I([])}catch(it){console.error("Ошибка загрузки глав из Firebase:",it),I([])}finally{T(!1)}})()},[m]);const Wn=B.useCallback(()=>{a==="reader"?(l("details"),V(null)):a==="details"&&(l("list"),S(null),y(null))},[a]);B.useEffect(()=>{var it;const X=(it=window.Telegram)==null?void 0:it.WebApp;if(X)return X.ready(),X.expand(),X.onEvent("backButtonClicked",Wn),a==="list"?X.BackButton.hide():X.BackButton.show(),()=>X.offEvent("backButtonClicked",Wn)},[a,Wn]),B.useEffect(()=>{var it;const X=(it=window.Telegram)==null?void 0:it.WebApp;X&&(X.setHeaderColor("#FFFFFF"),X.setBackgroundColor("#F5F1ED"))},[]);const Sn=B.useCallback(async X=>{if(V(X),l("reader"),Ct&&m){const it={...yt||{},[m.id]:{novelId:m.id,chapterId:X.id,timestamp:new Date().toISOString()}};Ht(it),await Ye({lastRead:it})}},[Ct,m,yt,Ye]),fn=X=>{y(X),l("details")},$e=X=>{S(X),l("list"),h("library")},dn=()=>{S(null)},On=B.useCallback(async X=>{const it=j.includes(X)?j.filter(Xt=>Xt!==X):[...j,X];K(it),await Ye({bookmarks:it})},[j,Ye]),Ci=B.useMemo(()=>!d||d.length===0||!j?[]:d.filter(X=>j.includes(X.id)),[d,j]),fs=()=>{_t(!0)},Pa=X=>{hn(X),_t(!1)},La=async X=>{var Xt;const it=(Xt=window.Telegram)==null?void 0:Xt.WebApp;if(X==="boosty"){if(!Pr.currentUser)return;const Ut=Pr.currentUser.uid,Be="tenebrisverbot";try{const ve=he(ee,"users",Ut);await jr(ve,{pendingSubscription:{name:ft.name,price:ft.price,method:"boosty",duration:ft.duration}},{merge:!0});const Et=`https://t.me/${Be}?start=${Ut}`;it?it.openTelegramLink(Et):window.open(Et,"_blank"),hn(null),_t(!1)}catch(ve){console.error("Ошибка при создании заявки на оплату Boosty:",ve)}return}if(!it||!Ct||!ft){it&&it.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}it.showConfirm("Вы будете перенаправлены в бот для завершения оплаты...",async Ut=>{if(!Ut)return;const Be=he(ee,"users",Ct);try{await jr(Be,{pendingSubscription:{...ft,method:X,date:new Date().toISOString()}},{merge:!0}),it.openTelegramLink(`https://t.me/${_e}?start=${Ct}`),it.close()}catch(ve){console.error("Ошибка записи в Firebase:",ve),it.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};if(H)return _.jsx(VO,{});if(!D)return _.jsx(EO,{auth:Pr});const ds=()=>{if(a==="details")return _.jsx(MO,{novel:m,onSelectChapter:Sn,onGenreSelect:$e,subscription:E,botUsername:_e,userId:Ct,chapters:w,isLoadingChapters:C,lastReadData:yt,onBack:Wn});if(a==="reader")return _.jsx(kO,{chapter:x,novel:m,fontSize:n,onFontSizeChange:Zn,userId:Ct,userName:(D==null?void 0:D.displayName)||"Аноним",currentFontClass:r,onSelectChapter:Sn,allChapters:w,subscription:E,botUsername:_e,onBack:Wn,isUserAdmin:v});switch(u){case"library":return _.jsxs(_.Fragment,{children:[_.jsx(Si,{title:"Библиотека"}),_.jsx(DO,{onReadMore:Ot}),O&&_.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[_.jsxs("p",{className:"text-sm",children:[_.jsx("span",{className:"opacity-70",children:"Жанр:"}),_.jsx("strong",{className:"ml-2",children:O})]}),_.jsx("button",{onClick:dn,className:"text-xs font-bold text-accent hover:underline",children:"Сбросить"})]}),_.jsx(rg,{novels:d.filter(X=>!O||X.genres&&X.genres.includes(O)),onSelectNovel:fn,bookmarks:j,onToggleBookmark:On})]});case"search":return _.jsx(UO,{novels:d,onSelectNovel:fn,bookmarks:j,onToggleBookmark:On});case"bookmarks":return _.jsx(PO,{novels:Ci,onSelectNovel:fn,bookmarks:j,onToggleBookmark:On});case"profile":return _.jsx(LO,{user:D,subscription:E,onGetSubscriptionClick:fs,userId:Ct,auth:Pr,onThemeToggle:hs,currentTheme:e});default:return _.jsx(Si,{title:"Библиотека"})}};return _.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${v?"":"no-select"}`,children:[_.jsx("div",{className:"pb-20",children:ds()}),a==="list"&&_.jsx(NO,{activeTab:u,setActiveTab:h}),Y&&_.jsx(sg,{onClose:()=>_t(!1),onSelectPlan:Pa}),ft&&_.jsx(ag,{onClose:()=>hn(null),onSelectMethod:La,plan:ft}),ae&&_.jsx(OO,{newsItem:ae,onClose:()=>Ot(null)})]})}JR.createRoot(document.getElementById("root")).render(_.jsx(B.StrictMode,{children:_.jsx(jO,{})}));
