(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function $S(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gv={exports:{}},Dc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZS=Symbol.for("react.transitional.element"),WS=Symbol.for("react.fragment");function Qv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:ZS,type:e,key:i,ref:t!==void 0?t:null,props:n}}Dc.Fragment=WS;Dc.jsx=Qv;Dc.jsxs=Qv;Gv.exports=Dc;var v=Gv.exports,Kv={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd=Symbol.for("react.transitional.element"),JS=Symbol.for("react.portal"),tw=Symbol.for("react.fragment"),ew=Symbol.for("react.strict_mode"),nw=Symbol.for("react.profiler"),iw=Symbol.for("react.consumer"),rw=Symbol.for("react.context"),sw=Symbol.for("react.forward_ref"),aw=Symbol.for("react.suspense"),ow=Symbol.for("react.memo"),Yv=Symbol.for("react.lazy"),qg=Symbol.iterator;function lw(e){return e===null||typeof e!="object"?null:(e=qg&&e[qg]||e["@@iterator"],typeof e=="function"?e:null)}var Xv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$v=Object.assign,Zv={};function la(e,t,n){this.props=e,this.context=t,this.refs=Zv,this.updater=n||Xv}la.prototype.isReactComponent={};la.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};la.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wv(){}Wv.prototype=la.prototype;function Wd(e,t,n){this.props=e,this.context=t,this.refs=Zv,this.updater=n||Xv}var Jd=Wd.prototype=new Wv;Jd.constructor=Wd;$v(Jd,la.prototype);Jd.isPureReactComponent=!0;var Hg=Array.isArray,Ut={H:null,A:null,T:null,S:null,V:null},Jv=Object.prototype.hasOwnProperty;function tm(e,t,n,i,r,s){return n=s.ref,{$$typeof:Zd,type:e,key:t,ref:n!==void 0?n:null,props:s}}function uw(e,t){return tm(e.type,t,void 0,void 0,void 0,e.props)}function em(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zd}function cw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Fg=/\/+/g;function Mh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cw(""+e.key):t.toString(36)}function Gg(){}function hw(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Gg,Gg):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function ls(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Zd:case JS:a=!0;break;case Yv:return a=e._init,ls(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+Mh(e,0):i,Hg(r)?(n="",a!=null&&(n=a.replace(Fg,"$&/")+"/"),ls(r,t,n,"",function(h){return h})):r!=null&&(em(r)&&(r=uw(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(Fg,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(Hg(e))for(var u=0;u<e.length;u++)i=e[u],s=l+Mh(i,u),a+=ls(i,t,n,s,r);else if(u=lw(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+Mh(i,u++),a+=ls(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return ls(hw(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Fl(e,t,n){if(e==null)return e;var i=[],r=0;return ls(e,i,"","",function(s){return t.call(n,s,r++)}),i}function fw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qg=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function dw(){}nt.Children={map:Fl,forEach:function(e,t,n){Fl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Fl(e,function(){t++}),t},toArray:function(e){return Fl(e,function(t){return t})||[]},only:function(e){if(!em(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=la;nt.Fragment=tw;nt.Profiler=nw;nt.PureComponent=Wd;nt.StrictMode=ew;nt.Suspense=aw;nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ut;nt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Ut.H.useMemoCache(e)}};nt.cache=function(e){return function(){return e.apply(null,arguments)}};nt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=$v({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!Jv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return tm(e.type,r,void 0,void 0,s,i)};nt.createContext=function(e){return e={$$typeof:rw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:iw,_context:e},e};nt.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)Jv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return tm(e,s,void 0,void 0,null,r)};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:sw,render:e}};nt.isValidElement=em;nt.lazy=function(e){return{$$typeof:Yv,_payload:{_status:-1,_result:e},_init:fw}};nt.memo=function(e,t){return{$$typeof:ow,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=Ut.T,n={};Ut.T=n;try{var i=e(),r=Ut.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(dw,Qg)}catch(s){Qg(s)}finally{Ut.T=t}};nt.unstable_useCacheRefresh=function(){return Ut.H.useCacheRefresh()};nt.use=function(e){return Ut.H.use(e)};nt.useActionState=function(e,t,n){return Ut.H.useActionState(e,t,n)};nt.useCallback=function(e,t){return Ut.H.useCallback(e,t)};nt.useContext=function(e){return Ut.H.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e,t){return Ut.H.useDeferredValue(e,t)};nt.useEffect=function(e,t,n){var i=Ut.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};nt.useId=function(){return Ut.H.useId()};nt.useImperativeHandle=function(e,t,n){return Ut.H.useImperativeHandle(e,t,n)};nt.useInsertionEffect=function(e,t){return Ut.H.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return Ut.H.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return Ut.H.useMemo(e,t)};nt.useOptimistic=function(e,t){return Ut.H.useOptimistic(e,t)};nt.useReducer=function(e,t,n){return Ut.H.useReducer(e,t,n)};nt.useRef=function(e){return Ut.H.useRef(e)};nt.useState=function(e){return Ut.H.useState(e)};nt.useSyncExternalStore=function(e,t,n){return Ut.H.useSyncExternalStore(e,t,n)};nt.useTransition=function(){return Ut.H.useTransition()};nt.version="19.1.1";Kv.exports=nt;var H=Kv.exports;const mw=$S(H);var tE={exports:{}},Oc={},eE={exports:{}},nE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,X){var K=q.length;q.push(X);t:for(;0<K;){var pt=K-1>>>1,xt=q[pt];if(0<r(xt,X))q[pt]=X,q[K]=xt,K=pt;else break t}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var X=q[0],K=q.pop();if(K!==X){q[0]=K;t:for(var pt=0,xt=q.length,gn=xt>>>1;pt<gn;){var zt=2*(pt+1)-1,ct=q[zt],Zt=zt+1,be=q[Zt];if(0>r(ct,K))Zt<xt&&0>r(be,ct)?(q[pt]=be,q[Zt]=K,pt=Zt):(q[pt]=ct,q[zt]=K,pt=zt);else if(Zt<xt&&0>r(be,K))q[pt]=be,q[Zt]=K,pt=Zt;else break t}}return X}function r(q,X){var K=q.sortIndex-X.sortIndex;return K!==0?K:q.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,p=null,m=3,_=!1,x=!1,O=!1,V=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(q){for(var X=n(h);X!==null;){if(X.callback===null)i(h);else if(X.startTime<=q)i(h),X.sortIndex=X.expirationTime,t(u,X);else break;X=n(h)}}function U(q){if(O=!1,D(q),!x)if(n(u)!==null)x=!0,B||(B=!0,I());else{var X=n(h);X!==null&&me(U,X.startTime-q)}}var B=!1,T=-1,y=5,A=-1;function w(){return V?!0:!(e.unstable_now()-A<y)}function C(){if(V=!1,B){var q=e.unstable_now();A=q;var X=!0;try{t:{x=!1,O&&(O=!1,E(T),T=-1),_=!0;var K=m;try{e:{for(D(q),p=n(u);p!==null&&!(p.expirationTime>q&&w());){var pt=p.callback;if(typeof pt=="function"){p.callback=null,m=p.priorityLevel;var xt=pt(p.expirationTime<=q);if(q=e.unstable_now(),typeof xt=="function"){p.callback=xt,D(q),X=!0;break e}p===n(u)&&i(u),D(q)}else i(u);p=n(u)}if(p!==null)X=!0;else{var gn=n(h);gn!==null&&me(U,gn.startTime-q),X=!1}}break t}finally{p=null,m=K,_=!1}X=void 0}}finally{X?I():B=!1}}}var I;if(typeof R=="function")I=function(){R(C)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,_t=b.port2;b.port1.onmessage=C,I=function(){_t.postMessage(null)}}else I=function(){S(C,0)};function me(q,X){T=S(function(){q(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var K=m;m=X;try{return q()}finally{m=K}},e.unstable_requestPaint=function(){V=!0},e.unstable_runWithPriority=function(q,X){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var K=m;m=q;try{return X()}finally{m=K}},e.unstable_scheduleCallback=function(q,X,K){var pt=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?pt+K:pt):K=pt,q){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=K+xt,q={id:d++,callback:X,priorityLevel:q,startTime:K,expirationTime:xt,sortIndex:-1},K>pt?(q.sortIndex=K,t(h,q),n(u)===null&&q===n(h)&&(O?(E(T),T=-1):O=!0,me(U,K-pt))):(q.sortIndex=xt,t(u,q),x||_||(x=!0,B||(B=!0,I()))),q},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(q){var X=m;return function(){var K=m;m=X;try{return q.apply(this,arguments)}finally{m=K}}}})(nE);eE.exports=nE;var pw=eE.exports,iE={exports:{}},Le={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gw=H;function rE(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function bi(){}var Pe={d:{f:bi,r:function(){throw Error(rE(522))},D:bi,C:bi,L:bi,m:bi,X:bi,S:bi,M:bi},p:0,findDOMNode:null},yw=Symbol.for("react.portal");function _w(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yw,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var io=gw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Vc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Le.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pe;Le.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(rE(299));return _w(e,t,null,n)};Le.flushSync=function(e){var t=io.T,n=Pe.p;try{if(io.T=null,Pe.p=2,e)return e()}finally{io.T=t,Pe.p=n,Pe.d.f()}};Le.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Pe.d.C(e,t))};Le.prefetchDNS=function(e){typeof e=="string"&&Pe.d.D(e)};Le.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Vc(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Pe.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Pe.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Le.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Vc(t.as,t.crossOrigin);Pe.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Pe.d.M(e)};Le.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Vc(n,t.crossOrigin);Pe.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Le.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Vc(t.as,t.crossOrigin);Pe.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Pe.d.m(e)};Le.requestFormReset=function(e){Pe.d.r(e)};Le.unstable_batchedUpdates=function(e,t){return e(t)};Le.useFormState=function(e,t,n){return io.H.useFormState(e,t,n)};Le.useFormStatus=function(){return io.H.useHostTransitionStatus()};Le.version="19.1.1";function sE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sE)}catch(e){console.error(e)}}sE(),iE.exports=Le;var vw=iE.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oe=pw,aE=H,Ew=vw;function L(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function oE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Zo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function lE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Kg(e){if(Zo(e)!==e)throw Error(L(188))}function Tw(e){var t=e.alternate;if(!t){if(t=Zo(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Kg(r),e;if(s===i)return Kg(r),t;s=s.sibling}throw Error(L(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(L(189))}}if(n.alternate!==i)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function uE(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=uE(e),t!==null)return t;e=e.sibling}return null}var Pt=Object.assign,Aw=Symbol.for("react.element"),Gl=Symbol.for("react.transitional.element"),Qa=Symbol.for("react.portal"),gs=Symbol.for("react.fragment"),cE=Symbol.for("react.strict_mode"),Cf=Symbol.for("react.profiler"),bw=Symbol.for("react.provider"),hE=Symbol.for("react.consumer"),$n=Symbol.for("react.context"),nm=Symbol.for("react.forward_ref"),Nf=Symbol.for("react.suspense"),xf=Symbol.for("react.suspense_list"),im=Symbol.for("react.memo"),Ii=Symbol.for("react.lazy"),Df=Symbol.for("react.activity"),Sw=Symbol.for("react.memo_cache_sentinel"),Yg=Symbol.iterator;function Ua(e){return e===null||typeof e!="object"?null:(e=Yg&&e[Yg]||e["@@iterator"],typeof e=="function"?e:null)}var ww=Symbol.for("react.client.reference");function Of(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ww?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gs:return"Fragment";case Cf:return"Profiler";case cE:return"StrictMode";case Nf:return"Suspense";case xf:return"SuspenseList";case Df:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Qa:return"Portal";case $n:return(e.displayName||"Context")+".Provider";case hE:return(e._context.displayName||"Context")+".Consumer";case nm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case im:return t=e.displayName||null,t!==null?t:Of(e.type)||"Memo";case Ii:t=e._payload,e=e._init;try{return Of(e(t))}catch{}}return null}var Ka=Array.isArray,W=aE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Et=Ew.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Dr={pending:!1,data:null,method:null,action:null},Vf=[],ys=-1;function Bn(e){return{current:e}}function de(e){0>ys||(e.current=Vf[ys],Vf[ys]=null,ys--)}function jt(e,t){ys++,Vf[ys]=e.current,e.current=t}var Dn=Bn(null),Ro=Bn(null),qi=Bn(null),ku=Bn(null);function Pu(e,t){switch(jt(qi,t),jt(Ro,e),jt(Dn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Jy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Jy(t),e=C0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}de(Dn),jt(Dn,e)}function Fs(){de(Dn),de(Ro),de(qi)}function Mf(e){e.memoizedState!==null&&jt(ku,e);var t=Dn.current,n=C0(t,e.type);t!==n&&(jt(Ro,e),jt(Dn,n))}function Lu(e){Ro.current===e&&(de(Dn),de(Ro)),ku.current===e&&(de(ku),Po._currentValue=Dr)}var kf=Object.prototype.hasOwnProperty,rm=oe.unstable_scheduleCallback,kh=oe.unstable_cancelCallback,Rw=oe.unstable_shouldYield,Iw=oe.unstable_requestPaint,On=oe.unstable_now,Cw=oe.unstable_getCurrentPriorityLevel,fE=oe.unstable_ImmediatePriority,dE=oe.unstable_UserBlockingPriority,Uu=oe.unstable_NormalPriority,Nw=oe.unstable_LowPriority,mE=oe.unstable_IdlePriority,xw=oe.log,Dw=oe.unstable_setDisableYieldValue,Wo=null,Je=null;function Li(e){if(typeof xw=="function"&&Dw(e),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(Wo,e)}catch{}}var tn=Math.clz32?Math.clz32:Mw,Ow=Math.log,Vw=Math.LN2;function Mw(e){return e>>>=0,e===0?32:31-(Ow(e)/Vw|0)|0}var Ql=256,Kl=4194304;function Rr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Mc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=Rr(i):(a&=l,a!==0?r=Rr(a):n||(n=l&~e,n!==0&&(r=Rr(n))))):(l=i&~s,l!==0?r=Rr(l):a!==0?r=Rr(a):n||(n=i&~e,n!==0&&(r=Rr(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function Jo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function kw(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pE(){var e=Ql;return Ql<<=1,!(Ql&4194048)&&(Ql=256),e}function gE(){var e=Kl;return Kl<<=1,!(Kl&62914560)&&(Kl=4194304),e}function Ph(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pw(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-tn(n),p=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~p}i!==0&&yE(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function yE(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-tn(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function _E(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-tn(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function sm(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function am(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function vE(){var e=Et.p;return e!==0?e:(e=window.event,e===void 0?32:U0(e.type))}function Lw(e,t){var n=Et.p;try{return Et.p=e,t()}finally{Et.p=n}}var hr=Math.random().toString(36).slice(2),Ne="__reactFiber$"+hr,qe="__reactProps$"+hr,ua="__reactContainer$"+hr,Pf="__reactEvents$"+hr,Uw="__reactListeners$"+hr,jw="__reactHandles$"+hr,Xg="__reactResources$"+hr,el="__reactMarker$"+hr;function om(e){delete e[Ne],delete e[qe],delete e[Pf],delete e[Uw],delete e[jw]}function _s(e){var t=e[Ne];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ua]||n[Ne]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=n_(e);e!==null;){if(n=e[Ne])return n;e=n_(e)}return t}e=n,n=e.parentNode}return null}function ca(e){if(e=e[Ne]||e[ua]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Ya(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(L(33))}function xs(e){var t=e[Xg];return t||(t=e[Xg]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ce(e){e[el]=!0}var EE=new Set,TE={};function Yr(e,t){Gs(e,t),Gs(e+"Capture",t)}function Gs(e,t){for(TE[e]=t,e=0;e<t.length;e++)EE.add(t[e])}var zw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$g={},Zg={};function Bw(e){return kf.call(Zg,e)?!0:kf.call($g,e)?!1:zw.test(e)?Zg[e]=!0:($g[e]=!0,!1)}function hu(e,t,n){if(Bw(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Yl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Qn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Lh,Wg;function us(e){if(Lh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Lh=t&&t[1]||"",Wg=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lh+e+Wg}var Uh=!1;function jh(e,t){if(!e||Uh)return"";Uh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(_){var m=_}Reflect.construct(e,[],p)}else{try{p.call()}catch(_){m=_}e.call(p.prototype)}}else{try{throw Error()}catch(_){m=_}(p=e())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{Uh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?us(n):""}function qw(e){switch(e.tag){case 26:case 27:case 5:return us(e.type);case 16:return us("Lazy");case 13:return us("Suspense");case 19:return us("SuspenseList");case 0:case 15:return jh(e.type,!1);case 11:return jh(e.type.render,!1);case 1:return jh(e.type,!0);case 31:return us("Activity");default:return""}}function Jg(e){try{var t="";do t+=qw(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function ln(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function AE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hw(e){var t=AE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ju(e){e._valueTracker||(e._valueTracker=Hw(e))}function bE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=AE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function zu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Fw=/[\n"\\]/g;function hn(e){return e.replace(Fw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Lf(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ln(t)):e.value!==""+ln(t)&&(e.value=""+ln(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Uf(e,a,ln(t)):n!=null?Uf(e,a,ln(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+ln(l):e.removeAttribute("name")}function SE(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+ln(n):"",t=t!=null?""+ln(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Uf(e,t,n){t==="number"&&zu(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ds(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ln(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function wE(e,t,n){if(t!=null&&(t=""+ln(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+ln(n):""}function RE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(L(92));if(Ka(i)){if(1<i.length)throw Error(L(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=ln(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Qs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Gw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ty(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||Gw.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function IE(e,t,n){if(t!=null&&typeof t!="object")throw Error(L(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&ty(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&ty(e,s,t[s])}function lm(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fu(e){return Kw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var jf=null;function um(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vs=null,Os=null;function ey(e){var t=ca(e);if(t&&(e=t.stateNode)){var n=e[qe]||null;t:switch(e=t.stateNode,t.type){case"input":if(Lf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+hn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[qe]||null;if(!r)throw Error(L(90));Lf(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&bE(i)}break t;case"textarea":wE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Ds(e,!!n.multiple,t,!1)}}}var zh=!1;function CE(e,t,n){if(zh)return e(t,n);zh=!0;try{var i=e(t);return i}finally{if(zh=!1,(vs!==null||Os!==null)&&(Fc(),vs&&(t=vs,e=Os,Os=vs=null,ey(t),e)))for(t=0;t<e.length;t++)ey(e[t])}}function Io(e,t){var n=e.stateNode;if(n===null)return null;var i=n[qe]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zf=!1;if(ai)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){zf=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{zf=!1}var Ui=null,cm=null,du=null;function NE(){if(du)return du;var e,t=cm,n=t.length,i,r="value"in Ui?Ui.value:Ui.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return du=r.slice(e,1<i?1-i:void 0)}function mu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xl(){return!0}function ny(){return!1}function He(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xl:ny,this.isPropagationStopped=ny,this}return Pt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xl)},persist:function(){},isPersistent:Xl}),t}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kc=He(Xr),nl=Pt({},Xr,{view:0,detail:0}),Yw=He(nl),Bh,qh,za,Pc=Pt({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==za&&(za&&e.type==="mousemove"?(Bh=e.screenX-za.screenX,qh=e.screenY-za.screenY):qh=Bh=0,za=e),Bh)},movementY:function(e){return"movementY"in e?e.movementY:qh}}),iy=He(Pc),Xw=Pt({},Pc,{dataTransfer:0}),$w=He(Xw),Zw=Pt({},nl,{relatedTarget:0}),Hh=He(Zw),Ww=Pt({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),Jw=He(Ww),t1=Pt({},Xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),e1=He(t1),n1=Pt({},Xr,{data:0}),ry=He(n1),i1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=s1[e])?!!t[e]:!1}function hm(){return a1}var o1=Pt({},nl,{key:function(e){if(e.key){var t=i1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?r1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hm,charCode:function(e){return e.type==="keypress"?mu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),l1=He(o1),u1=Pt({},Pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sy=He(u1),c1=Pt({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hm}),h1=He(c1),f1=Pt({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),d1=He(f1),m1=Pt({},Pc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),p1=He(m1),g1=Pt({},Xr,{newState:0,oldState:0}),y1=He(g1),_1=[9,13,27,32],fm=ai&&"CompositionEvent"in window,ro=null;ai&&"documentMode"in document&&(ro=document.documentMode);var v1=ai&&"TextEvent"in window&&!ro,xE=ai&&(!fm||ro&&8<ro&&11>=ro),ay=" ",oy=!1;function DE(e,t){switch(e){case"keyup":return _1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Es=!1;function E1(e,t){switch(e){case"compositionend":return OE(t);case"keypress":return t.which!==32?null:(oy=!0,ay);case"textInput":return e=t.data,e===ay&&oy?null:e;default:return null}}function T1(e,t){if(Es)return e==="compositionend"||!fm&&DE(e,t)?(e=NE(),du=cm=Ui=null,Es=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xE&&t.locale!=="ko"?null:t.data;default:return null}}var A1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ly(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!A1[e.type]:t==="textarea"}function VE(e,t,n,i){vs?Os?Os.push(i):Os=[i]:vs=i,t=rc(t,"onChange"),0<t.length&&(n=new kc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var so=null,Co=null;function b1(e){w0(e,0)}function Lc(e){var t=Ya(e);if(bE(t))return e}function uy(e,t){if(e==="change")return t}var ME=!1;if(ai){var Fh;if(ai){var Gh="oninput"in document;if(!Gh){var cy=document.createElement("div");cy.setAttribute("oninput","return;"),Gh=typeof cy.oninput=="function"}Fh=Gh}else Fh=!1;ME=Fh&&(!document.documentMode||9<document.documentMode)}function hy(){so&&(so.detachEvent("onpropertychange",kE),Co=so=null)}function kE(e){if(e.propertyName==="value"&&Lc(Co)){var t=[];VE(t,Co,e,um(e)),CE(b1,t)}}function S1(e,t,n){e==="focusin"?(hy(),so=t,Co=n,so.attachEvent("onpropertychange",kE)):e==="focusout"&&hy()}function w1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lc(Co)}function R1(e,t){if(e==="click")return Lc(t)}function I1(e,t){if(e==="input"||e==="change")return Lc(t)}function C1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var an=typeof Object.is=="function"?Object.is:C1;function No(e,t){if(an(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!kf.call(t,r)||!an(e[r],t[r]))return!1}return!0}function fy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dy(e,t){var n=fy(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=fy(n)}}function PE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?PE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function LE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=zu(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zu(e.document)}return t}function dm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var N1=ai&&"documentMode"in document&&11>=document.documentMode,Ts=null,Bf=null,ao=null,qf=!1;function my(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qf||Ts==null||Ts!==zu(i)||(i=Ts,"selectionStart"in i&&dm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ao&&No(ao,i)||(ao=i,i=rc(Bf,"onSelect"),0<i.length&&(t=new kc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ts)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var As={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionrun:wr("Transition","TransitionRun"),transitionstart:wr("Transition","TransitionStart"),transitioncancel:wr("Transition","TransitionCancel"),transitionend:wr("Transition","TransitionEnd")},Qh={},UE={};ai&&(UE=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function $r(e){if(Qh[e])return Qh[e];if(!As[e])return e;var t=As[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in UE)return Qh[e]=t[n];return e}var jE=$r("animationend"),zE=$r("animationiteration"),BE=$r("animationstart"),x1=$r("transitionrun"),D1=$r("transitionstart"),O1=$r("transitioncancel"),qE=$r("transitionend"),HE=new Map,Hf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hf.push("scrollEnd");function Sn(e,t){HE.set(e,t),Yr(t,[e])}var py=new WeakMap;function fn(e,t){if(typeof e=="object"&&e!==null){var n=py.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Jg(t)},py.set(e,t),t)}return{value:e,source:t,stack:Jg(t)}}var on=[],bs=0,mm=0;function Uc(){for(var e=bs,t=mm=bs=0;t<e;){var n=on[t];on[t++]=null;var i=on[t];on[t++]=null;var r=on[t];on[t++]=null;var s=on[t];if(on[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&FE(n,r,s)}}function jc(e,t,n,i){on[bs++]=e,on[bs++]=t,on[bs++]=n,on[bs++]=i,mm|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function pm(e,t,n,i){return jc(e,t,n,i),Bu(e)}function ha(e,t){return jc(e,null,null,t),Bu(e)}function FE(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-tn(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function Bu(e){if(50<yo)throw yo=0,cd=null,Error(L(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ss={};function V1(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(e,t,n,i){return new V1(e,t,n,i)}function gm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ii(e,t){var n=e.alternate;return n===null?(n=Xe(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function GE(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function pu(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")gm(e)&&(a=1);else if(typeof e=="string")a=kR(e,n,Dn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Df:return e=Xe(31,n,t,r),e.elementType=Df,e.lanes=s,e;case gs:return Or(n.children,r,s,t);case cE:a=8,r|=24;break;case Cf:return e=Xe(12,n,t,r|2),e.elementType=Cf,e.lanes=s,e;case Nf:return e=Xe(13,n,t,r),e.elementType=Nf,e.lanes=s,e;case xf:return e=Xe(19,n,t,r),e.elementType=xf,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bw:case $n:a=10;break t;case hE:a=9;break t;case nm:a=11;break t;case im:a=14;break t;case Ii:a=16,i=null;break t}a=29,n=Error(L(130,e===null?"null":typeof e,"")),i=null}return t=Xe(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Or(e,t,n,i){return e=Xe(7,e,i,t),e.lanes=n,e}function Kh(e,t,n){return e=Xe(6,e,null,t),e.lanes=n,e}function Yh(e,t,n){return t=Xe(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ws=[],Rs=0,qu=null,Hu=0,un=[],cn=0,Vr=null,Zn=1,Wn="";function Ir(e,t){ws[Rs++]=Hu,ws[Rs++]=qu,qu=e,Hu=t}function QE(e,t,n){un[cn++]=Zn,un[cn++]=Wn,un[cn++]=Vr,Vr=e;var i=Zn;e=Wn;var r=32-tn(i)-1;i&=~(1<<r),n+=1;var s=32-tn(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Zn=1<<32-tn(t)+r|n<<r|i,Wn=s+e}else Zn=1<<s|n<<r|i,Wn=e}function ym(e){e.return!==null&&(Ir(e,1),QE(e,1,0))}function _m(e){for(;e===qu;)qu=ws[--Rs],ws[Rs]=null,Hu=ws[--Rs],ws[Rs]=null;for(;e===Vr;)Vr=un[--cn],un[cn]=null,Wn=un[--cn],un[cn]=null,Zn=un[--cn],un[cn]=null}var Me=null,Gt=null,vt=!1,Mr=null,Nn=!1,Ff=Error(L(519));function Ur(e){var t=Error(L(418,""));throw xo(fn(t,e)),Ff}function gy(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ne]=e,t[qe]=i,n){case"dialog":st("cancel",t),st("close",t);break;case"iframe":case"object":case"embed":st("load",t);break;case"video":case"audio":for(n=0;n<Vo.length;n++)st(Vo[n],t);break;case"source":st("error",t);break;case"img":case"image":case"link":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"input":st("invalid",t),SE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),ju(t);break;case"select":st("invalid",t);break;case"textarea":st("invalid",t),RE(t,i.value,i.defaultValue,i.children),ju(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||I0(t.textContent,n)?(i.popover!=null&&(st("beforetoggle",t),st("toggle",t)),i.onScroll!=null&&st("scroll",t),i.onScrollEnd!=null&&st("scrollend",t),i.onClick!=null&&(t.onclick=Kc),t=!0):t=!1,t||Ur(e)}function yy(e){for(Me=e.return;Me;)switch(Me.tag){case 5:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Me=Me.return}}function Ba(e){if(e!==Me)return!1;if(!vt)return yy(e),vt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||gd(e.type,e.memoizedProps)),n=!n),n&&Gt&&Ur(e),yy(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Gt=Tn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Gt=null}}else t===27?(t=Gt,fr(e.type)?(e=vd,vd=null,Gt=e):Gt=t):Gt=Me?Tn(e.stateNode.nextSibling):null;return!0}function il(){Gt=Me=null,vt=!1}function _y(){var e=Mr;return e!==null&&(ze===null?ze=e:ze.push.apply(ze,e),Mr=null),e}function xo(e){Mr===null?Mr=[e]:Mr.push(e)}var Gf=Bn(null),Zr=null,Jn=null;function Ni(e,t,n){jt(Gf,t._currentValue),t._currentValue=n}function ri(e){e._currentValue=Gf.current,de(Gf)}function Qf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Kf(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Qf(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(L(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Qf(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function rl(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(L(387));if(a=a.memoizedProps,a!==null){var l=r.type;an(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===ku.current){if(a=r.alternate,a===null)throw Error(L(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Po):e=[Po])}r=r.return}e!==null&&Kf(t,e,n,i),t.flags|=262144}function Fu(e){for(e=e.firstContext;e!==null;){if(!an(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function jr(e){Zr=e,Jn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function xe(e){return KE(Zr,e)}function $l(e,t){return Zr===null&&jr(e),KE(e,t)}function KE(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Jn===null){if(e===null)throw Error(L(308));Jn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Jn=Jn.next=t;return n}var M1=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},k1=oe.unstable_scheduleCallback,P1=oe.unstable_NormalPriority,re={$$typeof:$n,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vm(){return{controller:new M1,data:new Map,refCount:0}}function sl(e){e.refCount--,e.refCount===0&&k1(P1,function(){e.controller.abort()})}var oo=null,Yf=0,Ks=0,Vs=null;function L1(e,t){if(oo===null){var n=oo=[];Yf=0,Ks=qm(),Vs={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Yf++,t.then(vy,vy),t}function vy(){if(--Yf===0&&oo!==null){Vs!==null&&(Vs.status="fulfilled");var e=oo;oo=null,Ks=0,Vs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function U1(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var Ey=W.S;W.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&L1(e,t),Ey!==null&&Ey(e,t)};var kr=Bn(null);function Em(){var e=kr.current;return e!==null?e:Vt.pooledCache}function gu(e,t){t===null?jt(kr,kr.current):jt(kr,t.pool)}function YE(){var e=Em();return e===null?null:{parent:re._currentValue,pool:e}}var al=Error(L(460)),XE=Error(L(474)),zc=Error(L(542)),Xf={then:function(){}};function Ty(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Zl(){}function $E(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Zl,Zl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,by(e),e;default:if(typeof t.status=="string")t.then(Zl,Zl);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(L(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,by(e),e}throw lo=t,al}}var lo=null;function Ay(){if(lo===null)throw Error(L(459));var e=lo;return lo=null,e}function by(e){if(e===al||e===zc)throw Error(L(483))}var Ci=!1;function Tm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $f(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Hi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Fi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Rt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Bu(e),FE(e,null,n),t}return jc(e,i,t,n),Bu(e)}function uo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,_E(e,n)}}function Xh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Zf=!1;function co(){if(Zf){var e=Vs;if(e!==null)throw e}}function ho(e,t,n,i){Zf=!1;var r=e.updateQueue;Ci=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var p=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(dt&m)===m:(i&m)===m){m!==0&&m===Ks&&(Zf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var x=e,O=l;m=t;var V=n;switch(O.tag){case 1:if(x=O.payload,typeof x=="function"){p=x.call(V,p,m);break t}p=x;break t;case 3:x.flags=x.flags&-65537|128;case 0:if(x=O.payload,m=typeof x=="function"?x.call(V,p,m):x,m==null)break t;p=Pt({},p,m);break t;case 2:Ci=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=r.callbacks,_===null?r.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=p):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);d===null&&(u=p),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),rr|=a,e.lanes=a,e.memoizedState=p}}function ZE(e,t){if(typeof e!="function")throw Error(L(191,e));e.call(t)}function WE(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)ZE(n[e],t)}var Ys=Bn(null),Gu=Bn(0);function Sy(e,t){e=ui,jt(Gu,e),jt(Ys,t),ui=e|t.baseLanes}function Wf(){jt(Gu,ui),jt(Ys,Ys.current)}function Am(){ui=Gu.current,de(Ys),de(Gu)}var nr=0,it=null,Ct=null,Jt=null,Qu=!1,Ms=!1,zr=!1,Ku=0,Do=0,ks=null,j1=0;function Yt(){throw Error(L(321))}function bm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!an(e[n],t[n]))return!1;return!0}function Sm(e,t,n,i,r,s){return nr=s,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,W.H=e===null||e.memoizedState===null?NT:xT,zr=!1,s=n(i,r),zr=!1,Ms&&(s=tT(t,n,i,r)),JE(e),s}function JE(e){W.H=Yu;var t=Ct!==null&&Ct.next!==null;if(nr=0,Jt=Ct=it=null,Qu=!1,Do=0,ks=null,t)throw Error(L(300));e===null||fe||(e=e.dependencies,e!==null&&Fu(e)&&(fe=!0))}function tT(e,t,n,i){it=e;var r=0;do{if(Ms&&(ks=null),Do=0,Ms=!1,25<=r)throw Error(L(301));if(r+=1,Jt=Ct=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}W.H=Q1,s=t(n,i)}while(Ms);return s}function z1(){var e=W.H,t=e.useState()[0];return t=typeof t.then=="function"?ol(t):t,e=e.useState()[0],(Ct!==null?Ct.memoizedState:null)!==e&&(it.flags|=1024),t}function wm(){var e=Ku!==0;return Ku=0,e}function Rm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Im(e){if(Qu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Qu=!1}nr=0,Jt=Ct=it=null,Ms=!1,Do=Ku=0,ks=null}function Ue(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?it.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function ne(){if(Ct===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=Ct.next;var t=Jt===null?it.memoizedState:Jt.next;if(t!==null)Jt=t,Ct=e;else{if(e===null)throw it.alternate===null?Error(L(467)):Error(L(310));Ct=e,e={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Jt===null?it.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function Cm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ol(e){var t=Do;return Do+=1,ks===null&&(ks=[]),e=$E(ks,e,t),t=it,(Jt===null?t.memoizedState:Jt.next)===null&&(t=t.alternate,W.H=t===null||t.memoizedState===null?NT:xT),e}function Bc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ol(e);if(e.$$typeof===$n)return xe(e)}throw Error(L(438,String(e)))}function Nm(e){var t=null,n=it.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=it.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Cm(),it.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=Sw;return t.index++,n}function oi(e,t){return typeof t=="function"?t(e):t}function yu(e){var t=ne();return xm(t,Ct,e)}function xm(e,t,n){var i=e.queue;if(i===null)throw Error(L(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var p=h.lane&-536870913;if(p!==h.lane?(dt&p)===p:(nr&p)===p){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),p===Ks&&(d=!0);else if((nr&m)===m){h=h.next,m===Ks&&(d=!0);continue}else p={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=p,a=s):u=u.next=p,it.lanes|=m,rr|=m;p=h.action,zr&&n(s,p),s=h.hasEagerState?h.eagerState:n(s,p)}else m={lane:p,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,it.lanes|=p,rr|=p;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!an(s,e.memoizedState)&&(fe=!0,d&&(n=Vs,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function $h(e){var t=ne(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);an(s,t.memoizedState)||(fe=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function eT(e,t,n){var i=it,r=ne(),s=vt;if(s){if(n===void 0)throw Error(L(407));n=n()}else n=t();var a=!an((Ct||r).memoizedState,n);a&&(r.memoizedState=n,fe=!0),r=r.queue;var l=rT.bind(null,i,r,e);if(ll(2048,8,l,[e]),r.getSnapshot!==t||a||Jt!==null&&Jt.memoizedState.tag&1){if(i.flags|=2048,Xs(9,qc(),iT.bind(null,i,r,n,t),null),Vt===null)throw Error(L(349));s||nr&124||nT(i,t,n)}return n}function nT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=it.updateQueue,t===null?(t=Cm(),it.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function iT(e,t,n,i){t.value=n,t.getSnapshot=i,sT(t)&&aT(e)}function rT(e,t,n){return n(function(){sT(t)&&aT(e)})}function sT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!an(e,n)}catch{return!0}}function aT(e){var t=ha(e,2);t!==null&&nn(t,e,2)}function Jf(e){var t=Ue();if(typeof e=="function"){var n=e;if(e=n(),zr){Li(!0);try{n()}finally{Li(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:e},t}function oT(e,t,n,i){return e.baseState=n,xm(e,Ct,typeof i=="function"?i:oi)}function B1(e,t,n,i,r){if(Hc(e))throw Error(L(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};W.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,lT(t,s)):(s.next=n.next,t.pending=n.next=s)}}function lT(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=W.T,a={};W.T=a;try{var l=n(r,i),u=W.S;u!==null&&u(a,l),wy(e,t,l)}catch(h){td(e,t,h)}finally{W.T=s}}else try{s=n(r,i),wy(e,t,s)}catch(h){td(e,t,h)}}function wy(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Ry(e,t,i)},function(i){return td(e,t,i)}):Ry(e,t,n)}function Ry(e,t,n){t.status="fulfilled",t.value=n,uT(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,lT(e,n)))}function td(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,uT(t),t=t.next;while(t!==i)}e.action=null}function uT(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function cT(e,t){return t}function Iy(e,t){if(vt){var n=Vt.formState;if(n!==null){t:{var i=it;if(vt){if(Gt){e:{for(var r=Gt,s=Nn;r.nodeType!==8;){if(!s){r=null;break e}if(r=Tn(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Gt=Tn(r.nextSibling),i=r.data==="F!";break t}}Ur(i)}i=!1}i&&(t=n[0])}}return n=Ue(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cT,lastRenderedState:t},n.queue=i,n=RT.bind(null,it,i),i.dispatch=n,i=Jf(!1),s=Mm.bind(null,it,!1,i.queue),i=Ue(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=B1.bind(null,it,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function Cy(e){var t=ne();return hT(t,Ct,e)}function hT(e,t,n){if(t=xm(e,t,cT)[0],e=yu(oi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=ol(t)}catch(a){throw a===al?zc:a}else i=t;t=ne();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(it.flags|=2048,Xs(9,qc(),q1.bind(null,r,n),null)),[i,s,e]}function q1(e,t){e.action=t}function Ny(e){var t=ne(),n=Ct;if(n!==null)return hT(t,n,e);ne(),t=t.memoizedState,n=ne();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Xs(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=it.updateQueue,t===null&&(t=Cm(),it.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function qc(){return{destroy:void 0,resource:void 0}}function fT(){return ne().memoizedState}function _u(e,t,n,i){var r=Ue();i=i===void 0?null:i,it.flags|=e,r.memoizedState=Xs(1|t,qc(),n,i)}function ll(e,t,n,i){var r=ne();i=i===void 0?null:i;var s=r.memoizedState.inst;Ct!==null&&i!==null&&bm(i,Ct.memoizedState.deps)?r.memoizedState=Xs(t,s,n,i):(it.flags|=e,r.memoizedState=Xs(1|t,s,n,i))}function xy(e,t){_u(8390656,8,e,t)}function dT(e,t){ll(2048,8,e,t)}function mT(e,t){return ll(4,2,e,t)}function pT(e,t){return ll(4,4,e,t)}function gT(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yT(e,t,n){n=n!=null?n.concat([e]):null,ll(4,4,gT.bind(null,t,e),n)}function Dm(){}function _T(e,t){var n=ne();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&bm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function vT(e,t){var n=ne();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&bm(t,i[1]))return i[0];if(i=e(),zr){Li(!0);try{e()}finally{Li(!1)}}return n.memoizedState=[i,t],i}function Om(e,t,n){return n===void 0||nr&1073741824?e.memoizedState=t:(e.memoizedState=n,e=u0(),it.lanes|=e,rr|=e,n)}function ET(e,t,n,i){return an(n,t)?n:Ys.current!==null?(e=Om(e,n,i),an(e,t)||(fe=!0),e):nr&42?(e=u0(),it.lanes|=e,rr|=e,t):(fe=!0,e.memoizedState=n)}function TT(e,t,n,i,r){var s=Et.p;Et.p=s!==0&&8>s?s:8;var a=W.T,l={};W.T=l,Mm(e,!1,t,n);try{var u=r(),h=W.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=U1(u,i);fo(e,t,d,en(e))}else fo(e,t,i,en(e))}catch(p){fo(e,t,{then:function(){},status:"rejected",reason:p},en())}finally{Et.p=s,W.T=a}}function H1(){}function ed(e,t,n,i){if(e.tag!==5)throw Error(L(476));var r=AT(e).queue;TT(e,r,t,Dr,n===null?H1:function(){return bT(e),n(i)})}function AT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Dr,baseState:Dr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:Dr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function bT(e){var t=AT(e).next.queue;fo(e,t,{},en())}function Vm(){return xe(Po)}function ST(){return ne().memoizedState}function wT(){return ne().memoizedState}function F1(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=en();e=Hi(n);var i=Fi(t,e,n);i!==null&&(nn(i,t,n),uo(i,t,n)),t={cache:vm()},e.payload=t;return}t=t.return}}function G1(e,t,n){var i=en();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Hc(e)?IT(t,n):(n=pm(e,t,n,i),n!==null&&(nn(n,e,i),CT(n,t,i)))}function RT(e,t,n){var i=en();fo(e,t,n,i)}function fo(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hc(e))IT(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,an(l,a))return jc(e,t,r,0),Vt===null&&Uc(),!1}catch{}finally{}if(n=pm(e,t,r,i),n!==null)return nn(n,e,i),CT(n,t,i),!0}return!1}function Mm(e,t,n,i){if(i={lane:2,revertLane:qm(),action:i,hasEagerState:!1,eagerState:null,next:null},Hc(e)){if(t)throw Error(L(479))}else t=pm(e,n,i,2),t!==null&&nn(t,e,2)}function Hc(e){var t=e.alternate;return e===it||t!==null&&t===it}function IT(e,t){Ms=Qu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function CT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,_E(e,n)}}var Yu={readContext:xe,use:Bc,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt},NT={readContext:xe,use:Bc,useCallback:function(e,t){return Ue().memoizedState=[e,t===void 0?null:t],e},useContext:xe,useEffect:xy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,_u(4194308,4,gT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _u(4194308,4,e,t)},useInsertionEffect:function(e,t){_u(4,2,e,t)},useMemo:function(e,t){var n=Ue();t=t===void 0?null:t;var i=e();if(zr){Li(!0);try{e()}finally{Li(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Ue();if(n!==void 0){var r=n(t);if(zr){Li(!0);try{n(t)}finally{Li(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=G1.bind(null,it,e),[i.memoizedState,e]},useRef:function(e){var t=Ue();return e={current:e},t.memoizedState=e},useState:function(e){e=Jf(e);var t=e.queue,n=RT.bind(null,it,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Dm,useDeferredValue:function(e,t){var n=Ue();return Om(n,e,t)},useTransition:function(){var e=Jf(!1);return e=TT.bind(null,it,e.queue,!0,!1),Ue().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=it,r=Ue();if(vt){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),Vt===null)throw Error(L(349));dt&124||nT(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,xy(rT.bind(null,i,s,e),[e]),i.flags|=2048,Xs(9,qc(),iT.bind(null,i,s,n,t),null),n},useId:function(){var e=Ue(),t=Vt.identifierPrefix;if(vt){var n=Wn,i=Zn;n=(i&~(1<<32-tn(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=Ku++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=j1++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Vm,useFormState:Iy,useActionState:Iy,useOptimistic:function(e){var t=Ue();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Mm.bind(null,it,!0,n),n.dispatch=t,[e,t]},useMemoCache:Nm,useCacheRefresh:function(){return Ue().memoizedState=F1.bind(null,it)}},xT={readContext:xe,use:Bc,useCallback:_T,useContext:xe,useEffect:dT,useImperativeHandle:yT,useInsertionEffect:mT,useLayoutEffect:pT,useMemo:vT,useReducer:yu,useRef:fT,useState:function(){return yu(oi)},useDebugValue:Dm,useDeferredValue:function(e,t){var n=ne();return ET(n,Ct.memoizedState,e,t)},useTransition:function(){var e=yu(oi)[0],t=ne().memoizedState;return[typeof e=="boolean"?e:ol(e),t]},useSyncExternalStore:eT,useId:ST,useHostTransitionStatus:Vm,useFormState:Cy,useActionState:Cy,useOptimistic:function(e,t){var n=ne();return oT(n,Ct,e,t)},useMemoCache:Nm,useCacheRefresh:wT},Q1={readContext:xe,use:Bc,useCallback:_T,useContext:xe,useEffect:dT,useImperativeHandle:yT,useInsertionEffect:mT,useLayoutEffect:pT,useMemo:vT,useReducer:$h,useRef:fT,useState:function(){return $h(oi)},useDebugValue:Dm,useDeferredValue:function(e,t){var n=ne();return Ct===null?Om(n,e,t):ET(n,Ct.memoizedState,e,t)},useTransition:function(){var e=$h(oi)[0],t=ne().memoizedState;return[typeof e=="boolean"?e:ol(e),t]},useSyncExternalStore:eT,useId:ST,useHostTransitionStatus:Vm,useFormState:Ny,useActionState:Ny,useOptimistic:function(e,t){var n=ne();return Ct!==null?oT(n,Ct,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Nm,useCacheRefresh:wT},Ps=null,Oo=0;function Wl(e){var t=Oo;return Oo+=1,Ps===null&&(Ps=[]),$E(Ps,e,t)}function qa(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Jl(e,t){throw t.$$typeof===Aw?Error(L(525)):(e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Dy(e){var t=e._init;return t(e._payload)}function DT(e){function t(S,E){if(e){var R=S.deletions;R===null?(S.deletions=[E],S.flags|=16):R.push(E)}}function n(S,E){if(!e)return null;for(;E!==null;)t(S,E),E=E.sibling;return null}function i(S){for(var E=new Map;S!==null;)S.key!==null?E.set(S.key,S):E.set(S.index,S),S=S.sibling;return E}function r(S,E){return S=ii(S,E),S.index=0,S.sibling=null,S}function s(S,E,R){return S.index=R,e?(R=S.alternate,R!==null?(R=R.index,R<E?(S.flags|=67108866,E):R):(S.flags|=67108866,E)):(S.flags|=1048576,E)}function a(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function l(S,E,R,D){return E===null||E.tag!==6?(E=Kh(R,S.mode,D),E.return=S,E):(E=r(E,R),E.return=S,E)}function u(S,E,R,D){var U=R.type;return U===gs?d(S,E,R.props.children,D,R.key):E!==null&&(E.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Ii&&Dy(U)===E.type)?(E=r(E,R.props),qa(E,R),E.return=S,E):(E=pu(R.type,R.key,R.props,null,S.mode,D),qa(E,R),E.return=S,E)}function h(S,E,R,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==R.containerInfo||E.stateNode.implementation!==R.implementation?(E=Yh(R,S.mode,D),E.return=S,E):(E=r(E,R.children||[]),E.return=S,E)}function d(S,E,R,D,U){return E===null||E.tag!==7?(E=Or(R,S.mode,D,U),E.return=S,E):(E=r(E,R),E.return=S,E)}function p(S,E,R){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=Kh(""+E,S.mode,R),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Gl:return R=pu(E.type,E.key,E.props,null,S.mode,R),qa(R,E),R.return=S,R;case Qa:return E=Yh(E,S.mode,R),E.return=S,E;case Ii:var D=E._init;return E=D(E._payload),p(S,E,R)}if(Ka(E)||Ua(E))return E=Or(E,S.mode,R,null),E.return=S,E;if(typeof E.then=="function")return p(S,Wl(E),R);if(E.$$typeof===$n)return p(S,$l(S,E),R);Jl(S,E)}return null}function m(S,E,R,D){var U=E!==null?E.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return U!==null?null:l(S,E,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Gl:return R.key===U?u(S,E,R,D):null;case Qa:return R.key===U?h(S,E,R,D):null;case Ii:return U=R._init,R=U(R._payload),m(S,E,R,D)}if(Ka(R)||Ua(R))return U!==null?null:d(S,E,R,D,null);if(typeof R.then=="function")return m(S,E,Wl(R),D);if(R.$$typeof===$n)return m(S,E,$l(S,R),D);Jl(S,R)}return null}function _(S,E,R,D,U){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return S=S.get(R)||null,l(E,S,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Gl:return S=S.get(D.key===null?R:D.key)||null,u(E,S,D,U);case Qa:return S=S.get(D.key===null?R:D.key)||null,h(E,S,D,U);case Ii:var B=D._init;return D=B(D._payload),_(S,E,R,D,U)}if(Ka(D)||Ua(D))return S=S.get(R)||null,d(E,S,D,U,null);if(typeof D.then=="function")return _(S,E,R,Wl(D),U);if(D.$$typeof===$n)return _(S,E,R,$l(E,D),U);Jl(E,D)}return null}function x(S,E,R,D){for(var U=null,B=null,T=E,y=E=0,A=null;T!==null&&y<R.length;y++){T.index>y?(A=T,T=null):A=T.sibling;var w=m(S,T,R[y],D);if(w===null){T===null&&(T=A);break}e&&T&&w.alternate===null&&t(S,T),E=s(w,E,y),B===null?U=w:B.sibling=w,B=w,T=A}if(y===R.length)return n(S,T),vt&&Ir(S,y),U;if(T===null){for(;y<R.length;y++)T=p(S,R[y],D),T!==null&&(E=s(T,E,y),B===null?U=T:B.sibling=T,B=T);return vt&&Ir(S,y),U}for(T=i(T);y<R.length;y++)A=_(T,S,y,R[y],D),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?y:A.key),E=s(A,E,y),B===null?U=A:B.sibling=A,B=A);return e&&T.forEach(function(C){return t(S,C)}),vt&&Ir(S,y),U}function O(S,E,R,D){if(R==null)throw Error(L(151));for(var U=null,B=null,T=E,y=E=0,A=null,w=R.next();T!==null&&!w.done;y++,w=R.next()){T.index>y?(A=T,T=null):A=T.sibling;var C=m(S,T,w.value,D);if(C===null){T===null&&(T=A);break}e&&T&&C.alternate===null&&t(S,T),E=s(C,E,y),B===null?U=C:B.sibling=C,B=C,T=A}if(w.done)return n(S,T),vt&&Ir(S,y),U;if(T===null){for(;!w.done;y++,w=R.next())w=p(S,w.value,D),w!==null&&(E=s(w,E,y),B===null?U=w:B.sibling=w,B=w);return vt&&Ir(S,y),U}for(T=i(T);!w.done;y++,w=R.next())w=_(T,S,y,w.value,D),w!==null&&(e&&w.alternate!==null&&T.delete(w.key===null?y:w.key),E=s(w,E,y),B===null?U=w:B.sibling=w,B=w);return e&&T.forEach(function(I){return t(S,I)}),vt&&Ir(S,y),U}function V(S,E,R,D){if(typeof R=="object"&&R!==null&&R.type===gs&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Gl:t:{for(var U=R.key;E!==null;){if(E.key===U){if(U=R.type,U===gs){if(E.tag===7){n(S,E.sibling),D=r(E,R.props.children),D.return=S,S=D;break t}}else if(E.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Ii&&Dy(U)===E.type){n(S,E.sibling),D=r(E,R.props),qa(D,R),D.return=S,S=D;break t}n(S,E);break}else t(S,E);E=E.sibling}R.type===gs?(D=Or(R.props.children,S.mode,D,R.key),D.return=S,S=D):(D=pu(R.type,R.key,R.props,null,S.mode,D),qa(D,R),D.return=S,S=D)}return a(S);case Qa:t:{for(U=R.key;E!==null;){if(E.key===U)if(E.tag===4&&E.stateNode.containerInfo===R.containerInfo&&E.stateNode.implementation===R.implementation){n(S,E.sibling),D=r(E,R.children||[]),D.return=S,S=D;break t}else{n(S,E);break}else t(S,E);E=E.sibling}D=Yh(R,S.mode,D),D.return=S,S=D}return a(S);case Ii:return U=R._init,R=U(R._payload),V(S,E,R,D)}if(Ka(R))return x(S,E,R,D);if(Ua(R)){if(U=Ua(R),typeof U!="function")throw Error(L(150));return R=U.call(R),O(S,E,R,D)}if(typeof R.then=="function")return V(S,E,Wl(R),D);if(R.$$typeof===$n)return V(S,E,$l(S,R),D);Jl(S,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,E!==null&&E.tag===6?(n(S,E.sibling),D=r(E,R),D.return=S,S=D):(n(S,E),D=Kh(R,S.mode,D),D.return=S,S=D),a(S)):n(S,E)}return function(S,E,R,D){try{Oo=0;var U=V(S,E,R,D);return Ps=null,U}catch(T){if(T===al||T===zc)throw T;var B=Xe(29,T,null,S.mode);return B.lanes=D,B.return=S,B}finally{}}}var $s=DT(!0),OT=DT(!1),mn=Bn(null),Vn=null;function xi(e){var t=e.alternate;jt(se,se.current&1),jt(mn,e),Vn===null&&(t===null||Ys.current!==null||t.memoizedState!==null)&&(Vn=e)}function VT(e){if(e.tag===22){if(jt(se,se.current),jt(mn,e),Vn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Vn=e)}}else Di()}function Di(){jt(se,se.current),jt(mn,mn.current)}function ti(e){de(mn),Vn===e&&(Vn=null),de(se)}var se=Bn(0);function Xu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||_d(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Zh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Pt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var nd={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=en(),r=Hi(i);r.payload=t,n!=null&&(r.callback=n),t=Fi(e,r,i),t!==null&&(nn(t,e,i),uo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=en(),r=Hi(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Fi(e,r,i),t!==null&&(nn(t,e,i),uo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=en(),i=Hi(n);i.tag=2,t!=null&&(i.callback=t),t=Fi(e,i,n),t!==null&&(nn(t,e,n),uo(t,e,n))}};function Oy(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!No(n,i)||!No(r,s):!0}function Vy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&nd.enqueueReplaceState(t,t.state,null)}function Br(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Pt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var $u=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function MT(e){$u(e)}function kT(e){console.error(e)}function PT(e){$u(e)}function Zu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function My(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function id(e,t,n){return n=Hi(n),n.tag=3,n.payload={element:null},n.callback=function(){Zu(e,t)},n}function LT(e){return e=Hi(e),e.tag=3,e}function UT(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){My(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){My(t,n,i),typeof r!="function"&&(Gi===null?Gi=new Set([this]):Gi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function K1(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&rl(t,n,r,!0),n=mn.current,n!==null){switch(n.tag){case 13:return Vn===null?hd():n.alternate===null&&Qt===0&&(Qt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Xf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),uf(e,i,r)),!1;case 22:return n.flags|=65536,i===Xf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),uf(e,i,r)),!1}throw Error(L(435,n.tag))}return uf(e,i,r),hd(),!1}if(vt)return t=mn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==Ff&&(e=Error(L(422),{cause:i}),xo(fn(e,n)))):(i!==Ff&&(t=Error(L(423),{cause:i}),xo(fn(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=fn(i,n),r=id(e.stateNode,i,r),Xh(e,r),Qt!==4&&(Qt=2)),!1;var s=Error(L(520),{cause:i});if(s=fn(s,n),go===null?go=[s]:go.push(s),Qt!==4&&(Qt=2),t===null)return!0;i=fn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=id(n.stateNode,i,e),Xh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Gi===null||!Gi.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=LT(r),UT(r,e,n,i),Xh(n,r),!1}n=n.return}while(n!==null);return!1}var jT=Error(L(461)),fe=!1;function ge(e,t,n,i){t.child=e===null?OT(t,null,n,i):$s(t,e.child,n,i)}function ky(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return jr(t),i=Sm(e,t,n,a,s,r),l=wm(),e!==null&&!fe?(Rm(e,t,r),li(e,t,r)):(vt&&l&&ym(t),t.flags|=1,ge(e,t,i,r),t.child)}function Py(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!gm(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,zT(e,t,s,i,r)):(e=pu(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!km(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:No,n(a,i)&&e.ref===t.ref)return li(e,t,r)}return t.flags|=1,e=ii(s,i),e.ref=t.ref,e.return=t,t.child=e}function zT(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(No(s,i)&&e.ref===t.ref)if(fe=!1,t.pendingProps=i=s,km(e,r))e.flags&131072&&(fe=!0);else return t.lanes=e.lanes,li(e,t,r)}return rd(e,t,n,i,r)}function BT(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return Ly(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&gu(t,s!==null?s.cachePool:null),s!==null?Sy(t,s):Wf(),VT(t);else return t.lanes=t.childLanes=536870912,Ly(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(gu(t,s.cachePool),Sy(t,s),Di(),t.memoizedState=null):(e!==null&&gu(t,null),Wf(),Di());return ge(e,t,r,n),t.child}function Ly(e,t,n,i){var r=Em();return r=r===null?null:{parent:re._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&gu(t,null),Wf(),VT(t),e!==null&&rl(e,t,i,!0),null}function vu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(L(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function rd(e,t,n,i,r){return jr(t),n=Sm(e,t,n,i,void 0,r),i=wm(),e!==null&&!fe?(Rm(e,t,r),li(e,t,r)):(vt&&i&&ym(t),t.flags|=1,ge(e,t,n,r),t.child)}function Uy(e,t,n,i,r,s){return jr(t),t.updateQueue=null,n=tT(t,i,n,r),JE(e),i=wm(),e!==null&&!fe?(Rm(e,t,s),li(e,t,s)):(vt&&i&&ym(t),t.flags|=1,ge(e,t,n,s),t.child)}function jy(e,t,n,i,r){if(jr(t),t.stateNode===null){var s=Ss,a=n.contextType;typeof a=="object"&&a!==null&&(s=xe(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=nd,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},Tm(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?xe(a):Ss,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Zh(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&nd.enqueueReplaceState(s,s.state,null),ho(t,i,s,r),co(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=Br(n,l);s.props=u;var h=s.context,d=n.contextType;a=Ss,typeof d=="object"&&d!==null&&(a=xe(d));var p=n.getDerivedStateFromProps;d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&Vy(t,s,i,a),Ci=!1;var m=t.memoizedState;s.state=m,ho(t,i,s,r),co(),h=t.memoizedState,l||m!==h||Ci?(typeof p=="function"&&(Zh(t,n,p,i),h=t.memoizedState),(u=Ci||Oy(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,$f(e,t),a=t.memoizedProps,d=Br(n,a),s.props=d,p=t.pendingProps,m=s.context,h=n.contextType,u=Ss,typeof h=="object"&&h!==null&&(u=xe(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||m!==u)&&Vy(t,s,i,u),Ci=!1,m=t.memoizedState,s.state=m,ho(t,i,s,r),co();var _=t.memoizedState;a!==p||m!==_||Ci||e!==null&&e.dependencies!==null&&Fu(e.dependencies)?(typeof l=="function"&&(Zh(t,n,l,i),_=t.memoizedState),(d=Ci||Oy(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&Fu(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),s.props=i,s.state=_,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,vu(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=$s(t,e.child,null,r),t.child=$s(t,null,n,r)):ge(e,t,n,r),t.memoizedState=s.state,e=t.child):e=li(e,t,r),e}function zy(e,t,n,i){return il(),t.flags|=256,ge(e,t,n,i),t.child}var Wh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jh(e){return{baseLanes:e,cachePool:YE()}}function tf(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=dn),e}function qT(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(se.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(vt){if(r?xi(t):Di(),vt){var l=Gt,u;if(u=l){t:{for(u=l,l=Nn;u.nodeType!==8;){if(!l){l=null;break t}if(u=Tn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Vr!==null?{id:Zn,overflow:Wn}:null,retryLane:536870912,hydrationErrors:null},u=Xe(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Me=t,Gt=null,u=!0):u=!1}u||Ur(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return _d(l)?t.lanes=32:t.lanes=536870912,null;ti(t)}return l=i.children,i=i.fallback,r?(Di(),r=t.mode,l=Wu({mode:"hidden",children:l},r),i=Or(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=Jh(n),r.childLanes=tf(e,a,n),t.memoizedState=Wh,i):(xi(t),sd(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(xi(t),t.flags&=-257,t=ef(e,t,n)):t.memoizedState!==null?(Di(),t.child=e.child,t.flags|=128,t=null):(Di(),r=i.fallback,l=t.mode,i=Wu({mode:"visible",children:i.children},l),r=Or(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,$s(t,e.child,null,n),i=t.child,i.memoizedState=Jh(n),i.childLanes=tf(e,a,n),t.memoizedState=Wh,t=r);else if(xi(t),_d(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(L(419)),i.stack="",i.digest=a,xo({value:i,source:null,stack:null}),t=ef(e,t,n)}else if(fe||rl(e,t,n,!1),a=(n&e.childLanes)!==0,fe||a){if(a=Vt,a!==null&&(i=n&-n,i=i&42?1:sm(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,ha(e,i),nn(a,e,i),jT;l.data==="$?"||hd(),t=ef(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Gt=Tn(l.nextSibling),Me=t,vt=!0,Mr=null,Nn=!1,e!==null&&(un[cn++]=Zn,un[cn++]=Wn,un[cn++]=Vr,Zn=e.id,Wn=e.overflow,Vr=t),t=sd(t,i.children),t.flags|=4096);return t}return r?(Di(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=ii(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=ii(h,r):(r=Or(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=Jh(n):(u=l.cachePool,u!==null?(h=re._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=YE(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=tf(e,a,n),t.memoizedState=Wh,i):(xi(t),n=e.child,e=n.sibling,n=ii(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function sd(e,t){return t=Wu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Wu(e,t){return e=Xe(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function ef(e,t,n){return $s(t,e.child,null,n),e=sd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function By(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Qf(e.return,t,n)}function nf(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function HT(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(ge(e,t,i.children,n),i=se.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&By(e,n,t);else if(e.tag===19)By(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(jt(se,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Xu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),nf(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Xu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}nf(t,!0,n,null,s);break;case"together":nf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function li(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),rr|=t.lanes,!(n&t.childLanes))if(e!==null){if(rl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=ii(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ii(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function km(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Fu(e)))}function Y1(e,t,n){switch(t.tag){case 3:Pu(t,t.stateNode.containerInfo),Ni(t,re,e.memoizedState.cache),il();break;case 27:case 5:Mf(t);break;case 4:Pu(t,t.stateNode.containerInfo);break;case 10:Ni(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(xi(t),t.flags|=128,null):n&t.child.childLanes?qT(e,t,n):(xi(t),e=li(e,t,n),e!==null?e.sibling:null);xi(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(rl(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return HT(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),jt(se,se.current),i)break;return null;case 22:case 23:return t.lanes=0,BT(e,t,n);case 24:Ni(t,re,e.memoizedState.cache)}return li(e,t,n)}function FT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)fe=!0;else{if(!km(e,n)&&!(t.flags&128))return fe=!1,Y1(e,t,n);fe=!!(e.flags&131072)}else fe=!1,vt&&t.flags&1048576&&QE(t,Hu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")gm(i)?(e=Br(i,e),t.tag=1,t=jy(null,t,i,e,n)):(t.tag=0,t=rd(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===nm){t.tag=11,t=ky(null,t,i,e,n);break t}else if(r===im){t.tag=14,t=Py(null,t,i,e,n);break t}}throw t=Of(i)||i,Error(L(306,t,""))}}return t;case 0:return rd(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Br(i,t.pendingProps),jy(e,t,i,r,n);case 3:t:{if(Pu(t,t.stateNode.containerInfo),e===null)throw Error(L(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,$f(e,t),ho(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Ni(t,re,i),i!==s.cache&&Kf(t,[re],n,!0),co(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=zy(e,t,i,n);break t}else if(i!==r){r=fn(Error(L(424)),t),xo(r),t=zy(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Gt=Tn(e.firstChild),Me=t,vt=!0,Mr=null,Nn=!0,n=OT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(il(),i===r){t=li(e,t,n);break t}ge(e,t,i,n)}t=t.child}return t;case 26:return vu(e,t),e===null?(n=r_(t.type,null,t.pendingProps,null))?t.memoizedState=n:vt||(n=t.type,e=t.pendingProps,i=sc(qi.current).createElement(n),i[Ne]=t,i[qe]=e,Te(i,n,e),ce(i),t.stateNode=i):t.memoizedState=r_(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Mf(t),e===null&&vt&&(i=t.stateNode=x0(t.type,t.pendingProps,qi.current),Me=t,Nn=!0,r=Gt,fr(t.type)?(vd=r,Gt=Tn(i.firstChild)):Gt=r),ge(e,t,t.pendingProps.children,n),vu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&vt&&((r=i=Gt)&&(i=AR(i,t.type,t.pendingProps,Nn),i!==null?(t.stateNode=i,Me=t,Gt=Tn(i.firstChild),Nn=!1,r=!0):r=!1),r||Ur(t)),Mf(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,gd(r,s)?i=null:a!==null&&gd(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=Sm(e,t,z1,null,null,n),Po._currentValue=r),vu(e,t),ge(e,t,i,n),t.child;case 6:return e===null&&vt&&((e=n=Gt)&&(n=bR(n,t.pendingProps,Nn),n!==null?(t.stateNode=n,Me=t,Gt=null,e=!0):e=!1),e||Ur(t)),null;case 13:return qT(e,t,n);case 4:return Pu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=$s(t,null,i,n):ge(e,t,i,n),t.child;case 11:return ky(e,t,t.type,t.pendingProps,n);case 7:return ge(e,t,t.pendingProps,n),t.child;case 8:return ge(e,t,t.pendingProps.children,n),t.child;case 12:return ge(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Ni(t,t.type,i.value),ge(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,jr(t),r=xe(r),i=i(r),t.flags|=1,ge(e,t,i,n),t.child;case 14:return Py(e,t,t.type,t.pendingProps,n);case 15:return zT(e,t,t.type,t.pendingProps,n);case 19:return HT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Wu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=ii(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return BT(e,t,n);case 24:return jr(t),i=xe(re),e===null?(r=Em(),r===null&&(r=Vt,s=vm(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},Tm(t),Ni(t,re,r)):(e.lanes&n&&($f(e,t),ho(t,null,null,n),co()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Ni(t,re,i)):(i=s.cache,Ni(t,re,i),i!==r.cache&&Kf(t,[re],n,!0))),ge(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(L(156,t.tag))}function Kn(e){e.flags|=4}function qy(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!V0(t)){if(t=mn.current,t!==null&&((dt&4194048)===dt?Vn!==null:(dt&62914560)!==dt&&!(dt&536870912)||t!==Vn))throw lo=Xf,XE;e.flags|=8192}}function tu(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?gE():536870912,e.lanes|=t,Zs|=t)}function Ha(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function X1(e,t,n){var i=t.pendingProps;switch(_m(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return Bt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ri(re),Fs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ba(t)?Kn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_y())),Bt(t),null;case 26:return n=t.memoizedState,e===null?(Kn(t),n!==null?(Bt(t),qy(t,n)):(Bt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Kn(t),Bt(t),qy(t,n)):(Bt(t),t.flags&=-16777217):(e.memoizedProps!==i&&Kn(t),Bt(t),t.flags&=-16777217),null;case 27:Lu(t),n=qi.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Kn(t);else{if(!i){if(t.stateNode===null)throw Error(L(166));return Bt(t),null}e=Dn.current,Ba(t)?gy(t):(e=x0(r,i,n),t.stateNode=e,Kn(t))}return Bt(t),null;case 5:if(Lu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Kn(t);else{if(!i){if(t.stateNode===null)throw Error(L(166));return Bt(t),null}if(e=Dn.current,Ba(t))gy(t);else{switch(r=sc(qi.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Ne]=t,e[qe]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(Te(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Kn(t)}}return Bt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Kn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(L(166));if(e=qi.current,Ba(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Me,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Ne]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||I0(e.nodeValue,n)),e||Ur(t)}else e=sc(e).createTextNode(i),e[Ne]=t,t.stateNode=e}return Bt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Ba(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(L(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(L(317));r[Ne]=t}else il(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bt(t),r=!1}else r=_y(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(ti(t),t):(ti(t),null)}if(ti(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),tu(t,t.updateQueue),Bt(t),null;case 4:return Fs(),e===null&&Hm(t.stateNode.containerInfo),Bt(t),null;case 10:return ri(t.type),Bt(t),null;case 19:if(de(se),r=t.memoizedState,r===null)return Bt(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)Ha(r,!1);else{if(Qt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Xu(e),s!==null){for(t.flags|=128,Ha(r,!1),e=s.updateQueue,t.updateQueue=e,tu(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)GE(n,e),n=n.sibling;return jt(se,se.current&1|2),t.child}e=e.sibling}r.tail!==null&&On()>tc&&(t.flags|=128,i=!0,Ha(r,!1),t.lanes=4194304)}else{if(!i)if(e=Xu(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,tu(t,e),Ha(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!vt)return Bt(t),null}else 2*On()-r.renderingStartTime>tc&&n!==536870912&&(t.flags|=128,i=!0,Ha(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=On(),t.sibling=null,e=se.current,jt(se,i?e&1|2:e&1),t):(Bt(t),null);case 22:case 23:return ti(t),Am(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),n=t.updateQueue,n!==null&&tu(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&de(kr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ri(re),Bt(t),null;case 25:return null;case 30:return null}throw Error(L(156,t.tag))}function $1(e,t){switch(_m(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ri(re),Fs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Lu(t),null;case 13:if(ti(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));il()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return de(se),null;case 4:return Fs(),null;case 10:return ri(t.type),null;case 22:case 23:return ti(t),Am(),e!==null&&de(kr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ri(re),null;case 25:return null;default:return null}}function GT(e,t){switch(_m(t),t.tag){case 3:ri(re),Fs();break;case 26:case 27:case 5:Lu(t);break;case 4:Fs();break;case 13:ti(t);break;case 19:de(se);break;case 10:ri(t.type);break;case 22:case 23:ti(t),Am(),e!==null&&de(kr);break;case 24:ri(re)}}function ul(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Ot(t,t.return,l)}}function ir(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){Ot(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){Ot(t,t.return,d)}}function QT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{WE(t,n)}catch(i){Ot(e,e.return,i)}}}function KT(e,t,n){n.props=Br(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Ot(e,t,i)}}function mo(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){Ot(e,t,r)}}function xn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Ot(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ot(e,t,r)}else n.current=null}function YT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Ot(e,e.return,r)}}function rf(e,t,n){try{var i=e.stateNode;yR(i,e.type,n,t),i[qe]=t}catch(r){Ot(e,e.return,r)}}function XT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fr(e.type)||e.tag===4}function sf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||XT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ad(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Kc));else if(i!==4&&(i===27&&fr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(ad(e,t,n),e=e.sibling;e!==null;)ad(e,t,n),e=e.sibling}function Ju(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&fr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Ju(e,t,n),e=e.sibling;e!==null;)Ju(e,t,n),e=e.sibling}function $T(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Te(t,i,n),t[Ne]=e,t[qe]=n}catch(s){Ot(e,e.return,s)}}var Xn=!1,Xt=!1,af=!1,Hy=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Z1(e,t){if(e=e.containerInfo,md=uc,e=LE(e),dm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,p=e,m=null;e:for(;;){for(var _;p!==n||r!==0&&p.nodeType!==3||(l=a+r),p!==s||i!==0&&p.nodeType!==3||(u=a+i),p.nodeType===3&&(a+=p.nodeValue.length),(_=p.firstChild)!==null;)m=p,p=_;for(;;){if(p===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(_=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(pd={focusedElem:e,selectionRange:n},uc=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){switch(t=ue,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var x=Br(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(x,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(O){Ot(n,n.return,O)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)yd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(L(163))}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}}function ZT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Si(e,n),i&4&&ul(5,n);break;case 1:if(Si(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Ot(n,n.return,a)}else{var r=Br(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Ot(n,n.return,a)}}i&64&&QT(n),i&512&&mo(n,n.return);break;case 3:if(Si(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{WE(e,t)}catch(a){Ot(n,n.return,a)}}break;case 27:t===null&&i&4&&$T(n);case 26:case 5:Si(e,n),t===null&&i&4&&YT(n),i&512&&mo(n,n.return);break;case 12:Si(e,n);break;case 13:Si(e,n),i&4&&t0(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=aR.bind(null,n),SR(e,n))));break;case 22:if(i=n.memoizedState!==null||Xn,!i){t=t!==null&&t.memoizedState!==null||Xt,r=Xn;var s=Xt;Xn=i,(Xt=t)&&!s?Ri(e,n,(n.subtreeFlags&8772)!==0):Si(e,n),Xn=r,Xt=s}break;case 30:break;default:Si(e,n)}}function WT(e){var t=e.alternate;t!==null&&(e.alternate=null,WT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&om(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Lt=null,je=!1;function Yn(e,t,n){for(n=n.child;n!==null;)JT(e,t,n),n=n.sibling}function JT(e,t,n){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(Wo,n)}catch{}switch(n.tag){case 26:Xt||xn(n,t),Yn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Xt||xn(n,t);var i=Lt,r=je;fr(n.type)&&(Lt=n.stateNode,je=!1),Yn(e,t,n),_o(n.stateNode),Lt=i,je=r;break;case 5:Xt||xn(n,t);case 6:if(i=Lt,r=je,Lt=null,Yn(e,t,n),Lt=i,je=r,Lt!==null)if(je)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(n.stateNode)}catch(s){Ot(n,t,s)}else try{Lt.removeChild(n.stateNode)}catch(s){Ot(n,t,s)}break;case 18:Lt!==null&&(je?(e=Lt,e_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),jo(e)):e_(Lt,n.stateNode));break;case 4:i=Lt,r=je,Lt=n.stateNode.containerInfo,je=!0,Yn(e,t,n),Lt=i,je=r;break;case 0:case 11:case 14:case 15:Xt||ir(2,n,t),Xt||ir(4,n,t),Yn(e,t,n);break;case 1:Xt||(xn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&KT(n,t,i)),Yn(e,t,n);break;case 21:Yn(e,t,n);break;case 22:Xt=(i=Xt)||n.memoizedState!==null,Yn(e,t,n),Xt=i;break;default:Yn(e,t,n)}}function t0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{jo(e)}catch(n){Ot(t,t.return,n)}}function W1(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Hy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Hy),t;default:throw Error(L(435,e.tag))}}function of(e,t){var n=W1(e);t.forEach(function(i){var r=oR.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Qe(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(fr(l.type)){Lt=l.stateNode,je=!1;break t}break;case 5:Lt=l.stateNode,je=!1;break t;case 3:case 4:Lt=l.stateNode.containerInfo,je=!0;break t}l=l.return}if(Lt===null)throw Error(L(160));JT(s,a,r),Lt=null,je=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)e0(t,e),t=t.sibling}var vn=null;function e0(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qe(t,e),Ke(e),i&4&&(ir(3,e,e.return),ul(3,e),ir(5,e,e.return));break;case 1:Qe(t,e),Ke(e),i&512&&(Xt||n===null||xn(n,n.return)),i&64&&Xn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=vn;if(Qe(t,e),Ke(e),i&512&&(Xt||n===null||xn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[el]||s[Ne]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Te(s,i,n),s[Ne]=e,ce(s),i=s;break t;case"link":var a=a_("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),Te(s,i,n),r.head.appendChild(s);break;case"meta":if(a=a_("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),Te(s,i,n),r.head.appendChild(s);break;default:throw Error(L(468,i))}s[Ne]=e,ce(s),i=s}e.stateNode=i}else o_(r,e.type,e.stateNode);else e.stateNode=s_(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?o_(r,e.type,e.stateNode):s_(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&rf(e,e.memoizedProps,n.memoizedProps)}break;case 27:Qe(t,e),Ke(e),i&512&&(Xt||n===null||xn(n,n.return)),n!==null&&i&4&&rf(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Qe(t,e),Ke(e),i&512&&(Xt||n===null||xn(n,n.return)),e.flags&32){r=e.stateNode;try{Qs(r,"")}catch(_){Ot(e,e.return,_)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,rf(e,r,n!==null?n.memoizedProps:r)),i&1024&&(af=!0);break;case 6:if(Qe(t,e),Ke(e),i&4){if(e.stateNode===null)throw Error(L(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){Ot(e,e.return,_)}}break;case 3:if(Au=null,r=vn,vn=ac(t.containerInfo),Qe(t,e),vn=r,Ke(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{jo(t.containerInfo)}catch(_){Ot(e,e.return,_)}af&&(af=!1,n0(e));break;case 4:i=vn,vn=ac(e.stateNode.containerInfo),Qe(t,e),Ke(e),vn=i;break;case 12:Qe(t,e),Ke(e);break;case 13:Qe(t,e),Ke(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(zm=On()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,of(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Xn,d=Xt;if(Xn=h||r,Xt=d||u,Qe(t,e),Xt=d,Xn=h,Ke(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||Xn||Xt||Cr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var p=u.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){Ot(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(_){Ot(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,of(e,n))));break;case 19:Qe(t,e),Ke(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,of(e,i)));break;case 30:break;case 21:break;default:Qe(t,e),Ke(e)}}function Ke(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(XT(i)){n=i;break}i=i.return}if(n==null)throw Error(L(160));switch(n.tag){case 27:var r=n.stateNode,s=sf(e);Ju(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Qs(a,""),n.flags&=-33);var l=sf(e);Ju(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=sf(e);ad(e,h,u);break;default:throw Error(L(161))}}catch(d){Ot(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function n0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;n0(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Si(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ZT(e,t.alternate,t),t=t.sibling}function Cr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ir(4,t,t.return),Cr(t);break;case 1:xn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&KT(t,t.return,n),Cr(t);break;case 27:_o(t.stateNode);case 26:case 5:xn(t,t.return),Cr(t);break;case 22:t.memoizedState===null&&Cr(t);break;case 30:Cr(t);break;default:Cr(t)}e=e.sibling}}function Ri(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Ri(r,s,n),ul(4,s);break;case 1:if(Ri(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){Ot(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)ZE(u[r],l)}catch(h){Ot(i,i.return,h)}}n&&a&64&&QT(s),mo(s,s.return);break;case 27:$T(s);case 26:case 5:Ri(r,s,n),n&&i===null&&a&4&&YT(s),mo(s,s.return);break;case 12:Ri(r,s,n);break;case 13:Ri(r,s,n),n&&a&4&&t0(r,s);break;case 22:s.memoizedState===null&&Ri(r,s,n),mo(s,s.return);break;case 30:break;default:Ri(r,s,n)}t=t.sibling}}function Pm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&sl(n))}function Lm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&sl(e))}function In(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)i0(e,t,n,i),t=t.sibling}function i0(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:In(e,t,n,i),r&2048&&ul(9,t);break;case 1:In(e,t,n,i);break;case 3:In(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&sl(e)));break;case 12:if(r&2048){In(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){Ot(t,t.return,u)}}else In(e,t,n,i);break;case 13:In(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?In(e,t,n,i):po(e,t):s._visibility&2?In(e,t,n,i):(s._visibility|=2,cs(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&Pm(a,t);break;case 24:In(e,t,n,i),r&2048&&Lm(t.alternate,t);break;default:In(e,t,n,i)}}function cs(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:cs(s,a,l,u,r),ul(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?cs(s,a,l,u,r):po(s,a):(d._visibility|=2,cs(s,a,l,u,r)),r&&h&2048&&Pm(a.alternate,a);break;case 24:cs(s,a,l,u,r),r&&h&2048&&Lm(a.alternate,a);break;default:cs(s,a,l,u,r)}t=t.sibling}}function po(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:po(n,i),r&2048&&Pm(i.alternate,i);break;case 24:po(n,i),r&2048&&Lm(i.alternate,i);break;default:po(n,i)}t=t.sibling}}var Xa=8192;function as(e){if(e.subtreeFlags&Xa)for(e=e.child;e!==null;)r0(e),e=e.sibling}function r0(e){switch(e.tag){case 26:as(e),e.flags&Xa&&e.memoizedState!==null&&LR(vn,e.memoizedState,e.memoizedProps);break;case 5:as(e);break;case 3:case 4:var t=vn;vn=ac(e.stateNode.containerInfo),as(e),vn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Xa,Xa=16777216,as(e),Xa=t):as(e));break;default:as(e)}}function s0(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Fa(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ue=i,o0(i,e)}s0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)a0(e),e=e.sibling}function a0(e){switch(e.tag){case 0:case 11:case 15:Fa(e),e.flags&2048&&ir(9,e,e.return);break;case 3:Fa(e);break;case 12:Fa(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Eu(e)):Fa(e);break;default:Fa(e)}}function Eu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ue=i,o0(i,e)}s0(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ir(8,t,t.return),Eu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Eu(t));break;default:Eu(t)}e=e.sibling}}function o0(e,t){for(;ue!==null;){var n=ue;switch(n.tag){case 0:case 11:case 15:ir(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:sl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ue=i;else t:for(n=e;ue!==null;){i=ue;var r=i.sibling,s=i.return;if(WT(i),i===n){ue=null;break t}if(r!==null){r.return=s,ue=r;break t}ue=s}}}var J1={getCacheForType:function(e){var t=xe(re),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},tR=typeof WeakMap=="function"?WeakMap:Map,Rt=0,Vt=null,at=null,dt=0,wt=0,Ye=null,ji=!1,fa=!1,Um=!1,ui=0,Qt=0,rr=0,Pr=0,jm=0,dn=0,Zs=0,go=null,ze=null,od=!1,zm=0,tc=1/0,ec=null,Gi=null,_e=0,Qi=null,Ws=null,Ls=0,ld=0,ud=null,l0=null,yo=0,cd=null;function en(){if(Rt&2&&dt!==0)return dt&-dt;if(W.T!==null){var e=Ks;return e!==0?e:qm()}return vE()}function u0(){dn===0&&(dn=!(dt&536870912)||vt?pE():536870912);var e=mn.current;return e!==null&&(e.flags|=32),dn}function nn(e,t,n){(e===Vt&&(wt===2||wt===9)||e.cancelPendingCommit!==null)&&(Js(e,0),zi(e,dt,dn,!1)),tl(e,n),(!(Rt&2)||e!==Vt)&&(e===Vt&&(!(Rt&2)&&(Pr|=n),Qt===4&&zi(e,dt,dn,!1)),qn(e))}function c0(e,t,n){if(Rt&6)throw Error(L(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Jo(e,t),r=i?iR(e,t):lf(e,t,!0),s=i;do{if(r===0){fa&&!i&&zi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!eR(n)){r=lf(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=go;var u=l.current.memoizedState.isDehydrated;if(u&&(Js(l,a).flags|=256),a=lf(l,a,!1),a!==2){if(Um&&!u){l.errorRecoveryDisabledLanes|=s,Pr|=s,r=4;break t}s=ze,ze=r,s!==null&&(ze===null?ze=s:ze.push.apply(ze,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){Js(e,0),zi(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(L(345));case 4:if((t&4194048)!==t)break;case 6:zi(i,t,dn,!ji);break t;case 2:ze=null;break;case 3:case 5:break;default:throw Error(L(329))}if((t&62914560)===t&&(r=zm+300-On(),10<r)){if(zi(i,t,dn,!ji),Mc(i,0,!0)!==0)break t;i.timeoutHandle=N0(Fy.bind(null,i,n,ze,ec,od,t,dn,Pr,Zs,ji,s,2,-0,0),r);break t}Fy(i,n,ze,ec,od,t,dn,Pr,Zs,ji,s,0,-0,0)}}break}while(!0);qn(e)}function Fy(e,t,n,i,r,s,a,l,u,h,d,p,m,_){if(e.timeoutHandle=-1,p=t.subtreeFlags,(p&8192||(p&16785408)===16785408)&&(ko={stylesheets:null,count:0,unsuspend:PR},r0(t),p=UR(),p!==null)){e.cancelPendingCommit=p(Qy.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,_)),zi(e,s,a,!h);return}Qy(e,t,s,n,i,r,a,l,u)}function eR(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!an(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zi(e,t,n,i){t&=~jm,t&=~Pr,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-tn(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&yE(e,n,t)}function Fc(){return Rt&6?!0:(cl(0),!1)}function Bm(){if(at!==null){if(wt===0)var e=at.return;else e=at,Jn=Zr=null,Im(e),Ps=null,Oo=0,e=at;for(;e!==null;)GT(e.alternate,e),e=e.return;at=null}}function Js(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,vR(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Bm(),Vt=e,at=n=ii(e.current,null),dt=t,wt=0,Ye=null,ji=!1,fa=Jo(e,t),Um=!1,Zs=dn=jm=Pr=rr=Qt=0,ze=go=null,od=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-tn(i),s=1<<r;t|=e[r],i&=~s}return ui=t,Uc(),n}function h0(e,t){it=null,W.H=Yu,t===al||t===zc?(t=Ay(),wt=3):t===XE?(t=Ay(),wt=4):wt=t===jT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ye=t,at===null&&(Qt=1,Zu(e,fn(t,e.current)))}function f0(){var e=W.H;return W.H=Yu,e===null?Yu:e}function d0(){var e=W.A;return W.A=J1,e}function hd(){Qt=4,ji||(dt&4194048)!==dt&&mn.current!==null||(fa=!0),!(rr&134217727)&&!(Pr&134217727)||Vt===null||zi(Vt,dt,dn,!1)}function lf(e,t,n){var i=Rt;Rt|=2;var r=f0(),s=d0();(Vt!==e||dt!==t)&&(ec=null,Js(e,t)),t=!1;var a=Qt;t:do try{if(wt!==0&&at!==null){var l=at,u=Ye;switch(wt){case 8:Bm(),a=6;break t;case 3:case 2:case 9:case 6:mn.current===null&&(t=!0);var h=wt;if(wt=0,Ye=null,Is(e,l,u,h),n&&fa){a=0;break t}break;default:h=wt,wt=0,Ye=null,Is(e,l,u,h)}}nR(),a=Qt;break}catch(d){h0(e,d)}while(!0);return t&&e.shellSuspendCounter++,Jn=Zr=null,Rt=i,W.H=r,W.A=s,at===null&&(Vt=null,dt=0,Uc()),a}function nR(){for(;at!==null;)m0(at)}function iR(e,t){var n=Rt;Rt|=2;var i=f0(),r=d0();Vt!==e||dt!==t?(ec=null,tc=On()+500,Js(e,t)):fa=Jo(e,t);t:do try{if(wt!==0&&at!==null){t=at;var s=Ye;e:switch(wt){case 1:wt=0,Ye=null,Is(e,t,s,1);break;case 2:case 9:if(Ty(s)){wt=0,Ye=null,Gy(t);break}t=function(){wt!==2&&wt!==9||Vt!==e||(wt=7),qn(e)},s.then(t,t);break t;case 3:wt=7;break t;case 4:wt=5;break t;case 7:Ty(s)?(wt=0,Ye=null,Gy(t)):(wt=0,Ye=null,Is(e,t,s,7));break;case 5:var a=null;switch(at.tag){case 26:a=at.memoizedState;case 5:case 27:var l=at;if(!a||V0(a)){wt=0,Ye=null;var u=l.sibling;if(u!==null)at=u;else{var h=l.return;h!==null?(at=h,Gc(h)):at=null}break e}}wt=0,Ye=null,Is(e,t,s,5);break;case 6:wt=0,Ye=null,Is(e,t,s,6);break;case 8:Bm(),Qt=6;break t;default:throw Error(L(462))}}rR();break}catch(d){h0(e,d)}while(!0);return Jn=Zr=null,W.H=i,W.A=r,Rt=n,at!==null?0:(Vt=null,dt=0,Uc(),Qt)}function rR(){for(;at!==null&&!Rw();)m0(at)}function m0(e){var t=FT(e.alternate,e,ui);e.memoizedProps=e.pendingProps,t===null?Gc(e):at=t}function Gy(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Uy(n,t,t.pendingProps,t.type,void 0,dt);break;case 11:t=Uy(n,t,t.pendingProps,t.type.render,t.ref,dt);break;case 5:Im(t);default:GT(n,t),t=at=GE(t,ui),t=FT(n,t,ui)}e.memoizedProps=e.pendingProps,t===null?Gc(e):at=t}function Is(e,t,n,i){Jn=Zr=null,Im(t),Ps=null,Oo=0;var r=t.return;try{if(K1(e,r,t,n,dt)){Qt=1,Zu(e,fn(n,e.current)),at=null;return}}catch(s){if(r!==null)throw at=r,s;Qt=1,Zu(e,fn(n,e.current)),at=null;return}t.flags&32768?(vt||i===1?e=!0:fa||dt&536870912?e=!1:(ji=e=!0,(i===2||i===9||i===3||i===6)&&(i=mn.current,i!==null&&i.tag===13&&(i.flags|=16384))),p0(t,e)):Gc(t)}function Gc(e){var t=e;do{if(t.flags&32768){p0(t,ji);return}e=t.return;var n=X1(t.alternate,t,ui);if(n!==null){at=n;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);Qt===0&&(Qt=5)}function p0(e,t){do{var n=$1(e.alternate,e);if(n!==null){n.flags&=32767,at=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){at=e;return}at=e=n}while(e!==null);Qt=6,at=null}function Qy(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do Qc();while(_e!==0);if(Rt&6)throw Error(L(327));if(t!==null){if(t===e.current)throw Error(L(177));if(s=t.lanes|t.childLanes,s|=mm,Pw(e,n,s,a,l,u),e===Vt&&(at=Vt=null,dt=0),Ws=t,Qi=e,Ls=n,ld=s,ud=r,l0=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,lR(Uu,function(){return E0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=W.T,W.T=null,r=Et.p,Et.p=2,a=Rt,Rt|=4;try{Z1(e,t,n)}finally{Rt=a,Et.p=r,W.T=i}}_e=1,g0(),y0(),_0()}}function g0(){if(_e===1){_e=0;var e=Qi,t=Ws,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=W.T,W.T=null;var i=Et.p;Et.p=2;var r=Rt;Rt|=4;try{e0(t,e);var s=pd,a=LE(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&PE(l.ownerDocument.documentElement,l)){if(u!==null&&dm(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var p=l.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var _=m.getSelection(),x=l.textContent.length,O=Math.min(u.start,x),V=u.end===void 0?O:Math.min(u.end,x);!_.extend&&O>V&&(a=V,V=O,O=a);var S=dy(l,O),E=dy(l,V);if(S&&E&&(_.rangeCount!==1||_.anchorNode!==S.node||_.anchorOffset!==S.offset||_.focusNode!==E.node||_.focusOffset!==E.offset)){var R=p.createRange();R.setStart(S.node,S.offset),_.removeAllRanges(),O>V?(_.addRange(R),_.extend(E.node,E.offset)):(R.setEnd(E.node,E.offset),_.addRange(R))}}}}for(p=[],_=l;_=_.parentNode;)_.nodeType===1&&p.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var D=p[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}uc=!!md,pd=md=null}finally{Rt=r,Et.p=i,W.T=n}}e.current=t,_e=2}}function y0(){if(_e===2){_e=0;var e=Qi,t=Ws,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=W.T,W.T=null;var i=Et.p;Et.p=2;var r=Rt;Rt|=4;try{ZT(e,t.alternate,t)}finally{Rt=r,Et.p=i,W.T=n}}_e=3}}function _0(){if(_e===4||_e===3){_e=0,Iw();var e=Qi,t=Ws,n=Ls,i=l0;t.subtreeFlags&10256||t.flags&10256?_e=5:(_e=0,Ws=Qi=null,v0(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Gi=null),am(n),t=t.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(Wo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=W.T,r=Et.p,Et.p=2,W.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{W.T=t,Et.p=r}}Ls&3&&Qc(),qn(e),r=e.pendingLanes,n&4194090&&r&42?e===cd?yo++:(yo=0,cd=e):yo=0,cl(0)}}function v0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,sl(t)))}function Qc(e){return g0(),y0(),_0(),E0()}function E0(){if(_e!==5)return!1;var e=Qi,t=ld;ld=0;var n=am(Ls),i=W.T,r=Et.p;try{Et.p=32>n?32:n,W.T=null,n=ud,ud=null;var s=Qi,a=Ls;if(_e=0,Ws=Qi=null,Ls=0,Rt&6)throw Error(L(331));var l=Rt;if(Rt|=4,a0(s.current),i0(s,s.current,a,n),Rt=l,cl(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(Wo,s)}catch{}return!0}finally{Et.p=r,W.T=i,v0(e,t)}}function Ky(e,t,n){t=fn(n,t),t=id(e.stateNode,t,2),e=Fi(e,t,2),e!==null&&(tl(e,2),qn(e))}function Ot(e,t,n){if(e.tag===3)Ky(e,e,n);else for(;t!==null;){if(t.tag===3){Ky(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Gi===null||!Gi.has(i))){e=fn(n,e),n=LT(2),i=Fi(t,n,2),i!==null&&(UT(n,i,t,e),tl(i,2),qn(i));break}}t=t.return}}function uf(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new tR;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Um=!0,r.add(n),e=sR.bind(null,e,t,n),t.then(e,e))}function sR(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Vt===e&&(dt&n)===n&&(Qt===4||Qt===3&&(dt&62914560)===dt&&300>On()-zm?!(Rt&2)&&Js(e,0):jm|=n,Zs===dt&&(Zs=0)),qn(e)}function T0(e,t){t===0&&(t=gE()),e=ha(e,t),e!==null&&(tl(e,t),qn(e))}function aR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),T0(e,n)}function oR(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(L(314))}i!==null&&i.delete(t),T0(e,n)}function lR(e,t){return rm(e,t)}var nc=null,hs=null,fd=!1,ic=!1,cf=!1,Lr=0;function qn(e){e!==hs&&e.next===null&&(hs===null?nc=hs=e:hs=hs.next=e),ic=!0,fd||(fd=!0,cR())}function cl(e,t){if(!cf&&ic){cf=!0;do for(var n=!1,i=nc;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-tn(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Yy(i,s))}else s=dt,s=Mc(i,i===Vt?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Jo(i,s)||(n=!0,Yy(i,s));i=i.next}while(n);cf=!1}}function uR(){A0()}function A0(){ic=fd=!1;var e=0;Lr!==0&&(_R()&&(e=Lr),Lr=0);for(var t=On(),n=null,i=nc;i!==null;){var r=i.next,s=b0(i,t);s===0?(i.next=null,n===null?nc=r:n.next=r,r===null&&(hs=n)):(n=i,(e!==0||s&3)&&(ic=!0)),i=r}cl(e)}function b0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-tn(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=kw(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=Vt,n=dt,n=Mc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(wt===2||wt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&kh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Jo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&kh(i),am(n)){case 2:case 8:n=dE;break;case 32:n=Uu;break;case 268435456:n=mE;break;default:n=Uu}return i=S0.bind(null,e),n=rm(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&kh(i),e.callbackPriority=2,e.callbackNode=null,2}function S0(e,t){if(_e!==0&&_e!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Qc()&&e.callbackNode!==n)return null;var i=dt;return i=Mc(e,e===Vt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(c0(e,i,t),b0(e,On()),e.callbackNode!=null&&e.callbackNode===n?S0.bind(null,e):null)}function Yy(e,t){if(Qc())return null;c0(e,t,!0)}function cR(){ER(function(){Rt&6?rm(fE,uR):A0()})}function qm(){return Lr===0&&(Lr=pE()),Lr}function Xy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:fu(""+e)}function $y(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function hR(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=Xy((r[qe]||null).action),a=i.submitter;a&&(t=(t=a[qe]||null)?Xy(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new kc("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Lr!==0){var u=a?$y(r,a):new FormData(r);ed(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?$y(r,a):new FormData(r),ed(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var hf=0;hf<Hf.length;hf++){var ff=Hf[hf],fR=ff.toLowerCase(),dR=ff[0].toUpperCase()+ff.slice(1);Sn(fR,"on"+dR)}Sn(jE,"onAnimationEnd");Sn(zE,"onAnimationIteration");Sn(BE,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(x1,"onTransitionRun");Sn(D1,"onTransitionStart");Sn(O1,"onTransitionCancel");Sn(qE,"onTransitionEnd");Gs("onMouseEnter",["mouseout","mouseover"]);Gs("onMouseLeave",["mouseout","mouseover"]);Gs("onPointerEnter",["pointerout","pointerover"]);Gs("onPointerLeave",["pointerout","pointerover"]);Yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vo));function w0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){$u(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){$u(d)}r.currentTarget=null,s=u}}}}function st(e,t){var n=t[Pf];n===void 0&&(n=t[Pf]=new Set);var i=e+"__bubble";n.has(i)||(R0(t,e,2,!1),n.add(i))}function df(e,t,n){var i=0;t&&(i|=4),R0(n,e,i,t)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Hm(e){if(!e[eu]){e[eu]=!0,EE.forEach(function(n){n!=="selectionchange"&&(mR.has(n)||df(n,!1,e),df(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[eu]||(t[eu]=!0,df("selectionchange",!1,t))}}function R0(e,t,n,i){switch(U0(t)){case 2:var r=BR;break;case 8:r=qR;break;default:r=Km}n=r.bind(null,t,n,e),r=void 0,!zf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function mf(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=_s(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}CE(function(){var h=s,d=um(n),p=[];t:{var m=HE.get(e);if(m!==void 0){var _=kc,x=e;switch(e){case"keypress":if(mu(n)===0)break t;case"keydown":case"keyup":_=l1;break;case"focusin":x="focus",_=Hh;break;case"focusout":x="blur",_=Hh;break;case"beforeblur":case"afterblur":_=Hh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=iy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=$w;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=h1;break;case jE:case zE:case BE:_=Jw;break;case qE:_=d1;break;case"scroll":case"scrollend":_=Yw;break;case"wheel":_=p1;break;case"copy":case"cut":case"paste":_=e1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=sy;break;case"toggle":case"beforetoggle":_=y1}var O=(t&4)!==0,V=!O&&(e==="scroll"||e==="scrollend"),S=O?m!==null?m+"Capture":null:m;O=[];for(var E=h,R;E!==null;){var D=E;if(R=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||R===null||S===null||(D=Io(E,S),D!=null&&O.push(Mo(E,D,R))),V)break;E=E.return}0<O.length&&(m=new _(m,x,null,n,d),p.push({event:m,listeners:O}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==jf&&(x=n.relatedTarget||n.fromElement)&&(_s(x)||x[ua]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(x=n.relatedTarget||n.toElement,_=h,x=x?_s(x):null,x!==null&&(V=Zo(x),O=x.tag,x!==V||O!==5&&O!==27&&O!==6)&&(x=null)):(_=null,x=h),_!==x)){if(O=iy,D="onMouseLeave",S="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(O=sy,D="onPointerLeave",S="onPointerEnter",E="pointer"),V=_==null?m:Ya(_),R=x==null?m:Ya(x),m=new O(D,E+"leave",_,n,d),m.target=V,m.relatedTarget=R,D=null,_s(d)===h&&(O=new O(S,E+"enter",x,n,d),O.target=R,O.relatedTarget=V,D=O),V=D,_&&x)e:{for(O=_,S=x,E=0,R=O;R;R=os(R))E++;for(R=0,D=S;D;D=os(D))R++;for(;0<E-R;)O=os(O),E--;for(;0<R-E;)S=os(S),R--;for(;E--;){if(O===S||S!==null&&O===S.alternate)break e;O=os(O),S=os(S)}O=null}else O=null;_!==null&&Zy(p,m,_,O,!1),x!==null&&V!==null&&Zy(p,V,x,O,!0)}}t:{if(m=h?Ya(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var U=uy;else if(ly(m))if(ME)U=I1;else{U=w1;var B=S1}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&lm(h.elementType)&&(U=uy):U=R1;if(U&&(U=U(e,h))){VE(p,U,n,d);break t}B&&B(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Uf(m,"number",m.value)}switch(B=h?Ya(h):window,e){case"focusin":(ly(B)||B.contentEditable==="true")&&(Ts=B,Bf=h,ao=null);break;case"focusout":ao=Bf=Ts=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,my(p,n,d);break;case"selectionchange":if(N1)break;case"keydown":case"keyup":my(p,n,d)}var T;if(fm)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else Es?DE(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(xE&&n.locale!=="ko"&&(Es||y!=="onCompositionStart"?y==="onCompositionEnd"&&Es&&(T=NE()):(Ui=d,cm="value"in Ui?Ui.value:Ui.textContent,Es=!0)),B=rc(h,y),0<B.length&&(y=new ry(y,e,null,n,d),p.push({event:y,listeners:B}),T?y.data=T:(T=OE(n),T!==null&&(y.data=T)))),(T=v1?E1(e,n):T1(e,n))&&(y=rc(h,"onBeforeInput"),0<y.length&&(B=new ry("onBeforeInput","beforeinput",null,n,d),p.push({event:B,listeners:y}),B.data=T)),hR(p,e,h,n,d)}w0(p,t)})}function Mo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rc(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Io(e,n),r!=null&&i.unshift(Mo(e,r,s)),r=Io(e,t),r!=null&&i.push(Mo(e,r,s))),e.tag===3)return i;e=e.return}return[]}function os(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Zy(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=Io(n,s),h!=null&&a.unshift(Mo(n,h,u))):r||(h=Io(n,s),h!=null&&a.push(Mo(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var pR=/\r\n?/g,gR=/\u0000|\uFFFD/g;function Wy(e){return(typeof e=="string"?e:""+e).replace(pR,`
`).replace(gR,"")}function I0(e,t){return t=Wy(t),Wy(e)===t}function Kc(){}function It(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Qs(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Qs(e,""+i);break;case"className":Yl(e,"class",i);break;case"tabIndex":Yl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Yl(e,n,i);break;case"style":IE(e,i,s);break;case"data":if(t!=="object"){Yl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=fu(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&It(e,t,"name",r.name,r,null),It(e,t,"formEncType",r.formEncType,r,null),It(e,t,"formMethod",r.formMethod,r,null),It(e,t,"formTarget",r.formTarget,r,null)):(It(e,t,"encType",r.encType,r,null),It(e,t,"method",r.method,r,null),It(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=fu(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Kc);break;case"onScroll":i!=null&&st("scroll",e);break;case"onScrollEnd":i!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(L(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(L(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=fu(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":st("beforetoggle",e),st("toggle",e),hu(e,"popover",i);break;case"xlinkActuate":Qn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Qn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Qn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Qn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Qn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Qn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":hu(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Qw.get(n)||n,hu(e,n,i))}}function dd(e,t,n,i,r,s){switch(n){case"style":IE(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(L(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(L(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Qs(e,i):(typeof i=="number"||typeof i=="bigint")&&Qs(e,""+i);break;case"onScroll":i!=null&&st("scroll",e);break;case"onScrollEnd":i!=null&&st("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Kc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!TE.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[qe]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):hu(e,n,i)}}}function Te(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(L(137,t));default:It(e,t,s,a,n,null)}}r&&It(e,t,"srcSet",n.srcSet,n,null),i&&It(e,t,"src",n.src,n,null);return;case"input":st("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(L(137,t));break;default:It(e,t,i,d,n,null)}}SE(e,s,l,u,h,a,r,!1),ju(e);return;case"select":st("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:It(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?Ds(e,!!i,t,!1):n!=null&&Ds(e,!!i,n,!0);return;case"textarea":st("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(L(91));break;default:It(e,t,a,l,n,null)}RE(e,i,r,s),ju(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:It(e,t,u,i,n,null)}return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(i=0;i<Vo.length;i++)st(Vo[i],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(L(137,t));default:It(e,t,h,i,n,null)}return;default:if(lm(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&dd(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&It(e,t,l,i,n,null))}function yR(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var p=n[_];if(n.hasOwnProperty(_)&&p!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=p;default:i.hasOwnProperty(_)||It(e,t,_,null,i,p)}}for(var m in i){var _=i[m];if(p=n[m],i.hasOwnProperty(m)&&(_!=null||p!=null))switch(m){case"type":s=_;break;case"name":r=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(L(137,t));break;default:_!==p&&It(e,t,m,_,i,p)}}Lf(e,a,l,u,h,d,s,r);return;case"select":_=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(s)||It(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&It(e,t,r,s,i,u)}t=l,n=a,i=_,m!=null?Ds(e,!!n,m,!1):!!i!=!!n&&(t!=null?Ds(e,!!n,t,!0):Ds(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:It(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":_=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(L(91));break;default:r!==s&&It(e,t,a,r,i,s)}wE(e,m,_);return;case"option":for(var x in n)if(m=n[x],n.hasOwnProperty(x)&&m!=null&&!i.hasOwnProperty(x))switch(x){case"selected":e.selected=!1;break;default:It(e,t,x,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:It(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)m=n[O],n.hasOwnProperty(O)&&m!=null&&!i.hasOwnProperty(O)&&It(e,t,O,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(L(137,t));break;default:It(e,t,h,m,i,_)}return;default:if(lm(t)){for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!==void 0&&!i.hasOwnProperty(V)&&dd(e,t,V,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||dd(e,t,d,m,i,_);return}}for(var S in n)m=n[S],n.hasOwnProperty(S)&&m!=null&&!i.hasOwnProperty(S)&&It(e,t,S,null,i,m);for(p in i)m=i[p],_=n[p],!i.hasOwnProperty(p)||m===_||m==null&&_==null||It(e,t,p,m,i,_)}var md=null,pd=null;function sc(e){return e.nodeType===9?e:e.ownerDocument}function Jy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function C0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function gd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pf=null;function _R(){var e=window.event;return e&&e.type==="popstate"?e===pf?!1:(pf=e,!0):(pf=null,!1)}var N0=typeof setTimeout=="function"?setTimeout:void 0,vR=typeof clearTimeout=="function"?clearTimeout:void 0,t_=typeof Promise=="function"?Promise:void 0,ER=typeof queueMicrotask=="function"?queueMicrotask:typeof t_<"u"?function(e){return t_.resolve(null).then(e).catch(TR)}:N0;function TR(e){setTimeout(function(){throw e})}function fr(e){return e==="head"}function e_(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&_o(a.documentElement),n&2&&_o(a.body),n&4)for(n=a.head,_o(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[el]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),jo(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);jo(t)}function yd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":yd(n),om(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function AR(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[el])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Tn(e.nextSibling),e===null)break}return null}function bR(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Tn(e.nextSibling),e===null))return null;return e}function _d(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function SR(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Tn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var vd=null;function n_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function x0(e,t,n){switch(t=sc(n),e){case"html":if(e=t.documentElement,!e)throw Error(L(452));return e;case"head":if(e=t.head,!e)throw Error(L(453));return e;case"body":if(e=t.body,!e)throw Error(L(454));return e;default:throw Error(L(451))}}function _o(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);om(e)}var pn=new Map,i_=new Set;function ac(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var gi=Et.d;Et.d={f:wR,r:RR,D:IR,C:CR,L:NR,m:xR,X:OR,S:DR,M:VR};function wR(){var e=gi.f(),t=Fc();return e||t}function RR(e){var t=ca(e);t!==null&&t.tag===5&&t.type==="form"?bT(t):gi.r(e)}var da=typeof document>"u"?null:document;function D0(e,t,n){var i=da;if(i&&typeof t=="string"&&t){var r=hn(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),i_.has(r)||(i_.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),Te(t,"link",e),ce(t),i.head.appendChild(t)))}}function IR(e){gi.D(e),D0("dns-prefetch",e,null)}function CR(e,t){gi.C(e,t),D0("preconnect",e,t)}function NR(e,t,n){gi.L(e,t,n);var i=da;if(i&&e&&t){var r='link[rel="preload"][as="'+hn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+hn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+hn(n.imageSizes)+'"]')):r+='[href="'+hn(e)+'"]';var s=r;switch(t){case"style":s=ta(e);break;case"script":s=ma(e)}pn.has(s)||(e=Pt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),pn.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(hl(s))||t==="script"&&i.querySelector(fl(s))||(t=i.createElement("link"),Te(t,"link",e),ce(t),i.head.appendChild(t)))}}function xR(e,t){gi.m(e,t);var n=da;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+hn(i)+'"][href="'+hn(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=ma(e)}if(!pn.has(s)&&(e=Pt({rel:"modulepreload",href:e},t),pn.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(fl(s)))return}i=n.createElement("link"),Te(i,"link",e),ce(i),n.head.appendChild(i)}}}function DR(e,t,n){gi.S(e,t,n);var i=da;if(i&&e){var r=xs(i).hoistableStyles,s=ta(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(hl(s)))l.loading=5;else{e=Pt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=pn.get(s))&&Fm(e,n);var u=a=i.createElement("link");ce(u),Te(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Tu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function OR(e,t){gi.X(e,t);var n=da;if(n&&e){var i=xs(n).hoistableScripts,r=ma(e),s=i.get(r);s||(s=n.querySelector(fl(r)),s||(e=Pt({src:e,async:!0},t),(t=pn.get(r))&&Gm(e,t),s=n.createElement("script"),ce(s),Te(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function VR(e,t){gi.M(e,t);var n=da;if(n&&e){var i=xs(n).hoistableScripts,r=ma(e),s=i.get(r);s||(s=n.querySelector(fl(r)),s||(e=Pt({src:e,async:!0,type:"module"},t),(t=pn.get(r))&&Gm(e,t),s=n.createElement("script"),ce(s),Te(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function r_(e,t,n,i){var r=(r=qi.current)?ac(r):null;if(!r)throw Error(L(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ta(n.href),n=xs(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ta(n.href);var s=xs(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(hl(e)))&&!s._p&&(a.instance=s,a.state.loading=5),pn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},pn.set(e,n),s||MR(r,e,n,a.state))),t&&i===null)throw Error(L(528,""));return a}if(t&&i!==null)throw Error(L(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ma(n),n=xs(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(L(444,e))}}function ta(e){return'href="'+hn(e)+'"'}function hl(e){return'link[rel="stylesheet"]['+e+"]"}function O0(e){return Pt({},e,{"data-precedence":e.precedence,precedence:null})}function MR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Te(t,"link",n),ce(t),e.head.appendChild(t))}function ma(e){return'[src="'+hn(e)+'"]'}function fl(e){return"script[async]"+e}function s_(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+hn(n.href)+'"]');if(i)return t.instance=i,ce(i),i;var r=Pt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ce(i),Te(i,"style",r),Tu(i,n.precedence,e),t.instance=i;case"stylesheet":r=ta(n.href);var s=e.querySelector(hl(r));if(s)return t.state.loading|=4,t.instance=s,ce(s),s;i=O0(n),(r=pn.get(r))&&Fm(i,r),s=(e.ownerDocument||e).createElement("link"),ce(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Te(s,"link",i),t.state.loading|=4,Tu(s,n.precedence,e),t.instance=s;case"script":return s=ma(n.src),(r=e.querySelector(fl(s)))?(t.instance=r,ce(r),r):(i=n,(r=pn.get(s))&&(i=Pt({},n),Gm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),ce(r),Te(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(L(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Tu(i,n.precedence,e));return t.instance}function Tu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Fm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Gm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Au=null;function a_(e,t,n){if(Au===null){var i=new Map,r=Au=new Map;r.set(n,i)}else r=Au,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[el]||s[Ne]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function o_(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function kR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function V0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var ko=null;function PR(){}function LR(e,t,n){if(ko===null)throw Error(L(475));var i=ko;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=ta(n.href),s=e.querySelector(hl(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=oc.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,ce(s);return}s=e.ownerDocument||e,n=O0(n),(r=pn.get(r))&&Fm(n,r),s=s.createElement("link"),ce(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Te(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=oc.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function UR(){if(ko===null)throw Error(L(475));var e=ko;return e.stylesheets&&e.count===0&&Ed(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Ed(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function oc(){if(this.count--,this.count===0){if(this.stylesheets)Ed(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var lc=null;function Ed(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,lc=new Map,t.forEach(jR,e),lc=null,oc.call(e))}function jR(e,t){if(!(t.state.loading&4)){var n=lc.get(e);if(n)var i=n.get(null);else{n=new Map,lc.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=oc.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Po={$$typeof:$n,Provider:null,Consumer:null,_currentValue:Dr,_currentValue2:Dr,_threadCount:0};function zR(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ph(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ph(0),this.hiddenUpdates=Ph(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function M0(e,t,n,i,r,s,a,l,u,h,d,p){return e=new zR(e,t,n,a,l,u,h,p),t=1,s===!0&&(t|=24),s=Xe(3,null,null,t),e.current=s,s.stateNode=e,t=vm(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},Tm(s),e}function k0(e){return e?(e=Ss,e):Ss}function P0(e,t,n,i,r,s){r=k0(r),i.context===null?i.context=r:i.pendingContext=r,i=Hi(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Fi(e,i,t),n!==null&&(nn(n,e,t),uo(n,e,t))}function l_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Qm(e,t){l_(e,t),(e=e.alternate)&&l_(e,t)}function L0(e){if(e.tag===13){var t=ha(e,67108864);t!==null&&nn(t,e,67108864),Qm(e,67108864)}}var uc=!0;function BR(e,t,n,i){var r=W.T;W.T=null;var s=Et.p;try{Et.p=2,Km(e,t,n,i)}finally{Et.p=s,W.T=r}}function qR(e,t,n,i){var r=W.T;W.T=null;var s=Et.p;try{Et.p=8,Km(e,t,n,i)}finally{Et.p=s,W.T=r}}function Km(e,t,n,i){if(uc){var r=Td(i);if(r===null)mf(e,t,i,cc,n),u_(e,i);else if(FR(r,e,t,n,i))i.stopPropagation();else if(u_(e,i),t&4&&-1<HR.indexOf(e)){for(;r!==null;){var s=ca(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=Rr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-tn(a);l.entanglements[1]|=u,a&=~u}qn(s),!(Rt&6)&&(tc=On()+500,cl(0))}}break;case 13:l=ha(s,2),l!==null&&nn(l,s,2),Fc(),Qm(s,2)}if(s=Td(i),s===null&&mf(e,t,i,cc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else mf(e,t,i,null,n)}}function Td(e){return e=um(e),Ym(e)}var cc=null;function Ym(e){if(cc=null,e=_s(e),e!==null){var t=Zo(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=lE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return cc=e,null}function U0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Cw()){case fE:return 2;case dE:return 8;case Uu:case Nw:return 32;case mE:return 268435456;default:return 32}default:return 32}}var Ad=!1,Ki=null,Yi=null,Xi=null,Lo=new Map,Uo=new Map,Oi=[],HR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u_(e,t){switch(e){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":Lo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uo.delete(t.pointerId)}}function Ga(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=ca(t),t!==null&&L0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function FR(e,t,n,i,r){switch(t){case"focusin":return Ki=Ga(Ki,e,t,n,i,r),!0;case"dragenter":return Yi=Ga(Yi,e,t,n,i,r),!0;case"mouseover":return Xi=Ga(Xi,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Lo.set(s,Ga(Lo.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Uo.set(s,Ga(Uo.get(s)||null,e,t,n,i,r)),!0}return!1}function j0(e){var t=_s(e.target);if(t!==null){var n=Zo(t);if(n!==null){if(t=n.tag,t===13){if(t=lE(n),t!==null){e.blockedOn=t,Lw(e.priority,function(){if(n.tag===13){var i=en();i=sm(i);var r=ha(n,i);r!==null&&nn(r,n,i),Qm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Td(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);jf=i,n.target.dispatchEvent(i),jf=null}else return t=ca(n),t!==null&&L0(t),e.blockedOn=n,!1;t.shift()}return!0}function c_(e,t,n){bu(e)&&n.delete(t)}function GR(){Ad=!1,Ki!==null&&bu(Ki)&&(Ki=null),Yi!==null&&bu(Yi)&&(Yi=null),Xi!==null&&bu(Xi)&&(Xi=null),Lo.forEach(c_),Uo.forEach(c_)}function nu(e,t){e.blockedOn===t&&(e.blockedOn=null,Ad||(Ad=!0,oe.unstable_scheduleCallback(oe.unstable_NormalPriority,GR)))}var iu=null;function h_(e){iu!==e&&(iu=e,oe.unstable_scheduleCallback(oe.unstable_NormalPriority,function(){iu===e&&(iu=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(Ym(i||n)===null)continue;break}var s=ca(n);s!==null&&(e.splice(t,3),t-=3,ed(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function jo(e){function t(u){return nu(u,e)}Ki!==null&&nu(Ki,e),Yi!==null&&nu(Yi,e),Xi!==null&&nu(Xi,e),Lo.forEach(t),Uo.forEach(t);for(var n=0;n<Oi.length;n++){var i=Oi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Oi.length&&(n=Oi[0],n.blockedOn===null);)j0(n),n.blockedOn===null&&Oi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[qe]||null;if(typeof s=="function")a||h_(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[qe]||null)l=a.formAction;else if(Ym(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),h_(n)}}}function Xm(e){this._internalRoot=e}Yc.prototype.render=Xm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));var n=t.current,i=en();P0(n,i,e,t,null,null)};Yc.prototype.unmount=Xm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;P0(e.current,2,null,e,null,null),Fc(),t[ua]=null}};function Yc(e){this._internalRoot=e}Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=vE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Oi.length&&t!==0&&t<Oi[n].priority;n++);Oi.splice(n,0,e),n===0&&j0(e)}};var f_=aE.version;if(f_!=="19.1.1")throw Error(L(527,f_,"19.1.1"));Et.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=Tw(t),e=e!==null?uE(e):null,e=e===null?null:e.stateNode,e};var QR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{Wo=ru.inject(QR),Je=ru}catch{}}Oc.createRoot=function(e,t){if(!oE(e))throw Error(L(299));var n=!1,i="",r=MT,s=kT,a=PT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=M0(e,1,!1,null,null,n,i,r,s,a,l,null),e[ua]=t.current,Hm(e),new Xm(t)};Oc.hydrateRoot=function(e,t,n){if(!oE(e))throw Error(L(299));var i=!1,r="",s=MT,a=kT,l=PT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=M0(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=k0(null),n=t.current,i=en(),i=sm(i),r=Hi(i),r.callback=null,Fi(n,r,i),n=i,t.current.lanes=n,tl(t,n),qn(t),e[ua]=t.current,Hm(e),new Yc(t)};Oc.version="19.1.1";function z0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z0)}catch(e){console.error(e)}}z0(),tE.exports=Oc;var KR=tE.exports;const YR=()=>{};var d_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},XR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,p=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[p],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(B0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):XR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const p=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||p==null)throw new $R;const m=s<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),p!==64){const x=h<<6&192|p;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class $R extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZR=function(e){const t=B0(e);return q0.encodeByteArray(t,!0)},hc=function(e){return ZR(e).replace(/\./g,"")},H0=function(e){try{return q0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=()=>WR().__FIREBASE_DEFAULTS__,t2=()=>{if(typeof process>"u"||typeof d_>"u")return;const e=d_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},e2=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&H0(e[1]);return t&&JSON.parse(t)},Xc=()=>{try{return YR()||JR()||t2()||e2()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},F0=e=>{var t,n;return(n=(t=Xc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},n2=e=>{const t=F0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},G0=()=>{var e;return(e=Xc())==null?void 0:e.config},Q0=e=>{var t;return(t=Xc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function K0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[hc(JSON.stringify(n)),hc(JSON.stringify(a)),""].join(".")}const vo={};function s2(){const e={prod:[],emulator:[]};for(const t of Object.keys(vo))vo[t]?e.emulator.push(t):e.prod.push(t);return e}function a2(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let m_=!1;function Y0(e,t){if(typeof window>"u"||typeof document>"u"||!pa(window.location.host)||vo[e]===t||vo[e]||m_)return;vo[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=s2().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{m_=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=a2(i),_=n("text"),x=document.getElementById(_)||document.createElement("span"),O=n("learnmore"),V=document.getElementById(O)||document.createElement("a"),S=n("preprendIcon"),E=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(V,O);const D=h();u(E,S),R.append(E,x,V,D),document.body.appendChild(R)}s?(x.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function o2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(De())}function l2(){var t;const e=(t=Xc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function u2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function c2(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function h2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function f2(){const e=De();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function d2(){return!l2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function m2(){try{return typeof indexedDB=="object"}catch{return!1}}function p2(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="FirebaseError";class yi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=g2,Object.setPrototypeOf(this,yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dl.prototype.create)}}class dl{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?y2(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new yi(r,l,i)}}function y2(e,t){return e.replace(_2,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const _2=/\{\$([^}]+)}/g;function v2(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function qr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(p_(s)&&p_(a)){if(!qr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function p_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function $a(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(s)}}),t}function Za(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function E2(e,t){const n=new T2(e,t);return n.subscribe.bind(n)}class T2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");A2(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=gf),r.error===void 0&&(r.error=gf),r.complete===void 0&&(r.complete=gf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function A2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function gf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(e){return e&&e._delegate?e._delegate:e}class Hr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new i2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(w2(t))try{this.getOrInitializeService({instanceIdentifier:Nr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Nr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Nr){return this.instances.has(t)}getOptions(t=Nr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:S2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Nr){return this.component?this.component.multipleInstances?t:Nr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function S2(e){return e===Nr?void 0:e}function w2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new b2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));const I2={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},C2=ot.INFO,N2={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},x2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=N2[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class $m{constructor(t){this.name=t,this._logLevel=C2,this._logHandler=x2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?I2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...t),this._logHandler(this,ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...t),this._logHandler(this,ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...t),this._logHandler(this,ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...t),this._logHandler(this,ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...t),this._logHandler(this,ot.ERROR,...t)}}const D2=(e,t)=>t.some(n=>e instanceof n);let g_,y_;function O2(){return g_||(g_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V2(){return y_||(y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X0=new WeakMap,bd=new WeakMap,$0=new WeakMap,yf=new WeakMap,Zm=new WeakMap;function M2(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n($i(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&X0.set(n,e)}).catch(()=>{}),Zm.set(t,e),t}function k2(e){if(bd.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});bd.set(e,t)}let Sd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return bd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||$0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $i(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function P2(e){Sd=e(Sd)}function L2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(_f(this),t,...n);return $0.set(i,t.sort?t.sort():[t]),$i(i)}:V2().includes(e)?function(...t){return e.apply(_f(this),t),$i(X0.get(this))}:function(...t){return $i(e.apply(_f(this),t))}}function U2(e){return typeof e=="function"?L2(e):(e instanceof IDBTransaction&&k2(e),D2(e,O2())?new Proxy(e,Sd):e)}function $i(e){if(e instanceof IDBRequest)return M2(e);if(yf.has(e))return yf.get(e);const t=U2(e);return t!==e&&(yf.set(e,t),Zm.set(t,e)),t}const _f=e=>Zm.get(e);function j2(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=$i(a);return i&&a.addEventListener("upgradeneeded",u=>{i($i(a.result),u.oldVersion,u.newVersion,$i(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const z2=["get","getKey","getAll","getAllKeys","count"],B2=["put","add","delete","clear"],vf=new Map;function __(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(vf.get(t))return vf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=B2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||z2.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return vf.set(t,s),s}P2(e=>({...e,get:(t,n,i)=>__(t,n)||e.get(t,n,i),has:(t,n)=>!!__(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(H2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function H2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const wd="@firebase/app",v_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new $m("@firebase/app"),F2="@firebase/app-compat",G2="@firebase/analytics-compat",Q2="@firebase/analytics",K2="@firebase/app-check-compat",Y2="@firebase/app-check",X2="@firebase/auth",$2="@firebase/auth-compat",Z2="@firebase/database",W2="@firebase/data-connect",J2="@firebase/database-compat",tI="@firebase/functions",eI="@firebase/functions-compat",nI="@firebase/installations",iI="@firebase/installations-compat",rI="@firebase/messaging",sI="@firebase/messaging-compat",aI="@firebase/performance",oI="@firebase/performance-compat",lI="@firebase/remote-config",uI="@firebase/remote-config-compat",cI="@firebase/storage",hI="@firebase/storage-compat",fI="@firebase/firestore",dI="@firebase/ai",mI="@firebase/firestore-compat",pI="firebase",gI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="[DEFAULT]",yI={[wd]:"fire-core",[F2]:"fire-core-compat",[Q2]:"fire-analytics",[G2]:"fire-analytics-compat",[Y2]:"fire-app-check",[K2]:"fire-app-check-compat",[X2]:"fire-auth",[$2]:"fire-auth-compat",[Z2]:"fire-rtdb",[W2]:"fire-data-connect",[J2]:"fire-rtdb-compat",[tI]:"fire-fn",[eI]:"fire-fn-compat",[nI]:"fire-iid",[iI]:"fire-iid-compat",[rI]:"fire-fcm",[sI]:"fire-fcm-compat",[aI]:"fire-perf",[oI]:"fire-perf-compat",[lI]:"fire-rc",[uI]:"fire-rc-compat",[cI]:"fire-gcs",[hI]:"fire-gcs-compat",[fI]:"fire-fst",[mI]:"fire-fst-compat",[dI]:"fire-vertex","fire-js":"fire-js",[pI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new Map,_I=new Map,Id=new Map;function E_(e,t){try{e.container.addComponent(t)}catch(n){ci.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ea(e){const t=e.name;if(Id.has(t))return ci.debug(`There were multiple attempts to register component ${t}.`),!1;Id.set(t,e);for(const n of fc.values())E_(n,e);for(const n of _I.values())E_(n,e);return!0}function Wm(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function $e(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zi=new dl("app","Firebase",vI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=gI;function Z0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:Rd,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Zi.create("bad-app-name",{appName:String(r)});if(n||(n=G0()),!n)throw Zi.create("no-options");const s=fc.get(r);if(s){if(qr(n,s.options)&&qr(i,s.config))return s;throw Zi.create("duplicate-app",{appName:r})}const a=new R2(r);for(const u of Id.values())a.addComponent(u);const l=new EI(n,i,a);return fc.set(r,l),l}function W0(e=Rd){const t=fc.get(e);if(!t&&e===Rd&&G0())return Z0();if(!t)throw Zi.create("no-app",{appName:e});return t}function Wi(e,t,n){let i=yI[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ci.warn(a.join(" "));return}ea(new Hr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="firebase-heartbeat-database",AI=1,zo="firebase-heartbeat-store";let Ef=null;function J0(){return Ef||(Ef=j2(TI,AI,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(zo)}catch(n){console.warn(n)}}}}).catch(e=>{throw Zi.create("idb-open",{originalErrorMessage:e.message})})),Ef}async function bI(e){try{const n=(await J0()).transaction(zo),i=await n.objectStore(zo).get(tA(e));return await n.done,i}catch(t){if(t instanceof yi)ci.warn(t.message);else{const n=Zi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ci.warn(n.message)}}}async function T_(e,t){try{const i=(await J0()).transaction(zo,"readwrite");await i.objectStore(zo).put(t,tA(e)),await i.done}catch(n){if(n instanceof yi)ci.warn(n.message);else{const i=Zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ci.warn(i.message)}}}function tA(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=1024,wI=30;class RI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=A_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>wI){const a=NI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ci.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=A_(),{heartbeatsToSend:i,unsentEntries:r}=II(this._heartbeatsCache.heartbeats),s=hc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ci.warn(n),""}}}function A_(){return new Date().toISOString().substring(0,10)}function II(e,t=SI){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),b_(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),b_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class CI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return m2()?p2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return T_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return T_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function b_(e){return hc(JSON.stringify({version:2,heartbeats:e})).length}function NI(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(e){ea(new Hr("platform-logger",t=>new q2(t),"PRIVATE")),ea(new Hr("heartbeat",t=>new RI(t),"PRIVATE")),Wi(wd,v_,e),Wi(wd,v_,"esm2020"),Wi("fire-js","")}xI("");var DI="firebase",OI="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wi(DI,OI,"app");var S_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ji,eA;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,y){function A(){}A.prototype=y.prototype,T.D=y.prototype,T.prototype=new A,T.prototype.constructor=T,T.C=function(w,C,I){for(var b=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)b[_t-2]=arguments[_t];return y.prototype[C].apply(w,b)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,y,A){A||(A=0);var w=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)w[C]=y.charCodeAt(A++)|y.charCodeAt(A++)<<8|y.charCodeAt(A++)<<16|y.charCodeAt(A++)<<24;else for(C=0;16>C;++C)w[C]=y[A++]|y[A++]<<8|y[A++]<<16|y[A++]<<24;y=T.g[0],A=T.g[1],C=T.g[2];var I=T.g[3],b=y+(I^A&(C^I))+w[0]+3614090360&4294967295;y=A+(b<<7&4294967295|b>>>25),b=I+(C^y&(A^C))+w[1]+3905402710&4294967295,I=y+(b<<12&4294967295|b>>>20),b=C+(A^I&(y^A))+w[2]+606105819&4294967295,C=I+(b<<17&4294967295|b>>>15),b=A+(y^C&(I^y))+w[3]+3250441966&4294967295,A=C+(b<<22&4294967295|b>>>10),b=y+(I^A&(C^I))+w[4]+4118548399&4294967295,y=A+(b<<7&4294967295|b>>>25),b=I+(C^y&(A^C))+w[5]+1200080426&4294967295,I=y+(b<<12&4294967295|b>>>20),b=C+(A^I&(y^A))+w[6]+2821735955&4294967295,C=I+(b<<17&4294967295|b>>>15),b=A+(y^C&(I^y))+w[7]+4249261313&4294967295,A=C+(b<<22&4294967295|b>>>10),b=y+(I^A&(C^I))+w[8]+1770035416&4294967295,y=A+(b<<7&4294967295|b>>>25),b=I+(C^y&(A^C))+w[9]+2336552879&4294967295,I=y+(b<<12&4294967295|b>>>20),b=C+(A^I&(y^A))+w[10]+4294925233&4294967295,C=I+(b<<17&4294967295|b>>>15),b=A+(y^C&(I^y))+w[11]+2304563134&4294967295,A=C+(b<<22&4294967295|b>>>10),b=y+(I^A&(C^I))+w[12]+1804603682&4294967295,y=A+(b<<7&4294967295|b>>>25),b=I+(C^y&(A^C))+w[13]+4254626195&4294967295,I=y+(b<<12&4294967295|b>>>20),b=C+(A^I&(y^A))+w[14]+2792965006&4294967295,C=I+(b<<17&4294967295|b>>>15),b=A+(y^C&(I^y))+w[15]+1236535329&4294967295,A=C+(b<<22&4294967295|b>>>10),b=y+(C^I&(A^C))+w[1]+4129170786&4294967295,y=A+(b<<5&4294967295|b>>>27),b=I+(A^C&(y^A))+w[6]+3225465664&4294967295,I=y+(b<<9&4294967295|b>>>23),b=C+(y^A&(I^y))+w[11]+643717713&4294967295,C=I+(b<<14&4294967295|b>>>18),b=A+(I^y&(C^I))+w[0]+3921069994&4294967295,A=C+(b<<20&4294967295|b>>>12),b=y+(C^I&(A^C))+w[5]+3593408605&4294967295,y=A+(b<<5&4294967295|b>>>27),b=I+(A^C&(y^A))+w[10]+38016083&4294967295,I=y+(b<<9&4294967295|b>>>23),b=C+(y^A&(I^y))+w[15]+3634488961&4294967295,C=I+(b<<14&4294967295|b>>>18),b=A+(I^y&(C^I))+w[4]+3889429448&4294967295,A=C+(b<<20&4294967295|b>>>12),b=y+(C^I&(A^C))+w[9]+568446438&4294967295,y=A+(b<<5&4294967295|b>>>27),b=I+(A^C&(y^A))+w[14]+3275163606&4294967295,I=y+(b<<9&4294967295|b>>>23),b=C+(y^A&(I^y))+w[3]+4107603335&4294967295,C=I+(b<<14&4294967295|b>>>18),b=A+(I^y&(C^I))+w[8]+1163531501&4294967295,A=C+(b<<20&4294967295|b>>>12),b=y+(C^I&(A^C))+w[13]+2850285829&4294967295,y=A+(b<<5&4294967295|b>>>27),b=I+(A^C&(y^A))+w[2]+4243563512&4294967295,I=y+(b<<9&4294967295|b>>>23),b=C+(y^A&(I^y))+w[7]+1735328473&4294967295,C=I+(b<<14&4294967295|b>>>18),b=A+(I^y&(C^I))+w[12]+2368359562&4294967295,A=C+(b<<20&4294967295|b>>>12),b=y+(A^C^I)+w[5]+4294588738&4294967295,y=A+(b<<4&4294967295|b>>>28),b=I+(y^A^C)+w[8]+2272392833&4294967295,I=y+(b<<11&4294967295|b>>>21),b=C+(I^y^A)+w[11]+1839030562&4294967295,C=I+(b<<16&4294967295|b>>>16),b=A+(C^I^y)+w[14]+4259657740&4294967295,A=C+(b<<23&4294967295|b>>>9),b=y+(A^C^I)+w[1]+2763975236&4294967295,y=A+(b<<4&4294967295|b>>>28),b=I+(y^A^C)+w[4]+1272893353&4294967295,I=y+(b<<11&4294967295|b>>>21),b=C+(I^y^A)+w[7]+4139469664&4294967295,C=I+(b<<16&4294967295|b>>>16),b=A+(C^I^y)+w[10]+3200236656&4294967295,A=C+(b<<23&4294967295|b>>>9),b=y+(A^C^I)+w[13]+681279174&4294967295,y=A+(b<<4&4294967295|b>>>28),b=I+(y^A^C)+w[0]+3936430074&4294967295,I=y+(b<<11&4294967295|b>>>21),b=C+(I^y^A)+w[3]+3572445317&4294967295,C=I+(b<<16&4294967295|b>>>16),b=A+(C^I^y)+w[6]+76029189&4294967295,A=C+(b<<23&4294967295|b>>>9),b=y+(A^C^I)+w[9]+3654602809&4294967295,y=A+(b<<4&4294967295|b>>>28),b=I+(y^A^C)+w[12]+3873151461&4294967295,I=y+(b<<11&4294967295|b>>>21),b=C+(I^y^A)+w[15]+530742520&4294967295,C=I+(b<<16&4294967295|b>>>16),b=A+(C^I^y)+w[2]+3299628645&4294967295,A=C+(b<<23&4294967295|b>>>9),b=y+(C^(A|~I))+w[0]+4096336452&4294967295,y=A+(b<<6&4294967295|b>>>26),b=I+(A^(y|~C))+w[7]+1126891415&4294967295,I=y+(b<<10&4294967295|b>>>22),b=C+(y^(I|~A))+w[14]+2878612391&4294967295,C=I+(b<<15&4294967295|b>>>17),b=A+(I^(C|~y))+w[5]+4237533241&4294967295,A=C+(b<<21&4294967295|b>>>11),b=y+(C^(A|~I))+w[12]+1700485571&4294967295,y=A+(b<<6&4294967295|b>>>26),b=I+(A^(y|~C))+w[3]+2399980690&4294967295,I=y+(b<<10&4294967295|b>>>22),b=C+(y^(I|~A))+w[10]+4293915773&4294967295,C=I+(b<<15&4294967295|b>>>17),b=A+(I^(C|~y))+w[1]+2240044497&4294967295,A=C+(b<<21&4294967295|b>>>11),b=y+(C^(A|~I))+w[8]+1873313359&4294967295,y=A+(b<<6&4294967295|b>>>26),b=I+(A^(y|~C))+w[15]+4264355552&4294967295,I=y+(b<<10&4294967295|b>>>22),b=C+(y^(I|~A))+w[6]+2734768916&4294967295,C=I+(b<<15&4294967295|b>>>17),b=A+(I^(C|~y))+w[13]+1309151649&4294967295,A=C+(b<<21&4294967295|b>>>11),b=y+(C^(A|~I))+w[4]+4149444226&4294967295,y=A+(b<<6&4294967295|b>>>26),b=I+(A^(y|~C))+w[11]+3174756917&4294967295,I=y+(b<<10&4294967295|b>>>22),b=C+(y^(I|~A))+w[2]+718787259&4294967295,C=I+(b<<15&4294967295|b>>>17),b=A+(I^(C|~y))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(C+(b<<21&4294967295|b>>>11))&4294967295,T.g[2]=T.g[2]+C&4294967295,T.g[3]=T.g[3]+I&4294967295}i.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var A=y-this.blockSize,w=this.B,C=this.h,I=0;I<y;){if(C==0)for(;I<=A;)r(this,T,I),I+=this.blockSize;if(typeof T=="string"){for(;I<y;)if(w[C++]=T.charCodeAt(I++),C==this.blockSize){r(this,w),C=0;break}}else for(;I<y;)if(w[C++]=T[I++],C==this.blockSize){r(this,w),C=0;break}}this.h=C,this.o+=y},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var A=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=A&255,A/=256;for(this.u(T),T=Array(16),y=A=0;4>y;++y)for(var w=0;32>w;w+=8)T[A++]=this.g[y]>>>w&255;return T};function s(T,y){var A=l;return Object.prototype.hasOwnProperty.call(A,T)?A[T]:A[T]=y(T)}function a(T,y){this.h=y;for(var A=[],w=!0,C=T.length-1;0<=C;C--){var I=T[C]|0;w&&I==y||(A[C]=I,w=!1)}this.g=A}var l={};function u(T){return-128<=T&&128>T?s(T,function(y){return new a([y|0],0>y?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return V(h(-T));for(var y=[],A=1,w=0;T>=A;w++)y[w]=T/A|0,A*=4294967296;return new a(y,0)}function d(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return V(d(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(y,8)),w=p,C=0;C<T.length;C+=8){var I=Math.min(8,T.length-C),b=parseInt(T.substring(C,C+I),y);8>I?(I=h(Math.pow(y,I)),w=w.j(I).add(h(b))):(w=w.j(A),w=w.add(h(b)))}return w}var p=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(O(this))return-V(this).m();for(var T=0,y=1,A=0;A<this.g.length;A++){var w=this.i(A);T+=(0<=w?w:4294967296+w)*y,y*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(x(this))return"0";if(O(this))return"-"+V(this).toString(T);for(var y=h(Math.pow(T,6)),A=this,w="";;){var C=D(A,y).g;A=S(A,C.j(y));var I=((0<A.g.length?A.g[0]:A.h)>>>0).toString(T);if(A=C,x(A))return I+w;for(;6>I.length;)I="0"+I;w=I+w}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function x(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function O(T){return T.h==-1}e.l=function(T){return T=S(this,T),O(T)?-1:x(T)?0:1};function V(T){for(var y=T.g.length,A=[],w=0;w<y;w++)A[w]=~T.g[w];return new a(A,~T.h).add(m)}e.abs=function(){return O(this)?V(this):this},e.add=function(T){for(var y=Math.max(this.g.length,T.g.length),A=[],w=0,C=0;C<=y;C++){var I=w+(this.i(C)&65535)+(T.i(C)&65535),b=(I>>>16)+(this.i(C)>>>16)+(T.i(C)>>>16);w=b>>>16,I&=65535,b&=65535,A[C]=b<<16|I}return new a(A,A[A.length-1]&-2147483648?-1:0)};function S(T,y){return T.add(V(y))}e.j=function(T){if(x(this)||x(T))return p;if(O(this))return O(T)?V(this).j(V(T)):V(V(this).j(T));if(O(T))return V(this.j(V(T)));if(0>this.l(_)&&0>T.l(_))return h(this.m()*T.m());for(var y=this.g.length+T.g.length,A=[],w=0;w<2*y;w++)A[w]=0;for(w=0;w<this.g.length;w++)for(var C=0;C<T.g.length;C++){var I=this.i(w)>>>16,b=this.i(w)&65535,_t=T.i(C)>>>16,me=T.i(C)&65535;A[2*w+2*C]+=b*me,E(A,2*w+2*C),A[2*w+2*C+1]+=I*me,E(A,2*w+2*C+1),A[2*w+2*C+1]+=b*_t,E(A,2*w+2*C+1),A[2*w+2*C+2]+=I*_t,E(A,2*w+2*C+2)}for(w=0;w<y;w++)A[w]=A[2*w+1]<<16|A[2*w];for(w=y;w<2*y;w++)A[w]=0;return new a(A,0)};function E(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function R(T,y){this.g=T,this.h=y}function D(T,y){if(x(y))throw Error("division by zero");if(x(T))return new R(p,p);if(O(T))return y=D(V(T),y),new R(V(y.g),V(y.h));if(O(y))return y=D(T,V(y)),new R(V(y.g),y.h);if(30<T.g.length){if(O(T)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var A=m,w=y;0>=w.l(T);)A=U(A),w=U(w);var C=B(A,1),I=B(w,1);for(w=B(w,2),A=B(A,2);!x(w);){var b=I.add(w);0>=b.l(T)&&(C=C.add(A),I=b),w=B(w,1),A=B(A,1)}return y=S(T,C.j(y)),new R(C,y)}for(C=p;0<=T.l(y);){for(A=Math.max(1,Math.floor(T.m()/y.m())),w=Math.ceil(Math.log(A)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),I=h(A),b=I.j(y);O(b)||0<b.l(T);)A-=w,I=h(A),b=I.j(y);x(I)&&(I=m),C=C.add(I),T=S(T,b)}return new R(C,T)}e.A=function(T){return D(this,T).h},e.and=function(T){for(var y=Math.max(this.g.length,T.g.length),A=[],w=0;w<y;w++)A[w]=this.i(w)&T.i(w);return new a(A,this.h&T.h)},e.or=function(T){for(var y=Math.max(this.g.length,T.g.length),A=[],w=0;w<y;w++)A[w]=this.i(w)|T.i(w);return new a(A,this.h|T.h)},e.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),A=[],w=0;w<y;w++)A[w]=this.i(w)^T.i(w);return new a(A,this.h^T.h)};function U(T){for(var y=T.g.length+1,A=[],w=0;w<y;w++)A[w]=T.i(w)<<1|T.i(w-1)>>>31;return new a(A,T.h)}function B(T,y){var A=y>>5;y%=32;for(var w=T.g.length-A,C=[],I=0;I<w;I++)C[I]=0<y?T.i(I+A)>>>y|T.i(I+A+1)<<32-y:T.i(I+A);return new a(C,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,eA=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Ji=a}).apply(typeof S_<"u"?S_:typeof self<"u"?self:typeof window<"u"?window:{});var su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nA,Wa,iA,Su,Cd,rA,sA,aA;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof su=="object"&&su];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var g=0;g<o.length-1;g++){var N=o[g];if(!(N in f))break t;f=f[N]}o=o[o.length-1],g=f[o],c=c(g),c!=g&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,g=!1,N={next:function(){if(!g&&f<o.length){var M=f++;return{value:c(M,o[M]),done:!1}}return g=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function p(o,c,f){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,g),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function x(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(g,N,M){for(var j=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)j[Dt-2]=arguments[Dt];return c.prototype[N].apply(g,j)}}function O(o){const c=o.length;if(0<c){const f=Array(c);for(let g=0;g<c;g++)f[g]=o[g];return f}return[]}function V(o,c){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(u(g)){const N=o.length||0,M=g.length||0;o.length=N+M;for(let j=0;j<M;j++)o[N+j]=g[j]}else o.push(g)}}class S{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var U=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function B(o,c,f){for(const g in o)c.call(f,o[g],g,o)}function T(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,c){let f,g;for(let N=1;N<arguments.length;N++){g=arguments[N];for(f in g)o[f]=g[f];for(let M=0;M<A.length;M++)f=A[M],Object.prototype.hasOwnProperty.call(g,f)&&(o[f]=g[f])}}function C(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function I(o){l.setTimeout(()=>{throw o},0)}function b(){var o=pt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class _t{constructor(){this.h=this.g=null}add(c,f){const g=me.get();g.set(c,f),this.h?this.h.next=g:this.g=g,this.h=g}}var me=new S(()=>new q,o=>o.reset());class q{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let X,K=!1,pt=new _t,xt=()=>{const o=l.Promise.resolve(void 0);X=()=>{o.then(gn)}};var gn=()=>{for(var o;o=b();){try{o.h.call(o.g)}catch(f){I(f)}var c=me;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}K=!1};function zt(){this.s=this.s,this.C=this.C}zt.prototype.s=!1,zt.prototype.ma=function(){this.s||(this.s=!0,this.N())},zt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var Zt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function be(o,c){if(ct.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(U){t:{try{D(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Oe[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&be.aa.h.call(this)}}x(be,ct);var Oe={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var wn="closure_listenable_"+(1e6*Math.random()|0),yr=0;function ba(o,c,f,g,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!g,this.ha=N,this.key=++yr,this.da=this.fa=!1}function vi(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Rn(o){this.src=o,this.g={},this.h=0}Rn.prototype.add=function(o,c,f,g,N){var M=o.toString();o=this.g[M],o||(o=this.g[M]=[],this.h++);var j=vr(o,c,g,N);return-1<j?(c=o[j],f||(c.fa=!1)):(c=new ba(c,this.src,M,!!g,N),c.fa=f,o.push(c)),c};function _r(o,c){var f=c.type;if(f in o.g){var g=o.g[f],N=Array.prototype.indexOf.call(g,c,void 0),M;(M=0<=N)&&Array.prototype.splice.call(g,N,1),M&&(vi(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function vr(o,c,f,g){for(var N=0;N<o.length;++N){var M=o[N];if(!M.da&&M.listener==c&&M.capture==!!f&&M.ha==g)return N}return-1}var Hn="closure_lm_"+(1e6*Math.random()|0),Er={};function es(o,c,f,g,N){if(Array.isArray(c)){for(var M=0;M<c.length;M++)es(o,c[M],f,g,N);return null}return f=bt(f),o&&o[wn]?o.K(c,f,h(g)?!!g.capture:!1,N):et(o,c,f,!1,g,N)}function et(o,c,f,g,N,M){if(!c)throw Error("Invalid event type");var j=h(N)?!!N.capture:!!N,Dt=At(o);if(Dt||(o[Hn]=Dt=new Rn(o)),f=Dt.add(c,f,g,j,M),f.proxy)return f;if(g=ht(),f.proxy=g,g.src=o,g.listener=f,o.addEventListener)Zt||(N=j),N===void 0&&(N=!1),o.addEventListener(c.toString(),g,N);else if(o.attachEvent)o.attachEvent(G(c.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ht(){function o(f){return c.call(o.src,o.listener,f)}const c=tt;return o}function gt(o,c,f,g,N){if(Array.isArray(c))for(var M=0;M<c.length;M++)gt(o,c[M],f,g,N);else g=h(g)?!!g.capture:!!g,f=bt(f),o&&o[wn]?(o=o.i,c=String(c).toString(),c in o.g&&(M=o.g[c],f=vr(M,f,g,N),-1<f&&(vi(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete o.g[c],o.h--)))):o&&(o=At(o))&&(c=o.g[c.toString()],o=-1,c&&(o=vr(c,f,g,N)),(f=-1<o?c[o]:null)&&yn(f))}function yn(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[wn])_r(c.i,o);else{var f=o.type,g=o.proxy;c.removeEventListener?c.removeEventListener(f,g,o.capture):c.detachEvent?c.detachEvent(G(f),g):c.addListener&&c.removeListener&&c.removeListener(g),(f=At(c))?(_r(f,o),f.h==0&&(f.src=null,c[Hn]=null)):vi(o)}}}function G(o){return o in Er?Er[o]:Er[o]="on"+o}function tt(o,c){if(o.da)o=!0;else{c=new be(c,this);var f=o.listener,g=o.ha||o.src;o.fa&&yn(o),o=f.call(g,c)}return o}function At(o){return o=o[Hn],o instanceof Rn?o:null}var Tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function bt(o){return typeof o=="function"?o:(o[Tt]||(o[Tt]=function(c){return o.handleEvent(c)}),o[Tt])}function rt(){zt.call(this),this.i=new Rn(this),this.M=this,this.F=null}x(rt,zt),rt.prototype[wn]=!0,rt.prototype.removeEventListener=function(o,c,f,g){gt(this,o,c,f,g)};function St(o,c){var f,g=o.F;if(g)for(f=[];g;g=g.F)f.push(g);if(o=o.M,g=c.type||c,typeof c=="string")c=new ct(c,o);else if(c instanceof ct)c.target=c.target||o;else{var N=c;c=new ct(g,o),w(c,N)}if(N=!0,f)for(var M=f.length-1;0<=M;M--){var j=c.g=f[M];N=Fe(j,g,!0,c)&&N}if(j=c.g=o,N=Fe(j,g,!0,c)&&N,N=Fe(j,g,!1,c)&&N,f)for(M=0;M<f.length;M++)j=c.g=f[M],N=Fe(j,g,!1,c)&&N}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],g=0;g<f.length;g++)vi(f[g]);delete o.g[c],o.h--}}this.F=null},rt.prototype.K=function(o,c,f,g){return this.i.add(String(o),c,!1,f,g)},rt.prototype.L=function(o,c,f,g){return this.i.add(String(o),c,!0,f,g)};function Fe(o,c,f,g){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,M=0;M<c.length;++M){var j=c[M];if(j&&!j.da&&j.capture==f){var Dt=j.listener,pe=j.ha||j.src;j.fa&&_r(o.i,j),N=Dt.call(pe,g)!==!1&&N}}return N&&!g.defaultPrevented}function Sa(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Cl(o){o.g=Sa(()=>{o.g=null,o.i&&(o.i=!1,Cl(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class yh extends zt{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Cl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wa(o){zt.call(this),this.h=o,this.g={}}x(wa,zt);var Xp=[];function $p(o){B(o.g,function(c,f){this.g.hasOwnProperty(f)&&yn(c)},o),o.g={}}wa.prototype.N=function(){wa.aa.N.call(this),$p(this)},wa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _h=l.JSON.stringify,wS=l.JSON.parse,RS=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function vh(){}vh.prototype.h=null;function Zp(o){return o.h||(o.h=o.i())}function Wp(){}var Ra={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Eh(){ct.call(this,"d")}x(Eh,ct);function Th(){ct.call(this,"c")}x(Th,ct);var Tr={},Jp=null;function Nl(){return Jp=Jp||new rt}Tr.La="serverreachability";function tg(o){ct.call(this,Tr.La,o)}x(tg,ct);function Ia(o){const c=Nl();St(c,new tg(c))}Tr.STAT_EVENT="statevent";function eg(o,c){ct.call(this,Tr.STAT_EVENT,o),this.stat=c}x(eg,ct);function Ve(o){const c=Nl();St(c,new eg(c,o))}Tr.Ma="timingevent";function ng(o,c){ct.call(this,Tr.Ma,o),this.size=c}x(ng,ct);function Ca(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Na(){this.g=!0}Na.prototype.xa=function(){this.g=!1};function IS(o,c,f,g,N,M){o.info(function(){if(o.g)if(M)for(var j="",Dt=M.split("&"),pe=0;pe<Dt.length;pe++){var yt=Dt[pe].split("=");if(1<yt.length){var Se=yt[0];yt=yt[1];var we=Se.split("_");j=2<=we.length&&we[1]=="type"?j+(Se+"="+yt+"&"):j+(Se+"=redacted&")}}else j=null;else j=M;return"XMLHTTP REQ ("+g+") [attempt "+N+"]: "+c+`
`+f+`
`+j})}function CS(o,c,f,g,N,M,j){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+N+"]: "+c+`
`+f+`
`+M+" "+j})}function ns(o,c,f,g){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+xS(o,f)+(g?" "+g:"")})}function NS(o,c){o.info(function(){return"TIMEOUT: "+c})}Na.prototype.info=function(){};function xS(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var g=f[o];if(!(2>g.length)){var N=g[1];if(Array.isArray(N)&&!(1>N.length)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(var j=1;j<N.length;j++)N[j]=""}}}}return _h(f)}catch{return c}}var xl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ig={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ah;function Dl(){}x(Dl,vh),Dl.prototype.g=function(){return new XMLHttpRequest},Dl.prototype.i=function(){return{}},Ah=new Dl;function Ei(o,c,f,g){this.j=o,this.i=c,this.l=f,this.R=g||1,this.U=new wa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rg}function rg(){this.i=null,this.g="",this.h=!1}var sg={},bh={};function Sh(o,c,f){o.L=1,o.v=kl(Fn(c)),o.m=f,o.P=!0,ag(o,null)}function ag(o,c){o.F=Date.now(),Ol(o),o.A=Fn(o.v);var f=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),Eg(f.i,"t",g),o.C=0,f=o.j.J,o.h=new rg,o.g=Ug(o.j,f?c:null,!o.m),0<o.O&&(o.M=new yh(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,g=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Xp[0]=N.toString()),N=Xp);for(var M=0;M<N.length;M++){var j=es(f,N[M],g||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Ia(),IS(o.i,o.u,o.A,o.l,o.R,o.m)}Ei.prototype.ca=function(o){o=o.target;const c=this.M;c&&Gn(o)==3?c.j():this.Y(o)},Ei.prototype.Y=function(o){try{if(o==this.g)t:{const we=Gn(this.g);var c=this.g.Ba();const ss=this.g.Z();if(!(3>we)&&(we!=3||this.g&&(this.h.h||this.g.oa()||Ig(this.g)))){this.J||we!=4||c==7||(c==8||0>=ss?Ia(3):Ia(2)),wh(this);var f=this.g.Z();this.X=f;e:if(og(this)){var g=Ig(this.g);o="";var N=g.length,M=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ar(this),xa(this);var j="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(g[c],{stream:!(M&&c==N-1)});g.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,CS(this.i,this.u,this.A,this.l,this.R,we,f),this.o){if(this.T&&!this.K){e:{if(this.g){var Dt,pe=this.g;if((Dt=pe.g?pe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Dt)){var yt=Dt;break e}}yt=null}if(f=yt)ns(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rh(this,f);else{this.o=!1,this.s=3,Ve(12),Ar(this),xa(this);break t}}if(this.P){f=!0;let _n;for(;!this.J&&this.C<j.length;)if(_n=DS(this,j),_n==bh){we==4&&(this.s=4,Ve(14),f=!1),ns(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==sg){this.s=4,Ve(15),ns(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else ns(this.i,this.l,_n,null),Rh(this,_n);if(og(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||j.length!=0||this.h.h||(this.s=1,Ve(16),f=!1),this.o=this.o&&f,!f)ns(this.i,this.l,j,"[Invalid Chunked Response]"),Ar(this),xa(this);else if(0<j.length&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.ba&&!Se.M&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Oh(Se),Se.M=!0,Ve(11))}}else ns(this.i,this.l,j,null),Rh(this,j);we==4&&Ar(this),this.o&&!this.J&&(we==4?Mg(this.j,this):(this.o=!1,Ol(this)))}else YS(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,Ve(12)):(this.s=0,Ve(13)),Ar(this),xa(this)}}}catch{}finally{}};function og(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function DS(o,c){var f=o.C,g=c.indexOf(`
`,f);return g==-1?bh:(f=Number(c.substring(f,g)),isNaN(f)?sg:(g+=1,g+f>c.length?bh:(c=c.slice(g,g+f),o.C=g+f,c)))}Ei.prototype.cancel=function(){this.J=!0,Ar(this)};function Ol(o){o.S=Date.now()+o.I,lg(o,o.I)}function lg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ca(m(o.ba,o),c)}function wh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Ei.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(NS(this.i,this.A),this.L!=2&&(Ia(),Ve(17)),Ar(this),this.s=2,xa(this)):lg(this,this.S-o)};function xa(o){o.j.G==0||o.J||Mg(o.j,o)}function Ar(o){wh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,$p(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Rh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||Ih(f.h,o))){if(!o.K&&Ih(f.h,o)&&f.G==3){try{var g=f.Da.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var N=g;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Bl(f),jl(f);else break t;Dh(f),Ve(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ca(m(f.Za,f),6e3));if(1>=hg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Sr(f,11)}else if((o.K||f.g==o)&&Bl(f),!E(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let yt=N[c];if(f.T=yt[0],yt=yt[1],f.G==2)if(yt[0]=="c"){f.K=yt[1],f.ia=yt[2];const Se=yt[3];Se!=null&&(f.la=Se,f.j.info("VER="+f.la));const we=yt[4];we!=null&&(f.Aa=we,f.j.info("SVER="+f.Aa));const ss=yt[5];ss!=null&&typeof ss=="number"&&0<ss&&(g=1.5*ss,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const _n=o.g;if(_n){const Hl=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hl){var M=g.h;M.g||Hl.indexOf("spdy")==-1&&Hl.indexOf("quic")==-1&&Hl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Ch(M,M.h),M.h=null))}if(g.D){const Vh=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;Vh&&(g.ya=Vh,Mt(g.I,g.D,Vh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var j=o;if(g.qa=Lg(g,g.J?g.ia:null,g.W),j.K){fg(g.h,j);var Dt=j,pe=g.L;pe&&(Dt.I=pe),Dt.B&&(wh(Dt),Ol(Dt)),g.g=j}else Og(g);0<f.i.length&&zl(f)}else yt[0]!="stop"&&yt[0]!="close"||Sr(f,7);else f.G==3&&(yt[0]=="stop"||yt[0]=="close"?yt[0]=="stop"?Sr(f,7):xh(f):yt[0]!="noop"&&f.l&&f.l.ta(yt),f.v=0)}}Ia(4)}catch{}}var OS=class{constructor(o,c){this.g=o,this.map=c}};function ug(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function hg(o){return o.h?1:o.g?o.g.size:0}function Ih(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Ch(o,c){o.g?o.g.add(c):o.h=c}function fg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}ug.prototype.cancel=function(){if(this.i=dg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function dg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return O(o.i)}function VS(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,g=0;g<f;g++)c.push(o[g]);return c}c=[],f=0;for(g in o)c[f++]=o[g];return c}function MS(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const g in o)c[f++]=g;return c}}}function mg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=MS(o),g=VS(o),N=g.length,M=0;M<N;M++)c.call(void 0,g[M],f&&f[M],o)}var pg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kS(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var g=o[f].indexOf("="),N=null;if(0<=g){var M=o[f].substring(0,g);N=o[f].substring(g+1)}else M=o[f];c(M,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function br(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof br){this.h=o.h,Vl(this,o.j),this.o=o.o,this.g=o.g,Ml(this,o.s),this.l=o.l;var c=o.i,f=new Va;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),gg(this,f),this.m=o.m}else o&&(c=String(o).match(pg))?(this.h=!1,Vl(this,c[1]||"",!0),this.o=Da(c[2]||""),this.g=Da(c[3]||"",!0),Ml(this,c[4]),this.l=Da(c[5]||"",!0),gg(this,c[6]||"",!0),this.m=Da(c[7]||"")):(this.h=!1,this.i=new Va(null,this.h))}br.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Oa(c,yg,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Oa(c,yg,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Oa(f,f.charAt(0)=="/"?US:LS,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Oa(f,zS)),o.join("")};function Fn(o){return new br(o)}function Vl(o,c,f){o.j=f?Da(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Ml(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function gg(o,c,f){c instanceof Va?(o.i=c,BS(o.i,o.h)):(f||(c=Oa(c,jS)),o.i=new Va(c,o.h))}function Mt(o,c,f){o.i.set(c,f)}function kl(o){return Mt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Da(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Oa(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,PS),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function PS(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var yg=/[#\/\?@]/g,LS=/[#\?:]/g,US=/[#\?]/g,jS=/[#\?@]/g,zS=/#/g;function Va(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Ti(o){o.g||(o.g=new Map,o.h=0,o.i&&kS(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=Va.prototype,e.add=function(o,c){Ti(this),this.i=null,o=is(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function _g(o,c){Ti(o),c=is(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function vg(o,c){return Ti(o),c=is(o,c),o.g.has(c)}e.forEach=function(o,c){Ti(this),this.g.forEach(function(f,g){f.forEach(function(N){o.call(c,N,g,this)},this)},this)},e.na=function(){Ti(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let g=0;g<c.length;g++){const N=o[g];for(let M=0;M<N.length;M++)f.push(c[g])}return f},e.V=function(o){Ti(this);let c=[];if(typeof o=="string")vg(this,o)&&(c=c.concat(this.g.get(is(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return Ti(this),this.i=null,o=is(this,o),vg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Eg(o,c,f){_g(o,c),0<f.length&&(o.i=null,o.g.set(is(o,c),O(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var g=c[f];const M=encodeURIComponent(String(g)),j=this.V(g);for(g=0;g<j.length;g++){var N=M;j[g]!==""&&(N+="="+encodeURIComponent(String(j[g]))),o.push(N)}}return this.i=o.join("&")};function is(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function BS(o,c){c&&!o.j&&(Ti(o),o.i=null,o.g.forEach(function(f,g){var N=g.toLowerCase();g!=N&&(_g(this,g),Eg(this,N,f))},o)),o.j=c}function qS(o,c){const f=new Na;if(l.Image){const g=new Image;g.onload=_(Ai,f,"TestLoadImage: loaded",!0,c,g),g.onerror=_(Ai,f,"TestLoadImage: error",!1,c,g),g.onabort=_(Ai,f,"TestLoadImage: abort",!1,c,g),g.ontimeout=_(Ai,f,"TestLoadImage: timeout",!1,c,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else c(!1)}function HS(o,c){const f=new Na,g=new AbortController,N=setTimeout(()=>{g.abort(),Ai(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:g.signal}).then(M=>{clearTimeout(N),M.ok?Ai(f,"TestPingServer: ok",!0,c):Ai(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Ai(f,"TestPingServer: error",!1,c)})}function Ai(o,c,f,g,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),g(f)}catch{}}function FS(){this.g=new RS}function GS(o,c,f){const g=f||"";try{mg(o,function(N,M){let j=N;h(N)&&(j=_h(N)),c.push(g+M+"="+encodeURIComponent(j))})}catch(N){throw c.push(g+"type="+encodeURIComponent("_badmap")),N}}function Pl(o){this.l=o.Ub||null,this.j=o.eb||!1}x(Pl,vh),Pl.prototype.g=function(){return new Ll(this.l,this.j)},Pl.prototype.i=function(o){return function(){return o}}({});function Ll(o,c){rt.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ll,rt),e=Ll.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,ka(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ma(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ka(this)),this.g&&(this.readyState=3,ka(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tg(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tg(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Ma(this):ka(this),this.readyState==3&&Tg(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Ma(this))},e.Qa=function(o){this.g&&(this.response=o,Ma(this))},e.ga=function(){this.g&&Ma(this)};function Ma(o){o.readyState=4,o.l=null,o.j=null,o.v=null,ka(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function ka(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Ag(o){let c="";return B(o,function(f,g){c+=g,c+=":",c+=f,c+=`\r
`}),c}function Nh(o,c,f){t:{for(g in f){var g=!1;break t}g=!0}g||(f=Ag(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Mt(o,c,f))}function Ft(o){rt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ft,rt);var QS=/^https?$/i,KS=["POST","PUT"];e=Ft.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ah.g(),this.v=this.o?Zp(this.o):Zp(Ah),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(M){bg(this,M);return}if(o=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var N in g)f.set(N,g[N]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const M of g.keys())f.set(M,g.get(M));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(KS,c,void 0))||g||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,j]of f)this.g.setRequestHeader(M,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rg(this),this.u=!0,this.g.send(o),this.u=!1}catch(M){bg(this,M)}};function bg(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Sg(o),Ul(o)}function Sg(o){o.A||(o.A=!0,St(o,"complete"),St(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,St(this,"complete"),St(this,"abort"),Ul(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ul(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?wg(this):this.bb())},e.bb=function(){wg(this)};function wg(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Gn(o)!=4||o.Z()!=2)){if(o.u&&Gn(o)==4)Sa(o.Ea,0,o);else if(St(o,"readystatechange"),Gn(o)==4){o.h=!1;try{const j=o.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var g;if(g=j===0){var N=String(o.D).match(pg)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),g=!QS.test(N?N.toLowerCase():"")}f=g}if(f)St(o,"complete"),St(o,"success");else{o.m=6;try{var M=2<Gn(o)?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.Z()+"]",Sg(o)}}finally{Ul(o)}}}}function Ul(o,c){if(o.g){Rg(o);const f=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||St(o,"ready");try{f.onreadystatechange=g}catch{}}}function Rg(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Gn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),wS(c)}};function Ig(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function YS(o){const c={};o=(o.g&&2<=Gn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(E(o[g]))continue;var f=C(o[g]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=c[N]||[];c[N]=M,M.push(f)}T(c,function(g){return g.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pa(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function Cg(o){this.Aa=0,this.i=[],this.j=new Na,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pa("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pa("baseRetryDelayMs",5e3,o),this.cb=Pa("retryDelaySeedMs",1e4,o),this.Wa=Pa("forwardChannelMaxRetries",2,o),this.wa=Pa("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new ug(o&&o.concurrentRequestLimit),this.Da=new FS,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Cg.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,g){Ve(0),this.W=o,this.H=c||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Lg(this,null,this.W),zl(this)};function xh(o){if(Ng(o),o.G==3){var c=o.U++,f=Fn(o.I);if(Mt(f,"SID",o.K),Mt(f,"RID",c),Mt(f,"TYPE","terminate"),La(o,f),c=new Ei(o,o.j,c),c.L=2,c.v=kl(Fn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Ug(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Ol(c)}Pg(o)}function jl(o){o.g&&(Oh(o),o.g.cancel(),o.g=null)}function Ng(o){jl(o),o.u&&(l.clearTimeout(o.u),o.u=null),Bl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function zl(o){if(!cg(o.h)&&!o.s){o.s=!0;var c=o.Ga;X||xt(),K||(X(),K=!0),pt.add(c,o),o.B=0}}function XS(o,c){return hg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ca(m(o.Ga,o,c),kg(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new Ei(this,this.j,o);let M=this.o;if(this.S&&(M?(M=y(M),w(M,this.S)):M=this.S),this.m!==null||this.O||(N.H=M,M=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break e}g=void 0}if(g===void 0)break;if(c+=g,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=Dg(this,N,c),f=Fn(this.I),Mt(f,"RID",o),Mt(f,"CVER",22),this.D&&Mt(f,"X-HTTP-Session-Id",this.D),La(this,f),M&&(this.O?c="headers="+encodeURIComponent(String(Ag(M)))+"&"+c:this.m&&Nh(f,this.m,M)),Ch(this.h,N),this.Ua&&Mt(f,"TYPE","init"),this.P?(Mt(f,"$req",c),Mt(f,"SID","null"),N.T=!0,Sh(N,f,null)):Sh(N,f,c),this.G=2}}else this.G==3&&(o?xg(this,o):this.i.length==0||cg(this.h)||xg(this))};function xg(o,c){var f;c?f=c.l:f=o.U++;const g=Fn(o.I);Mt(g,"SID",o.K),Mt(g,"RID",f),Mt(g,"AID",o.T),La(o,g),o.m&&o.o&&Nh(g,o.m,o.o),f=new Ei(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Dg(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Ch(o.h,f),Sh(f,g,c)}function La(o,c){o.H&&B(o.H,function(f,g){Mt(c,g,f)}),o.l&&mg({},function(f,g){Mt(c,g,f)})}function Dg(o,c,f){f=Math.min(o.i.length,f);var g=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let M=-1;for(;;){const j=["count="+f];M==-1?0<f?(M=N[0].g,j.push("ofs="+M)):M=0:j.push("ofs="+M);let Dt=!0;for(let pe=0;pe<f;pe++){let yt=N[pe].g;const Se=N[pe].map;if(yt-=M,0>yt)M=Math.max(0,N[pe].g-100),Dt=!1;else try{GS(Se,j,"req"+yt+"_")}catch{g&&g(Se)}}if(Dt){g=j.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,g}function Og(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;X||xt(),K||(X(),K=!0),pt.add(c,o),o.v=0}}function Dh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ca(m(o.Fa,o),kg(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Vg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ca(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ve(10),jl(this),Vg(this))};function Oh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Vg(o){o.g=new Ei(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Fn(o.qa);Mt(c,"RID","rpc"),Mt(c,"SID",o.K),Mt(c,"AID",o.T),Mt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Mt(c,"TO",o.ja),Mt(c,"TYPE","xmlhttp"),La(o,c),o.m&&o.o&&Nh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=kl(Fn(c)),f.m=null,f.P=!0,ag(f,o)}e.Za=function(){this.C!=null&&(this.C=null,jl(this),Dh(this),Ve(19))};function Bl(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Mg(o,c){var f=null;if(o.g==c){Bl(o),Oh(o),o.g=null;var g=2}else if(Ih(o.h,c))f=c.D,fg(o.h,c),g=1;else return;if(o.G!=0){if(c.o)if(g==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;g=Nl(),St(g,new ng(g,f)),zl(o)}else Og(o);else if(N=c.s,N==3||N==0&&0<c.X||!(g==1&&XS(o,c)||g==2&&Dh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:Sr(o,5);break;case 4:Sr(o,10);break;case 3:Sr(o,6);break;default:Sr(o,2)}}}function kg(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function Sr(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),g=o.Xa;const N=!g;g=new br(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Vl(g,"https"),kl(g),N?qS(g.toString(),f):HS(g.toString(),f)}else Ve(2);o.G=0,o.l&&o.l.sa(c),Pg(o),Ng(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ve(2)):(this.j.info("Failed to ping google.com"),Ve(1))};function Pg(o){if(o.G=0,o.ka=[],o.l){const c=dg(o.h);(c.length!=0||o.i.length!=0)&&(V(o.ka,c),V(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function Lg(o,c,f){var g=f instanceof br?Fn(f):new br(f);if(g.g!="")c&&(g.g=c+"."+g.g),Ml(g,g.s);else{var N=l.location;g=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var M=new br(null);g&&Vl(M,g),c&&(M.g=c),N&&Ml(M,N),f&&(M.l=f),g=M}return f=o.D,c=o.ya,f&&c&&Mt(g,f,c),Mt(g,"VER",o.la),La(o,g),g}function Ug(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ft(new Pl({eb:f})):new Ft(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function jg(){}e=jg.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ql(){}ql.prototype.g=function(o,c){return new Ge(o,c)};function Ge(o,c){rt.call(this),this.g=new Cg(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new rs(this)}x(Ge,rt),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){xh(this.g)},Ge.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=_h(o),o=f);c.i.push(new OS(c.Ya++,o)),c.G==3&&zl(c)},Ge.prototype.N=function(){this.g.l=null,delete this.j,xh(this.g),delete this.g,Ge.aa.N.call(this)};function zg(o){Eh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}x(zg,Eh);function Bg(){Th.call(this),this.status=1}x(Bg,Th);function rs(o){this.g=o}x(rs,jg),rs.prototype.ua=function(){St(this.g,"a")},rs.prototype.ta=function(o){St(this.g,new zg(o))},rs.prototype.sa=function(o){St(this.g,new Bg)},rs.prototype.ra=function(){St(this.g,"b")},ql.prototype.createWebChannel=ql.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,aA=function(){return new ql},sA=function(){return Nl()},rA=Tr,Cd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xl.NO_ERROR=0,xl.TIMEOUT=8,xl.HTTP_ERROR=6,Su=xl,ig.COMPLETE="complete",iA=ig,Wp.EventType=Ra,Ra.OPEN="a",Ra.CLOSE="b",Ra.ERROR="c",Ra.MESSAGE="d",rt.prototype.listen=rt.prototype.K,Wa=Wp,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,nA=Ft}).apply(typeof su<"u"?su:typeof self<"u"?self:typeof window<"u"?window:{});const w_="@firebase/firestore",R_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ce.UNAUTHENTICATED=new Ce(null),Ce.GOOGLE_CREDENTIALS=new Ce("google-credentials-uid"),Ce.FIRST_PARTY=new Ce("first-party-uid"),Ce.MOCK_USER=new Ce("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new $m("@firebase/firestore");function fs(){return Fr.logLevel}function F(e,...t){if(Fr.logLevel<=ot.DEBUG){const n=t.map(Jm);Fr.debug(`Firestore (${ya}): ${e}`,...n)}}function hi(e,...t){if(Fr.logLevel<=ot.ERROR){const n=t.map(Jm);Fr.error(`Firestore (${ya}): ${e}`,...n)}}function na(e,...t){if(Fr.logLevel<=ot.WARN){const n=t.map(Jm);Fr.warn(`Firestore (${ya}): ${e}`,...n)}}function Jm(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,oA(e,i,n)}function oA(e,t,n){let i=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw hi(i),new Error(i)}function mt(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||oA(t,r,i)}function J(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends yi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class VI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ce.UNAUTHENTICATED))}shutdown(){}}class MI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kI{constructor(t){this.t=t,this.currentUser=Ce.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){mt(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new si;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new si,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new si)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(mt(typeof i.accessToken=="string",31837,{l:i}),new lA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return mt(t===null||typeof t=="string",2055,{h:t}),new Ce(t)}}class PI{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Ce.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LI{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new PI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Ce.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$e(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){mt(this.o===void 0,3512);const i=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new I_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(mt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new I_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=jI(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function lt(e,t){return e<t?-1:e>t?1:0}function Nd(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return Tf(r)===Tf(s)?lt(r,s):Tf(r)?1:-1}return lt(e.length,t.length)}const zI=55296,BI=57343;function Tf(e){const t=e.charCodeAt(0);return t>=zI&&t<=BI}function ia(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="__name__";class Cn{constructor(t,n,i){n===void 0?n=0:n>t.length&&Y(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Y(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Cn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Cn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=Cn.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return lt(t.length,n.length)}static compareSegments(t,n){const i=Cn.isNumericId(t),r=Cn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Cn.extractNumericId(t).compare(Cn.extractNumericId(n)):Nd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ji.fromString(t.substring(4,t.length-2))}}class Nt extends Cn{construct(t,n,i){return new Nt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Nt(n)}static emptyPath(){return new Nt([])}}const qI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ve extends Cn{construct(t,n,i){return new ve(t,n,i)}static isValidIdentifier(t){return qI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ve.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===C_}static keyField(){return new ve([C_])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ve(n)}static emptyPath(){return new ve([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.path=t}static fromPath(t){return new Q(Nt.fromString(t))}static fromName(t){return new Q(Nt.fromString(t).popFirst(5))}static empty(){return new Q(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Nt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Nt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Q(new Nt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(e,t,n){if(!n)throw new z(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function HI(e,t,n,i){if(t===!0&&i===!0)throw new z(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function N_(e){if(!Q.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function x_(e){if(Q.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function cA(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function $c(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Y(12329,{type:typeof e})}function rn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$c(e);throw new z(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(e,t){const n={typeString:e};return t&&(n.value=t),n}function pl(e,t){if(!cA(e))throw new z(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new z(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=-62135596800,O_=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(t){return kt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*O_);return new kt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<D_)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/O_}_compareTo(t){return this.seconds===t.seconds?lt(this.nanoseconds,t.nanoseconds):lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(pl(t,kt._jsonSchema))return new kt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-D_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kt._jsonSchemaVersion="firestore/timestamp/1.0",kt._jsonSchema={type:ee("string",kt._jsonSchemaVersion),seconds:ee("number"),nanoseconds:ee("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${static fromTimestamp(t){return new $(t)}static min(){return new $(new kt(0,0))}static max(){return new $(new kt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=-1;function FI(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=$.fromTimestamp(i===1e9?new kt(n+1,0):new kt(n,i));return new sr(r,Q.empty(),t)}function GI(e){return new sr(e.readTime,e.key,Bo)}class sr{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new sr($.min(),Q.empty(),Bo)}static max(){return new sr($.max(),Q.empty(),Bo)}}function QI(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Q.comparator(e.documentKey,t.documentKey),n!==0?n:lt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==KI)throw e;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(r=>r?P.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new P((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new P((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function XI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function va(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Zc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=-1;function gl(e){return e==null}function dc(e){return e===0&&1/e==-1/0}function $I(e){return typeof e=="number"&&Number.isInteger(e)&&!dc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="";function ZI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=V_(t)),t=WI(e.get(n),t);return V_(t)}function WI(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case hA:n+="";break;default:n+=s}}return n}function V_(e){return e+hA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function dr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function fA(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t,n){this.comparator=t,this.root=n||ye.EMPTY}insert(t,n){return new Ht(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ye.BLACK,null,null))}remove(t){return new Ht(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ye.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new au(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new au(this.root,t,this.comparator,!1)}getReverseIterator(){return new au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new au(this.root,t,this.comparator,!0)}}class au{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ye{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??ye.RED,this.left=r??ye.EMPTY,this.right=s??ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new ye(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ye.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ye.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Y(27949);return t+(this.isRed()?0:1)}}ye.EMPTY=null,ye.RED=!0,ye.BLACK=!1;ye.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new ye(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t){this.comparator=t,this.data=new Ht(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new k_(this.data.getIterator())}getIteratorFrom(t){return new k_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof ae)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ae(this.comparator);return n.data=t,n}}class k_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.fields=t,t.sort(ve.comparator)}static empty(){return new We([])}unionWith(t){let n=new ae(ve.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new We(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ia(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new dA("Invalid base64 string: "+s):s}}(t);return new Ae(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new Ae(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ae.EMPTY_BYTE_STRING=new Ae("");const JI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(e){if(mt(!!e,39018),typeof e=="string"){let t=0;const n=JI.exec(e);if(mt(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:$t(e.seconds),nanos:$t(e.nanos)}}function $t(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function or(e){return typeof e=="string"?Ae.fromBase64String(e):Ae.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="server_timestamp",pA="__type__",gA="__previous_value__",yA="__local_write_time__";function np(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[pA])==null?void 0:i.stringValue)===mA}function Wc(e){const t=e.mapValue.fields[gA];return np(t)?Wc(t):t}function qo(e){const t=ar(e.mapValue.fields[yA].timestampValue);return new kt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const mc="(default)";class Ho{constructor(t,n){this.projectId=t,this.database=n||mc}static empty(){return new Ho("","")}get isDefaultDatabase(){return this.database===mc}isEqual(t){return t instanceof Ho&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="__type__",eC="__max__",ou={mapValue:{}},vA="__vector__",pc="value";function lr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?np(e)?4:iC(e)?9007199254740991:nC(e)?10:11:Y(28295,{value:e})}function zn(e,t){if(e===t)return!0;const n=lr(e);if(n!==lr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qo(e).isEqual(qo(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=ar(r.timestampValue),l=ar(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return or(r.bytesValue).isEqual(or(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return $t(r.geoPointValue.latitude)===$t(s.geoPointValue.latitude)&&$t(r.geoPointValue.longitude)===$t(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return $t(r.integerValue)===$t(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=$t(r.doubleValue),l=$t(s.doubleValue);return a===l?dc(a)===dc(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return ia(e.arrayValue.values||[],t.arrayValue.values||[],zn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(M_(a)!==M_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!zn(a[u],l[u])))return!1;return!0}(e,t);default:return Y(52216,{left:e})}}function Fo(e,t){return(e.values||[]).find(n=>zn(n,t))!==void 0}function ra(e,t){if(e===t)return 0;const n=lr(e),i=lr(t);if(n!==i)return lt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=$t(s.integerValue||s.doubleValue),u=$t(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return P_(e.timestampValue,t.timestampValue);case 4:return P_(qo(e),qo(t));case 5:return Nd(e.stringValue,t.stringValue);case 6:return function(s,a){const l=or(s),u=or(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=lt(l[h],u[h]);if(d!==0)return d}return lt(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=lt($t(s.latitude),$t(a.latitude));return l!==0?l:lt($t(s.longitude),$t(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return L_(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,_,x,O;const l=s.fields||{},u=a.fields||{},h=(m=l[pc])==null?void 0:m.arrayValue,d=(_=u[pc])==null?void 0:_.arrayValue,p=lt(((x=h==null?void 0:h.values)==null?void 0:x.length)||0,((O=d==null?void 0:d.values)==null?void 0:O.length)||0);return p!==0?p:L_(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===ou.mapValue&&a===ou.mapValue)return 0;if(s===ou.mapValue)return 1;if(a===ou.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const m=Nd(u[p],d[p]);if(m!==0)return m;const _=ra(l[u[p]],h[d[p]]);if(_!==0)return _}return lt(u.length,d.length)}(e.mapValue,t.mapValue);default:throw Y(23264,{he:n})}}function P_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return lt(e,t);const n=ar(e),i=ar(t),r=lt(n.seconds,i.seconds);return r!==0?r:lt(n.nanos,i.nanos)}function L_(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=ra(n[r],i[r]);if(s)return s}return lt(n.length,i.length)}function sa(e){return xd(e)}function xd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=ar(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return or(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Q.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=xd(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${xd(n.fields[a])}`;return r+"}"}(e.mapValue):Y(61005,{value:e})}function wu(e){switch(lr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Wc(e);return t?16+wu(t):16;case 5:return 2*e.stringValue.length;case 6:return or(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+wu(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return dr(i.fields,(s,a)=>{r+=s.length+wu(a)}),r}(e.mapValue);default:throw Y(13486,{value:e})}}function U_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Dd(e){return!!e&&"integerValue"in e}function ip(e){return!!e&&"arrayValue"in e}function j_(e){return!!e&&"nullValue"in e}function z_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ru(e){return!!e&&"mapValue"in e}function nC(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[_A])==null?void 0:i.stringValue)===vA}function Eo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return dr(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Eo(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Eo(e.arrayValue.values[n]);return t}return{...e}}function iC(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===eC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t){this.value=t}static empty(){return new ke({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Ru(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Eo(n)}setAll(t){let n=ve.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=Eo(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());Ru(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return zn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];Ru(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){dr(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new ke(Eo(this.value))}}function EA(e){const t=[];return dr(e.fields,(n,i)=>{const r=new ve([n]);if(Ru(i)){const s=EA(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new We(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new he(t,0,$.min(),$.min(),$.min(),ke.empty(),0)}static newFoundDocument(t,n,i,r){return new he(t,1,n,$.min(),i,r,0)}static newNoDocument(t,n){return new he(t,2,n,$.min(),$.min(),ke.empty(),0)}static newUnknownDocument(t,n){return new he(t,3,n,$.min(),$.min(),ke.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual($.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ke.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ke.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof he&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new he(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(t,n){this.position=t,this.inclusive=n}}function B_(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=Q.comparator(Q.fromName(a.referenceValue),n.key):i=ra(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function q_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!zn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,n="asc"){this.field=t,this.dir=n}}function rC(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{}class te extends TA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new aC(t,n,i):n==="array-contains"?new uC(t,i):n==="in"?new cC(t,i):n==="not-in"?new hC(t,i):n==="array-contains-any"?new fC(t,i):new te(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new oC(t,i):new lC(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ra(n,this.value)):n!==null&&lr(this.value)===lr(n)&&this.matchesComparison(ra(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends TA{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new An(t,n)}matches(t){return AA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function AA(e){return e.op==="and"}function bA(e){return sC(e)&&AA(e)}function sC(e){for(const t of e.filters)if(t instanceof An)return!1;return!0}function Od(e){if(e instanceof te)return e.field.canonicalString()+e.op.toString()+sa(e.value);if(bA(e))return e.filters.map(t=>Od(t)).join(",");{const t=e.filters.map(n=>Od(n)).join(",");return`${e.op}(${t})`}}function SA(e,t){return e instanceof te?function(i,r){return r instanceof te&&i.op===r.op&&i.field.isEqual(r.field)&&zn(i.value,r.value)}(e,t):e instanceof An?function(i,r){return r instanceof An&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&SA(a,r.filters[l]),!0):!1}(e,t):void Y(19439)}function wA(e){return e instanceof te?function(n){return`${n.field.canonicalString()} ${n.op} ${sa(n.value)}`}(e):e instanceof An?function(n){return n.op.toString()+" {"+n.getFilters().map(wA).join(" ,")+"}"}(e):"Filter"}class aC extends te{constructor(t,n,i){super(t,n,i),this.key=Q.fromName(i.referenceValue)}matches(t){const n=Q.comparator(t.key,this.key);return this.matchesComparison(n)}}class oC extends te{constructor(t,n){super(t,"in",n),this.keys=RA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class lC extends te{constructor(t,n){super(t,"not-in",n),this.keys=RA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function RA(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class uC extends te{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ip(n)&&Fo(n.arrayValue,this.value)}}class cC extends te{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Fo(this.value.arrayValue,n)}}class hC extends te{constructor(t,n){super(t,"not-in",n)}matches(t){if(Fo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Fo(this.value.arrayValue,n)}}class fC extends te{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ip(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Fo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function H_(e,t=null,n=[],i=[],r=null,s=null,a=null){return new dC(e,t,n,i,r,s,a)}function rp(e){const t=J(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Od(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),gl(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>sa(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>sa(i)).join(",")),t.Te=n}return t.Te}function sp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!rC(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!SA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!q_(e.startAt,t.startAt)&&q_(e.endAt,t.endAt)}function Vd(e){return Q.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mC(e,t,n,i,r,s,a,l){return new Ea(e,t,n,i,r,s,a,l)}function Jc(e){return new Ea(e)}function F_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function IA(e){return e.collectionGroup!==null}function To(e){const t=J(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ae(ve.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Go(s,i))}),n.has(ve.keyField().canonicalString())||t.Ie.push(new Go(ve.keyField(),i))}return t.Ie}function Mn(e){const t=J(e);return t.Ee||(t.Ee=pC(t,To(e))),t.Ee}function pC(e,t){if(e.limitType==="F")return H_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Go(r.field,s)});const n=e.endAt?new gc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new gc(e.startAt.position,e.startAt.inclusive):null;return H_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Md(e,t){const n=e.filters.concat([t]);return new Ea(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function kd(e,t,n){return new Ea(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function th(e,t){return sp(Mn(e),Mn(t))&&e.limitType===t.limitType}function CA(e){return`${rp(Mn(e))}|lt:${e.limitType}`}function ds(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>wA(r)).join(", ")}]`),gl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>sa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>sa(r)).join(",")),`Target(${i})`}(Mn(e))}; limitType=${e.limitType})`}function eh(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of To(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=B_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,To(i),r)||i.endAt&&!function(a,l,u){const h=B_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,To(i),r))}(e,t)}function gC(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function NA(e){return(t,n)=>{let i=!1;for(const r of To(e)){const s=yC(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function yC(e,t,n){const i=e.field.isKeyField()?Q.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?ra(u,h):Y(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Y(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){dr(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return fA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=new Ht(Q.comparator);function fi(){return _C}const xA=new Ht(Q.comparator);function Ja(...e){let t=xA;for(const n of e)t=t.insert(n.key,n);return t}function DA(e){let t=xA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function xr(){return Ao()}function OA(){return Ao()}function Ao(){return new Wr(e=>e.toString(),(e,t)=>e.isEqual(t))}const vC=new Ht(Q.comparator),EC=new ae(Q.comparator);function ut(...e){let t=EC;for(const n of e)t=t.add(n);return t}const TC=new ae(lt);function AC(){return TC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dc(t)?"-0":t}}function VA(e){return{integerValue:""+e}}function bC(e,t){return $I(t)?VA(t):ap(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this._=void 0}}function SC(e,t,n){return e instanceof Qo?function(r,s){const a={fields:{[pA]:{stringValue:mA},[yA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&np(s)&&(s=Wc(s)),s&&(a.fields[gA]=s),{mapValue:a}}(n,t):e instanceof Ko?kA(e,t):e instanceof Yo?PA(e,t):function(r,s){const a=MA(r,s),l=G_(a)+G_(r.Ae);return Dd(a)&&Dd(r.Ae)?VA(l):ap(r.serializer,l)}(e,t)}function wC(e,t,n){return e instanceof Ko?kA(e,t):e instanceof Yo?PA(e,t):n}function MA(e,t){return e instanceof yc?function(i){return Dd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class Qo extends nh{}class Ko extends nh{constructor(t){super(),this.elements=t}}function kA(e,t){const n=LA(t);for(const i of e.elements)n.some(r=>zn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Yo extends nh{constructor(t){super(),this.elements=t}}function PA(e,t){let n=LA(t);for(const i of e.elements)n=n.filter(r=>!zn(r,i));return{arrayValue:{values:n}}}class yc extends nh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function G_(e){return $t(e.integerValue||e.doubleValue)}function LA(e){return ip(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(t,n){this.field=t,this.transform=n}}function IC(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Ko&&r instanceof Ko||i instanceof Yo&&r instanceof Yo?ia(i.elements,r.elements,zn):i instanceof yc&&r instanceof yc?zn(i.Ae,r.Ae):i instanceof Qo&&r instanceof Qo}(e.transform,t.transform)}class CC{constructor(t,n){this.version=t,this.transformResults=n}}class Ee{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ee}static exists(t){return new Ee(void 0,t)}static updateTime(t){return new Ee(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Iu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class ih{}function UA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new rh(e.key,Ee.none()):new yl(e.key,e.data,Ee.none());{const n=e.data,i=ke.empty();let r=new ae(ve.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new mr(e.key,i,new We(r.toArray()),Ee.none())}}function NC(e,t,n){e instanceof yl?function(r,s,a){const l=r.value.clone(),u=K_(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof mr?function(r,s,a){if(!Iu(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=K_(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(jA(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function bo(e,t,n,i){return e instanceof yl?function(s,a,l,u){if(!Iu(s.precondition,a))return l;const h=s.value.clone(),d=Y_(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof mr?function(s,a,l,u){if(!Iu(s.precondition,a))return l;const h=Y_(s.fieldTransforms,u,a),d=a.data;return d.setAll(jA(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(e,t,n,i):function(s,a,l){return Iu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function xC(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=MA(i.transform,r||null);s!=null&&(n===null&&(n=ke.empty()),n.set(i.field,s))}return n||null}function Q_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ia(i,r,(s,a)=>IC(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class yl extends ih{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class mr extends ih{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function jA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function K_(e,t,n){const i=new Map;mt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,wC(a,l,n[r]))}return i}function Y_(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,SC(s,a,t))}return i}class rh extends ih{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zA extends ih{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&NC(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=bo(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=bo(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=OA();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=UA(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument($.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ut())}isEqual(t){return this.batchId===t.batchId&&ia(this.mutations,t.mutations,(n,i)=>Q_(n,i))&&ia(this.baseMutations,t.baseMutations,(n,i)=>Q_(n,i))}}class op{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){mt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return vC}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new op(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,ft;function BA(e){switch(e){case k.OK:return Y(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return Y(15467,{code:e})}}function qA(e){if(e===void 0)return hi("GRPC error has no .code"),k.UNKNOWN;switch(e){case Wt.OK:return k.OK;case Wt.CANCELLED:return k.CANCELLED;case Wt.UNKNOWN:return k.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return k.INTERNAL;case Wt.UNAVAILABLE:return k.UNAVAILABLE;case Wt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Wt.NOT_FOUND:return k.NOT_FOUND;case Wt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Wt.ABORTED:return k.ABORTED;case Wt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Wt.DATA_LOSS:return k.DATA_LOSS;default:return Y(39323,{code:e})}}(ft=Wt||(Wt={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new Ji([4294967295,4294967295],0);function X_(e){const t=MC().encode(e),n=new eA;return n.update(t),new Uint8Array(n.digest())}function $_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ji([n,i],0),new Ji([r,s],0)]}class lp{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new to(`Invalid padding: ${n}`);if(i<0)throw new to(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new to(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new to(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Ji.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(Ji.fromNumber(i)));return r.compare(kC)===1&&(r=new Ji([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=X_(t),[i,r]=$_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new lp(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=X_(t),[i,r]=$_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class to extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,_l.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new sh($.min(),r,new Ht(lt),fi(),ut())}}class _l{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new _l(i,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class HA{constructor(t,n){this.targetId=t,this.Ce=n}}class FA{constructor(t,n,i=Ae.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Z_{constructor(){this.ve=0,this.Fe=W_(),this.Me=Ae.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ut(),n=ut(),i=ut();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Y(38017,{changeType:s})}}),new _l(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=W_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class PC{constructor(t){this.Ge=t,this.ze=new Map,this.je=fi(),this.Je=lu(),this.He=lu(),this.Ye=new Ht(lt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Y(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(Vd(s))if(i===0){const a=new Q(s.path);this.et(n,a,he.newNoDocument(a,$.min()))}else mt(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=or(i).toUint8Array()}catch(u){if(u instanceof dA)return na("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new lp(a,r,s)}catch(u){return na(u instanceof to?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&Vd(l.target)){const u=new Q(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,he.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ut();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new sh(t,n,this.Ye,this.je,i);return this.je=fi(),this.Je=lu(),this.He=lu(),this.Ye=new Ht(lt),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Z_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new ae(lt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new ae(lt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||F("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Z_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function lu(){return new Ht(Q.comparator)}function W_(){return new Ht(Q.comparator)}const LC={asc:"ASCENDING",desc:"DESCENDING"},UC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jC={and:"AND",or:"OR"};class zC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Pd(e,t){return e.useProto3Json||gl(t)?t:{value:t}}function _c(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function GA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function BC(e,t){return _c(e,t.toTimestamp())}function sn(e){return mt(!!e,49232),$.fromTimestamp(function(n){const i=ar(n);return new kt(i.seconds,i.nanos)}(e))}function up(e,t){return Ld(e,t).canonicalString()}function Ld(e,t){const n=function(r){return new Nt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function QA(e){const t=Nt.fromString(e);return mt(WA(t),10190,{key:t.toString()}),t}function vc(e,t){return up(e.databaseId,t.path)}function So(e,t){const n=QA(t);if(n.get(1)!==e.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Q(YA(n))}function KA(e,t){return up(e.databaseId,t)}function qC(e){const t=QA(e);return t.length===4?Nt.emptyPath():YA(t)}function Ud(e){return new Nt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function YA(e){return mt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function J_(e,t,n){return{name:vc(e,t),fields:n.value.mapValue.fields}}function HC(e,t){return"found"in t?function(i,r){mt(!!r.found,43571),r.found.name,r.found.updateTime;const s=So(i,r.found.name),a=sn(r.found.updateTime),l=r.found.createTime?sn(r.found.createTime):$.min(),u=new ke({mapValue:{fields:r.found.fields}});return he.newFoundDocument(s,a,l,u)}(e,t):"missing"in t?function(i,r){mt(!!r.missing,3894),mt(!!r.readTime,22933);const s=So(i,r.missing),a=sn(r.readTime);return he.newNoDocument(s,a)}(e,t):Y(7234,{result:t})}function FC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(mt(d===void 0||typeof d=="string",58123),Ae.fromBase64String(d||"")):(mt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ae.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?k.UNKNOWN:qA(h.code);return new z(d,h.message||"")}(a);n=new FA(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=So(e,i.document.name),s=sn(i.document.updateTime),a=i.document.createTime?sn(i.document.createTime):$.min(),l=new ke({mapValue:{fields:i.document.fields}}),u=he.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new Cu(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=So(e,i.document),s=i.readTime?sn(i.readTime):$.min(),a=he.newNoDocument(r,s),l=i.removedTargetIds||[];n=new Cu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=So(e,i.document),s=i.removedTargetIds||[];n=new Cu([],s,r,null)}else{if(!("filter"in t))return Y(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new VC(r,s),l=i.targetId;n=new HA(l,a)}}return n}function XA(e,t){let n;if(t instanceof yl)n={update:J_(e,t.key,t.value)};else if(t instanceof rh)n={delete:vc(e,t.key)};else if(t instanceof mr)n={update:J_(e,t.key,t.data),updateMask:JC(t.fieldMask)};else{if(!(t instanceof zA))return Y(16599,{Vt:t.type});n={verify:vc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Qo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ko)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof yc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:BC(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y(27497)}(e,t.precondition)),n}function GC(e,t){return e&&e.length>0?(mt(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?sn(r.updateTime):sn(s);return a.isEqual($.min())&&(a=sn(s)),new CC(a,r.transformResults||[])}(n,t))):[]}function QC(e,t){return{documents:[KA(e,t.path)]}}function KC(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=KA(e,r);const s=function(h){if(h.length!==0)return ZA(An.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:ms(m.field),direction:$C(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Pd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function YC(e){let t=qC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){mt(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(p){const m=$A(p);return m instanceof An&&bA(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(x){return new Go(ps(x.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,gl(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,_=p.values||[];return new gc(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,_=p.values||[];return new gc(_,m)}(n.endAt)),mC(t,r,a,s,l,"F",u,h)}function XC(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function $A(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ps(n.unaryFilter.field);return te.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ps(n.unaryFilter.field);return te.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ps(n.unaryFilter.field);return te.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ps(n.unaryFilter.field);return te.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(e):e.fieldFilter!==void 0?function(n){return te.create(ps(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return An.create(n.compositeFilter.filters.map(i=>$A(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(e):Y(30097,{filter:e})}function $C(e){return LC[e]}function ZC(e){return UC[e]}function WC(e){return jC[e]}function ms(e){return{fieldPath:e.canonicalString()}}function ps(e){return ve.fromServerFormat(e.fieldPath)}function ZA(e){return e instanceof te?function(n){if(n.op==="=="){if(z_(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NAN"}};if(j_(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(z_(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NAN"}};if(j_(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ms(n.field),op:ZC(n.op),value:n.value}}}(e):e instanceof An?function(n){const i=n.getFilters().map(r=>ZA(r));return i.length===1?i[0]:{compositeFilter:{op:WC(n.op),filters:i}}}(e):Y(54877,{filter:e})}function JC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function WA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t,n,i,r,s=$.min(),a=$.min(),l=Ae.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Bi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(t){this.yt=t}}function eN(e){const t=YC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?kd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.Cn=new iN}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(sr.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(sr.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class iN{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new ae(Nt.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new ae(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JA=41943040;class Be{static withCacheSize(t){return new Be(t,Be.DEFAULT_COLLECTION_PERCENTILE,Be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Be.DEFAULT_COLLECTION_PERCENTILE=10,Be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Be.DEFAULT=new Be(JA,Be.DEFAULT_COLLECTION_PERCENTILE,Be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Be.DISABLED=new Be(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new aa(0)}static cr(){return new aa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="LruGarbageCollector",rN=1048576;function nv([e,t],[n,i]){const r=lt(e,n);return r===0?lt(t,i):r}class sN{constructor(t){this.Ir=t,this.buffer=new ae(nv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();nv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class aN{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){F(ev,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){va(n)?F(ev,"Ignoring IndexedDB error during garbage collection: ",n):await _a(n)}await this.Vr(3e5)})}}class oN{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(Zc.ce);const i=new sN(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(tv)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tv):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,a=Date.now(),this.nthSequenceNumber(t,r))).next(p=>(i=p,l=Date.now(),this.removeTargets(t,i,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(p=>(h=Date.now(),fs()<=ot.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:p})))}}function lN(e,t){return new oN(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.changes=new Wr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,he.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&bo(i.mutation,r,We.empty(),kt.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ut()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ut()){const r=xr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=Ja();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=xr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ut()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=fi();const a=Ao(),l=function(){return Ao()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof mr)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),bo(d.mutation,h,d.mutation.getFieldMask(),kt.now())):a.set(h.key,We.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new cN(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=Ao();let r=new Ht((a,l)=>a-l),s=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||We.empty();d=l.applyToLocalView(h,d),i.set(u,d);const p=(r.get(l.batchId)||ut()).add(u);r=r.insert(l.batchId,p)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,p=OA();d.forEach(m=>{if(!s.has(m)){const _=UA(n.get(m),i.get(m));_!==null&&p.set(m,_),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):IA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):P.resolve(xr());let l=Bo,u=s;return a.next(h=>P.forEach(h,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,ut())).next(d=>({batchId:l,changes:DA(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Q(n)).next(i=>{let r=Ja();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=Ja();return this.indexManager.getCollectionParents(t,s).next(l=>P.forEach(l,u=>{const h=function(p,m){return new Ea(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,he.newInvalidDocument(d)))});let l=Ja();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&bo(d.mutation,h,We.empty(),kt.now()),eh(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:sn(r.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:eN(r.bundledQuery),readTime:sn(r.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.overlays=new Ht(Q.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=xr();return P.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const r=xr(),s=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return P.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Ht((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=xr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=xr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return P.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new OC(n,i));let s=this.qr.get(n);s===void 0&&(s=ut(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.sessionToken=Ae.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this.Qr=new ae(le.$r),this.Ur=new ae(le.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new le(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new le(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new Q(new Nt([])),i=new le(n,t),r=new le(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Q(new Nt([])),i=new le(n,t),r=new le(n,t+1);let s=ut();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new le(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class le{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Q.comparator(t.key,n.key)||lt(t.Yr,n.Yr)}static Kr(t,n){return lt(t.Yr,n.Yr)||Q.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ae(le.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new DC(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new le(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?ep:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new le(n,0),r=new le(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new ae(lt);return n.forEach(r=>{const s=new le(r,0),a=new le(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;Q.isDocumentKey(s)||(s=s.child(""));const a=new le(new Q(s),0);let l=new ae(lt);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){mt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,r=>{const s=new le(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new le(n,0),r=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(t){this.ri=t,this.docs=function(){return new Ht(Q.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():he.newInvalidDocument(n))}getEntries(t,n){let i=fi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():he.newInvalidDocument(r))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=fi();const a=n.path,l=new Q(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||QI(GI(d),i)<=0||(r.has(d.key)||eh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(t,n,i,r){Y(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new yN(this)}getSize(t){return P.resolve(this.size)}}class yN extends uN{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(t){this.persistence=t,this.si=new Wr(n=>rp(n),sp),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.oi=0,this._i=new cp,this.targetCount=0,this.ai=aa.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new aa(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),P.waitFor(s).next(()=>r)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(t,n){this.ui={},this.overlays={},this.ci=new Zc(0),this.li=!1,this.li=!0,this.hi=new mN,this.referenceDelegate=t(this),this.Pi=new _N(this),this.indexManager=new nN,this.remoteDocumentCache=function(r){return new gN(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new tN(n),this.Ii=new fN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new dN,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new pN(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){F("MemoryPersistence","Starting transaction:",t);const r=new vN(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class vN extends YI{constructor(t){super(),this.currentSequenceNumber=t}}class hp{constructor(t){this.persistence=t,this.Ri=new cp,this.Vi=null}static mi(t){return new hp(t)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const r=Q.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,$.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Ec{constructor(t,n){this.persistence=t,this.pi=new Wr(i=>ZI(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=lN(this,n)}static mi(t,n){return new Ec(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?P.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,$.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=wu(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return P.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=ut(),r=ut();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new fp(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return d2()?8:XI(De())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new EN;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(fs()<=ot.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(fs()<=ot.DEBUG&&F("QueryEngine","Query:",ds(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(fs()<=ot.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Mn(n))):P.resolve())}ys(t,n){if(F_(n))return P.resolve(null);let i=Mn(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=kd(n,null,"F"),i=Mn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=ut(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,kd(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return F_(n)||r.isEqual($.min())?P.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?P.resolve(null):(fs()<=ot.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ds(n)),this.vs(t,a,n,FI(r,Bo)).next(l=>l))})}Ds(t,n){let i=new ae(NA(t));return n.forEach((r,s)=>{eh(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return fs()<=ot.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",ds(n)),this.ps.getDocumentsMatchingQuery(t,n,sr.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="LocalStore",AN=3e8;class bN{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Ht(lt),this.xs=new Wr(s=>rp(s),sp),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new hN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function SN(e,t,n,i){return new bN(e,t,n,i)}async function eb(e,t){const n=J(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=ut();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function wN(e,t){const n=J(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const p=h.batch,m=p.keys();let _=P.resolve();return m.forEach(x=>{_=_.next(()=>d.getEntry(u,x)).next(O=>{const V=h.docVersions.get(x);mt(V!==null,48541),O.version.compareTo(V)<0&&(p.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),d.addEntry(O)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ut();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function nb(e){const t=J(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function RN(e,t){const n=J(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,p)=>{const m=r.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,p)));let _=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?_=_.withResumeToken(Ae.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(p,_),function(O,V,S){return O.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=AN?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(s,_))});let u=fi(),h=ut();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(IN(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual($.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function IN(e,t,n){let i=ut(),r=ut();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=fi();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual($.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):F(dp,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function CN(e,t){const n=J(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=ep),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function NN(e,t){const n=J(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,P.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Bi(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function jd(e,t,n){const i=J(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!va(a))throw a;F(dp,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function iv(e,t,n){const i=J(e);let r=$.min(),s=ut();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const p=J(u),m=p.xs.get(d);return m!==void 0?P.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,d)}(i,a,Mn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:$.min(),n?s:ut())).next(l=>(xN(i,gC(t),l),{documents:l,Qs:s})))}function xN(e,t,n){let i=e.Os.get(t)||$.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class rv{constructor(){this.activeTargetIds=AC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class DN{constructor(){this.Mo=new rv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new rv,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="ConnectivityMonitor";class av{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F(sv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){F(sv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu=null;function zd(){return uu===null?uu=function(){return 268435456+Math.round(2147483648*Math.random())}():uu++,"0x"+uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="RestConnection",VN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===mc?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=zd(),l=this.zo(t,n.toUriEncodedString());F(Af,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=pa(h);return this.Jo(t,l,u,i,d).then(p=>(F(Af,`Received RPC '${t}' ${a}: `,p),p),p=>{throw na(Af,`RPC '${t}' ${a} failed with error: `,p,"url: ",l,"request:",i),p})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ya}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=VN[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re="WebChannelConnection";class PN extends MN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=zd();return new Promise((l,u)=>{const h=new nA;h.setWithCredentials(!0),h.listenOnce(iA.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Su.NO_ERROR:const p=h.getResponseJson();F(Re,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),l(p);break;case Su.TIMEOUT:F(Re,`RPC '${t}' ${a} timed out`),u(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case Su.HTTP_ERROR:const m=h.getStatus();if(F(Re,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const x=_==null?void 0:_.error;if(x&&x.status&&x.message){const O=function(S){const E=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(E)>=0?E:k.UNKNOWN}(x.status);u(new z(O,x.message))}else u(new z(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new z(k.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{F(Re,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);F(Re,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=zd(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=aA(),l=sA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");F(Re,`Creating RPC '${t}' stream ${r}: ${d}`,u);const p=a.createWebChannel(d,u);this.I_(p);let m=!1,_=!1;const x=new kN({Yo:V=>{_?F(Re,`Not sending because RPC '${t}' stream ${r} is closed:`,V):(m||(F(Re,`Opening RPC '${t}' stream ${r} transport.`),p.open(),m=!0),F(Re,`RPC '${t}' stream ${r} sending:`,V),p.send(V))},Zo:()=>p.close()}),O=(V,S,E)=>{V.listen(S,R=>{try{E(R)}catch(D){setTimeout(()=>{throw D},0)}})};return O(p,Wa.EventType.OPEN,()=>{_||(F(Re,`RPC '${t}' stream ${r} transport opened.`),x.o_())}),O(p,Wa.EventType.CLOSE,()=>{_||(_=!0,F(Re,`RPC '${t}' stream ${r} transport closed`),x.a_(),this.E_(p))}),O(p,Wa.EventType.ERROR,V=>{_||(_=!0,na(Re,`RPC '${t}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),x.a_(new z(k.UNAVAILABLE,"The operation could not be completed")))}),O(p,Wa.EventType.MESSAGE,V=>{var S;if(!_){const E=V.data[0];mt(!!E,16349);const R=E,D=(R==null?void 0:R.error)||((S=R[0])==null?void 0:S.error);if(D){F(Re,`RPC '${t}' stream ${r} received error:`,D);const U=D.status;let B=function(A){const w=Wt[A];if(w!==void 0)return qA(w)}(U),T=D.message;B===void 0&&(B=k.INTERNAL,T="Unknown error status: "+U+" with message "+D.message),_=!0,x.a_(new z(B,T)),p.close()}else F(Re,`RPC '${t}' stream ${r} received:`,E),x.u_(E)}}),O(l,rA.STAT_EVENT,V=>{V.stat===Cd.PROXY?F(Re,`RPC '${t}' stream ${r} detected buffering proxy`):V.stat===Cd.NOPROXY&&F(Re,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function bf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(e){return new zC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&F("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="PersistentStream";class ib{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new mp(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(hi(n.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new z(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return F(ov,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(F(ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LN extends ib{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=FC(this.serializer,t),i=function(s){if(!("targetChange"in s))return $.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?$.min():a.readTime?sn(a.readTime):$.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Ud(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Vd(u)?{documents:QC(s,u)}:{query:KC(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=GA(s,a.resumeToken);const h=Pd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo($.min())>0){l.readTime=_c(s,a.snapshotVersion.toTimestamp());const h=Pd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=XC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Ud(this.serializer),n.removeTarget=t,this.q_(n)}}class UN extends ib{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return mt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,mt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){mt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=GC(t.writeResults,t.commitTime),i=sn(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Ud(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>XA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{}class zN extends jN{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,Ld(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(k.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Ld(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class BN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hi(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="RemoteStore";class qN{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Jr(this)&&(F(Gr,"Restarting streams for network reachability change."),await async function(u){const h=J(u);h.Ea.add(4),await vl(h),h.Ra.set("Unknown"),h.Ea.delete(4),await oh(h)}(this))})}),this.Ra=new BN(i,r)}}async function oh(e){if(Jr(e))for(const t of e.da)await t(!0)}async function vl(e){for(const t of e.da)await t(!1)}function rb(e,t){const n=J(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),_p(n)?yp(n):Ta(n).O_()&&gp(n,t))}function pp(e,t){const n=J(e),i=Ta(n);n.Ia.delete(t),i.O_()&&sb(n,t),n.Ia.size===0&&(i.O_()?i.L_():Jr(n)&&n.Ra.set("Unknown"))}function gp(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ta(e).Y_(t)}function sb(e,t){e.Va.Ue(t),Ta(e).Z_(t)}function yp(e){e.Va=new PC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Ta(e).start(),e.Ra.ua()}function _p(e){return Jr(e)&&!Ta(e).x_()&&e.Ia.size>0}function Jr(e){return J(e).Ea.size===0}function ab(e){e.Va=void 0}async function HN(e){e.Ra.set("Online")}async function FN(e){e.Ia.forEach((t,n)=>{gp(e,t)})}async function GN(e,t){ab(e),_p(e)?(e.Ra.ha(t),yp(e)):e.Ra.set("Unknown")}async function QN(e,t,n){if(e.Ra.set("Online"),t instanceof FA&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){F(Gr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Tc(e,i)}else if(t instanceof Cu?e.Va.Ze(t):t instanceof HA?e.Va.st(t):e.Va.tt(t),!n.isEqual($.min()))try{const i=await nb(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(Ae.EMPTY_BYTE_STRING,d.snapshotVersion)),sb(s,u);const p=new Bi(d.target,u,h,d.sequenceNumber);gp(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){F(Gr,"Failed to raise snapshot:",i),await Tc(e,i)}}async function Tc(e,t,n){if(!va(t))throw t;e.Ea.add(1),await vl(e),e.Ra.set("Offline"),n||(n=()=>nb(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{F(Gr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await oh(e)})}function ob(e,t){return t().catch(n=>Tc(e,n,t))}async function lh(e){const t=J(e),n=ur(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ep;for(;KN(t);)try{const r=await CN(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,YN(t,r)}catch(r){await Tc(t,r)}lb(t)&&ub(t)}function KN(e){return Jr(e)&&e.Ta.length<10}function YN(e,t){e.Ta.push(t);const n=ur(e);n.O_()&&n.X_&&n.ea(t.mutations)}function lb(e){return Jr(e)&&!ur(e).x_()&&e.Ta.length>0}function ub(e){ur(e).start()}async function XN(e){ur(e).ra()}async function $N(e){const t=ur(e);for(const n of e.Ta)t.ea(n.mutations)}async function ZN(e,t,n){const i=e.Ta.shift(),r=op.from(i,t,n);await ob(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await lh(e)}async function WN(e,t){t&&ur(e).X_&&await async function(i,r){if(function(a){return BA(a)&&a!==k.ABORTED}(r.code)){const s=i.Ta.shift();ur(i).B_(),await ob(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await lh(i)}}(e,t),lb(e)&&ub(e)}async function lv(e,t){const n=J(e);n.asyncQueue.verifyOperationInProgress(),F(Gr,"RemoteStore received new credentials");const i=Jr(n);n.Ea.add(3),await vl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await oh(n)}async function JN(e,t){const n=J(e);t?(n.Ea.delete(2),await oh(n)):t||(n.Ea.add(2),await vl(n),n.Ra.set("Unknown"))}function Ta(e){return e.ma||(e.ma=function(n,i,r){const s=J(n);return s.sa(),new LN(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:HN.bind(null,e),t_:FN.bind(null,e),r_:GN.bind(null,e),H_:QN.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),_p(e)?yp(e):e.Ra.set("Unknown")):(await e.ma.stop(),ab(e))})),e.ma}function ur(e){return e.fa||(e.fa=function(n,i,r){const s=J(n);return s.sa(),new UN(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:XN.bind(null,e),r_:WN.bind(null,e),ta:$N.bind(null,e),na:ZN.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await lh(e)):(await e.fa.stop(),e.Ta.length>0&&(F(Gr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new vp(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ep(e,t){if(hi("AsyncQueue",`${t}: ${e}`),va(e))return new z(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{static emptySet(t){return new Us(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=Ja(),this.sortedSet=new Ht(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Us)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Us;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.ga=new Ht(Q.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Y(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class oa{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new oa(t,n,Us.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&th(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class ex{constructor(){this.queries=cv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=J(n),s=r.queries;r.queries=cv(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new z(k.ABORTED,"Firestore shutting down"))}}function cv(){return new Wr(e=>CA(e),th)}async function cb(e,t){const n=J(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new tx,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=Ep(a,`Initialization of query '${ds(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Tp(n)}async function hb(e,t){const n=J(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function nx(e,t){const n=J(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&Tp(n)}function ix(e,t,n){const i=J(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function Tp(e){e.Ca.forEach(t=>{t.next()})}var Bd,hv;(hv=Bd||(Bd={})).Ma="default",hv.Cache="cache";class fb{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new oa(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=oa.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Bd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(t){this.key=t}}class mb{constructor(t){this.key=t}}class rx{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=NA(t),this.tu=new Us(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new uv,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,p)=>{const m=r.get(d),_=eh(this.query,p)?p:null,x=!!m&&this.mutatedKeys.has(m.key),O=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let V=!1;m&&_?m.data.isEqual(_.data)?x!==O&&(i.track({type:3,doc:_}),V=!0):this.su(m,_)||(i.track({type:2,doc:_}),V=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),V=!0):m&&!_&&(i.track({type:1,doc:m}),V=!0,(u||h)&&(l=!0)),V&&(_?(a=a.add(_),s=O?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,p)=>function(_,x){const O=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:V})}};return O(_)-O(x)}(d.type,p.type)||this.eu(d.doc,p.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new oa(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ut(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new mb(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new db(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ut();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return oa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ap="SyncEngine";class sx{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class ax{constructor(t){this.key=t,this.hu=!1}}class ox{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Wr(l=>CA(l),th),this.Iu=new Map,this.Eu=new Set,this.du=new Ht(Q.comparator),this.Au=new Map,this.Ru=new cp,this.Vu={},this.mu=new Map,this.fu=aa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lx(e,t,n=!0){const i=Eb(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await pb(i,t,n,!0),r}async function ux(e,t){const n=Eb(e);await pb(n,t,!0,!1)}async function pb(e,t,n,i){const r=await NN(e.localStore,Mn(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await cx(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&rb(e.remoteStore,r),l}async function cx(e,t,n,i,r){e.pu=(p,m,_)=>async function(O,V,S,E){let R=V.view.ru(S);R.Cs&&(R=await iv(O.localStore,V.query,!1).then(({documents:T})=>V.view.ru(T,R)));const D=E&&E.targetChanges.get(V.targetId),U=E&&E.targetMismatches.get(V.targetId)!=null,B=V.view.applyChanges(R,O.isPrimaryClient,D,U);return dv(O,V.targetId,B.au),B.snapshot}(e,p,m,_);const s=await iv(e.localStore,t,!0),a=new rx(t,s.Qs),l=a.ru(s.documents),u=_l.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);dv(e,n,h.au);const d=new sx(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function hx(e,t,n){const i=J(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!th(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await jd(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&pp(i.remoteStore,r.targetId),qd(i,r.targetId)}).catch(_a)):(qd(i,r.targetId),await jd(i.localStore,r.targetId,!0))}async function fx(e,t){const n=J(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),pp(n.remoteStore,i.targetId))}async function dx(e,t,n){const i=Ex(e);try{const r=await function(a,l){const u=J(a),h=kt.now(),d=l.reduce((_,x)=>_.add(x.key),ut());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let x=fi(),O=ut();return u.Ns.getEntries(_,d).next(V=>{x=V,x.forEach((S,E)=>{E.isValidDocument()||(O=O.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,x)).next(V=>{p=V;const S=[];for(const E of l){const R=xC(E,p.get(E.key).overlayedDocument);R!=null&&S.push(new mr(E.key,R,EA(R.value.mapValue),Ee.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,S,l)}).next(V=>{m=V;const S=V.applyToLocalDocumentSet(p,O);return u.documentOverlayCache.saveOverlays(_,V.batchId,S)})}).then(()=>({batchId:m.batchId,changes:DA(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ht(lt)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await El(i,r.changes),await lh(i.remoteStore)}catch(r){const s=Ep(r,"Failed to persist write");n.reject(s)}}async function gb(e,t){const n=J(e);try{const i=await RN(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(mt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?mt(a.hu,14607):r.removedDocuments.size>0&&(mt(a.hu,42227),a.hu=!1))}),await El(n,i,t)}catch(i){await _a(i)}}function fv(e,t,n){const i=J(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=J(a);u.onlineState=l;let h=!1;u.queries.forEach((d,p)=>{for(const m of p.Sa)m.va(l)&&(h=!0)}),h&&Tp(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function mx(e,t,n){const i=J(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Ht(Q.comparator);a=a.insert(s,he.newNoDocument(s,$.min()));const l=ut().add(s),u=new sh($.min(),new Map,new Ht(lt),a,l);await gb(i,u),i.du=i.du.remove(s),i.Au.delete(t),bp(i)}else await jd(i.localStore,t,!1).then(()=>qd(i,t,n)).catch(_a)}async function px(e,t){const n=J(e),i=t.batch.batchId;try{const r=await wN(n.localStore,t);_b(n,i,null),yb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await El(n,r)}catch(r){await _a(r)}}async function gx(e,t,n){const i=J(e);try{const r=await function(a,l){const u=J(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(mt(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);_b(i,t,n),yb(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await El(i,r)}catch(r){await _a(r)}}function yb(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function _b(e,t,n){const i=J(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function qd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||vb(e,i)})}function vb(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(pp(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),bp(e))}function dv(e,t,n){for(const i of n)i instanceof db?(e.Ru.addReference(i.key,t),yx(e,i)):i instanceof mb?(F(Ap,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||vb(e,i.key)):Y(19791,{wu:i})}function yx(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(F(Ap,"New document in limbo: "+n),e.Eu.add(i),bp(e))}function bp(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Q(Nt.fromString(t)),i=e.fu.next();e.Au.set(i,new ax(n)),e.du=e.du.insert(n,i),rb(e.remoteStore,new Bi(Mn(Jc(n.path)),i,"TargetPurposeLimboResolution",Zc.ce))}}async function El(e,t,n){const i=J(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){r.push(h);const p=fp.As(u.targetId,h);s.push(p)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=J(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(h,m=>P.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>P.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!va(p))throw p;F(dp,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const _=d.Ms.get(m),x=_.snapshotVersion,O=_.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(m,O)}}}(i.localStore,s))}async function _x(e,t){const n=J(e);if(!n.currentUser.isEqual(t)){F(Ap,"User change. New user:",t.toKey());const i=await eb(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new z(k.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await El(n,i.Ls)}}function vx(e,t){const n=J(e),i=n.Au.get(t);if(i&&i.hu)return ut().add(i.key);{let r=ut();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function Eb(e){const t=J(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mx.bind(null,t),t.Pu.H_=nx.bind(null,t.eventManager),t.Pu.yu=ix.bind(null,t.eventManager),t}function Ex(e){const t=J(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=px.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gx.bind(null,t),t}class Ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ah(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return SN(this.persistence,new TN,t.initialUser,this.serializer)}Cu(t){return new tb(hp.mi,this.serializer)}Du(t){return new DN}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ac.provider={build:()=>new Ac};class Tx extends Ac{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){mt(this.persistence.referenceDelegate instanceof Ec,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new aN(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Be.withCacheSize(this.cacheSizeBytes):Be.DEFAULT;return new tb(i=>Ec.mi(i,n),this.serializer)}}class Hd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_x.bind(null,this.syncEngine),await JN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new ex}()}createDatastore(t){const n=ah(t.databaseInfo.databaseId),i=function(s){return new PN(s)}(t.databaseInfo);return function(s,a,l,u){return new zN(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new qN(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>fv(this.syncEngine,n,0),function(){return av.v()?new av:new ON}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const p=new ox(r,s,a,l,u,h);return d&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=J(r);F(Gr,"RemoteStore shutting down."),s.Ea.add(5),await vl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Hd.provider={build:()=>new Hd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):hi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=J(r),l={documents:s.map(p=>vc(a.serializer,p))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,Nt.emptyPath(),l,s.length),h=new Map;u.forEach(p=>{const m=HC(a.serializer,p);h.set(m.key.toString(),m)});const d=[];return s.forEach(p=>{const m=h.get(p.toString());mt(!!m,55234,{key:p}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new rh(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=Q.fromPath(i);this.mutations.push(new zA(r,this.precondition(r)))}),await async function(i,r){const s=J(i),a={writes:r.map(l=>XA(s.serializer,l))};await s.Go("Commit",s.serializer.databaseId,Nt.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Y(50498,{Gu:t.constructor.name});n=$.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new z(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual($.min())?Ee.exists(!1):Ee.updateTime(n):Ee.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual($.min()))throw new z(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ee.updateTime(n)}return Ee.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new mp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new Ax(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!gl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!BA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="FirestoreClient";class Sx{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ce.UNAUTHENTICATED,this.clientId=tp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{F(cr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(F(cr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Ep(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Sf(e,t){e.asyncQueue.verifyOperationInProgress(),F(cr,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await eb(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function mv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await wx(e);F(cr,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>lv(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>lv(t.remoteStore,r)),e._onlineComponents=t}async function wx(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){F(cr,"Using user provided OfflineComponentProvider");try{await Sf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===k.FAILED_PRECONDITION||r.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;na("Error using user provided cache. Falling back to memory cache: "+n),await Sf(e,new Ac)}}else F(cr,"Using default OfflineComponentProvider"),await Sf(e,new Tx(void 0));return e._offlineComponents}async function Sp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(F(cr,"Using user provided OnlineComponentProvider"),await mv(e,e._uninitializedComponentsProvider._online)):(F(cr,"Using default OnlineComponentProvider"),await mv(e,new Hd))),e._onlineComponents}function Rx(e){return Sp(e).then(t=>t.syncEngine)}function Ix(e){return Sp(e).then(t=>t.datastore)}async function Fd(e){const t=await Sp(e),n=t.eventManager;return n.onListen=lx.bind(null,t.syncEngine),n.onUnlisten=hx.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ux.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fx.bind(null,t.syncEngine),n}function Cx(e,t,n={}){const i=new si;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new Tb({next:m=>{d.Nu(),a.enqueueAndForget(()=>hb(s,p));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new z(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new z(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new fb(Jc(l.path),d,{includeMetadataChanges:!0,qa:!0});return cb(s,p)}(await Fd(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="firestore.googleapis.com",gv=!0;class yv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bb,this.ssl=gv}else this.host=t.host,this.ssl=t.ssl??gv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=JA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<rN)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}HI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ab(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class uh{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new VI;switch(i.type){case"firstParty":return new LI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=pv.get(n);i&&(F("ComponentProvider","Removing Datastore"),pv.delete(n),i.terminate())}(this),Promise.resolve()}}function Nx(e,t,n,i={}){var h;e=rn(e,uh);const r=pa(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(K0(`https://${l}`),Y0("Firestore",!0)),s.host!==bb&&s.host!==l&&na("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!qr(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=Ce.MOCK_USER;else{d=r2(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ce(m)}e._authCredentials=new MI(new lA(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new ts(this.firestore,t,this._query)}}class qt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qt(this.firestore,t,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(pl(n,qt._jsonSchema))return new qt(t,i||null,new Q(Nt.fromString(n.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:ee("string",qt._jsonSchemaVersion),referencePath:ee("string")};class tr extends ts{constructor(t,n,i){super(t,n,Jc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qt(this.firestore,null,new Q(t))}withConverter(t){return new tr(this.firestore,t,this._path)}}function _v(e,t,...n){if(e=Kt(e),uA("collection","path",t),e instanceof uh){const i=Nt.fromString(t,...n);return x_(i),new tr(e,null,i)}{if(!(e instanceof qt||e instanceof tr))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Nt.fromString(t,...n));return x_(i),new tr(e.firestore,null,i)}}function Ie(e,t,...n){if(e=Kt(e),arguments.length===1&&(t=tp.newId()),uA("doc","path",t),e instanceof uh){const i=Nt.fromString(t,...n);return N_(i),new qt(e,null,new Q(i))}{if(!(e instanceof qt||e instanceof tr))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Nt.fromString(t,...n));return N_(i),new qt(e.firestore,e instanceof tr?e.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="AsyncQueue";class Ev{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new mp(this,"async_queue_retry"),this._c=()=>{const i=bf();i&&F(vv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=bf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=bf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new si;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!va(t))throw t;F(vv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,hi("INTERNAL UNHANDLED ERROR: ",Tv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=vp.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&Y(47125,{Pc:Tv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Tv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class di extends uh{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new Ev,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Ev(t),this._firestoreClient=void 0,await t}}}function xx(e,t){const n=typeof e=="object"?e:W0(),i=typeof e=="string"?e:mc,r=Wm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=n2("firestore");s&&Nx(r,...s)}return r}function ch(e){if(e._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Dx(e),e._firestoreClient}function Dx(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new tC(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Ab(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Sx(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ze(Ae.fromBase64String(t))}catch(n){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ze(Ae.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ze._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(pl(t,Ze._jsonSchema))return Ze.fromBase64String(t.bytes)}}Ze._jsonSchemaVersion="firestore/bytes/1.0",Ze._jsonSchema={type:ee("string",Ze._jsonSchemaVersion),bytes:ee("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ve(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return lt(this._lat,t._lat)||lt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kn._jsonSchemaVersion}}static fromJSON(t){if(pl(t,kn._jsonSchema))return new kn(t.latitude,t.longitude)}}kn._jsonSchemaVersion="firestore/geoPoint/1.0",kn._jsonSchema={type:ee("string",kn._jsonSchemaVersion),latitude:ee("number"),longitude:ee("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Pn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(pl(t,Pn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Pn(t.vectorValues);throw new z(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pn._jsonSchemaVersion="firestore/vectorValue/1.0",Pn._jsonSchema={type:ee("string",Pn._jsonSchemaVersion),vectorValues:ee("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=/^__.*__$/;class Vx{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new mr(t,this.data,this.fieldMask,n,this.fieldTransforms):new yl(t,this.data,n,this.fieldTransforms)}}class Sb{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new mr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function wb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:e})}}class wp{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new wp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return bc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(wb(this.Ac)&&Ox.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Mx{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||ah(t)}Cc(t,n,i,r=!1){return new wp({Ac:t,methodName:n,Dc:i,path:ve.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Al(e){const t=e._freezeSettings(),n=ah(e._databaseId);return new Mx(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Rp(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);Cp("Data must be an object, but it was:",a,i);const l=Cb(i,a);let u,h;if(s.merge)u=new We(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const m=Gd(t,p,n);if(!a.contains(m))throw new z(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);xb(d,m)||d.push(m)}u=new We(d),h=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=a.fieldTransforms;return new Vx(new ke(l),u,h)}class fh extends hh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof fh}}class Ip extends hh{_toFieldTransform(t){return new RC(t.path,new Qo)}isEqual(t){return t instanceof Ip}}function Rb(e,t,n,i){const r=e.Cc(1,t,n);Cp("Data must be an object, but it was:",r,i);const s=[],a=ke.empty();dr(i,(u,h)=>{const d=Np(t,u,n);h=Kt(h);const p=r.yc(d);if(h instanceof fh)s.push(d);else{const m=bl(h,p);m!=null&&(s.push(d),a.set(d,m))}});const l=new We(s);return new Sb(a,l,r.fieldTransforms)}function Ib(e,t,n,i,r,s){const a=e.Cc(1,t,n),l=[Gd(t,i,n)],u=[r];if(s.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(Gd(t,s[m])),u.push(s[m+1]);const h=[],d=ke.empty();for(let m=l.length-1;m>=0;--m)if(!xb(h,l[m])){const _=l[m];let x=u[m];x=Kt(x);const O=a.yc(_);if(x instanceof fh)h.push(_);else{const V=bl(x,O);V!=null&&(h.push(_),d.set(_,V))}}const p=new We(h);return new Sb(d,p,a.fieldTransforms)}function kx(e,t,n,i=!1){return bl(n,e.Cc(i?4:3,t))}function bl(e,t){if(Nb(e=Kt(e)))return Cp("Unsupported field value:",t,e),Cb(e,t);if(e instanceof hh)return function(i,r){if(!wb(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=bl(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=Kt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return bC(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=kt.fromDate(i);return{timestampValue:_c(r.serializer,s)}}if(i instanceof kt){const s=new kt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_c(r.serializer,s)}}if(i instanceof kn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ze)return{bytesValue:GA(r.serializer,i._byteString)};if(i instanceof qt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:up(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Pn)return function(a,l){return{mapValue:{fields:{[_A]:{stringValue:vA},[pc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return ap(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${$c(i)}`)}(e,t)}function Cb(e,t){const n={};return fA(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):dr(e,(i,r)=>{const s=bl(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function Nb(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof kt||e instanceof kn||e instanceof Ze||e instanceof qt||e instanceof hh||e instanceof Pn)}function Cp(e,t,n){if(!Nb(n)||!cA(n)){const i=$c(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Gd(e,t,n){if((t=Kt(t))instanceof Tl)return t._internalPath;if(typeof t=="string")return Np(e,t);throw bc("Field path arguments must be of type string or ",e,!1,void 0,n)}const Px=new RegExp("[~\\*/\\[\\]]");function Np(e,t,n){if(t.search(Px)>=0)throw bc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Tl(...t.split("."))._internalPath}catch{throw bc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function bc(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new z(k.INVALID_ARGUMENT,l+e+u)}function xb(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Lx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(xp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Lx extends Sc{data(){return super.data()}}function xp(e,t){return typeof t=="string"?Np(e,t):t instanceof Tl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dp{}class Db extends Dp{}function jx(e,t,...n){let i=[];t instanceof Dp&&i.push(t),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof Vp).length,l=s.filter(u=>u instanceof Op).length;if(a>1||a>0&&l>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class Op extends Db{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Op(t,n,i)}_apply(t){const n=this._parse(t);return Ob(t._query,n),new ts(t.firestore,t.converter,Md(t._query,n))}_parse(t){const n=Al(t.firestore);return function(s,a,l,u,h,d,p){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Sv(p,d);const x=[];for(const O of p)x.push(bv(u,s,O));m={arrayValue:{values:x}}}else m=bv(u,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Sv(p,d),m=kx(l,a,p,d==="in"||d==="not-in");return te.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Vp extends Dp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Vp(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:An.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)Ob(a,u),a=Md(a,u)}(t._query,n),new ts(t.firestore,t.converter,Md(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mp extends Db{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Mp(t,n)}_apply(t){const n=function(r,s,a){if(r.startAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Go(s,a)}(t._query,this._field,this._direction);return new ts(t.firestore,t.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new Ea(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}}function zx(e,t="asc"){const n=t,i=xp("orderBy",e);return Mp._create(i,n)}function bv(e,t,n){if(typeof(n=Kt(n))=="string"){if(n==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IA(t)&&n.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Nt.fromString(n));if(!Q.isDocumentKey(i))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return U_(e,new Q(i))}if(n instanceof qt)return U_(e,n._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$c(n)}.`)}function Sv(e,t){if(!Array.isArray(e)||e.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Ob(e,t){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Vb{convertValue(t,n="none"){switch(lr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $t(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(or(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Y(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return dr(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[pc].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>$t(a.doubleValue));return new Pn(n)}convertGeoPoint(t){return new kn($t(t.latitude),$t(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Wc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(qo(t));default:return null}}convertTimestamp(t){const n=ar(t);return new kt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Nt.fromString(t);mt(WA(i),9688,{name:t});const r=new Ho(i.get(1),i.get(3)),s=new Q(i.popFirst(5));return r.isEqual(n)||hi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class Bx extends Vb{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ze(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qt(this.firestore,null,n)}}class Cs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class er extends Sc{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(xp("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=er._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}er._jsonSchemaVersion="firestore/documentSnapshot/1.0",er._jsonSchema={type:ee("string",er._jsonSchemaVersion),bundleSource:ee("string","DocumentSnapshot"),bundleName:ee("string"),bundle:ee("string")};class Nu extends er{data(t={}){return super.data(t)}}class js{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new Cs(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Nu(this._firestore,this._userDataWriter,i.key,i,new Cs(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new Nu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Cs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Nu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Cs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:qx(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=js._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=tp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function qx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(e){e=rn(e,qt);const t=rn(e.firestore,di);return Cx(ch(t),e._key).then(n=>Mb(t,e,n))}js._jsonSchemaVersion="firestore/querySnapshot/1.0",js._jsonSchema={type:ee("string",js._jsonSchemaVersion),bundleSource:ee("string","QuerySnapshot"),bundleName:ee("string"),bundle:ee("string")};class Pp extends Vb{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ze(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function zs(e,t,n){e=rn(e,qt);const i=rn(e.firestore,di),r=kp(e.converter,t,n);return dh(i,[Rp(Al(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,Ee.none())])}function Hx(e,t,n,...i){e=rn(e,qt);const r=rn(e.firestore,di),s=Al(r);let a;return a=typeof(t=Kt(t))=="string"||t instanceof Tl?Ib(s,"updateDoc",e._key,t,n,i):Rb(s,"updateDoc",e._key,t),dh(r,[a.toMutation(e._key,Ee.exists(!0))])}function Fx(e){return dh(rn(e.firestore,di),[new rh(e._key,Ee.none())])}function Gx(e,t){const n=rn(e.firestore,di),i=Ie(e),r=kp(e.converter,t);return dh(n,[Rp(Al(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,Ee.exists(!1))]).then(()=>i)}function xu(e,...t){var u,h,d;e=Kt(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||Av(t[i])||(n=t[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Av(t[i])){const p=t[i];t[i]=(u=p.next)==null?void 0:u.bind(p),t[i+1]=(h=p.error)==null?void 0:h.bind(p),t[i+2]=(d=p.complete)==null?void 0:d.bind(p)}let s,a,l;if(e instanceof qt)a=rn(e.firestore,di),l=Jc(e._key.path),s={next:p=>{t[i]&&t[i](Mb(a,e,p))},error:t[i+1],complete:t[i+2]};else{const p=rn(e,ts);a=rn(p.firestore,di),l=p._query;const m=new Pp(a);s={next:_=>{t[i]&&t[i](new js(a,m,p,_))},error:t[i+1],complete:t[i+2]},Ux(e._query)}return function(m,_,x,O){const V=new Tb(O),S=new fb(_,V,x);return m.asyncQueue.enqueueAndForget(async()=>cb(await Fd(m),S)),()=>{V.Nu(),m.asyncQueue.enqueueAndForget(async()=>hb(await Fd(m),S))}}(ch(a),l,r,s)}function dh(e,t){return function(i,r){const s=new si;return i.asyncQueue.enqueueAndForget(async()=>dx(await Rx(i),r,s)),s.promise}(ch(e),t)}function Mb(e,t,n){const i=n.docs.get(t._key),r=new Pp(e);return new er(e,r,t._key,i,new Cs(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx={maxAttempts:5};function eo(e,t){if((e=Kt(e)).firestore!==t)throw new z(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=Al(t)}get(t){const n=eo(t,this._firestore),i=new Bx(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return Y(24041);const s=r[0];if(s.isFoundDocument())return new Sc(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new Sc(this._firestore,i,n._key,null,n.converter);throw Y(18433,{doc:s})})}set(t,n,i){const r=eo(t,this._firestore),s=kp(r.converter,n,i),a=Rp(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(t,n,i,...r){const s=eo(t,this._firestore);let a;return a=typeof(n=Kt(n))=="string"||n instanceof Tl?Ib(this._dataReader,"Transaction.update",s._key,n,i,r):Rb(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(t){const n=eo(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx extends Kx{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=eo(t,this._firestore),i=new Pp(this._firestore);return super.get(t).then(r=>new er(this._firestore,i,n._key,r._document,new Cs(!1,!1),n.converter))}}function wv(e,t,n){e=rn(e,di);const i={...Qx,...n};return function(s){if(s.maxAttempts<1)throw new z(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,l){const u=new si;return s.asyncQueue.enqueueAndForget(async()=>{const h=await Ix(s);new bx(s.asyncQueue,h,l,a,u).ju()}),u.promise}(ch(e),r=>t(new Yx(e,r)),i)}function wf(){return new Ip("serverTimestamp")}(function(t,n=!0){(function(r){ya=r})(ga),ea(new Hr("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new di(new kI(i.getProvider("auth-internal")),new UI(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Wi(w_,R_,t),Wi(w_,R_,"esm2020")})();function kb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Xx=kb,Pb=new dl("auth","Firebase",kb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new $m("@firebase/auth");function $x(e,...t){wc.logLevel<=ot.WARN&&wc.warn(`Auth (${ga}): ${e}`,...t)}function Du(e,...t){wc.logLevel<=ot.ERROR&&wc.error(`Auth (${ga}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(e,...t){throw Lp(e,...t)}function Ln(e,...t){return Lp(e,...t)}function Lb(e,t,n){const i={...Xx(),[t]:n};return new dl("auth","Firebase",i).create(t,{appName:e.name})}function Un(e){return Lb(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lp(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return Pb.create(e,...t)}function Z(e,t,...n){if(!e)throw Lp(t,...n)}function ei(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Du(t),new Error(t)}function mi(e,t){e||ei(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function Zx(){return Rv()==="http:"||Rv()==="https:"}function Rv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zx()||c2()||"connection"in navigator)?navigator.onLine:!0}function Jx(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(t,n){this.shortDelay=t,this.longDelay=n,mi(n>t,"Short delay should be less than long delay!"),this.isMobile=o2()||h2()}get(){return Wx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(e,t){mi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nD=new Sl(3e4,6e4);function pr(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function gr(e,t,n,i,r={}){return jb(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=ml({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return u2()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&pa(e.emulatorConfig.host)&&(h.credentials="include"),Ub.fetch()(await zb(e,e.config.apiHost,n,l),h)})}async function jb(e,t,n){e._canInitEmulator=!1;const i={...tD,...t};try{const r=new rD(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw cu(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw cu(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw cu(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw cu(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Lb(e,d,h);bn(e,d)}}catch(r){if(r instanceof yi)throw r;bn(e,"network-request-failed",{message:String(r)})}}async function wl(e,t,n,i,r={}){const s=await gr(e,t,n,i,r);return"mfaPendingCredential"in s&&bn(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function zb(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?Up(e.config,r):`${e.config.apiScheme}://${r}`;return eD.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function iD(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ln(this.auth,"network-request-failed")),nD.get())})}}function cu(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ln(e,t,i);return r.customData._tokenResponse=n,r}function Iv(e){return e!==void 0&&e.enterprise!==void 0}class sD{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return iD(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function aD(e,t){return gr(e,"GET","/v2/recaptchaConfig",pr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(e,t){return gr(e,"POST","/v1/accounts:delete",t)}async function Rc(e,t){return gr(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function lD(e,t=!1){const n=Kt(e),i=await n.getIdToken(t),r=jp(i);Z(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:wo(Rf(r.auth_time)),issuedAtTime:wo(Rf(r.iat)),expirationTime:wo(Rf(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Rf(e){return Number(e)*1e3}function jp(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Du("JWT malformed, contained fewer than 3 sections"),null;try{const r=H0(n);return r?JSON.parse(r):(Du("Failed to decode base64 JWT payload"),null)}catch(r){return Du("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Cv(e){const t=jp(e);return Z(t,"internal-error"),Z(typeof t.exp<"u","internal-error"),Z(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof yi&&uD(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function uD({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wo(this.lastLoginAt),this.creationTime=wo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(e){var p;const t=e.auth,n=await e.getIdToken(),i=await Xo(e,Rc(t,{idToken:n}));Z(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(p=r.providerUserInfo)!=null&&p.length?Bb(r.providerUserInfo):[],a=fD(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Yd(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function hD(e){const t=Kt(e);await Ic(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function fD(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function Bb(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(e,t){const n=await jb(e,{},async()=>{const i=ml({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await zb(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&pa(e.emulatorConfig.host)&&(u.credentials="include"),Ub.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mD(e,t){return gr(e,"POST","/v2/accounts:revokeToken",pr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Z(t.idToken,"internal-error"),Z(typeof t.idToken<"u","internal-error"),Z(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Cv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Z(t.length!==0,"internal-error");const n=Cv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await dD(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Bs;return i&&(Z(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(Z(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(Z(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Bs,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(e,t){Z(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class En{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new cD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Yd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Xo(this,this.stsTokenManager.getToken(this.auth,t));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return lD(this,t)}reload(){return hD(this)}_assign(t){this!==t&&(Z(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new En({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Ic(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($e(this.auth.app))return Promise.reject(Un(this.auth));const t=await this.getIdToken();return await Xo(this,oD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:_,providerData:x,stsTokenManager:O}=n;Z(p&&O,t,"internal-error");const V=Bs.fromJSON(this.name,O);Z(typeof p=="string",t,"internal-error"),wi(i,t.name),wi(r,t.name),Z(typeof m=="boolean",t,"internal-error"),Z(typeof _=="boolean",t,"internal-error"),wi(s,t.name),wi(a,t.name),wi(l,t.name),wi(u,t.name),wi(h,t.name),wi(d,t.name);const S=new En({uid:p,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:V,createdAt:h,lastLoginAt:d});return x&&Array.isArray(x)&&(S.providerData=x.map(E=>({...E}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(t,n,i=!1){const r=new Bs;r.updateFromServerResponse(n);const s=new En({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Ic(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];Z(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?Bb(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new Bs;l.updateFromIdToken(i);const u=new En({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Yd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map;function ni(e){mi(e instanceof Function,"Expected a class definition");let t=Nv.get(e);return t?(mi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Nv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}qb.type="NONE";const xv=qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(e,t,n){return`firebase:${e}:${t}:${n}`}class qs{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Ou(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ou("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Rc(this.auth,{idToken:t}).catch(()=>{});return n?En._fromGetAccountInfoResponse(this.auth,n,t):null}return En._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new qs(ni(xv),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||ni(xv);const a=Ou(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let p;if(typeof d=="string"){const m=await Rc(t,{idToken:d}).catch(()=>{});if(!m)break;p=await En._fromGetAccountInfoResponse(t,m,d)}else p=En._fromJSON(t,d);h!==s&&(l=p),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new qs(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new qs(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Qb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Hb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Yb(t))return"Blackberry";if(Xb(t))return"Webos";if(Fb(t))return"Safari";if((t.includes("chrome/")||Gb(t))&&!t.includes("edge/"))return"Chrome";if(Kb(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Hb(e=De()){return/firefox\//i.test(e)}function Fb(e=De()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Gb(e=De()){return/crios\//i.test(e)}function Qb(e=De()){return/iemobile/i.test(e)}function Kb(e=De()){return/android/i.test(e)}function Yb(e=De()){return/blackberry/i.test(e)}function Xb(e=De()){return/webos/i.test(e)}function zp(e=De()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function pD(e=De()){var t;return zp(e)&&!!((t=window.navigator)!=null&&t.standalone)}function gD(){return f2()&&document.documentMode===10}function $b(e=De()){return zp(e)||Kb(e)||Xb(e)||Yb(e)||/windows phone/i.test(e)||Qb(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(e,t=[]){let n;switch(e){case"Browser":n=Dv(De());break;case"Worker":n=`${Dv(De())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ga}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(e,t={}){return gr(e,"GET","/v2/passwordPolicy",pr(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=6;class ED{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??vD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ov(this),this.idTokenSubscription=new Ov(this),this.beforeStateQueue=new yD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ni(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await qs.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Rc(this,{idToken:t}),i=await En._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if($e(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Ic(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Jx()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if($e(this.app))return Promise.reject(Un(this));const n=t?Kt(t):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Z(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return $e(this.app)?Promise.reject(Un(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return $e(this.app)?Promise.reject(Un(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await _D(this),n=new ED(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new dl("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await mD(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ni(t)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=await qs.create(this,[ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Zb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if($e(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&$x(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function _i(e){return Kt(e)}class Ov{constructor(t){this.auth=t,this.observer=null,this.addObserver=E2(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AD(e){mh=e}function Wb(e){return mh.loadJS(e)}function bD(){return mh.recaptchaEnterpriseScript}function SD(){return mh.gapiScript}function wD(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class RD{constructor(){this.enterprise=new ID}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class ID{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const CD="recaptcha-enterprise",Jb="NO_RECAPTCHA";class ND{constructor(t){this.type=CD,this.auth=_i(t)}async verify(t="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{aD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new sD(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(u=>{l(u)})})}function r(s,a,l){const u=window.grecaptcha;Iv(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:t}).then(h=>{a(h)}).catch(()=>{a(Jb)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RD().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(l=>{if(!n&&Iv(window.grecaptcha))r(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=bD();u.length!==0&&(u+=l),Wb(u).then(()=>{r(l,s,a)}).catch(h=>{a(h)})}}).catch(l=>{a(l)})})}}async function Vv(e,t,n,i=!1,r=!1){const s=new ND(e);let a;if(r)a=Jb;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const l={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Xd(e,t,n,i,r){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Vv(e,t,n,n==="getOobCode");return i(e,a)}else return i(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Vv(e,t,n,n==="getOobCode");return i(e,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(e,t){const n=Wm(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(qr(s,t??{}))return r;bn(r,"already-initialized")}return n.initialize({options:t})}function DD(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ni);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function OD(e,t,n){const i=_i(e);Z(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=tS(t),{host:a,port:l}=VD(t),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Z(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Z(qr(h,i.config.emulator)&&qr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,pa(a)?(K0(`${s}//${a}${u}`),Y0("Auth",!0)):MD()}function tS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function VD(e){const t=tS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Mv(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:Mv(a)}}}function Mv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function MD(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ei("not implemented")}_getIdTokenResponse(t){return ei("not implemented")}_linkToIdToken(t,n){return ei("not implemented")}_getReauthenticationResolver(t){return ei("not implemented")}}async function kD(e,t){return gr(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(e,t){return wl(e,"POST","/v1/accounts:signInWithPassword",pr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(e,t){return wl(e,"POST","/v1/accounts:signInWithEmailLink",pr(e,t))}async function UD(e,t){return wl(e,"POST","/v1/accounts:signInWithEmailLink",pr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends Bp{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new $o(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new $o(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xd(t,n,"signInWithPassword",PD);case"emailLink":return LD(t,{email:this._email,oobCode:this._password});default:bn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xd(t,i,"signUpPassword",kD);case"emailLink":return UD(t,{idToken:n,email:this._email,oobCode:this._password});default:bn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(e,t){return wl(e,"POST","/v1/accounts:signInWithIdp",pr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="http://localhost";class Qr extends Bp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Qr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new Qr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Hs(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Hs(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Hs(t,n)}buildRequest(){const t={requestUri:jD,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ml(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BD(e){const t=$a(Za(e)).link,n=t?$a(Za(t)).deep_link_id:null,i=$a(Za(e)).deep_link_id;return(i?$a(Za(i)).link:null)||i||n||t||e}class qp{constructor(t){const n=$a(Za(t)),i=n.apiKey??null,r=n.oobCode??null,s=zD(n.mode??null);Z(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=BD(t);try{return new qp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.providerId=Aa.PROVIDER_ID}static credential(t,n){return $o._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=qp.parseLink(n);return Z(i,"argument-error"),$o._fromEmailAndCode(t,i.code,i.tenantId)}}Aa.PROVIDER_ID="password";Aa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Aa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends eS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Rl{constructor(){super("facebook.com")}static credential(t){return Qr._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vi.credentialFromTaggedObject(t)}static credentialFromError(t){return Vi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vi.credential(t.oauthAccessToken)}catch{return null}}}Vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Rl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Qr._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Mi.credentialFromTaggedObject(t)}static credentialFromError(t){return Mi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Mi.credential(n,i)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Rl{constructor(){super("github.com")}static credential(t){return Qr._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ki.credentialFromTaggedObject(t)}static credentialFromError(t){return ki.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ki.credential(t.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Rl{constructor(){super("twitter.com")}static credential(t,n){return Qr._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Pi.credentialFromTaggedObject(t)}static credentialFromError(t){return Pi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Pi.credential(n,i)}catch{return null}}}Pi.TWITTER_SIGN_IN_METHOD="twitter.com";Pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(e,t){return wl(e,"POST","/v1/accounts:signUp",pr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await En._fromIdTokenResponse(t,i,r),a=kv(i);return new pi({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=kv(i);return new pi({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function kv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(e){var r;if($e(e.app))return Promise.reject(Un(e));const t=_i(e);if(await t._initializationPromise,(r=t.currentUser)!=null&&r.isAnonymous)return new pi({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await nS(t,{returnSecureToken:!0}),i=await pi._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends yi{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Cc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new Cc(t,n,i,r)}}function iS(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Cc._fromErrorAndOperation(e,s,t,i):s})}async function HD(e,t,n=!1){const i=await Xo(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return pi._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(e,t,n=!1){const{auth:i}=e;if($e(i.app))return Promise.reject(Un(i));const r="reauthenticate";try{const s=await Xo(e,iS(i,r,t,e),n);Z(s.idToken,i,"internal-error");const a=jp(s.idToken);Z(a,i,"internal-error");const{sub:l}=a;return Z(e.uid===l,i,"user-mismatch"),pi._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&bn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(e,t,n=!1){if($e(e.app))return Promise.reject(Un(e));const i="signIn",r=await iS(e,i,t),s=await pi._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function GD(e,t){return rS(_i(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(e){const t=_i(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function QD(e,t,n){if($e(e.app))return Promise.reject(Un(e));const i=_i(e),a=await Xd(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nS).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&sS(e),u}),l=await pi._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function KD(e,t,n){return $e(e.app)?Promise.reject(Un(e)):GD(Kt(e),Aa.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&sS(e),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(e,t){return Kt(e).setPersistence(t)}function XD(e,t,n,i){return Kt(e).onIdTokenChanged(t,n,i)}function $D(e,t,n){return Kt(e).beforeAuthStateChanged(t,n)}function ZD(e,t,n,i){return Kt(e).onAuthStateChanged(t,n,i)}function WD(e){return Kt(e).signOut()}const Nc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nc,"1"),this.storage.removeItem(Nc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=1e3,tO=10;class oS extends aS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$b(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);gD()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,tO):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},JD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}oS.type="LOCAL";const lS=oS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS extends aS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}uS.type="SESSION";const cS=uS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new ph(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await eO(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=Hp("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return window}function iO(e){jn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(){return typeof jn().WorkerGlobalScope<"u"&&typeof jn().importScripts=="function"}async function rO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sO(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function aO(){return hS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="firebaseLocalStorageDb",oO=1,xc="firebaseLocalStorage",dS="fbase_key";class Il{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gh(e,t){return e.transaction([xc],t?"readwrite":"readonly").objectStore(xc)}function lO(){const e=indexedDB.deleteDatabase(fS);return new Il(e).toPromise()}function $d(){const e=indexedDB.open(fS,oO);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(xc,{keyPath:dS})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(xc)?t(i):(i.close(),await lO(),t(await $d()))})})}async function Pv(e,t,n){const i=gh(e,!0).put({[dS]:t,value:n});return new Il(i).toPromise()}async function uO(e,t){const n=gh(e,!1).get(t),i=await new Il(n).toPromise();return i===void 0?null:i.value}function Lv(e,t){const n=gh(e,!0).delete(t);return new Il(n).toPromise()}const cO=800,hO=3;class mS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $d(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>hO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ph._getInstance(aO()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await rO(),!this.activeServiceWorker)return;this.sender=new nO(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||sO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await $d();return await Pv(t,Nc,"1"),await Lv(t,Nc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Pv(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>uO(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Lv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=gh(r,!1).getAll();return new Il(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mS.type="LOCAL";const fO=mS;new Sl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(e,t){return t?ni(t):(Z(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends Bp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Hs(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Hs(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Hs(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function mO(e){return rS(e.auth,new Fp(e),e.bypassAuthState)}function pO(e){const{auth:t,user:n}=e;return Z(n,t,"internal-error"),FD(n,new Fp(e),e.bypassAuthState)}async function gO(e){const{auth:t,user:n}=e;return Z(n,t,"internal-error"),HD(n,new Fp(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return mO;case"linkViaPopup":case"linkViaRedirect":return gO;case"reauthViaPopup":case"reauthViaRedirect":return pO;default:bn(this.auth,"internal-error")}}resolve(t){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=new Sl(2e3,1e4);class Ns extends pS{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ns.currentPopupAction&&Ns.currentPopupAction.cancel(),Ns.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Z(t,this.auth,"internal-error"),t}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const t=Hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ns.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,yO.get())};t()}}Ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O="pendingRedirect",Vu=new Map;class vO extends pS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Vu.get(this.auth._key());if(!t){try{const i=await EO(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Vu.set(this.auth._key(),t)}return this.bypassAuthState||Vu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EO(e,t){const n=bO(t),i=AO(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function TO(e,t){Vu.set(e._key(),t)}function AO(e){return ni(e._redirectPersistence)}function bO(e){return Ou(_O,e.config.apiKey,e.name)}async function SO(e,t){return await _i(e)._initializationPromise,gS(e,t,!1)}async function gS(e,t,n=!1){if($e(e.app))return Promise.reject(Un(e));const i=_i(e),r=dO(i,t),a=await new vO(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=10*60*1e3;class RO{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!IO(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!yS(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ln(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=wO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uv(t))}saveEventToCache(t){this.cachedEventUids.add(Uv(t)),this.lastProcessedEventTime=Date.now()}}function Uv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function yS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function IO(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CO(e,t={}){return gr(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xO=/^https?/;async function DO(e){if(e.config.emulator)return;const{authorizedDomains:t}=await CO(e);for(const n of t)try{if(OO(n))return}catch{}bn(e,"unauthorized-domain")}function OO(e){const t=Kd(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!xO.test(n))return!1;if(NO.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=new Sl(3e4,6e4);function jv(){const e=jn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function MO(e){return new Promise((t,n)=>{var r,s,a;function i(){jv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{jv(),n(Ln(e,"network-request-failed"))},timeout:VO.get()})}if((s=(r=jn().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=jn().gapi)!=null&&a.load)i();else{const l=wD("iframefcb");return jn()[l]=()=>{gapi.load?i():n(Ln(e,"network-request-failed"))},Wb(`${SD()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Mu=null,t})}let Mu=null;function kO(e){return Mu=Mu||MO(e),Mu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=new Sl(5e3,15e3),LO="__/auth/iframe",UO="emulator/auth/iframe",jO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BO(e){const t=e.config;Z(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Up(t,UO):`https://${e.config.authDomain}/${LO}`,i={apiKey:t.apiKey,appName:e.name,v:ga},r=zO.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${ml(i).slice(1)}`}async function qO(e){const t=await kO(e),n=jn().gapi;return Z(n,e,"internal-error"),t.open({where:document.body,url:BO(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jO,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Ln(e,"network-request-failed"),l=jn().setTimeout(()=>{s(a)},PO.get());function u(){jn().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FO=500,GO=600,QO="_blank",KO="http://localhost";class zv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YO(e,t,n,i=FO,r=GO){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...HO,width:i.toString(),height:r.toString(),top:s,left:a},h=De().toLowerCase();n&&(l=Gb(h)?QO:n),Hb(h)&&(t=t||KO,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,x])=>`${m}${_}=${x},`,"");if(pD(h)&&l!=="_self")return XO(t||"",l),new zv(null);const p=window.open(t||"",l,d);Z(p,e,"popup-blocked");try{p.focus()}catch{}return new zv(p)}function XO(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O="__/auth/handler",ZO="emulator/auth/handler",WO=encodeURIComponent("fac");async function Bv(e,t,n,i,r,s){Z(e.config.authDomain,e,"auth-domain-config-required"),Z(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:ga,eventId:r};if(t instanceof eS){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",v2(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(t instanceof Rl){const d=t.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${WO}=${encodeURIComponent(u)}`:"";return`${JO(e)}?${ml(l).slice(1)}${h}`}function JO({config:e}){return e.emulator?Up(e,ZO):`https://${e.authDomain}/${$O}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="webStorageSupport";class t4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cS,this._completeRedirectFn=gS,this._overrideRedirectResult=TO}async _openPopup(t,n,i,r){var a;mi((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await Bv(t,n,i,Kd(),r);return YO(t,s,Hp())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await Bv(t,n,i,Kd(),r);return iO(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(mi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await qO(t),i=new RO(t);return n.register("authEvent",r=>(Z(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(If,{type:If},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[If];s!==void 0&&n(!!s),bn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DO(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return $b()||Fb()||zp()}}const e4=t4;var qv="@firebase/auth",Hv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function r4(e){ea(new Hr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;Z(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zb(e)},h=new TD(i,r,s,u);return DD(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),ea(new Hr("auth-internal",t=>{const n=_i(t.getProvider("auth").getImmediate());return(i=>new n4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wi(qv,Hv,i4(e)),Wi(qv,Hv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=5*60,a4=Q0("authIdTokenMaxAge")||s4;let Fv=null;const o4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>a4)return;const r=n==null?void 0:n.token;Fv!==r&&(Fv=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function l4(e=W0()){const t=Wm(e,"auth");if(t.isInitialized())return t.getImmediate();const n=xD(e,{popupRedirectResolver:e4,persistence:[fO,lS,cS]}),i=Q0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=o4(s.toString());$D(n,a,()=>a(n.currentUser)),XD(n,l=>a(l))}}const r=F0("auth");return r&&OD(n,`http://${r}`),n}function u4(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}AD({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=Ln("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",u4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});r4("Browser");const c4=({user:e,subscription:t,onGetSubscriptionClick:n,auth:i})=>{const[r,s]=H.useState(""),[a,l]=H.useState(""),[u,h]=H.useState(!0),[d,p]=H.useState(""),m=async()=>{if(p(""),!r||!a){p("Пожалуйста, заполните все поля.");return}try{u?await KD(i,r,a):await QD(i,r,a)}catch(O){switch(console.error("Ошибка аутентификации:",O),O.code){case"auth/invalid-email":p("Некорректный формат email.");break;case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":p("Неверный email или пароль.");break;case"auth/email-already-in-use":p("Этот email уже зарегистрирован.");break;case"auth/weak-password":p("Пароль слишком слабый (должен быть не менее 6 символов).");break;default:p("Произошла ошибка. Попробуйте снова.")}}},_=()=>{WD(i).catch(O=>console.error("Ошибка выхода:",O))},x=t&&new Date(t.expires_at)>new Date;return v.jsxs("div",{className:"p-4 space-y-4",children:[e&&!e.isAnonymous?v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[v.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[v.jsx("img",{src:e.photoURL||"https://placehold.co/64x64/F5F1ED/2C3A47?text=👤",alt:"Avatar",className:"w-16 h-16 rounded-full"}),v.jsx("div",{children:v.jsx("h3",{className:"font-bold",children:e.email})})]}),v.jsx("button",{onClick:_,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold",children:"Выйти"})]}):v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[v.jsx("h3",{className:"font-bold mb-2",children:u?"Войдите в аккаунт":"Создайте аккаунт"}),v.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Чтобы синхронизировать ваши закладки, подписку и прогресс чтения."}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("input",{type:"email",value:r,onChange:O=>s(O.target.value),placeholder:"Email",className:"w-full bg-background border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent"}),v.jsx("input",{type:"password",value:a,onChange:O=>l(O.target.value),placeholder:"Пароль",className:"w-full bg-background border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent"}),v.jsx("button",{onClick:m,className:"w-full py-2 rounded-lg bg-accent text-white font-bold",children:u?"Войти":"Зарегистрироваться"})]}),v.jsx("button",{onClick:()=>h(!u),className:"w-full text-center text-xs mt-4 text-accent hover:underline",children:u?"У меня еще нет аккаунта":"У меня уже есть аккаунт"}),d&&v.jsx("p",{className:"text-red-500 text-xs mt-2 text-center",children:d})]}),v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[v.jsx("h3",{className:"font-bold mb-2",children:"Подписка"}),x?v.jsxs("div",{children:[v.jsx("p",{className:"text-green-500",children:"Активна"}),v.jsxs("p",{className:"text-sm opacity-70",children:["Заканчивается: ",new Date(t.expires_at).toLocaleDateString()]})]}):v.jsxs("div",{children:[v.jsx("p",{className:"text-red-500",children:"Неактивна"}),v.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Оформите подписку, чтобы получить доступ ко всем платным главам."}),v.jsx("button",{onClick:n,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:"Оформить подписку"})]})]})]})},h4={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},_S=Z0(h4),ie=xx(_S),no=l4(_S);YD(no,lS);const vS=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:v.jsx("path",{d:"m9 18 6-6-6-6"})}),ES=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M19 12H5"}),v.jsx("polyline",{points:"12 19 5 12 12 5"})]}),TS=({className:e="",filled:t=!1})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("circle",{cx:"11",cy:"11",r:"8"}),v.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),f4=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[v.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),v.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),d4=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),Gp=({className:e="",filled:t=!1})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),AS=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),v.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),bS=({className:e="",filled:t=!1})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),m4=({className:e="",filled:t=!1})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),v.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),p4=({className:e="",filled:t=!1})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M4 22h16"}),v.jsx("path",{d:"M7 22V2h10v20"}),v.jsx("path",{d:"M7 12h4"})]}),g4=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m15 18-6-6 6-6"})}),y4=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m9 18 6-6-6-6"})}),_4=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),v.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),v4=()=>v.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main",children:[v.jsx(Gp,{className:"animate-pulse-heart text-accent",filled:!0}),v.jsx("p",{className:"mt-4 text-lg opacity-70",children:"Загрузка..."})]}),Qp=({onClose:e,onSelectPlan:t})=>{const n=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[v.jsx(d4,{className:"mx-auto mb-4 text-accent"}),v.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),v.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),v.jsx("div",{className:"space-y-3",children:n.map(i=>v.jsxs("button",{onClick:()=>t(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[v.jsx("p",{className:"font-bold",children:i.name}),v.jsxs("p",{className:"text-sm",children:[i.price," ₽"]})]},i.duration))}),v.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},Kp=({onClose:e,onSelectMethod:t,plan:n})=>v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[v.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),v.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("button",{onClick:()=>t("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[v.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),v.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),v.jsxs("button",{onClick:()=>t("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[v.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),v.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]})]}),v.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Назад"})]})}),Kr=({title:e,onBack:t})=>v.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[t&&v.jsx("button",{onClick:t,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:v.jsx(ES,{})}),v.jsx("h1",{className:"text-xl font-bold",children:e})]}),Yp=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>v.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:e.length>0?e.map((r,s)=>v.jsx("div",{onClick:()=>t(r),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${s*50}ms`},children:v.jsxs("div",{className:"relative transition-all duration-300",children:[v.jsx("button",{onClick:a=>{a.stopPropagation(),i(r.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(r.id)?"text-accent":""}`,children:v.jsx(bS,{filled:n.includes(r.id),width:"20",height:"20"})}),v.jsx("img",{src:`/tene/${r.coverUrl}`,alt:r.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),v.jsx("h2",{className:"mt-2 font-semibold text-xs truncate",children:r.title})]})},r.id)):v.jsx("p",{className:"col-span-3 text-center opacity-70",children:"Ничего не найдено."})}),E4=({novel:e,onSelectChapter:t,onGenreSelect:n,subscription:i,botUsername:r,userId:s,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:h})=>{const[d,p]=H.useState(!1),[m,_]=H.useState(null),[x,O]=H.useState("newest"),[V,S]=H.useState(!1),E=H.useRef(null),[R,D]=H.useState(!1),U=i&&new Date(i.expires_at)>new Date,B=H.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);H.useEffect(()=>{E.current&&setTimeout(()=>{E.current&&D(E.current.scrollHeight>E.current.clientHeight)},100)},[e.description]);const T=H.useMemo(()=>{const I=[...a];return x==="newest"?I.reverse():a},[a,x]),y=I=>{!U&&I.isPaid?p(!0):t(I)},A=()=>{if(B){const I=a.find(b=>b.id===B);I&&t(I)}},w=I=>_(I),C=async I=>{var _t;const b=(_t=window.Telegram)==null?void 0:_t.WebApp;if(!b||!s||!m){console.error("Telegram Web App, userId, or selectedPlan is not available."),b&&b.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}b.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не реагирует после того, как вы выбрали тариф, не волнуйтесь! Попробуйте отправить команду /start еще раз.",async me=>{if(!me)return;const q=Ie(ie,"users",s);try{await zs(q,{pendingSubscription:{...m,method:I,date:new Date().toISOString()}},{merge:!0}),b.openTelegramLink(`https://t.me/${r}?start=${s}`),b.close()}catch(X){console.error("Ошибка записи в Firebase:",X),b.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};return v.jsxs("div",{className:"text-text-main",children:[v.jsx(Kr,{title:e.title,onBack:h}),v.jsxs("div",{className:"relative h-64",children:[v.jsx("img",{src:`/tene/${e.coverUrl}`,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),v.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[v.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:e.title}),v.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:e.author})]})]}),v.jsxs("div",{className:"p-4",children:[v.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(I=>v.jsx("button",{onClick:()=>n(I),className:"text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 bg-component-bg text-text-main border border-border-color hover:bg-border-color",children:I},I))}),v.jsx("div",{ref:E,className:`relative overflow-hidden transition-all duration-500 ${V?"max-h-full":"max-h-24"}`,children:v.jsx("p",{className:"text-sm mb-2 opacity-80 font-body",children:e.description})}),R&&v.jsx("div",{className:"text-right",children:v.jsx("button",{onClick:()=>S(!V),className:"text-sm font-semibold text-accent mb-4",children:V?"Скрыть":"Читать полностью..."})}),B&&v.jsxs("button",{onClick:A,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",B,")"]}),v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),v.jsx("button",{onClick:()=>O(I=>I==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:x==="newest"?"Сначала новые":"Сначала старые"})]}),U&&v.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",new Date(i.expires_at).toLocaleDateString()]}),l?v.jsx("p",{children:"Загрузка глав..."}):v.jsx("div",{className:"flex flex-col gap-3",children:T.map(I=>{const b=!U&&I.isPaid,_t=B===I.id;return v.jsxs("div",{onClick:()=>y(I),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${b?"opacity-70":""}`,children:[v.jsxs("div",{className:"flex items-center gap-3",children:[_t&&v.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),v.jsx("p",{className:"font-semibold",children:I.title})]}),b?v.jsx(f4,{}):v.jsx(vS,{})]},I.id)})}),d&&v.jsx(Qp,{onClose:()=>p(!1),onSelectPlan:w}),m&&v.jsx(Kp,{onClose:()=>_(null),onSelectMethod:C,plan:m})]})]})},T4=e=>{const t={},n=[];return e.forEach(i=>{t[i.id]={...i,replies:[]}}),e.forEach(i=>{i.replyTo&&t[i.replyTo]?t[i.replyTo].replies.push(t[i.id]):n.push(t[i.id])}),n},SS=mw.memo(({comment:e,onReply:t,onLike:n,onEdit:i,onDelete:r,onUpdate:s,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:d,replyingTo:p,replyText:m,setReplyText:_,onCommentSubmit:x})=>{const O=V=>V!=null&&V.toDate?V.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return v.jsxs("div",{className:"flex flex-col",children:[v.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[v.jsxs("div",{className:"flex justify-between items-center text-xs opacity-70 mb-1",children:[v.jsx("p",{className:"font-bold text-sm text-text-main opacity-100",children:e.userName}),v.jsx("span",{children:O(e.timestamp)})]}),u===e.id?v.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[v.jsx("input",{type:"text",value:h,autoFocus:!0,onChange:V=>d(V.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),v.jsx("button",{onClick:()=>s(e.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),v.jsx("button",{onClick:()=>i(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):v.jsx("p",{className:"text-sm mt-1 opacity-90",children:e.text}),v.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[v.jsxs("button",{onClick:()=>n(e.id),className:"flex items-center gap-1 text-xs text-gray-500",children:[v.jsx(Gp,{filled:e.userHasLiked,className:`w-4 h-4 ${e.userHasLiked?"text-accent":""}`}),v.jsx("span",{children:e.likeCount||0})]}),v.jsx("button",{onClick:()=>t(e.id),className:"text-xs text-gray-500",children:"Ответить"}),(l===e.userId||a)&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>i(e),className:"text-xs text-gray-500",children:"Редактировать"}),v.jsx("button",{onClick:()=>r(e.id),className:"text-xs text-red-500",children:"Удалить"})]})]})]}),p===e.id&&v.jsxs("form",{onSubmit:V=>x(V,e.id),className:"flex items-center gap-2 mt-2",children:[v.jsx("input",{type:"text",value:m,autoFocus:!0,onChange:V=>_(V.target.value),placeholder:`Ответ для ${e.userName}...`,className:"w-full bg-background border border-border-color rounded-lg py-1 px-3 text-sm"}),v.jsx("button",{type:"submit",className:"p-1.5 rounded-full bg-accent text-white",children:v.jsx(AS,{className:"w-4 h-4"})})]}),e.replies&&e.replies.length>0&&v.jsx("div",{className:"mt-2 space-y-2 border-l-2 border-border-color pl-2",children:e.replies.map(V=>v.jsx(SS,{comment:V,onReply:t,onLike:n,onEdit:i,onDelete:r,onUpdate:s,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:d,replyingTo:p,replyText:m,setReplyText:_,onCommentSubmit:x},V.id))})]})}),A4=({chapter:e,novel:t,fontSize:n,onFontSizeChange:i,userId:r,userName:s,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,botUsername:d,onBack:p,isUserAdmin:m})=>{const[_,x]=H.useState([]),[O,V]=H.useState(""),[S,E]=H.useState(null),[R,D]=H.useState(""),[U,B]=H.useState(null),[T,y]=H.useState(""),[A,w]=H.useState(0),[C,I]=H.useState(!1),[b,_t]=H.useState(!1),[me,q]=H.useState(!1),[X,K]=H.useState(!1),[pt,xt]=H.useState(null),[gn,zt]=H.useState(""),[ct,Zt]=H.useState(!0),be=h&&new Date(h.expires_at)>new Date,Oe=H.useMemo(()=>Ie(ie,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);H.useEffect(()=>{const G=xu(Oe,bt=>{var rt;w(((rt=bt.data())==null?void 0:rt.likeCount)||0)}),tt=jx(_v(ie,`chapters_metadata/${t.id}_${e.id}/comments`),zx("timestamp","asc")),At=xu(tt,async bt=>{const rt=bt.docs.map(St=>({id:St.id,...St.data()}));if(r){const St=rt.map(async Sa=>{const Cl=Ie(ie,`chapters_metadata/${t.id}_${e.id}/comments/${Sa.id}/likes`,r),yh=await Qd(Cl);return{...Sa,userHasLiked:yh.exists()}}),Fe=await Promise.all(St);x(Fe)}else x(rt)});let Tt=()=>{};if(r){const bt=Ie(ie,`chapters_metadata/${t.id}_${e.id}/likes`,r);Tt=xu(bt,rt=>{I(rt.exists())})}return()=>{G(),At(),Tt()}},[Oe,t.id,e.id,r]),H.useEffect(()=>{(async()=>{if(Zt(!0),zt(""),e.isPaid&&!be){Zt(!1),zt(`### 🔒 Для доступа к этой главе необходима подписка.

Пожалуйста, оформите подписку в разделе "Профиль", чтобы продолжить чтение.`);return}try{const tt=Ie(ie,"chapter_content",`${t.id}-${e.id}`),At=await Qd(tt);At.exists()?zt(At.data().content):zt(`## Ошибка

Не удалось загрузить текст главы. Пожалуйста, попробуйте позже.`)}catch(tt){console.error("Ошибка загрузки главы:",tt),zt(`## Ошибка

Произошла ошибка при загрузке. Проверьте ваше интернет-соединение.`)}finally{Zt(!1)}})()},[t.id,e.id,be]);const wn=H.useCallback(async(G,tt=null)=>{G.preventDefault();const At=tt?T:O;if(!(!At.trim()||!r))try{await zs(Oe,{},{merge:!0});const Tt=_v(ie,`chapters_metadata/${t.id}_${e.id}/comments`),bt={userId:r,userName:s||"Аноним",text:At,timestamp:wf(),likeCount:0};tt&&(bt.replyTo=tt),await Gx(Tt,bt),tt?(B(null),y("")):V("")}catch(Tt){console.error("Ошибка добавления комментария:",Tt)}},[r,s,O,T,Oe,t.id,e.id]),yr=H.useCallback(async G=>{if(!r)return;const tt=Ie(ie,`chapters_metadata/${t.id}_${e.id}/comments`,G),At=Ie(ie,`chapters_metadata/${t.id}_${e.id}/comments/${G}/likes`,r);x(Tt=>Tt.map(bt=>{if(bt.id===G){const rt=bt.userHasLiked?(bt.likeCount||1)-1:(bt.likeCount||0)+1;return{...bt,userHasLiked:!bt.userHasLiked,likeCount:rt}}return bt}));try{await wv(ie,async Tt=>{const bt=await Tt.get(At),rt=await Tt.get(tt);if(!rt.exists())return;const St=rt.data().likeCount||0;bt.exists()?(Tt.delete(At),Tt.update(tt,{likeCount:Math.max(0,St-1)})):(Tt.set(At,{timestamp:wf()}),Tt.update(tt,{likeCount:St+1}))})}catch(Tt){console.error("Ошибка при обновлении лайка комментария:",Tt)}},[r,t.id,e.id]),ba=H.useCallback(G=>{G?(E(G.id),D(G.text)):(E(null),D(""))},[]),vi=H.useCallback(async G=>{if(!R.trim())return;const tt=Ie(ie,`chapters_metadata/${t.id}_${e.id}/comments`,G);await Hx(tt,{text:R}),E(null),D("")},[R,t.id,e.id]),Rn=H.useCallback(async G=>{const tt=Ie(ie,`chapters_metadata/${t.id}_${e.id}/comments`,G);await Fx(tt)},[t.id,e.id]),_r=H.useCallback(G=>{B(tt=>tt===G?null:G),y("")},[]),vr=async()=>{if(!r)return;const G=Ie(ie,`chapters_metadata/${t.id}_${e.id}/likes`,r);try{await wv(ie,async tt=>{var rt;const At=await tt.get(G),bt=((rt=(await tt.get(Oe)).data())==null?void 0:rt.likeCount)||0;At.exists()?(tt.delete(G),tt.set(Oe,{likeCount:Math.max(0,bt-1)},{merge:!0})):(tt.set(G,{timestamp:wf()}),tt.set(Oe,{likeCount:bt+1},{merge:!0}))})}catch(tt){console.error("Ошибка при обновлении лайка:",tt)}},Hn=G=>{G&&(!be&&G.isPaid?(_t(!1),K(!0)):(l(G),_t(!1)))},Er=G=>{xt(G),K(!1)},es=async G=>{var At;const tt=(At=window.Telegram)==null?void 0:At.WebApp;tt&&r&&pt&&tt.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async Tt=>{if(Tt){const bt=Ie(ie,"users",r);try{await zs(bt,{pendingSubscription:{...pt,method:G,date:new Date().toISOString()}},{merge:!0}),tt.openTelegramLink(`https://t.me/${d}?start=${r}`),tt.close()}catch(rt){console.error("Ошибка записи в Firebase:",rt),tt.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})},et=u.findIndex(G=>G.id===e.id),ht=u[et-1],gt=u[et+1],yn=G=>window.marked?`<div class="prose">${window.marked.parse(G)}</div>`:G;return v.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[v.jsx(Kr,{title:t.title,onBack:p}),v.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[v.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:e.title}),v.jsx("div",{className:`whitespace-normal leading-relaxed ${a}`,style:{fontSize:`${n}px`},dangerouslySetInnerHTML:{__html:ct?"<p>Загрузка...</p>":yn(gn)}}),v.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"╚══ ≪ °❈° ≫ ══╝"}),v.jsxs("div",{className:"border-t border-border-color pt-8",children:[v.jsx("div",{className:"flex items-center gap-4 mb-8",children:v.jsxs("button",{onClick:vr,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[v.jsx(Gp,{filled:C,className:C?"text-accent":""}),v.jsx("span",{className:"font-bold text-lg",children:A})]})}),v.jsx("h3",{className:"text-xl font-bold mb-4",children:"Комментарии"}),v.jsx("div",{className:"space-y-4 mb-6",children:_.length>0?T4(_).map(G=>v.jsx(SS,{comment:G,onReply:_r,onLike:yr,onEdit:ba,onDelete:Rn,onUpdate:vi,isUserAdmin:m,currentUserId:r,editingCommentId:S,editingText:R,setEditingText:D,replyingTo:U,replyText:T,setReplyText:y,onCommentSubmit:wn},G.id)):v.jsx("p",{className:"opacity-70 text-sm",children:"Комментариев пока нет. Будьте первым!"})}),v.jsxs("form",{onSubmit:G=>wn(G,null),className:"flex items-center gap-2",children:[v.jsx("input",{type:"text",value:O,onChange:G=>V(G.target.value),placeholder:"Написать комментарий...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),v.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:v.jsx(AS,{className:"w-5 h-5"})})]})]})]}),v.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[v.jsx("button",{onClick:()=>Hn(ht),disabled:!ht,className:"p-2 disabled:opacity-50",children:v.jsx(ES,{})}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>_t(!0),className:"px-4 py-2 rounded-lg bg-background",children:"Оглавление"}),v.jsx("button",{onClick:()=>q(!0),className:"p-2 rounded-lg bg-background",children:v.jsx(_4,{})})]}),v.jsx("button",{onClick:()=>Hn(gt),disabled:!gt,className:"p-2 disabled:opacity-50",children:v.jsx(vS,{className:"opacity-100"})})]}),b&&v.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>_t(!1),children:v.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:G=>G.stopPropagation(),children:[v.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:"Главы"}),v.jsx("div",{className:"overflow-y-auto",children:v.jsx("div",{className:"flex flex-col gap-2",children:u.map(G=>v.jsx("button",{onClick:()=>Hn(G),className:`p-2 text-left rounded-md ${G.id===e.id?"bg-accent text-white":"bg-background"}`,children:G.title},G.id))})})]})}),me&&v.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>q(!1),children:v.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:G=>G.stopPropagation(),children:[v.jsx("h3",{className:"font-bold text-lg mb-4",children:"Настройки чтения"}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{children:"Размер текста"}),v.jsxs("div",{className:"w-28 h-12 rounded-full bg-background flex items-center justify-around border border-border-color",children:[v.jsx("button",{onClick:()=>i(-1),className:"text-2xl font-bold",children:"-"}),v.jsx("button",{onClick:()=>i(1),className:"text-2xl font-bold",children:"+"})]})]})]})}),X&&v.jsx(Qp,{onClose:()=>K(!1),onSelectPlan:Er}),pt&&v.jsx(Kp,{onClose:()=>xt(null),onSelectMethod:es,plan:pt})]})},b4=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>{const[r,s]=H.useState(""),a=H.useMemo(()=>r?e.filter(l=>l.title.toLowerCase().includes(r.toLowerCase())):[],[e,r]);return v.jsxs("div",{children:[v.jsx(Kr,{title:"Поиск"}),v.jsxs("div",{className:"p-4",children:[v.jsxs("div",{className:"relative mb-6",children:[v.jsx("div",{className:"absolute left-3 top-1-2 -translate-y-1/2",children:v.jsx(TS,{className:"text-text-main opacity-50"})}),v.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:r,onChange:l=>s(l.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent transition-shadow duration-300"})]}),v.jsx(Yp,{novels:a,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]})]})},S4=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>v.jsxs("div",{children:[v.jsx(Kr,{title:"Закладки"}),v.jsx(Yp,{novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]}),w4=({user:e,subscription:t,onGetSubscriptionClick:n,userId:i,auth:r})=>{const s=()=>{i&&navigator.clipboard.writeText(i).then(()=>console.log("Firebase UID скопирован в буфер обмена")).catch(a=>console.error("Не удалось скопировать UID: ",a))};return v.jsxs("div",{children:[v.jsx(Kr,{title:"Профиль"}),v.jsx(c4,{user:e,subscription:t,onGetSubscriptionClick:n,auth:r}),v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4",children:[v.jsx("h3",{className:"font-bold mb-2",children:"Ваш ID для администрирования"}),v.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Этот ID нужен для назначения прав администратора через Telegram-бота."}),v.jsx("div",{className:"bg-background p-2 rounded-md text-xs break-all mb-3",children:v.jsx("code",{children:i||"Загрузка..."})}),v.jsx("button",{onClick:s,disabled:!i,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold transition-all hover:scale-105 disabled:opacity-50",children:"Копировать ID"})]})]})},R4=({activeTab:e,setActiveTab:t})=>{const n=[{id:"library",label:"Библиотека",icon:p4},{id:"search",label:"Поиск",icon:TS},{id:"bookmarks",label:"Закладки",icon:bS},{id:"profile",label:"Профиль",icon:m4}];return v.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:v.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>v.jsxs("button",{onClick:()=>t(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===i.id?"text-accent":"text-text-main opacity-60"}`,children:[v.jsx(i.icon,{filled:e===i.id}),v.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},I4=({onReadMore:e})=>{const[t,n]=H.useState([]),[i,r]=H.useState(0);H.useEffect(()=>{fetch("/tene/data/news.json").then(u=>u.json()).then(n).catch(u=>console.error("Failed to fetch news",u))},[]);const s=()=>r(u=>(u+1)%t.length),a=()=>r(u=>(u-1+t.length)%t.length);if(t.length===0)return null;const l=t[i];return v.jsx("div",{className:"p-4",children:v.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[v.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"font-bold text-text-main",children:l.title}),v.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),v.jsx("button",{onClick:()=>e(l),className:"text-sm font-bold text-accent mt-1",children:"Читать далее"})]}),v.jsxs("div",{className:"flex flex-col",children:[v.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:v.jsx(g4,{className:"w-5 h-5"})}),v.jsx("button",{onClick:s,className:"p-1 rounded-full hover:bg-background",children:v.jsx(y4,{className:"w-5 h-5"})})]})]})})},C4=({newsItem:e,onClose:t})=>v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:v.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main",onClick:n=>n.stopPropagation(),children:[v.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title}),v.jsx("p",{className:"whitespace-pre-wrap opacity-80",children:e.fullText}),v.jsx("button",{onClick:t,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})});function N4(){const[e,t]=H.useState(16),[n,i]=H.useState("font-sans"),[r,s]=H.useState("list"),[a,l]=H.useState("library"),[u,h]=H.useState([]),[d,p]=H.useState(null),[m,_]=H.useState(null),[x,O]=H.useState(null),[V,S]=H.useState(null),[E,R]=H.useState(null),[D,U]=H.useState(!0),[B,T]=H.useState(!1),[y,A]=H.useState([]),[w,C]=H.useState(!0),[I,b]=H.useState(null),[_t,me]=H.useState([]),[q,X]=H.useState(!1),[K,pt]=H.useState(null),[xt,gn]=H.useState(null),zt="tenebrisverbot",ct=E==null?void 0:E.uid,Zt=H.useCallback(async et=>{if(ct){const ht=Ie(ie,"users",ct);try{await zs(ht,et,{merge:!0})}catch(gt){console.error("Не удалось обновить данные пользователя:",gt)}}},[ct]),be=H.useCallback(et=>{t(ht=>{const gt=Math.max(12,Math.min(32,ht+et));return Zt({settings:{fontSize:gt,fontClass:n}}),gt})},[n,Zt]);H.useEffect(()=>{U(!0),fetch("/tene/data/novels.json").then(gt=>gt.json()).then(gt=>h(gt.novels)).catch(gt=>console.error("Ошибка загрузки новелл:",gt));let et=()=>{};const ht=ZD(no,async gt=>{var yn,G,tt,At;if(et(),gt){R(gt);const Tt=await gt.getIdTokenResult();T(!!Tt.claims.admin);const bt=Ie(ie,"users",gt.uid);et=xu(bt,St=>{if(St.exists()){const Fe=St.data();S(Fe.subscription||null),b(Fe.lastRead||null),me(Fe.bookmarks||[]),Fe.settings&&(t(Fe.settings.fontSize||16),i(Fe.settings.fontClass||"font-sans"))}else S(null),b(null),me([])});const rt=(yn=window.Telegram)==null?void 0:yn.WebApp;if(rt&&!gt.isAnonymous){const St=(At=(tt=(G=rt.initDataUnsafe)==null?void 0:G.user)==null?void 0:tt.id)==null?void 0:At.toString();St&&await zs(bt,{telegramId:St},{merge:!0})}U(!1)}else qD(no).catch(Tt=>{console.error("Anonymous sign-in failed:",Tt),R(null),T(!1),U(!1)})});return SO(no).catch(gt=>{console.error("Ошибка при получении результата перенаправления:",gt)}),()=>{ht(),et()}},[]),H.useEffect(()=>{if(!d){A([]);return}(async()=>{C(!0);try{const ht=Ie(ie,"chapter_info",d.id.toString()),gt=await Qd(ht);if(gt.exists()){const G=gt.data().chapters||{},tt=Object.keys(G).map(At=>({id:parseInt(At),title:`Глава ${At}`,isPaid:G[At].isPaid||!1})).sort((At,Tt)=>At.id-Tt.id);A(tt)}else console.log("Документ с главами не найден в chapter_info!"),A([])}catch(ht){console.error("Ошибка загрузки глав из Firebase:",ht),A([])}finally{C(!1)}})()},[d]);const Oe=H.useCallback(()=>{r==="reader"?s("details"):r==="details"&&(s("list"),O(null))},[r]);H.useEffect(()=>{var ht;const et=(ht=window.Telegram)==null?void 0:ht.WebApp;if(et)return et.ready(),et.expand(),et.onEvent("backButtonClicked",Oe),r==="list"?et.BackButton.hide():et.BackButton.show(),()=>et.offEvent("backButtonClicked",Oe)},[r,Oe]),H.useEffect(()=>{var ht;const et=(ht=window.Telegram)==null?void 0:ht.WebApp;et&&(et.setHeaderColor("#FFFFFF"),et.setBackgroundColor("#F5F1ED"))},[]);const wn=H.useCallback(async et=>{if(_(et),s("reader"),ct&&d){const ht={...I||{},[d.id]:{novelId:d.id,chapterId:et.id,timestamp:new Date().toISOString()}};b(ht),await Zt({lastRead:ht})}},[ct,d,I,Zt]),yr=et=>{p(et),s("details")},ba=et=>{O(et),s("list"),l("library")},vi=()=>{O(null)},Rn=H.useCallback(async et=>{const ht=_t.includes(et)?_t.filter(gt=>gt!==et):[..._t,et];me(ht),await Zt({bookmarks:ht})},[_t,Zt]),_r=H.useMemo(()=>u.filter(et=>_t.includes(et.id)),[u,_t]),vr=()=>{X(!0)},Hn=et=>{pt(et),X(!1)},Er=async et=>{var gt;const ht=(gt=window.Telegram)==null?void 0:gt.WebApp;if(!ht||!ct||!K){console.error("Telegram Web App, userId, or selectedPlan is not available."),ht&&ht.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}ht.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async yn=>{if(!yn)return;const G=Ie(ie,"users",ct);try{await zs(G,{pendingSubscription:{...K,method:et,date:new Date().toISOString()}},{merge:!0}),ht.openTelegramLink(`https://t.me/${zt}?start=${ct}`),ht.close()}catch(tt){console.error("Ошибка записи в Firebase:",tt),ht.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};if(D)return v.jsx(v4,{});const es=()=>{if(r==="details")return v.jsx(E4,{novel:d,onSelectChapter:wn,onGenreSelect:ba,subscription:V,botUsername:zt,userId:ct,chapters:y,isLoadingChapters:w,lastReadData:I,onBack:Oe});if(r==="reader")return v.jsx(A4,{chapter:m,novel:d,fontSize:e,onFontSizeChange:be,userId:ct,userName:(E==null?void 0:E.displayName)||"Аноним",currentFontClass:n,onSelectChapter:wn,allChapters:y,subscription:V,botUsername:zt,onBack:Oe,isUserAdmin:B});switch(a){case"library":return v.jsxs(v.Fragment,{children:[v.jsx(Kr,{title:"Библиотека"}),v.jsx(I4,{onReadMore:gn}),x&&v.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[v.jsxs("p",{className:"text-sm",children:[v.jsx("span",{className:"opacity-70",children:"Жанр:"}),v.jsx("strong",{className:"ml-2",children:x})]}),v.jsx("button",{onClick:vi,className:"text-xs font-bold text-accent hover:underline",children:"Сбросить"})]}),v.jsx(Yp,{novels:u.filter(et=>!x||et.genres.includes(x)),onSelectNovel:yr,bookmarks:_t,onToggleBookmark:Rn})]});case"search":return v.jsx(b4,{novels:u,onSelectNovel:yr,bookmarks:_t,onToggleBookmark:Rn});case"bookmarks":return v.jsx(S4,{novels:_r,onSelectNovel:yr,bookmarks:_t,onToggleBookmark:Rn});case"profile":return v.jsx(w4,{user:E,subscription:V,onGetSubscriptionClick:vr,userId:ct,auth:no});default:return v.jsx(Kr,{title:"Библиотека"})}};return v.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${B?"":"no-select"}`,children:[v.jsx("div",{className:"pb-20",children:es()}),r==="list"&&v.jsx(R4,{activeTab:a,setActiveTab:l}),q&&v.jsx(Qp,{onClose:()=>X(!1),onSelectPlan:Hn}),K&&v.jsx(Kp,{onClose:()=>pt(null),onSelectMethod:Er,plan:K}),xt&&v.jsx(C4,{newsItem:xt,onClose:()=>gn(null)})]})}KR.createRoot(document.getElementById("root")).render(v.jsx(H.StrictMode,{children:v.jsx(N4,{})}));
