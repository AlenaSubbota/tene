(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Y_={exports:{}},Gu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H1=Symbol.for("react.transitional.element"),G1=Symbol.for("react.fragment");function X_(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:H1,type:e,key:i,ref:t!==void 0?t:null,props:n}}Gu.Fragment=G1;Gu.jsx=X_;Gu.jsxs=X_;Y_.exports=Gu;var M=Y_.exports,$_={exports:{}},J={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var md=Symbol.for("react.transitional.element"),F1=Symbol.for("react.portal"),Q1=Symbol.for("react.fragment"),K1=Symbol.for("react.strict_mode"),Y1=Symbol.for("react.profiler"),X1=Symbol.for("react.consumer"),$1=Symbol.for("react.context"),Z1=Symbol.for("react.forward_ref"),J1=Symbol.for("react.suspense"),W1=Symbol.for("react.memo"),Z_=Symbol.for("react.lazy"),tp=Symbol.iterator;function tS(e){return e===null||typeof e!="object"?null:(e=tp&&e[tp]||e["@@iterator"],typeof e=="function"?e:null)}var J_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W_=Object.assign,tv={};function Os(e,t,n){this.props=e,this.context=t,this.refs=tv,this.updater=n||J_}Os.prototype.isReactComponent={};Os.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Os.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ev(){}ev.prototype=Os.prototype;function gd(e,t,n){this.props=e,this.context=t,this.refs=tv,this.updater=n||J_}var pd=gd.prototype=new ev;pd.constructor=gd;W_(pd,Os.prototype);pd.isPureReactComponent=!0;var ep=Array.isArray,Rt={H:null,A:null,T:null,S:null,V:null},nv=Object.prototype.hasOwnProperty;function yd(e,t,n,i,r,s){return n=s.ref,{$$typeof:md,type:e,key:t,ref:n!==void 0?n:null,props:s}}function eS(e,t){return yd(e.type,t,void 0,void 0,void 0,e.props)}function _d(e){return typeof e=="object"&&e!==null&&e.$$typeof===md}function nS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var np=/\/+/g;function Jc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?nS(""+e.key):t.toString(36)}function ip(){}function iS(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(ip,ip):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function xr(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case md:case F1:a=!0;break;case Z_:return a=e._init,xr(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+Jc(e,0):i,ep(r)?(n="",a!=null&&(n=a.replace(np,"$&/")+"/"),xr(r,t,n,"",function(h){return h})):r!=null&&(_d(r)&&(r=eS(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(np,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(ep(e))for(var u=0;u<e.length;u++)i=e[u],s=l+Jc(i,u),a+=xr(i,t,n,s,r);else if(u=tS(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+Jc(i,u++),a+=xr(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return xr(iS(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function rl(e,t,n){if(e==null)return e;var i=[],r=0;return xr(e,i,"","",function(s){return t.call(n,s,r++)}),i}function rS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rp=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function sS(){}J.Children={map:rl,forEach:function(e,t,n){rl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return rl(e,function(){t++}),t},toArray:function(e){return rl(e,function(t){return t})||[]},only:function(e){if(!_d(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};J.Component=Os;J.Fragment=Q1;J.Profiler=Y1;J.PureComponent=gd;J.StrictMode=K1;J.Suspense=J1;J.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Rt;J.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Rt.H.useMemoCache(e)}};J.cache=function(e){return function(){return e.apply(null,arguments)}};J.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=W_({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!nv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return yd(e.type,r,void 0,void 0,s,i)};J.createContext=function(e){return e={$$typeof:$1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:X1,_context:e},e};J.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)nv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return yd(e,s,void 0,void 0,null,r)};J.createRef=function(){return{current:null}};J.forwardRef=function(e){return{$$typeof:Z1,render:e}};J.isValidElement=_d;J.lazy=function(e){return{$$typeof:Z_,_payload:{_status:-1,_result:e},_init:rS}};J.memo=function(e,t){return{$$typeof:W1,type:e,compare:t===void 0?null:t}};J.startTransition=function(e){var t=Rt.T,n={};Rt.T=n;try{var i=e(),r=Rt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(sS,rp)}catch(s){rp(s)}finally{Rt.T=t}};J.unstable_useCacheRefresh=function(){return Rt.H.useCacheRefresh()};J.use=function(e){return Rt.H.use(e)};J.useActionState=function(e,t,n){return Rt.H.useActionState(e,t,n)};J.useCallback=function(e,t){return Rt.H.useCallback(e,t)};J.useContext=function(e){return Rt.H.useContext(e)};J.useDebugValue=function(){};J.useDeferredValue=function(e,t){return Rt.H.useDeferredValue(e,t)};J.useEffect=function(e,t,n){var i=Rt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};J.useId=function(){return Rt.H.useId()};J.useImperativeHandle=function(e,t,n){return Rt.H.useImperativeHandle(e,t,n)};J.useInsertionEffect=function(e,t){return Rt.H.useInsertionEffect(e,t)};J.useLayoutEffect=function(e,t){return Rt.H.useLayoutEffect(e,t)};J.useMemo=function(e,t){return Rt.H.useMemo(e,t)};J.useOptimistic=function(e,t){return Rt.H.useOptimistic(e,t)};J.useReducer=function(e,t,n){return Rt.H.useReducer(e,t,n)};J.useRef=function(e){return Rt.H.useRef(e)};J.useState=function(e){return Rt.H.useState(e)};J.useSyncExternalStore=function(e,t,n){return Rt.H.useSyncExternalStore(e,t,n)};J.useTransition=function(){return Rt.H.useTransition()};J.version="19.1.1";$_.exports=J;var lt=$_.exports,iv={exports:{}},Fu={},rv={exports:{}},sv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,G){var F=L.length;L.push(G);t:for(;0<F;){var gt=F-1>>>1,pt=L[gt];if(0<r(pt,G))L[gt]=G,L[F]=pt,F=gt;else break t}}function n(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var G=L[0],F=L.pop();if(F!==G){L[0]=F;t:for(var gt=0,pt=L.length,an=pt>>>1;gt<an;){var ge=2*(gt+1)-1,Ct=L[ge],Be=ge+1,qe=L[Be];if(0>r(Ct,F))Be<pt&&0>r(qe,Ct)?(L[gt]=qe,L[Be]=F,gt=Be):(L[gt]=Ct,L[ge]=F,gt=ge);else if(Be<pt&&0>r(qe,F))L[gt]=qe,L[Be]=F,gt=Be;else break t}}return G}function r(L,G){var F=L.sortIndex-G.sortIndex;return F!==0?F:L.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,_=!1,N=!1,V=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function D(L){for(var G=n(h);G!==null;){if(G.callback===null)i(h);else if(G.startTime<=L)i(h),G.sortIndex=G.expirationTime,t(u,G);else break;G=n(h)}}function z(L){if(V=!1,D(L),!N)if(n(u)!==null)N=!0,q||(q=!0,I());else{var G=n(h);G!==null&&ut(z,G.startTime-L)}}var q=!1,T=-1,y=5,v=-1;function A(){return x?!0:!(e.unstable_now()-v<y)}function R(){if(x=!1,q){var L=e.unstable_now();v=L;var G=!0;try{t:{N=!1,V&&(V=!1,E(T),T=-1),_=!0;var F=m;try{e:{for(D(L),g=n(u);g!==null&&!(g.expirationTime>L&&A());){var gt=g.callback;if(typeof gt=="function"){g.callback=null,m=g.priorityLevel;var pt=gt(g.expirationTime<=L);if(L=e.unstable_now(),typeof pt=="function"){g.callback=pt,D(L),G=!0;break e}g===n(u)&&i(u),D(L)}else i(u);g=n(u)}if(g!==null)G=!0;else{var an=n(h);an!==null&&ut(z,an.startTime-L),G=!1}}break t}finally{g=null,m=F,_=!1}G=void 0}}finally{G?I():q=!1}}}var I;if(typeof w=="function")I=function(){w(R)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,Ce=S.port2;S.port1.onmessage=R,I=function(){Ce.postMessage(null)}}else I=function(){b(R,0)};function ut(L,G){T=b(function(){L(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(L){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var F=m;m=G;try{return L()}finally{m=F}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var F=m;m=L;try{return G()}finally{m=F}},e.unstable_scheduleCallback=function(L,G,F){var gt=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?gt+F:gt):F=gt,L){case 1:var pt=-1;break;case 2:pt=250;break;case 5:pt=1073741823;break;case 4:pt=1e4;break;default:pt=5e3}return pt=F+pt,L={id:d++,callback:G,priorityLevel:L,startTime:F,expirationTime:pt,sortIndex:-1},F>gt?(L.sortIndex=F,t(h,L),n(u)===null&&L===n(h)&&(V?(E(T),T=-1):V=!0,ut(z,F-gt))):(L.sortIndex=pt,t(u,L),N||_||(N=!0,q||(q=!0,I()))),L},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(L){var G=m;return function(){var F=m;m=G;try{return L.apply(this,arguments)}finally{m=F}}}})(sv);rv.exports=sv;var aS=rv.exports,av={exports:{}},Ee={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oS=lt;function ov(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ei(){}var ve={d:{f:ei,r:function(){throw Error(ov(522))},D:ei,C:ei,L:ei,m:ei,X:ei,S:ei,M:ei},p:0,findDOMNode:null},lS=Symbol.for("react.portal");function uS(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lS,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Ea=oS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Qu(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ee.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ve;Ee.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(ov(299));return uS(e,t,null,n)};Ee.flushSync=function(e){var t=Ea.T,n=ve.p;try{if(Ea.T=null,ve.p=2,e)return e()}finally{Ea.T=t,ve.p=n,ve.d.f()}};Ee.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,ve.d.C(e,t))};Ee.prefetchDNS=function(e){typeof e=="string"&&ve.d.D(e)};Ee.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Qu(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?ve.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&ve.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ee.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Qu(t.as,t.crossOrigin);ve.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&ve.d.M(e)};Ee.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Qu(n,t.crossOrigin);ve.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ee.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Qu(t.as,t.crossOrigin);ve.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else ve.d.m(e)};Ee.requestFormReset=function(e){ve.d.r(e)};Ee.unstable_batchedUpdates=function(e,t){return e(t)};Ee.useFormState=function(e,t,n){return Ea.H.useFormState(e,t,n)};Ee.useFormStatus=function(){return Ea.H.useHostTransitionStatus()};Ee.version="19.1.1";function lv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lv)}catch(e){console.error(e)}}lv(),av.exports=Ee;var cS=av.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kt=aS,uv=lt,hS=cS;function P(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function cv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ho(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function hv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sp(e){if(ho(e)!==e)throw Error(P(188))}function fS(e){var t=e.alternate;if(!t){if(t=ho(e),t===null)throw Error(P(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return sp(r),e;if(s===i)return sp(r),t;s=s.sibling}throw Error(P(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(P(189))}}if(n.alternate!==i)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?e:t}function fv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=fv(e),t!==null)return t;e=e.sibling}return null}var bt=Object.assign,dS=Symbol.for("react.element"),sl=Symbol.for("react.transitional.element"),fa=Symbol.for("react.portal"),qr=Symbol.for("react.fragment"),dv=Symbol.for("react.strict_mode"),Fh=Symbol.for("react.profiler"),mS=Symbol.for("react.provider"),mv=Symbol.for("react.consumer"),On=Symbol.for("react.context"),vd=Symbol.for("react.forward_ref"),Qh=Symbol.for("react.suspense"),Kh=Symbol.for("react.suspense_list"),Ed=Symbol.for("react.memo"),si=Symbol.for("react.lazy"),Yh=Symbol.for("react.activity"),gS=Symbol.for("react.memo_cache_sentinel"),ap=Symbol.iterator;function ra(e){return e===null||typeof e!="object"?null:(e=ap&&e[ap]||e["@@iterator"],typeof e=="function"?e:null)}var pS=Symbol.for("react.client.reference");function Xh(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===pS?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qr:return"Fragment";case Fh:return"Profiler";case dv:return"StrictMode";case Qh:return"Suspense";case Kh:return"SuspenseList";case Yh:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case fa:return"Portal";case On:return(e.displayName||"Context")+".Provider";case mv:return(e._context.displayName||"Context")+".Consumer";case vd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ed:return t=e.displayName||null,t!==null?t:Xh(e.type)||"Memo";case si:t=e._payload,e=e._init;try{return Xh(e(t))}catch{}}return null}var da=Array.isArray,Y=uv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht=hS.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rr={pending:!1,data:null,method:null,action:null},$h=[],Hr=-1;function Sn(e){return{current:e}}function Jt(e){0>Hr||(e.current=$h[Hr],$h[Hr]=null,Hr--)}function It(e,t){Hr++,$h[Hr]=e.current,e.current=t}var hn=Sn(null),qa=Sn(null),Ei=Sn(null),Yl=Sn(null);function Xl(e,t){switch(It(Ei,t),It(qa,e),It(hn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?hy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=hy(t),e=OT(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Jt(hn),It(hn,e)}function ds(){Jt(hn),Jt(qa),Jt(Ei)}function Zh(e){e.memoizedState!==null&&It(Yl,e);var t=hn.current,n=OT(t,e.type);t!==n&&(It(qa,e),It(hn,n))}function $l(e){qa.current===e&&(Jt(hn),Jt(qa)),Yl.current===e&&(Jt(Yl),Ja._currentValue=rr)}var Jh=Object.prototype.hasOwnProperty,Td=Kt.unstable_scheduleCallback,Wc=Kt.unstable_cancelCallback,yS=Kt.unstable_shouldYield,_S=Kt.unstable_requestPaint,fn=Kt.unstable_now,vS=Kt.unstable_getCurrentPriorityLevel,gv=Kt.unstable_ImmediatePriority,pv=Kt.unstable_UserBlockingPriority,Zl=Kt.unstable_NormalPriority,ES=Kt.unstable_LowPriority,yv=Kt.unstable_IdlePriority,TS=Kt.log,AS=Kt.unstable_setDisableYieldValue,fo=null,ke=null;function gi(e){if(typeof TS=="function"&&AS(e),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(fo,e)}catch{}}var Pe=Math.clz32?Math.clz32:wS,SS=Math.log,bS=Math.LN2;function wS(e){return e>>>=0,e===0?32:31-(SS(e)/bS|0)|0}var al=256,ol=4194304;function Wi(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ku(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=Wi(i):(a&=l,a!==0?r=Wi(a):n||(n=l&~e,n!==0&&(r=Wi(n))))):(l=i&~s,l!==0?r=Wi(l):a!==0?r=Wi(a):n||(n=i&~e,n!==0&&(r=Wi(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function mo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function RS(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _v(){var e=al;return al<<=1,!(al&4194048)&&(al=256),e}function vv(){var e=ol;return ol<<=1,!(ol&62914560)&&(ol=4194304),e}function th(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function go(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function IS(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-Pe(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&Ev(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function Ev(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Pe(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function Tv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Pe(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Ad(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Sd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Av(){var e=ht.p;return e!==0?e:(e=window.event,e===void 0?32:BT(e.type))}function CS(e,t){var n=ht.p;try{return ht.p=e,t()}finally{ht.p=n}}var Gi=Math.random().toString(36).slice(2),fe="__reactFiber$"+Gi,Re="__reactProps$"+Gi,Ms="__reactContainer$"+Gi,Wh="__reactEvents$"+Gi,DS="__reactListeners$"+Gi,NS="__reactHandles$"+Gi,op="__reactResources$"+Gi,po="__reactMarker$"+Gi;function bd(e){delete e[fe],delete e[Re],delete e[Wh],delete e[DS],delete e[NS]}function Gr(e){var t=e[fe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ms]||n[fe]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=my(e);e!==null;){if(n=e[fe])return n;e=my(e)}return t}e=n,n=e.parentNode}return null}function Vs(e){if(e=e[fe]||e[Ms]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function ma(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(P(33))}function es(e){var t=e[op];return t||(t=e[op]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function $t(e){e[po]=!0}var Sv=new Set,bv={};function Ar(e,t){ms(e,t),ms(e+"Capture",t)}function ms(e,t){for(bv[e]=t,e=0;e<t.length;e++)Sv.add(t[e])}var OS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lp={},up={};function MS(e){return Jh.call(up,e)?!0:Jh.call(lp,e)?!1:OS.test(e)?up[e]=!0:(lp[e]=!0,!1)}function wl(e,t,n){if(MS(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ll(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function In(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var eh,cp;function kr(e){if(eh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);eh=t&&t[1]||"",cp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+eh+e+cp}var nh=!1;function ih(e,t){if(!e||nh)return"";nh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var m=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){m=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){m=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{nh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?kr(n):""}function VS(e){switch(e.tag){case 26:case 27:case 5:return kr(e.type);case 16:return kr("Lazy");case 13:return kr("Suspense");case 19:return kr("SuspenseList");case 0:case 15:return ih(e.type,!1);case 11:return ih(e.type.render,!1);case 1:return ih(e.type,!0);case 31:return kr("Activity");default:return""}}function hp(e){try{var t="";do t+=VS(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Ge(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function xS(e){var t=wv(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Jl(e){e._valueTracker||(e._valueTracker=xS(e))}function Rv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=wv(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Wl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var kS=/[\n"\\]/g;function Ke(e){return e.replace(kS,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function tf(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ge(t)):e.value!==""+Ge(t)&&(e.value=""+Ge(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?ef(e,a,Ge(t)):n!=null?ef(e,a,Ge(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+Ge(l):e.removeAttribute("name")}function Iv(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+Ge(n):"",t=t!=null?""+Ge(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function ef(e,t,n){t==="number"&&Wl(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ns(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Ge(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Cv(e,t,n){if(t!=null&&(t=""+Ge(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Ge(n):""}function Dv(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(P(92));if(da(i)){if(1<i.length)throw Error(P(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Ge(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function gs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var PS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||PS.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Nv(e,t,n){if(t!=null&&typeof t!="object")throw Error(P(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&fp(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&fp(e,s,t[s])}function wd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var US=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),LS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rl(e){return LS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var nf=null;function Rd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fr=null,is=null;function dp(e){var t=Vs(e);if(t&&(e=t.stateNode)){var n=e[Re]||null;t:switch(e=t.stateNode,t.type){case"input":if(tf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ke(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Re]||null;if(!r)throw Error(P(90));tf(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Rv(i)}break t;case"textarea":Cv(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&ns(e,!!n.multiple,t,!1)}}}var rh=!1;function Ov(e,t,n){if(rh)return e(t,n);rh=!0;try{var i=e(t);return i}finally{if(rh=!1,(Fr!==null||is!==null)&&(ic(),Fr&&(t=Fr,e=is,is=Fr=null,dp(t),e)))for(t=0;t<e.length;t++)dp(e[t])}}function Ha(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Re]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(P(231,t,typeof n));return n}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rf=!1;if(Bn)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){rf=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{rf=!1}var pi=null,Id=null,Il=null;function Mv(){if(Il)return Il;var e,t=Id,n=t.length,i,r="value"in pi?pi.value:pi.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return Il=r.slice(e,1<i?1-i:void 0)}function Cl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ul(){return!0}function mp(){return!1}function Ie(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ul:mp,this.isPropagationStopped=mp,this}return bt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ul)},persist:function(){},isPersistent:ul}),t}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yu=Ie(Sr),yo=bt({},Sr,{view:0,detail:0}),zS=Ie(yo),sh,ah,aa,Xu=bt({},yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==aa&&(aa&&e.type==="mousemove"?(sh=e.screenX-aa.screenX,ah=e.screenY-aa.screenY):ah=sh=0,aa=e),sh)},movementY:function(e){return"movementY"in e?e.movementY:ah}}),gp=Ie(Xu),jS=bt({},Xu,{dataTransfer:0}),BS=Ie(jS),qS=bt({},yo,{relatedTarget:0}),oh=Ie(qS),HS=bt({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),GS=Ie(HS),FS=bt({},Sr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),QS=Ie(FS),KS=bt({},Sr,{data:0}),pp=Ie(KS),YS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$S={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$S[e])?!!t[e]:!1}function Cd(){return ZS}var JS=bt({},yo,{key:function(e){if(e.key){var t=YS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?XS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cd,charCode:function(e){return e.type==="keypress"?Cl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),WS=Ie(JS),tb=bt({},Xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yp=Ie(tb),eb=bt({},yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cd}),nb=Ie(eb),ib=bt({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),rb=Ie(ib),sb=bt({},Xu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ab=Ie(sb),ob=bt({},Sr,{newState:0,oldState:0}),lb=Ie(ob),ub=[9,13,27,32],Dd=Bn&&"CompositionEvent"in window,Ta=null;Bn&&"documentMode"in document&&(Ta=document.documentMode);var cb=Bn&&"TextEvent"in window&&!Ta,Vv=Bn&&(!Dd||Ta&&8<Ta&&11>=Ta),_p=" ",vp=!1;function xv(e,t){switch(e){case"keyup":return ub.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qr=!1;function hb(e,t){switch(e){case"compositionend":return kv(t);case"keypress":return t.which!==32?null:(vp=!0,_p);case"textInput":return e=t.data,e===_p&&vp?null:e;default:return null}}function fb(e,t){if(Qr)return e==="compositionend"||!Dd&&xv(e,t)?(e=Mv(),Il=Id=pi=null,Qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vv&&t.locale!=="ko"?null:t.data;default:return null}}var db={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ep(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!db[e.type]:t==="textarea"}function Pv(e,t,n,i){Fr?is?is.push(i):is=[i]:Fr=i,t=yu(t,"onChange"),0<t.length&&(n=new Yu("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Aa=null,Ga=null;function mb(e){CT(e,0)}function $u(e){var t=ma(e);if(Rv(t))return e}function Tp(e,t){if(e==="change")return t}var Uv=!1;if(Bn){var lh;if(Bn){var uh="oninput"in document;if(!uh){var Ap=document.createElement("div");Ap.setAttribute("oninput","return;"),uh=typeof Ap.oninput=="function"}lh=uh}else lh=!1;Uv=lh&&(!document.documentMode||9<document.documentMode)}function Sp(){Aa&&(Aa.detachEvent("onpropertychange",Lv),Ga=Aa=null)}function Lv(e){if(e.propertyName==="value"&&$u(Ga)){var t=[];Pv(t,Ga,e,Rd(e)),Ov(mb,t)}}function gb(e,t,n){e==="focusin"?(Sp(),Aa=t,Ga=n,Aa.attachEvent("onpropertychange",Lv)):e==="focusout"&&Sp()}function pb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $u(Ga)}function yb(e,t){if(e==="click")return $u(t)}function _b(e,t){if(e==="input"||e==="change")return $u(t)}function vb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ze=typeof Object.is=="function"?Object.is:vb;function Fa(e,t){if(ze(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Jh.call(t,r)||!ze(e[r],t[r]))return!1}return!0}function bp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wp(e,t){var n=bp(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=bp(n)}}function zv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jv(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wl(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wl(e.document)}return t}function Nd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Eb=Bn&&"documentMode"in document&&11>=document.documentMode,Kr=null,sf=null,Sa=null,af=!1;function Rp(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;af||Kr==null||Kr!==Wl(i)||(i=Kr,"selectionStart"in i&&Nd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Sa&&Fa(Sa,i)||(Sa=i,i=yu(sf,"onSelect"),0<i.length&&(t=new Yu("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Kr)))}function Ji(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yr={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionrun:Ji("Transition","TransitionRun"),transitionstart:Ji("Transition","TransitionStart"),transitioncancel:Ji("Transition","TransitionCancel"),transitionend:Ji("Transition","TransitionEnd")},ch={},Bv={};Bn&&(Bv=document.createElement("div").style,"AnimationEvent"in window||(delete Yr.animationend.animation,delete Yr.animationiteration.animation,delete Yr.animationstart.animation),"TransitionEvent"in window||delete Yr.transitionend.transition);function br(e){if(ch[e])return ch[e];if(!Yr[e])return e;var t=Yr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Bv)return ch[e]=t[n];return e}var qv=br("animationend"),Hv=br("animationiteration"),Gv=br("animationstart"),Tb=br("transitionrun"),Ab=br("transitionstart"),Sb=br("transitioncancel"),Fv=br("transitionend"),Qv=new Map,of="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");of.push("scrollEnd");function sn(e,t){Qv.set(e,t),Ar(t,[e])}var Ip=new WeakMap;function Ye(e,t){if(typeof e=="object"&&e!==null){var n=Ip.get(e);return n!==void 0?n:(t={value:e,source:t,stack:hp(t)},Ip.set(e,t),t)}return{value:e,source:t,stack:hp(t)}}var He=[],Xr=0,Od=0;function Zu(){for(var e=Xr,t=Od=Xr=0;t<e;){var n=He[t];He[t++]=null;var i=He[t];He[t++]=null;var r=He[t];He[t++]=null;var s=He[t];if(He[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&Kv(n,r,s)}}function Ju(e,t,n,i){He[Xr++]=e,He[Xr++]=t,He[Xr++]=n,He[Xr++]=i,Od|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Md(e,t,n,i){return Ju(e,t,n,i),tu(e)}function xs(e,t){return Ju(e,null,null,t),tu(e)}function Kv(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-Pe(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function tu(e){if(50<Va)throw Va=0,Cf=null,Error(P(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var $r={};function bb(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ve(e,t,n,i){return new bb(e,t,n,i)}function Vd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ln(e,t){var n=e.alternate;return n===null?(n=Ve(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Yv(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Dl(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")Vd(e)&&(a=1);else if(typeof e=="string")a=Rw(e,n,hn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Yh:return e=Ve(31,n,t,r),e.elementType=Yh,e.lanes=s,e;case qr:return sr(n.children,r,s,t);case dv:a=8,r|=24;break;case Fh:return e=Ve(12,n,t,r|2),e.elementType=Fh,e.lanes=s,e;case Qh:return e=Ve(13,n,t,r),e.elementType=Qh,e.lanes=s,e;case Kh:return e=Ve(19,n,t,r),e.elementType=Kh,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mS:case On:a=10;break t;case mv:a=9;break t;case vd:a=11;break t;case Ed:a=14;break t;case si:a=16,i=null;break t}a=29,n=Error(P(130,e===null?"null":typeof e,"")),i=null}return t=Ve(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function sr(e,t,n,i){return e=Ve(7,e,i,t),e.lanes=n,e}function hh(e,t,n){return e=Ve(6,e,null,t),e.lanes=n,e}function fh(e,t,n){return t=Ve(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Zr=[],Jr=0,eu=null,nu=0,Fe=[],Qe=0,ar=null,Mn=1,Vn="";function tr(e,t){Zr[Jr++]=nu,Zr[Jr++]=eu,eu=e,nu=t}function Xv(e,t,n){Fe[Qe++]=Mn,Fe[Qe++]=Vn,Fe[Qe++]=ar,ar=e;var i=Mn;e=Vn;var r=32-Pe(i)-1;i&=~(1<<r),n+=1;var s=32-Pe(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Mn=1<<32-Pe(t)+r|n<<r|i,Vn=s+e}else Mn=1<<s|n<<r|i,Vn=e}function xd(e){e.return!==null&&(tr(e,1),Xv(e,1,0))}function kd(e){for(;e===eu;)eu=Zr[--Jr],Zr[Jr]=null,nu=Zr[--Jr],Zr[Jr]=null;for(;e===ar;)ar=Fe[--Qe],Fe[Qe]=null,Vn=Fe[--Qe],Fe[Qe]=null,Mn=Fe[--Qe],Fe[Qe]=null}var _e=null,Vt=null,ct=!1,or=null,un=!1,lf=Error(P(519));function fr(e){var t=Error(P(418,""));throw Qa(Ye(t,e)),lf}function Cp(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[fe]=e,t[Re]=i,n){case"dialog":tt("cancel",t),tt("close",t);break;case"iframe":case"object":case"embed":tt("load",t);break;case"video":case"audio":for(n=0;n<Xa.length;n++)tt(Xa[n],t);break;case"source":tt("error",t);break;case"img":case"image":case"link":tt("error",t),tt("load",t);break;case"details":tt("toggle",t);break;case"input":tt("invalid",t),Iv(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Jl(t);break;case"select":tt("invalid",t);break;case"textarea":tt("invalid",t),Dv(t,i.value,i.defaultValue,i.children),Jl(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||NT(t.textContent,n)?(i.popover!=null&&(tt("beforetoggle",t),tt("toggle",t)),i.onScroll!=null&&tt("scroll",t),i.onScrollEnd!=null&&tt("scrollend",t),i.onClick!=null&&(t.onclick=ac),t=!0):t=!1,t||fr(e)}function Dp(e){for(_e=e.return;_e;)switch(_e.tag){case 5:case 13:un=!1;return;case 27:case 3:un=!0;return;default:_e=_e.return}}function oa(e){if(e!==_e)return!1;if(!ct)return Dp(e),ct=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||xf(e.type,e.memoizedProps)),n=!n),n&&Vt&&fr(e),Dp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Vt=rn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Vt=null}}else t===27?(t=Vt,Fi(e.type)?(e=Uf,Uf=null,Vt=e):Vt=t):Vt=_e?rn(e.stateNode.nextSibling):null;return!0}function _o(){Vt=_e=null,ct=!1}function Np(){var e=or;return e!==null&&(Se===null?Se=e:Se.push.apply(Se,e),or=null),e}function Qa(e){or===null?or=[e]:or.push(e)}var uf=Sn(null),wr=null,xn=null;function oi(e,t,n){It(uf,t._currentValue),t._currentValue=n}function zn(e){e._currentValue=uf.current,Jt(uf)}function cf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function hf(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),cf(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(P(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),cf(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function vo(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(P(387));if(a=a.memoizedProps,a!==null){var l=r.type;ze(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===Yl.current){if(a=r.alternate,a===null)throw Error(P(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Ja):e=[Ja])}r=r.return}e!==null&&hf(t,e,n,i),t.flags|=262144}function iu(e){for(e=e.firstContext;e!==null;){if(!ze(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function dr(e){wr=e,xn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function de(e){return $v(wr,e)}function cl(e,t){return wr===null&&dr(e),$v(e,t)}function $v(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},xn===null){if(e===null)throw Error(P(308));xn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xn=xn.next=t;return n}var wb=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Rb=Kt.unstable_scheduleCallback,Ib=Kt.unstable_NormalPriority,qt={$$typeof:On,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pd(){return{controller:new wb,data:new Map,refCount:0}}function Eo(e){e.refCount--,e.refCount===0&&Rb(Ib,function(){e.controller.abort()})}var ba=null,ff=0,ps=0,rs=null;function Cb(e,t){if(ba===null){var n=ba=[];ff=0,ps=sm(),rs={status:"pending",value:void 0,then:function(i){n.push(i)}}}return ff++,t.then(Op,Op),t}function Op(){if(--ff===0&&ba!==null){rs!==null&&(rs.status="fulfilled");var e=ba;ba=null,ps=0,rs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Db(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var Mp=Y.S;Y.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Cb(e,t),Mp!==null&&Mp(e,t)};var lr=Sn(null);function Ud(){var e=lr.current;return e!==null?e:Tt.pooledCache}function Nl(e,t){t===null?It(lr,lr.current):It(lr,t.pool)}function Zv(){var e=Ud();return e===null?null:{parent:qt._currentValue,pool:e}}var To=Error(P(460)),Jv=Error(P(474)),Wu=Error(P(542)),df={then:function(){}};function Vp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function hl(){}function Wv(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(hl,hl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,kp(e),e;default:if(typeof t.status=="string")t.then(hl,hl);else{if(e=Tt,e!==null&&100<e.shellSuspendCounter)throw Error(P(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,kp(e),e}throw wa=t,To}}var wa=null;function xp(){if(wa===null)throw Error(P(459));var e=wa;return wa=null,e}function kp(e){if(e===To||e===Wu)throw Error(P(483))}var ai=!1;function Ld(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ti(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,mt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=tu(e),Kv(e,null,n),t}return Ju(e,i,t,n),tu(e)}function Ra(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Tv(e,n)}}function dh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var gf=!1;function Ia(){if(gf){var e=rs;if(e!==null)throw e}}function Ca(e,t,n,i){gf=!1;var r=e.updateQueue;ai=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(at&m)===m:(i&m)===m){m!==0&&m===ps&&(gf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var N=e,V=l;m=t;var x=n;switch(V.tag){case 1:if(N=V.payload,typeof N=="function"){g=N.call(x,g,m);break t}g=N;break t;case 3:N.flags=N.flags&-65537|128;case 0:if(N=V.payload,m=typeof N=="function"?N.call(x,g,m):N,m==null)break t;g=bt({},g,m);break t;case 2:ai=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=r.callbacks,_===null?r.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=g):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);d===null&&(u=g),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),Pi|=a,e.lanes=a,e.memoizedState=g}}function tE(e,t){if(typeof e!="function")throw Error(P(191,e));e.call(t)}function eE(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)tE(n[e],t)}var ys=Sn(null),ru=Sn(0);function Pp(e,t){e=Gn,It(ru,e),It(ys,t),Gn=e|t.baseLanes}function pf(){It(ru,Gn),It(ys,ys.current)}function zd(){Gn=ru.current,Jt(ys),Jt(ru)}var xi=0,W=null,_t=null,zt=null,su=!1,ss=!1,mr=!1,au=0,Ka=0,as=null,Nb=0;function kt(){throw Error(P(321))}function jd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ze(e[n],t[n]))return!1;return!0}function Bd(e,t,n,i,r,s){return xi=s,W=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Y.H=e===null||e.memoizedState===null?ME:VE,mr=!1,s=n(i,r),mr=!1,ss&&(s=iE(t,n,i,r)),nE(e),s}function nE(e){Y.H=ou;var t=_t!==null&&_t.next!==null;if(xi=0,zt=_t=W=null,su=!1,Ka=0,as=null,t)throw Error(P(300));e===null||Zt||(e=e.dependencies,e!==null&&iu(e)&&(Zt=!0))}function iE(e,t,n,i){W=e;var r=0;do{if(ss&&(as=null),Ka=0,ss=!1,25<=r)throw Error(P(301));if(r+=1,zt=_t=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Y.H=Ub,s=t(n,i)}while(ss);return s}function Ob(){var e=Y.H,t=e.useState()[0];return t=typeof t.then=="function"?Ao(t):t,e=e.useState()[0],(_t!==null?_t.memoizedState:null)!==e&&(W.flags|=1024),t}function qd(){var e=au!==0;return au=0,e}function Hd(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Gd(e){if(su){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}su=!1}xi=0,zt=_t=W=null,ss=!1,Ka=au=0,as=null}function Te(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?W.memoizedState=zt=e:zt=zt.next=e,zt}function Bt(){if(_t===null){var e=W.alternate;e=e!==null?e.memoizedState:null}else e=_t.next;var t=zt===null?W.memoizedState:zt.next;if(t!==null)zt=t,_t=e;else{if(e===null)throw W.alternate===null?Error(P(467)):Error(P(310));_t=e,e={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},zt===null?W.memoizedState=zt=e:zt=zt.next=e}return zt}function Fd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ao(e){var t=Ka;return Ka+=1,as===null&&(as=[]),e=Wv(as,e,t),t=W,(zt===null?t.memoizedState:zt.next)===null&&(t=t.alternate,Y.H=t===null||t.memoizedState===null?ME:VE),e}function tc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ao(e);if(e.$$typeof===On)return de(e)}throw Error(P(438,String(e)))}function Qd(e){var t=null,n=W.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=W.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Fd(),W.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=gS;return t.index++,n}function qn(e,t){return typeof t=="function"?t(e):t}function Ol(e){var t=Bt();return Kd(t,_t,e)}function Kd(e,t,n){var i=e.queue;if(i===null)throw Error(P(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(at&g)===g:(xi&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===ps&&(d=!0);else if((xi&m)===m){h=h.next,m===ps&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=s):u=u.next=g,W.lanes|=m,Pi|=m;g=h.action,mr&&n(s,g),s=h.hasEagerState?h.eagerState:n(s,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,W.lanes|=g,Pi|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!ze(s,e.memoizedState)&&(Zt=!0,d&&(n=rs,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function mh(e){var t=Bt(),n=t.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);ze(s,t.memoizedState)||(Zt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function rE(e,t,n){var i=W,r=Bt(),s=ct;if(s){if(n===void 0)throw Error(P(407));n=n()}else n=t();var a=!ze((_t||r).memoizedState,n);a&&(r.memoizedState=n,Zt=!0),r=r.queue;var l=oE.bind(null,i,r,e);if(So(2048,8,l,[e]),r.getSnapshot!==t||a||zt!==null&&zt.memoizedState.tag&1){if(i.flags|=2048,_s(9,ec(),aE.bind(null,i,r,n,t),null),Tt===null)throw Error(P(349));s||xi&124||sE(i,t,n)}return n}function sE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=W.updateQueue,t===null?(t=Fd(),W.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function aE(e,t,n,i){t.value=n,t.getSnapshot=i,lE(t)&&uE(e)}function oE(e,t,n){return n(function(){lE(t)&&uE(e)})}function lE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ze(e,n)}catch{return!0}}function uE(e){var t=xs(e,2);t!==null&&Le(t,e,2)}function yf(e){var t=Te();if(typeof e=="function"){var n=e;if(e=n(),mr){gi(!0);try{n()}finally{gi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:e},t}function cE(e,t,n,i){return e.baseState=n,Kd(e,_t,typeof i=="function"?i:qn)}function Mb(e,t,n,i,r){if(nc(e))throw Error(P(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};Y.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,hE(t,s)):(s.next=n.next,t.pending=n.next=s)}}function hE(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=Y.T,a={};Y.T=a;try{var l=n(r,i),u=Y.S;u!==null&&u(a,l),Up(e,t,l)}catch(h){_f(e,t,h)}finally{Y.T=s}}else try{s=n(r,i),Up(e,t,s)}catch(h){_f(e,t,h)}}function Up(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Lp(e,t,i)},function(i){return _f(e,t,i)}):Lp(e,t,n)}function Lp(e,t,n){t.status="fulfilled",t.value=n,fE(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,hE(e,n)))}function _f(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,fE(t),t=t.next;while(t!==i)}e.action=null}function fE(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function dE(e,t){return t}function zp(e,t){if(ct){var n=Tt.formState;if(n!==null){t:{var i=W;if(ct){if(Vt){e:{for(var r=Vt,s=un;r.nodeType!==8;){if(!s){r=null;break e}if(r=rn(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Vt=rn(r.nextSibling),i=r.data==="F!";break t}}fr(i)}i=!1}i&&(t=n[0])}}return n=Te(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dE,lastRenderedState:t},n.queue=i,n=DE.bind(null,W,i),i.dispatch=n,i=yf(!1),s=Zd.bind(null,W,!1,i.queue),i=Te(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=Mb.bind(null,W,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function jp(e){var t=Bt();return mE(t,_t,e)}function mE(e,t,n){if(t=Kd(e,t,dE)[0],e=Ol(qn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Ao(t)}catch(a){throw a===To?Wu:a}else i=t;t=Bt();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(W.flags|=2048,_s(9,ec(),Vb.bind(null,r,n),null)),[i,s,e]}function Vb(e,t){e.action=t}function Bp(e){var t=Bt(),n=_t;if(n!==null)return mE(t,n,e);Bt(),t=t.memoizedState,n=Bt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function _s(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=W.updateQueue,t===null&&(t=Fd(),W.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function ec(){return{destroy:void 0,resource:void 0}}function gE(){return Bt().memoizedState}function Ml(e,t,n,i){var r=Te();i=i===void 0?null:i,W.flags|=e,r.memoizedState=_s(1|t,ec(),n,i)}function So(e,t,n,i){var r=Bt();i=i===void 0?null:i;var s=r.memoizedState.inst;_t!==null&&i!==null&&jd(i,_t.memoizedState.deps)?r.memoizedState=_s(t,s,n,i):(W.flags|=e,r.memoizedState=_s(1|t,s,n,i))}function qp(e,t){Ml(8390656,8,e,t)}function pE(e,t){So(2048,8,e,t)}function yE(e,t){return So(4,2,e,t)}function _E(e,t){return So(4,4,e,t)}function vE(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function EE(e,t,n){n=n!=null?n.concat([e]):null,So(4,4,vE.bind(null,t,e),n)}function Yd(){}function TE(e,t){var n=Bt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&jd(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function AE(e,t){var n=Bt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&jd(t,i[1]))return i[0];if(i=e(),mr){gi(!0);try{e()}finally{gi(!1)}}return n.memoizedState=[i,t],i}function Xd(e,t,n){return n===void 0||xi&1073741824?e.memoizedState=t:(e.memoizedState=n,e=fT(),W.lanes|=e,Pi|=e,n)}function SE(e,t,n,i){return ze(n,t)?n:ys.current!==null?(e=Xd(e,n,i),ze(e,t)||(Zt=!0),e):xi&42?(e=fT(),W.lanes|=e,Pi|=e,t):(Zt=!0,e.memoizedState=n)}function bE(e,t,n,i,r){var s=ht.p;ht.p=s!==0&&8>s?s:8;var a=Y.T,l={};Y.T=l,Zd(e,!1,t,n);try{var u=r(),h=Y.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=Db(u,i);Da(e,t,d,Ue(e))}else Da(e,t,i,Ue(e))}catch(g){Da(e,t,{then:function(){},status:"rejected",reason:g},Ue())}finally{ht.p=s,Y.T=a}}function xb(){}function vf(e,t,n,i){if(e.tag!==5)throw Error(P(476));var r=wE(e).queue;bE(e,r,t,rr,n===null?xb:function(){return RE(e),n(i)})}function wE(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:rr,baseState:rr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:rr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function RE(e){var t=wE(e).next.queue;Da(e,t,{},Ue())}function $d(){return de(Ja)}function IE(){return Bt().memoizedState}function CE(){return Bt().memoizedState}function kb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ue();e=Ti(n);var i=Ai(t,e,n);i!==null&&(Le(i,t,n),Ra(i,t,n)),t={cache:Pd()},e.payload=t;return}t=t.return}}function Pb(e,t,n){var i=Ue();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},nc(e)?NE(t,n):(n=Md(e,t,n,i),n!==null&&(Le(n,e,i),OE(n,t,i)))}function DE(e,t,n){var i=Ue();Da(e,t,n,i)}function Da(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(nc(e))NE(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,ze(l,a))return Ju(e,t,r,0),Tt===null&&Zu(),!1}catch{}finally{}if(n=Md(e,t,r,i),n!==null)return Le(n,e,i),OE(n,t,i),!0}return!1}function Zd(e,t,n,i){if(i={lane:2,revertLane:sm(),action:i,hasEagerState:!1,eagerState:null,next:null},nc(e)){if(t)throw Error(P(479))}else t=Md(e,n,i,2),t!==null&&Le(t,e,2)}function nc(e){var t=e.alternate;return e===W||t!==null&&t===W}function NE(e,t){ss=su=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function OE(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Tv(e,n)}}var ou={readContext:de,use:tc,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt},ME={readContext:de,use:tc,useCallback:function(e,t){return Te().memoizedState=[e,t===void 0?null:t],e},useContext:de,useEffect:qp,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ml(4194308,4,vE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ml(4194308,4,e,t)},useInsertionEffect:function(e,t){Ml(4,2,e,t)},useMemo:function(e,t){var n=Te();t=t===void 0?null:t;var i=e();if(mr){gi(!0);try{e()}finally{gi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Te();if(n!==void 0){var r=n(t);if(mr){gi(!0);try{n(t)}finally{gi(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Pb.bind(null,W,e),[i.memoizedState,e]},useRef:function(e){var t=Te();return e={current:e},t.memoizedState=e},useState:function(e){e=yf(e);var t=e.queue,n=DE.bind(null,W,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Yd,useDeferredValue:function(e,t){var n=Te();return Xd(n,e,t)},useTransition:function(){var e=yf(!1);return e=bE.bind(null,W,e.queue,!0,!1),Te().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=W,r=Te();if(ct){if(n===void 0)throw Error(P(407));n=n()}else{if(n=t(),Tt===null)throw Error(P(349));at&124||sE(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,qp(oE.bind(null,i,s,e),[e]),i.flags|=2048,_s(9,ec(),aE.bind(null,i,s,n,t),null),n},useId:function(){var e=Te(),t=Tt.identifierPrefix;if(ct){var n=Vn,i=Mn;n=(i&~(1<<32-Pe(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=au++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=Nb++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:$d,useFormState:zp,useActionState:zp,useOptimistic:function(e){var t=Te();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Zd.bind(null,W,!0,n),n.dispatch=t,[e,t]},useMemoCache:Qd,useCacheRefresh:function(){return Te().memoizedState=kb.bind(null,W)}},VE={readContext:de,use:tc,useCallback:TE,useContext:de,useEffect:pE,useImperativeHandle:EE,useInsertionEffect:yE,useLayoutEffect:_E,useMemo:AE,useReducer:Ol,useRef:gE,useState:function(){return Ol(qn)},useDebugValue:Yd,useDeferredValue:function(e,t){var n=Bt();return SE(n,_t.memoizedState,e,t)},useTransition:function(){var e=Ol(qn)[0],t=Bt().memoizedState;return[typeof e=="boolean"?e:Ao(e),t]},useSyncExternalStore:rE,useId:IE,useHostTransitionStatus:$d,useFormState:jp,useActionState:jp,useOptimistic:function(e,t){var n=Bt();return cE(n,_t,e,t)},useMemoCache:Qd,useCacheRefresh:CE},Ub={readContext:de,use:tc,useCallback:TE,useContext:de,useEffect:pE,useImperativeHandle:EE,useInsertionEffect:yE,useLayoutEffect:_E,useMemo:AE,useReducer:mh,useRef:gE,useState:function(){return mh(qn)},useDebugValue:Yd,useDeferredValue:function(e,t){var n=Bt();return _t===null?Xd(n,e,t):SE(n,_t.memoizedState,e,t)},useTransition:function(){var e=mh(qn)[0],t=Bt().memoizedState;return[typeof e=="boolean"?e:Ao(e),t]},useSyncExternalStore:rE,useId:IE,useHostTransitionStatus:$d,useFormState:Bp,useActionState:Bp,useOptimistic:function(e,t){var n=Bt();return _t!==null?cE(n,_t,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Qd,useCacheRefresh:CE},os=null,Ya=0;function fl(e){var t=Ya;return Ya+=1,os===null&&(os=[]),Wv(os,e,t)}function la(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function dl(e,t){throw t.$$typeof===dS?Error(P(525)):(e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Hp(e){var t=e._init;return t(e._payload)}function xE(e){function t(b,E){if(e){var w=b.deletions;w===null?(b.deletions=[E],b.flags|=16):w.push(E)}}function n(b,E){if(!e)return null;for(;E!==null;)t(b,E),E=E.sibling;return null}function i(b){for(var E=new Map;b!==null;)b.key!==null?E.set(b.key,b):E.set(b.index,b),b=b.sibling;return E}function r(b,E){return b=Ln(b,E),b.index=0,b.sibling=null,b}function s(b,E,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<E?(b.flags|=67108866,E):w):(b.flags|=67108866,E)):(b.flags|=1048576,E)}function a(b){return e&&b.alternate===null&&(b.flags|=67108866),b}function l(b,E,w,D){return E===null||E.tag!==6?(E=hh(w,b.mode,D),E.return=b,E):(E=r(E,w),E.return=b,E)}function u(b,E,w,D){var z=w.type;return z===qr?d(b,E,w.props.children,D,w.key):E!==null&&(E.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===si&&Hp(z)===E.type)?(E=r(E,w.props),la(E,w),E.return=b,E):(E=Dl(w.type,w.key,w.props,null,b.mode,D),la(E,w),E.return=b,E)}function h(b,E,w,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=fh(w,b.mode,D),E.return=b,E):(E=r(E,w.children||[]),E.return=b,E)}function d(b,E,w,D,z){return E===null||E.tag!==7?(E=sr(w,b.mode,D,z),E.return=b,E):(E=r(E,w),E.return=b,E)}function g(b,E,w){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=hh(""+E,b.mode,w),E.return=b,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case sl:return w=Dl(E.type,E.key,E.props,null,b.mode,w),la(w,E),w.return=b,w;case fa:return E=fh(E,b.mode,w),E.return=b,E;case si:var D=E._init;return E=D(E._payload),g(b,E,w)}if(da(E)||ra(E))return E=sr(E,b.mode,w,null),E.return=b,E;if(typeof E.then=="function")return g(b,fl(E),w);if(E.$$typeof===On)return g(b,cl(b,E),w);dl(b,E)}return null}function m(b,E,w,D){var z=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return z!==null?null:l(b,E,""+w,D);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case sl:return w.key===z?u(b,E,w,D):null;case fa:return w.key===z?h(b,E,w,D):null;case si:return z=w._init,w=z(w._payload),m(b,E,w,D)}if(da(w)||ra(w))return z!==null?null:d(b,E,w,D,null);if(typeof w.then=="function")return m(b,E,fl(w),D);if(w.$$typeof===On)return m(b,E,cl(b,w),D);dl(b,w)}return null}function _(b,E,w,D,z){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return b=b.get(w)||null,l(E,b,""+D,z);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case sl:return b=b.get(D.key===null?w:D.key)||null,u(E,b,D,z);case fa:return b=b.get(D.key===null?w:D.key)||null,h(E,b,D,z);case si:var q=D._init;return D=q(D._payload),_(b,E,w,D,z)}if(da(D)||ra(D))return b=b.get(w)||null,d(E,b,D,z,null);if(typeof D.then=="function")return _(b,E,w,fl(D),z);if(D.$$typeof===On)return _(b,E,w,cl(E,D),z);dl(E,D)}return null}function N(b,E,w,D){for(var z=null,q=null,T=E,y=E=0,v=null;T!==null&&y<w.length;y++){T.index>y?(v=T,T=null):v=T.sibling;var A=m(b,T,w[y],D);if(A===null){T===null&&(T=v);break}e&&T&&A.alternate===null&&t(b,T),E=s(A,E,y),q===null?z=A:q.sibling=A,q=A,T=v}if(y===w.length)return n(b,T),ct&&tr(b,y),z;if(T===null){for(;y<w.length;y++)T=g(b,w[y],D),T!==null&&(E=s(T,E,y),q===null?z=T:q.sibling=T,q=T);return ct&&tr(b,y),z}for(T=i(T);y<w.length;y++)v=_(T,b,y,w[y],D),v!==null&&(e&&v.alternate!==null&&T.delete(v.key===null?y:v.key),E=s(v,E,y),q===null?z=v:q.sibling=v,q=v);return e&&T.forEach(function(R){return t(b,R)}),ct&&tr(b,y),z}function V(b,E,w,D){if(w==null)throw Error(P(151));for(var z=null,q=null,T=E,y=E=0,v=null,A=w.next();T!==null&&!A.done;y++,A=w.next()){T.index>y?(v=T,T=null):v=T.sibling;var R=m(b,T,A.value,D);if(R===null){T===null&&(T=v);break}e&&T&&R.alternate===null&&t(b,T),E=s(R,E,y),q===null?z=R:q.sibling=R,q=R,T=v}if(A.done)return n(b,T),ct&&tr(b,y),z;if(T===null){for(;!A.done;y++,A=w.next())A=g(b,A.value,D),A!==null&&(E=s(A,E,y),q===null?z=A:q.sibling=A,q=A);return ct&&tr(b,y),z}for(T=i(T);!A.done;y++,A=w.next())A=_(T,b,y,A.value,D),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?y:A.key),E=s(A,E,y),q===null?z=A:q.sibling=A,q=A);return e&&T.forEach(function(I){return t(b,I)}),ct&&tr(b,y),z}function x(b,E,w,D){if(typeof w=="object"&&w!==null&&w.type===qr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case sl:t:{for(var z=w.key;E!==null;){if(E.key===z){if(z=w.type,z===qr){if(E.tag===7){n(b,E.sibling),D=r(E,w.props.children),D.return=b,b=D;break t}}else if(E.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===si&&Hp(z)===E.type){n(b,E.sibling),D=r(E,w.props),la(D,w),D.return=b,b=D;break t}n(b,E);break}else t(b,E);E=E.sibling}w.type===qr?(D=sr(w.props.children,b.mode,D,w.key),D.return=b,b=D):(D=Dl(w.type,w.key,w.props,null,b.mode,D),la(D,w),D.return=b,b=D)}return a(b);case fa:t:{for(z=w.key;E!==null;){if(E.key===z)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){n(b,E.sibling),D=r(E,w.children||[]),D.return=b,b=D;break t}else{n(b,E);break}else t(b,E);E=E.sibling}D=fh(w,b.mode,D),D.return=b,b=D}return a(b);case si:return z=w._init,w=z(w._payload),x(b,E,w,D)}if(da(w))return N(b,E,w,D);if(ra(w)){if(z=ra(w),typeof z!="function")throw Error(P(150));return w=z.call(w),V(b,E,w,D)}if(typeof w.then=="function")return x(b,E,fl(w),D);if(w.$$typeof===On)return x(b,E,cl(b,w),D);dl(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,E!==null&&E.tag===6?(n(b,E.sibling),D=r(E,w),D.return=b,b=D):(n(b,E),D=hh(w,b.mode,D),D.return=b,b=D),a(b)):n(b,E)}return function(b,E,w,D){try{Ya=0;var z=x(b,E,w,D);return os=null,z}catch(T){if(T===To||T===Wu)throw T;var q=Ve(29,T,null,b.mode);return q.lanes=D,q.return=b,q}finally{}}}var vs=xE(!0),kE=xE(!1),Ze=Sn(null),dn=null;function li(e){var t=e.alternate;It(Ht,Ht.current&1),It(Ze,e),dn===null&&(t===null||ys.current!==null||t.memoizedState!==null)&&(dn=e)}function PE(e){if(e.tag===22){if(It(Ht,Ht.current),It(Ze,e),dn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(dn=e)}}else ui()}function ui(){It(Ht,Ht.current),It(Ze,Ze.current)}function kn(e){Jt(Ze),dn===e&&(dn=null),Jt(Ht)}var Ht=Sn(0);function lu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Pf(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function gh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:bt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ef={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ue(),r=Ti(i);r.payload=t,n!=null&&(r.callback=n),t=Ai(e,r,i),t!==null&&(Le(t,e,i),Ra(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ue(),r=Ti(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Ai(e,r,i),t!==null&&(Le(t,e,i),Ra(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ue(),i=Ti(n);i.tag=2,t!=null&&(i.callback=t),t=Ai(e,i,n),t!==null&&(Le(t,e,n),Ra(t,e,n))}};function Gp(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!Fa(n,i)||!Fa(r,s):!0}function Fp(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Ef.enqueueReplaceState(t,t.state,null)}function gr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=bt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var uu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function UE(e){uu(e)}function LE(e){console.error(e)}function zE(e){uu(e)}function cu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Qp(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Tf(e,t,n){return n=Ti(n),n.tag=3,n.payload={element:null},n.callback=function(){cu(e,t)},n}function jE(e){return e=Ti(e),e.tag=3,e}function BE(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){Qp(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){Qp(t,n,i),typeof r!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Lb(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&vo(t,n,r,!0),n=Ze.current,n!==null){switch(n.tag){case 13:return dn===null?Df():n.alternate===null&&xt===0&&(xt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===df?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Rh(e,i,r)),!1;case 22:return n.flags|=65536,i===df?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Rh(e,i,r)),!1}throw Error(P(435,n.tag))}return Rh(e,i,r),Df(),!1}if(ct)return t=Ze.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==lf&&(e=Error(P(422),{cause:i}),Qa(Ye(e,n)))):(i!==lf&&(t=Error(P(423),{cause:i}),Qa(Ye(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=Ye(i,n),r=Tf(e.stateNode,i,r),dh(e,r),xt!==4&&(xt=2)),!1;var s=Error(P(520),{cause:i});if(s=Ye(s,n),Ma===null?Ma=[s]:Ma.push(s),xt!==4&&(xt=2),t===null)return!0;i=Ye(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Tf(n.stateNode,i,e),dh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Si===null||!Si.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=jE(r),BE(r,e,n,i),dh(n,r),!1}n=n.return}while(n!==null);return!1}var qE=Error(P(461)),Zt=!1;function te(e,t,n,i){t.child=e===null?kE(t,null,n,i):vs(t,e.child,n,i)}function Kp(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return dr(t),i=Bd(e,t,n,a,s,r),l=qd(),e!==null&&!Zt?(Hd(e,t,r),Hn(e,t,r)):(ct&&l&&xd(t),t.flags|=1,te(e,t,i,r),t.child)}function Yp(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!Vd(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,HE(e,t,s,i,r)):(e=Dl(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Jd(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Fa,n(a,i)&&e.ref===t.ref)return Hn(e,t,r)}return t.flags|=1,e=Ln(s,i),e.ref=t.ref,e.return=t,t.child=e}function HE(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(Fa(s,i)&&e.ref===t.ref)if(Zt=!1,t.pendingProps=i=s,Jd(e,r))e.flags&131072&&(Zt=!0);else return t.lanes=e.lanes,Hn(e,t,r)}return Af(e,t,n,i,r)}function GE(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return Xp(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Nl(t,s!==null?s.cachePool:null),s!==null?Pp(t,s):pf(),PE(t);else return t.lanes=t.childLanes=536870912,Xp(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(Nl(t,s.cachePool),Pp(t,s),ui(),t.memoizedState=null):(e!==null&&Nl(t,null),pf(),ui());return te(e,t,r,n),t.child}function Xp(e,t,n,i){var r=Ud();return r=r===null?null:{parent:qt._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&Nl(t,null),pf(),PE(t),e!==null&&vo(e,t,i,!0),null}function Vl(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(P(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Af(e,t,n,i,r){return dr(t),n=Bd(e,t,n,i,void 0,r),i=qd(),e!==null&&!Zt?(Hd(e,t,r),Hn(e,t,r)):(ct&&i&&xd(t),t.flags|=1,te(e,t,n,r),t.child)}function $p(e,t,n,i,r,s){return dr(t),t.updateQueue=null,n=iE(t,i,n,r),nE(e),i=qd(),e!==null&&!Zt?(Hd(e,t,s),Hn(e,t,s)):(ct&&i&&xd(t),t.flags|=1,te(e,t,n,s),t.child)}function Zp(e,t,n,i,r){if(dr(t),t.stateNode===null){var s=$r,a=n.contextType;typeof a=="object"&&a!==null&&(s=de(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ef,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},Ld(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?de(a):$r,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(gh(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Ef.enqueueReplaceState(s,s.state,null),Ca(t,i,s,r),Ia(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=gr(n,l);s.props=u;var h=s.context,d=n.contextType;a=$r,typeof d=="object"&&d!==null&&(a=de(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&Fp(t,s,i,a),ai=!1;var m=t.memoizedState;s.state=m,Ca(t,i,s,r),Ia(),h=t.memoizedState,l||m!==h||ai?(typeof g=="function"&&(gh(t,n,g,i),h=t.memoizedState),(u=ai||Gp(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,mf(e,t),a=t.memoizedProps,d=gr(n,a),s.props=d,g=t.pendingProps,m=s.context,h=n.contextType,u=$r,typeof h=="object"&&h!==null&&(u=de(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==g||m!==u)&&Fp(t,s,i,u),ai=!1,m=t.memoizedState,s.state=m,Ca(t,i,s,r),Ia();var _=t.memoizedState;a!==g||m!==_||ai||e!==null&&e.dependencies!==null&&iu(e.dependencies)?(typeof l=="function"&&(gh(t,n,l,i),_=t.memoizedState),(d=ai||Gp(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&iu(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),s.props=i,s.state=_,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,Vl(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=vs(t,e.child,null,r),t.child=vs(t,null,n,r)):te(e,t,n,r),t.memoizedState=s.state,e=t.child):e=Hn(e,t,r),e}function Jp(e,t,n,i){return _o(),t.flags|=256,te(e,t,n,i),t.child}var ph={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yh(e){return{baseLanes:e,cachePool:Zv()}}function _h(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=$e),e}function FE(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(Ht.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(ct){if(r?li(t):ui(),ct){var l=Vt,u;if(u=l){t:{for(u=l,l=un;u.nodeType!==8;){if(!l){l=null;break t}if(u=rn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:ar!==null?{id:Mn,overflow:Vn}:null,retryLane:536870912,hydrationErrors:null},u=Ve(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,_e=t,Vt=null,u=!0):u=!1}u||fr(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return Pf(l)?t.lanes=32:t.lanes=536870912,null;kn(t)}return l=i.children,i=i.fallback,r?(ui(),r=t.mode,l=hu({mode:"hidden",children:l},r),i=sr(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=yh(n),r.childLanes=_h(e,a,n),t.memoizedState=ph,i):(li(t),Sf(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(li(t),t.flags&=-257,t=vh(e,t,n)):t.memoizedState!==null?(ui(),t.child=e.child,t.flags|=128,t=null):(ui(),r=i.fallback,l=t.mode,i=hu({mode:"visible",children:i.children},l),r=sr(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,vs(t,e.child,null,n),i=t.child,i.memoizedState=yh(n),i.childLanes=_h(e,a,n),t.memoizedState=ph,t=r);else if(li(t),Pf(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(P(419)),i.stack="",i.digest=a,Qa({value:i,source:null,stack:null}),t=vh(e,t,n)}else if(Zt||vo(e,t,n,!1),a=(n&e.childLanes)!==0,Zt||a){if(a=Tt,a!==null&&(i=n&-n,i=i&42?1:Ad(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,xs(e,i),Le(a,e,i),qE;l.data==="$?"||Df(),t=vh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Vt=rn(l.nextSibling),_e=t,ct=!0,or=null,un=!1,e!==null&&(Fe[Qe++]=Mn,Fe[Qe++]=Vn,Fe[Qe++]=ar,Mn=e.id,Vn=e.overflow,ar=t),t=Sf(t,i.children),t.flags|=4096);return t}return r?(ui(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=Ln(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=Ln(h,r):(r=sr(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=yh(n):(u=l.cachePool,u!==null?(h=qt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=Zv(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=_h(e,a,n),t.memoizedState=ph,i):(li(t),n=e.child,e=n.sibling,n=Ln(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Sf(e,t){return t=hu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function hu(e,t){return e=Ve(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function vh(e,t,n){return vs(t,e.child,null,n),e=Sf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wp(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),cf(e.return,t,n)}function Eh(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function QE(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(te(e,t,i.children,n),i=Ht.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wp(e,n,t);else if(e.tag===19)Wp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(It(Ht,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&lu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Eh(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&lu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Eh(t,!0,n,null,s);break;case"together":Eh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Pi|=t.lanes,!(n&t.childLanes))if(e!==null){if(vo(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,n=Ln(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ln(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Jd(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&iu(e)))}function zb(e,t,n){switch(t.tag){case 3:Xl(t,t.stateNode.containerInfo),oi(t,qt,e.memoizedState.cache),_o();break;case 27:case 5:Zh(t);break;case 4:Xl(t,t.stateNode.containerInfo);break;case 10:oi(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(li(t),t.flags|=128,null):n&t.child.childLanes?FE(e,t,n):(li(t),e=Hn(e,t,n),e!==null?e.sibling:null);li(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(vo(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return QE(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),It(Ht,Ht.current),i)break;return null;case 22:case 23:return t.lanes=0,GE(e,t,n);case 24:oi(t,qt,e.memoizedState.cache)}return Hn(e,t,n)}function KE(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Zt=!0;else{if(!Jd(e,n)&&!(t.flags&128))return Zt=!1,zb(e,t,n);Zt=!!(e.flags&131072)}else Zt=!1,ct&&t.flags&1048576&&Xv(t,nu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")Vd(i)?(e=gr(i,e),t.tag=1,t=Zp(null,t,i,e,n)):(t.tag=0,t=Af(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===vd){t.tag=11,t=Kp(null,t,i,e,n);break t}else if(r===Ed){t.tag=14,t=Yp(null,t,i,e,n);break t}}throw t=Xh(i)||i,Error(P(306,t,""))}}return t;case 0:return Af(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=gr(i,t.pendingProps),Zp(e,t,i,r,n);case 3:t:{if(Xl(t,t.stateNode.containerInfo),e===null)throw Error(P(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,mf(e,t),Ca(t,i,null,n);var a=t.memoizedState;if(i=a.cache,oi(t,qt,i),i!==s.cache&&hf(t,[qt],n,!0),Ia(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Jp(e,t,i,n);break t}else if(i!==r){r=Ye(Error(P(424)),t),Qa(r),t=Jp(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Vt=rn(e.firstChild),_e=t,ct=!0,or=null,un=!0,n=kE(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(_o(),i===r){t=Hn(e,t,n);break t}te(e,t,i,n)}t=t.child}return t;case 26:return Vl(e,t),e===null?(n=py(t.type,null,t.pendingProps,null))?t.memoizedState=n:ct||(n=t.type,e=t.pendingProps,i=_u(Ei.current).createElement(n),i[fe]=t,i[Re]=e,re(i,n,e),$t(i),t.stateNode=i):t.memoizedState=py(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Zh(t),e===null&&ct&&(i=t.stateNode=VT(t.type,t.pendingProps,Ei.current),_e=t,un=!0,r=Vt,Fi(t.type)?(Uf=r,Vt=rn(i.firstChild)):Vt=r),te(e,t,t.pendingProps.children,n),Vl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ct&&((r=i=Vt)&&(i=dw(i,t.type,t.pendingProps,un),i!==null?(t.stateNode=i,_e=t,Vt=rn(i.firstChild),un=!1,r=!0):r=!1),r||fr(t)),Zh(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,xf(r,s)?i=null:a!==null&&xf(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=Bd(e,t,Ob,null,null,n),Ja._currentValue=r),Vl(e,t),te(e,t,i,n),t.child;case 6:return e===null&&ct&&((e=n=Vt)&&(n=mw(n,t.pendingProps,un),n!==null?(t.stateNode=n,_e=t,Vt=null,e=!0):e=!1),e||fr(t)),null;case 13:return FE(e,t,n);case 4:return Xl(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=vs(t,null,i,n):te(e,t,i,n),t.child;case 11:return Kp(e,t,t.type,t.pendingProps,n);case 7:return te(e,t,t.pendingProps,n),t.child;case 8:return te(e,t,t.pendingProps.children,n),t.child;case 12:return te(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,oi(t,t.type,i.value),te(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,dr(t),r=de(r),i=i(r),t.flags|=1,te(e,t,i,n),t.child;case 14:return Yp(e,t,t.type,t.pendingProps,n);case 15:return HE(e,t,t.type,t.pendingProps,n);case 19:return QE(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=hu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Ln(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return GE(e,t,n);case 24:return dr(t),i=de(qt),e===null?(r=Ud(),r===null&&(r=Tt,s=Pd(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},Ld(t),oi(t,qt,r)):(e.lanes&n&&(mf(e,t),Ca(t,null,null,n),Ia()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),oi(t,qt,i)):(i=s.cache,oi(t,qt,i),i!==r.cache&&hf(t,[qt],n,!0))),te(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(P(156,t.tag))}function Cn(e){e.flags|=4}function ty(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!PT(t)){if(t=Ze.current,t!==null&&((at&4194048)===at?dn!==null:(at&62914560)!==at&&!(at&536870912)||t!==dn))throw wa=df,Jv;e.flags|=8192}}function ml(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?vv():536870912,e.lanes|=t,Es|=t)}function ua(e,t){if(!ct)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function jb(e,t,n){var i=t.pendingProps;switch(kd(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(t),null;case 1:return Dt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),zn(qt),ds(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(oa(t)?Cn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Np())),Dt(t),null;case 26:return n=t.memoizedState,e===null?(Cn(t),n!==null?(Dt(t),ty(t,n)):(Dt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Cn(t),Dt(t),ty(t,n)):(Dt(t),t.flags&=-16777217):(e.memoizedProps!==i&&Cn(t),Dt(t),t.flags&=-16777217),null;case 27:$l(t),n=Ei.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Cn(t);else{if(!i){if(t.stateNode===null)throw Error(P(166));return Dt(t),null}e=hn.current,oa(t)?Cp(t):(e=VT(r,i,n),t.stateNode=e,Cn(t))}return Dt(t),null;case 5:if($l(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Cn(t);else{if(!i){if(t.stateNode===null)throw Error(P(166));return Dt(t),null}if(e=hn.current,oa(t))Cp(t);else{switch(r=_u(Ei.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[fe]=t,e[Re]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(re(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Cn(t)}}return Dt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Cn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(P(166));if(e=Ei.current,oa(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=_e,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[fe]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||NT(e.nodeValue,n)),e||fr(t)}else e=_u(e).createTextNode(i),e[fe]=t,t.stateNode=e}return Dt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=oa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(P(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(P(317));r[fe]=t}else _o(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Dt(t),r=!1}else r=Np(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(kn(t),t):(kn(t),null)}if(kn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),ml(t,t.updateQueue),Dt(t),null;case 4:return ds(),e===null&&am(t.stateNode.containerInfo),Dt(t),null;case 10:return zn(t.type),Dt(t),null;case 19:if(Jt(Ht),r=t.memoizedState,r===null)return Dt(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)ua(r,!1);else{if(xt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=lu(e),s!==null){for(t.flags|=128,ua(r,!1),e=s.updateQueue,t.updateQueue=e,ml(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Yv(n,e),n=n.sibling;return It(Ht,Ht.current&1|2),t.child}e=e.sibling}r.tail!==null&&fn()>du&&(t.flags|=128,i=!0,ua(r,!1),t.lanes=4194304)}else{if(!i)if(e=lu(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ml(t,e),ua(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!ct)return Dt(t),null}else 2*fn()-r.renderingStartTime>du&&n!==536870912&&(t.flags|=128,i=!0,ua(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=fn(),t.sibling=null,e=Ht.current,It(Ht,i?e&1|2:e&1),t):(Dt(t),null);case 22:case 23:return kn(t),zd(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Dt(t),t.subtreeFlags&6&&(t.flags|=8192)):Dt(t),n=t.updateQueue,n!==null&&ml(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Jt(lr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),zn(qt),Dt(t),null;case 25:return null;case 30:return null}throw Error(P(156,t.tag))}function Bb(e,t){switch(kd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zn(qt),ds(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return $l(t),null;case 13:if(kn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));_o()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jt(Ht),null;case 4:return ds(),null;case 10:return zn(t.type),null;case 22:case 23:return kn(t),zd(),e!==null&&Jt(lr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return zn(qt),null;case 25:return null;default:return null}}function YE(e,t){switch(kd(t),t.tag){case 3:zn(qt),ds();break;case 26:case 27:case 5:$l(t);break;case 4:ds();break;case 13:kn(t);break;case 19:Jt(Ht);break;case 10:zn(t.type);break;case 22:case 23:kn(t),zd(),e!==null&&Jt(lr);break;case 24:zn(qt)}}function bo(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Et(t,t.return,l)}}function ki(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){Et(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){Et(t,t.return,d)}}function XE(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{eE(t,n)}catch(i){Et(e,e.return,i)}}}function $E(e,t,n){n.props=gr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Et(e,t,i)}}function Na(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){Et(e,t,r)}}function cn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Et(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Et(e,t,r)}else n.current=null}function ZE(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Et(e,e.return,r)}}function Th(e,t,n){try{var i=e.stateNode;lw(i,e.type,n,t),i[Re]=t}catch(r){Et(e,e.return,r)}}function JE(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Fi(e.type)||e.tag===4}function Ah(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||JE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Fi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ac));else if(i!==4&&(i===27&&Fi(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(bf(e,t,n),e=e.sibling;e!==null;)bf(e,t,n),e=e.sibling}function fu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&Fi(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(fu(e,t,n),e=e.sibling;e!==null;)fu(e,t,n),e=e.sibling}function WE(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);re(t,i,n),t[fe]=e,t[Re]=n}catch(s){Et(e,e.return,s)}}var Nn=!1,Pt=!1,Sh=!1,ey=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function qb(e,t){if(e=e.containerInfo,Mf=Au,e=jv(e),Nd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var _;g!==n||r!==0&&g.nodeType!==3||(l=a+r),g!==s||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vf={focusedElem:e,selectionRange:n},Au=!1,Xt=t;Xt!==null;)if(t=Xt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Xt=e;else for(;Xt!==null;){switch(t=Xt,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var N=gr(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(N,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(V){Et(n,n.return,V)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)kf(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":kf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(P(163))}if(e=t.sibling,e!==null){e.return=t.return,Xt=e;break}Xt=t.return}}function tT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ni(e,n),i&4&&bo(5,n);break;case 1:if(ni(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Et(n,n.return,a)}else{var r=gr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Et(n,n.return,a)}}i&64&&XE(n),i&512&&Na(n,n.return);break;case 3:if(ni(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{eE(e,t)}catch(a){Et(n,n.return,a)}}break;case 27:t===null&&i&4&&WE(n);case 26:case 5:ni(e,n),t===null&&i&4&&ZE(n),i&512&&Na(n,n.return);break;case 12:ni(e,n);break;case 13:ni(e,n),i&4&&iT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Zb.bind(null,n),gw(e,n))));break;case 22:if(i=n.memoizedState!==null||Nn,!i){t=t!==null&&t.memoizedState!==null||Pt,r=Nn;var s=Pt;Nn=i,(Pt=t)&&!s?ri(e,n,(n.subtreeFlags&8772)!==0):ni(e,n),Nn=r,Pt=s}break;case 30:break;default:ni(e,n)}}function eT(e){var t=e.alternate;t!==null&&(e.alternate=null,eT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&bd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var wt=null,Ae=!1;function Dn(e,t,n){for(n=n.child;n!==null;)nT(e,t,n),n=n.sibling}function nT(e,t,n){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(fo,n)}catch{}switch(n.tag){case 26:Pt||cn(n,t),Dn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Pt||cn(n,t);var i=wt,r=Ae;Fi(n.type)&&(wt=n.stateNode,Ae=!1),Dn(e,t,n),xa(n.stateNode),wt=i,Ae=r;break;case 5:Pt||cn(n,t);case 6:if(i=wt,r=Ae,wt=null,Dn(e,t,n),wt=i,Ae=r,wt!==null)if(Ae)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(n.stateNode)}catch(s){Et(n,t,s)}else try{wt.removeChild(n.stateNode)}catch(s){Et(n,t,s)}break;case 18:wt!==null&&(Ae?(e=wt,dy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),eo(e)):dy(wt,n.stateNode));break;case 4:i=wt,r=Ae,wt=n.stateNode.containerInfo,Ae=!0,Dn(e,t,n),wt=i,Ae=r;break;case 0:case 11:case 14:case 15:Pt||ki(2,n,t),Pt||ki(4,n,t),Dn(e,t,n);break;case 1:Pt||(cn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&$E(n,t,i)),Dn(e,t,n);break;case 21:Dn(e,t,n);break;case 22:Pt=(i=Pt)||n.memoizedState!==null,Dn(e,t,n),Pt=i;break;default:Dn(e,t,n)}}function iT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{eo(e)}catch(n){Et(t,t.return,n)}}function Hb(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ey),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ey),t;default:throw Error(P(435,e.tag))}}function bh(e,t){var n=Hb(e);t.forEach(function(i){var r=Jb.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Ne(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(Fi(l.type)){wt=l.stateNode,Ae=!1;break t}break;case 5:wt=l.stateNode,Ae=!1;break t;case 3:case 4:wt=l.stateNode.containerInfo,Ae=!0;break t}l=l.return}if(wt===null)throw Error(P(160));nT(s,a,r),wt=null,Ae=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)rT(t,e),t=t.sibling}var tn=null;function rT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ne(t,e),Oe(e),i&4&&(ki(3,e,e.return),bo(3,e),ki(5,e,e.return));break;case 1:Ne(t,e),Oe(e),i&512&&(Pt||n===null||cn(n,n.return)),i&64&&Nn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=tn;if(Ne(t,e),Oe(e),i&512&&(Pt||n===null||cn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[po]||s[fe]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),re(s,i,n),s[fe]=e,$t(s),i=s;break t;case"link":var a=_y("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),re(s,i,n),r.head.appendChild(s);break;case"meta":if(a=_y("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),re(s,i,n),r.head.appendChild(s);break;default:throw Error(P(468,i))}s[fe]=e,$t(s),i=s}e.stateNode=i}else vy(r,e.type,e.stateNode);else e.stateNode=yy(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?vy(r,e.type,e.stateNode):yy(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Th(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ne(t,e),Oe(e),i&512&&(Pt||n===null||cn(n,n.return)),n!==null&&i&4&&Th(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ne(t,e),Oe(e),i&512&&(Pt||n===null||cn(n,n.return)),e.flags&32){r=e.stateNode;try{gs(r,"")}catch(_){Et(e,e.return,_)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,Th(e,r,n!==null?n.memoizedProps:r)),i&1024&&(Sh=!0);break;case 6:if(Ne(t,e),Oe(e),i&4){if(e.stateNode===null)throw Error(P(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){Et(e,e.return,_)}}break;case 3:if(Pl=null,r=tn,tn=vu(t.containerInfo),Ne(t,e),tn=r,Oe(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{eo(t.containerInfo)}catch(_){Et(e,e.return,_)}Sh&&(Sh=!1,sT(e));break;case 4:i=tn,tn=vu(e.stateNode.containerInfo),Ne(t,e),Oe(e),tn=i;break;case 12:Ne(t,e),Oe(e);break;case 13:Ne(t,e),Oe(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(im=fn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,bh(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Nn,d=Pt;if(Nn=h||r,Pt=d||u,Ne(t,e),Pt=d,Nn=h,Oe(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||Nn||Pt||er(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){Et(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(_){Et(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,bh(e,n))));break;case 19:Ne(t,e),Oe(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,bh(e,i)));break;case 30:break;case 21:break;default:Ne(t,e),Oe(e)}}function Oe(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(JE(i)){n=i;break}i=i.return}if(n==null)throw Error(P(160));switch(n.tag){case 27:var r=n.stateNode,s=Ah(e);fu(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(gs(a,""),n.flags&=-33);var l=Ah(e);fu(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Ah(e);bf(e,h,u);break;default:throw Error(P(161))}}catch(d){Et(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;sT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ni(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)tT(e,t.alternate,t),t=t.sibling}function er(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ki(4,t,t.return),er(t);break;case 1:cn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&$E(t,t.return,n),er(t);break;case 27:xa(t.stateNode);case 26:case 5:cn(t,t.return),er(t);break;case 22:t.memoizedState===null&&er(t);break;case 30:er(t);break;default:er(t)}e=e.sibling}}function ri(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:ri(r,s,n),bo(4,s);break;case 1:if(ri(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){Et(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)tE(u[r],l)}catch(h){Et(i,i.return,h)}}n&&a&64&&XE(s),Na(s,s.return);break;case 27:WE(s);case 26:case 5:ri(r,s,n),n&&i===null&&a&4&&ZE(s),Na(s,s.return);break;case 12:ri(r,s,n);break;case 13:ri(r,s,n),n&&a&4&&iT(r,s);break;case 22:s.memoizedState===null&&ri(r,s,n),Na(s,s.return);break;case 30:break;default:ri(r,s,n)}t=t.sibling}}function Wd(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Eo(n))}function tm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Eo(e))}function on(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)aT(e,t,n,i),t=t.sibling}function aT(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:on(e,t,n,i),r&2048&&bo(9,t);break;case 1:on(e,t,n,i);break;case 3:on(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Eo(e)));break;case 12:if(r&2048){on(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){Et(t,t.return,u)}}else on(e,t,n,i);break;case 13:on(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?on(e,t,n,i):Oa(e,t):s._visibility&2?on(e,t,n,i):(s._visibility|=2,Pr(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&Wd(a,t);break;case 24:on(e,t,n,i),r&2048&&tm(t.alternate,t);break;default:on(e,t,n,i)}}function Pr(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:Pr(s,a,l,u,r),bo(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?Pr(s,a,l,u,r):Oa(s,a):(d._visibility|=2,Pr(s,a,l,u,r)),r&&h&2048&&Wd(a.alternate,a);break;case 24:Pr(s,a,l,u,r),r&&h&2048&&tm(a.alternate,a);break;default:Pr(s,a,l,u,r)}t=t.sibling}}function Oa(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Oa(n,i),r&2048&&Wd(i.alternate,i);break;case 24:Oa(n,i),r&2048&&tm(i.alternate,i);break;default:Oa(n,i)}t=t.sibling}}var ga=8192;function Mr(e){if(e.subtreeFlags&ga)for(e=e.child;e!==null;)oT(e),e=e.sibling}function oT(e){switch(e.tag){case 26:Mr(e),e.flags&ga&&e.memoizedState!==null&&Cw(tn,e.memoizedState,e.memoizedProps);break;case 5:Mr(e);break;case 3:case 4:var t=tn;tn=vu(e.stateNode.containerInfo),Mr(e),tn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=ga,ga=16777216,Mr(e),ga=t):Mr(e));break;default:Mr(e)}}function lT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ca(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Xt=i,cT(i,e)}lT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)uT(e),e=e.sibling}function uT(e){switch(e.tag){case 0:case 11:case 15:ca(e),e.flags&2048&&ki(9,e,e.return);break;case 3:ca(e);break;case 12:ca(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,xl(e)):ca(e);break;default:ca(e)}}function xl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Xt=i,cT(i,e)}lT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ki(8,t,t.return),xl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,xl(t));break;default:xl(t)}e=e.sibling}}function cT(e,t){for(;Xt!==null;){var n=Xt;switch(n.tag){case 0:case 11:case 15:ki(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Eo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Xt=i;else t:for(n=e;Xt!==null;){i=Xt;var r=i.sibling,s=i.return;if(eT(i),i===n){Xt=null;break t}if(r!==null){r.return=s,Xt=r;break t}Xt=s}}}var Gb={getCacheForType:function(e){var t=de(qt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Fb=typeof WeakMap=="function"?WeakMap:Map,mt=0,Tt=null,et=null,at=0,dt=0,Me=null,yi=!1,ks=!1,em=!1,Gn=0,xt=0,Pi=0,ur=0,nm=0,$e=0,Es=0,Ma=null,Se=null,wf=!1,im=0,du=1/0,mu=null,Si=null,ne=0,bi=null,Ts=null,ls=0,Rf=0,If=null,hT=null,Va=0,Cf=null;function Ue(){if(mt&2&&at!==0)return at&-at;if(Y.T!==null){var e=ps;return e!==0?e:sm()}return Av()}function fT(){$e===0&&($e=!(at&536870912)||ct?_v():536870912);var e=Ze.current;return e!==null&&(e.flags|=32),$e}function Le(e,t,n){(e===Tt&&(dt===2||dt===9)||e.cancelPendingCommit!==null)&&(As(e,0),_i(e,at,$e,!1)),go(e,n),(!(mt&2)||e!==Tt)&&(e===Tt&&(!(mt&2)&&(ur|=n),xt===4&&_i(e,at,$e,!1)),bn(e))}function dT(e,t,n){if(mt&6)throw Error(P(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||mo(e,t),r=i?Yb(e,t):wh(e,t,!0),s=i;do{if(r===0){ks&&!i&&_i(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Qb(n)){r=wh(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=Ma;var u=l.current.memoizedState.isDehydrated;if(u&&(As(l,a).flags|=256),a=wh(l,a,!1),a!==2){if(em&&!u){l.errorRecoveryDisabledLanes|=s,ur|=s,r=4;break t}s=Se,Se=r,s!==null&&(Se===null?Se=s:Se.push.apply(Se,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){As(e,0),_i(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(P(345));case 4:if((t&4194048)!==t)break;case 6:_i(i,t,$e,!yi);break t;case 2:Se=null;break;case 3:case 5:break;default:throw Error(P(329))}if((t&62914560)===t&&(r=im+300-fn(),10<r)){if(_i(i,t,$e,!yi),Ku(i,0,!0)!==0)break t;i.timeoutHandle=MT(ny.bind(null,i,n,Se,mu,wf,t,$e,ur,Es,yi,s,2,-0,0),r);break t}ny(i,n,Se,mu,wf,t,$e,ur,Es,yi,s,0,-0,0)}}break}while(!0);bn(e)}function ny(e,t,n,i,r,s,a,l,u,h,d,g,m,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(Za={stylesheets:null,count:0,unsuspend:Iw},oT(t),g=Dw(),g!==null)){e.cancelPendingCommit=g(ry.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,_)),_i(e,s,a,!h);return}ry(e,t,s,n,i,r,a,l,u)}function Qb(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ze(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _i(e,t,n,i){t&=~nm,t&=~ur,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-Pe(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&Ev(e,n,t)}function ic(){return mt&6?!0:(wo(0),!1)}function rm(){if(et!==null){if(dt===0)var e=et.return;else e=et,xn=wr=null,Gd(e),os=null,Ya=0,e=et;for(;e!==null;)YE(e.alternate,e),e=e.return;et=null}}function As(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,cw(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),rm(),Tt=e,et=n=Ln(e.current,null),at=t,dt=0,Me=null,yi=!1,ks=mo(e,t),em=!1,Es=$e=nm=ur=Pi=xt=0,Se=Ma=null,wf=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-Pe(i),s=1<<r;t|=e[r],i&=~s}return Gn=t,Zu(),n}function mT(e,t){W=null,Y.H=ou,t===To||t===Wu?(t=xp(),dt=3):t===Jv?(t=xp(),dt=4):dt=t===qE?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Me=t,et===null&&(xt=1,cu(e,Ye(t,e.current)))}function gT(){var e=Y.H;return Y.H=ou,e===null?ou:e}function pT(){var e=Y.A;return Y.A=Gb,e}function Df(){xt=4,yi||(at&4194048)!==at&&Ze.current!==null||(ks=!0),!(Pi&134217727)&&!(ur&134217727)||Tt===null||_i(Tt,at,$e,!1)}function wh(e,t,n){var i=mt;mt|=2;var r=gT(),s=pT();(Tt!==e||at!==t)&&(mu=null,As(e,t)),t=!1;var a=xt;t:do try{if(dt!==0&&et!==null){var l=et,u=Me;switch(dt){case 8:rm(),a=6;break t;case 3:case 2:case 9:case 6:Ze.current===null&&(t=!0);var h=dt;if(dt=0,Me=null,Wr(e,l,u,h),n&&ks){a=0;break t}break;default:h=dt,dt=0,Me=null,Wr(e,l,u,h)}}Kb(),a=xt;break}catch(d){mT(e,d)}while(!0);return t&&e.shellSuspendCounter++,xn=wr=null,mt=i,Y.H=r,Y.A=s,et===null&&(Tt=null,at=0,Zu()),a}function Kb(){for(;et!==null;)yT(et)}function Yb(e,t){var n=mt;mt|=2;var i=gT(),r=pT();Tt!==e||at!==t?(mu=null,du=fn()+500,As(e,t)):ks=mo(e,t);t:do try{if(dt!==0&&et!==null){t=et;var s=Me;e:switch(dt){case 1:dt=0,Me=null,Wr(e,t,s,1);break;case 2:case 9:if(Vp(s)){dt=0,Me=null,iy(t);break}t=function(){dt!==2&&dt!==9||Tt!==e||(dt=7),bn(e)},s.then(t,t);break t;case 3:dt=7;break t;case 4:dt=5;break t;case 7:Vp(s)?(dt=0,Me=null,iy(t)):(dt=0,Me=null,Wr(e,t,s,7));break;case 5:var a=null;switch(et.tag){case 26:a=et.memoizedState;case 5:case 27:var l=et;if(!a||PT(a)){dt=0,Me=null;var u=l.sibling;if(u!==null)et=u;else{var h=l.return;h!==null?(et=h,rc(h)):et=null}break e}}dt=0,Me=null,Wr(e,t,s,5);break;case 6:dt=0,Me=null,Wr(e,t,s,6);break;case 8:rm(),xt=6;break t;default:throw Error(P(462))}}Xb();break}catch(d){mT(e,d)}while(!0);return xn=wr=null,Y.H=i,Y.A=r,mt=n,et!==null?0:(Tt=null,at=0,Zu(),xt)}function Xb(){for(;et!==null&&!yS();)yT(et)}function yT(e){var t=KE(e.alternate,e,Gn);e.memoizedProps=e.pendingProps,t===null?rc(e):et=t}function iy(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=$p(n,t,t.pendingProps,t.type,void 0,at);break;case 11:t=$p(n,t,t.pendingProps,t.type.render,t.ref,at);break;case 5:Gd(t);default:YE(n,t),t=et=Yv(t,Gn),t=KE(n,t,Gn)}e.memoizedProps=e.pendingProps,t===null?rc(e):et=t}function Wr(e,t,n,i){xn=wr=null,Gd(t),os=null,Ya=0;var r=t.return;try{if(Lb(e,r,t,n,at)){xt=1,cu(e,Ye(n,e.current)),et=null;return}}catch(s){if(r!==null)throw et=r,s;xt=1,cu(e,Ye(n,e.current)),et=null;return}t.flags&32768?(ct||i===1?e=!0:ks||at&536870912?e=!1:(yi=e=!0,(i===2||i===9||i===3||i===6)&&(i=Ze.current,i!==null&&i.tag===13&&(i.flags|=16384))),_T(t,e)):rc(t)}function rc(e){var t=e;do{if(t.flags&32768){_T(t,yi);return}e=t.return;var n=jb(t.alternate,t,Gn);if(n!==null){et=n;return}if(t=t.sibling,t!==null){et=t;return}et=t=e}while(t!==null);xt===0&&(xt=5)}function _T(e,t){do{var n=Bb(e.alternate,e);if(n!==null){n.flags&=32767,et=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){et=e;return}et=e=n}while(e!==null);xt=6,et=null}function ry(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do sc();while(ne!==0);if(mt&6)throw Error(P(327));if(t!==null){if(t===e.current)throw Error(P(177));if(s=t.lanes|t.childLanes,s|=Od,IS(e,n,s,a,l,u),e===Tt&&(et=Tt=null,at=0),Ts=t,bi=e,ls=n,Rf=s,If=r,hT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Wb(Zl,function(){return ST(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Y.T,Y.T=null,r=ht.p,ht.p=2,a=mt,mt|=4;try{qb(e,t,n)}finally{mt=a,ht.p=r,Y.T=i}}ne=1,vT(),ET(),TT()}}function vT(){if(ne===1){ne=0;var e=bi,t=Ts,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Y.T,Y.T=null;var i=ht.p;ht.p=2;var r=mt;mt|=4;try{rT(t,e);var s=Vf,a=jv(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&zv(l.ownerDocument.documentElement,l)){if(u!==null&&Nd(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var _=m.getSelection(),N=l.textContent.length,V=Math.min(u.start,N),x=u.end===void 0?V:Math.min(u.end,N);!_.extend&&V>x&&(a=x,x=V,V=a);var b=wp(l,V),E=wp(l,x);if(b&&E&&(_.rangeCount!==1||_.anchorNode!==b.node||_.anchorOffset!==b.offset||_.focusNode!==E.node||_.focusOffset!==E.offset)){var w=g.createRange();w.setStart(b.node,b.offset),_.removeAllRanges(),V>x?(_.addRange(w),_.extend(E.node,E.offset)):(w.setEnd(E.node,E.offset),_.addRange(w))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Au=!!Mf,Vf=Mf=null}finally{mt=r,ht.p=i,Y.T=n}}e.current=t,ne=2}}function ET(){if(ne===2){ne=0;var e=bi,t=Ts,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Y.T,Y.T=null;var i=ht.p;ht.p=2;var r=mt;mt|=4;try{tT(e,t.alternate,t)}finally{mt=r,ht.p=i,Y.T=n}}ne=3}}function TT(){if(ne===4||ne===3){ne=0,_S();var e=bi,t=Ts,n=ls,i=hT;t.subtreeFlags&10256||t.flags&10256?ne=5:(ne=0,Ts=bi=null,AT(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Si=null),Sd(n),t=t.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(fo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Y.T,r=ht.p,ht.p=2,Y.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{Y.T=t,ht.p=r}}ls&3&&sc(),bn(e),r=e.pendingLanes,n&4194090&&r&42?e===Cf?Va++:(Va=0,Cf=e):Va=0,wo(0)}}function AT(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Eo(t)))}function sc(e){return vT(),ET(),TT(),ST()}function ST(){if(ne!==5)return!1;var e=bi,t=Rf;Rf=0;var n=Sd(ls),i=Y.T,r=ht.p;try{ht.p=32>n?32:n,Y.T=null,n=If,If=null;var s=bi,a=ls;if(ne=0,Ts=bi=null,ls=0,mt&6)throw Error(P(331));var l=mt;if(mt|=4,uT(s.current),aT(s,s.current,a,n),mt=l,wo(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(fo,s)}catch{}return!0}finally{ht.p=r,Y.T=i,AT(e,t)}}function sy(e,t,n){t=Ye(n,t),t=Tf(e.stateNode,t,2),e=Ai(e,t,2),e!==null&&(go(e,2),bn(e))}function Et(e,t,n){if(e.tag===3)sy(e,e,n);else for(;t!==null;){if(t.tag===3){sy(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Si===null||!Si.has(i))){e=Ye(n,e),n=jE(2),i=Ai(t,n,2),i!==null&&(BE(n,i,t,e),go(i,2),bn(i));break}}t=t.return}}function Rh(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Fb;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(em=!0,r.add(n),e=$b.bind(null,e,t,n),t.then(e,e))}function $b(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Tt===e&&(at&n)===n&&(xt===4||xt===3&&(at&62914560)===at&&300>fn()-im?!(mt&2)&&As(e,0):nm|=n,Es===at&&(Es=0)),bn(e)}function bT(e,t){t===0&&(t=vv()),e=xs(e,t),e!==null&&(go(e,t),bn(e))}function Zb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bT(e,n)}function Jb(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(P(314))}i!==null&&i.delete(t),bT(e,n)}function Wb(e,t){return Td(e,t)}var gu=null,Ur=null,Nf=!1,pu=!1,Ih=!1,cr=0;function bn(e){e!==Ur&&e.next===null&&(Ur===null?gu=Ur=e:Ur=Ur.next=e),pu=!0,Nf||(Nf=!0,ew())}function wo(e,t){if(!Ih&&pu){Ih=!0;do for(var n=!1,i=gu;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-Pe(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,ay(i,s))}else s=at,s=Ku(i,i===Tt?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||mo(i,s)||(n=!0,ay(i,s));i=i.next}while(n);Ih=!1}}function tw(){wT()}function wT(){pu=Nf=!1;var e=0;cr!==0&&(uw()&&(e=cr),cr=0);for(var t=fn(),n=null,i=gu;i!==null;){var r=i.next,s=RT(i,t);s===0?(i.next=null,n===null?gu=r:n.next=r,r===null&&(Ur=n)):(n=i,(e!==0||s&3)&&(pu=!0)),i=r}wo(e)}function RT(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-Pe(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=RS(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=Tt,n=at,n=Ku(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(dt===2||dt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Wc(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||mo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Wc(i),Sd(n)){case 2:case 8:n=pv;break;case 32:n=Zl;break;case 268435456:n=yv;break;default:n=Zl}return i=IT.bind(null,e),n=Td(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Wc(i),e.callbackPriority=2,e.callbackNode=null,2}function IT(e,t){if(ne!==0&&ne!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(sc()&&e.callbackNode!==n)return null;var i=at;return i=Ku(e,e===Tt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(dT(e,i,t),RT(e,fn()),e.callbackNode!=null&&e.callbackNode===n?IT.bind(null,e):null)}function ay(e,t){if(sc())return null;dT(e,t,!0)}function ew(){hw(function(){mt&6?Td(gv,tw):wT()})}function sm(){return cr===0&&(cr=_v()),cr}function oy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Rl(""+e)}function ly(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function nw(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=oy((r[Re]||null).action),a=i.submitter;a&&(t=(t=a[Re]||null)?oy(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new Yu("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(cr!==0){var u=a?ly(r,a):new FormData(r);vf(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?ly(r,a):new FormData(r),vf(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var Ch=0;Ch<of.length;Ch++){var Dh=of[Ch],iw=Dh.toLowerCase(),rw=Dh[0].toUpperCase()+Dh.slice(1);sn(iw,"on"+rw)}sn(qv,"onAnimationEnd");sn(Hv,"onAnimationIteration");sn(Gv,"onAnimationStart");sn("dblclick","onDoubleClick");sn("focusin","onFocus");sn("focusout","onBlur");sn(Tb,"onTransitionRun");sn(Ab,"onTransitionStart");sn(Sb,"onTransitionCancel");sn(Fv,"onTransitionEnd");ms("onMouseEnter",["mouseout","mouseover"]);ms("onMouseLeave",["mouseout","mouseover"]);ms("onPointerEnter",["pointerout","pointerover"]);ms("onPointerLeave",["pointerout","pointerover"]);Ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xa));function CT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){uu(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){uu(d)}r.currentTarget=null,s=u}}}}function tt(e,t){var n=t[Wh];n===void 0&&(n=t[Wh]=new Set);var i=e+"__bubble";n.has(i)||(DT(t,e,2,!1),n.add(i))}function Nh(e,t,n){var i=0;t&&(i|=4),DT(n,e,i,t)}var gl="_reactListening"+Math.random().toString(36).slice(2);function am(e){if(!e[gl]){e[gl]=!0,Sv.forEach(function(n){n!=="selectionchange"&&(sw.has(n)||Nh(n,!1,e),Nh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gl]||(t[gl]=!0,Nh("selectionchange",!1,t))}}function DT(e,t,n,i){switch(BT(t)){case 2:var r=Mw;break;case 8:r=Vw;break;default:r=cm}n=r.bind(null,t,n,e),r=void 0,!rf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Oh(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=Gr(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}Ov(function(){var h=s,d=Rd(n),g=[];t:{var m=Qv.get(e);if(m!==void 0){var _=Yu,N=e;switch(e){case"keypress":if(Cl(n)===0)break t;case"keydown":case"keyup":_=WS;break;case"focusin":N="focus",_=oh;break;case"focusout":N="blur",_=oh;break;case"beforeblur":case"afterblur":_=oh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=gp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=BS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=nb;break;case qv:case Hv:case Gv:_=GS;break;case Fv:_=rb;break;case"scroll":case"scrollend":_=zS;break;case"wheel":_=ab;break;case"copy":case"cut":case"paste":_=QS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=yp;break;case"toggle":case"beforetoggle":_=lb}var V=(t&4)!==0,x=!V&&(e==="scroll"||e==="scrollend"),b=V?m!==null?m+"Capture":null:m;V=[];for(var E=h,w;E!==null;){var D=E;if(w=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||w===null||b===null||(D=Ha(E,b),D!=null&&V.push($a(E,D,w))),x)break;E=E.return}0<V.length&&(m=new _(m,N,null,n,d),g.push({event:m,listeners:V}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==nf&&(N=n.relatedTarget||n.fromElement)&&(Gr(N)||N[Ms]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(N=n.relatedTarget||n.toElement,_=h,N=N?Gr(N):null,N!==null&&(x=ho(N),V=N.tag,N!==x||V!==5&&V!==27&&V!==6)&&(N=null)):(_=null,N=h),_!==N)){if(V=gp,D="onMouseLeave",b="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(V=yp,D="onPointerLeave",b="onPointerEnter",E="pointer"),x=_==null?m:ma(_),w=N==null?m:ma(N),m=new V(D,E+"leave",_,n,d),m.target=x,m.relatedTarget=w,D=null,Gr(d)===h&&(V=new V(b,E+"enter",N,n,d),V.target=w,V.relatedTarget=x,D=V),x=D,_&&N)e:{for(V=_,b=N,E=0,w=V;w;w=Vr(w))E++;for(w=0,D=b;D;D=Vr(D))w++;for(;0<E-w;)V=Vr(V),E--;for(;0<w-E;)b=Vr(b),w--;for(;E--;){if(V===b||b!==null&&V===b.alternate)break e;V=Vr(V),b=Vr(b)}V=null}else V=null;_!==null&&uy(g,m,_,V,!1),N!==null&&x!==null&&uy(g,x,N,V,!0)}}t:{if(m=h?ma(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var z=Tp;else if(Ep(m))if(Uv)z=_b;else{z=pb;var q=gb}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&wd(h.elementType)&&(z=Tp):z=yb;if(z&&(z=z(e,h))){Pv(g,z,n,d);break t}q&&q(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&ef(m,"number",m.value)}switch(q=h?ma(h):window,e){case"focusin":(Ep(q)||q.contentEditable==="true")&&(Kr=q,sf=h,Sa=null);break;case"focusout":Sa=sf=Kr=null;break;case"mousedown":af=!0;break;case"contextmenu":case"mouseup":case"dragend":af=!1,Rp(g,n,d);break;case"selectionchange":if(Eb)break;case"keydown":case"keyup":Rp(g,n,d)}var T;if(Dd)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else Qr?xv(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Vv&&n.locale!=="ko"&&(Qr||y!=="onCompositionStart"?y==="onCompositionEnd"&&Qr&&(T=Mv()):(pi=d,Id="value"in pi?pi.value:pi.textContent,Qr=!0)),q=yu(h,y),0<q.length&&(y=new pp(y,e,null,n,d),g.push({event:y,listeners:q}),T?y.data=T:(T=kv(n),T!==null&&(y.data=T)))),(T=cb?hb(e,n):fb(e,n))&&(y=yu(h,"onBeforeInput"),0<y.length&&(q=new pp("onBeforeInput","beforeinput",null,n,d),g.push({event:q,listeners:y}),q.data=T)),nw(g,e,h,n,d)}CT(g,t)})}function $a(e,t,n){return{instance:e,listener:t,currentTarget:n}}function yu(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Ha(e,n),r!=null&&i.unshift($a(e,r,s)),r=Ha(e,t),r!=null&&i.push($a(e,r,s))),e.tag===3)return i;e=e.return}return[]}function Vr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function uy(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=Ha(n,s),h!=null&&a.unshift($a(n,h,u))):r||(h=Ha(n,s),h!=null&&a.push($a(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var aw=/\r\n?/g,ow=/\u0000|\uFFFD/g;function cy(e){return(typeof e=="string"?e:""+e).replace(aw,`
`).replace(ow,"")}function NT(e,t){return t=cy(t),cy(e)===t}function ac(){}function yt(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||gs(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&gs(e,""+i);break;case"className":ll(e,"class",i);break;case"tabIndex":ll(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ll(e,n,i);break;case"style":Nv(e,i,s);break;case"data":if(t!=="object"){ll(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Rl(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&yt(e,t,"name",r.name,r,null),yt(e,t,"formEncType",r.formEncType,r,null),yt(e,t,"formMethod",r.formMethod,r,null),yt(e,t,"formTarget",r.formTarget,r,null)):(yt(e,t,"encType",r.encType,r,null),yt(e,t,"method",r.method,r,null),yt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Rl(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=ac);break;case"onScroll":i!=null&&tt("scroll",e);break;case"onScrollEnd":i!=null&&tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(P(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Rl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":tt("beforetoggle",e),tt("toggle",e),wl(e,"popover",i);break;case"xlinkActuate":In(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":In(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":In(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":In(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":In(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":In(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":In(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":In(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":In(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":wl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=US.get(n)||n,wl(e,n,i))}}function Of(e,t,n,i,r,s){switch(n){case"style":Nv(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(P(60));e.innerHTML=n}}break;case"children":typeof i=="string"?gs(e,i):(typeof i=="number"||typeof i=="bigint")&&gs(e,""+i);break;case"onScroll":i!=null&&tt("scroll",e);break;case"onScrollEnd":i!=null&&tt("scrollend",e);break;case"onClick":i!=null&&(e.onclick=ac);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bv.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Re]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):wl(e,n,i)}}}function re(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",e),tt("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(P(137,t));default:yt(e,t,s,a,n,null)}}r&&yt(e,t,"srcSet",n.srcSet,n,null),i&&yt(e,t,"src",n.src,n,null);return;case"input":tt("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(P(137,t));break;default:yt(e,t,i,d,n,null)}}Iv(e,s,l,u,h,a,r,!1),Jl(e);return;case"select":tt("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:yt(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?ns(e,!!i,t,!1):n!=null&&ns(e,!!i,n,!0);return;case"textarea":tt("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(P(91));break;default:yt(e,t,a,l,n,null)}Dv(e,i,r,s),Jl(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:yt(e,t,u,i,n,null)}return;case"dialog":tt("beforetoggle",e),tt("toggle",e),tt("cancel",e),tt("close",e);break;case"iframe":case"object":tt("load",e);break;case"video":case"audio":for(i=0;i<Xa.length;i++)tt(Xa[i],e);break;case"image":tt("error",e),tt("load",e);break;case"details":tt("toggle",e);break;case"embed":case"source":case"link":tt("error",e),tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(P(137,t));default:yt(e,t,h,i,n,null)}return;default:if(wd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&Of(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&yt(e,t,l,i,n,null))}function lw(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||yt(e,t,_,null,i,g)}}for(var m in i){var _=i[m];if(g=n[m],i.hasOwnProperty(m)&&(_!=null||g!=null))switch(m){case"type":s=_;break;case"name":r=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(P(137,t));break;default:_!==g&&yt(e,t,m,_,i,g)}}tf(e,a,l,u,h,d,s,r);return;case"select":_=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(s)||yt(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&yt(e,t,r,s,i,u)}t=l,n=a,i=_,m!=null?ns(e,!!n,m,!1):!!i!=!!n&&(t!=null?ns(e,!!n,t,!0):ns(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:yt(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":_=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(P(91));break;default:r!==s&&yt(e,t,a,r,i,s)}Cv(e,m,_);return;case"option":for(var N in n)if(m=n[N],n.hasOwnProperty(N)&&m!=null&&!i.hasOwnProperty(N))switch(N){case"selected":e.selected=!1;break;default:yt(e,t,N,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:yt(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!=null&&!i.hasOwnProperty(V)&&yt(e,t,V,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(P(137,t));break;default:yt(e,t,h,m,i,_)}return;default:if(wd(t)){for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!==void 0&&!i.hasOwnProperty(x)&&Of(e,t,x,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||Of(e,t,d,m,i,_);return}}for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!=null&&!i.hasOwnProperty(b)&&yt(e,t,b,null,i,m);for(g in i)m=i[g],_=n[g],!i.hasOwnProperty(g)||m===_||m==null&&_==null||yt(e,t,g,m,i,_)}var Mf=null,Vf=null;function _u(e){return e.nodeType===9?e:e.ownerDocument}function hy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function OT(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function xf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mh=null;function uw(){var e=window.event;return e&&e.type==="popstate"?e===Mh?!1:(Mh=e,!0):(Mh=null,!1)}var MT=typeof setTimeout=="function"?setTimeout:void 0,cw=typeof clearTimeout=="function"?clearTimeout:void 0,fy=typeof Promise=="function"?Promise:void 0,hw=typeof queueMicrotask=="function"?queueMicrotask:typeof fy<"u"?function(e){return fy.resolve(null).then(e).catch(fw)}:MT;function fw(e){setTimeout(function(){throw e})}function Fi(e){return e==="head"}function dy(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&xa(a.documentElement),n&2&&xa(a.body),n&4)for(n=a.head,xa(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[po]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),eo(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);eo(t)}function kf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":kf(n),bd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function dw(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[po])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=rn(e.nextSibling),e===null)break}return null}function mw(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=rn(e.nextSibling),e===null))return null;return e}function Pf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function gw(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Uf=null;function my(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function VT(e,t,n){switch(t=_u(n),e){case"html":if(e=t.documentElement,!e)throw Error(P(452));return e;case"head":if(e=t.head,!e)throw Error(P(453));return e;case"body":if(e=t.body,!e)throw Error(P(454));return e;default:throw Error(P(451))}}function xa(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);bd(e)}var Je=new Map,gy=new Set;function vu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $n=ht.d;ht.d={f:pw,r:yw,D:_w,C:vw,L:Ew,m:Tw,X:Sw,S:Aw,M:bw};function pw(){var e=$n.f(),t=ic();return e||t}function yw(e){var t=Vs(e);t!==null&&t.tag===5&&t.type==="form"?RE(t):$n.r(e)}var Ps=typeof document>"u"?null:document;function xT(e,t,n){var i=Ps;if(i&&typeof t=="string"&&t){var r=Ke(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),gy.has(r)||(gy.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),re(t,"link",e),$t(t),i.head.appendChild(t)))}}function _w(e){$n.D(e),xT("dns-prefetch",e,null)}function vw(e,t){$n.C(e,t),xT("preconnect",e,t)}function Ew(e,t,n){$n.L(e,t,n);var i=Ps;if(i&&e&&t){var r='link[rel="preload"][as="'+Ke(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Ke(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Ke(n.imageSizes)+'"]')):r+='[href="'+Ke(e)+'"]';var s=r;switch(t){case"style":s=Ss(e);break;case"script":s=Us(e)}Je.has(s)||(e=bt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Je.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Ro(s))||t==="script"&&i.querySelector(Io(s))||(t=i.createElement("link"),re(t,"link",e),$t(t),i.head.appendChild(t)))}}function Tw(e,t){$n.m(e,t);var n=Ps;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Ke(i)+'"][href="'+Ke(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Us(e)}if(!Je.has(s)&&(e=bt({rel:"modulepreload",href:e},t),Je.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Io(s)))return}i=n.createElement("link"),re(i,"link",e),$t(i),n.head.appendChild(i)}}}function Aw(e,t,n){$n.S(e,t,n);var i=Ps;if(i&&e){var r=es(i).hoistableStyles,s=Ss(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Ro(s)))l.loading=5;else{e=bt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Je.get(s))&&om(e,n);var u=a=i.createElement("link");$t(u),re(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,kl(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function Sw(e,t){$n.X(e,t);var n=Ps;if(n&&e){var i=es(n).hoistableScripts,r=Us(e),s=i.get(r);s||(s=n.querySelector(Io(r)),s||(e=bt({src:e,async:!0},t),(t=Je.get(r))&&lm(e,t),s=n.createElement("script"),$t(s),re(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function bw(e,t){$n.M(e,t);var n=Ps;if(n&&e){var i=es(n).hoistableScripts,r=Us(e),s=i.get(r);s||(s=n.querySelector(Io(r)),s||(e=bt({src:e,async:!0,type:"module"},t),(t=Je.get(r))&&lm(e,t),s=n.createElement("script"),$t(s),re(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function py(e,t,n,i){var r=(r=Ei.current)?vu(r):null;if(!r)throw Error(P(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ss(n.href),n=es(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ss(n.href);var s=es(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(Ro(e)))&&!s._p&&(a.instance=s,a.state.loading=5),Je.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Je.set(e,n),s||ww(r,e,n,a.state))),t&&i===null)throw Error(P(528,""));return a}if(t&&i!==null)throw Error(P(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Us(n),n=es(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(P(444,e))}}function Ss(e){return'href="'+Ke(e)+'"'}function Ro(e){return'link[rel="stylesheet"]['+e+"]"}function kT(e){return bt({},e,{"data-precedence":e.precedence,precedence:null})}function ww(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),re(t,"link",n),$t(t),e.head.appendChild(t))}function Us(e){return'[src="'+Ke(e)+'"]'}function Io(e){return"script[async]"+e}function yy(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Ke(n.href)+'"]');if(i)return t.instance=i,$t(i),i;var r=bt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),$t(i),re(i,"style",r),kl(i,n.precedence,e),t.instance=i;case"stylesheet":r=Ss(n.href);var s=e.querySelector(Ro(r));if(s)return t.state.loading|=4,t.instance=s,$t(s),s;i=kT(n),(r=Je.get(r))&&om(i,r),s=(e.ownerDocument||e).createElement("link"),$t(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),re(s,"link",i),t.state.loading|=4,kl(s,n.precedence,e),t.instance=s;case"script":return s=Us(n.src),(r=e.querySelector(Io(s)))?(t.instance=r,$t(r),r):(i=n,(r=Je.get(s))&&(i=bt({},n),lm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),$t(r),re(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(P(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,kl(i,n.precedence,e));return t.instance}function kl(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function om(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function lm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Pl=null;function _y(e,t,n){if(Pl===null){var i=new Map,r=Pl=new Map;r.set(n,i)}else r=Pl,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[po]||s[fe]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function vy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Rw(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function PT(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Za=null;function Iw(){}function Cw(e,t,n){if(Za===null)throw Error(P(475));var i=Za;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Ss(n.href),s=e.querySelector(Ro(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Eu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,$t(s);return}s=e.ownerDocument||e,n=kT(n),(r=Je.get(r))&&om(n,r),s=s.createElement("link"),$t(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),re(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Eu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function Dw(){if(Za===null)throw Error(P(475));var e=Za;return e.stylesheets&&e.count===0&&Lf(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Lf(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Eu(){if(this.count--,this.count===0){if(this.stylesheets)Lf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Tu=null;function Lf(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Tu=new Map,t.forEach(Nw,e),Tu=null,Eu.call(e))}function Nw(e,t){if(!(t.state.loading&4)){var n=Tu.get(e);if(n)var i=n.get(null);else{n=new Map,Tu.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Eu.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Ja={$$typeof:On,Provider:null,Consumer:null,_currentValue:rr,_currentValue2:rr,_threadCount:0};function Ow(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=th(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=th(0),this.hiddenUpdates=th(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function UT(e,t,n,i,r,s,a,l,u,h,d,g){return e=new Ow(e,t,n,a,l,u,h,g),t=1,s===!0&&(t|=24),s=Ve(3,null,null,t),e.current=s,s.stateNode=e,t=Pd(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},Ld(s),e}function LT(e){return e?(e=$r,e):$r}function zT(e,t,n,i,r,s){r=LT(r),i.context===null?i.context=r:i.pendingContext=r,i=Ti(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Ai(e,i,t),n!==null&&(Le(n,e,t),Ra(n,e,t))}function Ey(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function um(e,t){Ey(e,t),(e=e.alternate)&&Ey(e,t)}function jT(e){if(e.tag===13){var t=xs(e,67108864);t!==null&&Le(t,e,67108864),um(e,67108864)}}var Au=!0;function Mw(e,t,n,i){var r=Y.T;Y.T=null;var s=ht.p;try{ht.p=2,cm(e,t,n,i)}finally{ht.p=s,Y.T=r}}function Vw(e,t,n,i){var r=Y.T;Y.T=null;var s=ht.p;try{ht.p=8,cm(e,t,n,i)}finally{ht.p=s,Y.T=r}}function cm(e,t,n,i){if(Au){var r=zf(i);if(r===null)Oh(e,t,i,Su,n),Ty(e,i);else if(kw(r,e,t,n,i))i.stopPropagation();else if(Ty(e,i),t&4&&-1<xw.indexOf(e)){for(;r!==null;){var s=Vs(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=Wi(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-Pe(a);l.entanglements[1]|=u,a&=~u}bn(s),!(mt&6)&&(du=fn()+500,wo(0))}}break;case 13:l=xs(s,2),l!==null&&Le(l,s,2),ic(),um(s,2)}if(s=zf(i),s===null&&Oh(e,t,i,Su,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Oh(e,t,i,null,n)}}function zf(e){return e=Rd(e),hm(e)}var Su=null;function hm(e){if(Su=null,e=Gr(e),e!==null){var t=ho(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=hv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Su=e,null}function BT(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vS()){case gv:return 2;case pv:return 8;case Zl:case ES:return 32;case yv:return 268435456;default:return 32}default:return 32}}var jf=!1,wi=null,Ri=null,Ii=null,Wa=new Map,to=new Map,ci=[],xw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ty(e,t){switch(e){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":Wa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":to.delete(t.pointerId)}}function ha(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Vs(t),t!==null&&jT(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function kw(e,t,n,i,r){switch(t){case"focusin":return wi=ha(wi,e,t,n,i,r),!0;case"dragenter":return Ri=ha(Ri,e,t,n,i,r),!0;case"mouseover":return Ii=ha(Ii,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Wa.set(s,ha(Wa.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,to.set(s,ha(to.get(s)||null,e,t,n,i,r)),!0}return!1}function qT(e){var t=Gr(e.target);if(t!==null){var n=ho(t);if(n!==null){if(t=n.tag,t===13){if(t=hv(n),t!==null){e.blockedOn=t,CS(e.priority,function(){if(n.tag===13){var i=Ue();i=Ad(i);var r=xs(n,i);r!==null&&Le(r,n,i),um(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ul(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=zf(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);nf=i,n.target.dispatchEvent(i),nf=null}else return t=Vs(n),t!==null&&jT(t),e.blockedOn=n,!1;t.shift()}return!0}function Ay(e,t,n){Ul(e)&&n.delete(t)}function Pw(){jf=!1,wi!==null&&Ul(wi)&&(wi=null),Ri!==null&&Ul(Ri)&&(Ri=null),Ii!==null&&Ul(Ii)&&(Ii=null),Wa.forEach(Ay),to.forEach(Ay)}function pl(e,t){e.blockedOn===t&&(e.blockedOn=null,jf||(jf=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,Pw)))}var yl=null;function Sy(e){yl!==e&&(yl=e,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,function(){yl===e&&(yl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(hm(i||n)===null)continue;break}var s=Vs(n);s!==null&&(e.splice(t,3),t-=3,vf(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function eo(e){function t(u){return pl(u,e)}wi!==null&&pl(wi,e),Ri!==null&&pl(Ri,e),Ii!==null&&pl(Ii,e),Wa.forEach(t),to.forEach(t);for(var n=0;n<ci.length;n++){var i=ci[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<ci.length&&(n=ci[0],n.blockedOn===null);)qT(n),n.blockedOn===null&&ci.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Re]||null;if(typeof s=="function")a||Sy(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Re]||null)l=a.formAction;else if(hm(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Sy(n)}}}function fm(e){this._internalRoot=e}oc.prototype.render=fm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));var n=t.current,i=Ue();zT(n,i,e,t,null,null)};oc.prototype.unmount=fm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zT(e.current,2,null,e,null,null),ic(),t[Ms]=null}};function oc(e){this._internalRoot=e}oc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Av();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ci.length&&t!==0&&t<ci[n].priority;n++);ci.splice(n,0,e),n===0&&qT(e)}};var by=uv.version;if(by!=="19.1.1")throw Error(P(527,by,"19.1.1"));ht.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=fS(t),e=e!==null?fv(e):null,e=e===null?null:e.stateNode,e};var Uw={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_l.isDisabled&&_l.supportsFiber)try{fo=_l.inject(Uw),ke=_l}catch{}}Fu.createRoot=function(e,t){if(!cv(e))throw Error(P(299));var n=!1,i="",r=UE,s=LE,a=zE,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=UT(e,1,!1,null,null,n,i,r,s,a,l,null),e[Ms]=t.current,am(e),new fm(t)};Fu.hydrateRoot=function(e,t,n){if(!cv(e))throw Error(P(299));var i=!1,r="",s=UE,a=LE,l=zE,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=UT(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=LT(null),n=t.current,i=Ue(),i=Ad(i),r=Ti(i),r.callback=null,Ai(n,r,i),n=i,t.current.lanes=n,go(t,n),bn(t),e[Ms]=t.current,am(e),new oc(t)};Fu.version="19.1.1";function HT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HT)}catch(e){console.error(e)}}HT(),iv.exports=Fu;var Lw=iv.exports;const zw=()=>{};var wy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},jw=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},FT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[g],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(GT(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):jw(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const g=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||g==null)throw new Bw;const m=s<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const N=h<<6&192|g;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Bw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qw=function(e){const t=GT(e);return FT.encodeByteArray(t,!0)},bu=function(e){return qw(e).replace(/\./g,"")},QT=function(e){try{return FT.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=()=>Hw().__FIREBASE_DEFAULTS__,Fw=()=>{if(typeof process>"u"||typeof wy>"u")return;const e=wy.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Qw=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&QT(e[1]);return t&&JSON.parse(t)},lc=()=>{try{return zw()||Gw()||Fw()||Qw()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},KT=e=>{var t,n;return(n=(t=lc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},Kw=e=>{const t=KT(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},YT=()=>{var e;return(e=lc())==null?void 0:e.config},XT=e=>{var t;return(t=lc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $T(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[bu(JSON.stringify(n)),bu(JSON.stringify(a)),""].join(".")}const ka={};function $w(){const e={prod:[],emulator:[]};for(const t of Object.keys(ka))ka[t]?e.emulator.push(t):e.prod.push(t);return e}function Zw(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Ry=!1;function ZT(e,t){if(typeof window>"u"||typeof document>"u"||!Ls(window.location.host)||ka[e]===t||ka[e]||Ry)return;ka[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=$w().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Ry=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=Zw(i),_=n("text"),N=document.getElementById(_)||document.createElement("span"),V=n("learnmore"),x=document.getElementById(V)||document.createElement("a"),b=n("preprendIcon"),E=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const w=m.element;l(w),d(x,V);const D=h();u(E,b),w.append(E,N,x,D),document.body.appendChild(w)}s?(N.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(me())}function Ww(){var t;const e=(t=lc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function nR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iR(){const e=me();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function rR(){return!Ww()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sR(){try{return typeof indexedDB=="object"}catch{return!1}}function aR(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="FirebaseError";class Zn extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=oR,Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Co.prototype.create)}}class Co{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?lR(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new Zn(r,l,i)}}function lR(e,t){return e.replace(uR,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const uR=/\{\$([^}]+)}/g;function cR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function pr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(Iy(s)&&Iy(a)){if(!pr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Iy(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function hR(e,t){const n=new fR(e,t);return n.subscribe.bind(n)}class fR{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");dR(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=Vh),r.error===void 0&&(r.error=Vh),r.complete===void 0&&(r.complete=Vh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dR(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Vh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(e){return e&&e._delegate?e._delegate:e}class yr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new Yw;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(pR(t))try{this.getOrInitializeService({instanceIdentifier:nr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=nr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=nr){return this.instances.has(t)}getOptions(t=nr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:gR(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=nr){return this.component?this.component.multipleInstances?t:nr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gR(e){return e===nr?void 0:e}function pR(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new mR(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(nt||(nt={}));const _R={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},vR=nt.INFO,ER={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},TR=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=ER[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class dm{constructor(t){this.name=t,this._logLevel=vR,this._logHandler=TR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in nt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?_R[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...t),this._logHandler(this,nt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...t),this._logHandler(this,nt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...t),this._logHandler(this,nt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...t),this._logHandler(this,nt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...t),this._logHandler(this,nt.ERROR,...t)}}const AR=(e,t)=>t.some(n=>e instanceof n);let Cy,Dy;function SR(){return Cy||(Cy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bR(){return Dy||(Dy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JT=new WeakMap,Bf=new WeakMap,WT=new WeakMap,xh=new WeakMap,mm=new WeakMap;function wR(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(Ci(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&JT.set(n,e)}).catch(()=>{}),mm.set(t,e),t}function RR(e){if(Bf.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});Bf.set(e,t)}let qf={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Bf.get(e);if(t==="objectStoreNames")return e.objectStoreNames||WT.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ci(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function IR(e){qf=e(qf)}function CR(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(kh(this),t,...n);return WT.set(i,t.sort?t.sort():[t]),Ci(i)}:bR().includes(e)?function(...t){return e.apply(kh(this),t),Ci(JT.get(this))}:function(...t){return Ci(e.apply(kh(this),t))}}function DR(e){return typeof e=="function"?CR(e):(e instanceof IDBTransaction&&RR(e),AR(e,SR())?new Proxy(e,qf):e)}function Ci(e){if(e instanceof IDBRequest)return wR(e);if(xh.has(e))return xh.get(e);const t=DR(e);return t!==e&&(xh.set(e,t),mm.set(t,e)),t}const kh=e=>mm.get(e);function NR(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=Ci(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Ci(a.result),u.oldVersion,u.newVersion,Ci(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const OR=["get","getKey","getAll","getAllKeys","count"],MR=["put","add","delete","clear"],Ph=new Map;function Ny(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Ph.get(t))return Ph.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=MR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||OR.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return Ph.set(t,s),s}IR(e=>({...e,get:(t,n,i)=>Ny(t,n)||e.get(t,n,i),has:(t,n)=>!!Ny(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function xR(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Hf="@firebase/app",Oy="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new dm("@firebase/app"),kR="@firebase/app-compat",PR="@firebase/analytics-compat",UR="@firebase/analytics",LR="@firebase/app-check-compat",zR="@firebase/app-check",jR="@firebase/auth",BR="@firebase/auth-compat",qR="@firebase/database",HR="@firebase/data-connect",GR="@firebase/database-compat",FR="@firebase/functions",QR="@firebase/functions-compat",KR="@firebase/installations",YR="@firebase/installations-compat",XR="@firebase/messaging",$R="@firebase/messaging-compat",ZR="@firebase/performance",JR="@firebase/performance-compat",WR="@firebase/remote-config",t2="@firebase/remote-config-compat",e2="@firebase/storage",n2="@firebase/storage-compat",i2="@firebase/firestore",r2="@firebase/ai",s2="@firebase/firestore-compat",a2="firebase",o2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="[DEFAULT]",l2={[Hf]:"fire-core",[kR]:"fire-core-compat",[UR]:"fire-analytics",[PR]:"fire-analytics-compat",[zR]:"fire-app-check",[LR]:"fire-app-check-compat",[jR]:"fire-auth",[BR]:"fire-auth-compat",[qR]:"fire-rtdb",[HR]:"fire-data-connect",[GR]:"fire-rtdb-compat",[FR]:"fire-fn",[QR]:"fire-fn-compat",[KR]:"fire-iid",[YR]:"fire-iid-compat",[XR]:"fire-fcm",[$R]:"fire-fcm-compat",[ZR]:"fire-perf",[JR]:"fire-perf-compat",[WR]:"fire-rc",[t2]:"fire-rc-compat",[e2]:"fire-gcs",[n2]:"fire-gcs-compat",[i2]:"fire-fst",[s2]:"fire-fst-compat",[r2]:"fire-vertex","fire-js":"fire-js",[a2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=new Map,u2=new Map,Ff=new Map;function My(e,t){try{e.container.addComponent(t)}catch(n){Fn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function bs(e){const t=e.name;if(Ff.has(t))return Fn.debug(`There were multiple attempts to register component ${t}.`),!1;Ff.set(t,e);for(const n of wu.values())My(n,e);for(const n of u2.values())My(n,e);return!0}function gm(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function en(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Di=new Co("app","Firebase",c2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=o2;function t0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:Gf,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Di.create("bad-app-name",{appName:String(r)});if(n||(n=YT()),!n)throw Di.create("no-options");const s=wu.get(r);if(s){if(pr(n,s.options)&&pr(i,s.config))return s;throw Di.create("duplicate-app",{appName:r})}const a=new yR(r);for(const u of Ff.values())a.addComponent(u);const l=new h2(n,i,a);return wu.set(r,l),l}function e0(e=Gf){const t=wu.get(e);if(!t&&e===Gf&&YT())return t0();if(!t)throw Di.create("no-app",{appName:e});return t}function Ni(e,t,n){let i=l2[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Fn.warn(a.join(" "));return}bs(new yr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="firebase-heartbeat-database",d2=1,no="firebase-heartbeat-store";let Uh=null;function n0(){return Uh||(Uh=NR(f2,d2,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(no)}catch(n){console.warn(n)}}}}).catch(e=>{throw Di.create("idb-open",{originalErrorMessage:e.message})})),Uh}async function m2(e){try{const n=(await n0()).transaction(no),i=await n.objectStore(no).get(i0(e));return await n.done,i}catch(t){if(t instanceof Zn)Fn.warn(t.message);else{const n=Di.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Fn.warn(n.message)}}}async function Vy(e,t){try{const i=(await n0()).transaction(no,"readwrite");await i.objectStore(no).put(t,i0(e)),await i.done}catch(n){if(n instanceof Zn)Fn.warn(n.message);else{const i=Di.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fn.warn(i.message)}}}function i0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=1024,p2=30;class y2{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new v2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=xy();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>p2){const a=E2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Fn.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xy(),{heartbeatsToSend:i,unsentEntries:r}=_2(this._heartbeatsCache.heartbeats),s=bu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Fn.warn(n),""}}}function xy(){return new Date().toISOString().substring(0,10)}function _2(e,t=g2){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),ky(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ky(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class v2{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sR()?aR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await m2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Vy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Vy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function ky(e){return bu(JSON.stringify({version:2,heartbeats:e})).length}function E2(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(e){bs(new yr("platform-logger",t=>new VR(t),"PRIVATE")),bs(new yr("heartbeat",t=>new y2(t),"PRIVATE")),Ni(Hf,Oy,e),Ni(Hf,Oy,"esm2020"),Ni("fire-js","")}T2("");var A2="firebase",S2="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni(A2,S2,"app");var Py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oi,r0;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,y){function v(){}v.prototype=y.prototype,T.D=y.prototype,T.prototype=new v,T.prototype.constructor=T,T.C=function(A,R,I){for(var S=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)S[Ce-2]=arguments[Ce];return y.prototype[R].apply(A,S)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,y,v){v||(v=0);var A=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)A[R]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(R=0;16>R;++R)A[R]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=T.g[0],v=T.g[1],R=T.g[2];var I=T.g[3],S=y+(I^v&(R^I))+A[0]+3614090360&4294967295;y=v+(S<<7&4294967295|S>>>25),S=I+(R^y&(v^R))+A[1]+3905402710&4294967295,I=y+(S<<12&4294967295|S>>>20),S=R+(v^I&(y^v))+A[2]+606105819&4294967295,R=I+(S<<17&4294967295|S>>>15),S=v+(y^R&(I^y))+A[3]+3250441966&4294967295,v=R+(S<<22&4294967295|S>>>10),S=y+(I^v&(R^I))+A[4]+4118548399&4294967295,y=v+(S<<7&4294967295|S>>>25),S=I+(R^y&(v^R))+A[5]+1200080426&4294967295,I=y+(S<<12&4294967295|S>>>20),S=R+(v^I&(y^v))+A[6]+2821735955&4294967295,R=I+(S<<17&4294967295|S>>>15),S=v+(y^R&(I^y))+A[7]+4249261313&4294967295,v=R+(S<<22&4294967295|S>>>10),S=y+(I^v&(R^I))+A[8]+1770035416&4294967295,y=v+(S<<7&4294967295|S>>>25),S=I+(R^y&(v^R))+A[9]+2336552879&4294967295,I=y+(S<<12&4294967295|S>>>20),S=R+(v^I&(y^v))+A[10]+4294925233&4294967295,R=I+(S<<17&4294967295|S>>>15),S=v+(y^R&(I^y))+A[11]+2304563134&4294967295,v=R+(S<<22&4294967295|S>>>10),S=y+(I^v&(R^I))+A[12]+1804603682&4294967295,y=v+(S<<7&4294967295|S>>>25),S=I+(R^y&(v^R))+A[13]+4254626195&4294967295,I=y+(S<<12&4294967295|S>>>20),S=R+(v^I&(y^v))+A[14]+2792965006&4294967295,R=I+(S<<17&4294967295|S>>>15),S=v+(y^R&(I^y))+A[15]+1236535329&4294967295,v=R+(S<<22&4294967295|S>>>10),S=y+(R^I&(v^R))+A[1]+4129170786&4294967295,y=v+(S<<5&4294967295|S>>>27),S=I+(v^R&(y^v))+A[6]+3225465664&4294967295,I=y+(S<<9&4294967295|S>>>23),S=R+(y^v&(I^y))+A[11]+643717713&4294967295,R=I+(S<<14&4294967295|S>>>18),S=v+(I^y&(R^I))+A[0]+3921069994&4294967295,v=R+(S<<20&4294967295|S>>>12),S=y+(R^I&(v^R))+A[5]+3593408605&4294967295,y=v+(S<<5&4294967295|S>>>27),S=I+(v^R&(y^v))+A[10]+38016083&4294967295,I=y+(S<<9&4294967295|S>>>23),S=R+(y^v&(I^y))+A[15]+3634488961&4294967295,R=I+(S<<14&4294967295|S>>>18),S=v+(I^y&(R^I))+A[4]+3889429448&4294967295,v=R+(S<<20&4294967295|S>>>12),S=y+(R^I&(v^R))+A[9]+568446438&4294967295,y=v+(S<<5&4294967295|S>>>27),S=I+(v^R&(y^v))+A[14]+3275163606&4294967295,I=y+(S<<9&4294967295|S>>>23),S=R+(y^v&(I^y))+A[3]+4107603335&4294967295,R=I+(S<<14&4294967295|S>>>18),S=v+(I^y&(R^I))+A[8]+1163531501&4294967295,v=R+(S<<20&4294967295|S>>>12),S=y+(R^I&(v^R))+A[13]+2850285829&4294967295,y=v+(S<<5&4294967295|S>>>27),S=I+(v^R&(y^v))+A[2]+4243563512&4294967295,I=y+(S<<9&4294967295|S>>>23),S=R+(y^v&(I^y))+A[7]+1735328473&4294967295,R=I+(S<<14&4294967295|S>>>18),S=v+(I^y&(R^I))+A[12]+2368359562&4294967295,v=R+(S<<20&4294967295|S>>>12),S=y+(v^R^I)+A[5]+4294588738&4294967295,y=v+(S<<4&4294967295|S>>>28),S=I+(y^v^R)+A[8]+2272392833&4294967295,I=y+(S<<11&4294967295|S>>>21),S=R+(I^y^v)+A[11]+1839030562&4294967295,R=I+(S<<16&4294967295|S>>>16),S=v+(R^I^y)+A[14]+4259657740&4294967295,v=R+(S<<23&4294967295|S>>>9),S=y+(v^R^I)+A[1]+2763975236&4294967295,y=v+(S<<4&4294967295|S>>>28),S=I+(y^v^R)+A[4]+1272893353&4294967295,I=y+(S<<11&4294967295|S>>>21),S=R+(I^y^v)+A[7]+4139469664&4294967295,R=I+(S<<16&4294967295|S>>>16),S=v+(R^I^y)+A[10]+3200236656&4294967295,v=R+(S<<23&4294967295|S>>>9),S=y+(v^R^I)+A[13]+681279174&4294967295,y=v+(S<<4&4294967295|S>>>28),S=I+(y^v^R)+A[0]+3936430074&4294967295,I=y+(S<<11&4294967295|S>>>21),S=R+(I^y^v)+A[3]+3572445317&4294967295,R=I+(S<<16&4294967295|S>>>16),S=v+(R^I^y)+A[6]+76029189&4294967295,v=R+(S<<23&4294967295|S>>>9),S=y+(v^R^I)+A[9]+3654602809&4294967295,y=v+(S<<4&4294967295|S>>>28),S=I+(y^v^R)+A[12]+3873151461&4294967295,I=y+(S<<11&4294967295|S>>>21),S=R+(I^y^v)+A[15]+530742520&4294967295,R=I+(S<<16&4294967295|S>>>16),S=v+(R^I^y)+A[2]+3299628645&4294967295,v=R+(S<<23&4294967295|S>>>9),S=y+(R^(v|~I))+A[0]+4096336452&4294967295,y=v+(S<<6&4294967295|S>>>26),S=I+(v^(y|~R))+A[7]+1126891415&4294967295,I=y+(S<<10&4294967295|S>>>22),S=R+(y^(I|~v))+A[14]+2878612391&4294967295,R=I+(S<<15&4294967295|S>>>17),S=v+(I^(R|~y))+A[5]+4237533241&4294967295,v=R+(S<<21&4294967295|S>>>11),S=y+(R^(v|~I))+A[12]+1700485571&4294967295,y=v+(S<<6&4294967295|S>>>26),S=I+(v^(y|~R))+A[3]+2399980690&4294967295,I=y+(S<<10&4294967295|S>>>22),S=R+(y^(I|~v))+A[10]+4293915773&4294967295,R=I+(S<<15&4294967295|S>>>17),S=v+(I^(R|~y))+A[1]+2240044497&4294967295,v=R+(S<<21&4294967295|S>>>11),S=y+(R^(v|~I))+A[8]+1873313359&4294967295,y=v+(S<<6&4294967295|S>>>26),S=I+(v^(y|~R))+A[15]+4264355552&4294967295,I=y+(S<<10&4294967295|S>>>22),S=R+(y^(I|~v))+A[6]+2734768916&4294967295,R=I+(S<<15&4294967295|S>>>17),S=v+(I^(R|~y))+A[13]+1309151649&4294967295,v=R+(S<<21&4294967295|S>>>11),S=y+(R^(v|~I))+A[4]+4149444226&4294967295,y=v+(S<<6&4294967295|S>>>26),S=I+(v^(y|~R))+A[11]+3174756917&4294967295,I=y+(S<<10&4294967295|S>>>22),S=R+(y^(I|~v))+A[2]+718787259&4294967295,R=I+(S<<15&4294967295|S>>>17),S=v+(I^(R|~y))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(R+(S<<21&4294967295|S>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+I&4294967295}i.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var v=y-this.blockSize,A=this.B,R=this.h,I=0;I<y;){if(R==0)for(;I<=v;)r(this,T,I),I+=this.blockSize;if(typeof T=="string"){for(;I<y;)if(A[R++]=T.charCodeAt(I++),R==this.blockSize){r(this,A),R=0;break}}else for(;I<y;)if(A[R++]=T[I++],R==this.blockSize){r(this,A),R=0;break}}this.h=R,this.o+=y},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var v=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=v&255,v/=256;for(this.u(T),T=Array(16),y=v=0;4>y;++y)for(var A=0;32>A;A+=8)T[v++]=this.g[y]>>>A&255;return T};function s(T,y){var v=l;return Object.prototype.hasOwnProperty.call(v,T)?v[T]:v[T]=y(T)}function a(T,y){this.h=y;for(var v=[],A=!0,R=T.length-1;0<=R;R--){var I=T[R]|0;A&&I==y||(v[R]=I,A=!1)}this.g=v}var l={};function u(T){return-128<=T&&128>T?s(T,function(y){return new a([y|0],0>y?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return x(h(-T));for(var y=[],v=1,A=0;T>=v;A++)y[A]=T/v|0,v*=4294967296;return new a(y,0)}function d(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return x(d(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(y,8)),A=g,R=0;R<T.length;R+=8){var I=Math.min(8,T.length-R),S=parseInt(T.substring(R,R+I),y);8>I?(I=h(Math.pow(y,I)),A=A.j(I).add(h(S))):(A=A.j(v),A=A.add(h(S)))}return A}var g=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(V(this))return-x(this).m();for(var T=0,y=1,v=0;v<this.g.length;v++){var A=this.i(v);T+=(0<=A?A:4294967296+A)*y,y*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(N(this))return"0";if(V(this))return"-"+x(this).toString(T);for(var y=h(Math.pow(T,6)),v=this,A="";;){var R=D(v,y).g;v=b(v,R.j(y));var I=((0<v.g.length?v.g[0]:v.h)>>>0).toString(T);if(v=R,N(v))return I+A;for(;6>I.length;)I="0"+I;A=I+A}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function N(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function V(T){return T.h==-1}e.l=function(T){return T=b(this,T),V(T)?-1:N(T)?0:1};function x(T){for(var y=T.g.length,v=[],A=0;A<y;A++)v[A]=~T.g[A];return new a(v,~T.h).add(m)}e.abs=function(){return V(this)?x(this):this},e.add=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],A=0,R=0;R<=y;R++){var I=A+(this.i(R)&65535)+(T.i(R)&65535),S=(I>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);A=S>>>16,I&=65535,S&=65535,v[R]=S<<16|I}return new a(v,v[v.length-1]&-2147483648?-1:0)};function b(T,y){return T.add(x(y))}e.j=function(T){if(N(this)||N(T))return g;if(V(this))return V(T)?x(this).j(x(T)):x(x(this).j(T));if(V(T))return x(this.j(x(T)));if(0>this.l(_)&&0>T.l(_))return h(this.m()*T.m());for(var y=this.g.length+T.g.length,v=[],A=0;A<2*y;A++)v[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<T.g.length;R++){var I=this.i(A)>>>16,S=this.i(A)&65535,Ce=T.i(R)>>>16,ut=T.i(R)&65535;v[2*A+2*R]+=S*ut,E(v,2*A+2*R),v[2*A+2*R+1]+=I*ut,E(v,2*A+2*R+1),v[2*A+2*R+1]+=S*Ce,E(v,2*A+2*R+1),v[2*A+2*R+2]+=I*Ce,E(v,2*A+2*R+2)}for(A=0;A<y;A++)v[A]=v[2*A+1]<<16|v[2*A];for(A=y;A<2*y;A++)v[A]=0;return new a(v,0)};function E(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function w(T,y){this.g=T,this.h=y}function D(T,y){if(N(y))throw Error("division by zero");if(N(T))return new w(g,g);if(V(T))return y=D(x(T),y),new w(x(y.g),x(y.h));if(V(y))return y=D(T,x(y)),new w(x(y.g),y.h);if(30<T.g.length){if(V(T)||V(y))throw Error("slowDivide_ only works with positive integers.");for(var v=m,A=y;0>=A.l(T);)v=z(v),A=z(A);var R=q(v,1),I=q(A,1);for(A=q(A,2),v=q(v,2);!N(A);){var S=I.add(A);0>=S.l(T)&&(R=R.add(v),I=S),A=q(A,1),v=q(v,1)}return y=b(T,R.j(y)),new w(R,y)}for(R=g;0<=T.l(y);){for(v=Math.max(1,Math.floor(T.m()/y.m())),A=Math.ceil(Math.log(v)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),I=h(v),S=I.j(y);V(S)||0<S.l(T);)v-=A,I=h(v),S=I.j(y);N(I)&&(I=m),R=R.add(I),T=b(T,S)}return new w(R,T)}e.A=function(T){return D(this,T).h},e.and=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],A=0;A<y;A++)v[A]=this.i(A)&T.i(A);return new a(v,this.h&T.h)},e.or=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],A=0;A<y;A++)v[A]=this.i(A)|T.i(A);return new a(v,this.h|T.h)},e.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],A=0;A<y;A++)v[A]=this.i(A)^T.i(A);return new a(v,this.h^T.h)};function z(T){for(var y=T.g.length+1,v=[],A=0;A<y;A++)v[A]=T.i(A)<<1|T.i(A-1)>>>31;return new a(v,T.h)}function q(T,y){var v=y>>5;y%=32;for(var A=T.g.length-v,R=[],I=0;I<A;I++)R[I]=0<y?T.i(I+v)>>>y|T.i(I+v+1)<<32-y:T.i(I+v);return new a(R,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,r0=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Oi=a}).apply(typeof Py<"u"?Py:typeof self<"u"?self:typeof window<"u"?window:{});var vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var s0,pa,a0,Ll,Qf,o0,l0,u0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof vl=="object"&&vl];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var C=o[p];if(!(C in f))break t;f=f[C]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,p=!1,C={next:function(){if(!p&&f<o.length){var O=f++;return{value:c(O,o[O]),done:!1}}return p=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,p),o.apply(c,C)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function N(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,C,O){for(var j=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)j[vt-2]=arguments[vt];return c.prototype[C].apply(p,j)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function x(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const C=o.length||0,O=p.length||0;o.length=C+O;for(let j=0;j<O;j++)o[C+j]=p[j]}else o.push(p)}}class b{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function w(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var z=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function q(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function T(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(o,c){let f,p;for(let C=1;C<arguments.length;C++){p=arguments[C];for(f in p)o[f]=p[f];for(let O=0;O<v.length;O++)f=v[O],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function R(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function I(o){l.setTimeout(()=>{throw o},0)}function S(){var o=gt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Ce{constructor(){this.h=this.g=null}add(c,f){const p=ut.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var ut=new b(()=>new L,o=>o.reset());class L{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let G,F=!1,gt=new Ce,pt=()=>{const o=l.Promise.resolve(void 0);G=()=>{o.then(an)}};var an=()=>{for(var o;o=S();){try{o.h.call(o.g)}catch(f){I(f)}var c=ut;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}F=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ct(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var Be=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function qe(o,c){if(Ct.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(z){t:{try{D(c.nodeName);var C=!0;break t}catch{}C=!1}C||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Lo[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&qe.aa.h.call(this)}}N(qe,Ct);var Lo={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var zo="closure_listenable_"+(1e6*Math.random()|0),f1=0;function d1(o,c,f,p,C){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=C,this.key=++f1,this.da=this.fa=!1}function jo(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Bo(o){this.src=o,this.g={},this.h=0}Bo.prototype.add=function(o,c,f,p,C){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var j=Nc(o,c,p,C);return-1<j?(c=o[j],f||(c.fa=!1)):(c=new d1(c,this.src,O,!!p,C),c.fa=f,o.push(c)),c};function Dc(o,c){var f=c.type;if(f in o.g){var p=o.g[f],C=Array.prototype.indexOf.call(p,c,void 0),O;(O=0<=C)&&Array.prototype.splice.call(p,C,1),O&&(jo(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Nc(o,c,f,p){for(var C=0;C<o.length;++C){var O=o[C];if(!O.da&&O.listener==c&&O.capture==!!f&&O.ha==p)return C}return-1}var Oc="closure_lm_"+(1e6*Math.random()|0),Mc={};function eg(o,c,f,p,C){if(Array.isArray(c)){for(var O=0;O<c.length;O++)eg(o,c[O],f,p,C);return null}return f=rg(f),o&&o[zo]?o.K(c,f,h(p)?!!p.capture:!1,C):m1(o,c,f,!1,p,C)}function m1(o,c,f,p,C,O){if(!c)throw Error("Invalid event type");var j=h(C)?!!C.capture:!!C,vt=xc(o);if(vt||(o[Oc]=vt=new Bo(o)),f=vt.add(c,f,p,j,O),f.proxy)return f;if(p=g1(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)Be||(C=j),C===void 0&&(C=!1),o.addEventListener(c.toString(),p,C);else if(o.attachEvent)o.attachEvent(ig(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function g1(){function o(f){return c.call(o.src,o.listener,f)}const c=p1;return o}function ng(o,c,f,p,C){if(Array.isArray(c))for(var O=0;O<c.length;O++)ng(o,c[O],f,p,C);else p=h(p)?!!p.capture:!!p,f=rg(f),o&&o[zo]?(o=o.i,c=String(c).toString(),c in o.g&&(O=o.g[c],f=Nc(O,f,p,C),-1<f&&(jo(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete o.g[c],o.h--)))):o&&(o=xc(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Nc(c,f,p,C)),(f=-1<o?c[o]:null)&&Vc(f))}function Vc(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[zo])Dc(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(ig(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=xc(c))?(Dc(f,o),f.h==0&&(f.src=null,c[Oc]=null)):jo(o)}}}function ig(o){return o in Mc?Mc[o]:Mc[o]="on"+o}function p1(o,c){if(o.da)o=!0;else{c=new qe(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&Vc(o),o=f.call(p,c)}return o}function xc(o){return o=o[Oc],o instanceof Bo?o:null}var kc="__closure_events_fn_"+(1e9*Math.random()>>>0);function rg(o){return typeof o=="function"?o:(o[kc]||(o[kc]=function(c){return o.handleEvent(c)}),o[kc])}function ae(){ge.call(this),this.i=new Bo(this),this.M=this,this.F=null}N(ae,ge),ae.prototype[zo]=!0,ae.prototype.removeEventListener=function(o,c,f,p){ng(this,o,c,f,p)};function pe(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new Ct(c,o);else if(c instanceof Ct)c.target=c.target||o;else{var C=c;c=new Ct(p,o),A(c,C)}if(C=!0,f)for(var O=f.length-1;0<=O;O--){var j=c.g=f[O];C=qo(j,p,!0,c)&&C}if(j=c.g=o,C=qo(j,p,!0,c)&&C,C=qo(j,p,!1,c)&&C,f)for(O=0;O<f.length;O++)j=c.g=f[O],C=qo(j,p,!1,c)&&C}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)jo(f[p]);delete o.g[c],o.h--}}this.F=null},ae.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},ae.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function qo(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var C=!0,O=0;O<c.length;++O){var j=c[O];if(j&&!j.da&&j.capture==f){var vt=j.listener,Wt=j.ha||j.src;j.fa&&Dc(o.i,j),C=vt.call(Wt,p)!==!1&&C}}return C&&!p.defaultPrevented}function sg(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function ag(o){o.g=sg(()=>{o.g=null,o.i&&(o.i=!1,ag(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class y1 extends ge{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:ag(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fs(o){ge.call(this),this.h=o,this.g={}}N(Fs,ge);var og=[];function lg(o){q(o.g,function(c,f){this.g.hasOwnProperty(f)&&Vc(c)},o),o.g={}}Fs.prototype.N=function(){Fs.aa.N.call(this),lg(this)},Fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pc=l.JSON.stringify,_1=l.JSON.parse,v1=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Uc(){}Uc.prototype.h=null;function ug(o){return o.h||(o.h=o.i())}function cg(){}var Qs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lc(){Ct.call(this,"d")}N(Lc,Ct);function zc(){Ct.call(this,"c")}N(zc,Ct);var Yi={},hg=null;function Ho(){return hg=hg||new ae}Yi.La="serverreachability";function fg(o){Ct.call(this,Yi.La,o)}N(fg,Ct);function Ks(o){const c=Ho();pe(c,new fg(c))}Yi.STAT_EVENT="statevent";function dg(o,c){Ct.call(this,Yi.STAT_EVENT,o),this.stat=c}N(dg,Ct);function ye(o){const c=Ho();pe(c,new dg(c,o))}Yi.Ma="timingevent";function mg(o,c){Ct.call(this,Yi.Ma,o),this.size=c}N(mg,Ct);function Ys(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Xs(){this.g=!0}Xs.prototype.xa=function(){this.g=!1};function E1(o,c,f,p,C,O){o.info(function(){if(o.g)if(O)for(var j="",vt=O.split("&"),Wt=0;Wt<vt.length;Wt++){var ot=vt[Wt].split("=");if(1<ot.length){var oe=ot[0];ot=ot[1];var le=oe.split("_");j=2<=le.length&&le[1]=="type"?j+(oe+"="+ot+"&"):j+(oe+"=redacted&")}}else j=null;else j=O;return"XMLHTTP REQ ("+p+") [attempt "+C+"]: "+c+`
`+f+`
`+j})}function T1(o,c,f,p,C,O,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+C+"]: "+c+`
`+f+`
`+O+" "+j})}function Cr(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+S1(o,f)+(p?" "+p:"")})}function A1(o,c){o.info(function(){return"TIMEOUT: "+c})}Xs.prototype.info=function(){};function S1(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var C=p[1];if(Array.isArray(C)&&!(1>C.length)){var O=C[0];if(O!="noop"&&O!="stop"&&O!="close")for(var j=1;j<C.length;j++)C[j]=""}}}}return Pc(f)}catch{return c}}var Go={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jc;function Fo(){}N(Fo,Uc),Fo.prototype.g=function(){return new XMLHttpRequest},Fo.prototype.i=function(){return{}},jc=new Fo;function Jn(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new Fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pg}function pg(){this.i=null,this.g="",this.h=!1}var yg={},Bc={};function qc(o,c,f){o.L=1,o.v=Xo(wn(c)),o.m=f,o.P=!0,_g(o,null)}function _g(o,c){o.F=Date.now(),Qo(o),o.A=wn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),Mg(f.i,"t",p),o.C=0,f=o.j.J,o.h=new pg,o.g=$g(o.j,f?c:null,!o.m),0<o.O&&(o.M=new y1(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(og[0]=C.toString()),C=og);for(var O=0;O<C.length;O++){var j=eg(f,C[O],p||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Ks(),E1(o.i,o.u,o.A,o.l,o.R,o.m)}Jn.prototype.ca=function(o){o=o.target;const c=this.M;c&&Rn(o)==3?c.j():this.Y(o)},Jn.prototype.Y=function(o){try{if(o==this.g)t:{const le=Rn(this.g);var c=this.g.Ba();const Or=this.g.Z();if(!(3>le)&&(le!=3||this.g&&(this.h.h||this.g.oa()||zg(this.g)))){this.J||le!=4||c==7||(c==8||0>=Or?Ks(3):Ks(2)),Hc(this);var f=this.g.Z();this.X=f;e:if(vg(this)){var p=zg(this.g);o="";var C=p.length,O=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xi(this),$s(this);var j="";break e}this.h.i=new l.TextDecoder}for(c=0;c<C;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(O&&c==C-1)});p.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,T1(this.i,this.u,this.A,this.l,this.R,le,f),this.o){if(this.T&&!this.K){e:{if(this.g){var vt,Wt=this.g;if((vt=Wt.g?Wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(vt)){var ot=vt;break e}}ot=null}if(f=ot)Cr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gc(this,f);else{this.o=!1,this.s=3,ye(12),Xi(this),$s(this);break t}}if(this.P){f=!0;let We;for(;!this.J&&this.C<j.length;)if(We=b1(this,j),We==Bc){le==4&&(this.s=4,ye(14),f=!1),Cr(this.i,this.l,null,"[Incomplete Response]");break}else if(We==yg){this.s=4,ye(15),Cr(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Cr(this.i,this.l,We,null),Gc(this,We);if(vg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),le!=4||j.length!=0||this.h.h||(this.s=1,ye(16),f=!1),this.o=this.o&&f,!f)Cr(this.i,this.l,j,"[Invalid Chunked Response]"),Xi(this),$s(this);else if(0<j.length&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.ba&&!oe.M&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),$c(oe),oe.M=!0,ye(11))}}else Cr(this.i,this.l,j,null),Gc(this,j);le==4&&Xi(this),this.o&&!this.J&&(le==4?Qg(this.j,this):(this.o=!1,Qo(this)))}else B1(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,ye(12)):(this.s=0,ye(13)),Xi(this),$s(this)}}}catch{}finally{}};function vg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function b1(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?Bc:(f=Number(c.substring(f,p)),isNaN(f)?yg:(p+=1,p+f>c.length?Bc:(c=c.slice(p,p+f),o.C=p+f,c)))}Jn.prototype.cancel=function(){this.J=!0,Xi(this)};function Qo(o){o.S=Date.now()+o.I,Eg(o,o.I)}function Eg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ys(m(o.ba,o),c)}function Hc(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Jn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(A1(this.i,this.A),this.L!=2&&(Ks(),ye(17)),Xi(this),this.s=2,$s(this)):Eg(this,this.S-o)};function $s(o){o.j.G==0||o.J||Qg(o.j,o)}function Xi(o){Hc(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,lg(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Gc(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||Fc(f.h,o))){if(!o.K&&Fc(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var C=p;if(C[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)el(f),Wo(f);else break t;Xc(f),ye(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ys(m(f.Za,f),6e3));if(1>=Sg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Zi(f,11)}else if((o.K||f.g==o)&&el(f),!E(c))for(C=f.Da.g.parse(c),c=0;c<C.length;c++){let ot=C[c];if(f.T=ot[0],ot=ot[1],f.G==2)if(ot[0]=="c"){f.K=ot[1],f.ia=ot[2];const oe=ot[3];oe!=null&&(f.la=oe,f.j.info("VER="+f.la));const le=ot[4];le!=null&&(f.Aa=le,f.j.info("SVER="+f.Aa));const Or=ot[5];Or!=null&&typeof Or=="number"&&0<Or&&(p=1.5*Or,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const We=o.g;if(We){const il=We.g?We.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(il){var O=p.h;O.g||il.indexOf("spdy")==-1&&il.indexOf("quic")==-1&&il.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Qc(O,O.h),O.h=null))}if(p.D){const Zc=We.g?We.g.getResponseHeader("X-HTTP-Session-Id"):null;Zc&&(p.ya=Zc,At(p.I,p.D,Zc))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var j=o;if(p.qa=Xg(p,p.J?p.ia:null,p.W),j.K){bg(p.h,j);var vt=j,Wt=p.L;Wt&&(vt.I=Wt),vt.B&&(Hc(vt),Qo(vt)),p.g=j}else Gg(p);0<f.i.length&&tl(f)}else ot[0]!="stop"&&ot[0]!="close"||Zi(f,7);else f.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?Zi(f,7):Yc(f):ot[0]!="noop"&&f.l&&f.l.ta(ot),f.v=0)}}Ks(4)}catch{}}var w1=class{constructor(o,c){this.g=o,this.map=c}};function Tg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ag(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Sg(o){return o.h?1:o.g?o.g.size:0}function Fc(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Qc(o,c){o.g?o.g.add(c):o.h=c}function bg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Tg.prototype.cancel=function(){if(this.i=wg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function wg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function R1(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function I1(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function Rg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=I1(o),p=R1(o),C=p.length,O=0;O<C;O++)c.call(void 0,p[O],f&&f[O],o)}var Ig=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function C1(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),C=null;if(0<=p){var O=o[f].substring(0,p);C=o[f].substring(p+1)}else O=o[f];c(O,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function $i(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof $i){this.h=o.h,Ko(this,o.j),this.o=o.o,this.g=o.g,Yo(this,o.s),this.l=o.l;var c=o.i,f=new Ws;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Cg(this,f),this.m=o.m}else o&&(c=String(o).match(Ig))?(this.h=!1,Ko(this,c[1]||"",!0),this.o=Zs(c[2]||""),this.g=Zs(c[3]||"",!0),Yo(this,c[4]),this.l=Zs(c[5]||"",!0),Cg(this,c[6]||"",!0),this.m=Zs(c[7]||"")):(this.h=!1,this.i=new Ws(null,this.h))}$i.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Js(c,Dg,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Js(c,Dg,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Js(f,f.charAt(0)=="/"?O1:N1,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Js(f,V1)),o.join("")};function wn(o){return new $i(o)}function Ko(o,c,f){o.j=f?Zs(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Yo(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Cg(o,c,f){c instanceof Ws?(o.i=c,x1(o.i,o.h)):(f||(c=Js(c,M1)),o.i=new Ws(c,o.h))}function At(o,c,f){o.i.set(c,f)}function Xo(o){return At(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Zs(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Js(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,D1),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function D1(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Dg=/[#\/\?@]/g,N1=/[#\?:]/g,O1=/[#\?]/g,M1=/[#\?@]/g,V1=/#/g;function Ws(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Wn(o){o.g||(o.g=new Map,o.h=0,o.i&&C1(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=Ws.prototype,e.add=function(o,c){Wn(this),this.i=null,o=Dr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function Ng(o,c){Wn(o),c=Dr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Og(o,c){return Wn(o),c=Dr(o,c),o.g.has(c)}e.forEach=function(o,c){Wn(this),this.g.forEach(function(f,p){f.forEach(function(C){o.call(c,C,p,this)},this)},this)},e.na=function(){Wn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const C=o[p];for(let O=0;O<C.length;O++)f.push(c[p])}return f},e.V=function(o){Wn(this);let c=[];if(typeof o=="string")Og(this,o)&&(c=c.concat(this.g.get(Dr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return Wn(this),this.i=null,o=Dr(this,o),Og(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Mg(o,c,f){Ng(o,c),0<f.length&&(o.i=null,o.g.set(Dr(o,c),V(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const O=encodeURIComponent(String(p)),j=this.V(p);for(p=0;p<j.length;p++){var C=O;j[p]!==""&&(C+="="+encodeURIComponent(String(j[p]))),o.push(C)}}return this.i=o.join("&")};function Dr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function x1(o,c){c&&!o.j&&(Wn(o),o.i=null,o.g.forEach(function(f,p){var C=p.toLowerCase();p!=C&&(Ng(this,p),Mg(this,C,f))},o)),o.j=c}function k1(o,c){const f=new Xs;if(l.Image){const p=new Image;p.onload=_(ti,f,"TestLoadImage: loaded",!0,c,p),p.onerror=_(ti,f,"TestLoadImage: error",!1,c,p),p.onabort=_(ti,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=_(ti,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function P1(o,c){const f=new Xs,p=new AbortController,C=setTimeout(()=>{p.abort(),ti(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(O=>{clearTimeout(C),O.ok?ti(f,"TestPingServer: ok",!0,c):ti(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(C),ti(f,"TestPingServer: error",!1,c)})}function ti(o,c,f,p,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),p(f)}catch{}}function U1(){this.g=new v1}function L1(o,c,f){const p=f||"";try{Rg(o,function(C,O){let j=C;h(C)&&(j=Pc(C)),c.push(p+O+"="+encodeURIComponent(j))})}catch(C){throw c.push(p+"type="+encodeURIComponent("_badmap")),C}}function $o(o){this.l=o.Ub||null,this.j=o.eb||!1}N($o,Uc),$o.prototype.g=function(){return new Zo(this.l,this.j)},$o.prototype.i=function(o){return function(){return o}}({});function Zo(o,c){ae.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Zo,ae),e=Zo.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,ea(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ta(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ea(this)),this.g&&(this.readyState=3,ea(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vg(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vg(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?ta(this):ea(this),this.readyState==3&&Vg(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,ta(this))},e.Qa=function(o){this.g&&(this.response=o,ta(this))},e.ga=function(){this.g&&ta(this)};function ta(o){o.readyState=4,o.l=null,o.j=null,o.v=null,ea(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function ea(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Zo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function xg(o){let c="";return q(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function Kc(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=xg(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):At(o,c,f))}function Mt(o){ae.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Mt,ae);var z1=/^https?$/i,j1=["POST","PUT"];e=Mt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jc.g(),this.v=this.o?ug(this.o):ug(jc),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(O){kg(this,O);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var C in p)f.set(C,p[C]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const O of p.keys())f.set(O,p.get(O));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),C=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(j1,c,void 0))||p||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,j]of f)this.g.setRequestHeader(O,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lg(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){kg(this,O)}};function kg(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Pg(o),Jo(o)}function Pg(o){o.A||(o.A=!0,pe(o,"complete"),pe(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,pe(this,"complete"),pe(this,"abort"),Jo(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jo(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ug(this):this.bb())},e.bb=function(){Ug(this)};function Ug(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Rn(o)!=4||o.Z()!=2)){if(o.u&&Rn(o)==4)sg(o.Ea,0,o);else if(pe(o,"readystatechange"),Rn(o)==4){o.h=!1;try{const j=o.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=j===0){var C=String(o.D).match(Ig)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),p=!z1.test(C?C.toLowerCase():"")}f=p}if(f)pe(o,"complete"),pe(o,"success");else{o.m=6;try{var O=2<Rn(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",Pg(o)}}finally{Jo(o)}}}}function Jo(o,c){if(o.g){Lg(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||pe(o,"ready");try{f.onreadystatechange=p}catch{}}}function Lg(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Rn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),_1(c)}};function zg(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function B1(o){const c={};o=(o.g&&2<=Rn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(E(o[p]))continue;var f=R(o[p]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=c[C]||[];c[C]=O,O.push(f)}T(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function na(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function jg(o){this.Aa=0,this.i=[],this.j=new Xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=na("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=na("baseRetryDelayMs",5e3,o),this.cb=na("retryDelaySeedMs",1e4,o),this.Wa=na("forwardChannelMaxRetries",2,o),this.wa=na("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Tg(o&&o.concurrentRequestLimit),this.Da=new U1,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=jg.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){ye(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=Xg(this,null,this.W),tl(this)};function Yc(o){if(Bg(o),o.G==3){var c=o.U++,f=wn(o.I);if(At(f,"SID",o.K),At(f,"RID",c),At(f,"TYPE","terminate"),ia(o,f),c=new Jn(o,o.j,c),c.L=2,c.v=Xo(wn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=$g(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Qo(c)}Yg(o)}function Wo(o){o.g&&($c(o),o.g.cancel(),o.g=null)}function Bg(o){Wo(o),o.u&&(l.clearTimeout(o.u),o.u=null),el(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function tl(o){if(!Ag(o.h)&&!o.s){o.s=!0;var c=o.Ga;G||pt(),F||(G(),F=!0),gt.add(c,o),o.B=0}}function q1(o,c){return Sg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ys(m(o.Ga,o,c),Kg(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new Jn(this,this.j,o);let O=this.o;if(this.S&&(O?(O=y(O),A(O,this.S)):O=this.S),this.m!==null||this.O||(C.H=O,O=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=Hg(this,C,c),f=wn(this.I),At(f,"RID",o),At(f,"CVER",22),this.D&&At(f,"X-HTTP-Session-Id",this.D),ia(this,f),O&&(this.O?c="headers="+encodeURIComponent(String(xg(O)))+"&"+c:this.m&&Kc(f,this.m,O)),Qc(this.h,C),this.Ua&&At(f,"TYPE","init"),this.P?(At(f,"$req",c),At(f,"SID","null"),C.T=!0,qc(C,f,null)):qc(C,f,c),this.G=2}}else this.G==3&&(o?qg(this,o):this.i.length==0||Ag(this.h)||qg(this))};function qg(o,c){var f;c?f=c.l:f=o.U++;const p=wn(o.I);At(p,"SID",o.K),At(p,"RID",f),At(p,"AID",o.T),ia(o,p),o.m&&o.o&&Kc(p,o.m,o.o),f=new Jn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Hg(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Qc(o.h,f),qc(f,p,c)}function ia(o,c){o.H&&q(o.H,function(f,p){At(c,p,f)}),o.l&&Rg({},function(f,p){At(c,p,f)})}function Hg(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var C=o.i;let O=-1;for(;;){const j=["count="+f];O==-1?0<f?(O=C[0].g,j.push("ofs="+O)):O=0:j.push("ofs="+O);let vt=!0;for(let Wt=0;Wt<f;Wt++){let ot=C[Wt].g;const oe=C[Wt].map;if(ot-=O,0>ot)O=Math.max(0,C[Wt].g-100),vt=!1;else try{L1(oe,j,"req"+ot+"_")}catch{p&&p(oe)}}if(vt){p=j.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function Gg(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;G||pt(),F||(G(),F=!0),gt.add(c,o),o.v=0}}function Xc(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ys(m(o.Fa,o),Kg(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Fg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ys(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ye(10),Wo(this),Fg(this))};function $c(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Fg(o){o.g=new Jn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=wn(o.qa);At(c,"RID","rpc"),At(c,"SID",o.K),At(c,"AID",o.T),At(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&At(c,"TO",o.ja),At(c,"TYPE","xmlhttp"),ia(o,c),o.m&&o.o&&Kc(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Xo(wn(c)),f.m=null,f.P=!0,_g(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Wo(this),Xc(this),ye(19))};function el(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Qg(o,c){var f=null;if(o.g==c){el(o),$c(o),o.g=null;var p=2}else if(Fc(o.h,c))f=c.D,bg(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var C=o.B;p=Ho(),pe(p,new mg(p,f)),tl(o)}else Gg(o);else if(C=c.s,C==3||C==0&&0<c.X||!(p==1&&q1(o,c)||p==2&&Xc(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),C){case 1:Zi(o,5);break;case 4:Zi(o,10);break;case 3:Zi(o,6);break;default:Zi(o,2)}}}function Kg(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function Zi(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const C=!p;p=new $i(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ko(p,"https"),Xo(p),C?k1(p.toString(),f):P1(p.toString(),f)}else ye(2);o.G=0,o.l&&o.l.sa(c),Yg(o),Bg(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ye(2)):(this.j.info("Failed to ping google.com"),ye(1))};function Yg(o){if(o.G=0,o.ka=[],o.l){const c=wg(o.h);(c.length!=0||o.i.length!=0)&&(x(o.ka,c),x(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Xg(o,c,f){var p=f instanceof $i?wn(f):new $i(f);if(p.g!="")c&&(p.g=c+"."+p.g),Yo(p,p.s);else{var C=l.location;p=C.protocol,c=c?c+"."+C.hostname:C.hostname,C=+C.port;var O=new $i(null);p&&Ko(O,p),c&&(O.g=c),C&&Yo(O,C),f&&(O.l=f),p=O}return f=o.D,c=o.ya,f&&c&&At(p,f,c),At(p,"VER",o.la),ia(o,p),p}function $g(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Mt(new $o({eb:f})):new Mt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zg(){}e=Zg.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function nl(){}nl.prototype.g=function(o,c){return new De(o,c)};function De(o,c){ae.call(this),this.g=new jg(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Nr(this)}N(De,ae),De.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},De.prototype.close=function(){Yc(this.g)},De.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Pc(o),o=f);c.i.push(new w1(c.Ya++,o)),c.G==3&&tl(c)},De.prototype.N=function(){this.g.l=null,delete this.j,Yc(this.g),delete this.g,De.aa.N.call(this)};function Jg(o){Lc.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}N(Jg,Lc);function Wg(){zc.call(this),this.status=1}N(Wg,zc);function Nr(o){this.g=o}N(Nr,Zg),Nr.prototype.ua=function(){pe(this.g,"a")},Nr.prototype.ta=function(o){pe(this.g,new Jg(o))},Nr.prototype.sa=function(o){pe(this.g,new Wg)},Nr.prototype.ra=function(){pe(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,De.prototype.send=De.prototype.o,De.prototype.open=De.prototype.m,De.prototype.close=De.prototype.close,u0=function(){return new nl},l0=function(){return Ho()},o0=Yi,Qf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Go.NO_ERROR=0,Go.TIMEOUT=8,Go.HTTP_ERROR=6,Ll=Go,gg.COMPLETE="complete",a0=gg,cg.EventType=Qs,Qs.OPEN="a",Qs.CLOSE="b",Qs.ERROR="c",Qs.MESSAGE="d",ae.prototype.listen=ae.prototype.K,pa=cg,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,s0=Mt}).apply(typeof vl<"u"?vl:typeof self<"u"?self:typeof window<"u"?window:{});const Uy="@firebase/firestore",Ly="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ce.UNAUTHENTICATED=new ce(null),ce.GOOGLE_CREDENTIALS=new ce("google-credentials-uid"),ce.FIRST_PARTY=new ce("first-party-uid"),ce.MOCK_USER=new ce("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let js="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new dm("@firebase/firestore");function Lr(){return _r.logLevel}function B(e,...t){if(_r.logLevel<=nt.DEBUG){const n=t.map(pm);_r.debug(`Firestore (${js}): ${e}`,...n)}}function Qn(e,...t){if(_r.logLevel<=nt.ERROR){const n=t.map(pm);_r.error(`Firestore (${js}): ${e}`,...n)}}function ws(e,...t){if(_r.logLevel<=nt.WARN){const n=t.map(pm);_r.warn(`Firestore (${js}): ${e}`,...n)}}function pm(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,c0(e,i,n)}function c0(e,t,n){let i=`FIRESTORE (${js}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Qn(i),new Error(i)}function ft(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||c0(t,r,i)}function Z(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Zn{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class b2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(ce.UNAUTHENTICATED))}shutdown(){}}class w2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class R2{constructor(t){this.t=t,this.currentUser=ce.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ft(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mi,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mi)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ft(typeof i.accessToken=="string",31837,{l:i}),new h0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ft(t===null||typeof t=="string",2055,{h:t}),new ce(t)}}class I2{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=ce.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class C2{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new I2(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(ce.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zy{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D2{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,en(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ft(this.o===void 0,3512);const i=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,B("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zy(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=N2(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function it(e,t){return e<t?-1:e>t?1:0}function Kf(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return Lh(r)===Lh(s)?it(r,s):Lh(r)?1:-1}return it(e.length,t.length)}const O2=55296,M2=57343;function Lh(e){const t=e.charCodeAt(0);return t>=O2&&t<=M2}function Rs(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="__name__";class ln{constructor(t,n,i){n===void 0?n=0:n>t.length&&K(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&K(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return ln.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ln?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=ln.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return it(t.length,n.length)}static compareSegments(t,n){const i=ln.isNumericId(t),r=ln.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?ln.extractNumericId(t).compare(ln.extractNumericId(n)):Kf(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Oi.fromString(t.substring(4,t.length-2))}}class Nt extends ln{construct(t,n,i){return new Nt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new H(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Nt(n)}static emptyPath(){return new Nt([])}}const V2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ie extends ln{construct(t,n,i){return new ie(t,n,i)}static isValidIdentifier(t){return V2.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ie.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jy}static keyField(){return new ie([jy])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new H(U.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new H(U.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new H(U.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ie(n)}static emptyPath(){return new ie([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.path=t}static fromPath(t){return new Q(Nt.fromString(t))}static fromName(t){return new Q(Nt.fromString(t).popFirst(5))}static empty(){return new Q(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Nt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Nt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Q(new Nt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(e,t,n){if(!n)throw new H(U.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function k2(e,t,n,i){if(t===!0&&i===!0)throw new H(U.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function By(e){if(!Q.isDocumentKey(e))throw new H(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function f0(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function _m(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":K(12329,{type:typeof e})}function vr(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new H(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_m(e);throw new H(U.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(e,t){const n={typeString:e};return t&&(n.value=t),n}function No(e,t){if(!f0(e))throw new H(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new H(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=-62135596800,Hy=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(t){return St.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*Hy);return new St(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new H(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<qy)throw new H(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new H(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Hy}_compareTo(t){return this.seconds===t.seconds?it(this.nanoseconds,t.nanoseconds):it(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(No(t,St._jsonSchema))return new St(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-qy;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:jt("string",St._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${static fromTimestamp(t){return new $(t)}static min(){return new $(new St(0,0))}static max(){return new $(new St(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=-1;function P2(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=$.fromTimestamp(i===1e9?new St(n+1,0):new St(n,i));return new Ui(r,Q.empty(),t)}function U2(e){return new Ui(e.readTime,e.key,io)}class Ui{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Ui($.min(),Q.empty(),io)}static max(){return new Ui($.max(),Q.empty(),io)}}function L2(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Q.comparator(e.documentKey,t.documentKey),n!==0?n:it(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class j2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bs(e){if(e.code!==U.FAILED_PRECONDITION||e.message!==z2)throw e;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new k((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof k?n:k.resolve(n)}catch(n){return k.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):k.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):k.reject(n)}static resolve(t){return new k((n,i)=>{n(t)})}static reject(t){return new k((n,i)=>{i(t)})}static waitFor(t){return new k((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=k.resolve(!1);for(const i of t)n=n.next(r=>r?k.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new k((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new k((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function B2(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qs(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}uc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=-1;function cc(e){return e==null}function Ru(e){return e===0&&1/e==-1/0}function q2(e){return typeof e=="number"&&Number.isInteger(e)&&!Ru(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="";function H2(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Gy(t)),t=G2(e.get(n),t);return Gy(t)}function G2(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case d0:n+="";break;default:n+=s}}return n}function Gy(e){return e+d0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qi(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function m0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(t,n){this.comparator=t,this.root=n||ee.EMPTY}insert(t,n){return new Ot(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ee.BLACK,null,null))}remove(t){return new Ot(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ee.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new El(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new El(this.root,t,this.comparator,!1)}getReverseIterator(){return new El(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new El(this.root,t,this.comparator,!0)}}class El{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ee{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??ee.RED,this.left=r??ee.EMPTY,this.right=s??ee.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new ee(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ee.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ee.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ee.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ee.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw K(27949);return t+(this.isRed()?0:1)}}ee.EMPTY=null,ee.RED=!0,ee.BLACK=!1;ee.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new ee(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(t){this.comparator=t,this.data=new Ot(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qy(this.data.getIterator())}getIteratorFrom(t){return new Qy(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Qt)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Qt(this.comparator);return n.data=t,n}}class Qy{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t){this.fields=t,t.sort(ie.comparator)}static empty(){return new xe([])}unionWith(t){let n=new Qt(ie.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new xe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Rs(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new g0("Invalid base64 string: "+s):s}}(t);return new se(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new se(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return it(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}se.EMPTY_BYTE_STRING=new se("");const F2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Li(e){if(ft(!!e,39018),typeof e=="string"){let t=0;const n=F2.exec(e);if(ft(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ut(e.seconds),nanos:Ut(e.nanos)}}function Ut(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function zi(e){return typeof e=="string"?se.fromBase64String(e):se.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="server_timestamp",y0="__type__",_0="__previous_value__",v0="__local_write_time__";function Em(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[y0])==null?void 0:i.stringValue)===p0}function hc(e){const t=e.mapValue.fields[_0];return Em(t)?hc(t):t}function ro(e){const t=Li(e.mapValue.fields[v0].timestampValue);return new St(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const Iu="(default)";class so{constructor(t,n){this.projectId=t,this.database=n||Iu}static empty(){return new so("","")}get isDefaultDatabase(){return this.database===Iu}isEqual(t){return t instanceof so&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="__type__",K2="__max__",Tl={mapValue:{}},T0="__vector__",Cu="value";function ji(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Em(e)?4:X2(e)?9007199254740991:Y2(e)?10:11:K(28295,{value:e})}function Tn(e,t){if(e===t)return!0;const n=ji(e);if(n!==ji(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ro(e).isEqual(ro(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Li(r.timestampValue),l=Li(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return zi(r.bytesValue).isEqual(zi(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Ut(r.geoPointValue.latitude)===Ut(s.geoPointValue.latitude)&&Ut(r.geoPointValue.longitude)===Ut(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ut(r.integerValue)===Ut(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Ut(r.doubleValue),l=Ut(s.doubleValue);return a===l?Ru(a)===Ru(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return Rs(e.arrayValue.values||[],t.arrayValue.values||[],Tn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(Fy(a)!==Fy(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Tn(a[u],l[u])))return!1;return!0}(e,t);default:return K(52216,{left:e})}}function ao(e,t){return(e.values||[]).find(n=>Tn(n,t))!==void 0}function Is(e,t){if(e===t)return 0;const n=ji(e),i=ji(t);if(n!==i)return it(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return it(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=Ut(s.integerValue||s.doubleValue),u=Ut(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return Ky(e.timestampValue,t.timestampValue);case 4:return Ky(ro(e),ro(t));case 5:return Kf(e.stringValue,t.stringValue);case 6:return function(s,a){const l=zi(s),u=zi(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=it(l[h],u[h]);if(d!==0)return d}return it(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=it(Ut(s.latitude),Ut(a.latitude));return l!==0?l:it(Ut(s.longitude),Ut(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Yy(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,_,N,V;const l=s.fields||{},u=a.fields||{},h=(m=l[Cu])==null?void 0:m.arrayValue,d=(_=u[Cu])==null?void 0:_.arrayValue,g=it(((N=h==null?void 0:h.values)==null?void 0:N.length)||0,((V=d==null?void 0:d.values)==null?void 0:V.length)||0);return g!==0?g:Yy(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===Tl.mapValue&&a===Tl.mapValue)return 0;if(s===Tl.mapValue)return 1;if(a===Tl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=Kf(u[g],d[g]);if(m!==0)return m;const _=Is(l[u[g]],h[d[g]]);if(_!==0)return _}return it(u.length,d.length)}(e.mapValue,t.mapValue);default:throw K(23264,{he:n})}}function Ky(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return it(e,t);const n=Li(e),i=Li(t),r=it(n.seconds,i.seconds);return r!==0?r:it(n.nanos,i.nanos)}function Yy(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Is(n[r],i[r]);if(s)return s}return it(n.length,i.length)}function Cs(e){return Yf(e)}function Yf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Li(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return zi(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Q.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Yf(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${Yf(n.fields[a])}`;return r+"}"}(e.mapValue):K(61005,{value:e})}function zl(e){switch(ji(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=hc(e);return t?16+zl(t):16;case 5:return 2*e.stringValue.length;case 6:return zi(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+zl(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return Qi(i.fields,(s,a)=>{r+=s.length+zl(a)}),r}(e.mapValue);default:throw K(13486,{value:e})}}function Xf(e){return!!e&&"integerValue"in e}function Tm(e){return!!e&&"arrayValue"in e}function Xy(e){return!!e&&"nullValue"in e}function $y(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function jl(e){return!!e&&"mapValue"in e}function Y2(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[E0])==null?void 0:i.stringValue)===T0}function Pa(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Qi(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Pa(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Pa(e.arrayValue.values[n]);return t}return{...e}}function X2(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===K2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t){this.value=t}static empty(){return new we({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!jl(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Pa(n)}setAll(t){let n=ie.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=Pa(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());jl(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Tn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];jl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){Qi(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new we(Pa(this.value))}}function A0(e){const t=[];return Qi(e.fields,(n,i)=>{const r=new ie([n]);if(jl(i)){const s=A0(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new xe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new he(t,0,$.min(),$.min(),$.min(),we.empty(),0)}static newFoundDocument(t,n,i,r){return new he(t,1,n,$.min(),i,r,0)}static newNoDocument(t,n){return new he(t,2,n,$.min(),$.min(),we.empty(),0)}static newUnknownDocument(t,n){return new he(t,3,n,$.min(),$.min(),we.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual($.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=we.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=we.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof he&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new he(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(t,n){this.position=t,this.inclusive=n}}function Zy(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=Q.comparator(Q.fromName(a.referenceValue),n.key):i=Is(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Jy(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Tn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(t,n="asc"){this.field=t,this.dir=n}}function $2(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{}class Gt extends S0{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new J2(t,n,i):n==="array-contains"?new eI(t,i):n==="in"?new nI(t,i):n==="not-in"?new iI(t,i):n==="array-contains-any"?new rI(t,i):new Gt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new W2(t,i):new tI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Is(n,this.value)):n!==null&&ji(this.value)===ji(n)&&this.matchesComparison(Is(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends S0{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new An(t,n)}matches(t){return b0(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function b0(e){return e.op==="and"}function w0(e){return Z2(e)&&b0(e)}function Z2(e){for(const t of e.filters)if(t instanceof An)return!1;return!0}function $f(e){if(e instanceof Gt)return e.field.canonicalString()+e.op.toString()+Cs(e.value);if(w0(e))return e.filters.map(t=>$f(t)).join(",");{const t=e.filters.map(n=>$f(n)).join(",");return`${e.op}(${t})`}}function R0(e,t){return e instanceof Gt?function(i,r){return r instanceof Gt&&i.op===r.op&&i.field.isEqual(r.field)&&Tn(i.value,r.value)}(e,t):e instanceof An?function(i,r){return r instanceof An&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&R0(a,r.filters[l]),!0):!1}(e,t):void K(19439)}function I0(e){return e instanceof Gt?function(n){return`${n.field.canonicalString()} ${n.op} ${Cs(n.value)}`}(e):e instanceof An?function(n){return n.op.toString()+" {"+n.getFilters().map(I0).join(" ,")+"}"}(e):"Filter"}class J2 extends Gt{constructor(t,n,i){super(t,n,i),this.key=Q.fromName(i.referenceValue)}matches(t){const n=Q.comparator(t.key,this.key);return this.matchesComparison(n)}}class W2 extends Gt{constructor(t,n){super(t,"in",n),this.keys=C0("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class tI extends Gt{constructor(t,n){super(t,"not-in",n),this.keys=C0("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function C0(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class eI extends Gt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Tm(n)&&ao(n.arrayValue,this.value)}}class nI extends Gt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ao(this.value.arrayValue,n)}}class iI extends Gt{constructor(t,n){super(t,"not-in",n)}matches(t){if(ao(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ao(this.value.arrayValue,n)}}class rI extends Gt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Tm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ao(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function Wy(e,t=null,n=[],i=[],r=null,s=null,a=null){return new sI(e,t,n,i,r,s,a)}function Am(e){const t=Z(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>$f(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),cc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Cs(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Cs(i)).join(",")),t.Te=n}return t.Te}function Sm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!$2(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!R0(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Jy(e.startAt,t.startAt)&&Jy(e.endAt,t.endAt)}function Zf(e){return Q.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aI(e,t,n,i,r,s,a,l){return new fc(e,t,n,i,r,s,a,l)}function bm(e){return new fc(e)}function t_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function oI(e){return e.collectionGroup!==null}function Ua(e){const t=Z(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Qt(ie.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Nu(s,i))}),n.has(ie.keyField().canonicalString())||t.Ie.push(new Nu(ie.keyField(),i))}return t.Ie}function mn(e){const t=Z(e);return t.Ee||(t.Ee=lI(t,Ua(e))),t.Ee}function lI(e,t){if(e.limitType==="F")return Wy(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Nu(r.field,s)});const n=e.endAt?new Du(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Du(e.startAt.position,e.startAt.inclusive):null;return Wy(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Jf(e,t,n){return new fc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function dc(e,t){return Sm(mn(e),mn(t))&&e.limitType===t.limitType}function D0(e){return`${Am(mn(e))}|lt:${e.limitType}`}function zr(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>I0(r)).join(", ")}]`),cc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Cs(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Cs(r)).join(",")),`Target(${i})`}(mn(e))}; limitType=${e.limitType})`}function mc(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of Ua(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=Zy(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,Ua(i),r)||i.endAt&&!function(a,l,u){const h=Zy(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,Ua(i),r))}(e,t)}function uI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function N0(e){return(t,n)=>{let i=!1;for(const r of Ua(e)){const s=cI(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function cI(e,t,n){const i=e.field.isKeyField()?Q.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Is(u,h):K(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return K(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Qi(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return m0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=new Ot(Q.comparator);function Kn(){return hI}const O0=new Ot(Q.comparator);function ya(...e){let t=O0;for(const n of e)t=t.insert(n.key,n);return t}function M0(e){let t=O0;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function ir(){return La()}function V0(){return La()}function La(){return new Rr(e=>e.toString(),(e,t)=>e.isEqual(t))}const fI=new Ot(Q.comparator),dI=new Qt(Q.comparator);function rt(...e){let t=dI;for(const n of e)t=t.add(n);return t}const mI=new Qt(it);function gI(){return mI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ru(t)?"-0":t}}function x0(e){return{integerValue:""+e}}function pI(e,t){return q2(t)?x0(t):wm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(){this._=void 0}}function yI(e,t,n){return e instanceof Ou?function(r,s){const a={fields:{[y0]:{stringValue:p0},[v0]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Em(s)&&(s=hc(s)),s&&(a.fields[_0]=s),{mapValue:a}}(n,t):e instanceof oo?P0(e,t):e instanceof lo?U0(e,t):function(r,s){const a=k0(r,s),l=e_(a)+e_(r.Ae);return Xf(a)&&Xf(r.Ae)?x0(l):wm(r.serializer,l)}(e,t)}function _I(e,t,n){return e instanceof oo?P0(e,t):e instanceof lo?U0(e,t):n}function k0(e,t){return e instanceof Mu?function(i){return Xf(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class Ou extends gc{}class oo extends gc{constructor(t){super(),this.elements=t}}function P0(e,t){const n=L0(t);for(const i of e.elements)n.some(r=>Tn(r,i))||n.push(i);return{arrayValue:{values:n}}}class lo extends gc{constructor(t){super(),this.elements=t}}function U0(e,t){let n=L0(t);for(const i of e.elements)n=n.filter(r=>!Tn(r,i));return{arrayValue:{values:n}}}class Mu extends gc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function e_(e){return Ut(e.integerValue||e.doubleValue)}function L0(e){return Tm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function vI(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof oo&&r instanceof oo||i instanceof lo&&r instanceof lo?Rs(i.elements,r.elements,Tn):i instanceof Mu&&r instanceof Mu?Tn(i.Ae,r.Ae):i instanceof Ou&&r instanceof Ou}(e.transform,t.transform)}class EI{constructor(t,n){this.version=t,this.transformResults=n}}class gn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new gn}static exists(t){return new gn(void 0,t)}static updateTime(t){return new gn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Bl(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class pc{}function z0(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new B0(e.key,gn.none()):new Oo(e.key,e.data,gn.none());{const n=e.data,i=we.empty();let r=new Qt(ie.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Ki(e.key,i,new xe(r.toArray()),gn.none())}}function TI(e,t,n){e instanceof Oo?function(r,s,a){const l=r.value.clone(),u=i_(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Ki?function(r,s,a){if(!Bl(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=i_(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(j0(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function za(e,t,n,i){return e instanceof Oo?function(s,a,l,u){if(!Bl(s.precondition,a))return l;const h=s.value.clone(),d=r_(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof Ki?function(s,a,l,u){if(!Bl(s.precondition,a))return l;const h=r_(s.fieldTransforms,u,a),d=a.data;return d.setAll(j0(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(s,a,l){return Bl(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function AI(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=k0(i.transform,r||null);s!=null&&(n===null&&(n=we.empty()),n.set(i.field,s))}return n||null}function n_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Rs(i,r,(s,a)=>vI(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Oo extends pc{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ki extends pc{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function j0(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function i_(e,t,n){const i=new Map;ft(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,_I(a,l,n[r]))}return i}function r_(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,yI(s,a,t))}return i}class B0 extends pc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SI extends pc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&TI(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=za(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=za(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=V0();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=z0(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument($.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),rt())}isEqual(t){return this.batchId===t.batchId&&Rs(this.mutations,t.mutations,(n,i)=>n_(n,i))&&Rs(this.baseMutations,t.baseMutations,(n,i)=>n_(n,i))}}class Rm{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){ft(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return fI}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Rm(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,st;function II(e){switch(e){case U.OK:return K(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return K(15467,{code:e})}}function q0(e){if(e===void 0)return Qn("GRPC error has no .code"),U.UNKNOWN;switch(e){case Lt.OK:return U.OK;case Lt.CANCELLED:return U.CANCELLED;case Lt.UNKNOWN:return U.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return U.INTERNAL;case Lt.UNAVAILABLE:return U.UNAVAILABLE;case Lt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Lt.NOT_FOUND:return U.NOT_FOUND;case Lt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Lt.ABORTED:return U.ABORTED;case Lt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Lt.DATA_LOSS:return U.DATA_LOSS;default:return K(39323,{code:e})}}(st=Lt||(Lt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=new Oi([4294967295,4294967295],0);function s_(e){const t=CI().encode(e),n=new r0;return n.update(t),new Uint8Array(n.digest())}function a_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Oi([n,i],0),new Oi([r,s],0)]}class Im{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new _a(`Invalid padding: ${n}`);if(i<0)throw new _a(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new _a(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new _a(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Oi.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(Oi.fromNumber(i)));return r.compare(DI)===1&&(r=new Oi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=s_(t),[i,r]=a_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new Im(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=s_(t),[i,r]=a_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class _a extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,Mo.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new yc($.min(),r,new Ot(it),Kn(),rt())}}class Mo{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Mo(i,n,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class H0{constructor(t,n){this.targetId=t,this.Ce=n}}class G0{constructor(t,n,i=se.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class o_{constructor(){this.ve=0,this.Fe=l_(),this.Me=se.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=rt(),n=rt(),i=rt();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:K(38017,{changeType:s})}}),new Mo(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=l_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class NI{constructor(t){this.Ge=t,this.ze=new Map,this.je=Kn(),this.Je=Al(),this.He=Al(),this.Ye=new Ot(it)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:K(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(Zf(s))if(i===0){const a=new Q(s.path);this.et(n,a,he.newNoDocument(a,$.min()))}else ft(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=zi(i).toUint8Array()}catch(u){if(u instanceof g0)return ws("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Im(a,r,s)}catch(u){return ws(u instanceof _a?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&Zf(l.target)){const u=new Q(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,he.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=rt();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new yc(t,n,this.Ye,this.je,i);return this.je=Kn(),this.Je=Al(),this.He=Al(),this.Ye=new Ot(it),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new o_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Qt(it),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Qt(it),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||B("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new o_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Al(){return new Ot(Q.comparator)}function l_(){return new Ot(Q.comparator)}const OI={asc:"ASCENDING",desc:"DESCENDING"},MI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VI={and:"AND",or:"OR"};class xI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Wf(e,t){return e.useProto3Json||cc(t)?t:{value:t}}function Vu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function F0(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function kI(e,t){return Vu(e,t.toTimestamp())}function pn(e){return ft(!!e,49232),$.fromTimestamp(function(n){const i=Li(n);return new St(i.seconds,i.nanos)}(e))}function Cm(e,t){return td(e,t).canonicalString()}function td(e,t){const n=function(r){return new Nt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Q0(e){const t=Nt.fromString(e);return ft(Z0(t),10190,{key:t.toString()}),t}function ed(e,t){return Cm(e.databaseId,t.path)}function zh(e,t){const n=Q0(t);if(n.get(1)!==e.databaseId.projectId)throw new H(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new H(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Q(Y0(n))}function K0(e,t){return Cm(e.databaseId,t)}function PI(e){const t=Q0(e);return t.length===4?Nt.emptyPath():Y0(t)}function nd(e){return new Nt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Y0(e){return ft(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function u_(e,t,n){return{name:ed(e,t),fields:n.value.mapValue.fields}}function UI(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:K(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(ft(d===void 0||typeof d=="string",58123),se.fromBase64String(d||"")):(ft(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),se.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?U.UNKNOWN:q0(h.code);return new H(d,h.message||"")}(a);n=new G0(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=zh(e,i.document.name),s=pn(i.document.updateTime),a=i.document.createTime?pn(i.document.createTime):$.min(),l=new we({mapValue:{fields:i.document.fields}}),u=he.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new ql(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=zh(e,i.document),s=i.readTime?pn(i.readTime):$.min(),a=he.newNoDocument(r,s),l=i.removedTargetIds||[];n=new ql([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=zh(e,i.document),s=i.removedTargetIds||[];n=new ql([],s,r,null)}else{if(!("filter"in t))return K(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new RI(r,s),l=i.targetId;n=new H0(l,a)}}return n}function LI(e,t){let n;if(t instanceof Oo)n={update:u_(e,t.key,t.value)};else if(t instanceof B0)n={delete:ed(e,t.key)};else if(t instanceof Ki)n={update:u_(e,t.key,t.data),updateMask:KI(t.fieldMask)};else{if(!(t instanceof SI))return K(16599,{Vt:t.type});n={verify:ed(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Ou)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof oo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof lo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Mu)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw K(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:kI(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K(27497)}(e,t.precondition)),n}function zI(e,t){return e&&e.length>0?(ft(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?pn(r.updateTime):pn(s);return a.isEqual($.min())&&(a=pn(s)),new EI(a,r.transformResults||[])}(n,t))):[]}function jI(e,t){return{documents:[K0(e,t.path)]}}function BI(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=K0(e,r);const s=function(h){if(h.length!==0)return $0(An.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:jr(m.field),direction:GI(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Wf(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function qI(e){let t=PI(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ft(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(g){const m=X0(g);return m instanceof An&&w0(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(N){return new Nu(Br(N.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,cc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,_=g.values||[];return new Du(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,_=g.values||[];return new Du(_,m)}(n.endAt)),aI(t,r,a,s,l,"F",u,h)}function HI(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function X0(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Br(n.unaryFilter.field);return Gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Br(n.unaryFilter.field);return Gt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Br(n.unaryFilter.field);return Gt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Br(n.unaryFilter.field);return Gt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(e):e.fieldFilter!==void 0?function(n){return Gt.create(Br(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return An.create(n.compositeFilter.filters.map(i=>X0(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(e):K(30097,{filter:e})}function GI(e){return OI[e]}function FI(e){return MI[e]}function QI(e){return VI[e]}function jr(e){return{fieldPath:e.canonicalString()}}function Br(e){return ie.fromServerFormat(e.fieldPath)}function $0(e){return e instanceof Gt?function(n){if(n.op==="=="){if($y(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NAN"}};if(Xy(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($y(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NOT_NAN"}};if(Xy(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jr(n.field),op:FI(n.op),value:n.value}}}(e):e instanceof An?function(n){const i=n.getFilters().map(r=>$0(r));return i.length===1?i[0]:{compositeFilter:{op:QI(n.op),filters:i}}}(e):K(54877,{filter:e})}function KI(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Z0(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(t,n,i,r,s=$.min(),a=$.min(),l=se.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new vi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(t){this.yt=t}}function XI(e){const t=qI({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Jf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.Cn=new ZI}addToCollectionParentIndex(t,n){return this.Cn.add(n),k.resolve()}getCollectionParents(t,n){return k.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return k.resolve()}deleteFieldIndex(t,n){return k.resolve()}deleteAllFieldIndexes(t){return k.resolve()}createTargetIndexes(t,n){return k.resolve()}getDocumentsMatchingTarget(t,n){return k.resolve(null)}getIndexType(t,n){return k.resolve(0)}getFieldIndexes(t,n){return k.resolve([])}getNextCollectionGroupToUpdate(t){return k.resolve(null)}getMinOffset(t,n){return k.resolve(Ui.min())}getMinOffsetFromCollectionGroup(t,n){return k.resolve(Ui.min())}updateCollectionGroup(t,n,i){return k.resolve()}updateIndexEntries(t,n){return k.resolve()}}class ZI{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new Qt(Nt.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Qt(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},J0=41943040;class be{static withCacheSize(t){return new be(t,be.DEFAULT_COLLECTION_PERCENTILE,be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */be.DEFAULT_COLLECTION_PERCENTILE=10,be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,be.DEFAULT=new be(J0,be.DEFAULT_COLLECTION_PERCENTILE,be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),be.DISABLED=new be(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ds(0)}static cr(){return new Ds(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="LruGarbageCollector",JI=1048576;function f_([e,t],[n,i]){const r=it(e,n);return r===0?it(t,i):r}class WI{constructor(t){this.Ir=t,this.buffer=new Qt(f_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();f_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class tC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){B(h_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qs(n)?B(h_,"Ignoring IndexedDB error during garbage collection: ",n):await Bs(n)}await this.Vr(3e5)})}}class eC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return k.resolve(uc.ce);const i=new WI(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(c_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),c_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(t,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),Lr()<=nt.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function nC(e,t){return new eC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.changes=new Rr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,he.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?k.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&za(i.mutation,r,xe.empty(),St.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,rt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=rt()){const r=ir();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=ya();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=ir();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,rt()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=Kn();const a=La(),l=function(){return La()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof Ki)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),za(d.mutation,h,d.mutation.getFieldMask(),St.now())):a.set(h.key,xe.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new rC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=La();let r=new Ot((a,l)=>a-l),s=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||xe.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(r.get(l.batchId)||rt()).add(u);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=V0();d.forEach(m=>{if(!s.has(m)){const _=z0(n.get(m),i.get(m));_!==null&&g.set(m,_),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return k.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):oI(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):k.resolve(ir());let l=io,u=s;return a.next(h=>k.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?k.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,rt())).next(d=>({batchId:l,changes:M0(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Q(n)).next(i=>{let r=ya();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=ya();return this.indexManager.getCollectionParents(t,s).next(l=>k.forEach(l,u=>{const h=function(g,m){return new fc(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,he.newInvalidDocument(d)))});let l=ya();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&za(d.mutation,h,xe.empty(),St.now()),mc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return k.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:pn(r.createTime)}}(n)),k.resolve()}getNamedQuery(t,n){return k.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:XI(r.bundledQuery),readTime:pn(r.readTime)}}(n)),k.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.overlays=new Ot(Q.comparator),this.qr=new Map}getOverlay(t,n){return k.resolve(this.overlays.get(n))}getOverlays(t,n){const i=ir();return k.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),k.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),k.resolve()}getOverlaysForCollection(t,n,i){const r=ir(),s=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return k.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Ot((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=ir(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=ir(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return k.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new wI(n,i));let s=this.qr.get(n);s===void 0&&(s=rt(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.sessionToken=se.EMPTY_BYTE_STRING}getSessionToken(t){return k.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,k.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.Qr=new Qt(Yt.$r),this.Ur=new Qt(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new Yt(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new Yt(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new Q(new Nt([])),i=new Yt(n,t),r=new Yt(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Q(new Nt([])),i=new Yt(n,t),r=new Yt(n,t+1);let s=rt();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new Yt(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Yt{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Q.comparator(t.key,n.key)||it(t.Yr,n.Yr)}static Kr(t,n){return it(t.Yr,n.Yr)||Q.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Qt(Yt.$r)}checkEmpty(t){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new bI(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new Yt(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return k.resolve(a)}lookupMutationBatch(t,n){return k.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?vm:this.tr-1)}getAllMutationBatches(t){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Yt(n,0),r=new Yt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Qt(it);return n.forEach(r=>{const s=new Yt(r,0),a=new Yt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),k.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;Q.isDocumentKey(s)||(s=s.child(""));const a=new Yt(new Q(s),0);let l=new Qt(it);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),k.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){ft(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return k.forEach(n.mutations,r=>{const s=new Yt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new Yt(n,0),r=this.Zr.firstAfterOrEqual(i);return k.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,k.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(t){this.ri=t,this.docs=function(){return new Ot(Q.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return k.resolve(i?i.document.mutableCopy():he.newInvalidDocument(n))}getEntries(t,n){let i=Kn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():he.newInvalidDocument(r))}),k.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=Kn();const a=n.path,l=new Q(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||L2(U2(d),i)<=0||(r.has(d.key)||mc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(t,n,i,r){K(9500)}ii(t,n){return k.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new hC(this)}getSize(t){return k.resolve(this.size)}}class hC extends iC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),k.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(t){this.persistence=t,this.si=new Rr(n=>Am(n),Sm),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.oi=0,this._i=new Dm,this.targetCount=0,this.ai=Ds.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),k.resolve()}getLastRemoteSnapshotVersion(t){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return k.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),k.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Ds(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,k.resolve()}updateTargetData(t,n){return this.Pr(n),k.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),k.waitFor(s).next(()=>r)}getTargetCount(t){return k.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return k.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),k.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),k.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),k.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return k.resolve(i)}containsKey(t,n){return k.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(t,n){this.ui={},this.overlays={},this.ci=new uc(0),this.li=!1,this.li=!0,this.hi=new lC,this.referenceDelegate=t(this),this.Pi=new fC(this),this.indexManager=new $I,this.remoteDocumentCache=function(r){return new cC(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new YI(n),this.Ii=new aC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new oC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new uC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){B("MemoryPersistence","Starting transaction:",t);const r=new dC(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return k.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class dC extends j2{constructor(t){super(),this.currentSequenceNumber=t}}class Nm{constructor(t){this.persistence=t,this.Ri=new Dm,this.Vi=null}static mi(t){return new Nm(t)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),k.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),k.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),k.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.fi,i=>{const r=Q.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,$.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return k.or([()=>k.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class xu{constructor(t,n){this.persistence=t,this.pi=new Rr(i=>H2(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=nC(this,n)}static mi(t,n){return new xu(t,n)}Ei(){}di(t){return k.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return k.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?k.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,$.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),k.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),k.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),k.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),k.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=zl(t.data.value)),n}br(t,n,i){return k.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return k.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=rt(),r=rt();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Om(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return rR()?8:B2(me())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new mC;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(Lr()<=nt.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",zr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),k.resolve()):(Lr()<=nt.DEBUG&&B("QueryEngine","Query:",zr(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Lr()<=nt.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",zr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,mn(n))):k.resolve())}ys(t,n){if(t_(n))return k.resolve(null);let i=mn(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Jf(n,null,"F"),i=mn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=rt(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,Jf(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return t_(n)||r.isEqual($.min())?k.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?k.resolve(null):(Lr()<=nt.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zr(n)),this.vs(t,a,n,P2(r,io)).next(l=>l))})}Ds(t,n){let i=new Qt(N0(t));return n.forEach((r,s)=>{mc(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return Lr()<=nt.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",zr(n)),this.ps.getDocumentsMatchingQuery(t,n,Ui.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="LocalStore",pC=3e8;class yC{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Ot(it),this.xs=new Rr(s=>Am(s),Sm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new sC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function _C(e,t,n,i){return new yC(e,t,n,i)}async function tA(e,t){const n=Z(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=rt();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function vC(e,t){const n=Z(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let _=k.resolve();return m.forEach(N=>{_=_.next(()=>d.getEntry(u,N)).next(V=>{const x=h.docVersions.get(N);ft(x!==null,48541),V.version.compareTo(x)<0&&(g.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=rt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function eA(e){const t=Z(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function EC(e,t){const n=Z(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=r.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,g)));let _=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(se.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(g,_),function(V,x,b){return V.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=pC?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(s,_))});let u=Kn(),h=rt();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(TC(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual($.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(g=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return k.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function TC(e,t,n){let i=rt(),r=rt();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=Kn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual($.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):B(Mm,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function AC(e,t){const n=Z(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=vm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function SC(e,t){const n=Z(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,k.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new vi(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function id(e,t,n){const i=Z(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!qs(a))throw a;B(Mm,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function d_(e,t,n){const i=Z(e);let r=$.min(),s=rt();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=Z(u),m=g.xs.get(d);return m!==void 0?k.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,mn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:$.min(),n?s:rt())).next(l=>(bC(i,uI(t),l),{documents:l,Qs:s})))}function bC(e,t,n){let i=e.Os.get(t)||$.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class m_{constructor(){this.activeTargetIds=gI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class wC{constructor(){this.Mo=new m_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new m_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="ConnectivityMonitor";class p_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){B(g_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){B(g_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl=null;function rd(){return Sl===null?Sl=function(){return 268435456+Math.round(2147483648*Math.random())}():Sl++,"0x"+Sl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="RestConnection",IC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Iu?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=rd(),l=this.zo(t,n.toUriEncodedString());B(jh,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=Ls(h);return this.Jo(t,l,u,i,d).then(g=>(B(jh,`Received RPC '${t}' ${a}: `,g),g),g=>{throw ws(jh,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+js}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=IC[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue="WebChannelConnection";class NC extends CC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=rd();return new Promise((l,u)=>{const h=new s0;h.setWithCredentials(!0),h.listenOnce(a0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Ll.NO_ERROR:const g=h.getResponseJson();B(ue,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case Ll.TIMEOUT:B(ue,`RPC '${t}' ${a} timed out`),u(new H(U.DEADLINE_EXCEEDED,"Request time out"));break;case Ll.HTTP_ERROR:const m=h.getStatus();if(B(ue,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const N=_==null?void 0:_.error;if(N&&N.status&&N.message){const V=function(b){const E=b.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(E)>=0?E:U.UNKNOWN}(N.status);u(new H(V,N.message))}else u(new H(U.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new H(U.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{B(ue,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);B(ue,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=rd(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=u0(),l=l0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");B(ue,`Creating RPC '${t}' stream ${r}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,_=!1;const N=new DC({Yo:x=>{_?B(ue,`Not sending because RPC '${t}' stream ${r} is closed:`,x):(m||(B(ue,`Opening RPC '${t}' stream ${r} transport.`),g.open(),m=!0),B(ue,`RPC '${t}' stream ${r} sending:`,x),g.send(x))},Zo:()=>g.close()}),V=(x,b,E)=>{x.listen(b,w=>{try{E(w)}catch(D){setTimeout(()=>{throw D},0)}})};return V(g,pa.EventType.OPEN,()=>{_||(B(ue,`RPC '${t}' stream ${r} transport opened.`),N.o_())}),V(g,pa.EventType.CLOSE,()=>{_||(_=!0,B(ue,`RPC '${t}' stream ${r} transport closed`),N.a_(),this.E_(g))}),V(g,pa.EventType.ERROR,x=>{_||(_=!0,ws(ue,`RPC '${t}' stream ${r} transport errored. Name:`,x.name,"Message:",x.message),N.a_(new H(U.UNAVAILABLE,"The operation could not be completed")))}),V(g,pa.EventType.MESSAGE,x=>{var b;if(!_){const E=x.data[0];ft(!!E,16349);const w=E,D=(w==null?void 0:w.error)||((b=w[0])==null?void 0:b.error);if(D){B(ue,`RPC '${t}' stream ${r} received error:`,D);const z=D.status;let q=function(v){const A=Lt[v];if(A!==void 0)return q0(A)}(z),T=D.message;q===void 0&&(q=U.INTERNAL,T="Unknown error status: "+z+" with message "+D.message),_=!0,N.a_(new H(q,T)),g.close()}else B(ue,`RPC '${t}' stream ${r} received:`,E),N.u_(E)}}),V(l,o0.STAT_EVENT,x=>{x.stat===Qf.PROXY?B(ue,`RPC '${t}' stream ${r} detected buffering proxy`):x.stat===Qf.NOPROXY&&B(ue,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function Bh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(e){return new xI(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&B("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="PersistentStream";class iA{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nA(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Qn(n.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new H(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return B(y_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(B(y_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OC extends iA{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=UI(this.serializer,t),i=function(s){if(!("targetChange"in s))return $.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?$.min():a.readTime?pn(a.readTime):$.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=nd(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Zf(u)?{documents:jI(s,u)}:{query:BI(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=F0(s,a.resumeToken);const h=Wf(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo($.min())>0){l.readTime=Vu(s,a.snapshotVersion.toTimestamp());const h=Wf(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=HI(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=nd(this.serializer),n.removeTarget=t,this.q_(n)}}class MC extends iA{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ft(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ft(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ft(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=zI(t.writeResults,t.commitTime),i=pn(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=nd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>LI(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{}class xC extends VC{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new H(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,td(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(U.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,td(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new H(U.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class kC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qn(n),this.aa=!1):B("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="RemoteStore";class PC{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Ir(this)&&(B(Er,"Restarting streams for network reachability change."),await async function(u){const h=Z(u);h.Ea.add(4),await Vo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await vc(h)}(this))})}),this.Ra=new kC(i,r)}}async function vc(e){if(Ir(e))for(const t of e.da)await t(!0)}async function Vo(e){for(const t of e.da)await t(!1)}function rA(e,t){const n=Z(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Pm(n)?km(n):Hs(n).O_()&&xm(n,t))}function Vm(e,t){const n=Z(e),i=Hs(n);n.Ia.delete(t),i.O_()&&sA(n,t),n.Ia.size===0&&(i.O_()?i.L_():Ir(n)&&n.Ra.set("Unknown"))}function xm(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hs(e).Y_(t)}function sA(e,t){e.Va.Ue(t),Hs(e).Z_(t)}function km(e){e.Va=new NI({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Hs(e).start(),e.Ra.ua()}function Pm(e){return Ir(e)&&!Hs(e).x_()&&e.Ia.size>0}function Ir(e){return Z(e).Ea.size===0}function aA(e){e.Va=void 0}async function UC(e){e.Ra.set("Online")}async function LC(e){e.Ia.forEach((t,n)=>{xm(e,t)})}async function zC(e,t){aA(e),Pm(e)?(e.Ra.ha(t),km(e)):e.Ra.set("Unknown")}async function jC(e,t,n){if(e.Ra.set("Online"),t instanceof G0&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){B(Er,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await ku(e,i)}else if(t instanceof ql?e.Va.Ze(t):t instanceof H0?e.Va.st(t):e.Va.tt(t),!n.isEqual($.min()))try{const i=await eA(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(se.EMPTY_BYTE_STRING,d.snapshotVersion)),sA(s,u);const g=new vi(d.target,u,h,d.sequenceNumber);xm(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){B(Er,"Failed to raise snapshot:",i),await ku(e,i)}}async function ku(e,t,n){if(!qs(t))throw t;e.Ea.add(1),await Vo(e),e.Ra.set("Offline"),n||(n=()=>eA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{B(Er,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await vc(e)})}function oA(e,t){return t().catch(n=>ku(e,n,t))}async function Ec(e){const t=Z(e),n=Bi(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:vm;for(;BC(t);)try{const r=await AC(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,qC(t,r)}catch(r){await ku(t,r)}lA(t)&&uA(t)}function BC(e){return Ir(e)&&e.Ta.length<10}function qC(e,t){e.Ta.push(t);const n=Bi(e);n.O_()&&n.X_&&n.ea(t.mutations)}function lA(e){return Ir(e)&&!Bi(e).x_()&&e.Ta.length>0}function uA(e){Bi(e).start()}async function HC(e){Bi(e).ra()}async function GC(e){const t=Bi(e);for(const n of e.Ta)t.ea(n.mutations)}async function FC(e,t,n){const i=e.Ta.shift(),r=Rm.from(i,t,n);await oA(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Ec(e)}async function QC(e,t){t&&Bi(e).X_&&await async function(i,r){if(function(a){return II(a)&&a!==U.ABORTED}(r.code)){const s=i.Ta.shift();Bi(i).B_(),await oA(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Ec(i)}}(e,t),lA(e)&&uA(e)}async function __(e,t){const n=Z(e);n.asyncQueue.verifyOperationInProgress(),B(Er,"RemoteStore received new credentials");const i=Ir(n);n.Ea.add(3),await Vo(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await vc(n)}async function KC(e,t){const n=Z(e);t?(n.Ea.delete(2),await vc(n)):t||(n.Ea.add(2),await Vo(n),n.Ra.set("Unknown"))}function Hs(e){return e.ma||(e.ma=function(n,i,r){const s=Z(n);return s.sa(),new OC(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:UC.bind(null,e),t_:LC.bind(null,e),r_:zC.bind(null,e),H_:jC.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Pm(e)?km(e):e.Ra.set("Unknown")):(await e.ma.stop(),aA(e))})),e.ma}function Bi(e){return e.fa||(e.fa=function(n,i,r){const s=Z(n);return s.sa(),new MC(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:HC.bind(null,e),r_:QC.bind(null,e),ta:GC.bind(null,e),na:FC.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Ec(e)):(await e.fa.stop(),e.Ta.length>0&&(B(Er,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new Um(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(U.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lm(e,t){if(Qn("AsyncQueue",`${t}: ${e}`),qs(e))return new H(U.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{static emptySet(t){return new us(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=ya(),this.sortedSet=new Ot(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof us)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new us;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(){this.ga=new Ot(Q.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):K(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class Ns{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ns(t,n,us.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&dc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class XC{constructor(){this.queries=E_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Z(n),s=r.queries;r.queries=E_(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new H(U.ABORTED,"Firestore shutting down"))}}function E_(){return new Rr(e=>D0(e),dc)}async function $C(e,t){const n=Z(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new YC,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=Lm(a,`Initialization of query '${zr(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&zm(n)}async function ZC(e,t){const n=Z(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function JC(e,t){const n=Z(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&zm(n)}function WC(e,t,n){const i=Z(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function zm(e){e.Ca.forEach(t=>{t.next()})}var sd,T_;(T_=sd||(sd={})).Ma="default",T_.Cache="cache";class tD{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Ns(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Ns.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==sd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(t){this.key=t}}class hA{constructor(t){this.key=t}}class eD{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=rt(),this.mutatedKeys=rt(),this.eu=N0(t),this.tu=new us(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new v_,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,g)=>{const m=r.get(d),_=mc(this.query,g)?g:null,N=!!m&&this.mutatedKeys.has(m.key),V=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let x=!1;m&&_?m.data.isEqual(_.data)?N!==V&&(i.track({type:3,doc:_}),x=!0):this.su(m,_)||(i.track({type:2,doc:_}),x=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),x=!0):m&&!_&&(i.track({type:1,doc:m}),x=!0,(u||h)&&(l=!0)),x&&(_?(a=a.add(_),s=V?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(_,N){const V=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Rt:x})}};return V(_)-V(N)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new Ns(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new v_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=rt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new hA(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new cA(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=rt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Ns.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jm="SyncEngine";class nD{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class iD{constructor(t){this.key=t,this.hu=!1}}class rD{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Rr(l=>D0(l),dc),this.Iu=new Map,this.Eu=new Set,this.du=new Ot(Q.comparator),this.Au=new Map,this.Ru=new Dm,this.Vu={},this.mu=new Map,this.fu=Ds.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sD(e,t,n=!0){const i=yA(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await fA(i,t,n,!0),r}async function aD(e,t){const n=yA(e);await fA(n,t,!0,!1)}async function fA(e,t,n,i){const r=await SC(e.localStore,mn(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await oD(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&rA(e.remoteStore,r),l}async function oD(e,t,n,i,r){e.pu=(g,m,_)=>async function(V,x,b,E){let w=x.view.ru(b);w.Cs&&(w=await d_(V.localStore,x.query,!1).then(({documents:T})=>x.view.ru(T,w)));const D=E&&E.targetChanges.get(x.targetId),z=E&&E.targetMismatches.get(x.targetId)!=null,q=x.view.applyChanges(w,V.isPrimaryClient,D,z);return S_(V,x.targetId,q.au),q.snapshot}(e,g,m,_);const s=await d_(e.localStore,t,!0),a=new eD(t,s.Qs),l=a.ru(s.documents),u=Mo.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);S_(e,n,h.au);const d=new nD(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function lD(e,t,n){const i=Z(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!dc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await id(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Vm(i.remoteStore,r.targetId),ad(i,r.targetId)}).catch(Bs)):(ad(i,r.targetId),await id(i.localStore,r.targetId,!0))}async function uD(e,t){const n=Z(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Vm(n.remoteStore,i.targetId))}async function cD(e,t,n){const i=yD(e);try{const r=await function(a,l){const u=Z(a),h=St.now(),d=l.reduce((_,N)=>_.add(N.key),rt());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let N=Kn(),V=rt();return u.Ns.getEntries(_,d).next(x=>{N=x,N.forEach((b,E)=>{E.isValidDocument()||(V=V.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,N)).next(x=>{g=x;const b=[];for(const E of l){const w=AI(E,g.get(E.key).overlayedDocument);w!=null&&b.push(new Ki(E.key,w,A0(w.value.mapValue),gn.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,b,l)}).next(x=>{m=x;const b=x.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(_,x.batchId,b)})}).then(()=>({batchId:m.batchId,changes:M0(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ot(it)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await xo(i,r.changes),await Ec(i.remoteStore)}catch(r){const s=Lm(r,"Failed to persist write");n.reject(s)}}async function dA(e,t){const n=Z(e);try{const i=await EC(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(ft(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?ft(a.hu,14607):r.removedDocuments.size>0&&(ft(a.hu,42227),a.hu=!1))}),await xo(n,i,t)}catch(i){await Bs(i)}}function A_(e,t,n){const i=Z(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=Z(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&zm(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function hD(e,t,n){const i=Z(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Ot(Q.comparator);a=a.insert(s,he.newNoDocument(s,$.min()));const l=rt().add(s),u=new yc($.min(),new Map,new Ot(it),a,l);await dA(i,u),i.du=i.du.remove(s),i.Au.delete(t),Bm(i)}else await id(i.localStore,t,!1).then(()=>ad(i,t,n)).catch(Bs)}async function fD(e,t){const n=Z(e),i=t.batch.batchId;try{const r=await vC(n.localStore,t);gA(n,i,null),mA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await xo(n,r)}catch(r){await Bs(r)}}async function dD(e,t,n){const i=Z(e);try{const r=await function(a,l){const u=Z(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ft(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);gA(i,t,n),mA(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await xo(i,r)}catch(r){await Bs(r)}}function mA(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function gA(e,t,n){const i=Z(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function ad(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||pA(e,i)})}function pA(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Vm(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Bm(e))}function S_(e,t,n){for(const i of n)i instanceof cA?(e.Ru.addReference(i.key,t),mD(e,i)):i instanceof hA?(B(jm,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||pA(e,i.key)):K(19791,{wu:i})}function mD(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(B(jm,"New document in limbo: "+n),e.Eu.add(i),Bm(e))}function Bm(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Q(Nt.fromString(t)),i=e.fu.next();e.Au.set(i,new iD(n)),e.du=e.du.insert(n,i),rA(e.remoteStore,new vi(mn(bm(n.path)),i,"TargetPurposeLimboResolution",uc.ce))}}async function xo(e,t,n){const i=Z(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){r.push(h);const g=Om.As(u.targetId,h);s.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=Z(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>k.forEach(h,m=>k.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>k.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!qs(g))throw g;B(Mm,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const _=d.Ms.get(m),N=_.snapshotVersion,V=_.withLastLimboFreeSnapshotVersion(N);d.Ms=d.Ms.insert(m,V)}}}(i.localStore,s))}async function gD(e,t){const n=Z(e);if(!n.currentUser.isEqual(t)){B(jm,"User change. New user:",t.toKey());const i=await tA(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new H(U.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await xo(n,i.Ls)}}function pD(e,t){const n=Z(e),i=n.Au.get(t);if(i&&i.hu)return rt().add(i.key);{let r=rt();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function yA(e){const t=Z(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=dA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hD.bind(null,t),t.Pu.H_=JC.bind(null,t.eventManager),t.Pu.yu=WC.bind(null,t.eventManager),t}function yD(e){const t=Z(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=dD.bind(null,t),t}class Pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=_c(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return _C(this.persistence,new gC,t.initialUser,this.serializer)}Cu(t){return new W0(Nm.mi,this.serializer)}Du(t){return new wC}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pu.provider={build:()=>new Pu};class _D extends Pu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ft(this.persistence.referenceDelegate instanceof xu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new tC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?be.withCacheSize(this.cacheSizeBytes):be.DEFAULT;return new W0(i=>xu.mi(i,n),this.serializer)}}class od{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>A_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gD.bind(null,this.syncEngine),await KC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new XC}()}createDatastore(t){const n=_c(t.databaseInfo.databaseId),i=function(s){return new NC(s)}(t.databaseInfo);return function(s,a,l,u){return new xC(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new PC(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>A_(this.syncEngine,n,0),function(){return p_.v()?new p_:new RC}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const g=new rD(r,s,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=Z(r);B(Er,"RemoteStore shutting down."),s.Ea.add(5),await Vo(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}od.provider={build:()=>new od};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Qn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="FirestoreClient";class ED{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ce.UNAUTHENTICATED,this.clientId=ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{B(qi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(B(qi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Lm(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function qh(e,t){e.asyncQueue.verifyOperationInProgress(),B(qi,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await tA(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function b_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await TD(e);B(qi,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>__(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>__(t.remoteStore,r)),e._onlineComponents=t}async function TD(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){B(qi,"Using user provided OfflineComponentProvider");try{await qh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;ws("Error using user provided cache. Falling back to memory cache: "+n),await qh(e,new Pu)}}else B(qi,"Using default OfflineComponentProvider"),await qh(e,new _D(void 0));return e._offlineComponents}async function _A(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(B(qi,"Using user provided OnlineComponentProvider"),await b_(e,e._uninitializedComponentsProvider._online)):(B(qi,"Using default OnlineComponentProvider"),await b_(e,new od))),e._onlineComponents}function AD(e){return _A(e).then(t=>t.syncEngine)}async function SD(e){const t=await _A(e),n=t.eventManager;return n.onListen=sD.bind(null,t.syncEngine),n.onUnlisten=lD.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=aD.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=uD.bind(null,t.syncEngine),n}function bD(e,t,n={}){const i=new Mi;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new vD({next:m=>{d.Nu(),a.enqueueAndForget(()=>ZC(s,g));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new H(U.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new H(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new tD(bm(l.path),d,{includeMetadataChanges:!0,qa:!0});return $C(s,g)}(await SD(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="firestore.googleapis.com",R_=!0;class I_{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new H(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EA,this.ssl=R_}else this.host=t.host,this.ssl=t.ssl??R_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=J0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<JI)throw new H(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}k2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vA(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class qm{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new I_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new H(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new I_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new b2;switch(i.type){case"firstParty":return new C2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new H(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=w_.get(n);i&&(B("ComponentProvider","Removing Datastore"),w_.delete(n),i.terminate())}(this),Promise.resolve()}}function wD(e,t,n,i={}){var h;e=vr(e,qm);const r=Ls(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&($T(`https://${l}`),ZT("Firestore",!0)),s.host!==EA&&s.host!==l&&ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!pr(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=ce.MOCK_USER;else{d=Xw(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new H(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ce(m)}e._authCredentials=new w2(new h0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Hm(this.firestore,t,this._query)}}class Ft{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ft(this.firestore,t,this._key)}toJSON(){return{type:Ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(No(n,Ft._jsonSchema))return new Ft(t,i||null,new Q(Nt.fromString(n.referencePath)))}}Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:jt("string",Ft._jsonSchemaVersion),referencePath:jt("string")};class uo extends Hm{constructor(t,n,i){super(t,n,bm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ft(this.firestore,null,new Q(t))}withConverter(t){return new uo(this.firestore,t,this._path)}}function ld(e,t,...n){if(e=je(e),arguments.length===1&&(t=ym.newId()),x2("doc","path",t),e instanceof qm){const i=Nt.fromString(t,...n);return By(i),new Ft(e,null,new Q(i))}{if(!(e instanceof Ft||e instanceof uo))throw new H(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Nt.fromString(t,...n));return By(i),new Ft(e.firestore,e instanceof uo?e.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="AsyncQueue";class D_{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nA(this,"async_queue_retry"),this._c=()=>{const i=Bh();i&&B(C_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=Bh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Bh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Mi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!qs(t))throw t;B(C_,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,Qn("INTERNAL UNHANDLED ERROR: ",N_(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=Um.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&K(47125,{Pc:N_(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function N_(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Tc extends qm{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new D_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new D_(t),this._firestoreClient=void 0,await t}}}function RD(e,t){const n=typeof e=="object"?e:e0(),i=typeof e=="string"?e:Iu,r=gm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=Kw("firestore");s&&wD(r,...s)}return r}function TA(e){if(e._terminated)throw new H(U.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ID(e),e._firestoreClient}function ID(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new Q2(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,vA(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new ED(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Xe(se.fromBase64String(t))}catch(n){throw new H(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Xe(se.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Xe._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(No(t,Xe._jsonSchema))return Xe.fromBase64String(t.bytes)}}Xe._jsonSchemaVersion="firestore/bytes/1.0",Xe._jsonSchema={type:jt("string",Xe._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new H(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ie(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new H(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new H(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return it(this._lat,t._lat)||it(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yn._jsonSchemaVersion}}static fromJSON(t){if(No(t,yn._jsonSchema))return new yn(t.latitude,t.longitude)}}yn._jsonSchemaVersion="firestore/geoPoint/1.0",yn._jsonSchema={type:jt("string",yn._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:_n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(No(t,_n._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new _n(t.vectorValues);throw new H(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_n._jsonSchemaVersion="firestore/vectorValue/1.0",_n._jsonSchema={type:jt("string",_n._jsonSchemaVersion),vectorValues:jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=/^__.*__$/;class DD{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Ki(t,this.data,this.fieldMask,n,this.fieldTransforms):new Oo(t,this.data,n,this.fieldTransforms)}}class AA{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Ki(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function SA(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:e})}}class Fm{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Fm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Uu(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(SA(this.Ac)&&CD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class ND{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||_c(t)}Cc(t,n,i,r=!1){return new Fm({Ac:t,methodName:n,Dc:i,path:ie.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bA(e){const t=e._freezeSettings(),n=_c(e._databaseId);return new ND(e._databaseId,!!t.ignoreUndefinedProperties,n)}function OD(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);Qm("Data must be an object, but it was:",a,i);const l=wA(i,a);let u,h;if(s.merge)u=new xe(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=ud(t,g,n);if(!a.contains(m))throw new H(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);IA(d,m)||d.push(m)}u=new xe(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new DD(new we(l),u,h)}class Sc extends Gm{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Sc}}function MD(e,t,n,i){const r=e.Cc(1,t,n);Qm("Data must be an object, but it was:",r,i);const s=[],a=we.empty();Qi(i,(u,h)=>{const d=Km(t,u,n);h=je(h);const g=r.yc(d);if(h instanceof Sc)s.push(d);else{const m=bc(h,g);m!=null&&(s.push(d),a.set(d,m))}});const l=new xe(s);return new AA(a,l,r.fieldTransforms)}function VD(e,t,n,i,r,s){const a=e.Cc(1,t,n),l=[ud(t,i,n)],u=[r];if(s.length%2!=0)throw new H(U.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(ud(t,s[m])),u.push(s[m+1]);const h=[],d=we.empty();for(let m=l.length-1;m>=0;--m)if(!IA(h,l[m])){const _=l[m];let N=u[m];N=je(N);const V=a.yc(_);if(N instanceof Sc)h.push(_);else{const x=bc(N,V);x!=null&&(h.push(_),d.set(_,x))}}const g=new xe(h);return new AA(d,g,a.fieldTransforms)}function bc(e,t){if(RA(e=je(e)))return Qm("Unsupported field value:",t,e),wA(e,t);if(e instanceof Gm)return function(i,r){if(!SA(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=bc(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=je(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return pI(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=St.fromDate(i);return{timestampValue:Vu(r.serializer,s)}}if(i instanceof St){const s=new St(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vu(r.serializer,s)}}if(i instanceof yn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xe)return{bytesValue:F0(r.serializer,i._byteString)};if(i instanceof Ft){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Cm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof _n)return function(a,l){return{mapValue:{fields:{[E0]:{stringValue:T0},[Cu]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return wm(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${_m(i)}`)}(e,t)}function wA(e,t){const n={};return m0(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qi(e,(i,r)=>{const s=bc(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function RA(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof St||e instanceof yn||e instanceof Xe||e instanceof Ft||e instanceof Gm||e instanceof _n)}function Qm(e,t,n){if(!RA(n)||!f0(n)){const i=_m(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function ud(e,t,n){if((t=je(t))instanceof Ac)return t._internalPath;if(typeof t=="string")return Km(e,t);throw Uu("Field path arguments must be of type string or ",e,!1,void 0,n)}const xD=new RegExp("[~\\*/\\[\\]]");function Km(e,t,n){if(t.search(xD)>=0)throw Uu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ac(...t.split("."))._internalPath}catch{throw Uu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Uu(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new H(U.INVALID_ARGUMENT,l+e+u)}function IA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new kD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(DA("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kD extends CA{data(){return super.data()}}function DA(e,t){return typeof t=="string"?Km(e,t):t instanceof Ac?t._internalPath:t._delegate._internalPath}class PD{convertValue(t,n="none"){switch(ji(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ut(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(zi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw K(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Qi(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[Cu].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>Ut(a.doubleValue));return new _n(n)}convertGeoPoint(t){return new yn(Ut(t.latitude),Ut(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=hc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ro(t));default:return null}}convertTimestamp(t){const n=Li(t);return new St(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Nt.fromString(t);ft(Z0(i),9688,{name:t});const r=new so(i.get(1),i.get(3)),s=new Q(i.popFirst(5));return r.isEqual(n)||Qn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class va{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class hr extends CA{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Hl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(DA("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=hr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}hr._jsonSchemaVersion="firestore/documentSnapshot/1.0",hr._jsonSchema={type:jt("string",hr._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class Hl extends hr{data(t={}){return super.data(t)}}class ja{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new va(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Hl(this._firestore,this._userDataWriter,i.key,i,new va(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new Hl(r._firestore,r._userDataWriter,l.doc.key,l.doc,new va(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Hl(r._firestore,r._userDataWriter,l.doc.key,l.doc,new va(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:LD(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ja._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function LD(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(e){e=vr(e,Ft);const t=vr(e.firestore,Tc);return bD(TA(t),e._key).then(n=>qD(t,e,n))}ja._jsonSchemaVersion="firestore/querySnapshot/1.0",ja._jsonSchema={type:jt("string",ja._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class jD extends PD{constructor(t){super(),this.firestore=t}convertBytes(t){return new Xe(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function NA(e,t,n){e=vr(e,Ft);const i=vr(e.firestore,Tc),r=UD(e.converter,t,n);return OA(i,[OD(bA(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,gn.none())])}function BD(e,t,n,...i){e=vr(e,Ft);const r=vr(e.firestore,Tc),s=bA(r);let a;return a=typeof(t=je(t))=="string"||t instanceof Ac?VD(s,"updateDoc",e._key,t,n,i):MD(s,"updateDoc",e._key,t),OA(r,[a.toMutation(e._key,gn.exists(!0))])}function OA(e,t){return function(i,r){const s=new Mi;return i.asyncQueue.enqueueAndForget(async()=>cD(await AD(i),r,s)),s.promise}(TA(e),t)}function qD(e,t,n){const i=n.docs.get(t._key),r=new jD(e);return new hr(e,r,t._key,i,new va(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(r){js=r})(zs),bs(new yr("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new Tc(new R2(i.getProvider("auth-internal")),new D2(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new H(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new so(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ni(Uy,Ly,t),Ni(Uy,Ly,"esm2020")})();function MA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HD=MA,VA=new Co("auth","Firebase",MA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=new dm("@firebase/auth");function GD(e,...t){Lu.logLevel<=nt.WARN&&Lu.warn(`Auth (${zs}): ${e}`,...t)}function Gl(e,...t){Lu.logLevel<=nt.ERROR&&Lu.error(`Auth (${zs}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(e,...t){throw Ym(e,...t)}function vn(e,...t){return Ym(e,...t)}function xA(e,t,n){const i={...HD(),[t]:n};return new Co("auth","Firebase",i).create(t,{appName:e.name})}function Vi(e){return xA(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ym(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return VA.create(e,...t)}function X(e,t,...n){if(!e)throw Ym(t,...n)}function Pn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Gl(t),new Error(t)}function Xn(e,t){e||Pn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function FD(){return O_()==="http:"||O_()==="https:"}function O_(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FD()||eR()||"connection"in navigator)?navigator.onLine:!0}function KD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(t,n){this.shortDelay=t,this.longDelay=n,Xn(n>t,"Short delay should be less than long delay!"),this.isMobile=Jw()||nR()}get(){return QD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(e,t){Xn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$D=new ko(3e4,6e4);function wc(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Gs(e,t,n,i,r={}){return PA(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=Do({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return tR()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&Ls(e.emulatorConfig.host)&&(h.credentials="include"),kA.fetch()(await LA(e,e.config.apiHost,n,l),h)})}async function PA(e,t,n){e._canInitEmulator=!1;const i={...YD,...t};try{const r=new ZD(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw bl(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw bl(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw bl(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw bl(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw xA(e,d,h);Yn(e,d)}}catch(r){if(r instanceof Zn)throw r;Yn(e,"network-request-failed",{message:String(r)})}}async function UA(e,t,n,i,r={}){const s=await Gs(e,t,n,i,r);return"mfaPendingCredential"in s&&Yn(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function LA(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?Xm(e.config,r):`${e.config.apiScheme}://${r}`;return XD.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class ZD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(vn(this.auth,"network-request-failed")),$D.get())})}}function bl(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=vn(e,t,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(e,t){return Gs(e,"POST","/v1/accounts:delete",t)}async function zu(e,t){return Gs(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function WD(e,t=!1){const n=je(e),i=await n.getIdToken(t),r=$m(i);X(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ba(Hh(r.auth_time)),issuedAtTime:Ba(Hh(r.iat)),expirationTime:Ba(Hh(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Hh(e){return Number(e)*1e3}function $m(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Gl("JWT malformed, contained fewer than 3 sections"),null;try{const r=QT(n);return r?JSON.parse(r):(Gl("Failed to decode base64 JWT payload"),null)}catch(r){return Gl("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function M_(e){const t=$m(e);return X(t,"internal-error"),X(typeof t.exp<"u","internal-error"),X(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Zn&&tN(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function tN({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ba(this.lastLoginAt),this.creationTime=Ba(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(e){var g;const t=e.auth,n=await e.getIdToken(),i=await co(e,zu(t,{idToken:n}));X(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(g=r.providerUserInfo)!=null&&g.length?zA(r.providerUserInfo):[],a=iN(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new hd(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function nN(e){const t=je(e);await ju(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function iN(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function zA(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(e,t){const n=await PA(e,{},async()=>{const i=Do({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await LA(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&Ls(e.emulatorConfig.host)&&(u.credentials="include"),kA.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sN(e,t){return Gs(e,"POST","/v2/accounts:revokeToken",wc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){X(t.idToken,"internal-error"),X(typeof t.idToken<"u","internal-error"),X(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):M_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){X(t.length!==0,"internal-error");const n=M_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await rN(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new cs;return i&&(X(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(X(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(X(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new cs,this.toJSON())}_performRefresh(){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(e,t){X(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class nn{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new eN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new hd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await co(this,this.stsTokenManager.getToken(this.auth,t));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return WD(this,t)}reload(){return nN(this)}_assign(t){this!==t&&(X(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new nn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await ju(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(Vi(this.auth));const t=await this.getIdToken();return await co(this,JD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:_,providerData:N,stsTokenManager:V}=n;X(g&&V,t,"internal-error");const x=cs.fromJSON(this.name,V);X(typeof g=="string",t,"internal-error"),ii(i,t.name),ii(r,t.name),X(typeof m=="boolean",t,"internal-error"),X(typeof _=="boolean",t,"internal-error"),ii(s,t.name),ii(a,t.name),ii(l,t.name),ii(u,t.name),ii(h,t.name),ii(d,t.name);const b=new nn({uid:g,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:x,createdAt:h,lastLoginAt:d});return N&&Array.isArray(N)&&(b.providerData=N.map(E=>({...E}))),u&&(b._redirectEventId=u),b}static async _fromIdTokenResponse(t,n,i=!1){const r=new cs;r.updateFromServerResponse(n);const s=new nn({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await ju(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];X(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?zA(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new cs;l.updateFromIdToken(i);const u=new nn({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new hd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=new Map;function Un(e){Xn(e instanceof Function,"Expected a class definition");let t=V_.get(e);return t?(Xn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,V_.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}jA.type="NONE";const x_=jA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(e,t,n){return`firebase:${e}:${t}:${n}`}class hs{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Fl(this.userKey,r.apiKey,s),this.fullPersistenceKey=Fl("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await zu(this.auth,{idToken:t}).catch(()=>{});return n?nn._fromGetAccountInfoResponse(this.auth,n,t):null}return nn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new hs(Un(x_),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||Un(x_);const a=Fl(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await zu(t,{idToken:d}).catch(()=>{});if(!m)break;g=await nn._fromGetAccountInfoResponse(t,m,d)}else g=nn._fromJSON(t,d);h!==s&&(l=g),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new hs(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new hs(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(GA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(BA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(QA(t))return"Blackberry";if(KA(t))return"Webos";if(qA(t))return"Safari";if((t.includes("chrome/")||HA(t))&&!t.includes("edge/"))return"Chrome";if(FA(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function BA(e=me()){return/firefox\//i.test(e)}function qA(e=me()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function HA(e=me()){return/crios\//i.test(e)}function GA(e=me()){return/iemobile/i.test(e)}function FA(e=me()){return/android/i.test(e)}function QA(e=me()){return/blackberry/i.test(e)}function KA(e=me()){return/webos/i.test(e)}function Zm(e=me()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function aN(e=me()){var t;return Zm(e)&&!!((t=window.navigator)!=null&&t.standalone)}function oN(){return iR()&&document.documentMode===10}function YA(e=me()){return Zm(e)||FA(e)||KA(e)||QA(e)||/windows phone/i.test(e)||GA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(e,t=[]){let n;switch(e){case"Browser":n=k_(me());break;case"Worker":n=`${k_(me())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${zs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(e,t={}){return Gs(e,"GET","/v2/passwordPolicy",wc(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=6;class hN{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??cN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P_(this),this.idTokenSubscription=new P_(this),this.beforeStateQueue=new lN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await hs.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await zu(this,{idToken:t}),i=await nn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(en(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await ju(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=KD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(en(this.app))return Promise.reject(Vi(this));const n=t?je(t):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&X(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(Vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return en(this.app)?Promise.reject(Vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await uN(this),n=new hN(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Co("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await sN(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Un(t)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await hs.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=XA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&GD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Rc(e){return je(e)}class P_{constructor(t){this.auth=t,this.observer=null,this.addObserver=hR(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dN(e){Jm=e}function mN(e){return Jm.loadJS(e)}function gN(){return Jm.gapiScript}function pN(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(e,t){const n=gm(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(pr(s,t??{}))return r;Yn(r,"already-initialized")}return n.initialize({options:t})}function _N(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Un);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function vN(e,t,n){const i=Rc(e);X(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=$A(t),{host:a,port:l}=EN(t),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){X(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),X(pr(h,i.config.emulator)&&pr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,Ls(a)?($T(`${s}//${a}${u}`),ZT("Auth",!0)):TN()}function $A(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function EN(e){const t=$A(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:U_(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:U_(a)}}}function U_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function TN(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(t){return Pn("not implemented")}_linkToIdToken(t,n){return Pn("not implemented")}_getReauthenticationResolver(t){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fs(e,t){return UA(e,"POST","/v1/accounts:signInWithIdp",wc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="http://localhost";class Tr extends ZA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Tr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new Tr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return fs(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,fs(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,fs(t,n)}buildRequest(){const t={requestUri:AN,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Do(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends JA{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Po{constructor(){super("facebook.com")}static credential(t){return Tr._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return hi.credentialFromTaggedObject(t)}static credentialFromError(t){return hi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return hi.credential(t.oauthAccessToken)}catch{return null}}}hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends Po{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Tr._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return fi.credentialFromTaggedObject(t)}static credentialFromError(t){return fi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return fi.credential(n,i)}catch{return null}}}fi.GOOGLE_SIGN_IN_METHOD="google.com";fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Po{constructor(){super("github.com")}static credential(t){return Tr._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return di.credentialFromTaggedObject(t)}static credentialFromError(t){return di.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return di.credential(t.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Po{constructor(){super("twitter.com")}static credential(t,n){return Tr._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return mi.credentialFromTaggedObject(t)}static credentialFromError(t){return mi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return mi.credential(n,i)}catch{return null}}}mi.TWITTER_SIGN_IN_METHOD="twitter.com";mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(e,t){return UA(e,"POST","/v1/accounts:signUp",wc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await nn._fromIdTokenResponse(t,i,r),a=L_(i);return new Hi({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=L_(i);return new Hi({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function L_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(e){var r;if(en(e.app))return Promise.reject(Vi(e));const t=Rc(e);if(await t._initializationPromise,(r=t.currentUser)!=null&&r.isAnonymous)return new Hi({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await SN(t,{returnSecureToken:!0}),i=await Hi._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends Zn{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Bu.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new Bu(t,n,i,r)}}function WA(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Bu._fromErrorAndOperation(e,s,t,i):s})}async function wN(e,t,n=!1){const i=await co(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Hi._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(e,t,n=!1){const{auth:i}=e;if(en(i.app))return Promise.reject(Vi(i));const r="reauthenticate";try{const s=await co(e,WA(i,r,t,e),n);X(s.idToken,i,"internal-error");const a=$m(s.idToken);X(a,i,"internal-error");const{sub:l}=a;return X(e.uid===l,i,"user-mismatch"),Hi._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Yn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(e,t,n=!1){if(en(e.app))return Promise.reject(Vi(e));const i="signIn",r=await WA(e,i,t),s=await Hi._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}function CN(e,t,n,i){return je(e).onIdTokenChanged(t,n,i)}function DN(e,t,n){return je(e).beforeAuthStateChanged(t,n)}const qu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qu,"1"),this.storage.removeItem(qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=1e3,ON=10;class e1 extends t1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);oN()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,ON):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},NN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}e1.type="LOCAL";const MN=e1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1 extends t1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}n1.type="SESSION";const i1=n1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new Ic(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await VN(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ic.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=Wm("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return window}function kN(e){En().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function PN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UN(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function LN(){return r1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="firebaseLocalStorageDb",zN=1,Hu="firebaseLocalStorage",a1="fbase_key";class Uo{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Cc(e,t){return e.transaction([Hu],t?"readwrite":"readonly").objectStore(Hu)}function jN(){const e=indexedDB.deleteDatabase(s1);return new Uo(e).toPromise()}function fd(){const e=indexedDB.open(s1,zN);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Hu,{keyPath:a1})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Hu)?t(i):(i.close(),await jN(),t(await fd()))})})}async function z_(e,t,n){const i=Cc(e,!0).put({[a1]:t,value:n});return new Uo(i).toPromise()}async function BN(e,t){const n=Cc(e,!1).get(t),i=await new Uo(n).toPromise();return i===void 0?null:i.value}function j_(e,t){const n=Cc(e,!0).delete(t);return new Uo(n).toPromise()}const qN=800,HN=3;class o1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>HN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return r1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ic._getInstance(LN()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await PN(),!this.activeServiceWorker)return;this.sender=new xN(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||UN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await fd();return await z_(t,qu,"1"),await j_(t,qu),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>z_(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>BN(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>j_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=Cc(r,!1).getAll();return new Uo(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}o1.type="LOCAL";const GN=o1;new ko(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(e,t){return t?Un(t):(X(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends ZA{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return fs(t,this._buildIdpRequest())}_linkToIdToken(t,n){return fs(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return fs(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function QN(e){return IN(e.auth,new tg(e),e.bypassAuthState)}function KN(e){const{auth:t,user:n}=e;return X(n,t,"internal-error"),RN(n,new tg(e),e.bypassAuthState)}async function YN(e){const{auth:t,user:n}=e;return X(n,t,"internal-error"),wN(n,new tg(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return QN;case"linkViaPopup":case"linkViaRedirect":return YN;case"reauthViaPopup":case"reauthViaRedirect":return KN;default:Yn(this.auth,"internal-error")}}resolve(t){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new ko(2e3,1e4);class ts extends l1{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ts.currentPopupAction&&ts.currentPopupAction.cancel(),ts.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return X(t,this.auth,"internal-error"),t}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const t=Wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ts.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,XN.get())};t()}}ts.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="pendingRedirect",Ql=new Map;class ZN extends l1{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Ql.get(this.auth._key());if(!t){try{const i=await JN(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Ql.set(this.auth._key(),t)}return this.bypassAuthState||Ql.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JN(e,t){const n=e4(t),i=t4(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function WN(e,t){Ql.set(e._key(),t)}function t4(e){return Un(e._redirectPersistence)}function e4(e){return Fl($N,e.config.apiKey,e.name)}async function n4(e,t,n=!1){if(en(e.app))return Promise.reject(Vi(e));const i=Rc(e),r=FN(i,t),a=await new ZN(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=10*60*1e3;class r4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!s4(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!u1(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(vn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=i4&&this.cachedEventUids.clear(),this.cachedEventUids.has(B_(t))}saveEventToCache(t){this.cachedEventUids.add(B_(t)),this.lastProcessedEventTime=Date.now()}}function B_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function u1({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function s4(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return u1(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4(e,t={}){return Gs(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l4=/^https?/;async function u4(e){if(e.config.emulator)return;const{authorizedDomains:t}=await a4(e);for(const n of t)try{if(c4(n))return}catch{}Yn(e,"unauthorized-domain")}function c4(e){const t=cd(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!l4.test(n))return!1;if(o4.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new ko(3e4,6e4);function q_(){const e=En().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function f4(e){return new Promise((t,n)=>{var r,s,a;function i(){q_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{q_(),n(vn(e,"network-request-failed"))},timeout:h4.get()})}if((s=(r=En().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=En().gapi)!=null&&a.load)i();else{const l=pN("iframefcb");return En()[l]=()=>{gapi.load?i():n(vn(e,"network-request-failed"))},mN(`${gN()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Kl=null,t})}let Kl=null;function d4(e){return Kl=Kl||f4(e),Kl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=new ko(5e3,15e3),g4="__/auth/iframe",p4="emulator/auth/iframe",y4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v4(e){const t=e.config;X(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Xm(t,p4):`https://${e.config.authDomain}/${g4}`,i={apiKey:t.apiKey,appName:e.name,v:zs},r=_4.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Do(i).slice(1)}`}async function E4(e){const t=await d4(e),n=En().gapi;return X(n,e,"internal-error"),t.open({where:document.body,url:v4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y4,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=vn(e,"network-request-failed"),l=En().setTimeout(()=>{s(a)},m4.get());function u(){En().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},A4=500,S4=600,b4="_blank",w4="http://localhost";class H_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function R4(e,t,n,i=A4,r=S4){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...T4,width:i.toString(),height:r.toString(),top:s,left:a},h=me().toLowerCase();n&&(l=HA(h)?b4:n),BA(h)&&(t=t||w4,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,N])=>`${m}${_}=${N},`,"");if(aN(h)&&l!=="_self")return I4(t||"",l),new H_(null);const g=window.open(t||"",l,d);X(g,e,"popup-blocked");try{g.focus()}catch{}return new H_(g)}function I4(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="__/auth/handler",D4="emulator/auth/handler",N4=encodeURIComponent("fac");async function G_(e,t,n,i,r,s){X(e.config.authDomain,e,"auth-domain-config-required"),X(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:zs,eventId:r};if(t instanceof JA){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",cR(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof Po){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${N4}=${encodeURIComponent(u)}`:"";return`${O4(e)}?${Do(l).slice(1)}${h}`}function O4({config:e}){return e.emulator?Xm(e,D4):`https://${e.authDomain}/${C4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="webStorageSupport";class M4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=i1,this._completeRedirectFn=n4,this._overrideRedirectResult=WN}async _openPopup(t,n,i,r){var a;Xn((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await G_(t,n,i,cd(),r);return R4(t,s,Wm())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await G_(t,n,i,cd(),r);return kN(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Xn(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await E4(t),i=new r4(t);return n.register("authEvent",r=>(X(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Gh,{type:Gh},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[Gh];s!==void 0&&n(!!s),Yn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=u4(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return YA()||qA()||Zm()}}const V4=M4;var F_="@firebase/auth",Q_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function P4(e){bs(new yr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;X(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XA(e)},h=new fN(i,r,s,u);return _N(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),bs(new yr("auth-internal",t=>{const n=Rc(t.getProvider("auth").getImmediate());return(i=>new x4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ni(F_,Q_,k4(e)),Ni(F_,Q_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=5*60,L4=XT("authIdTokenMaxAge")||U4;let K_=null;const z4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>L4)return;const r=n==null?void 0:n.token;K_!==r&&(K_=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function j4(e=e0()){const t=gm(e,"auth");if(t.isInitialized())return t.getImmediate();const n=yN(e,{popupRedirectResolver:V4,persistence:[GN,MN,i1]}),i=XT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=z4(s.toString());DN(n,a,()=>a(n.currentUser)),CN(n,l=>a(l))}}const r=KT("auth");return r&&vN(n,`http://${r}`),n}function B4(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}dN({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=vn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",B4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});P4("Browser");const q4={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},c1=t0(q4),dd=RD(c1),H4=j4(c1),G4=({className:e=""})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:M.jsx("path",{d:"m9 18 6-6-6-6"})}),F4=({className:e=""})=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[M.jsx("circle",{cx:"12",cy:"12",r:"4"}),M.jsx("path",{d:"M12 2v2"}),M.jsx("path",{d:"M12 20v2"}),M.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),M.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),M.jsx("path",{d:"M2 12h2"}),M.jsx("path",{d:"M20 12h2"}),M.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),M.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),Q4=({className:e=""})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:M.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),K4=({className:e=""})=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[M.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),M.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Y4=({className:e=""})=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[M.jsx("path",{d:"M19 12H5"}),M.jsx("polyline",{points:"12 19 5 12 12 5"})]}),X4=({className:e=""})=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 ${e}`,children:[M.jsx("circle",{cx:"11",cy:"11",r:"8"}),M.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),$4=({className:e=""})=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[M.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),M.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),Z4=({className:e=""})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:M.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),J4=({className:e=""})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:M.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),W4=({theme:e})=>{const t=jn[e];return M.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.bg}`,children:[M.jsx(J4,{className:"animate-pulse-heart text-pink-400"}),M.jsx("p",{className:`mt-4 text-lg ${t.text} opacity-70`,children:"Загрузка новелл..."})]})},jn={light:{bg:"bg-stone-100",text:"text-stone-800",componentBg:"bg-white",componentText:"text-stone-700",border:"border-stone-200",searchBg:"bg-white",searchPlaceholder:"placeholder-stone-400",searchRing:"focus:ring-pink-400",tgBg:"#f8f7f5",tgHeader:"#FFFFFF",accent:"pink-500",accentHover:"pink-400"},dark:{bg:"bg-gray-900",text:"text-gray-100",componentBg:"bg-gray-800",componentText:"text-gray-200",border:"border-gray-700",searchBg:"bg-gray-800",searchPlaceholder:"placeholder-gray-500",searchRing:"focus:ring-pink-500",tgBg:"#111827",tgHeader:"#1f2937",accent:"pink-500",accentHover:"pink-400"}},tO=({onClose:e,onSelectPlan:t,theme:n})=>{const i=jn[n],r=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return M.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:M.jsxs("div",{className:`w-full max-w-sm rounded-2xl p-6 shadow-lg ${i.componentBg} ${i.text}`,children:[M.jsx(Z4,{className:`mx-auto mb-4 text-${i.accent}`}),M.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),M.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),M.jsx("div",{className:"space-y-3",children:r.map(s=>M.jsxs("button",{onClick:()=>t(s),className:`relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${i.border} ${i.componentBg} hover:border-${i.accentHover}`,children:[M.jsx("p",{className:"font-bold",children:s.name}),M.jsxs("p",{className:"text-sm",children:[s.price," ₽"]})]},s.duration))}),M.jsx("button",{onClick:e,className:`w-full py-3 mt-4 rounded-lg border ${i.border}`,children:"Не сейчас"})]})})},eO=({onClose:e,onSelectMethod:t,theme:n,plan:i})=>{const r=jn[n];return M.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:M.jsxs("div",{className:`w-full max-w-sm rounded-2xl p-6 shadow-lg ${r.componentBg} ${r.text}`,children:[M.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),M.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",i.name," (",i.price," ₽)"]}),M.jsxs("div",{className:"space-y-3",children:[M.jsxs("button",{onClick:()=>t("card"),className:`w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${r.border} ${r.componentBg} hover:border-${r.accentHover}`,children:[M.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),M.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),M.jsxs("button",{onClick:()=>t("tribut"),className:`w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${r.border} ${r.componentBg} hover:border-${r.accentHover}`,children:[M.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),M.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]})]}),M.jsx("button",{onClick:e,className:`w-full py-3 mt-4 rounded-lg border ${r.border}`,children:"Назад"})]})})},h1=({onBack:e,onHome:t,isReader:n=!1,onTextSizeChange:i})=>{const[r,s]=lt.useState(!1);return M.jsxs("div",{className:"fixed bottom-4 right-4 z-20",children:[r&&M.jsxs("div",{className:"flex flex-col items-center gap-3 mb-3",children:[n&&M.jsxs("div",{className:"w-28 h-14 rounded-full bg-white/80 dark:bg-gray-700/80 backdrop-blur-md shadow-lg flex items-center justify-around text-stone-700 dark:text-gray-200",children:[M.jsx("button",{onClick:()=>i(-1),className:"text-2xl font-bold",children:"-"}),M.jsx("button",{onClick:()=>i(1),className:"text-2xl font-bold",children:"+"})]}),e&&M.jsx("button",{onClick:e,className:"w-14 h-14 rounded-full bg-white/80 dark:bg-gray-700/80 backdrop-blur-md shadow-lg flex items-center justify-center text-stone-700 dark:text-gray-200",children:M.jsx(Y4,{})}),t&&M.jsx("button",{onClick:t,className:"w-14 h-14 rounded-full bg-white/80 dark:bg-gray-700/80 backdrop-blur-md shadow-lg flex items-center justify-center text-stone-700 dark:text-gray-200",children:M.jsx(K4,{})})]}),M.jsx("button",{onClick:()=>s(!r),className:"w-16 h-16 rounded-full bg-pink-500 text-white shadow-lg flex items-center justify-center transform transition-transform duration-300 hover:scale-110",children:M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform duration-300 ${r?"rotate-45":"rotate-0"}`,children:[M.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),M.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})},nO=({novels:e,onSelectNovel:t,theme:n,setTheme:i,genreFilter:r,onClearGenreFilter:s})=>{const a=jn[n],[l,u]=lt.useState(""),h=lt.useMemo(()=>e.filter(d=>(!r||d.genres.includes(r))&&d.title.toLowerCase().includes(l.toLowerCase())),[e,l,r]);return!e.length&&!l?M.jsx("div",{className:`p-4 text-center ${a.text}`,children:"Загрузка библиотеки..."}):M.jsxs("div",{className:`p-4 ${a.text}`,children:[M.jsxs("div",{className:"flex justify-between items-center mb-4",children:[M.jsx("h1",{className:"text-3xl font-bold",children:"Библиотека"}),M.jsx("button",{onClick:()=>i(n==="dark"?"light":"dark"),className:`p-2 rounded-full ${a.componentBg} ${a.border} border`,children:n==="dark"?M.jsx(F4,{}):M.jsx(Q4,{})})]}),r&&M.jsxs("div",{className:`flex items-center justify-between p-3 mb-4 rounded-lg border ${a.border} ${a.componentBg}`,children:[M.jsxs("p",{className:"text-sm",children:[M.jsx("span",{className:"opacity-70",children:"Жанр:"}),M.jsx("strong",{className:"ml-2",children:r})]}),M.jsx("button",{onClick:s,className:`text-xs font-bold text-${a.accent} hover:underline`,children:"Сбросить"})]}),M.jsxs("div",{className:"relative mb-6",children:[M.jsx(X4,{className:a.searchPlaceholder}),M.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:l,onChange:d=>u(d.target.value),className:`w-full ${a.searchBg} ${a.border} border rounded-lg py-2 pl-10 pr-4 ${a.text} ${a.searchPlaceholder} focus:outline-none focus:ring-2 ${a.searchRing} transition-shadow duration-300`})]}),M.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4",children:h.map(d=>M.jsxs("div",{onClick:()=>t(d),className:"cursor-pointer group relative",children:[M.jsx("div",{className:`absolute -inset-1 bg-gradient-to-r from-${a.accent} to-purple-500 rounded-lg blur-md opacity-0 group-hover:opacity-50 transition duration-500`}),M.jsxs("div",{className:"relative",children:[M.jsx("img",{src:d.coverUrl,alt:d.title,className:`w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 ${a.border} border`}),M.jsx("h2",{className:`mt-2 font-semibold text-xs truncate ${a.text}`,children:d.title})]})]},d.id))})]})},iO=({novel:e,onSelectChapter:t,onGenreSelect:n,theme:i,subscription:r,botUsername:s,userId:a,chaptersCache:l,lastReadData:u})=>{const h=jn[i],[d,g]=lt.useState([]),[m,_]=lt.useState(!0),[N,V]=lt.useState(!1),[x,b]=lt.useState(null),E=r&&new Date(r.expires_at)>new Date,w=lt.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);lt.useEffect(()=>{l[e.id]?(g(l[e.id]),_(!1)):(_(!0),fetch(`data/chapters/${e.id}.json`).then(v=>v.json()).then(v=>{g(v.chapters||[]),_(!1)}).catch(v=>{console.error(v),g([]),_(!1)}))},[e.id,l]);const D=lt.useMemo(()=>[...d].reverse(),[d]),z=v=>{!E&&v.isPaid?V(!0):t(v)},q=()=>{if(w){const v=d.find(A=>A.id===w);v&&t(v)}},T=v=>b(v),y=async v=>{var R;const A=(R=window.Telegram)==null?void 0:R.WebApp;if(A&&a&&x){const I=ld(dd,"users",a);try{await NA(I,{pendingSubscription:{...x,method:v,date:new Date().toISOString()}},{merge:!0}),A.openTelegramLink(`https://t.me/${s}?start=true`)}catch(S){console.error("Ошибка записи в Firebase:",S),A.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}};return M.jsxs("div",{className:h.text,children:[N&&!x&&M.jsx(tO,{onClose:()=>V(!1),onSelectPlan:T,theme:i}),N&&x&&M.jsx(eO,{onClose:()=>b(null),onSelectMethod:y,theme:i,plan:x}),M.jsxs("div",{className:"relative h-64",children:[M.jsx("img",{src:e.coverUrl,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),M.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${i==="dark"?"from-gray-900 via-gray-900/80":"from-stone-100 via-stone-100/80"} to-transparent`}),M.jsxs("div",{className:"absolute bottom-4 left-4",children:[M.jsx("h1",{className:"text-3xl font-bold",style:{textShadow:"1px 1px 3px rgba(0,0,0,0.5)"},children:e.title}),M.jsx("p",{className:"text-sm",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.5)"},children:e.author})]})]}),M.jsxs("div",{className:"p-4",children:[M.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(v=>M.jsx("button",{onClick:()=>n(v),className:`text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 ${i==="dark"?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:v},v))}),M.jsx("p",{className:`text-sm mb-6 ${i==="dark"?"text-gray-300":"text-stone-600"}`,children:e.description}),w&&M.jsxs("button",{onClick:q,className:`w-full py-3 mb-4 rounded-lg bg-${h.accent} text-white font-bold`,children:["Продолжить чтение (Глава ",w,")"]}),M.jsxs("div",{className:"flex justify-between items-center mb-4",children:[M.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),E&&M.jsxs("p",{className:"text-sm text-green-500",children:["Подписка до ",new Date(r.expires_at).toLocaleDateString()]})]}),m?M.jsx("p",{className:h.text,children:"Загрузка глав..."}):M.jsx("div",{className:"flex flex-col gap-3",children:D.map(v=>{const A=!E&&v.isPaid;return M.jsxs("div",{onClick:()=>z(v),className:`p-4 ${h.componentBg} rounded-xl cursor-pointer transition-colors duration-200 hover:border-${h.accentHover} border ${h.border} flex items-center justify-between ${A?"opacity-70":""}`,children:[w===v.id&&M.jsx("span",{className:`absolute left-2 text-xs text-${h.accent}`,children:"●"}),M.jsx("div",{children:M.jsx("p",{className:`font-semibold ${h.componentText}`,children:v.title})}),A?M.jsx($4,{className:h.text}):M.jsx(G4,{className:h.text})]},v.id)})})]})]})},rO=({chapter:e,novel:t,theme:n,onTextSizeChange:i})=>{const r=jn[n],[s,a]=lt.useState(18),l=u=>{a(h=>Math.max(12,Math.min(32,h+u))),i(u)};return M.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${r.bg}`,children:[M.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto",children:[M.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 text-center",children:t.title}),M.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80",children:e.title}),M.jsx("div",{className:`whitespace-pre-wrap leading-relaxed ${r.text}`,style:{fontSize:`${s}px`},children:e.content})]}),M.jsx(h1,{isReader:!0,onTextSizeChange:l})]})};function sO(){const[e,t]=lt.useState("light"),[n,i]=lt.useState("list"),[r,s]=lt.useState([]),[a,l]=lt.useState(null),[u,h]=lt.useState(null),[d,g]=lt.useState(null),[m,_]=lt.useState(null),[N,V]=lt.useState(null),[x,b]=lt.useState(!0),[E,w]=lt.useState({}),[D,z]=lt.useState(null),q="tenebrisverbot";lt.useEffect(()=>{(async()=>{var L,G,F,gt;try{const pt=(L=window.Telegram)==null?void 0:L.WebApp;let an="guest_user";pt&&(pt.ready(),pt.expand(),an=((gt=(F=(G=pt.initDataUnsafe)==null?void 0:G.user)==null?void 0:F.id)==null?void 0:gt.toString())||"guest_user"),V(an),await bN(H4);const ge=ld(dd,"users",an),Ct=await zD(ge);if(Ct.exists()){const Lo=Ct.data();_(Lo.subscription||null),z(Lo.lastRead||null)}const Be=await fetch("data/novels.json");if(!Be.ok)throw new Error("Failed to fetch novels");const qe=await Be.json();s(qe.novels)}catch(pt){console.error("Ошибка инициализации:",pt)}finally{b(!1)}})()},[]),lt.useEffect(()=>{r.length>0&&r.forEach(ut=>{fetch(`data/chapters/${ut.id}.json`).then(L=>L.json()).then(L=>w(G=>({...G,[ut.id]:L.chapters||[]}))).catch(L=>console.error(`Не удалось предзагрузить главы для ${ut.title}:`,L))})},[r]),lt.useEffect(()=>{document.documentElement.className=e},[e]);const T=lt.useCallback(()=>{n==="reader"?i("details"):n==="details"&&(i("list"),g(null))},[n]),y=lt.useCallback(()=>{i("list"),g(null)},[]);lt.useEffect(()=>{var L;const ut=(L=window.Telegram)==null?void 0:L.WebApp;if(ut)return ut.onEvent("backButtonClicked",T),n==="list"?ut.BackButton.hide():ut.BackButton.show(),()=>ut.offEvent("backButtonClicked",T)},[n,T]),lt.useEffect(()=>{var L;const ut=(L=window.Telegram)==null?void 0:L.WebApp;ut&&(ut.setHeaderColor(jn[e].tgHeader),ut.setBackgroundColor(jn[e].tgBg))},[e]);const v=async ut=>{if(h(ut),i("reader"),N&&N!=="guest_user"){const L=ld(dd,"users",N),G={[a.id]:{novelId:a.id,chapterId:ut.id,timestamp:new Date().toISOString()}};try{await BD(L,{lastRead:{...D,...G}}),z(F=>({...F,...G}))}catch(F){F.code==="not-found"?(await NA(L,{lastRead:G}),z(G)):console.error("Не удалось сохранить прогресс:",F)}}},A=ut=>{l(ut),i("details")},R=ut=>{g(ut),i("list")},I=()=>{g(null)};if(x)return M.jsx(W4,{theme:e});const S=()=>{switch(n){case"details":return M.jsx(iO,{novel:a,onSelectChapter:v,onGenreSelect:R,theme:e,subscription:m,botUsername:q,userId:N,chaptersCache:E,lastReadData:D});case"reader":return M.jsx(rO,{chapter:u,novel:a,theme:e,onTextSizeChange:()=>{}});case"list":default:return M.jsx(nO,{novels:r,onSelectNovel:A,theme:e,setTheme:t,genreFilter:d,onClearGenreFilter:I})}},Ce=jn[e];return M.jsxs("main",{className:`${Ce.bg} min-h-screen`,children:[S(),n!=="list"&&M.jsx(h1,{onBack:T,onHome:y})]})}Lw.createRoot(document.getElementById("root")).render(M.jsx(lt.StrictMode,{children:M.jsx(sO,{})}));
