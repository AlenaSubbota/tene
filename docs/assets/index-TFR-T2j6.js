(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Kb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zv={exports:{}},Nc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yb=Symbol.for("react.transitional.element"),Xb=Symbol.for("react.fragment");function Bv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:Yb,type:e,key:i,ref:t!==void 0?t:null,props:n}}Nc.Fragment=Xb;Nc.jsx=Bv;Nc.jsxs=Bv;zv.exports=Nc;var E=zv.exports,qv={exports:{}},tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd=Symbol.for("react.transitional.element"),$b=Symbol.for("react.portal"),Zb=Symbol.for("react.fragment"),Wb=Symbol.for("react.strict_mode"),Jb=Symbol.for("react.profiler"),t1=Symbol.for("react.consumer"),e1=Symbol.for("react.context"),n1=Symbol.for("react.forward_ref"),i1=Symbol.for("react.suspense"),r1=Symbol.for("react.memo"),Hv=Symbol.for("react.lazy"),Lg=Symbol.iterator;function s1(e){return e===null||typeof e!="object"?null:(e=Lg&&e[Lg]||e["@@iterator"],typeof e=="function"?e:null)}var Gv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fv=Object.assign,Qv={};function sa(e,t,n){this.props=e,this.context=t,this.refs=Qv,this.updater=n||Gv}sa.prototype.isReactComponent={};sa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Kv(){}Kv.prototype=sa.prototype;function Yd(e,t,n){this.props=e,this.context=t,this.refs=Qv,this.updater=n||Gv}var Xd=Yd.prototype=new Kv;Xd.constructor=Yd;Fv(Xd,sa.prototype);Xd.isPureReactComponent=!0;var Ug=Array.isArray,Dt={H:null,A:null,T:null,S:null,V:null},Yv=Object.prototype.hasOwnProperty;function $d(e,t,n,i,r,s){return n=s.ref,{$$typeof:Kd,type:e,key:t,ref:n!==void 0?n:null,props:s}}function a1(e,t){return $d(e.type,t,void 0,void 0,void 0,e.props)}function Zd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Kd}function o1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var jg=/\/+/g;function xh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?o1(""+e.key):t.toString(36)}function zg(){}function l1(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(zg,zg):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function ss(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Kd:case $b:a=!0;break;case Hv:return a=e._init,ss(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+xh(e,0):i,Ug(r)?(n="",a!=null&&(n=a.replace(jg,"$&/")+"/"),ss(r,t,n,"",function(h){return h})):r!=null&&(Zd(r)&&(r=a1(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(jg,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(Ug(e))for(var u=0;u<e.length;u++)i=e[u],s=l+xh(i,u),a+=ss(i,t,n,s,r);else if(u=s1(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+xh(i,u++),a+=ss(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return ss(l1(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Bl(e,t,n){if(e==null)return e;var i=[],r=0;return ss(e,i,"","",function(s){return t.call(n,s,r++)}),i}function u1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Bg=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function c1(){}tt.Children={map:Bl,forEach:function(e,t,n){Bl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Bl(e,function(){t++}),t},toArray:function(e){return Bl(e,function(t){return t})||[]},only:function(e){if(!Zd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};tt.Component=sa;tt.Fragment=Zb;tt.Profiler=Jb;tt.PureComponent=Yd;tt.StrictMode=Wb;tt.Suspense=i1;tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Dt;tt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Dt.H.useMemoCache(e)}};tt.cache=function(e){return function(){return e.apply(null,arguments)}};tt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=Fv({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!Yv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return $d(e.type,r,void 0,void 0,s,i)};tt.createContext=function(e){return e={$$typeof:e1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:t1,_context:e},e};tt.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)Yv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return $d(e,s,void 0,void 0,null,r)};tt.createRef=function(){return{current:null}};tt.forwardRef=function(e){return{$$typeof:n1,render:e}};tt.isValidElement=Zd;tt.lazy=function(e){return{$$typeof:Hv,_payload:{_status:-1,_result:e},_init:u1}};tt.memo=function(e,t){return{$$typeof:r1,type:e,compare:t===void 0?null:t}};tt.startTransition=function(e){var t=Dt.T,n={};Dt.T=n;try{var i=e(),r=Dt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(c1,Bg)}catch(s){Bg(s)}finally{Dt.T=t}};tt.unstable_useCacheRefresh=function(){return Dt.H.useCacheRefresh()};tt.use=function(e){return Dt.H.use(e)};tt.useActionState=function(e,t,n){return Dt.H.useActionState(e,t,n)};tt.useCallback=function(e,t){return Dt.H.useCallback(e,t)};tt.useContext=function(e){return Dt.H.useContext(e)};tt.useDebugValue=function(){};tt.useDeferredValue=function(e,t){return Dt.H.useDeferredValue(e,t)};tt.useEffect=function(e,t,n){var i=Dt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};tt.useId=function(){return Dt.H.useId()};tt.useImperativeHandle=function(e,t,n){return Dt.H.useImperativeHandle(e,t,n)};tt.useInsertionEffect=function(e,t){return Dt.H.useInsertionEffect(e,t)};tt.useLayoutEffect=function(e,t){return Dt.H.useLayoutEffect(e,t)};tt.useMemo=function(e,t){return Dt.H.useMemo(e,t)};tt.useOptimistic=function(e,t){return Dt.H.useOptimistic(e,t)};tt.useReducer=function(e,t,n){return Dt.H.useReducer(e,t,n)};tt.useRef=function(e){return Dt.H.useRef(e)};tt.useState=function(e){return Dt.H.useState(e)};tt.useSyncExternalStore=function(e,t,n){return Dt.H.useSyncExternalStore(e,t,n)};tt.useTransition=function(){return Dt.H.useTransition()};tt.version="19.1.1";qv.exports=tt;var G=qv.exports;const h1=Kb(G);var Xv={exports:{}},Dc={},$v={exports:{}},Zv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,K){var $=q.length;q.push(K);t:for(;0<$;){var pt=$-1>>>1,ht=q[pt];if(0<r(ht,K))q[pt]=K,q[$]=ht,$=pt;else break t}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var K=q[0],$=q.pop();if($!==K){q[0]=$;t:for(var pt=0,ht=q.length,yn=ht>>>1;pt<yn;){var Ft=2*(pt+1)-1,wt=q[Ft],le=Ft+1,ue=q[le];if(0>r(wt,$))le<ht&&0>r(ue,wt)?(q[pt]=ue,q[le]=$,pt=le):(q[pt]=wt,q[Ft]=$,pt=Ft);else if(le<ht&&0>r(ue,$))q[pt]=ue,q[le]=$,pt=le;else break t}}return K}function r(q,K){var $=q.sortIndex-K.sortIndex;return $!==0?$:q.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,p=null,m=3,y=!1,D=!1,V=!1,M=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function x(q){for(var K=n(h);K!==null;){if(K.callback===null)i(h);else if(K.startTime<=q)i(h),K.sortIndex=K.expirationTime,t(u,K);else break;K=n(h)}}function U(q){if(V=!1,x(q),!D)if(n(u)!==null)D=!0,B||(B=!0,C());else{var K=n(h);K!==null&&Pe(U,K.startTime-q)}}var B=!1,T=-1,_=5,A=-1;function S(){return M?!0:!(e.unstable_now()-A<_)}function I(){if(M=!1,B){var q=e.unstable_now();A=q;var K=!0;try{t:{D=!1,V&&(V=!1,v(T),T=-1),y=!0;var $=m;try{e:{for(x(q),p=n(u);p!==null&&!(p.expirationTime>q&&S());){var pt=p.callback;if(typeof pt=="function"){p.callback=null,m=p.priorityLevel;var ht=pt(p.expirationTime<=q);if(q=e.unstable_now(),typeof ht=="function"){p.callback=ht,x(q),K=!0;break e}p===n(u)&&i(u),x(q)}else i(u);p=n(u)}if(p!==null)K=!0;else{var yn=n(h);yn!==null&&Pe(U,yn.startTime-q),K=!1}}break t}finally{p=null,m=$,y=!1}K=void 0}}finally{K?C():B=!1}}}var C;if(typeof R=="function")C=function(){R(I)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,Ce=w.port2;w.port1.onmessage=I,C=function(){Ce.postMessage(null)}}else C=function(){b(I,0)};function Pe(q,K){T=b(function(){q(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var $=m;m=K;try{return q()}finally{m=$}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var $=m;m=q;try{return K()}finally{m=$}},e.unstable_scheduleCallback=function(q,K,$){var pt=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?pt+$:pt):$=pt,q){case 1:var ht=-1;break;case 2:ht=250;break;case 5:ht=1073741823;break;case 4:ht=1e4;break;default:ht=5e3}return ht=$+ht,q={id:d++,callback:K,priorityLevel:q,startTime:$,expirationTime:ht,sortIndex:-1},$>pt?(q.sortIndex=$,t(h,q),n(u)===null&&q===n(h)&&(V?(v(T),T=-1):V=!0,Pe(U,$-pt))):(q.sortIndex=ht,t(u,q),D||y||(D=!0,B||(B=!0,C()))),q},e.unstable_shouldYield=S,e.unstable_wrapCallback=function(q){var K=m;return function(){var $=m;m=K;try{return q.apply(this,arguments)}finally{m=$}}}})(Zv);$v.exports=Zv;var f1=$v.exports,Wv={exports:{}},ke={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d1=G;function Jv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Si(){}var Me={d:{f:Si,r:function(){throw Error(Jv(522))},D:Si,C:Si,L:Si,m:Si,X:Si,S:Si,M:Si},p:0,findDOMNode:null},m1=Symbol.for("react.portal");function p1(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m1,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var to=d1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function xc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Me;ke.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Jv(299));return p1(e,t,null,n)};ke.flushSync=function(e){var t=to.T,n=Me.p;try{if(to.T=null,Me.p=2,e)return e()}finally{to.T=t,Me.p=n,Me.d.f()}};ke.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Me.d.C(e,t))};ke.prefetchDNS=function(e){typeof e=="string"&&Me.d.D(e)};ke.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=xc(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Me.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Me.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};ke.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=xc(t.as,t.crossOrigin);Me.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Me.d.M(e)};ke.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=xc(n,t.crossOrigin);Me.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};ke.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=xc(t.as,t.crossOrigin);Me.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Me.d.m(e)};ke.requestFormReset=function(e){Me.d.r(e)};ke.unstable_batchedUpdates=function(e,t){return e(t)};ke.useFormState=function(e,t,n){return to.H.useFormState(e,t,n)};ke.useFormStatus=function(){return to.H.useHostTransitionStatus()};ke.version="19.1.1";function tE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tE)}catch(e){console.error(e)}}tE(),Wv.exports=ke;var g1=Wv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var te=f1,eE=G,y1=g1;function L(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function nE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function iE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qg(e){if(Yo(e)!==e)throw Error(L(188))}function _1(e){var t=e.alternate;if(!t){if(t=Yo(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return qg(r),e;if(s===i)return qg(r),t;s=s.sibling}throw Error(L(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(L(189))}}if(n.alternate!==i)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function rE(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=rE(e),t!==null)return t;e=e.sibling}return null}var Ct=Object.assign,v1=Symbol.for("react.element"),ql=Symbol.for("react.transitional.element"),Ga=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),sE=Symbol.for("react.strict_mode"),bf=Symbol.for("react.profiler"),E1=Symbol.for("react.provider"),aE=Symbol.for("react.consumer"),Xn=Symbol.for("react.context"),Wd=Symbol.for("react.forward_ref"),wf=Symbol.for("react.suspense"),Rf=Symbol.for("react.suspense_list"),Jd=Symbol.for("react.memo"),Ii=Symbol.for("react.lazy"),If=Symbol.for("react.activity"),T1=Symbol.for("react.memo_cache_sentinel"),Hg=Symbol.iterator;function Pa(e){return e===null||typeof e!="object"?null:(e=Hg&&e[Hg]||e["@@iterator"],typeof e=="function"?e:null)}var A1=Symbol.for("react.client.reference");function Cf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===A1?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ds:return"Fragment";case bf:return"Profiler";case sE:return"StrictMode";case wf:return"Suspense";case Rf:return"SuspenseList";case If:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Ga:return"Portal";case Xn:return(e.displayName||"Context")+".Provider";case aE:return(e._context.displayName||"Context")+".Consumer";case Wd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Jd:return t=e.displayName||null,t!==null?t:Cf(e.type)||"Memo";case Ii:t=e._payload,e=e._init;try{return Cf(e(t))}catch{}}return null}var Fa=Array.isArray,Z=eE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt=y1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Rr={pending:!1,data:null,method:null,action:null},Nf=[],ms=-1;function Bn(e){return{current:e}}function oe(e){0>ms||(e.current=Nf[ms],Nf[ms]=null,ms--)}function xt(e,t){ms++,Nf[ms]=e.current,e.current=t}var On=Bn(null),bo=Bn(null),qi=Bn(null),Ou=Bn(null);function Vu(e,t){switch(xt(qi,t),xt(bo,e),xt(On,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Yy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Yy(t),e=S0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}oe(On),xt(On,e)}function zs(){oe(On),oe(bo),oe(qi)}function Df(e){e.memoizedState!==null&&xt(Ou,e);var t=On.current,n=S0(t,e.type);t!==n&&(xt(bo,e),xt(On,n))}function Mu(e){bo.current===e&&(oe(On),oe(bo)),Ou.current===e&&(oe(Ou),Mo._currentValue=Rr)}var xf=Object.prototype.hasOwnProperty,tm=te.unstable_scheduleCallback,Oh=te.unstable_cancelCallback,S1=te.unstable_shouldYield,b1=te.unstable_requestPaint,Vn=te.unstable_now,w1=te.unstable_getCurrentPriorityLevel,oE=te.unstable_ImmediatePriority,lE=te.unstable_UserBlockingPriority,ku=te.unstable_NormalPriority,R1=te.unstable_LowPriority,uE=te.unstable_IdlePriority,I1=te.log,C1=te.unstable_setDisableYieldValue,Xo=null,Je=null;function Li(e){if(typeof I1=="function"&&C1(e),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(Xo,e)}catch{}}var tn=Math.clz32?Math.clz32:x1,N1=Math.log,D1=Math.LN2;function x1(e){return e>>>=0,e===0?32:31-(N1(e)/D1|0)|0}var Hl=256,Gl=4194304;function Tr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Oc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=Tr(i):(a&=l,a!==0?r=Tr(a):n||(n=l&~e,n!==0&&(r=Tr(n))))):(l=i&~s,l!==0?r=Tr(l):a!==0?r=Tr(a):n||(n=i&~e,n!==0&&(r=Tr(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function $o(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function O1(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cE(){var e=Hl;return Hl<<=1,!(Hl&4194048)&&(Hl=256),e}function hE(){var e=Gl;return Gl<<=1,!(Gl&62914560)&&(Gl=4194304),e}function Vh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Zo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function V1(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-tn(n),p=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var y=m[d];y!==null&&(y.lane&=-536870913)}n&=~p}i!==0&&fE(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function fE(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-tn(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function dE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-tn(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function em(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function nm(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function mE(){var e=mt.p;return e!==0?e:(e=window.event,e===void 0?32:V0(e.type))}function M1(e,t){var n=mt.p;try{return mt.p=e,t()}finally{mt.p=n}}var hr=Math.random().toString(36).slice(2),we="__reactFiber$"+hr,Ge="__reactProps$"+hr,aa="__reactContainer$"+hr,Of="__reactEvents$"+hr,k1="__reactListeners$"+hr,P1="__reactHandles$"+hr,Gg="__reactResources$"+hr,Wo="__reactMarker$"+hr;function im(e){delete e[we],delete e[Ge],delete e[Of],delete e[k1],delete e[P1]}function ps(e){var t=e[we];if(t)return t;for(var n=e.parentNode;n;){if(t=n[aa]||n[we]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Zy(e);e!==null;){if(n=e[we])return n;e=Zy(e)}return t}e=n,n=e.parentNode}return null}function oa(e){if(e=e[we]||e[aa]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Qa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(L(33))}function Is(e){var t=e[Gg];return t||(t=e[Gg]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function re(e){e[Wo]=!0}var pE=new Set,gE={};function Gr(e,t){Bs(e,t),Bs(e+"Capture",t)}function Bs(e,t){for(gE[e]=t,e=0;e<t.length;e++)pE.add(t[e])}var L1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fg={},Qg={};function U1(e){return xf.call(Qg,e)?!0:xf.call(Fg,e)?!1:L1.test(e)?Qg[e]=!0:(Fg[e]=!0,!1)}function lu(e,t,n){if(U1(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Fl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Fn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Mh,Kg;function as(e){if(Mh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Mh=t&&t[1]||"",Kg=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mh+e+Kg}var kh=!1;function Ph(e,t){if(!e||kh)return"";kh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(y){var m=y}Reflect.construct(e,[],p)}else{try{p.call()}catch(y){m=y}e.call(p.prototype)}}else{try{throw Error()}catch(y){m=y}(p=e())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(y){if(y&&m&&typeof y.stack=="string")return[y.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{kh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?as(n):""}function j1(e){switch(e.tag){case 26:case 27:case 5:return as(e.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 15:return Ph(e.type,!1);case 11:return Ph(e.type.render,!1);case 1:return Ph(e.type,!0);case 31:return as("Activity");default:return""}}function Yg(e){try{var t="";do t+=j1(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function ln(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function z1(e){var t=yE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pu(e){e._valueTracker||(e._valueTracker=z1(e))}function _E(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=yE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Lu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var B1=/[\n"\\]/g;function hn(e){return e.replace(B1,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Vf(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ln(t)):e.value!==""+ln(t)&&(e.value=""+ln(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Mf(e,a,ln(t)):n!=null?Mf(e,a,ln(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+ln(l):e.removeAttribute("name")}function vE(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+ln(n):"",t=t!=null?""+ln(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Mf(e,t,n){t==="number"&&Lu(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Cs(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ln(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function EE(e,t,n){if(t!=null&&(t=""+ln(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+ln(n):""}function TE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(L(92));if(Fa(i)){if(1<i.length)throw Error(L(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=ln(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function qs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var q1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xg(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||q1.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function AE(e,t,n){if(t!=null&&typeof t!="object")throw Error(L(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Xg(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&Xg(e,s,t[s])}function rm(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var H1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),G1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uu(e){return G1.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var kf=null;function sm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gs=null,Ns=null;function $g(e){var t=oa(e);if(t&&(e=t.stateNode)){var n=e[Ge]||null;t:switch(e=t.stateNode,t.type){case"input":if(Vf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+hn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Ge]||null;if(!r)throw Error(L(90));Vf(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&_E(i)}break t;case"textarea":EE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Cs(e,!!n.multiple,t,!1)}}}var Lh=!1;function SE(e,t,n){if(Lh)return e(t,n);Lh=!0;try{var i=e(t);return i}finally{if(Lh=!1,(gs!==null||Ns!==null)&&(qc(),gs&&(t=gs,e=Ns,Ns=gs=null,$g(t),e)))for(t=0;t<e.length;t++)$g(e[t])}}function wo(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Ge]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pf=!1;if(ai)try{var La={};Object.defineProperty(La,"passive",{get:function(){Pf=!0}}),window.addEventListener("test",La,La),window.removeEventListener("test",La,La)}catch{Pf=!1}var Ui=null,am=null,cu=null;function bE(){if(cu)return cu;var e,t=am,n=t.length,i,r="value"in Ui?Ui.value:Ui.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return cu=r.slice(e,1<i?1-i:void 0)}function hu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ql(){return!0}function Zg(){return!1}function Fe(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ql:Zg,this.isPropagationStopped=Zg,this}return Ct(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ql)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ql)},persist:function(){},isPersistent:Ql}),t}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vc=Fe(Fr),Jo=Ct({},Fr,{view:0,detail:0}),F1=Fe(Jo),Uh,jh,Ua,Mc=Ct({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:om,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ua&&(Ua&&e.type==="mousemove"?(Uh=e.screenX-Ua.screenX,jh=e.screenY-Ua.screenY):jh=Uh=0,Ua=e),Uh)},movementY:function(e){return"movementY"in e?e.movementY:jh}}),Wg=Fe(Mc),Q1=Ct({},Mc,{dataTransfer:0}),K1=Fe(Q1),Y1=Ct({},Jo,{relatedTarget:0}),zh=Fe(Y1),X1=Ct({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),$1=Fe(X1),Z1=Ct({},Fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),W1=Fe(Z1),J1=Ct({},Fr,{data:0}),Jg=Fe(J1),tw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ew={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nw[e])?!!t[e]:!1}function om(){return iw}var rw=Ct({},Jo,{key:function(e){if(e.key){var t=tw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ew[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:om,charCode:function(e){return e.type==="keypress"?hu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sw=Fe(rw),aw=Ct({},Mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ty=Fe(aw),ow=Ct({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:om}),lw=Fe(ow),uw=Ct({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),cw=Fe(uw),hw=Ct({},Mc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fw=Fe(hw),dw=Ct({},Fr,{newState:0,oldState:0}),mw=Fe(dw),pw=[9,13,27,32],lm=ai&&"CompositionEvent"in window,eo=null;ai&&"documentMode"in document&&(eo=document.documentMode);var gw=ai&&"TextEvent"in window&&!eo,wE=ai&&(!lm||eo&&8<eo&&11>=eo),ey=" ",ny=!1;function RE(e,t){switch(e){case"keyup":return pw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ys=!1;function yw(e,t){switch(e){case"compositionend":return IE(t);case"keypress":return t.which!==32?null:(ny=!0,ey);case"textInput":return e=t.data,e===ey&&ny?null:e;default:return null}}function _w(e,t){if(ys)return e==="compositionend"||!lm&&RE(e,t)?(e=bE(),cu=am=Ui=null,ys=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wE&&t.locale!=="ko"?null:t.data;default:return null}}var vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!vw[e.type]:t==="textarea"}function CE(e,t,n,i){gs?Ns?Ns.push(i):Ns=[i]:gs=i,t=ec(t,"onChange"),0<t.length&&(n=new Vc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var no=null,Ro=null;function Ew(e){E0(e,0)}function kc(e){var t=Qa(e);if(_E(t))return e}function ry(e,t){if(e==="change")return t}var NE=!1;if(ai){var Bh;if(ai){var qh="oninput"in document;if(!qh){var sy=document.createElement("div");sy.setAttribute("oninput","return;"),qh=typeof sy.oninput=="function"}Bh=qh}else Bh=!1;NE=Bh&&(!document.documentMode||9<document.documentMode)}function ay(){no&&(no.detachEvent("onpropertychange",DE),Ro=no=null)}function DE(e){if(e.propertyName==="value"&&kc(Ro)){var t=[];CE(t,Ro,e,sm(e)),SE(Ew,t)}}function Tw(e,t,n){e==="focusin"?(ay(),no=t,Ro=n,no.attachEvent("onpropertychange",DE)):e==="focusout"&&ay()}function Aw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kc(Ro)}function Sw(e,t){if(e==="click")return kc(t)}function bw(e,t){if(e==="input"||e==="change")return kc(t)}function ww(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var an=typeof Object.is=="function"?Object.is:ww;function Io(e,t){if(an(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!xf.call(t,r)||!an(e[r],t[r]))return!1}return!0}function oy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ly(e,t){var n=oy(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=oy(n)}}function xE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function OE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Lu(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Lu(e.document)}return t}function um(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Rw=ai&&"documentMode"in document&&11>=document.documentMode,_s=null,Lf=null,io=null,Uf=!1;function uy(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uf||_s==null||_s!==Lu(i)||(i=_s,"selectionStart"in i&&um(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),io&&Io(io,i)||(io=i,i=ec(Lf,"onSelect"),0<i.length&&(t=new Vc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=_s)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vs={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionrun:Er("Transition","TransitionRun"),transitionstart:Er("Transition","TransitionStart"),transitioncancel:Er("Transition","TransitionCancel"),transitionend:Er("Transition","TransitionEnd")},Hh={},VE={};ai&&(VE=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function Qr(e){if(Hh[e])return Hh[e];if(!vs[e])return e;var t=vs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in VE)return Hh[e]=t[n];return e}var ME=Qr("animationend"),kE=Qr("animationiteration"),PE=Qr("animationstart"),Iw=Qr("transitionrun"),Cw=Qr("transitionstart"),Nw=Qr("transitioncancel"),LE=Qr("transitionend"),UE=new Map,jf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jf.push("scrollEnd");function Rn(e,t){UE.set(e,t),Gr(t,[e])}var cy=new WeakMap;function fn(e,t){if(typeof e=="object"&&e!==null){var n=cy.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Yg(t)},cy.set(e,t),t)}return{value:e,source:t,stack:Yg(t)}}var on=[],Es=0,cm=0;function Pc(){for(var e=Es,t=cm=Es=0;t<e;){var n=on[t];on[t++]=null;var i=on[t];on[t++]=null;var r=on[t];on[t++]=null;var s=on[t];if(on[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&jE(n,r,s)}}function Lc(e,t,n,i){on[Es++]=e,on[Es++]=t,on[Es++]=n,on[Es++]=i,cm|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function hm(e,t,n,i){return Lc(e,t,n,i),Uu(e)}function la(e,t){return Lc(e,null,null,t),Uu(e)}function jE(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-tn(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function Uu(e){if(50<mo)throw mo=0,ad=null,Error(L(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ts={};function Dw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $e(e,t,n,i){return new Dw(e,t,n,i)}function fm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ni(e,t){var n=e.alternate;return n===null?(n=$e(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zE(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function fu(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")fm(e)&&(a=1);else if(typeof e=="string")a=OR(e,n,On.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case If:return e=$e(31,n,t,r),e.elementType=If,e.lanes=s,e;case ds:return Ir(n.children,r,s,t);case sE:a=8,r|=24;break;case bf:return e=$e(12,n,t,r|2),e.elementType=bf,e.lanes=s,e;case wf:return e=$e(13,n,t,r),e.elementType=wf,e.lanes=s,e;case Rf:return e=$e(19,n,t,r),e.elementType=Rf,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case E1:case Xn:a=10;break t;case aE:a=9;break t;case Wd:a=11;break t;case Jd:a=14;break t;case Ii:a=16,i=null;break t}a=29,n=Error(L(130,e===null?"null":typeof e,"")),i=null}return t=$e(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Ir(e,t,n,i){return e=$e(7,e,i,t),e.lanes=n,e}function Gh(e,t,n){return e=$e(6,e,null,t),e.lanes=n,e}function Fh(e,t,n){return t=$e(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var As=[],Ss=0,ju=null,zu=0,un=[],cn=0,Cr=null,$n=1,Zn="";function Ar(e,t){As[Ss++]=zu,As[Ss++]=ju,ju=e,zu=t}function BE(e,t,n){un[cn++]=$n,un[cn++]=Zn,un[cn++]=Cr,Cr=e;var i=$n;e=Zn;var r=32-tn(i)-1;i&=~(1<<r),n+=1;var s=32-tn(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,$n=1<<32-tn(t)+r|n<<r|i,Zn=s+e}else $n=1<<s|n<<r|i,Zn=e}function dm(e){e.return!==null&&(Ar(e,1),BE(e,1,0))}function mm(e){for(;e===ju;)ju=As[--Ss],As[Ss]=null,zu=As[--Ss],As[Ss]=null;for(;e===Cr;)Cr=un[--cn],un[cn]=null,Zn=un[--cn],un[cn]=null,$n=un[--cn],un[cn]=null}var Oe=null,Ut=null,dt=!1,Nr=null,Dn=!1,zf=Error(L(519));function Vr(e){var t=Error(L(418,""));throw Co(fn(t,e)),zf}function hy(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[we]=e,t[Ge]=i,n){case"dialog":nt("cancel",t),nt("close",t);break;case"iframe":case"object":case"embed":nt("load",t);break;case"video":case"audio":for(n=0;n<xo.length;n++)nt(xo[n],t);break;case"source":nt("error",t);break;case"img":case"image":case"link":nt("error",t),nt("load",t);break;case"details":nt("toggle",t);break;case"input":nt("invalid",t),vE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Pu(t);break;case"select":nt("invalid",t);break;case"textarea":nt("invalid",t),TE(t,i.value,i.defaultValue,i.children),Pu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||A0(t.textContent,n)?(i.popover!=null&&(nt("beforetoggle",t),nt("toggle",t)),i.onScroll!=null&&nt("scroll",t),i.onScrollEnd!=null&&nt("scrollend",t),i.onClick!=null&&(t.onclick=Fc),t=!0):t=!1,t||Vr(e)}function fy(e){for(Oe=e.return;Oe;)switch(Oe.tag){case 5:case 13:Dn=!1;return;case 27:case 3:Dn=!0;return;default:Oe=Oe.return}}function ja(e){if(e!==Oe)return!1;if(!dt)return fy(e),dt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||fd(e.type,e.memoizedProps)),n=!n),n&&Ut&&Vr(e),fy(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Ut=Sn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Ut=null}}else t===27?(t=Ut,fr(e.type)?(e=pd,pd=null,Ut=e):Ut=t):Ut=Oe?Sn(e.stateNode.nextSibling):null;return!0}function tl(){Ut=Oe=null,dt=!1}function dy(){var e=Nr;return e!==null&&(qe===null?qe=e:qe.push.apply(qe,e),Nr=null),e}function Co(e){Nr===null?Nr=[e]:Nr.push(e)}var Bf=Bn(null),Kr=null,Wn=null;function Ni(e,t,n){xt(Bf,t._currentValue),t._currentValue=n}function ii(e){e._currentValue=Bf.current,oe(Bf)}function qf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Hf(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),qf(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(L(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),qf(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function el(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(L(387));if(a=a.memoizedProps,a!==null){var l=r.type;an(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===Ou.current){if(a=r.alternate,a===null)throw Error(L(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Mo):e=[Mo])}r=r.return}e!==null&&Hf(t,e,n,i),t.flags|=262144}function Bu(e){for(e=e.firstContext;e!==null;){if(!an(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Mr(e){Kr=e,Wn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Re(e){return qE(Kr,e)}function Kl(e,t){return Kr===null&&Mr(e),qE(e,t)}function qE(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Wn===null){if(e===null)throw Error(L(308));Wn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Wn=Wn.next=t;return n}var xw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Ow=te.unstable_scheduleCallback,Vw=te.unstable_NormalPriority,Zt={$$typeof:Xn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pm(){return{controller:new xw,data:new Map,refCount:0}}function nl(e){e.refCount--,e.refCount===0&&Ow(Vw,function(){e.controller.abort()})}var ro=null,Gf=0,Hs=0,Ds=null;function Mw(e,t){if(ro===null){var n=ro=[];Gf=0,Hs=Um(),Ds={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Gf++,t.then(my,my),t}function my(){if(--Gf===0&&ro!==null){Ds!==null&&(Ds.status="fulfilled");var e=ro;ro=null,Hs=0,Ds=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function kw(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var py=Z.S;Z.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Mw(e,t),py!==null&&py(e,t)};var Dr=Bn(null);function gm(){var e=Dr.current;return e!==null?e:bt.pooledCache}function du(e,t){t===null?xt(Dr,Dr.current):xt(Dr,t.pool)}function HE(){var e=gm();return e===null?null:{parent:Zt._currentValue,pool:e}}var il=Error(L(460)),GE=Error(L(474)),Uc=Error(L(542)),Ff={then:function(){}};function gy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Yl(){}function FE(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Yl,Yl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,_y(e),e;default:if(typeof t.status=="string")t.then(Yl,Yl);else{if(e=bt,e!==null&&100<e.shellSuspendCounter)throw Error(L(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,_y(e),e}throw so=t,il}}var so=null;function yy(){if(so===null)throw Error(L(459));var e=so;return so=null,e}function _y(e){if(e===il||e===Uc)throw Error(L(483))}var Ci=!1;function ym(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Hi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Gi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,yt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Uu(e),jE(e,null,n),t}return Lc(e,i,t,n),Uu(e)}function ao(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,dE(e,n)}}function Qh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Kf=!1;function oo(){if(Kf){var e=Ds;if(e!==null)throw e}}function lo(e,t,n,i){Kf=!1;var r=e.updateQueue;Ci=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var p=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,y=m!==l.lane;if(y?(ut&m)===m:(i&m)===m){m!==0&&m===Hs&&(Kf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var D=e,V=l;m=t;var M=n;switch(V.tag){case 1:if(D=V.payload,typeof D=="function"){p=D.call(M,p,m);break t}p=D;break t;case 3:D.flags=D.flags&-65537|128;case 0:if(D=V.payload,m=typeof D=="function"?D.call(M,p,m):D,m==null)break t;p=Ct({},p,m);break t;case 2:Ci=!0}}m=l.callback,m!==null&&(e.flags|=64,y&&(e.flags|=8192),y=r.callbacks,y===null?r.callbacks=[m]:y.push(m))}else y={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=y,u=p):d=d.next=y,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;y=l,l=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(!0);d===null&&(u=p),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),rr|=a,e.lanes=a,e.memoizedState=p}}function QE(e,t){if(typeof e!="function")throw Error(L(191,e));e.call(t)}function KE(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)QE(n[e],t)}var Gs=Bn(null),qu=Bn(0);function vy(e,t){e=ui,xt(qu,e),xt(Gs,t),ui=e|t.baseLanes}function Yf(){xt(qu,ui),xt(Gs,Gs.current)}function _m(){ui=qu.current,oe(Gs),oe(qu)}var nr=0,et=null,vt=null,Kt=null,Hu=!1,xs=!1,kr=!1,Gu=0,No=0,Os=null,Pw=0;function qt(){throw Error(L(321))}function vm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!an(e[n],t[n]))return!1;return!0}function Em(e,t,n,i,r,s){return nr=s,et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Z.H=e===null||e.memoizedState===null?bT:wT,kr=!1,s=n(i,r),kr=!1,xs&&(s=XE(t,n,i,r)),YE(e),s}function YE(e){Z.H=Fu;var t=vt!==null&&vt.next!==null;if(nr=0,Kt=vt=et=null,Hu=!1,No=0,Os=null,t)throw Error(L(300));e===null||ae||(e=e.dependencies,e!==null&&Bu(e)&&(ae=!0))}function XE(e,t,n,i){et=e;var r=0;do{if(xs&&(Os=null),No=0,xs=!1,25<=r)throw Error(L(301));if(r+=1,Kt=vt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Z.H=Hw,s=t(n,i)}while(xs);return s}function Lw(){var e=Z.H,t=e.useState()[0];return t=typeof t.then=="function"?rl(t):t,e=e.useState()[0],(vt!==null?vt.memoizedState:null)!==e&&(et.flags|=1024),t}function Tm(){var e=Gu!==0;return Gu=0,e}function Am(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Sm(e){if(Hu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Hu=!1}nr=0,Kt=vt=et=null,xs=!1,No=Gu=0,Os=null}function ze(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?et.memoizedState=Kt=e:Kt=Kt.next=e,Kt}function $t(){if(vt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=vt.next;var t=Kt===null?et.memoizedState:Kt.next;if(t!==null)Kt=t,vt=e;else{if(e===null)throw et.alternate===null?Error(L(467)):Error(L(310));vt=e,e={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Kt===null?et.memoizedState=Kt=e:Kt=Kt.next=e}return Kt}function bm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rl(e){var t=No;return No+=1,Os===null&&(Os=[]),e=FE(Os,e,t),t=et,(Kt===null?t.memoizedState:Kt.next)===null&&(t=t.alternate,Z.H=t===null||t.memoizedState===null?bT:wT),e}function jc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return rl(e);if(e.$$typeof===Xn)return Re(e)}throw Error(L(438,String(e)))}function wm(e){var t=null,n=et.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=et.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=bm(),et.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=T1;return t.index++,n}function oi(e,t){return typeof t=="function"?t(e):t}function mu(e){var t=$t();return Rm(t,vt,e)}function Rm(e,t,n){var i=e.queue;if(i===null)throw Error(L(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var p=h.lane&-536870913;if(p!==h.lane?(ut&p)===p:(nr&p)===p){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),p===Hs&&(d=!0);else if((nr&m)===m){h=h.next,m===Hs&&(d=!0);continue}else p={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=p,a=s):u=u.next=p,et.lanes|=m,rr|=m;p=h.action,kr&&n(s,p),s=h.hasEagerState?h.eagerState:n(s,p)}else m={lane:p,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,et.lanes|=p,rr|=p;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!an(s,e.memoizedState)&&(ae=!0,d&&(n=Ds,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Kh(e){var t=$t(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);an(s,t.memoizedState)||(ae=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function $E(e,t,n){var i=et,r=$t(),s=dt;if(s){if(n===void 0)throw Error(L(407));n=n()}else n=t();var a=!an((vt||r).memoizedState,n);a&&(r.memoizedState=n,ae=!0),r=r.queue;var l=JE.bind(null,i,r,e);if(sl(2048,8,l,[e]),r.getSnapshot!==t||a||Kt!==null&&Kt.memoizedState.tag&1){if(i.flags|=2048,Fs(9,zc(),WE.bind(null,i,r,n,t),null),bt===null)throw Error(L(349));s||nr&124||ZE(i,t,n)}return n}function ZE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=et.updateQueue,t===null?(t=bm(),et.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function WE(e,t,n,i){t.value=n,t.getSnapshot=i,tT(t)&&eT(e)}function JE(e,t,n){return n(function(){tT(t)&&eT(e)})}function tT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!an(e,n)}catch{return!0}}function eT(e){var t=la(e,2);t!==null&&nn(t,e,2)}function Xf(e){var t=ze();if(typeof e=="function"){var n=e;if(e=n(),kr){Li(!0);try{n()}finally{Li(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:e},t}function nT(e,t,n,i){return e.baseState=n,Rm(e,vt,typeof i=="function"?i:oi)}function Uw(e,t,n,i,r){if(Bc(e))throw Error(L(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};Z.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,iT(t,s)):(s.next=n.next,t.pending=n.next=s)}}function iT(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=Z.T,a={};Z.T=a;try{var l=n(r,i),u=Z.S;u!==null&&u(a,l),Ey(e,t,l)}catch(h){$f(e,t,h)}finally{Z.T=s}}else try{s=n(r,i),Ey(e,t,s)}catch(h){$f(e,t,h)}}function Ey(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Ty(e,t,i)},function(i){return $f(e,t,i)}):Ty(e,t,n)}function Ty(e,t,n){t.status="fulfilled",t.value=n,rT(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,iT(e,n)))}function $f(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,rT(t),t=t.next;while(t!==i)}e.action=null}function rT(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function sT(e,t){return t}function Ay(e,t){if(dt){var n=bt.formState;if(n!==null){t:{var i=et;if(dt){if(Ut){e:{for(var r=Ut,s=Dn;r.nodeType!==8;){if(!s){r=null;break e}if(r=Sn(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Ut=Sn(r.nextSibling),i=r.data==="F!";break t}}Vr(i)}i=!1}i&&(t=n[0])}}return n=ze(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sT,lastRenderedState:t},n.queue=i,n=TT.bind(null,et,i),i.dispatch=n,i=Xf(!1),s=Dm.bind(null,et,!1,i.queue),i=ze(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=Uw.bind(null,et,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function Sy(e){var t=$t();return aT(t,vt,e)}function aT(e,t,n){if(t=Rm(e,t,sT)[0],e=mu(oi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=rl(t)}catch(a){throw a===il?Uc:a}else i=t;t=$t();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(et.flags|=2048,Fs(9,zc(),jw.bind(null,r,n),null)),[i,s,e]}function jw(e,t){e.action=t}function by(e){var t=$t(),n=vt;if(n!==null)return aT(t,n,e);$t(),t=t.memoizedState,n=$t();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Fs(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=et.updateQueue,t===null&&(t=bm(),et.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function zc(){return{destroy:void 0,resource:void 0}}function oT(){return $t().memoizedState}function pu(e,t,n,i){var r=ze();i=i===void 0?null:i,et.flags|=e,r.memoizedState=Fs(1|t,zc(),n,i)}function sl(e,t,n,i){var r=$t();i=i===void 0?null:i;var s=r.memoizedState.inst;vt!==null&&i!==null&&vm(i,vt.memoizedState.deps)?r.memoizedState=Fs(t,s,n,i):(et.flags|=e,r.memoizedState=Fs(1|t,s,n,i))}function wy(e,t){pu(8390656,8,e,t)}function lT(e,t){sl(2048,8,e,t)}function uT(e,t){return sl(4,2,e,t)}function cT(e,t){return sl(4,4,e,t)}function hT(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fT(e,t,n){n=n!=null?n.concat([e]):null,sl(4,4,hT.bind(null,t,e),n)}function Im(){}function dT(e,t){var n=$t();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&vm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function mT(e,t){var n=$t();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&vm(t,i[1]))return i[0];if(i=e(),kr){Li(!0);try{e()}finally{Li(!1)}}return n.memoizedState=[i,t],i}function Cm(e,t,n){return n===void 0||nr&1073741824?e.memoizedState=t:(e.memoizedState=n,e=r0(),et.lanes|=e,rr|=e,n)}function pT(e,t,n,i){return an(n,t)?n:Gs.current!==null?(e=Cm(e,n,i),an(e,t)||(ae=!0),e):nr&42?(e=r0(),et.lanes|=e,rr|=e,t):(ae=!0,e.memoizedState=n)}function gT(e,t,n,i,r){var s=mt.p;mt.p=s!==0&&8>s?s:8;var a=Z.T,l={};Z.T=l,Dm(e,!1,t,n);try{var u=r(),h=Z.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=kw(u,i);uo(e,t,d,en(e))}else uo(e,t,i,en(e))}catch(p){uo(e,t,{then:function(){},status:"rejected",reason:p},en())}finally{mt.p=s,Z.T=a}}function zw(){}function Zf(e,t,n,i){if(e.tag!==5)throw Error(L(476));var r=yT(e).queue;gT(e,r,t,Rr,n===null?zw:function(){return _T(e),n(i)})}function yT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Rr,baseState:Rr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:Rr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function _T(e){var t=yT(e).next.queue;uo(e,t,{},en())}function Nm(){return Re(Mo)}function vT(){return $t().memoizedState}function ET(){return $t().memoizedState}function Bw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=en();e=Hi(n);var i=Gi(t,e,n);i!==null&&(nn(i,t,n),ao(i,t,n)),t={cache:pm()},e.payload=t;return}t=t.return}}function qw(e,t,n){var i=en();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Bc(e)?AT(t,n):(n=hm(e,t,n,i),n!==null&&(nn(n,e,i),ST(n,t,i)))}function TT(e,t,n){var i=en();uo(e,t,n,i)}function uo(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bc(e))AT(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,an(l,a))return Lc(e,t,r,0),bt===null&&Pc(),!1}catch{}finally{}if(n=hm(e,t,r,i),n!==null)return nn(n,e,i),ST(n,t,i),!0}return!1}function Dm(e,t,n,i){if(i={lane:2,revertLane:Um(),action:i,hasEagerState:!1,eagerState:null,next:null},Bc(e)){if(t)throw Error(L(479))}else t=hm(e,n,i,2),t!==null&&nn(t,e,2)}function Bc(e){var t=e.alternate;return e===et||t!==null&&t===et}function AT(e,t){xs=Hu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ST(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,dE(e,n)}}var Fu={readContext:Re,use:jc,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt},bT={readContext:Re,use:jc,useCallback:function(e,t){return ze().memoizedState=[e,t===void 0?null:t],e},useContext:Re,useEffect:wy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,pu(4194308,4,hT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return pu(4194308,4,e,t)},useInsertionEffect:function(e,t){pu(4,2,e,t)},useMemo:function(e,t){var n=ze();t=t===void 0?null:t;var i=e();if(kr){Li(!0);try{e()}finally{Li(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ze();if(n!==void 0){var r=n(t);if(kr){Li(!0);try{n(t)}finally{Li(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=qw.bind(null,et,e),[i.memoizedState,e]},useRef:function(e){var t=ze();return e={current:e},t.memoizedState=e},useState:function(e){e=Xf(e);var t=e.queue,n=TT.bind(null,et,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Im,useDeferredValue:function(e,t){var n=ze();return Cm(n,e,t)},useTransition:function(){var e=Xf(!1);return e=gT.bind(null,et,e.queue,!0,!1),ze().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=et,r=ze();if(dt){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),bt===null)throw Error(L(349));ut&124||ZE(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,wy(JE.bind(null,i,s,e),[e]),i.flags|=2048,Fs(9,zc(),WE.bind(null,i,s,n,t),null),n},useId:function(){var e=ze(),t=bt.identifierPrefix;if(dt){var n=Zn,i=$n;n=(i&~(1<<32-tn(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=Gu++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=Pw++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Nm,useFormState:Ay,useActionState:Ay,useOptimistic:function(e){var t=ze();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Dm.bind(null,et,!0,n),n.dispatch=t,[e,t]},useMemoCache:wm,useCacheRefresh:function(){return ze().memoizedState=Bw.bind(null,et)}},wT={readContext:Re,use:jc,useCallback:dT,useContext:Re,useEffect:lT,useImperativeHandle:fT,useInsertionEffect:uT,useLayoutEffect:cT,useMemo:mT,useReducer:mu,useRef:oT,useState:function(){return mu(oi)},useDebugValue:Im,useDeferredValue:function(e,t){var n=$t();return pT(n,vt.memoizedState,e,t)},useTransition:function(){var e=mu(oi)[0],t=$t().memoizedState;return[typeof e=="boolean"?e:rl(e),t]},useSyncExternalStore:$E,useId:vT,useHostTransitionStatus:Nm,useFormState:Sy,useActionState:Sy,useOptimistic:function(e,t){var n=$t();return nT(n,vt,e,t)},useMemoCache:wm,useCacheRefresh:ET},Hw={readContext:Re,use:jc,useCallback:dT,useContext:Re,useEffect:lT,useImperativeHandle:fT,useInsertionEffect:uT,useLayoutEffect:cT,useMemo:mT,useReducer:Kh,useRef:oT,useState:function(){return Kh(oi)},useDebugValue:Im,useDeferredValue:function(e,t){var n=$t();return vt===null?Cm(n,e,t):pT(n,vt.memoizedState,e,t)},useTransition:function(){var e=Kh(oi)[0],t=$t().memoizedState;return[typeof e=="boolean"?e:rl(e),t]},useSyncExternalStore:$E,useId:vT,useHostTransitionStatus:Nm,useFormState:by,useActionState:by,useOptimistic:function(e,t){var n=$t();return vt!==null?nT(n,vt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:wm,useCacheRefresh:ET},Vs=null,Do=0;function Xl(e){var t=Do;return Do+=1,Vs===null&&(Vs=[]),FE(Vs,e,t)}function za(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function $l(e,t){throw t.$$typeof===v1?Error(L(525)):(e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ry(e){var t=e._init;return t(e._payload)}function RT(e){function t(b,v){if(e){var R=b.deletions;R===null?(b.deletions=[v],b.flags|=16):R.push(v)}}function n(b,v){if(!e)return null;for(;v!==null;)t(b,v),v=v.sibling;return null}function i(b){for(var v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function r(b,v){return b=ni(b,v),b.index=0,b.sibling=null,b}function s(b,v,R){return b.index=R,e?(R=b.alternate,R!==null?(R=R.index,R<v?(b.flags|=67108866,v):R):(b.flags|=67108866,v)):(b.flags|=1048576,v)}function a(b){return e&&b.alternate===null&&(b.flags|=67108866),b}function l(b,v,R,x){return v===null||v.tag!==6?(v=Gh(R,b.mode,x),v.return=b,v):(v=r(v,R),v.return=b,v)}function u(b,v,R,x){var U=R.type;return U===ds?d(b,v,R.props.children,x,R.key):v!==null&&(v.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Ii&&Ry(U)===v.type)?(v=r(v,R.props),za(v,R),v.return=b,v):(v=fu(R.type,R.key,R.props,null,b.mode,x),za(v,R),v.return=b,v)}function h(b,v,R,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==R.containerInfo||v.stateNode.implementation!==R.implementation?(v=Fh(R,b.mode,x),v.return=b,v):(v=r(v,R.children||[]),v.return=b,v)}function d(b,v,R,x,U){return v===null||v.tag!==7?(v=Ir(R,b.mode,x,U),v.return=b,v):(v=r(v,R),v.return=b,v)}function p(b,v,R){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=Gh(""+v,b.mode,R),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ql:return R=fu(v.type,v.key,v.props,null,b.mode,R),za(R,v),R.return=b,R;case Ga:return v=Fh(v,b.mode,R),v.return=b,v;case Ii:var x=v._init;return v=x(v._payload),p(b,v,R)}if(Fa(v)||Pa(v))return v=Ir(v,b.mode,R,null),v.return=b,v;if(typeof v.then=="function")return p(b,Xl(v),R);if(v.$$typeof===Xn)return p(b,Kl(b,v),R);$l(b,v)}return null}function m(b,v,R,x){var U=v!==null?v.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return U!==null?null:l(b,v,""+R,x);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ql:return R.key===U?u(b,v,R,x):null;case Ga:return R.key===U?h(b,v,R,x):null;case Ii:return U=R._init,R=U(R._payload),m(b,v,R,x)}if(Fa(R)||Pa(R))return U!==null?null:d(b,v,R,x,null);if(typeof R.then=="function")return m(b,v,Xl(R),x);if(R.$$typeof===Xn)return m(b,v,Kl(b,R),x);$l(b,R)}return null}function y(b,v,R,x,U){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return b=b.get(R)||null,l(v,b,""+x,U);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ql:return b=b.get(x.key===null?R:x.key)||null,u(v,b,x,U);case Ga:return b=b.get(x.key===null?R:x.key)||null,h(v,b,x,U);case Ii:var B=x._init;return x=B(x._payload),y(b,v,R,x,U)}if(Fa(x)||Pa(x))return b=b.get(R)||null,d(v,b,x,U,null);if(typeof x.then=="function")return y(b,v,R,Xl(x),U);if(x.$$typeof===Xn)return y(b,v,R,Kl(v,x),U);$l(v,x)}return null}function D(b,v,R,x){for(var U=null,B=null,T=v,_=v=0,A=null;T!==null&&_<R.length;_++){T.index>_?(A=T,T=null):A=T.sibling;var S=m(b,T,R[_],x);if(S===null){T===null&&(T=A);break}e&&T&&S.alternate===null&&t(b,T),v=s(S,v,_),B===null?U=S:B.sibling=S,B=S,T=A}if(_===R.length)return n(b,T),dt&&Ar(b,_),U;if(T===null){for(;_<R.length;_++)T=p(b,R[_],x),T!==null&&(v=s(T,v,_),B===null?U=T:B.sibling=T,B=T);return dt&&Ar(b,_),U}for(T=i(T);_<R.length;_++)A=y(T,b,_,R[_],x),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?_:A.key),v=s(A,v,_),B===null?U=A:B.sibling=A,B=A);return e&&T.forEach(function(I){return t(b,I)}),dt&&Ar(b,_),U}function V(b,v,R,x){if(R==null)throw Error(L(151));for(var U=null,B=null,T=v,_=v=0,A=null,S=R.next();T!==null&&!S.done;_++,S=R.next()){T.index>_?(A=T,T=null):A=T.sibling;var I=m(b,T,S.value,x);if(I===null){T===null&&(T=A);break}e&&T&&I.alternate===null&&t(b,T),v=s(I,v,_),B===null?U=I:B.sibling=I,B=I,T=A}if(S.done)return n(b,T),dt&&Ar(b,_),U;if(T===null){for(;!S.done;_++,S=R.next())S=p(b,S.value,x),S!==null&&(v=s(S,v,_),B===null?U=S:B.sibling=S,B=S);return dt&&Ar(b,_),U}for(T=i(T);!S.done;_++,S=R.next())S=y(T,b,_,S.value,x),S!==null&&(e&&S.alternate!==null&&T.delete(S.key===null?_:S.key),v=s(S,v,_),B===null?U=S:B.sibling=S,B=S);return e&&T.forEach(function(C){return t(b,C)}),dt&&Ar(b,_),U}function M(b,v,R,x){if(typeof R=="object"&&R!==null&&R.type===ds&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case ql:t:{for(var U=R.key;v!==null;){if(v.key===U){if(U=R.type,U===ds){if(v.tag===7){n(b,v.sibling),x=r(v,R.props.children),x.return=b,b=x;break t}}else if(v.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Ii&&Ry(U)===v.type){n(b,v.sibling),x=r(v,R.props),za(x,R),x.return=b,b=x;break t}n(b,v);break}else t(b,v);v=v.sibling}R.type===ds?(x=Ir(R.props.children,b.mode,x,R.key),x.return=b,b=x):(x=fu(R.type,R.key,R.props,null,b.mode,x),za(x,R),x.return=b,b=x)}return a(b);case Ga:t:{for(U=R.key;v!==null;){if(v.key===U)if(v.tag===4&&v.stateNode.containerInfo===R.containerInfo&&v.stateNode.implementation===R.implementation){n(b,v.sibling),x=r(v,R.children||[]),x.return=b,b=x;break t}else{n(b,v);break}else t(b,v);v=v.sibling}x=Fh(R,b.mode,x),x.return=b,b=x}return a(b);case Ii:return U=R._init,R=U(R._payload),M(b,v,R,x)}if(Fa(R))return D(b,v,R,x);if(Pa(R)){if(U=Pa(R),typeof U!="function")throw Error(L(150));return R=U.call(R),V(b,v,R,x)}if(typeof R.then=="function")return M(b,v,Xl(R),x);if(R.$$typeof===Xn)return M(b,v,Kl(b,R),x);$l(b,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,v!==null&&v.tag===6?(n(b,v.sibling),x=r(v,R),x.return=b,b=x):(n(b,v),x=Gh(R,b.mode,x),x.return=b,b=x),a(b)):n(b,v)}return function(b,v,R,x){try{Do=0;var U=M(b,v,R,x);return Vs=null,U}catch(T){if(T===il||T===Uc)throw T;var B=$e(29,T,null,b.mode);return B.lanes=x,B.return=b,B}finally{}}}var Qs=RT(!0),IT=RT(!1),pn=Bn(null),Mn=null;function Di(e){var t=e.alternate;xt(Wt,Wt.current&1),xt(pn,e),Mn===null&&(t===null||Gs.current!==null||t.memoizedState!==null)&&(Mn=e)}function CT(e){if(e.tag===22){if(xt(Wt,Wt.current),xt(pn,e),Mn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Mn=e)}}else xi()}function xi(){xt(Wt,Wt.current),xt(pn,pn.current)}function Jn(e){oe(pn),Mn===e&&(Mn=null),oe(Wt)}var Wt=Bn(0);function Qu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||md(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Yh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Ct({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Wf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=en(),r=Hi(i);r.payload=t,n!=null&&(r.callback=n),t=Gi(e,r,i),t!==null&&(nn(t,e,i),ao(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=en(),r=Hi(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Gi(e,r,i),t!==null&&(nn(t,e,i),ao(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=en(),i=Hi(n);i.tag=2,t!=null&&(i.callback=t),t=Gi(e,i,n),t!==null&&(nn(t,e,n),ao(t,e,n))}};function Iy(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!Io(n,i)||!Io(r,s):!0}function Cy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Wf.enqueueReplaceState(t,t.state,null)}function Pr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Ct({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var Ku=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function NT(e){Ku(e)}function DT(e){console.error(e)}function xT(e){Ku(e)}function Yu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Ny(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Jf(e,t,n){return n=Hi(n),n.tag=3,n.payload={element:null},n.callback=function(){Yu(e,t)},n}function OT(e){return e=Hi(e),e.tag=3,e}function VT(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){Ny(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){Ny(t,n,i),typeof r!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Gw(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&el(t,n,r,!0),n=pn.current,n!==null){switch(n.tag){case 13:return Mn===null?od():n.alternate===null&&jt===0&&(jt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Ff?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),af(e,i,r)),!1;case 22:return n.flags|=65536,i===Ff?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),af(e,i,r)),!1}throw Error(L(435,n.tag))}return af(e,i,r),od(),!1}if(dt)return t=pn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==zf&&(e=Error(L(422),{cause:i}),Co(fn(e,n)))):(i!==zf&&(t=Error(L(423),{cause:i}),Co(fn(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=fn(i,n),r=Jf(e.stateNode,i,r),Qh(e,r),jt!==4&&(jt=2)),!1;var s=Error(L(520),{cause:i});if(s=fn(s,n),fo===null?fo=[s]:fo.push(s),jt!==4&&(jt=2),t===null)return!0;i=fn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Jf(n.stateNode,i,e),Qh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Fi===null||!Fi.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=OT(r),VT(r,e,n,i),Qh(n,r),!1}n=n.return}while(n!==null);return!1}var MT=Error(L(461)),ae=!1;function me(e,t,n,i){t.child=e===null?IT(t,null,n,i):Qs(t,e.child,n,i)}function Dy(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Mr(t),i=Em(e,t,n,a,s,r),l=Tm(),e!==null&&!ae?(Am(e,t,r),li(e,t,r)):(dt&&l&&dm(t),t.flags|=1,me(e,t,i,r),t.child)}function xy(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!fm(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,kT(e,t,s,i,r)):(e=fu(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!xm(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Io,n(a,i)&&e.ref===t.ref)return li(e,t,r)}return t.flags|=1,e=ni(s,i),e.ref=t.ref,e.return=t,t.child=e}function kT(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(Io(s,i)&&e.ref===t.ref)if(ae=!1,t.pendingProps=i=s,xm(e,r))e.flags&131072&&(ae=!0);else return t.lanes=e.lanes,li(e,t,r)}return td(e,t,n,i,r)}function PT(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return Oy(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&du(t,s!==null?s.cachePool:null),s!==null?vy(t,s):Yf(),CT(t);else return t.lanes=t.childLanes=536870912,Oy(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(du(t,s.cachePool),vy(t,s),xi(),t.memoizedState=null):(e!==null&&du(t,null),Yf(),xi());return me(e,t,r,n),t.child}function Oy(e,t,n,i){var r=gm();return r=r===null?null:{parent:Zt._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&du(t,null),Yf(),CT(t),e!==null&&el(e,t,i,!0),null}function gu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(L(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function td(e,t,n,i,r){return Mr(t),n=Em(e,t,n,i,void 0,r),i=Tm(),e!==null&&!ae?(Am(e,t,r),li(e,t,r)):(dt&&i&&dm(t),t.flags|=1,me(e,t,n,r),t.child)}function Vy(e,t,n,i,r,s){return Mr(t),t.updateQueue=null,n=XE(t,i,n,r),YE(e),i=Tm(),e!==null&&!ae?(Am(e,t,s),li(e,t,s)):(dt&&i&&dm(t),t.flags|=1,me(e,t,n,s),t.child)}function My(e,t,n,i,r){if(Mr(t),t.stateNode===null){var s=Ts,a=n.contextType;typeof a=="object"&&a!==null&&(s=Re(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Wf,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},ym(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?Re(a):Ts,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Yh(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Wf.enqueueReplaceState(s,s.state,null),lo(t,i,s,r),oo(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=Pr(n,l);s.props=u;var h=s.context,d=n.contextType;a=Ts,typeof d=="object"&&d!==null&&(a=Re(d));var p=n.getDerivedStateFromProps;d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&Cy(t,s,i,a),Ci=!1;var m=t.memoizedState;s.state=m,lo(t,i,s,r),oo(),h=t.memoizedState,l||m!==h||Ci?(typeof p=="function"&&(Yh(t,n,p,i),h=t.memoizedState),(u=Ci||Iy(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Qf(e,t),a=t.memoizedProps,d=Pr(n,a),s.props=d,p=t.pendingProps,m=s.context,h=n.contextType,u=Ts,typeof h=="object"&&h!==null&&(u=Re(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||m!==u)&&Cy(t,s,i,u),Ci=!1,m=t.memoizedState,s.state=m,lo(t,i,s,r),oo();var y=t.memoizedState;a!==p||m!==y||Ci||e!==null&&e.dependencies!==null&&Bu(e.dependencies)?(typeof l=="function"&&(Yh(t,n,l,i),y=t.memoizedState),(d=Ci||Iy(t,n,d,i,m,y,u)||e!==null&&e.dependencies!==null&&Bu(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,y,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,y,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=y),s.props=i,s.state=y,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,gu(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=Qs(t,e.child,null,r),t.child=Qs(t,null,n,r)):me(e,t,n,r),t.memoizedState=s.state,e=t.child):e=li(e,t,r),e}function ky(e,t,n,i){return tl(),t.flags|=256,me(e,t,n,i),t.child}var Xh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $h(e){return{baseLanes:e,cachePool:HE()}}function Zh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=mn),e}function LT(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(Wt.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(dt){if(r?Di(t):xi(),dt){var l=Ut,u;if(u=l){t:{for(u=l,l=Dn;u.nodeType!==8;){if(!l){l=null;break t}if(u=Sn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Cr!==null?{id:$n,overflow:Zn}:null,retryLane:536870912,hydrationErrors:null},u=$e(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Oe=t,Ut=null,u=!0):u=!1}u||Vr(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return md(l)?t.lanes=32:t.lanes=536870912,null;Jn(t)}return l=i.children,i=i.fallback,r?(xi(),r=t.mode,l=Xu({mode:"hidden",children:l},r),i=Ir(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=$h(n),r.childLanes=Zh(e,a,n),t.memoizedState=Xh,i):(Di(t),ed(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(Di(t),t.flags&=-257,t=Wh(e,t,n)):t.memoizedState!==null?(xi(),t.child=e.child,t.flags|=128,t=null):(xi(),r=i.fallback,l=t.mode,i=Xu({mode:"visible",children:i.children},l),r=Ir(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Qs(t,e.child,null,n),i=t.child,i.memoizedState=$h(n),i.childLanes=Zh(e,a,n),t.memoizedState=Xh,t=r);else if(Di(t),md(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(L(419)),i.stack="",i.digest=a,Co({value:i,source:null,stack:null}),t=Wh(e,t,n)}else if(ae||el(e,t,n,!1),a=(n&e.childLanes)!==0,ae||a){if(a=bt,a!==null&&(i=n&-n,i=i&42?1:em(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,la(e,i),nn(a,e,i),MT;l.data==="$?"||od(),t=Wh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Ut=Sn(l.nextSibling),Oe=t,dt=!0,Nr=null,Dn=!1,e!==null&&(un[cn++]=$n,un[cn++]=Zn,un[cn++]=Cr,$n=e.id,Zn=e.overflow,Cr=t),t=ed(t,i.children),t.flags|=4096);return t}return r?(xi(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=ni(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=ni(h,r):(r=Ir(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=$h(n):(u=l.cachePool,u!==null?(h=Zt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=HE(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=Zh(e,a,n),t.memoizedState=Xh,i):(Di(t),n=e.child,e=n.sibling,n=ni(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function ed(e,t){return t=Xu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Xu(e,t){return e=$e(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wh(e,t,n){return Qs(t,e.child,null,n),e=ed(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Py(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),qf(e.return,t,n)}function Jh(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function UT(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(me(e,t,i.children,n),i=Wt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Py(e,n,t);else if(e.tag===19)Py(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(xt(Wt,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Qu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Jh(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Qu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Jh(t,!0,n,null,s);break;case"together":Jh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function li(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),rr|=t.lanes,!(n&t.childLanes))if(e!==null){if(el(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=ni(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ni(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function xm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Bu(e)))}function Fw(e,t,n){switch(t.tag){case 3:Vu(t,t.stateNode.containerInfo),Ni(t,Zt,e.memoizedState.cache),tl();break;case 27:case 5:Df(t);break;case 4:Vu(t,t.stateNode.containerInfo);break;case 10:Ni(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Di(t),t.flags|=128,null):n&t.child.childLanes?LT(e,t,n):(Di(t),e=li(e,t,n),e!==null?e.sibling:null);Di(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(el(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return UT(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),xt(Wt,Wt.current),i)break;return null;case 22:case 23:return t.lanes=0,PT(e,t,n);case 24:Ni(t,Zt,e.memoizedState.cache)}return li(e,t,n)}function jT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ae=!0;else{if(!xm(e,n)&&!(t.flags&128))return ae=!1,Fw(e,t,n);ae=!!(e.flags&131072)}else ae=!1,dt&&t.flags&1048576&&BE(t,zu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")fm(i)?(e=Pr(i,e),t.tag=1,t=My(null,t,i,e,n)):(t.tag=0,t=td(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===Wd){t.tag=11,t=Dy(null,t,i,e,n);break t}else if(r===Jd){t.tag=14,t=xy(null,t,i,e,n);break t}}throw t=Cf(i)||i,Error(L(306,t,""))}}return t;case 0:return td(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Pr(i,t.pendingProps),My(e,t,i,r,n);case 3:t:{if(Vu(t,t.stateNode.containerInfo),e===null)throw Error(L(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,Qf(e,t),lo(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Ni(t,Zt,i),i!==s.cache&&Hf(t,[Zt],n,!0),oo(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=ky(e,t,i,n);break t}else if(i!==r){r=fn(Error(L(424)),t),Co(r),t=ky(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ut=Sn(e.firstChild),Oe=t,dt=!0,Nr=null,Dn=!0,n=IT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(tl(),i===r){t=li(e,t,n);break t}me(e,t,i,n)}t=t.child}return t;case 26:return gu(e,t),e===null?(n=Jy(t.type,null,t.pendingProps,null))?t.memoizedState=n:dt||(n=t.type,e=t.pendingProps,i=nc(qi.current).createElement(n),i[we]=t,i[Ge]=e,ve(i,n,e),re(i),t.stateNode=i):t.memoizedState=Jy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Df(t),e===null&&dt&&(i=t.stateNode=w0(t.type,t.pendingProps,qi.current),Oe=t,Dn=!0,r=Ut,fr(t.type)?(pd=r,Ut=Sn(i.firstChild)):Ut=r),me(e,t,t.pendingProps.children,n),gu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&dt&&((r=i=Ut)&&(i=vR(i,t.type,t.pendingProps,Dn),i!==null?(t.stateNode=i,Oe=t,Ut=Sn(i.firstChild),Dn=!1,r=!0):r=!1),r||Vr(t)),Df(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,fd(r,s)?i=null:a!==null&&fd(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=Em(e,t,Lw,null,null,n),Mo._currentValue=r),gu(e,t),me(e,t,i,n),t.child;case 6:return e===null&&dt&&((e=n=Ut)&&(n=ER(n,t.pendingProps,Dn),n!==null?(t.stateNode=n,Oe=t,Ut=null,e=!0):e=!1),e||Vr(t)),null;case 13:return LT(e,t,n);case 4:return Vu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Qs(t,null,i,n):me(e,t,i,n),t.child;case 11:return Dy(e,t,t.type,t.pendingProps,n);case 7:return me(e,t,t.pendingProps,n),t.child;case 8:return me(e,t,t.pendingProps.children,n),t.child;case 12:return me(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Ni(t,t.type,i.value),me(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Mr(t),r=Re(r),i=i(r),t.flags|=1,me(e,t,i,n),t.child;case 14:return xy(e,t,t.type,t.pendingProps,n);case 15:return kT(e,t,t.type,t.pendingProps,n);case 19:return UT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Xu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=ni(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return PT(e,t,n);case 24:return Mr(t),i=Re(Zt),e===null?(r=gm(),r===null&&(r=bt,s=pm(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},ym(t),Ni(t,Zt,r)):(e.lanes&n&&(Qf(e,t),lo(t,null,null,n),oo()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Ni(t,Zt,i)):(i=s.cache,Ni(t,Zt,i),i!==r.cache&&Hf(t,[Zt],n,!0))),me(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(L(156,t.tag))}function Qn(e){e.flags|=4}function Ly(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!C0(t)){if(t=pn.current,t!==null&&((ut&4194048)===ut?Mn!==null:(ut&62914560)!==ut&&!(ut&536870912)||t!==Mn))throw so=Ff,GE;e.flags|=8192}}function Zl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?hE():536870912,e.lanes|=t,Ks|=t)}function Ba(e,t){if(!dt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Qw(e,t,n){var i=t.pendingProps;switch(mm(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(t),null;case 1:return Vt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ii(Zt),zs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ja(t)?Qn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,dy())),Vt(t),null;case 26:return n=t.memoizedState,e===null?(Qn(t),n!==null?(Vt(t),Ly(t,n)):(Vt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Qn(t),Vt(t),Ly(t,n)):(Vt(t),t.flags&=-16777217):(e.memoizedProps!==i&&Qn(t),Vt(t),t.flags&=-16777217),null;case 27:Mu(t),n=qi.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(!i){if(t.stateNode===null)throw Error(L(166));return Vt(t),null}e=On.current,ja(t)?hy(t):(e=w0(r,i,n),t.stateNode=e,Qn(t))}return Vt(t),null;case 5:if(Mu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(!i){if(t.stateNode===null)throw Error(L(166));return Vt(t),null}if(e=On.current,ja(t))hy(t);else{switch(r=nc(qi.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[we]=t,e[Ge]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(ve(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Qn(t)}}return Vt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(L(166));if(e=qi.current,ja(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Oe,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[we]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||A0(e.nodeValue,n)),e||Vr(t)}else e=nc(e).createTextNode(i),e[we]=t,t.stateNode=e}return Vt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=ja(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(L(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(L(317));r[we]=t}else tl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vt(t),r=!1}else r=dy(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Jn(t),t):(Jn(t),null)}if(Jn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Zl(t,t.updateQueue),Vt(t),null;case 4:return zs(),e===null&&jm(t.stateNode.containerInfo),Vt(t),null;case 10:return ii(t.type),Vt(t),null;case 19:if(oe(Wt),r=t.memoizedState,r===null)return Vt(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)Ba(r,!1);else{if(jt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Qu(e),s!==null){for(t.flags|=128,Ba(r,!1),e=s.updateQueue,t.updateQueue=e,Zl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)zE(n,e),n=n.sibling;return xt(Wt,Wt.current&1|2),t.child}e=e.sibling}r.tail!==null&&Vn()>Zu&&(t.flags|=128,i=!0,Ba(r,!1),t.lanes=4194304)}else{if(!i)if(e=Qu(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Zl(t,e),Ba(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!dt)return Vt(t),null}else 2*Vn()-r.renderingStartTime>Zu&&n!==536870912&&(t.flags|=128,i=!0,Ba(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Vn(),t.sibling=null,e=Wt.current,xt(Wt,i?e&1|2:e&1),t):(Vt(t),null);case 22:case 23:return Jn(t),_m(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Vt(t),t.subtreeFlags&6&&(t.flags|=8192)):Vt(t),n=t.updateQueue,n!==null&&Zl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&oe(Dr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ii(Zt),Vt(t),null;case 25:return null;case 30:return null}throw Error(L(156,t.tag))}function Kw(e,t){switch(mm(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ii(Zt),zs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Mu(t),null;case 13:if(Jn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));tl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return oe(Wt),null;case 4:return zs(),null;case 10:return ii(t.type),null;case 22:case 23:return Jn(t),_m(),e!==null&&oe(Dr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ii(Zt),null;case 25:return null;default:return null}}function zT(e,t){switch(mm(t),t.tag){case 3:ii(Zt),zs();break;case 26:case 27:case 5:Mu(t);break;case 4:zs();break;case 13:Jn(t);break;case 19:oe(Wt);break;case 10:ii(t.type);break;case 22:case 23:Jn(t),_m(),e!==null&&oe(Dr);break;case 24:ii(Zt)}}function al(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){At(t,t.return,l)}}function ir(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){At(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){At(t,t.return,d)}}function BT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{KE(t,n)}catch(i){At(e,e.return,i)}}}function qT(e,t,n){n.props=Pr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){At(e,t,i)}}function co(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){At(e,t,r)}}function xn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){At(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){At(e,t,r)}else n.current=null}function HT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){At(e,e.return,r)}}function tf(e,t,n){try{var i=e.stateNode;mR(i,e.type,n,t),i[Ge]=t}catch(r){At(e,e.return,r)}}function GT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fr(e.type)||e.tag===4}function ef(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||GT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Fc));else if(i!==4&&(i===27&&fr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(nd(e,t,n),e=e.sibling;e!==null;)nd(e,t,n),e=e.sibling}function $u(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&fr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for($u(e,t,n),e=e.sibling;e!==null;)$u(e,t,n),e=e.sibling}function FT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ve(t,i,n),t[we]=e,t[Ge]=n}catch(s){At(e,e.return,s)}}var Yn=!1,Ht=!1,nf=!1,Uy=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Yw(e,t){if(e=e.containerInfo,cd=ac,e=OE(e),um(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,p=e,m=null;e:for(;;){for(var y;p!==n||r!==0&&p.nodeType!==3||(l=a+r),p!==s||i!==0&&p.nodeType!==3||(u=a+i),p.nodeType===3&&(a+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(hd={focusedElem:e,selectionRange:n},ac=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){switch(t=ie,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var D=Pr(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(D,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(V){At(n,n.return,V)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)dd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":dd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(L(163))}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}}function QT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:bi(e,n),i&4&&al(5,n);break;case 1:if(bi(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){At(n,n.return,a)}else{var r=Pr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){At(n,n.return,a)}}i&64&&BT(n),i&512&&co(n,n.return);break;case 3:if(bi(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{KE(e,t)}catch(a){At(n,n.return,a)}}break;case 27:t===null&&i&4&&FT(n);case 26:case 5:bi(e,n),t===null&&i&4&&HT(n),i&512&&co(n,n.return);break;case 12:bi(e,n);break;case 13:bi(e,n),i&4&&XT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=iR.bind(null,n),TR(e,n))));break;case 22:if(i=n.memoizedState!==null||Yn,!i){t=t!==null&&t.memoizedState!==null||Ht,r=Yn;var s=Ht;Yn=i,(Ht=t)&&!s?Ri(e,n,(n.subtreeFlags&8772)!==0):bi(e,n),Yn=r,Ht=s}break;case 30:break;default:bi(e,n)}}function KT(e){var t=e.alternate;t!==null&&(e.alternate=null,KT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&im(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Nt=null,Be=!1;function Kn(e,t,n){for(n=n.child;n!==null;)YT(e,t,n),n=n.sibling}function YT(e,t,n){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(Xo,n)}catch{}switch(n.tag){case 26:Ht||xn(n,t),Kn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ht||xn(n,t);var i=Nt,r=Be;fr(n.type)&&(Nt=n.stateNode,Be=!1),Kn(e,t,n),po(n.stateNode),Nt=i,Be=r;break;case 5:Ht||xn(n,t);case 6:if(i=Nt,r=Be,Nt=null,Kn(e,t,n),Nt=i,Be=r,Nt!==null)if(Be)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(n.stateNode)}catch(s){At(n,t,s)}else try{Nt.removeChild(n.stateNode)}catch(s){At(n,t,s)}break;case 18:Nt!==null&&(Be?(e=Nt,$y(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Lo(e)):$y(Nt,n.stateNode));break;case 4:i=Nt,r=Be,Nt=n.stateNode.containerInfo,Be=!0,Kn(e,t,n),Nt=i,Be=r;break;case 0:case 11:case 14:case 15:Ht||ir(2,n,t),Ht||ir(4,n,t),Kn(e,t,n);break;case 1:Ht||(xn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&qT(n,t,i)),Kn(e,t,n);break;case 21:Kn(e,t,n);break;case 22:Ht=(i=Ht)||n.memoizedState!==null,Kn(e,t,n),Ht=i;break;default:Kn(e,t,n)}}function XT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Lo(e)}catch(n){At(t,t.return,n)}}function Xw(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Uy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Uy),t;default:throw Error(L(435,e.tag))}}function rf(e,t){var n=Xw(e);t.forEach(function(i){var r=rR.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Ke(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(fr(l.type)){Nt=l.stateNode,Be=!1;break t}break;case 5:Nt=l.stateNode,Be=!1;break t;case 3:case 4:Nt=l.stateNode.containerInfo,Be=!0;break t}l=l.return}if(Nt===null)throw Error(L(160));YT(s,a,r),Nt=null,Be=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)$T(t,e),t=t.sibling}var Tn=null;function $T(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ke(t,e),Ye(e),i&4&&(ir(3,e,e.return),al(3,e),ir(5,e,e.return));break;case 1:Ke(t,e),Ye(e),i&512&&(Ht||n===null||xn(n,n.return)),i&64&&Yn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Tn;if(Ke(t,e),Ye(e),i&512&&(Ht||n===null||xn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Wo]||s[we]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),ve(s,i,n),s[we]=e,re(s),i=s;break t;case"link":var a=e_("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),ve(s,i,n),r.head.appendChild(s);break;case"meta":if(a=e_("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),ve(s,i,n),r.head.appendChild(s);break;default:throw Error(L(468,i))}s[we]=e,re(s),i=s}e.stateNode=i}else n_(r,e.type,e.stateNode);else e.stateNode=t_(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?n_(r,e.type,e.stateNode):t_(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&tf(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ke(t,e),Ye(e),i&512&&(Ht||n===null||xn(n,n.return)),n!==null&&i&4&&tf(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ke(t,e),Ye(e),i&512&&(Ht||n===null||xn(n,n.return)),e.flags&32){r=e.stateNode;try{qs(r,"")}catch(y){At(e,e.return,y)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,tf(e,r,n!==null?n.memoizedProps:r)),i&1024&&(nf=!0);break;case 6:if(Ke(t,e),Ye(e),i&4){if(e.stateNode===null)throw Error(L(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(y){At(e,e.return,y)}}break;case 3:if(vu=null,r=Tn,Tn=ic(t.containerInfo),Ke(t,e),Tn=r,Ye(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Lo(t.containerInfo)}catch(y){At(e,e.return,y)}nf&&(nf=!1,ZT(e));break;case 4:i=Tn,Tn=ic(e.stateNode.containerInfo),Ke(t,e),Ye(e),Tn=i;break;case 12:Ke(t,e),Ye(e);break;case 13:Ke(t,e),Ye(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Pm=Vn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,rf(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Yn,d=Ht;if(Yn=h||r,Ht=d||u,Ke(t,e),Ht=d,Yn=h,Ye(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||Yn||Ht||Sr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var p=u.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(y){At(u,u.return,y)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(y){At(u,u.return,y)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,rf(e,n))));break;case 19:Ke(t,e),Ye(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,rf(e,i)));break;case 30:break;case 21:break;default:Ke(t,e),Ye(e)}}function Ye(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(GT(i)){n=i;break}i=i.return}if(n==null)throw Error(L(160));switch(n.tag){case 27:var r=n.stateNode,s=ef(e);$u(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(qs(a,""),n.flags&=-33);var l=ef(e);$u(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=ef(e);nd(e,h,u);break;default:throw Error(L(161))}}catch(d){At(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ZT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ZT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function bi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)QT(e,t.alternate,t),t=t.sibling}function Sr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ir(4,t,t.return),Sr(t);break;case 1:xn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&qT(t,t.return,n),Sr(t);break;case 27:po(t.stateNode);case 26:case 5:xn(t,t.return),Sr(t);break;case 22:t.memoizedState===null&&Sr(t);break;case 30:Sr(t);break;default:Sr(t)}e=e.sibling}}function Ri(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Ri(r,s,n),al(4,s);break;case 1:if(Ri(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){At(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)QE(u[r],l)}catch(h){At(i,i.return,h)}}n&&a&64&&BT(s),co(s,s.return);break;case 27:FT(s);case 26:case 5:Ri(r,s,n),n&&i===null&&a&4&&HT(s),co(s,s.return);break;case 12:Ri(r,s,n);break;case 13:Ri(r,s,n),n&&a&4&&XT(r,s);break;case 22:s.memoizedState===null&&Ri(r,s,n),co(s,s.return);break;case 30:break;default:Ri(r,s,n)}t=t.sibling}}function Om(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&nl(n))}function Vm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&nl(e))}function Cn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)WT(e,t,n,i),t=t.sibling}function WT(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Cn(e,t,n,i),r&2048&&al(9,t);break;case 1:Cn(e,t,n,i);break;case 3:Cn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&nl(e)));break;case 12:if(r&2048){Cn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){At(t,t.return,u)}}else Cn(e,t,n,i);break;case 13:Cn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?Cn(e,t,n,i):ho(e,t):s._visibility&2?Cn(e,t,n,i):(s._visibility|=2,os(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&Om(a,t);break;case 24:Cn(e,t,n,i),r&2048&&Vm(t.alternate,t);break;default:Cn(e,t,n,i)}}function os(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:os(s,a,l,u,r),al(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?os(s,a,l,u,r):ho(s,a):(d._visibility|=2,os(s,a,l,u,r)),r&&h&2048&&Om(a.alternate,a);break;case 24:os(s,a,l,u,r),r&&h&2048&&Vm(a.alternate,a);break;default:os(s,a,l,u,r)}t=t.sibling}}function ho(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:ho(n,i),r&2048&&Om(i.alternate,i);break;case 24:ho(n,i),r&2048&&Vm(i.alternate,i);break;default:ho(n,i)}t=t.sibling}}var Ka=8192;function is(e){if(e.subtreeFlags&Ka)for(e=e.child;e!==null;)JT(e),e=e.sibling}function JT(e){switch(e.tag){case 26:is(e),e.flags&Ka&&e.memoizedState!==null&&MR(Tn,e.memoizedState,e.memoizedProps);break;case 5:is(e);break;case 3:case 4:var t=Tn;Tn=ic(e.stateNode.containerInfo),is(e),Tn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Ka,Ka=16777216,is(e),Ka=t):is(e));break;default:is(e)}}function t0(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function qa(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ie=i,n0(i,e)}t0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)e0(e),e=e.sibling}function e0(e){switch(e.tag){case 0:case 11:case 15:qa(e),e.flags&2048&&ir(9,e,e.return);break;case 3:qa(e);break;case 12:qa(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,yu(e)):qa(e);break;default:qa(e)}}function yu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ie=i,n0(i,e)}t0(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ir(8,t,t.return),yu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,yu(t));break;default:yu(t)}e=e.sibling}}function n0(e,t){for(;ie!==null;){var n=ie;switch(n.tag){case 0:case 11:case 15:ir(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:nl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ie=i;else t:for(n=e;ie!==null;){i=ie;var r=i.sibling,s=i.return;if(KT(i),i===n){ie=null;break t}if(r!==null){r.return=s,ie=r;break t}ie=s}}}var $w={getCacheForType:function(e){var t=Re(Zt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Zw=typeof WeakMap=="function"?WeakMap:Map,yt=0,bt=null,it=null,ut=0,gt=0,Xe=null,ji=!1,ua=!1,Mm=!1,ui=0,jt=0,rr=0,xr=0,km=0,mn=0,Ks=0,fo=null,qe=null,id=!1,Pm=0,Zu=1/0,Wu=null,Fi=null,ge=0,Qi=null,Ys=null,Ms=0,rd=0,sd=null,i0=null,mo=0,ad=null;function en(){if(yt&2&&ut!==0)return ut&-ut;if(Z.T!==null){var e=Hs;return e!==0?e:Um()}return mE()}function r0(){mn===0&&(mn=!(ut&536870912)||dt?cE():536870912);var e=pn.current;return e!==null&&(e.flags|=32),mn}function nn(e,t,n){(e===bt&&(gt===2||gt===9)||e.cancelPendingCommit!==null)&&(Xs(e,0),zi(e,ut,mn,!1)),Zo(e,n),(!(yt&2)||e!==bt)&&(e===bt&&(!(yt&2)&&(xr|=n),jt===4&&zi(e,ut,mn,!1)),qn(e))}function s0(e,t,n){if(yt&6)throw Error(L(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||$o(e,t),r=i?tR(e,t):sf(e,t,!0),s=i;do{if(r===0){ua&&!i&&zi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Ww(n)){r=sf(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=fo;var u=l.current.memoizedState.isDehydrated;if(u&&(Xs(l,a).flags|=256),a=sf(l,a,!1),a!==2){if(Mm&&!u){l.errorRecoveryDisabledLanes|=s,xr|=s,r=4;break t}s=qe,qe=r,s!==null&&(qe===null?qe=s:qe.push.apply(qe,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){Xs(e,0),zi(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(L(345));case 4:if((t&4194048)!==t)break;case 6:zi(i,t,mn,!ji);break t;case 2:qe=null;break;case 3:case 5:break;default:throw Error(L(329))}if((t&62914560)===t&&(r=Pm+300-Vn(),10<r)){if(zi(i,t,mn,!ji),Oc(i,0,!0)!==0)break t;i.timeoutHandle=b0(jy.bind(null,i,n,qe,Wu,id,t,mn,xr,Ks,ji,s,2,-0,0),r);break t}jy(i,n,qe,Wu,id,t,mn,xr,Ks,ji,s,0,-0,0)}}break}while(!0);qn(e)}function jy(e,t,n,i,r,s,a,l,u,h,d,p,m,y){if(e.timeoutHandle=-1,p=t.subtreeFlags,(p&8192||(p&16785408)===16785408)&&(Vo={stylesheets:null,count:0,unsuspend:VR},JT(t),p=kR(),p!==null)){e.cancelPendingCommit=p(By.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,y)),zi(e,s,a,!h);return}By(e,t,s,n,i,r,a,l,u)}function Ww(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!an(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zi(e,t,n,i){t&=~km,t&=~xr,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-tn(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&fE(e,n,t)}function qc(){return yt&6?!0:(ol(0),!1)}function Lm(){if(it!==null){if(gt===0)var e=it.return;else e=it,Wn=Kr=null,Sm(e),Vs=null,Do=0,e=it;for(;e!==null;)zT(e.alternate,e),e=e.return;it=null}}function Xs(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,gR(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Lm(),bt=e,it=n=ni(e.current,null),ut=t,gt=0,Xe=null,ji=!1,ua=$o(e,t),Mm=!1,Ks=mn=km=xr=rr=jt=0,qe=fo=null,id=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-tn(i),s=1<<r;t|=e[r],i&=~s}return ui=t,Pc(),n}function a0(e,t){et=null,Z.H=Fu,t===il||t===Uc?(t=yy(),gt=3):t===GE?(t=yy(),gt=4):gt=t===MT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Xe=t,it===null&&(jt=1,Yu(e,fn(t,e.current)))}function o0(){var e=Z.H;return Z.H=Fu,e===null?Fu:e}function l0(){var e=Z.A;return Z.A=$w,e}function od(){jt=4,ji||(ut&4194048)!==ut&&pn.current!==null||(ua=!0),!(rr&134217727)&&!(xr&134217727)||bt===null||zi(bt,ut,mn,!1)}function sf(e,t,n){var i=yt;yt|=2;var r=o0(),s=l0();(bt!==e||ut!==t)&&(Wu=null,Xs(e,t)),t=!1;var a=jt;t:do try{if(gt!==0&&it!==null){var l=it,u=Xe;switch(gt){case 8:Lm(),a=6;break t;case 3:case 2:case 9:case 6:pn.current===null&&(t=!0);var h=gt;if(gt=0,Xe=null,bs(e,l,u,h),n&&ua){a=0;break t}break;default:h=gt,gt=0,Xe=null,bs(e,l,u,h)}}Jw(),a=jt;break}catch(d){a0(e,d)}while(!0);return t&&e.shellSuspendCounter++,Wn=Kr=null,yt=i,Z.H=r,Z.A=s,it===null&&(bt=null,ut=0,Pc()),a}function Jw(){for(;it!==null;)u0(it)}function tR(e,t){var n=yt;yt|=2;var i=o0(),r=l0();bt!==e||ut!==t?(Wu=null,Zu=Vn()+500,Xs(e,t)):ua=$o(e,t);t:do try{if(gt!==0&&it!==null){t=it;var s=Xe;e:switch(gt){case 1:gt=0,Xe=null,bs(e,t,s,1);break;case 2:case 9:if(gy(s)){gt=0,Xe=null,zy(t);break}t=function(){gt!==2&&gt!==9||bt!==e||(gt=7),qn(e)},s.then(t,t);break t;case 3:gt=7;break t;case 4:gt=5;break t;case 7:gy(s)?(gt=0,Xe=null,zy(t)):(gt=0,Xe=null,bs(e,t,s,7));break;case 5:var a=null;switch(it.tag){case 26:a=it.memoizedState;case 5:case 27:var l=it;if(!a||C0(a)){gt=0,Xe=null;var u=l.sibling;if(u!==null)it=u;else{var h=l.return;h!==null?(it=h,Hc(h)):it=null}break e}}gt=0,Xe=null,bs(e,t,s,5);break;case 6:gt=0,Xe=null,bs(e,t,s,6);break;case 8:Lm(),jt=6;break t;default:throw Error(L(462))}}eR();break}catch(d){a0(e,d)}while(!0);return Wn=Kr=null,Z.H=i,Z.A=r,yt=n,it!==null?0:(bt=null,ut=0,Pc(),jt)}function eR(){for(;it!==null&&!S1();)u0(it)}function u0(e){var t=jT(e.alternate,e,ui);e.memoizedProps=e.pendingProps,t===null?Hc(e):it=t}function zy(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Vy(n,t,t.pendingProps,t.type,void 0,ut);break;case 11:t=Vy(n,t,t.pendingProps,t.type.render,t.ref,ut);break;case 5:Sm(t);default:zT(n,t),t=it=zE(t,ui),t=jT(n,t,ui)}e.memoizedProps=e.pendingProps,t===null?Hc(e):it=t}function bs(e,t,n,i){Wn=Kr=null,Sm(t),Vs=null,Do=0;var r=t.return;try{if(Gw(e,r,t,n,ut)){jt=1,Yu(e,fn(n,e.current)),it=null;return}}catch(s){if(r!==null)throw it=r,s;jt=1,Yu(e,fn(n,e.current)),it=null;return}t.flags&32768?(dt||i===1?e=!0:ua||ut&536870912?e=!1:(ji=e=!0,(i===2||i===9||i===3||i===6)&&(i=pn.current,i!==null&&i.tag===13&&(i.flags|=16384))),c0(t,e)):Hc(t)}function Hc(e){var t=e;do{if(t.flags&32768){c0(t,ji);return}e=t.return;var n=Qw(t.alternate,t,ui);if(n!==null){it=n;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);jt===0&&(jt=5)}function c0(e,t){do{var n=Kw(e.alternate,e);if(n!==null){n.flags&=32767,it=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){it=e;return}it=e=n}while(e!==null);jt=6,it=null}function By(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do Gc();while(ge!==0);if(yt&6)throw Error(L(327));if(t!==null){if(t===e.current)throw Error(L(177));if(s=t.lanes|t.childLanes,s|=cm,V1(e,n,s,a,l,u),e===bt&&(it=bt=null,ut=0),Ys=t,Qi=e,Ms=n,rd=s,sd=r,i0=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,sR(ku,function(){return p0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Z.T,Z.T=null,r=mt.p,mt.p=2,a=yt,yt|=4;try{Yw(e,t,n)}finally{yt=a,mt.p=r,Z.T=i}}ge=1,h0(),f0(),d0()}}function h0(){if(ge===1){ge=0;var e=Qi,t=Ys,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Z.T,Z.T=null;var i=mt.p;mt.p=2;var r=yt;yt|=4;try{$T(t,e);var s=hd,a=OE(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&xE(l.ownerDocument.documentElement,l)){if(u!==null&&um(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var p=l.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var y=m.getSelection(),D=l.textContent.length,V=Math.min(u.start,D),M=u.end===void 0?V:Math.min(u.end,D);!y.extend&&V>M&&(a=M,M=V,V=a);var b=ly(l,V),v=ly(l,M);if(b&&v&&(y.rangeCount!==1||y.anchorNode!==b.node||y.anchorOffset!==b.offset||y.focusNode!==v.node||y.focusOffset!==v.offset)){var R=p.createRange();R.setStart(b.node,b.offset),y.removeAllRanges(),V>M?(y.addRange(R),y.extend(v.node,v.offset)):(R.setEnd(v.node,v.offset),y.addRange(R))}}}}for(p=[],y=l;y=y.parentNode;)y.nodeType===1&&p.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var x=p[l];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}ac=!!cd,hd=cd=null}finally{yt=r,mt.p=i,Z.T=n}}e.current=t,ge=2}}function f0(){if(ge===2){ge=0;var e=Qi,t=Ys,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Z.T,Z.T=null;var i=mt.p;mt.p=2;var r=yt;yt|=4;try{QT(e,t.alternate,t)}finally{yt=r,mt.p=i,Z.T=n}}ge=3}}function d0(){if(ge===4||ge===3){ge=0,b1();var e=Qi,t=Ys,n=Ms,i=i0;t.subtreeFlags&10256||t.flags&10256?ge=5:(ge=0,Ys=Qi=null,m0(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Fi=null),nm(n),t=t.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(Xo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Z.T,r=mt.p,mt.p=2,Z.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{Z.T=t,mt.p=r}}Ms&3&&Gc(),qn(e),r=e.pendingLanes,n&4194090&&r&42?e===ad?mo++:(mo=0,ad=e):mo=0,ol(0)}}function m0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,nl(t)))}function Gc(e){return h0(),f0(),d0(),p0()}function p0(){if(ge!==5)return!1;var e=Qi,t=rd;rd=0;var n=nm(Ms),i=Z.T,r=mt.p;try{mt.p=32>n?32:n,Z.T=null,n=sd,sd=null;var s=Qi,a=Ms;if(ge=0,Ys=Qi=null,Ms=0,yt&6)throw Error(L(331));var l=yt;if(yt|=4,e0(s.current),WT(s,s.current,a,n),yt=l,ol(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(Xo,s)}catch{}return!0}finally{mt.p=r,Z.T=i,m0(e,t)}}function qy(e,t,n){t=fn(n,t),t=Jf(e.stateNode,t,2),e=Gi(e,t,2),e!==null&&(Zo(e,2),qn(e))}function At(e,t,n){if(e.tag===3)qy(e,e,n);else for(;t!==null;){if(t.tag===3){qy(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Fi===null||!Fi.has(i))){e=fn(n,e),n=OT(2),i=Gi(t,n,2),i!==null&&(VT(n,i,t,e),Zo(i,2),qn(i));break}}t=t.return}}function af(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Zw;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Mm=!0,r.add(n),e=nR.bind(null,e,t,n),t.then(e,e))}function nR(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,bt===e&&(ut&n)===n&&(jt===4||jt===3&&(ut&62914560)===ut&&300>Vn()-Pm?!(yt&2)&&Xs(e,0):km|=n,Ks===ut&&(Ks=0)),qn(e)}function g0(e,t){t===0&&(t=hE()),e=la(e,t),e!==null&&(Zo(e,t),qn(e))}function iR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),g0(e,n)}function rR(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(L(314))}i!==null&&i.delete(t),g0(e,n)}function sR(e,t){return tm(e,t)}var Ju=null,ls=null,ld=!1,tc=!1,of=!1,Or=0;function qn(e){e!==ls&&e.next===null&&(ls===null?Ju=ls=e:ls=ls.next=e),tc=!0,ld||(ld=!0,oR())}function ol(e,t){if(!of&&tc){of=!0;do for(var n=!1,i=Ju;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-tn(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Hy(i,s))}else s=ut,s=Oc(i,i===bt?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||$o(i,s)||(n=!0,Hy(i,s));i=i.next}while(n);of=!1}}function aR(){y0()}function y0(){tc=ld=!1;var e=0;Or!==0&&(pR()&&(e=Or),Or=0);for(var t=Vn(),n=null,i=Ju;i!==null;){var r=i.next,s=_0(i,t);s===0?(i.next=null,n===null?Ju=r:n.next=r,r===null&&(ls=n)):(n=i,(e!==0||s&3)&&(tc=!0)),i=r}ol(e)}function _0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-tn(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=O1(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=bt,n=ut,n=Oc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(gt===2||gt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Oh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||$o(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Oh(i),nm(n)){case 2:case 8:n=lE;break;case 32:n=ku;break;case 268435456:n=uE;break;default:n=ku}return i=v0.bind(null,e),n=tm(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Oh(i),e.callbackPriority=2,e.callbackNode=null,2}function v0(e,t){if(ge!==0&&ge!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Gc()&&e.callbackNode!==n)return null;var i=ut;return i=Oc(e,e===bt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(s0(e,i,t),_0(e,Vn()),e.callbackNode!=null&&e.callbackNode===n?v0.bind(null,e):null)}function Hy(e,t){if(Gc())return null;s0(e,t,!0)}function oR(){yR(function(){yt&6?tm(oE,aR):y0()})}function Um(){return Or===0&&(Or=cE()),Or}function Gy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:uu(""+e)}function Fy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function lR(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=Gy((r[Ge]||null).action),a=i.submitter;a&&(t=(t=a[Ge]||null)?Gy(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new Vc("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Or!==0){var u=a?Fy(r,a):new FormData(r);Zf(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?Fy(r,a):new FormData(r),Zf(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var lf=0;lf<jf.length;lf++){var uf=jf[lf],uR=uf.toLowerCase(),cR=uf[0].toUpperCase()+uf.slice(1);Rn(uR,"on"+cR)}Rn(ME,"onAnimationEnd");Rn(kE,"onAnimationIteration");Rn(PE,"onAnimationStart");Rn("dblclick","onDoubleClick");Rn("focusin","onFocus");Rn("focusout","onBlur");Rn(Iw,"onTransitionRun");Rn(Cw,"onTransitionStart");Rn(Nw,"onTransitionCancel");Rn(LE,"onTransitionEnd");Bs("onMouseEnter",["mouseout","mouseover"]);Bs("onMouseLeave",["mouseout","mouseover"]);Bs("onPointerEnter",["pointerout","pointerover"]);Bs("onPointerLeave",["pointerout","pointerover"]);Gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xo));function E0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Ku(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Ku(d)}r.currentTarget=null,s=u}}}}function nt(e,t){var n=t[Of];n===void 0&&(n=t[Of]=new Set);var i=e+"__bubble";n.has(i)||(T0(t,e,2,!1),n.add(i))}function cf(e,t,n){var i=0;t&&(i|=4),T0(n,e,i,t)}var Wl="_reactListening"+Math.random().toString(36).slice(2);function jm(e){if(!e[Wl]){e[Wl]=!0,pE.forEach(function(n){n!=="selectionchange"&&(hR.has(n)||cf(n,!1,e),cf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wl]||(t[Wl]=!0,cf("selectionchange",!1,t))}}function T0(e,t,n,i){switch(V0(t)){case 2:var r=UR;break;case 8:r=jR;break;default:r=Hm}n=r.bind(null,t,n,e),r=void 0,!Pf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function hf(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=ps(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}SE(function(){var h=s,d=sm(n),p=[];t:{var m=UE.get(e);if(m!==void 0){var y=Vc,D=e;switch(e){case"keypress":if(hu(n)===0)break t;case"keydown":case"keyup":y=sw;break;case"focusin":D="focus",y=zh;break;case"focusout":D="blur",y=zh;break;case"beforeblur":case"afterblur":y=zh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Wg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=K1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=lw;break;case ME:case kE:case PE:y=$1;break;case LE:y=cw;break;case"scroll":case"scrollend":y=F1;break;case"wheel":y=fw;break;case"copy":case"cut":case"paste":y=W1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ty;break;case"toggle":case"beforetoggle":y=mw}var V=(t&4)!==0,M=!V&&(e==="scroll"||e==="scrollend"),b=V?m!==null?m+"Capture":null:m;V=[];for(var v=h,R;v!==null;){var x=v;if(R=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||R===null||b===null||(x=wo(v,b),x!=null&&V.push(Oo(v,x,R))),M)break;v=v.return}0<V.length&&(m=new y(m,D,null,n,d),p.push({event:m,listeners:V}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&n!==kf&&(D=n.relatedTarget||n.fromElement)&&(ps(D)||D[aa]))break t;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(D=n.relatedTarget||n.toElement,y=h,D=D?ps(D):null,D!==null&&(M=Yo(D),V=D.tag,D!==M||V!==5&&V!==27&&V!==6)&&(D=null)):(y=null,D=h),y!==D)){if(V=Wg,x="onMouseLeave",b="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(V=ty,x="onPointerLeave",b="onPointerEnter",v="pointer"),M=y==null?m:Qa(y),R=D==null?m:Qa(D),m=new V(x,v+"leave",y,n,d),m.target=M,m.relatedTarget=R,x=null,ps(d)===h&&(V=new V(b,v+"enter",D,n,d),V.target=R,V.relatedTarget=M,x=V),M=x,y&&D)e:{for(V=y,b=D,v=0,R=V;R;R=rs(R))v++;for(R=0,x=b;x;x=rs(x))R++;for(;0<v-R;)V=rs(V),v--;for(;0<R-v;)b=rs(b),R--;for(;v--;){if(V===b||b!==null&&V===b.alternate)break e;V=rs(V),b=rs(b)}V=null}else V=null;y!==null&&Qy(p,m,y,V,!1),D!==null&&M!==null&&Qy(p,M,D,V,!0)}}t:{if(m=h?Qa(h):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var U=ry;else if(iy(m))if(NE)U=bw;else{U=Aw;var B=Tw}else y=m.nodeName,!y||y.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&rm(h.elementType)&&(U=ry):U=Sw;if(U&&(U=U(e,h))){CE(p,U,n,d);break t}B&&B(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Mf(m,"number",m.value)}switch(B=h?Qa(h):window,e){case"focusin":(iy(B)||B.contentEditable==="true")&&(_s=B,Lf=h,io=null);break;case"focusout":io=Lf=_s=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,uy(p,n,d);break;case"selectionchange":if(Rw)break;case"keydown":case"keyup":uy(p,n,d)}var T;if(lm)t:{switch(e){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else ys?RE(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(wE&&n.locale!=="ko"&&(ys||_!=="onCompositionStart"?_==="onCompositionEnd"&&ys&&(T=bE()):(Ui=d,am="value"in Ui?Ui.value:Ui.textContent,ys=!0)),B=ec(h,_),0<B.length&&(_=new Jg(_,e,null,n,d),p.push({event:_,listeners:B}),T?_.data=T:(T=IE(n),T!==null&&(_.data=T)))),(T=gw?yw(e,n):_w(e,n))&&(_=ec(h,"onBeforeInput"),0<_.length&&(B=new Jg("onBeforeInput","beforeinput",null,n,d),p.push({event:B,listeners:_}),B.data=T)),lR(p,e,h,n,d)}E0(p,t)})}function Oo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ec(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=wo(e,n),r!=null&&i.unshift(Oo(e,r,s)),r=wo(e,t),r!=null&&i.push(Oo(e,r,s))),e.tag===3)return i;e=e.return}return[]}function rs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Qy(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=wo(n,s),h!=null&&a.unshift(Oo(n,h,u))):r||(h=wo(n,s),h!=null&&a.push(Oo(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var fR=/\r\n?/g,dR=/\u0000|\uFFFD/g;function Ky(e){return(typeof e=="string"?e:""+e).replace(fR,`
`).replace(dR,"")}function A0(e,t){return t=Ky(t),Ky(e)===t}function Fc(){}function _t(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||qs(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&qs(e,""+i);break;case"className":Fl(e,"class",i);break;case"tabIndex":Fl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Fl(e,n,i);break;case"style":AE(e,i,s);break;case"data":if(t!=="object"){Fl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=uu(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&_t(e,t,"name",r.name,r,null),_t(e,t,"formEncType",r.formEncType,r,null),_t(e,t,"formMethod",r.formMethod,r,null),_t(e,t,"formTarget",r.formTarget,r,null)):(_t(e,t,"encType",r.encType,r,null),_t(e,t,"method",r.method,r,null),_t(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=uu(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Fc);break;case"onScroll":i!=null&&nt("scroll",e);break;case"onScrollEnd":i!=null&&nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(L(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(L(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=uu(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":nt("beforetoggle",e),nt("toggle",e),lu(e,"popover",i);break;case"xlinkActuate":Fn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Fn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Fn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Fn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Fn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Fn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":lu(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=H1.get(n)||n,lu(e,n,i))}}function ud(e,t,n,i,r,s){switch(n){case"style":AE(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(L(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(L(60));e.innerHTML=n}}break;case"children":typeof i=="string"?qs(e,i):(typeof i=="number"||typeof i=="bigint")&&qs(e,""+i);break;case"onScroll":i!=null&&nt("scroll",e);break;case"onScrollEnd":i!=null&&nt("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Fc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gE.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Ge]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):lu(e,n,i)}}}function ve(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",e),nt("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(L(137,t));default:_t(e,t,s,a,n,null)}}r&&_t(e,t,"srcSet",n.srcSet,n,null),i&&_t(e,t,"src",n.src,n,null);return;case"input":nt("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(L(137,t));break;default:_t(e,t,i,d,n,null)}}vE(e,s,l,u,h,a,r,!1),Pu(e);return;case"select":nt("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:_t(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?Cs(e,!!i,t,!1):n!=null&&Cs(e,!!i,n,!0);return;case"textarea":nt("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(L(91));break;default:_t(e,t,a,l,n,null)}TE(e,i,r,s),Pu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:_t(e,t,u,i,n,null)}return;case"dialog":nt("beforetoggle",e),nt("toggle",e),nt("cancel",e),nt("close",e);break;case"iframe":case"object":nt("load",e);break;case"video":case"audio":for(i=0;i<xo.length;i++)nt(xo[i],e);break;case"image":nt("error",e),nt("load",e);break;case"details":nt("toggle",e);break;case"embed":case"source":case"link":nt("error",e),nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(L(137,t));default:_t(e,t,h,i,n,null)}return;default:if(rm(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&ud(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&_t(e,t,l,i,n,null))}function mR(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(y in n){var p=n[y];if(n.hasOwnProperty(y)&&p!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":u=p;default:i.hasOwnProperty(y)||_t(e,t,y,null,i,p)}}for(var m in i){var y=i[m];if(p=n[m],i.hasOwnProperty(m)&&(y!=null||p!=null))switch(m){case"type":s=y;break;case"name":r=y;break;case"checked":h=y;break;case"defaultChecked":d=y;break;case"value":a=y;break;case"defaultValue":l=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(L(137,t));break;default:y!==p&&_t(e,t,m,y,i,p)}}Vf(e,a,l,u,h,d,s,r);return;case"select":y=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":y=u;default:i.hasOwnProperty(s)||_t(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&_t(e,t,r,s,i,u)}t=l,n=a,i=y,m!=null?Cs(e,!!n,m,!1):!!i!=!!n&&(t!=null?Cs(e,!!n,t,!0):Cs(e,!!n,n?[]:"",!1));return;case"textarea":y=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:_t(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":y=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(L(91));break;default:r!==s&&_t(e,t,a,r,i,s)}EE(e,m,y);return;case"option":for(var D in n)if(m=n[D],n.hasOwnProperty(D)&&m!=null&&!i.hasOwnProperty(D))switch(D){case"selected":e.selected=!1;break;default:_t(e,t,D,null,i,m)}for(u in i)if(m=i[u],y=n[u],i.hasOwnProperty(u)&&m!==y&&(m!=null||y!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:_t(e,t,u,m,i,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!=null&&!i.hasOwnProperty(V)&&_t(e,t,V,null,i,m);for(h in i)if(m=i[h],y=n[h],i.hasOwnProperty(h)&&m!==y&&(m!=null||y!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(L(137,t));break;default:_t(e,t,h,m,i,y)}return;default:if(rm(t)){for(var M in n)m=n[M],n.hasOwnProperty(M)&&m!==void 0&&!i.hasOwnProperty(M)&&ud(e,t,M,void 0,i,m);for(d in i)m=i[d],y=n[d],!i.hasOwnProperty(d)||m===y||m===void 0&&y===void 0||ud(e,t,d,m,i,y);return}}for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!=null&&!i.hasOwnProperty(b)&&_t(e,t,b,null,i,m);for(p in i)m=i[p],y=n[p],!i.hasOwnProperty(p)||m===y||m==null&&y==null||_t(e,t,p,m,i,y)}var cd=null,hd=null;function nc(e){return e.nodeType===9?e:e.ownerDocument}function Yy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function S0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function fd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ff=null;function pR(){var e=window.event;return e&&e.type==="popstate"?e===ff?!1:(ff=e,!0):(ff=null,!1)}var b0=typeof setTimeout=="function"?setTimeout:void 0,gR=typeof clearTimeout=="function"?clearTimeout:void 0,Xy=typeof Promise=="function"?Promise:void 0,yR=typeof queueMicrotask=="function"?queueMicrotask:typeof Xy<"u"?function(e){return Xy.resolve(null).then(e).catch(_R)}:b0;function _R(e){setTimeout(function(){throw e})}function fr(e){return e==="head"}function $y(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&po(a.documentElement),n&2&&po(a.body),n&4)for(n=a.head,po(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[Wo]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),Lo(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);Lo(t)}function dd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":dd(n),im(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function vR(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Wo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Sn(e.nextSibling),e===null)break}return null}function ER(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Sn(e.nextSibling),e===null))return null;return e}function md(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function TR(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var pd=null;function Zy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function w0(e,t,n){switch(t=nc(n),e){case"html":if(e=t.documentElement,!e)throw Error(L(452));return e;case"head":if(e=t.head,!e)throw Error(L(453));return e;case"body":if(e=t.body,!e)throw Error(L(454));return e;default:throw Error(L(451))}}function po(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);im(e)}var gn=new Map,Wy=new Set;function ic(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var pi=mt.d;mt.d={f:AR,r:SR,D:bR,C:wR,L:RR,m:IR,X:NR,S:CR,M:DR};function AR(){var e=pi.f(),t=qc();return e||t}function SR(e){var t=oa(e);t!==null&&t.tag===5&&t.type==="form"?_T(t):pi.r(e)}var ca=typeof document>"u"?null:document;function R0(e,t,n){var i=ca;if(i&&typeof t=="string"&&t){var r=hn(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Wy.has(r)||(Wy.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),ve(t,"link",e),re(t),i.head.appendChild(t)))}}function bR(e){pi.D(e),R0("dns-prefetch",e,null)}function wR(e,t){pi.C(e,t),R0("preconnect",e,t)}function RR(e,t,n){pi.L(e,t,n);var i=ca;if(i&&e&&t){var r='link[rel="preload"][as="'+hn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+hn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+hn(n.imageSizes)+'"]')):r+='[href="'+hn(e)+'"]';var s=r;switch(t){case"style":s=$s(e);break;case"script":s=ha(e)}gn.has(s)||(e=Ct({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),gn.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(ll(s))||t==="script"&&i.querySelector(ul(s))||(t=i.createElement("link"),ve(t,"link",e),re(t),i.head.appendChild(t)))}}function IR(e,t){pi.m(e,t);var n=ca;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+hn(i)+'"][href="'+hn(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=ha(e)}if(!gn.has(s)&&(e=Ct({rel:"modulepreload",href:e},t),gn.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ul(s)))return}i=n.createElement("link"),ve(i,"link",e),re(i),n.head.appendChild(i)}}}function CR(e,t,n){pi.S(e,t,n);var i=ca;if(i&&e){var r=Is(i).hoistableStyles,s=$s(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(ll(s)))l.loading=5;else{e=Ct({rel:"stylesheet",href:e,"data-precedence":t},n),(n=gn.get(s))&&zm(e,n);var u=a=i.createElement("link");re(u),ve(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,_u(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function NR(e,t){pi.X(e,t);var n=ca;if(n&&e){var i=Is(n).hoistableScripts,r=ha(e),s=i.get(r);s||(s=n.querySelector(ul(r)),s||(e=Ct({src:e,async:!0},t),(t=gn.get(r))&&Bm(e,t),s=n.createElement("script"),re(s),ve(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function DR(e,t){pi.M(e,t);var n=ca;if(n&&e){var i=Is(n).hoistableScripts,r=ha(e),s=i.get(r);s||(s=n.querySelector(ul(r)),s||(e=Ct({src:e,async:!0,type:"module"},t),(t=gn.get(r))&&Bm(e,t),s=n.createElement("script"),re(s),ve(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Jy(e,t,n,i){var r=(r=qi.current)?ic(r):null;if(!r)throw Error(L(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=$s(n.href),n=Is(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=$s(n.href);var s=Is(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(ll(e)))&&!s._p&&(a.instance=s,a.state.loading=5),gn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},gn.set(e,n),s||xR(r,e,n,a.state))),t&&i===null)throw Error(L(528,""));return a}if(t&&i!==null)throw Error(L(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ha(n),n=Is(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(L(444,e))}}function $s(e){return'href="'+hn(e)+'"'}function ll(e){return'link[rel="stylesheet"]['+e+"]"}function I0(e){return Ct({},e,{"data-precedence":e.precedence,precedence:null})}function xR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),ve(t,"link",n),re(t),e.head.appendChild(t))}function ha(e){return'[src="'+hn(e)+'"]'}function ul(e){return"script[async]"+e}function t_(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+hn(n.href)+'"]');if(i)return t.instance=i,re(i),i;var r=Ct({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),re(i),ve(i,"style",r),_u(i,n.precedence,e),t.instance=i;case"stylesheet":r=$s(n.href);var s=e.querySelector(ll(r));if(s)return t.state.loading|=4,t.instance=s,re(s),s;i=I0(n),(r=gn.get(r))&&zm(i,r),s=(e.ownerDocument||e).createElement("link"),re(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ve(s,"link",i),t.state.loading|=4,_u(s,n.precedence,e),t.instance=s;case"script":return s=ha(n.src),(r=e.querySelector(ul(s)))?(t.instance=r,re(r),r):(i=n,(r=gn.get(s))&&(i=Ct({},n),Bm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),re(r),ve(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(L(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,_u(i,n.precedence,e));return t.instance}function _u(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function zm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Bm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var vu=null;function e_(e,t,n){if(vu===null){var i=new Map,r=vu=new Map;r.set(n,i)}else r=vu,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Wo]||s[we]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function n_(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function OR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function C0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Vo=null;function VR(){}function MR(e,t,n){if(Vo===null)throw Error(L(475));var i=Vo;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=$s(n.href),s=e.querySelector(ll(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=rc.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,re(s);return}s=e.ownerDocument||e,n=I0(n),(r=gn.get(r))&&zm(n,r),s=s.createElement("link"),re(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ve(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=rc.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function kR(){if(Vo===null)throw Error(L(475));var e=Vo;return e.stylesheets&&e.count===0&&gd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&gd(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function rc(){if(this.count--,this.count===0){if(this.stylesheets)gd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var sc=null;function gd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,sc=new Map,t.forEach(PR,e),sc=null,rc.call(e))}function PR(e,t){if(!(t.state.loading&4)){var n=sc.get(e);if(n)var i=n.get(null);else{n=new Map,sc.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=rc.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Mo={$$typeof:Xn,Provider:null,Consumer:null,_currentValue:Rr,_currentValue2:Rr,_threadCount:0};function LR(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vh(0),this.hiddenUpdates=Vh(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function N0(e,t,n,i,r,s,a,l,u,h,d,p){return e=new LR(e,t,n,a,l,u,h,p),t=1,s===!0&&(t|=24),s=$e(3,null,null,t),e.current=s,s.stateNode=e,t=pm(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},ym(s),e}function D0(e){return e?(e=Ts,e):Ts}function x0(e,t,n,i,r,s){r=D0(r),i.context===null?i.context=r:i.pendingContext=r,i=Hi(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Gi(e,i,t),n!==null&&(nn(n,e,t),ao(n,e,t))}function i_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function qm(e,t){i_(e,t),(e=e.alternate)&&i_(e,t)}function O0(e){if(e.tag===13){var t=la(e,67108864);t!==null&&nn(t,e,67108864),qm(e,67108864)}}var ac=!0;function UR(e,t,n,i){var r=Z.T;Z.T=null;var s=mt.p;try{mt.p=2,Hm(e,t,n,i)}finally{mt.p=s,Z.T=r}}function jR(e,t,n,i){var r=Z.T;Z.T=null;var s=mt.p;try{mt.p=8,Hm(e,t,n,i)}finally{mt.p=s,Z.T=r}}function Hm(e,t,n,i){if(ac){var r=yd(i);if(r===null)hf(e,t,i,oc,n),r_(e,i);else if(BR(r,e,t,n,i))i.stopPropagation();else if(r_(e,i),t&4&&-1<zR.indexOf(e)){for(;r!==null;){var s=oa(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=Tr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-tn(a);l.entanglements[1]|=u,a&=~u}qn(s),!(yt&6)&&(Zu=Vn()+500,ol(0))}}break;case 13:l=la(s,2),l!==null&&nn(l,s,2),qc(),qm(s,2)}if(s=yd(i),s===null&&hf(e,t,i,oc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else hf(e,t,i,null,n)}}function yd(e){return e=sm(e),Gm(e)}var oc=null;function Gm(e){if(oc=null,e=ps(e),e!==null){var t=Yo(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=iE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oc=e,null}function V0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(w1()){case oE:return 2;case lE:return 8;case ku:case R1:return 32;case uE:return 268435456;default:return 32}default:return 32}}var _d=!1,Ki=null,Yi=null,Xi=null,ko=new Map,Po=new Map,Oi=[],zR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function r_(e,t){switch(e){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":ko.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(t.pointerId)}}function Ha(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=oa(t),t!==null&&O0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function BR(e,t,n,i,r){switch(t){case"focusin":return Ki=Ha(Ki,e,t,n,i,r),!0;case"dragenter":return Yi=Ha(Yi,e,t,n,i,r),!0;case"mouseover":return Xi=Ha(Xi,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return ko.set(s,Ha(ko.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Po.set(s,Ha(Po.get(s)||null,e,t,n,i,r)),!0}return!1}function M0(e){var t=ps(e.target);if(t!==null){var n=Yo(t);if(n!==null){if(t=n.tag,t===13){if(t=iE(n),t!==null){e.blockedOn=t,M1(e.priority,function(){if(n.tag===13){var i=en();i=em(i);var r=la(n,i);r!==null&&nn(r,n,i),qm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Eu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);kf=i,n.target.dispatchEvent(i),kf=null}else return t=oa(n),t!==null&&O0(t),e.blockedOn=n,!1;t.shift()}return!0}function s_(e,t,n){Eu(e)&&n.delete(t)}function qR(){_d=!1,Ki!==null&&Eu(Ki)&&(Ki=null),Yi!==null&&Eu(Yi)&&(Yi=null),Xi!==null&&Eu(Xi)&&(Xi=null),ko.forEach(s_),Po.forEach(s_)}function Jl(e,t){e.blockedOn===t&&(e.blockedOn=null,_d||(_d=!0,te.unstable_scheduleCallback(te.unstable_NormalPriority,qR)))}var tu=null;function a_(e){tu!==e&&(tu=e,te.unstable_scheduleCallback(te.unstable_NormalPriority,function(){tu===e&&(tu=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(Gm(i||n)===null)continue;break}var s=oa(n);s!==null&&(e.splice(t,3),t-=3,Zf(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Lo(e){function t(u){return Jl(u,e)}Ki!==null&&Jl(Ki,e),Yi!==null&&Jl(Yi,e),Xi!==null&&Jl(Xi,e),ko.forEach(t),Po.forEach(t);for(var n=0;n<Oi.length;n++){var i=Oi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Oi.length&&(n=Oi[0],n.blockedOn===null);)M0(n),n.blockedOn===null&&Oi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Ge]||null;if(typeof s=="function")a||a_(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Ge]||null)l=a.formAction;else if(Gm(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),a_(n)}}}function Fm(e){this._internalRoot=e}Qc.prototype.render=Fm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));var n=t.current,i=en();x0(n,i,e,t,null,null)};Qc.prototype.unmount=Fm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;x0(e.current,2,null,e,null,null),qc(),t[aa]=null}};function Qc(e){this._internalRoot=e}Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=mE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Oi.length&&t!==0&&t<Oi[n].priority;n++);Oi.splice(n,0,e),n===0&&M0(e)}};var o_=eE.version;if(o_!=="19.1.1")throw Error(L(527,o_,"19.1.1"));mt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=_1(t),e=e!==null?rE(e):null,e=e===null?null:e.stateNode,e};var HR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{Xo=eu.inject(HR),Je=eu}catch{}}Dc.createRoot=function(e,t){if(!nE(e))throw Error(L(299));var n=!1,i="",r=NT,s=DT,a=xT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=N0(e,1,!1,null,null,n,i,r,s,a,l,null),e[aa]=t.current,jm(e),new Fm(t)};Dc.hydrateRoot=function(e,t,n){if(!nE(e))throw Error(L(299));var i=!1,r="",s=NT,a=DT,l=xT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=N0(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=D0(null),n=t.current,i=en(),i=em(i),r=Hi(i),r.callback=null,Gi(n,r,i),n=i,t.current.lanes=n,Zo(t,n),qn(t),e[aa]=t.current,jm(e),new Qc(t)};Dc.version="19.1.1";function k0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k0)}catch(e){console.error(e)}}k0(),Xv.exports=Dc;var GR=Xv.exports;const FR=()=>{};var l_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},QR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},L0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,p=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,y=h&63;u||(y=64,a||(m=64)),i.push(n[d],n[p],n[m],n[y])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(P0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):QR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const p=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||p==null)throw new KR;const m=s<<2|l>>4;if(i.push(m),h!==64){const y=l<<4&240|h>>2;if(i.push(y),p!==64){const D=h<<6&192|p;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class KR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YR=function(e){const t=P0(e);return L0.encodeByteArray(t,!0)},lc=function(e){return YR(e).replace(/\./g,"")},U0=function(e){try{return L0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=()=>XR().__FIREBASE_DEFAULTS__,ZR=()=>{if(typeof process>"u"||typeof l_>"u")return;const e=l_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},WR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&U0(e[1]);return t&&JSON.parse(t)},Kc=()=>{try{return FR()||$R()||ZR()||WR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},j0=e=>{var t,n;return(n=(t=Kc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},JR=e=>{const t=j0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},z0=()=>{var e;return(e=Kc())==null?void 0:e.config},B0=e=>{var t;return(t=Kc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function q0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[lc(JSON.stringify(n)),lc(JSON.stringify(a)),""].join(".")}const go={};function n2(){const e={prod:[],emulator:[]};for(const t of Object.keys(go))go[t]?e.emulator.push(t):e.prod.push(t);return e}function i2(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let u_=!1;function H0(e,t){if(typeof window>"u"||typeof document>"u"||!fa(window.location.host)||go[e]===t||go[e]||u_)return;go[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=n2().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{u_=!0,a()},m}function d(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=i2(i),y=n("text"),D=document.getElementById(y)||document.createElement("span"),V=n("learnmore"),M=document.getElementById(V)||document.createElement("a"),b=n("preprendIcon"),v=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(M,V);const x=h();u(v,b),R.append(v,D,M,x),document.body.appendChild(R)}s?(D.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function r2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function s2(){var t;const e=(t=Kc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function a2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function o2(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function l2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function u2(){const e=Ie();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function c2(){return!s2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function h2(){try{return typeof indexedDB=="object"}catch{return!1}}function f2(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="FirebaseError";class gi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=d2,Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?m2(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new gi(r,l,i)}}function m2(e,t){return e.replace(p2,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const p2=/\{\$([^}]+)}/g;function g2(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Lr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(c_(s)&&c_(a)){if(!Lr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function c_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Ya(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(s)}}),t}function Xa(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function y2(e,t){const n=new _2(e,t);return n.subscribe.bind(n)}class _2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");v2(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=df),r.error===void 0&&(r.error=df),r.complete===void 0&&(r.complete=df);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function v2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function df(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(e){return e&&e._delegate?e._delegate:e}class Ur{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new t2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(A2(t))try{this.getOrInitializeService({instanceIdentifier:br})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=br){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=br){return this.instances.has(t)}getOptions(t=br){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:T2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=br){return this.component?this.component.multipleInstances?t:br:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function T2(e){return e===br?void 0:e}function A2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new E2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(rt||(rt={}));const b2={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},w2=rt.INFO,R2={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},I2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=R2[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Qm{constructor(t){this.name=t,this._logLevel=w2,this._logHandler=I2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in rt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?b2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...t),this._logHandler(this,rt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...t),this._logHandler(this,rt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...t),this._logHandler(this,rt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...t),this._logHandler(this,rt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...t),this._logHandler(this,rt.ERROR,...t)}}const C2=(e,t)=>t.some(n=>e instanceof n);let h_,f_;function N2(){return h_||(h_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D2(){return f_||(f_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G0=new WeakMap,vd=new WeakMap,F0=new WeakMap,mf=new WeakMap,Km=new WeakMap;function x2(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n($i(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&G0.set(n,e)}).catch(()=>{}),Km.set(t,e),t}function O2(e){if(vd.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});vd.set(e,t)}let Ed={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return vd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||F0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $i(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function V2(e){Ed=e(Ed)}function M2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(pf(this),t,...n);return F0.set(i,t.sort?t.sort():[t]),$i(i)}:D2().includes(e)?function(...t){return e.apply(pf(this),t),$i(G0.get(this))}:function(...t){return $i(e.apply(pf(this),t))}}function k2(e){return typeof e=="function"?M2(e):(e instanceof IDBTransaction&&O2(e),C2(e,N2())?new Proxy(e,Ed):e)}function $i(e){if(e instanceof IDBRequest)return x2(e);if(mf.has(e))return mf.get(e);const t=k2(e);return t!==e&&(mf.set(e,t),Km.set(t,e)),t}const pf=e=>Km.get(e);function P2(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=$i(a);return i&&a.addEventListener("upgradeneeded",u=>{i($i(a.result),u.oldVersion,u.newVersion,$i(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const L2=["get","getKey","getAll","getAllKeys","count"],U2=["put","add","delete","clear"],gf=new Map;function d_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(gf.get(t))return gf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=U2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||L2.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return gf.set(t,s),s}V2(e=>({...e,get:(t,n,i)=>d_(t,n)||e.get(t,n,i),has:(t,n)=>!!d_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(z2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function z2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Td="@firebase/app",m_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new Qm("@firebase/app"),B2="@firebase/app-compat",q2="@firebase/analytics-compat",H2="@firebase/analytics",G2="@firebase/app-check-compat",F2="@firebase/app-check",Q2="@firebase/auth",K2="@firebase/auth-compat",Y2="@firebase/database",X2="@firebase/data-connect",$2="@firebase/database-compat",Z2="@firebase/functions",W2="@firebase/functions-compat",J2="@firebase/installations",tI="@firebase/installations-compat",eI="@firebase/messaging",nI="@firebase/messaging-compat",iI="@firebase/performance",rI="@firebase/performance-compat",sI="@firebase/remote-config",aI="@firebase/remote-config-compat",oI="@firebase/storage",lI="@firebase/storage-compat",uI="@firebase/firestore",cI="@firebase/ai",hI="@firebase/firestore-compat",fI="firebase",dI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="[DEFAULT]",mI={[Td]:"fire-core",[B2]:"fire-core-compat",[H2]:"fire-analytics",[q2]:"fire-analytics-compat",[F2]:"fire-app-check",[G2]:"fire-app-check-compat",[Q2]:"fire-auth",[K2]:"fire-auth-compat",[Y2]:"fire-rtdb",[X2]:"fire-data-connect",[$2]:"fire-rtdb-compat",[Z2]:"fire-fn",[W2]:"fire-fn-compat",[J2]:"fire-iid",[tI]:"fire-iid-compat",[eI]:"fire-fcm",[nI]:"fire-fcm-compat",[iI]:"fire-perf",[rI]:"fire-perf-compat",[sI]:"fire-rc",[aI]:"fire-rc-compat",[oI]:"fire-gcs",[lI]:"fire-gcs-compat",[uI]:"fire-fst",[hI]:"fire-fst-compat",[cI]:"fire-vertex","fire-js":"fire-js",[fI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=new Map,pI=new Map,Sd=new Map;function p_(e,t){try{e.container.addComponent(t)}catch(n){ci.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Zs(e){const t=e.name;if(Sd.has(t))return ci.debug(`There were multiple attempts to register component ${t}.`),!1;Sd.set(t,e);for(const n of uc.values())p_(n,e);for(const n of pI.values())p_(n,e);return!0}function Ym(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function dn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zi=new cl("app","Firebase",gI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=dI;function Q0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:Ad,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Zi.create("bad-app-name",{appName:String(r)});if(n||(n=z0()),!n)throw Zi.create("no-options");const s=uc.get(r);if(s){if(Lr(n,s.options)&&Lr(i,s.config))return s;throw Zi.create("duplicate-app",{appName:r})}const a=new S2(r);for(const u of Sd.values())a.addComponent(u);const l=new yI(n,i,a);return uc.set(r,l),l}function K0(e=Ad){const t=uc.get(e);if(!t&&e===Ad&&z0())return Q0();if(!t)throw Zi.create("no-app",{appName:e});return t}function Wi(e,t,n){let i=mI[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ci.warn(a.join(" "));return}Zs(new Ur(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="firebase-heartbeat-database",vI=1,Uo="firebase-heartbeat-store";let yf=null;function Y0(){return yf||(yf=P2(_I,vI,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Uo)}catch(n){console.warn(n)}}}}).catch(e=>{throw Zi.create("idb-open",{originalErrorMessage:e.message})})),yf}async function EI(e){try{const n=(await Y0()).transaction(Uo),i=await n.objectStore(Uo).get(X0(e));return await n.done,i}catch(t){if(t instanceof gi)ci.warn(t.message);else{const n=Zi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ci.warn(n.message)}}}async function g_(e,t){try{const i=(await Y0()).transaction(Uo,"readwrite");await i.objectStore(Uo).put(t,X0(e)),await i.done}catch(n){if(n instanceof gi)ci.warn(n.message);else{const i=Zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ci.warn(i.message)}}}function X0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=1024,AI=30;class SI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=y_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>AI){const a=RI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ci.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=y_(),{heartbeatsToSend:i,unsentEntries:r}=bI(this._heartbeatsCache.heartbeats),s=lc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ci.warn(n),""}}}function y_(){return new Date().toISOString().substring(0,10)}function bI(e,t=TI){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),__(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),__(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class wI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return h2()?f2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await EI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return g_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return g_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function __(e){return lc(JSON.stringify({version:2,heartbeats:e})).length}function RI(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(e){Zs(new Ur("platform-logger",t=>new j2(t),"PRIVATE")),Zs(new Ur("heartbeat",t=>new SI(t),"PRIVATE")),Wi(Td,m_,e),Wi(Td,m_,"esm2020"),Wi("fire-js","")}II("");function $0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CI=$0,Z0=new cl("auth","Firebase",$0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new Qm("@firebase/auth");function NI(e,...t){cc.logLevel<=rt.WARN&&cc.warn(`Auth (${da}): ${e}`,...t)}function Tu(e,...t){cc.logLevel<=rt.ERROR&&cc.error(`Auth (${da}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(e,...t){throw Xm(e,...t)}function kn(e,...t){return Xm(e,...t)}function W0(e,t,n){const i={...CI(),[t]:n};return new cl("auth","Firebase",i).create(t,{appName:e.name})}function ri(e){return W0(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xm(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return Z0.create(e,...t)}function X(e,t,...n){if(!e)throw Xm(t,...n)}function ti(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Tu(t),new Error(t)}function hi(e,t){e||ti(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function DI(){return v_()==="http:"||v_()==="https:"}function v_(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DI()||o2()||"connection"in navigator)?navigator.onLine:!0}function OI(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t,n){this.shortDelay=t,this.longDelay=n,hi(n>t,"Short delay should be less than long delay!"),this.isMobile=r2()||l2()}get(){return xI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(e,t){hi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kI=new fl(3e4,6e4);function dr(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function yi(e,t,n,i,r={}){return tA(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=hl({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return a2()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&fa(e.emulatorConfig.host)&&(h.credentials="include"),J0.fetch()(await eA(e,e.config.apiHost,n,l),h)})}async function tA(e,t,n){e._canInitEmulator=!1;const i={...VI,...t};try{const r=new LI(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw nu(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw nu(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw nu(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw nu(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw W0(e,d,h);bn(e,d)}}catch(r){if(r instanceof gi)throw r;bn(e,"network-request-failed",{message:String(r)})}}async function dl(e,t,n,i,r={}){const s=await yi(e,t,n,i,r);return"mfaPendingCredential"in s&&bn(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function eA(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?$m(e.config,r):`${e.config.apiScheme}://${r}`;return MI.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function PI(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(kn(this.auth,"network-request-failed")),kI.get())})}}function nu(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=kn(e,t,i);return r.customData._tokenResponse=n,r}function E_(e){return e!==void 0&&e.enterprise!==void 0}class UI{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return PI(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jI(e,t){return yi(e,"GET","/v2/recaptchaConfig",dr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(e,t){return yi(e,"POST","/v1/accounts:delete",t)}async function hc(e,t){return yi(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function BI(e,t=!1){const n=kt(e),i=await n.getIdToken(t),r=Zm(i);X(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:yo(_f(r.auth_time)),issuedAtTime:yo(_f(r.iat)),expirationTime:yo(_f(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function _f(e){return Number(e)*1e3}function Zm(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Tu("JWT malformed, contained fewer than 3 sections"),null;try{const r=U0(n);return r?JSON.parse(r):(Tu("Failed to decode base64 JWT payload"),null)}catch(r){return Tu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function T_(e){const t=Zm(e);return X(t,"internal-error"),X(typeof t.exp<"u","internal-error"),X(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof gi&&qI(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function qI({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yo(this.lastLoginAt),this.creationTime=yo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(e){var p;const t=e.auth,n=await e.getIdToken(),i=await Ws(e,hc(t,{idToken:n}));X(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(p=r.providerUserInfo)!=null&&p.length?nA(r.providerUserInfo):[],a=FI(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new wd(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function GI(e){const t=kt(e);await fc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function FI(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function nA(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(e,t){const n=await tA(e,{},async()=>{const i=hl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await eA(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&fa(e.emulatorConfig.host)&&(u.credentials="include"),J0.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KI(e,t){return yi(e,"POST","/v2/accounts:revokeToken",dr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){X(t.idToken,"internal-error"),X(typeof t.idToken<"u","internal-error"),X(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):T_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){X(t.length!==0,"internal-error");const n=T_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await QI(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new ks;return i&&(X(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(X(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(X(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ks,this.toJSON())}_performRefresh(){return ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(e,t){X(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class An{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new HI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new wd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Ws(this,this.stsTokenManager.getToken(this.auth,t));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return BI(this,t)}reload(){return GI(this)}_assign(t){this!==t&&(X(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new An({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await fc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dn(this.auth.app))return Promise.reject(ri(this.auth));const t=await this.getIdToken();return await Ws(this,zI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:D,stsTokenManager:V}=n;X(p&&V,t,"internal-error");const M=ks.fromJSON(this.name,V);X(typeof p=="string",t,"internal-error"),wi(i,t.name),wi(r,t.name),X(typeof m=="boolean",t,"internal-error"),X(typeof y=="boolean",t,"internal-error"),wi(s,t.name),wi(a,t.name),wi(l,t.name),wi(u,t.name),wi(h,t.name),wi(d,t.name);const b=new An({uid:p,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:y,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:M,createdAt:h,lastLoginAt:d});return D&&Array.isArray(D)&&(b.providerData=D.map(v=>({...v}))),u&&(b._redirectEventId=u),b}static async _fromIdTokenResponse(t,n,i=!1){const r=new ks;r.updateFromServerResponse(n);const s=new An({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await fc(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];X(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?nA(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new ks;l.updateFromIdToken(i);const u=new An({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new wd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=new Map;function ei(e){hi(e instanceof Function,"Expected a class definition");let t=A_.get(e);return t?(hi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,A_.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}iA.type="NONE";const S_=iA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(e,t,n){return`firebase:${e}:${t}:${n}`}class Ps{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Au(this.userKey,r.apiKey,s),this.fullPersistenceKey=Au("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await hc(this.auth,{idToken:t}).catch(()=>{});return n?An._fromGetAccountInfoResponse(this.auth,n,t):null}return An._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Ps(ei(S_),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||ei(S_);const a=Au(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let p;if(typeof d=="string"){const m=await hc(t,{idToken:d}).catch(()=>{});if(!m)break;p=await An._fromGetAccountInfoResponse(t,m,d)}else p=An._fromJSON(t,d);h!==s&&(l=p),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Ps(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Ps(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(oA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(rA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(uA(t))return"Blackberry";if(cA(t))return"Webos";if(sA(t))return"Safari";if((t.includes("chrome/")||aA(t))&&!t.includes("edge/"))return"Chrome";if(lA(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function rA(e=Ie()){return/firefox\//i.test(e)}function sA(e=Ie()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function aA(e=Ie()){return/crios\//i.test(e)}function oA(e=Ie()){return/iemobile/i.test(e)}function lA(e=Ie()){return/android/i.test(e)}function uA(e=Ie()){return/blackberry/i.test(e)}function cA(e=Ie()){return/webos/i.test(e)}function Wm(e=Ie()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function YI(e=Ie()){var t;return Wm(e)&&!!((t=window.navigator)!=null&&t.standalone)}function XI(){return u2()&&document.documentMode===10}function hA(e=Ie()){return Wm(e)||lA(e)||cA(e)||uA(e)||/windows phone/i.test(e)||oA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(e,t=[]){let n;switch(e){case"Browser":n=b_(Ie());break;case"Worker":n=`${b_(Ie())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${da}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(e,t={}){return yi(e,"GET","/v2/passwordPolicy",dr(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=6;class JI{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??WI,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new w_(this),this.idTokenSubscription=new w_(this),this.beforeStateQueue=new $I(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ei(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Ps.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await hc(this,{idToken:t}),i=await An._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(dn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await fc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=OI()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(dn(this.app))return Promise.reject(ri(this));const n=t?kt(t):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&X(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return dn(this.app)?Promise.reject(ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return dn(this.app)?Promise.reject(ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ei(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await ZI(this),n=new JI(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new cl("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await KI(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ei(t)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Ps.create(this,[ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=fA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&NI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Yr(e){return kt(e)}class w_{constructor(t){this.auth=t,this.observer=null,this.addObserver=y2(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eC(e){Yc=e}function dA(e){return Yc.loadJS(e)}function nC(){return Yc.recaptchaEnterpriseScript}function iC(){return Yc.gapiScript}function rC(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class sC{constructor(){this.enterprise=new aC}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class aC{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const oC="recaptcha-enterprise",mA="NO_RECAPTCHA";class lC{constructor(t){this.type=oC,this.auth=Yr(t)}async verify(t="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{jI(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new UI(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(u=>{l(u)})})}function r(s,a,l){const u=window.grecaptcha;E_(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:t}).then(h=>{a(h)}).catch(()=>{a(mA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sC().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(l=>{if(!n&&E_(window.grecaptcha))r(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=nC();u.length!==0&&(u+=l),dA(u).then(()=>{r(l,s,a)}).catch(h=>{a(h)})}}).catch(l=>{a(l)})})}}async function R_(e,t,n,i=!1,r=!1){const s=new lC(e);let a;if(r)a=mA;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const l={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Rd(e,t,n,i,r){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await R_(e,t,n,n==="getOobCode");return i(e,a)}else return i(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await R_(e,t,n,n==="getOobCode");return i(e,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(e,t){const n=Ym(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Lr(s,t??{}))return r;bn(r,"already-initialized")}return n.initialize({options:t})}function cC(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ei);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function hC(e,t,n){const i=Yr(e);X(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=pA(t),{host:a,port:l}=fC(t),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){X(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),X(Lr(h,i.config.emulator)&&Lr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,fa(a)?(q0(`${s}//${a}${u}`),H0("Auth",!0)):dC()}function pA(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function fC(e){const t=pA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:I_(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:I_(a)}}}function I_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function dC(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ti("not implemented")}_getIdTokenResponse(t){return ti("not implemented")}_linkToIdToken(t,n){return ti("not implemented")}_getReauthenticationResolver(t){return ti("not implemented")}}async function mC(e,t){return yi(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(e,t){return dl(e,"POST","/v1/accounts:signInWithPassword",dr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(e,t){return dl(e,"POST","/v1/accounts:signInWithEmailLink",dr(e,t))}async function yC(e,t){return dl(e,"POST","/v1/accounts:signInWithEmailLink",dr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends Jm{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new jo(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new jo(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rd(t,n,"signInWithPassword",pC);case"emailLink":return gC(t,{email:this._email,oobCode:this._password});default:bn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rd(t,i,"signUpPassword",mC);case"emailLink":return yC(t,{idToken:n,email:this._email,oobCode:this._password});default:bn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ls(e,t){return dl(e,"POST","/v1/accounts:signInWithIdp",dr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="http://localhost";class jr extends Jm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new jr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new jr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Ls(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Ls(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ls(t,n)}buildRequest(){const t={requestUri:_C,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=hl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function EC(e){const t=Ya(Xa(e)).link,n=t?Ya(Xa(t)).deep_link_id:null,i=Ya(Xa(e)).deep_link_id;return(i?Ya(Xa(i)).link:null)||i||n||t||e}class tp{constructor(t){const n=Ya(Xa(t)),i=n.apiKey??null,r=n.oobCode??null,s=vC(n.mode??null);X(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=EC(t);try{return new tp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.providerId=ma.PROVIDER_ID}static credential(t,n){return jo._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=tp.parseLink(n);return X(i,"argument-error"),jo._fromEmailAndCode(t,i.code,i.tenantId)}}ma.PROVIDER_ID="password";ma.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ma.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends gA{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends ml{constructor(){super("facebook.com")}static credential(t){return jr._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vi.credentialFromTaggedObject(t)}static credentialFromError(t){return Vi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vi.credential(t.oauthAccessToken)}catch{return null}}}Vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends ml{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return jr._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Mi.credentialFromTaggedObject(t)}static credentialFromError(t){return Mi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Mi.credential(n,i)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends ml{constructor(){super("github.com")}static credential(t){return jr._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ki.credentialFromTaggedObject(t)}static credentialFromError(t){return ki.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ki.credential(t.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends ml{constructor(){super("twitter.com")}static credential(t,n){return jr._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Pi.credentialFromTaggedObject(t)}static credentialFromError(t){return Pi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Pi.credential(n,i)}catch{return null}}}Pi.TWITTER_SIGN_IN_METHOD="twitter.com";Pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(e,t){return dl(e,"POST","/v1/accounts:signUp",dr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await An._fromIdTokenResponse(t,i,r),a=C_(i);return new zr({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=C_(i);return new zr({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function C_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends gi{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,dc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new dc(t,n,i,r)}}function yA(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?dc._fromErrorAndOperation(e,s,t,i):s})}async function AC(e,t,n=!1){const i=await Ws(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return zr._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(e,t,n=!1){const{auth:i}=e;if(dn(i.app))return Promise.reject(ri(i));const r="reauthenticate";try{const s=await Ws(e,yA(i,r,t,e),n);X(s.idToken,i,"internal-error");const a=Zm(s.idToken);X(a,i,"internal-error");const{sub:l}=a;return X(e.uid===l,i,"user-mismatch"),zr._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&bn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A(e,t,n=!1){if(dn(e.app))return Promise.reject(ri(e));const i="signIn",r=await yA(e,i,t),s=await zr._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function bC(e,t){return _A(Yr(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(e){const t=Yr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function wC(e,t,n){if(dn(e.app))return Promise.reject(ri(e));const i=Yr(e),a=await Rd(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",TC).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&vA(e),u}),l=await zr._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function RC(e,t,n){return dn(e.app)?Promise.reject(ri(e)):bC(kt(e),ma.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&vA(e),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(e,t){return yi(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(e,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const i=kt(e),s={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},a=await Ws(i,IC(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const l=i.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(e,t){return kt(e).setPersistence(t)}function DC(e,t,n,i){return kt(e).onIdTokenChanged(t,n,i)}function xC(e,t,n){return kt(e).beforeAuthStateChanged(t,n)}function OC(e,t,n,i){return kt(e).onAuthStateChanged(t,n,i)}function VC(e){return kt(e).signOut()}const mc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mc,"1"),this.storage.removeItem(mc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=1e3,kC=10;class TA extends EA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);XI()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,kC):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},MC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}TA.type="LOCAL";const AA=TA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA extends EA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}SA.type="SESSION";const bA=SA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new Xc(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await PC(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=ep("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return window}function UC(e){Pn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(){return typeof Pn().WorkerGlobalScope<"u"&&typeof Pn().importScripts=="function"}async function jC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zC(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function BC(){return wA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="firebaseLocalStorageDb",qC=1,pc="firebaseLocalStorage",IA="fbase_key";class pl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $c(e,t){return e.transaction([pc],t?"readwrite":"readonly").objectStore(pc)}function HC(){const e=indexedDB.deleteDatabase(RA);return new pl(e).toPromise()}function Id(){const e=indexedDB.open(RA,qC);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(pc,{keyPath:IA})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(pc)?t(i):(i.close(),await HC(),t(await Id()))})})}async function N_(e,t,n){const i=$c(e,!0).put({[IA]:t,value:n});return new pl(i).toPromise()}async function GC(e,t){const n=$c(e,!1).get(t),i=await new pl(n).toPromise();return i===void 0?null:i.value}function D_(e,t){const n=$c(e,!0).delete(t);return new pl(n).toPromise()}const FC=800,QC=3;class CA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Id(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>QC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xc._getInstance(BC()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await jC(),!this.activeServiceWorker)return;this.sender=new LC(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||zC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Id();return await N_(t,mc,"1"),await D_(t,mc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>N_(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>GC(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>D_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=$c(r,!1).getAll();return new pl(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CA.type="LOCAL";const KC=CA;new fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(e,t){return t?ei(t):(X(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends Jm{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ls(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ls(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ls(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function XC(e){return _A(e.auth,new np(e),e.bypassAuthState)}function $C(e){const{auth:t,user:n}=e;return X(n,t,"internal-error"),SC(n,new np(e),e.bypassAuthState)}async function ZC(e){const{auth:t,user:n}=e;return X(n,t,"internal-error"),AC(n,new np(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return XC;case"linkViaPopup":case"linkViaRedirect":return ZC;case"reauthViaPopup":case"reauthViaRedirect":return $C;default:bn(this.auth,"internal-error")}}resolve(t){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=new fl(2e3,1e4);class ws extends NA{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ws.currentPopupAction&&ws.currentPopupAction.cancel(),ws.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return X(t,this.auth,"internal-error"),t}async onExecution(){hi(this.filter.length===1,"Popup operations only handle one event");const t=ep();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ws.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,WC.get())};t()}}ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="pendingRedirect",Su=new Map;class tN extends NA{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Su.get(this.auth._key());if(!t){try{const i=await eN(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Su.set(this.auth._key(),t)}return this.bypassAuthState||Su.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eN(e,t){const n=rN(t),i=iN(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function nN(e,t){Su.set(e._key(),t)}function iN(e){return ei(e._redirectPersistence)}function rN(e){return Au(JC,e.config.apiKey,e.name)}async function sN(e,t,n=!1){if(dn(e.app))return Promise.reject(ri(e));const i=Yr(e),r=YC(i,t),a=await new tN(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=10*60*1e3;class oN{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!lN(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!DA(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(kn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=aN&&this.cachedEventUids.clear(),this.cachedEventUids.has(x_(t))}saveEventToCache(t){this.cachedEventUids.add(x_(t)),this.lastProcessedEventTime=Date.now()}}function x_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function DA({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function lN(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DA(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(e,t={}){return yi(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hN=/^https?/;async function fN(e){if(e.config.emulator)return;const{authorizedDomains:t}=await uN(e);for(const n of t)try{if(dN(n))return}catch{}bn(e,"unauthorized-domain")}function dN(e){const t=bd(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!hN.test(n))return!1;if(cN.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=new fl(3e4,6e4);function O_(){const e=Pn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function pN(e){return new Promise((t,n)=>{var r,s,a;function i(){O_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{O_(),n(kn(e,"network-request-failed"))},timeout:mN.get()})}if((s=(r=Pn().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=Pn().gapi)!=null&&a.load)i();else{const l=rC("iframefcb");return Pn()[l]=()=>{gapi.load?i():n(kn(e,"network-request-failed"))},dA(`${iC()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw bu=null,t})}let bu=null;function gN(e){return bu=bu||pN(e),bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=new fl(5e3,15e3),_N="__/auth/iframe",vN="emulator/auth/iframe",EN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AN(e){const t=e.config;X(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?$m(t,vN):`https://${e.config.authDomain}/${_N}`,i={apiKey:t.apiKey,appName:e.name,v:da},r=TN.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${hl(i).slice(1)}`}async function SN(e){const t=await gN(e),n=Pn().gapi;return X(n,e,"internal-error"),t.open({where:document.body,url:AN(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EN,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=kn(e,"network-request-failed"),l=Pn().setTimeout(()=>{s(a)},yN.get());function u(){Pn().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wN=500,RN=600,IN="_blank",CN="http://localhost";class V_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NN(e,t,n,i=wN,r=RN){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...bN,width:i.toString(),height:r.toString(),top:s,left:a},h=Ie().toLowerCase();n&&(l=aA(h)?IN:n),rA(h)&&(t=t||CN,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[y,D])=>`${m}${y}=${D},`,"");if(YI(h)&&l!=="_self")return DN(t||"",l),new V_(null);const p=window.open(t||"",l,d);X(p,e,"popup-blocked");try{p.focus()}catch{}return new V_(p)}function DN(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="__/auth/handler",ON="emulator/auth/handler",VN=encodeURIComponent("fac");async function M_(e,t,n,i,r,s){X(e.config.authDomain,e,"auth-domain-config-required"),X(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:da,eventId:r};if(t instanceof gA){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",g2(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(t instanceof ml){const d=t.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${VN}=${encodeURIComponent(u)}`:"";return`${MN(e)}?${hl(l).slice(1)}${h}`}function MN({config:e}){return e.emulator?$m(e,ON):`https://${e.authDomain}/${xN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="webStorageSupport";class kN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bA,this._completeRedirectFn=sN,this._overrideRedirectResult=nN}async _openPopup(t,n,i,r){var a;hi((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await M_(t,n,i,bd(),r);return NN(t,s,ep())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await M_(t,n,i,bd(),r);return UC(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(hi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await SN(t),i=new oN(t);return n.register("authEvent",r=>(X(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(vf,{type:vf},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[vf];s!==void 0&&n(!!s),bn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fN(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return hA()||sA()||Wm()}}const PN=kN;var k_="@firebase/auth",P_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jN(e){Zs(new Ur("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;X(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fA(e)},h=new tC(i,r,s,u);return cC(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Zs(new Ur("auth-internal",t=>{const n=Yr(t.getProvider("auth").getImmediate());return(i=>new LN(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wi(k_,P_,UN(e)),Wi(k_,P_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=5*60,BN=B0("authIdTokenMaxAge")||zN;let L_=null;const qN=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>BN)return;const r=n==null?void 0:n.token;L_!==r&&(L_=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function HN(e=K0()){const t=Ym(e,"auth");if(t.isInitialized())return t.getImmediate();const n=uC(e,{popupRedirectResolver:PN,persistence:[KC,AA,bA]}),i=B0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=qN(s.toString());xC(n,a,()=>a(n.currentUser)),DC(n,l=>a(l))}}const r=j0("auth");return r&&hC(n,`http://${r}`),n}function GN(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}eC({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=kn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",GN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jN("Browser");var U_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ji,xA;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,_){function A(){}A.prototype=_.prototype,T.D=_.prototype,T.prototype=new A,T.prototype.constructor=T,T.C=function(S,I,C){for(var w=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)w[Ce-2]=arguments[Ce];return _.prototype[I].apply(S,w)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,_,A){A||(A=0);var S=Array(16);if(typeof _=="string")for(var I=0;16>I;++I)S[I]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(I=0;16>I;++I)S[I]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=T.g[0],A=T.g[1],I=T.g[2];var C=T.g[3],w=_+(C^A&(I^C))+S[0]+3614090360&4294967295;_=A+(w<<7&4294967295|w>>>25),w=C+(I^_&(A^I))+S[1]+3905402710&4294967295,C=_+(w<<12&4294967295|w>>>20),w=I+(A^C&(_^A))+S[2]+606105819&4294967295,I=C+(w<<17&4294967295|w>>>15),w=A+(_^I&(C^_))+S[3]+3250441966&4294967295,A=I+(w<<22&4294967295|w>>>10),w=_+(C^A&(I^C))+S[4]+4118548399&4294967295,_=A+(w<<7&4294967295|w>>>25),w=C+(I^_&(A^I))+S[5]+1200080426&4294967295,C=_+(w<<12&4294967295|w>>>20),w=I+(A^C&(_^A))+S[6]+2821735955&4294967295,I=C+(w<<17&4294967295|w>>>15),w=A+(_^I&(C^_))+S[7]+4249261313&4294967295,A=I+(w<<22&4294967295|w>>>10),w=_+(C^A&(I^C))+S[8]+1770035416&4294967295,_=A+(w<<7&4294967295|w>>>25),w=C+(I^_&(A^I))+S[9]+2336552879&4294967295,C=_+(w<<12&4294967295|w>>>20),w=I+(A^C&(_^A))+S[10]+4294925233&4294967295,I=C+(w<<17&4294967295|w>>>15),w=A+(_^I&(C^_))+S[11]+2304563134&4294967295,A=I+(w<<22&4294967295|w>>>10),w=_+(C^A&(I^C))+S[12]+1804603682&4294967295,_=A+(w<<7&4294967295|w>>>25),w=C+(I^_&(A^I))+S[13]+4254626195&4294967295,C=_+(w<<12&4294967295|w>>>20),w=I+(A^C&(_^A))+S[14]+2792965006&4294967295,I=C+(w<<17&4294967295|w>>>15),w=A+(_^I&(C^_))+S[15]+1236535329&4294967295,A=I+(w<<22&4294967295|w>>>10),w=_+(I^C&(A^I))+S[1]+4129170786&4294967295,_=A+(w<<5&4294967295|w>>>27),w=C+(A^I&(_^A))+S[6]+3225465664&4294967295,C=_+(w<<9&4294967295|w>>>23),w=I+(_^A&(C^_))+S[11]+643717713&4294967295,I=C+(w<<14&4294967295|w>>>18),w=A+(C^_&(I^C))+S[0]+3921069994&4294967295,A=I+(w<<20&4294967295|w>>>12),w=_+(I^C&(A^I))+S[5]+3593408605&4294967295,_=A+(w<<5&4294967295|w>>>27),w=C+(A^I&(_^A))+S[10]+38016083&4294967295,C=_+(w<<9&4294967295|w>>>23),w=I+(_^A&(C^_))+S[15]+3634488961&4294967295,I=C+(w<<14&4294967295|w>>>18),w=A+(C^_&(I^C))+S[4]+3889429448&4294967295,A=I+(w<<20&4294967295|w>>>12),w=_+(I^C&(A^I))+S[9]+568446438&4294967295,_=A+(w<<5&4294967295|w>>>27),w=C+(A^I&(_^A))+S[14]+3275163606&4294967295,C=_+(w<<9&4294967295|w>>>23),w=I+(_^A&(C^_))+S[3]+4107603335&4294967295,I=C+(w<<14&4294967295|w>>>18),w=A+(C^_&(I^C))+S[8]+1163531501&4294967295,A=I+(w<<20&4294967295|w>>>12),w=_+(I^C&(A^I))+S[13]+2850285829&4294967295,_=A+(w<<5&4294967295|w>>>27),w=C+(A^I&(_^A))+S[2]+4243563512&4294967295,C=_+(w<<9&4294967295|w>>>23),w=I+(_^A&(C^_))+S[7]+1735328473&4294967295,I=C+(w<<14&4294967295|w>>>18),w=A+(C^_&(I^C))+S[12]+2368359562&4294967295,A=I+(w<<20&4294967295|w>>>12),w=_+(A^I^C)+S[5]+4294588738&4294967295,_=A+(w<<4&4294967295|w>>>28),w=C+(_^A^I)+S[8]+2272392833&4294967295,C=_+(w<<11&4294967295|w>>>21),w=I+(C^_^A)+S[11]+1839030562&4294967295,I=C+(w<<16&4294967295|w>>>16),w=A+(I^C^_)+S[14]+4259657740&4294967295,A=I+(w<<23&4294967295|w>>>9),w=_+(A^I^C)+S[1]+2763975236&4294967295,_=A+(w<<4&4294967295|w>>>28),w=C+(_^A^I)+S[4]+1272893353&4294967295,C=_+(w<<11&4294967295|w>>>21),w=I+(C^_^A)+S[7]+4139469664&4294967295,I=C+(w<<16&4294967295|w>>>16),w=A+(I^C^_)+S[10]+3200236656&4294967295,A=I+(w<<23&4294967295|w>>>9),w=_+(A^I^C)+S[13]+681279174&4294967295,_=A+(w<<4&4294967295|w>>>28),w=C+(_^A^I)+S[0]+3936430074&4294967295,C=_+(w<<11&4294967295|w>>>21),w=I+(C^_^A)+S[3]+3572445317&4294967295,I=C+(w<<16&4294967295|w>>>16),w=A+(I^C^_)+S[6]+76029189&4294967295,A=I+(w<<23&4294967295|w>>>9),w=_+(A^I^C)+S[9]+3654602809&4294967295,_=A+(w<<4&4294967295|w>>>28),w=C+(_^A^I)+S[12]+3873151461&4294967295,C=_+(w<<11&4294967295|w>>>21),w=I+(C^_^A)+S[15]+530742520&4294967295,I=C+(w<<16&4294967295|w>>>16),w=A+(I^C^_)+S[2]+3299628645&4294967295,A=I+(w<<23&4294967295|w>>>9),w=_+(I^(A|~C))+S[0]+4096336452&4294967295,_=A+(w<<6&4294967295|w>>>26),w=C+(A^(_|~I))+S[7]+1126891415&4294967295,C=_+(w<<10&4294967295|w>>>22),w=I+(_^(C|~A))+S[14]+2878612391&4294967295,I=C+(w<<15&4294967295|w>>>17),w=A+(C^(I|~_))+S[5]+4237533241&4294967295,A=I+(w<<21&4294967295|w>>>11),w=_+(I^(A|~C))+S[12]+1700485571&4294967295,_=A+(w<<6&4294967295|w>>>26),w=C+(A^(_|~I))+S[3]+2399980690&4294967295,C=_+(w<<10&4294967295|w>>>22),w=I+(_^(C|~A))+S[10]+4293915773&4294967295,I=C+(w<<15&4294967295|w>>>17),w=A+(C^(I|~_))+S[1]+2240044497&4294967295,A=I+(w<<21&4294967295|w>>>11),w=_+(I^(A|~C))+S[8]+1873313359&4294967295,_=A+(w<<6&4294967295|w>>>26),w=C+(A^(_|~I))+S[15]+4264355552&4294967295,C=_+(w<<10&4294967295|w>>>22),w=I+(_^(C|~A))+S[6]+2734768916&4294967295,I=C+(w<<15&4294967295|w>>>17),w=A+(C^(I|~_))+S[13]+1309151649&4294967295,A=I+(w<<21&4294967295|w>>>11),w=_+(I^(A|~C))+S[4]+4149444226&4294967295,_=A+(w<<6&4294967295|w>>>26),w=C+(A^(_|~I))+S[11]+3174756917&4294967295,C=_+(w<<10&4294967295|w>>>22),w=I+(_^(C|~A))+S[2]+718787259&4294967295,I=C+(w<<15&4294967295|w>>>17),w=A+(C^(I|~_))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(I+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+I&4294967295,T.g[3]=T.g[3]+C&4294967295}i.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var A=_-this.blockSize,S=this.B,I=this.h,C=0;C<_;){if(I==0)for(;C<=A;)r(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<_;)if(S[I++]=T.charCodeAt(C++),I==this.blockSize){r(this,S),I=0;break}}else for(;C<_;)if(S[I++]=T[C++],I==this.blockSize){r(this,S),I=0;break}}this.h=I,this.o+=_},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var A=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=A&255,A/=256;for(this.u(T),T=Array(16),_=A=0;4>_;++_)for(var S=0;32>S;S+=8)T[A++]=this.g[_]>>>S&255;return T};function s(T,_){var A=l;return Object.prototype.hasOwnProperty.call(A,T)?A[T]:A[T]=_(T)}function a(T,_){this.h=_;for(var A=[],S=!0,I=T.length-1;0<=I;I--){var C=T[I]|0;S&&C==_||(A[I]=C,S=!1)}this.g=A}var l={};function u(T){return-128<=T&&128>T?s(T,function(_){return new a([_|0],0>_?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return M(h(-T));for(var _=[],A=1,S=0;T>=A;S++)_[S]=T/A|0,A*=4294967296;return new a(_,0)}function d(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return M(d(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(_,8)),S=p,I=0;I<T.length;I+=8){var C=Math.min(8,T.length-I),w=parseInt(T.substring(I,I+C),_);8>C?(C=h(Math.pow(_,C)),S=S.j(C).add(h(w))):(S=S.j(A),S=S.add(h(w)))}return S}var p=u(0),m=u(1),y=u(16777216);e=a.prototype,e.m=function(){if(V(this))return-M(this).m();for(var T=0,_=1,A=0;A<this.g.length;A++){var S=this.i(A);T+=(0<=S?S:4294967296+S)*_,_*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D(this))return"0";if(V(this))return"-"+M(this).toString(T);for(var _=h(Math.pow(T,6)),A=this,S="";;){var I=x(A,_).g;A=b(A,I.j(_));var C=((0<A.g.length?A.g[0]:A.h)>>>0).toString(T);if(A=I,D(A))return C+S;for(;6>C.length;)C="0"+C;S=C+S}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function D(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function V(T){return T.h==-1}e.l=function(T){return T=b(this,T),V(T)?-1:D(T)?0:1};function M(T){for(var _=T.g.length,A=[],S=0;S<_;S++)A[S]=~T.g[S];return new a(A,~T.h).add(m)}e.abs=function(){return V(this)?M(this):this},e.add=function(T){for(var _=Math.max(this.g.length,T.g.length),A=[],S=0,I=0;I<=_;I++){var C=S+(this.i(I)&65535)+(T.i(I)&65535),w=(C>>>16)+(this.i(I)>>>16)+(T.i(I)>>>16);S=w>>>16,C&=65535,w&=65535,A[I]=w<<16|C}return new a(A,A[A.length-1]&-2147483648?-1:0)};function b(T,_){return T.add(M(_))}e.j=function(T){if(D(this)||D(T))return p;if(V(this))return V(T)?M(this).j(M(T)):M(M(this).j(T));if(V(T))return M(this.j(M(T)));if(0>this.l(y)&&0>T.l(y))return h(this.m()*T.m());for(var _=this.g.length+T.g.length,A=[],S=0;S<2*_;S++)A[S]=0;for(S=0;S<this.g.length;S++)for(var I=0;I<T.g.length;I++){var C=this.i(S)>>>16,w=this.i(S)&65535,Ce=T.i(I)>>>16,Pe=T.i(I)&65535;A[2*S+2*I]+=w*Pe,v(A,2*S+2*I),A[2*S+2*I+1]+=C*Pe,v(A,2*S+2*I+1),A[2*S+2*I+1]+=w*Ce,v(A,2*S+2*I+1),A[2*S+2*I+2]+=C*Ce,v(A,2*S+2*I+2)}for(S=0;S<_;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=_;S<2*_;S++)A[S]=0;return new a(A,0)};function v(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function R(T,_){this.g=T,this.h=_}function x(T,_){if(D(_))throw Error("division by zero");if(D(T))return new R(p,p);if(V(T))return _=x(M(T),_),new R(M(_.g),M(_.h));if(V(_))return _=x(T,M(_)),new R(M(_.g),_.h);if(30<T.g.length){if(V(T)||V(_))throw Error("slowDivide_ only works with positive integers.");for(var A=m,S=_;0>=S.l(T);)A=U(A),S=U(S);var I=B(A,1),C=B(S,1);for(S=B(S,2),A=B(A,2);!D(S);){var w=C.add(S);0>=w.l(T)&&(I=I.add(A),C=w),S=B(S,1),A=B(A,1)}return _=b(T,I.j(_)),new R(I,_)}for(I=p;0<=T.l(_);){for(A=Math.max(1,Math.floor(T.m()/_.m())),S=Math.ceil(Math.log(A)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),C=h(A),w=C.j(_);V(w)||0<w.l(T);)A-=S,C=h(A),w=C.j(_);D(C)&&(C=m),I=I.add(C),T=b(T,w)}return new R(I,T)}e.A=function(T){return x(this,T).h},e.and=function(T){for(var _=Math.max(this.g.length,T.g.length),A=[],S=0;S<_;S++)A[S]=this.i(S)&T.i(S);return new a(A,this.h&T.h)},e.or=function(T){for(var _=Math.max(this.g.length,T.g.length),A=[],S=0;S<_;S++)A[S]=this.i(S)|T.i(S);return new a(A,this.h|T.h)},e.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),A=[],S=0;S<_;S++)A[S]=this.i(S)^T.i(S);return new a(A,this.h^T.h)};function U(T){for(var _=T.g.length+1,A=[],S=0;S<_;S++)A[S]=T.i(S)<<1|T.i(S-1)>>>31;return new a(A,T.h)}function B(T,_){var A=_>>5;_%=32;for(var S=T.g.length-A,I=[],C=0;C<S;C++)I[C]=0<_?T.i(C+A)>>>_|T.i(C+A+1)<<32-_:T.i(C+A);return new a(I,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,xA=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Ji=a}).apply(typeof U_<"u"?U_:typeof self<"u"?self:typeof window<"u"?window:{});var iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OA,$a,VA,wu,Cd,MA,kA,PA;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof iu=="object"&&iu];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var g=0;g<o.length-1;g++){var N=o[g];if(!(N in f))break t;f=f[N]}o=o[o.length-1],g=f[o],c=c(g),c!=g&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,g=!1,N={next:function(){if(!g&&f<o.length){var O=f++;return{value:c(O,o[O]),done:!1}}return g=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function p(o,c,f){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,g),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function y(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function D(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(g,N,O){for(var j=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)j[Tt-2]=arguments[Tt];return c.prototype[N].apply(g,j)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let g=0;g<c;g++)f[g]=o[g];return f}return[]}function M(o,c){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(u(g)){const N=o.length||0,O=g.length||0;o.length=N+O;for(let j=0;j<O;j++)o[N+j]=g[j]}else o.push(g)}}class b{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function x(o){return x[" "](o),o}x[" "]=function(){};var U=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function B(o,c,f){for(const g in o)c.call(f,o[g],g,o)}function T(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function _(o){const c={};for(const f in o)c[f]=o[f];return c}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(o,c){let f,g;for(let N=1;N<arguments.length;N++){g=arguments[N];for(f in g)o[f]=g[f];for(let O=0;O<A.length;O++)f=A[O],Object.prototype.hasOwnProperty.call(g,f)&&(o[f]=g[f])}}function I(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function C(o){l.setTimeout(()=>{throw o},0)}function w(){var o=pt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Ce{constructor(){this.h=this.g=null}add(c,f){const g=Pe.get();g.set(c,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Pe=new b(()=>new q,o=>o.reset());class q{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let K,$=!1,pt=new Ce,ht=()=>{const o=l.Promise.resolve(void 0);K=()=>{o.then(yn)}};var yn=()=>{for(var o;o=w();){try{o.h.call(o.g)}catch(f){C(f)}var c=Pe;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}$=!1};function Ft(){this.s=this.s,this.C=this.C}Ft.prototype.s=!1,Ft.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ft.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function wt(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}wt.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function ue(o,c){if(wt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(U){t:{try{x(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Wr[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&ue.aa.h.call(this)}}D(ue,wt);var Wr={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var _i="closure_listenable_"+(1e6*Math.random()|0),Ea=0;function St(o,c,f,g,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!g,this.ha=N,this.key=++Ea,this.da=this.fa=!1}function ot(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ce(o){this.src=o,this.g={},this.h=0}ce.prototype.add=function(o,c,f,g,N){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var j=Le(o,c,g,N);return-1<j?(c=o[j],f||(c.fa=!1)):(c=new St(c,this.src,O,!!g,N),c.fa=f,o.push(c)),c};function In(o,c){var f=c.type;if(f in o.g){var g=o.g[f],N=Array.prototype.indexOf.call(g,c,void 0),O;(O=0<=N)&&Array.prototype.splice.call(g,N,1),O&&(ot(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Le(o,c,f,g){for(var N=0;N<o.length;++N){var O=o[N];if(!O.da&&O.listener==c&&O.capture==!!f&&O.ha==g)return N}return-1}var _n="closure_lm_"+(1e6*Math.random()|0),Ne={};function vi(o,c,f,g,N){if(Array.isArray(c)){for(var O=0;O<c.length;O++)vi(o,c[O],f,g,N);return null}return f=Aa(f),o&&o[_i]?o.K(c,f,h(g)?!!g.capture:!1,N):W(o,c,f,!1,g,N)}function W(o,c,f,g,N,O){if(!c)throw Error("Invalid event type");var j=h(N)?!!N.capture:!!N,Tt=vn(o);if(Tt||(o[_n]=Tt=new ce(o)),f=Tt.add(c,f,g,j,O),f.proxy)return f;if(g=Ot(),f.proxy=g,g.src=o,g.listener=f,o.addEventListener)le||(N=j),N===void 0&&(N=!1),o.addEventListener(c.toString(),g,N);else if(o.attachEvent)o.attachEvent(Bt(c.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Ot(){function o(f){return c.call(o.src,o.listener,f)}const c=je;return o}function Ue(o,c,f,g,N){if(Array.isArray(c))for(var O=0;O<c.length;O++)Ue(o,c[O],f,g,N);else g=h(g)?!!g.capture:!!g,f=Aa(f),o&&o[_i]?(o=o.i,c=String(c).toString(),c in o.g&&(O=o.g[c],f=Le(O,f,g,N),-1<f&&(ot(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete o.g[c],o.h--)))):o&&(o=vn(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Le(c,f,g,N)),(f=-1<o?c[o]:null)&&zt(f))}function zt(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[_i])In(c.i,o);else{var f=o.type,g=o.proxy;c.removeEventListener?c.removeEventListener(f,g,o.capture):c.detachEvent?c.detachEvent(Bt(f),g):c.addListener&&c.removeListener&&c.removeListener(g),(f=vn(c))?(In(f,o),f.h==0&&(f.src=null,c[_n]=null)):ot(o)}}}function Bt(o){return o in Ne?Ne[o]:Ne[o]="on"+o}function je(o,c){if(o.da)o=!0;else{c=new ue(c,this);var f=o.listener,g=o.ha||o.src;o.fa&&zt(o),o=f.call(g,c)}return o}function vn(o){return o=o[_n],o instanceof ce?o:null}var Ta="__closure_events_fn_"+(1e9*Math.random()>>>0);function Aa(o){return typeof o=="function"?o:(o[Ta]||(o[Ta]=function(c){return o.handleEvent(c)}),o[Ta])}function ee(){Ft.call(this),this.i=new ce(this),this.M=this,this.F=null}D(ee,Ft),ee.prototype[_i]=!0,ee.prototype.removeEventListener=function(o,c,f,g){Ue(this,o,c,f,g)};function he(o,c){var f,g=o.F;if(g)for(f=[];g;g=g.F)f.push(g);if(o=o.M,g=c.type||c,typeof c=="string")c=new wt(c,o);else if(c instanceof wt)c.target=c.target||o;else{var N=c;c=new wt(g,o),S(c,N)}if(N=!0,f)for(var O=f.length-1;0<=O;O--){var j=c.g=f[O];N=wl(j,g,!0,c)&&N}if(j=c.g=o,N=wl(j,g,!0,c)&&N,N=wl(j,g,!1,c)&&N,f)for(O=0;O<f.length;O++)j=c.g=f[O],N=wl(j,g,!1,c)&&N}ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],g=0;g<f.length;g++)ot(f[g]);delete o.g[c],o.h--}}this.F=null},ee.prototype.K=function(o,c,f,g){return this.i.add(String(o),c,!1,f,g)},ee.prototype.L=function(o,c,f,g){return this.i.add(String(o),c,!0,f,g)};function wl(o,c,f,g){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,O=0;O<c.length;++O){var j=c[O];if(j&&!j.da&&j.capture==f){var Tt=j.listener,fe=j.ha||j.src;j.fa&&In(o.i,j),N=Tt.call(fe,g)!==!1&&N}}return N&&!g.defaultPrevented}function qp(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Hp(o){o.g=qp(()=>{o.g=null,o.i&&(o.i=!1,Hp(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Tb extends Ft{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Hp(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sa(o){Ft.call(this),this.h=o,this.g={}}D(Sa,Ft);var Gp=[];function Fp(o){B(o.g,function(c,f){this.g.hasOwnProperty(f)&&zt(c)},o),o.g={}}Sa.prototype.N=function(){Sa.aa.N.call(this),Fp(this)},Sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ph=l.JSON.stringify,Ab=l.JSON.parse,Sb=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function gh(){}gh.prototype.h=null;function Qp(o){return o.h||(o.h=o.i())}function Kp(){}var ba={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yh(){wt.call(this,"d")}D(yh,wt);function _h(){wt.call(this,"c")}D(_h,wt);var gr={},Yp=null;function Rl(){return Yp=Yp||new ee}gr.La="serverreachability";function Xp(o){wt.call(this,gr.La,o)}D(Xp,wt);function wa(o){const c=Rl();he(c,new Xp(c))}gr.STAT_EVENT="statevent";function $p(o,c){wt.call(this,gr.STAT_EVENT,o),this.stat=c}D($p,wt);function De(o){const c=Rl();he(c,new $p(c,o))}gr.Ma="timingevent";function Zp(o,c){wt.call(this,gr.Ma,o),this.size=c}D(Zp,wt);function Ra(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ia(){this.g=!0}Ia.prototype.xa=function(){this.g=!1};function bb(o,c,f,g,N,O){o.info(function(){if(o.g)if(O)for(var j="",Tt=O.split("&"),fe=0;fe<Tt.length;fe++){var ft=Tt[fe].split("=");if(1<ft.length){var Te=ft[0];ft=ft[1];var Ae=Te.split("_");j=2<=Ae.length&&Ae[1]=="type"?j+(Te+"="+ft+"&"):j+(Te+"=redacted&")}}else j=null;else j=O;return"XMLHTTP REQ ("+g+") [attempt "+N+"]: "+c+`
`+f+`
`+j})}function wb(o,c,f,g,N,O,j){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+N+"]: "+c+`
`+f+`
`+O+" "+j})}function Jr(o,c,f,g){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Ib(o,f)+(g?" "+g:"")})}function Rb(o,c){o.info(function(){return"TIMEOUT: "+c})}Ia.prototype.info=function(){};function Ib(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var g=f[o];if(!(2>g.length)){var N=g[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var j=1;j<N.length;j++)N[j]=""}}}}return ph(f)}catch{return c}}var Il={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vh;function Cl(){}D(Cl,gh),Cl.prototype.g=function(){return new XMLHttpRequest},Cl.prototype.i=function(){return{}},vh=new Cl;function Ei(o,c,f,g){this.j=o,this.i=c,this.l=f,this.R=g||1,this.U=new Sa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jp}function Jp(){this.i=null,this.g="",this.h=!1}var tg={},Eh={};function Th(o,c,f){o.L=1,o.v=Ol(Hn(c)),o.m=f,o.P=!0,eg(o,null)}function eg(o,c){o.F=Date.now(),Nl(o),o.A=Hn(o.v);var f=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),pg(f.i,"t",g),o.C=0,f=o.j.J,o.h=new Jp,o.g=Vg(o.j,f?c:null,!o.m),0<o.O&&(o.M=new Tb(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,g=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Gp[0]=N.toString()),N=Gp);for(var O=0;O<N.length;O++){var j=vi(f,N[O],g||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.H?_(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),wa(),bb(o.i,o.u,o.A,o.l,o.R,o.m)}Ei.prototype.ca=function(o){o=o.target;const c=this.M;c&&Gn(o)==3?c.j():this.Y(o)},Ei.prototype.Y=function(o){try{if(o==this.g)t:{const Ae=Gn(this.g);var c=this.g.Ba();const ns=this.g.Z();if(!(3>Ae)&&(Ae!=3||this.g&&(this.h.h||this.g.oa()||Ag(this.g)))){this.J||Ae!=4||c==7||(c==8||0>=ns?wa(3):wa(2)),Ah(this);var f=this.g.Z();this.X=f;e:if(ng(this)){var g=Ag(this.g);o="";var N=g.length,O=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yr(this),Ca(this);var j="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(g[c],{stream:!(O&&c==N-1)});g.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,wb(this.i,this.u,this.A,this.l,this.R,Ae,f),this.o){if(this.T&&!this.K){e:{if(this.g){var Tt,fe=this.g;if((Tt=fe.g?fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Tt)){var ft=Tt;break e}}ft=null}if(f=ft)Jr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sh(this,f);else{this.o=!1,this.s=3,De(12),yr(this),Ca(this);break t}}if(this.P){f=!0;let En;for(;!this.J&&this.C<j.length;)if(En=Cb(this,j),En==Eh){Ae==4&&(this.s=4,De(14),f=!1),Jr(this.i,this.l,null,"[Incomplete Response]");break}else if(En==tg){this.s=4,De(15),Jr(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Jr(this.i,this.l,En,null),Sh(this,En);if(ng(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||j.length!=0||this.h.h||(this.s=1,De(16),f=!1),this.o=this.o&&f,!f)Jr(this.i,this.l,j,"[Invalid Chunked Response]"),yr(this),Ca(this);else if(0<j.length&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.ba&&!Te.M&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Nh(Te),Te.M=!0,De(11))}}else Jr(this.i,this.l,j,null),Sh(this,j);Ae==4&&yr(this),this.o&&!this.J&&(Ae==4?Ng(this.j,this):(this.o=!1,Nl(this)))}else Fb(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,De(12)):(this.s=0,De(13)),yr(this),Ca(this)}}}catch{}finally{}};function ng(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Cb(o,c){var f=o.C,g=c.indexOf(`
`,f);return g==-1?Eh:(f=Number(c.substring(f,g)),isNaN(f)?tg:(g+=1,g+f>c.length?Eh:(c=c.slice(g,g+f),o.C=g+f,c)))}Ei.prototype.cancel=function(){this.J=!0,yr(this)};function Nl(o){o.S=Date.now()+o.I,ig(o,o.I)}function ig(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ra(m(o.ba,o),c)}function Ah(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Ei.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Rb(this.i,this.A),this.L!=2&&(wa(),De(17)),yr(this),this.s=2,Ca(this)):ig(this,this.S-o)};function Ca(o){o.j.G==0||o.J||Ng(o.j,o)}function yr(o){Ah(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Fp(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Sh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||bh(f.h,o))){if(!o.K&&bh(f.h,o)&&f.G==3){try{var g=f.Da.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var N=g;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Ul(f),Pl(f);else break t;Ch(f),De(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ra(m(f.Za,f),6e3));if(1>=ag(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else vr(f,11)}else if((o.K||f.g==o)&&Ul(f),!v(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let ft=N[c];if(f.T=ft[0],ft=ft[1],f.G==2)if(ft[0]=="c"){f.K=ft[1],f.ia=ft[2];const Te=ft[3];Te!=null&&(f.la=Te,f.j.info("VER="+f.la));const Ae=ft[4];Ae!=null&&(f.Aa=Ae,f.j.info("SVER="+f.Aa));const ns=ft[5];ns!=null&&typeof ns=="number"&&0<ns&&(g=1.5*ns,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const En=o.g;if(En){const zl=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zl){var O=g.h;O.g||zl.indexOf("spdy")==-1&&zl.indexOf("quic")==-1&&zl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(wh(O,O.h),O.h=null))}if(g.D){const Dh=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Dh&&(g.ya=Dh,Rt(g.I,g.D,Dh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var j=o;if(g.qa=Og(g,g.J?g.ia:null,g.W),j.K){og(g.h,j);var Tt=j,fe=g.L;fe&&(Tt.I=fe),Tt.B&&(Ah(Tt),Nl(Tt)),g.g=j}else Ig(g);0<f.i.length&&Ll(f)}else ft[0]!="stop"&&ft[0]!="close"||vr(f,7);else f.G==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?vr(f,7):Ih(f):ft[0]!="noop"&&f.l&&f.l.ta(ft),f.v=0)}}wa(4)}catch{}}var Nb=class{constructor(o,c){this.g=o,this.map=c}};function rg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function ag(o){return o.h?1:o.g?o.g.size:0}function bh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function wh(o,c){o.g?o.g.add(c):o.h=c}function og(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}rg.prototype.cancel=function(){if(this.i=lg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function lg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function Db(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,g=0;g<f;g++)c.push(o[g]);return c}c=[],f=0;for(g in o)c[f++]=o[g];return c}function xb(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const g in o)c[f++]=g;return c}}}function ug(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=xb(o),g=Db(o),N=g.length,O=0;O<N;O++)c.call(void 0,g[O],f&&f[O],o)}var cg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ob(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var g=o[f].indexOf("="),N=null;if(0<=g){var O=o[f].substring(0,g);N=o[f].substring(g+1)}else O=o[f];c(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function _r(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof _r){this.h=o.h,Dl(this,o.j),this.o=o.o,this.g=o.g,xl(this,o.s),this.l=o.l;var c=o.i,f=new xa;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),hg(this,f),this.m=o.m}else o&&(c=String(o).match(cg))?(this.h=!1,Dl(this,c[1]||"",!0),this.o=Na(c[2]||""),this.g=Na(c[3]||"",!0),xl(this,c[4]),this.l=Na(c[5]||"",!0),hg(this,c[6]||"",!0),this.m=Na(c[7]||"")):(this.h=!1,this.i=new xa(null,this.h))}_r.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Da(c,fg,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Da(c,fg,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Da(f,f.charAt(0)=="/"?kb:Mb,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Da(f,Lb)),o.join("")};function Hn(o){return new _r(o)}function Dl(o,c,f){o.j=f?Na(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function xl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function hg(o,c,f){c instanceof xa?(o.i=c,Ub(o.i,o.h)):(f||(c=Da(c,Pb)),o.i=new xa(c,o.h))}function Rt(o,c,f){o.i.set(c,f)}function Ol(o){return Rt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Na(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Da(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,Vb),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Vb(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var fg=/[#\/\?@]/g,Mb=/[#\?:]/g,kb=/[#\?]/g,Pb=/[#\?@]/g,Lb=/#/g;function xa(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Ti(o){o.g||(o.g=new Map,o.h=0,o.i&&Ob(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=xa.prototype,e.add=function(o,c){Ti(this),this.i=null,o=ts(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function dg(o,c){Ti(o),c=ts(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function mg(o,c){return Ti(o),c=ts(o,c),o.g.has(c)}e.forEach=function(o,c){Ti(this),this.g.forEach(function(f,g){f.forEach(function(N){o.call(c,N,g,this)},this)},this)},e.na=function(){Ti(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let g=0;g<c.length;g++){const N=o[g];for(let O=0;O<N.length;O++)f.push(c[g])}return f},e.V=function(o){Ti(this);let c=[];if(typeof o=="string")mg(this,o)&&(c=c.concat(this.g.get(ts(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return Ti(this),this.i=null,o=ts(this,o),mg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function pg(o,c,f){dg(o,c),0<f.length&&(o.i=null,o.g.set(ts(o,c),V(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var g=c[f];const O=encodeURIComponent(String(g)),j=this.V(g);for(g=0;g<j.length;g++){var N=O;j[g]!==""&&(N+="="+encodeURIComponent(String(j[g]))),o.push(N)}}return this.i=o.join("&")};function ts(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function Ub(o,c){c&&!o.j&&(Ti(o),o.i=null,o.g.forEach(function(f,g){var N=g.toLowerCase();g!=N&&(dg(this,g),pg(this,N,f))},o)),o.j=c}function jb(o,c){const f=new Ia;if(l.Image){const g=new Image;g.onload=y(Ai,f,"TestLoadImage: loaded",!0,c,g),g.onerror=y(Ai,f,"TestLoadImage: error",!1,c,g),g.onabort=y(Ai,f,"TestLoadImage: abort",!1,c,g),g.ontimeout=y(Ai,f,"TestLoadImage: timeout",!1,c,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else c(!1)}function zb(o,c){const f=new Ia,g=new AbortController,N=setTimeout(()=>{g.abort(),Ai(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:g.signal}).then(O=>{clearTimeout(N),O.ok?Ai(f,"TestPingServer: ok",!0,c):Ai(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Ai(f,"TestPingServer: error",!1,c)})}function Ai(o,c,f,g,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),g(f)}catch{}}function Bb(){this.g=new Sb}function qb(o,c,f){const g=f||"";try{ug(o,function(N,O){let j=N;h(N)&&(j=ph(N)),c.push(g+O+"="+encodeURIComponent(j))})}catch(N){throw c.push(g+"type="+encodeURIComponent("_badmap")),N}}function Vl(o){this.l=o.Ub||null,this.j=o.eb||!1}D(Vl,gh),Vl.prototype.g=function(){return new Ml(this.l,this.j)},Vl.prototype.i=function(o){return function(){return o}}({});function Ml(o,c){ee.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Ml,ee),e=Ml.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Va(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oa(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Va(this)),this.g&&(this.readyState=3,Va(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gg(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function gg(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Oa(this):Va(this),this.readyState==3&&gg(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Oa(this))},e.Qa=function(o){this.g&&(this.response=o,Oa(this))},e.ga=function(){this.g&&Oa(this)};function Oa(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Va(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Va(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ml.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function yg(o){let c="";return B(o,function(f,g){c+=g,c+=":",c+=f,c+=`\r
`}),c}function Rh(o,c,f){t:{for(g in f){var g=!1;break t}g=!0}g||(f=yg(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Rt(o,c,f))}function Lt(o){ee.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Lt,ee);var Hb=/^https?$/i,Gb=["POST","PUT"];e=Lt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vh.g(),this.v=this.o?Qp(this.o):Qp(vh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(O){_g(this,O);return}if(o=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var N in g)f.set(N,g[N]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const O of g.keys())f.set(O,g.get(O));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Gb,c,void 0))||g||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,j]of f)this.g.setRequestHeader(O,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tg(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){_g(this,O)}};function _g(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,vg(o),kl(o)}function vg(o){o.A||(o.A=!0,he(o,"complete"),he(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,he(this,"complete"),he(this,"abort"),kl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kl(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Eg(this):this.bb())},e.bb=function(){Eg(this)};function Eg(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Gn(o)!=4||o.Z()!=2)){if(o.u&&Gn(o)==4)qp(o.Ea,0,o);else if(he(o,"readystatechange"),Gn(o)==4){o.h=!1;try{const j=o.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var g;if(g=j===0){var N=String(o.D).match(cg)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),g=!Hb.test(N?N.toLowerCase():"")}f=g}if(f)he(o,"complete"),he(o,"success");else{o.m=6;try{var O=2<Gn(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",vg(o)}}finally{kl(o)}}}}function kl(o,c){if(o.g){Tg(o);const f=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||he(o,"ready");try{f.onreadystatechange=g}catch{}}}function Tg(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Gn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Ab(c)}};function Ag(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Fb(o){const c={};o=(o.g&&2<=Gn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(v(o[g]))continue;var f=I(o[g]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=c[N]||[];c[N]=O,O.push(f)}T(c,function(g){return g.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ma(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function Sg(o){this.Aa=0,this.i=[],this.j=new Ia,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ma("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ma("baseRetryDelayMs",5e3,o),this.cb=Ma("retryDelaySeedMs",1e4,o),this.Wa=Ma("forwardChannelMaxRetries",2,o),this.wa=Ma("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new rg(o&&o.concurrentRequestLimit),this.Da=new Bb,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Sg.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,g){De(0),this.W=o,this.H=c||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Og(this,null,this.W),Ll(this)};function Ih(o){if(bg(o),o.G==3){var c=o.U++,f=Hn(o.I);if(Rt(f,"SID",o.K),Rt(f,"RID",c),Rt(f,"TYPE","terminate"),ka(o,f),c=new Ei(o,o.j,c),c.L=2,c.v=Ol(Hn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Vg(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Nl(c)}xg(o)}function Pl(o){o.g&&(Nh(o),o.g.cancel(),o.g=null)}function bg(o){Pl(o),o.u&&(l.clearTimeout(o.u),o.u=null),Ul(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Ll(o){if(!sg(o.h)&&!o.s){o.s=!0;var c=o.Ga;K||ht(),$||(K(),$=!0),pt.add(c,o),o.B=0}}function Qb(o,c){return ag(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ra(m(o.Ga,o,c),Dg(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new Ei(this,this.j,o);let O=this.o;if(this.S&&(O?(O=_(O),S(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break e}g=void 0}if(g===void 0)break;if(c+=g,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=Rg(this,N,c),f=Hn(this.I),Rt(f,"RID",o),Rt(f,"CVER",22),this.D&&Rt(f,"X-HTTP-Session-Id",this.D),ka(this,f),O&&(this.O?c="headers="+encodeURIComponent(String(yg(O)))+"&"+c:this.m&&Rh(f,this.m,O)),wh(this.h,N),this.Ua&&Rt(f,"TYPE","init"),this.P?(Rt(f,"$req",c),Rt(f,"SID","null"),N.T=!0,Th(N,f,null)):Th(N,f,c),this.G=2}}else this.G==3&&(o?wg(this,o):this.i.length==0||sg(this.h)||wg(this))};function wg(o,c){var f;c?f=c.l:f=o.U++;const g=Hn(o.I);Rt(g,"SID",o.K),Rt(g,"RID",f),Rt(g,"AID",o.T),ka(o,g),o.m&&o.o&&Rh(g,o.m,o.o),f=new Ei(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Rg(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),wh(o.h,f),Th(f,g,c)}function ka(o,c){o.H&&B(o.H,function(f,g){Rt(c,g,f)}),o.l&&ug({},function(f,g){Rt(c,g,f)})}function Rg(o,c,f){f=Math.min(o.i.length,f);var g=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let O=-1;for(;;){const j=["count="+f];O==-1?0<f?(O=N[0].g,j.push("ofs="+O)):O=0:j.push("ofs="+O);let Tt=!0;for(let fe=0;fe<f;fe++){let ft=N[fe].g;const Te=N[fe].map;if(ft-=O,0>ft)O=Math.max(0,N[fe].g-100),Tt=!1;else try{qb(Te,j,"req"+ft+"_")}catch{g&&g(Te)}}if(Tt){g=j.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,g}function Ig(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;K||ht(),$||(K(),$=!0),pt.add(c,o),o.v=0}}function Ch(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ra(m(o.Fa,o),Dg(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Cg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ra(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,De(10),Pl(this),Cg(this))};function Nh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Cg(o){o.g=new Ei(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Hn(o.qa);Rt(c,"RID","rpc"),Rt(c,"SID",o.K),Rt(c,"AID",o.T),Rt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Rt(c,"TO",o.ja),Rt(c,"TYPE","xmlhttp"),ka(o,c),o.m&&o.o&&Rh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Ol(Hn(c)),f.m=null,f.P=!0,eg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Pl(this),Ch(this),De(19))};function Ul(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Ng(o,c){var f=null;if(o.g==c){Ul(o),Nh(o),o.g=null;var g=2}else if(bh(o.h,c))f=c.D,og(o.h,c),g=1;else return;if(o.G!=0){if(c.o)if(g==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;g=Rl(),he(g,new Zp(g,f)),Ll(o)}else Ig(o);else if(N=c.s,N==3||N==0&&0<c.X||!(g==1&&Qb(o,c)||g==2&&Ch(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:vr(o,5);break;case 4:vr(o,10);break;case 3:vr(o,6);break;default:vr(o,2)}}}function Dg(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function vr(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),g=o.Xa;const N=!g;g=new _r(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Dl(g,"https"),Ol(g),N?jb(g.toString(),f):zb(g.toString(),f)}else De(2);o.G=0,o.l&&o.l.sa(c),xg(o),bg(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function xg(o){if(o.G=0,o.ka=[],o.l){const c=lg(o.h);(c.length!=0||o.i.length!=0)&&(M(o.ka,c),M(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Og(o,c,f){var g=f instanceof _r?Hn(f):new _r(f);if(g.g!="")c&&(g.g=c+"."+g.g),xl(g,g.s);else{var N=l.location;g=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var O=new _r(null);g&&Dl(O,g),c&&(O.g=c),N&&xl(O,N),f&&(O.l=f),g=O}return f=o.D,c=o.ya,f&&c&&Rt(g,f,c),Rt(g,"VER",o.la),ka(o,g),g}function Vg(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Lt(new Vl({eb:f})):new Lt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mg(){}e=Mg.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function jl(){}jl.prototype.g=function(o,c){return new Qe(o,c)};function Qe(o,c){ee.call(this),this.g=new Sg(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new es(this)}D(Qe,ee),Qe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qe.prototype.close=function(){Ih(this.g)},Qe.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=ph(o),o=f);c.i.push(new Nb(c.Ya++,o)),c.G==3&&Ll(c)},Qe.prototype.N=function(){this.g.l=null,delete this.j,Ih(this.g),delete this.g,Qe.aa.N.call(this)};function kg(o){yh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}D(kg,yh);function Pg(){_h.call(this),this.status=1}D(Pg,_h);function es(o){this.g=o}D(es,Mg),es.prototype.ua=function(){he(this.g,"a")},es.prototype.ta=function(o){he(this.g,new kg(o))},es.prototype.sa=function(o){he(this.g,new Pg)},es.prototype.ra=function(){he(this.g,"b")},jl.prototype.createWebChannel=jl.prototype.g,Qe.prototype.send=Qe.prototype.o,Qe.prototype.open=Qe.prototype.m,Qe.prototype.close=Qe.prototype.close,PA=function(){return new jl},kA=function(){return Rl()},MA=gr,Cd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Il.NO_ERROR=0,Il.TIMEOUT=8,Il.HTTP_ERROR=6,wu=Il,Wp.COMPLETE="complete",VA=Wp,Kp.EventType=ba,ba.OPEN="a",ba.CLOSE="b",ba.ERROR="c",ba.MESSAGE="d",ee.prototype.listen=ee.prototype.K,$a=Kp,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,OA=Lt}).apply(typeof iu<"u"?iu:typeof self<"u"?self:typeof window<"u"?window:{});const j_="@firebase/firestore",z_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}be.UNAUTHENTICATED=new be(null),be.GOOGLE_CREDENTIALS=new be("google-credentials-uid"),be.FIRST_PARTY=new be("first-party-uid"),be.MOCK_USER=new be("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pa="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new Qm("@firebase/firestore");function us(){return Br.logLevel}function H(e,...t){if(Br.logLevel<=rt.DEBUG){const n=t.map(ip);Br.debug(`Firestore (${pa}): ${e}`,...n)}}function fi(e,...t){if(Br.logLevel<=rt.ERROR){const n=t.map(ip);Br.error(`Firestore (${pa}): ${e}`,...n)}}function Js(e,...t){if(Br.logLevel<=rt.WARN){const n=t.map(ip);Br.warn(`Firestore (${pa}): ${e}`,...n)}}function ip(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,LA(e,i,n)}function LA(e,t,n){let i=`FIRESTORE (${pa}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw fi(i),new Error(i)}function ct(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||LA(t,r,i)}function J(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends gi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class FN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(be.UNAUTHENTICATED))}shutdown(){}}class QN{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class KN{constructor(t){this.t=t,this.currentUser=be.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ct(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new si;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new si,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new si)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ct(typeof i.accessToken=="string",31837,{l:i}),new UA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ct(t===null||typeof t=="string",2055,{h:t}),new be(t)}}class YN{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=be.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XN{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new YN(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(be.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class B_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $N{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ct(this.o===void 0,3512);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new B_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new B_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=ZN(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function st(e,t){return e<t?-1:e>t?1:0}function Nd(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return Ef(r)===Ef(s)?st(r,s):Ef(r)?1:-1}return st(e.length,t.length)}const WN=55296,JN=57343;function Ef(e){const t=e.charCodeAt(0);return t>=WN&&t<=JN}function ta(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="__name__";class Nn{constructor(t,n,i){n===void 0?n=0:n>t.length&&Q(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Q(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Nn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Nn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=Nn.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return st(t.length,n.length)}static compareSegments(t,n){const i=Nn.isNumericId(t),r=Nn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Nn.extractNumericId(t).compare(Nn.extractNumericId(n)):Nd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ji.fromString(t.substring(4,t.length-2))}}class Et extends Nn{construct(t,n,i){return new Et(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Et(n)}static emptyPath(){return new Et([])}}const tD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ye extends Nn{construct(t,n,i){return new ye(t,n,i)}static isValidIdentifier(t){return tD.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ye.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===q_}static keyField(){return new ye([q_])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ye(n)}static emptyPath(){return new ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(t){this.path=t}static fromPath(t){return new F(Et.fromString(t))}static fromName(t){return new F(Et.fromString(t).popFirst(5))}static empty(){return new F(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Et.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Et.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new F(new Et(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(e,t,n){if(!n)throw new z(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function eD(e,t,n,i){if(t===!0&&i===!0)throw new z(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function H_(e){if(!F.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function G_(e){if(F.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function zA(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Zc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Q(12329,{type:typeof e})}function rn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zc(e);throw new z(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(e,t){const n={typeString:e};return t&&(n.value=t),n}function gl(e,t){if(!zA(e))throw new z(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new z(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=-62135596800,Q_=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(t){return It.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*Q_);return new It(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<F_)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Q_}_compareTo(t){return this.seconds===t.seconds?st(this.nanoseconds,t.nanoseconds):st(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(gl(t,It._jsonSchema))return new It(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-F_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:Xt("string",It._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{static fromTimestamp(t){return new Y(t)}static min(){return new Y(new It(0,0))}static max(){return new Y(new It(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=-1;function nD(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Y.fromTimestamp(i===1e9?new It(n+1,0):new It(n,i));return new sr(r,F.empty(),t)}function iD(e){return new sr(e.readTime,e.key,zo)}class sr{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new sr(Y.min(),F.empty(),zo)}static max(){return new sr(Y.max(),F.empty(),zo)}}function rD(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=F.comparator(e.documentKey,t.documentKey),n!==0?n:st(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==sD)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(r=>r?P.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new P((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new P((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function oD(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ya(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Wc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=-1;function yl(e){return e==null}function gc(e){return e===0&&1/e==-1/0}function lD(e){return typeof e=="number"&&Number.isInteger(e)&&!gc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="";function uD(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=K_(t)),t=cD(e.get(n),t);return K_(t)}function cD(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case BA:n+="";break;default:n+=s}}return n}function K_(e){return e+BA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function mr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function qA(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(t,n){this.comparator=t,this.root=n||pe.EMPTY}insert(t,n){return new Pt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,pe.BLACK,null,null))}remove(t){return new Pt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,pe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ru(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ru(this.root,t,this.comparator,!1)}getReverseIterator(){return new ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ru(this.root,t,this.comparator,!0)}}class ru{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class pe{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??pe.RED,this.left=r??pe.EMPTY,this.right=s??pe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new pe(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return pe.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,pe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,pe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Q(27949);return t+(this.isRed()?0:1)}}pe.EMPTY=null,pe.RED=!0,pe.BLACK=!1;pe.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new pe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t){this.comparator=t,this.data=new Pt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new X_(this.data.getIterator())}getIteratorFrom(t){return new X_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Jt)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Jt(this.comparator);return n.data=t,n}}class X_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.fields=t,t.sort(ye.comparator)}static empty(){return new We([])}unionWith(t){let n=new Jt(ye.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new We(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ta(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new HA("Invalid base64 string: "+s):s}}(t);return new Ee(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new Ee(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return st(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ee.EMPTY_BYTE_STRING=new Ee("");const hD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(e){if(ct(!!e,39018),typeof e=="string"){let t=0;const n=hD.exec(e);if(ct(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Gt(e.seconds),nanos:Gt(e.nanos)}}function Gt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function or(e){return typeof e=="string"?Ee.fromBase64String(e):Ee.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="server_timestamp",FA="__type__",QA="__previous_value__",KA="__local_write_time__";function ap(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[FA])==null?void 0:i.stringValue)===GA}function Jc(e){const t=e.mapValue.fields[QA];return ap(t)?Jc(t):t}function Bo(e){const t=ar(e.mapValue.fields[KA].timestampValue);return new It(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const yc="(default)";class qo{constructor(t,n){this.projectId=t,this.database=n||yc}static empty(){return new qo("","")}get isDefaultDatabase(){return this.database===yc}isEqual(t){return t instanceof qo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="__type__",dD="__max__",su={mapValue:{}},XA="__vector__",_c="value";function lr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ap(e)?4:pD(e)?9007199254740991:mD(e)?10:11:Q(28295,{value:e})}function zn(e,t){if(e===t)return!0;const n=lr(e);if(n!==lr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Bo(e).isEqual(Bo(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=ar(r.timestampValue),l=ar(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return or(r.bytesValue).isEqual(or(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Gt(r.geoPointValue.latitude)===Gt(s.geoPointValue.latitude)&&Gt(r.geoPointValue.longitude)===Gt(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Gt(r.integerValue)===Gt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Gt(r.doubleValue),l=Gt(s.doubleValue);return a===l?gc(a)===gc(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return ta(e.arrayValue.values||[],t.arrayValue.values||[],zn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(Y_(a)!==Y_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!zn(a[u],l[u])))return!1;return!0}(e,t);default:return Q(52216,{left:e})}}function Ho(e,t){return(e.values||[]).find(n=>zn(n,t))!==void 0}function ea(e,t){if(e===t)return 0;const n=lr(e),i=lr(t);if(n!==i)return st(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=Gt(s.integerValue||s.doubleValue),u=Gt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return $_(e.timestampValue,t.timestampValue);case 4:return $_(Bo(e),Bo(t));case 5:return Nd(e.stringValue,t.stringValue);case 6:return function(s,a){const l=or(s),u=or(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=st(l[h],u[h]);if(d!==0)return d}return st(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=st(Gt(s.latitude),Gt(a.latitude));return l!==0?l:st(Gt(s.longitude),Gt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Z_(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,y,D,V;const l=s.fields||{},u=a.fields||{},h=(m=l[_c])==null?void 0:m.arrayValue,d=(y=u[_c])==null?void 0:y.arrayValue,p=st(((D=h==null?void 0:h.values)==null?void 0:D.length)||0,((V=d==null?void 0:d.values)==null?void 0:V.length)||0);return p!==0?p:Z_(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===su.mapValue&&a===su.mapValue)return 0;if(s===su.mapValue)return 1;if(a===su.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const m=Nd(u[p],d[p]);if(m!==0)return m;const y=ea(l[u[p]],h[d[p]]);if(y!==0)return y}return st(u.length,d.length)}(e.mapValue,t.mapValue);default:throw Q(23264,{he:n})}}function $_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return st(e,t);const n=ar(e),i=ar(t),r=st(n.seconds,i.seconds);return r!==0?r:st(n.nanos,i.nanos)}function Z_(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=ea(n[r],i[r]);if(s)return s}return st(n.length,i.length)}function na(e){return Dd(e)}function Dd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=ar(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return or(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return F.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Dd(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${Dd(n.fields[a])}`;return r+"}"}(e.mapValue):Q(61005,{value:e})}function Ru(e){switch(lr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Jc(e);return t?16+Ru(t):16;case 5:return 2*e.stringValue.length;case 6:return or(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Ru(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return mr(i.fields,(s,a)=>{r+=s.length+Ru(a)}),r}(e.mapValue);default:throw Q(13486,{value:e})}}function W_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function xd(e){return!!e&&"integerValue"in e}function op(e){return!!e&&"arrayValue"in e}function J_(e){return!!e&&"nullValue"in e}function tv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Iu(e){return!!e&&"mapValue"in e}function mD(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[YA])==null?void 0:i.stringValue)===XA}function _o(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return mr(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=_o(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=_o(e.arrayValue.values[n]);return t}return{...e}}function pD(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===dD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(t){this.value=t}static empty(){return new Ve({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Iu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=_o(n)}setAll(t){let n=ye.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=_o(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());Iu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return zn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];Iu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){mr(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Ve(_o(this.value))}}function $A(e){const t=[];return mr(e.fields,(n,i)=>{const r=new ye([n]);if(Iu(i)){const s=$A(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new We(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new se(t,0,Y.min(),Y.min(),Y.min(),Ve.empty(),0)}static newFoundDocument(t,n,i,r){return new se(t,1,n,Y.min(),i,r,0)}static newNoDocument(t,n){return new se(t,2,n,Y.min(),Y.min(),Ve.empty(),0)}static newUnknownDocument(t,n){return new se(t,3,n,Y.min(),Y.min(),Ve.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ve.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ve.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof se&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new se(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t,n){this.position=t,this.inclusive=n}}function ev(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=F.comparator(F.fromName(a.referenceValue),n.key):i=ea(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function nv(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!zn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,n="asc"){this.field=t,this.dir=n}}function gD(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{}class Yt extends ZA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new _D(t,n,i):n==="array-contains"?new TD(t,i):n==="in"?new AD(t,i):n==="not-in"?new SD(t,i):n==="array-contains-any"?new bD(t,i):new Yt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new vD(t,i):new ED(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ea(n,this.value)):n!==null&&lr(this.value)===lr(n)&&this.matchesComparison(ea(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wn extends ZA{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new wn(t,n)}matches(t){return WA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function WA(e){return e.op==="and"}function JA(e){return yD(e)&&WA(e)}function yD(e){for(const t of e.filters)if(t instanceof wn)return!1;return!0}function Od(e){if(e instanceof Yt)return e.field.canonicalString()+e.op.toString()+na(e.value);if(JA(e))return e.filters.map(t=>Od(t)).join(",");{const t=e.filters.map(n=>Od(n)).join(",");return`${e.op}(${t})`}}function tS(e,t){return e instanceof Yt?function(i,r){return r instanceof Yt&&i.op===r.op&&i.field.isEqual(r.field)&&zn(i.value,r.value)}(e,t):e instanceof wn?function(i,r){return r instanceof wn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&tS(a,r.filters[l]),!0):!1}(e,t):void Q(19439)}function eS(e){return e instanceof Yt?function(n){return`${n.field.canonicalString()} ${n.op} ${na(n.value)}`}(e):e instanceof wn?function(n){return n.op.toString()+" {"+n.getFilters().map(eS).join(" ,")+"}"}(e):"Filter"}class _D extends Yt{constructor(t,n,i){super(t,n,i),this.key=F.fromName(i.referenceValue)}matches(t){const n=F.comparator(t.key,this.key);return this.matchesComparison(n)}}class vD extends Yt{constructor(t,n){super(t,"in",n),this.keys=nS("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class ED extends Yt{constructor(t,n){super(t,"not-in",n),this.keys=nS("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function nS(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>F.fromName(i.referenceValue))}class TD extends Yt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return op(n)&&Ho(n.arrayValue,this.value)}}class AD extends Yt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ho(this.value.arrayValue,n)}}class SD extends Yt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ho(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ho(this.value.arrayValue,n)}}class bD extends Yt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!op(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ho(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function iv(e,t=null,n=[],i=[],r=null,s=null,a=null){return new wD(e,t,n,i,r,s,a)}function lp(e){const t=J(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Od(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),yl(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>na(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>na(i)).join(",")),t.Te=n}return t.Te}function up(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!gD(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!tS(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!nv(e.startAt,t.startAt)&&nv(e.endAt,t.endAt)}function Vd(e){return F.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RD(e,t,n,i,r,s,a,l){return new _a(e,t,n,i,r,s,a,l)}function th(e){return new _a(e)}function rv(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function iS(e){return e.collectionGroup!==null}function vo(e){const t=J(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Jt(ye.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Go(s,i))}),n.has(ye.keyField().canonicalString())||t.Ie.push(new Go(ye.keyField(),i))}return t.Ie}function Ln(e){const t=J(e);return t.Ee||(t.Ee=ID(t,vo(e))),t.Ee}function ID(e,t){if(e.limitType==="F")return iv(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Go(r.field,s)});const n=e.endAt?new vc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new vc(e.startAt.position,e.startAt.inclusive):null;return iv(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Md(e,t){const n=e.filters.concat([t]);return new _a(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function kd(e,t,n){return new _a(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function eh(e,t){return up(Ln(e),Ln(t))&&e.limitType===t.limitType}function rS(e){return`${lp(Ln(e))}|lt:${e.limitType}`}function cs(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>eS(r)).join(", ")}]`),yl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>na(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>na(r)).join(",")),`Target(${i})`}(Ln(e))}; limitType=${e.limitType})`}function nh(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):F.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of vo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=ev(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,vo(i),r)||i.endAt&&!function(a,l,u){const h=ev(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,vo(i),r))}(e,t)}function CD(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function sS(e){return(t,n)=>{let i=!1;for(const r of vo(e)){const s=ND(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function ND(e,t,n){const i=e.field.isKeyField()?F.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?ea(u,h):Q(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Q(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){mr(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return qA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=new Pt(F.comparator);function di(){return DD}const aS=new Pt(F.comparator);function Za(...e){let t=aS;for(const n of e)t=t.insert(n.key,n);return t}function oS(e){let t=aS;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function wr(){return Eo()}function lS(){return Eo()}function Eo(){return new Xr(e=>e.toString(),(e,t)=>e.isEqual(t))}const xD=new Pt(F.comparator),OD=new Jt(F.comparator);function at(...e){let t=OD;for(const n of e)t=t.add(n);return t}const VD=new Jt(st);function MD(){return VD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gc(t)?"-0":t}}function uS(e){return{integerValue:""+e}}function kD(e,t){return lD(t)?uS(t):cp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(){this._=void 0}}function PD(e,t,n){return e instanceof Fo?function(r,s){const a={fields:{[FA]:{stringValue:GA},[KA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ap(s)&&(s=Jc(s)),s&&(a.fields[QA]=s),{mapValue:a}}(n,t):e instanceof Qo?hS(e,t):e instanceof Ko?fS(e,t):function(r,s){const a=cS(r,s),l=sv(a)+sv(r.Ae);return xd(a)&&xd(r.Ae)?uS(l):cp(r.serializer,l)}(e,t)}function LD(e,t,n){return e instanceof Qo?hS(e,t):e instanceof Ko?fS(e,t):n}function cS(e,t){return e instanceof Ec?function(i){return xd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class Fo extends ih{}class Qo extends ih{constructor(t){super(),this.elements=t}}function hS(e,t){const n=dS(t);for(const i of e.elements)n.some(r=>zn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ko extends ih{constructor(t){super(),this.elements=t}}function fS(e,t){let n=dS(t);for(const i of e.elements)n=n.filter(r=>!zn(r,i));return{arrayValue:{values:n}}}class Ec extends ih{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function sv(e){return Gt(e.integerValue||e.doubleValue)}function dS(e){return op(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(t,n){this.field=t,this.transform=n}}function jD(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Qo&&r instanceof Qo||i instanceof Ko&&r instanceof Ko?ta(i.elements,r.elements,zn):i instanceof Ec&&r instanceof Ec?zn(i.Ae,r.Ae):i instanceof Fo&&r instanceof Fo}(e.transform,t.transform)}class zD{constructor(t,n){this.version=t,this.transformResults=n}}class _e{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new _e}static exists(t){return new _e(void 0,t)}static updateTime(t){return new _e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Cu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class rh{}function mS(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new sh(e.key,_e.none()):new _l(e.key,e.data,_e.none());{const n=e.data,i=Ve.empty();let r=new Jt(ye.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new pr(e.key,i,new We(r.toArray()),_e.none())}}function BD(e,t,n){e instanceof _l?function(r,s,a){const l=r.value.clone(),u=ov(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof pr?function(r,s,a){if(!Cu(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=ov(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(pS(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function To(e,t,n,i){return e instanceof _l?function(s,a,l,u){if(!Cu(s.precondition,a))return l;const h=s.value.clone(),d=lv(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof pr?function(s,a,l,u){if(!Cu(s.precondition,a))return l;const h=lv(s.fieldTransforms,u,a),d=a.data;return d.setAll(pS(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(e,t,n,i):function(s,a,l){return Cu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function qD(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=cS(i.transform,r||null);s!=null&&(n===null&&(n=Ve.empty()),n.set(i.field,s))}return n||null}function av(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ta(i,r,(s,a)=>jD(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class _l extends rh{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class pr extends rh{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pS(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function ov(e,t,n){const i=new Map;ct(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,LD(a,l,n[r]))}return i}function lv(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,PD(s,a,t))}return i}class sh extends rh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gS extends rh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&BD(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=To(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=To(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=lS();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=mS(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(Y.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),at())}isEqual(t){return this.batchId===t.batchId&&ta(this.mutations,t.mutations,(n,i)=>av(n,i))&&ta(this.baseMutations,t.baseMutations,(n,i)=>av(n,i))}}class hp{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){ct(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return xD}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new hp(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,lt;function yS(e){switch(e){case k.OK:return Q(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return Q(15467,{code:e})}}function _S(e){if(e===void 0)return fi("GRPC error has no .code"),k.UNKNOWN;switch(e){case Qt.OK:return k.OK;case Qt.CANCELLED:return k.CANCELLED;case Qt.UNKNOWN:return k.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return k.INTERNAL;case Qt.UNAVAILABLE:return k.UNAVAILABLE;case Qt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Qt.NOT_FOUND:return k.NOT_FOUND;case Qt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Qt.ABORTED:return k.ABORTED;case Qt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Qt.DATA_LOSS:return k.DATA_LOSS;default:return Q(39323,{code:e})}}(lt=Qt||(Qt={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=new Ji([4294967295,4294967295],0);function uv(e){const t=QD().encode(e),n=new xA;return n.update(t),new Uint8Array(n.digest())}function cv(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ji([n,i],0),new Ji([r,s],0)]}class fp{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Wa(`Invalid padding: ${n}`);if(i<0)throw new Wa(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Wa(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Wa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Ji.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(Ji.fromNumber(i)));return r.compare(KD)===1&&(r=new Ji([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=uv(t),[i,r]=cv(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new fp(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=uv(t),[i,r]=cv(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,vl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new ah(Y.min(),r,new Pt(st),di(),at())}}class vl{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new vl(i,n,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class vS{constructor(t,n){this.targetId=t,this.Ce=n}}class ES{constructor(t,n,i=Ee.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class hv{constructor(){this.ve=0,this.Fe=fv(),this.Me=Ee.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=at(),n=at(),i=at();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Q(38017,{changeType:s})}}),new vl(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=fv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class YD{constructor(t){this.Ge=t,this.ze=new Map,this.je=di(),this.Je=au(),this.He=au(),this.Ye=new Pt(st)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Q(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(Vd(s))if(i===0){const a=new F(s.path);this.et(n,a,se.newNoDocument(a,Y.min()))}else ct(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=or(i).toUint8Array()}catch(u){if(u instanceof HA)return Js("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new fp(a,r,s)}catch(u){return Js(u instanceof Wa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&Vd(l.target)){const u=new F(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,se.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=at();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new ah(t,n,this.Ye,this.je,i);return this.je=di(),this.Je=au(),this.He=au(),this.Ye=new Pt(st),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new hv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Jt(st),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Jt(st),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new hv),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function au(){return new Pt(F.comparator)}function fv(){return new Pt(F.comparator)}const XD={asc:"ASCENDING",desc:"DESCENDING"},$D={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZD={and:"AND",or:"OR"};class WD{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Pd(e,t){return e.useProto3Json||yl(t)?t:{value:t}}function Tc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function TS(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function JD(e,t){return Tc(e,t.toTimestamp())}function sn(e){return ct(!!e,49232),Y.fromTimestamp(function(n){const i=ar(n);return new It(i.seconds,i.nanos)}(e))}function dp(e,t){return Ld(e,t).canonicalString()}function Ld(e,t){const n=function(r){return new Et(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function AS(e){const t=Et.fromString(e);return ct(CS(t),10190,{key:t.toString()}),t}function Ac(e,t){return dp(e.databaseId,t.path)}function Ao(e,t){const n=AS(t);if(n.get(1)!==e.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new F(bS(n))}function SS(e,t){return dp(e.databaseId,t)}function tx(e){const t=AS(e);return t.length===4?Et.emptyPath():bS(t)}function Ud(e){return new Et(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function bS(e){return ct(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function dv(e,t,n){return{name:Ac(e,t),fields:n.value.mapValue.fields}}function ex(e,t){return"found"in t?function(i,r){ct(!!r.found,43571),r.found.name,r.found.updateTime;const s=Ao(i,r.found.name),a=sn(r.found.updateTime),l=r.found.createTime?sn(r.found.createTime):Y.min(),u=new Ve({mapValue:{fields:r.found.fields}});return se.newFoundDocument(s,a,l,u)}(e,t):"missing"in t?function(i,r){ct(!!r.missing,3894),ct(!!r.readTime,22933);const s=Ao(i,r.missing),a=sn(r.readTime);return se.newNoDocument(s,a)}(e,t):Q(7234,{result:t})}function nx(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Q(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(ct(d===void 0||typeof d=="string",58123),Ee.fromBase64String(d||"")):(ct(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ee.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?k.UNKNOWN:_S(h.code);return new z(d,h.message||"")}(a);n=new ES(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ao(e,i.document.name),s=sn(i.document.updateTime),a=i.document.createTime?sn(i.document.createTime):Y.min(),l=new Ve({mapValue:{fields:i.document.fields}}),u=se.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new Nu(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Ao(e,i.document),s=i.readTime?sn(i.readTime):Y.min(),a=se.newNoDocument(r,s),l=i.removedTargetIds||[];n=new Nu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Ao(e,i.document),s=i.removedTargetIds||[];n=new Nu([],s,r,null)}else{if(!("filter"in t))return Q(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new FD(r,s),l=i.targetId;n=new vS(l,a)}}return n}function wS(e,t){let n;if(t instanceof _l)n={update:dv(e,t.key,t.value)};else if(t instanceof sh)n={delete:Ac(e,t.key)};else if(t instanceof pr)n={update:dv(e,t.key,t.data),updateMask:hx(t.fieldMask)};else{if(!(t instanceof gS))return Q(16599,{Vt:t.type});n={verify:Ac(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Fo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Qo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ko)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ec)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Q(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:JD(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q(27497)}(e,t.precondition)),n}function ix(e,t){return e&&e.length>0?(ct(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?sn(r.updateTime):sn(s);return a.isEqual(Y.min())&&(a=sn(s)),new zD(a,r.transformResults||[])}(n,t))):[]}function rx(e,t){return{documents:[SS(e,t.path)]}}function sx(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=SS(e,r);const s=function(h){if(h.length!==0)return IS(wn.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:hs(m.field),direction:lx(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Pd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function ax(e){let t=tx(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ct(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(p){const m=RS(p);return m instanceof wn&&JA(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(D){return new Go(fs(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,yl(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,y=p.values||[];return new vc(y,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,y=p.values||[];return new vc(y,m)}(n.endAt)),RD(t,r,a,s,l,"F",u,h)}function ox(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function RS(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=fs(n.unaryFilter.field);return Yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=fs(n.unaryFilter.field);return Yt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=fs(n.unaryFilter.field);return Yt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=fs(n.unaryFilter.field);return Yt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(e):e.fieldFilter!==void 0?function(n){return Yt.create(fs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return wn.create(n.compositeFilter.filters.map(i=>RS(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(e):Q(30097,{filter:e})}function lx(e){return XD[e]}function ux(e){return $D[e]}function cx(e){return ZD[e]}function hs(e){return{fieldPath:e.canonicalString()}}function fs(e){return ye.fromServerFormat(e.fieldPath)}function IS(e){return e instanceof Yt?function(n){if(n.op==="=="){if(tv(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NAN"}};if(J_(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tv(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NOT_NAN"}};if(J_(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hs(n.field),op:ux(n.op),value:n.value}}}(e):e instanceof wn?function(n){const i=n.getFilters().map(r=>IS(r));return i.length===1?i[0]:{compositeFilter:{op:cx(n.op),filters:i}}}(e):Q(54877,{filter:e})}function hx(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function CS(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t,n,i,r,s=Y.min(),a=Y.min(),l=Ee.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Bi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(t){this.yt=t}}function dx(e){const t=ax({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?kd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.Cn=new px}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(sr.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(sr.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class px{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new Jt(Et.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Jt(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NS=41943040;class He{static withCacheSize(t){return new He(t,He.DEFAULT_COLLECTION_PERCENTILE,He.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */He.DEFAULT_COLLECTION_PERCENTILE=10,He.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,He.DEFAULT=new He(NS,He.DEFAULT_COLLECTION_PERCENTILE,He.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),He.DISABLED=new He(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ia(0)}static cr(){return new ia(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="LruGarbageCollector",gx=1048576;function gv([e,t],[n,i]){const r=st(e,n);return r===0?st(t,i):r}class yx{constructor(t){this.Ir=t,this.buffer=new Jt(gv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();gv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class _x{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(pv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ya(n)?H(pv,"Ignoring IndexedDB error during garbage collection: ",n):await ga(n)}await this.Vr(3e5)})}}class vx{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(Wc.ce);const i=new yx(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(mv)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mv):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,a=Date.now(),this.nthSequenceNumber(t,r))).next(p=>(i=p,l=Date.now(),this.removeTargets(t,i,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(p=>(h=Date.now(),us()<=rt.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:p})))}}function Ex(e,t){return new vx(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.changes=new Xr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,se.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&To(i.mutation,r,We.empty(),It.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,at()).next(()=>i))}getLocalViewOfDocuments(t,n,i=at()){const r=wr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=Za();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=wr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,at()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=di();const a=Eo(),l=function(){return Eo()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof pr)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),To(d.mutation,h,d.mutation.getFieldMask(),It.now())):a.set(h.key,We.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new Ax(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=Eo();let r=new Pt((a,l)=>a-l),s=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||We.empty();d=l.applyToLocalView(h,d),i.set(u,d);const p=(r.get(l.batchId)||at()).add(u);r=r.insert(l.batchId,p)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,p=lS();d.forEach(m=>{if(!s.has(m)){const y=mS(n.get(m),i.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return F.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):iS(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):P.resolve(wr());let l=zo,u=s;return a.next(h=>P.forEach(h,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,at())).next(d=>({batchId:l,changes:oS(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new F(n)).next(i=>{let r=Za();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=Za();return this.indexManager.getCollectionParents(t,s).next(l=>P.forEach(l,u=>{const h=function(p,m){return new _a(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,se.newInvalidDocument(d)))});let l=Za();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&To(d.mutation,h,We.empty(),It.now()),nh(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:sn(r.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:dx(r.bundledQuery),readTime:sn(r.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.overlays=new Pt(F.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=wr();return P.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const r=wr(),s=n.length+1,a=new F(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return P.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Pt((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=wr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=wr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return P.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new GD(n,i));let s=this.qr.get(n);s===void 0&&(s=at(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.sessionToken=Ee.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(){this.Qr=new Jt(ne.$r),this.Ur=new Jt(ne.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new ne(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new ne(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new F(new Et([])),i=new ne(n,t),r=new ne(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new F(new Et([])),i=new ne(n,t),r=new ne(n,t+1);let s=at();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new ne(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class ne{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return F.comparator(t.key,n.key)||st(t.Yr,n.Yr)}static Kr(t,n){return st(t.Yr,n.Yr)||F.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(ne.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new HD(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new ne(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?sp:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new ne(n,0),r=new ne(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Jt(st);return n.forEach(r=>{const s=new ne(r,0),a=new ne(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;F.isDocumentKey(s)||(s=s.child(""));const a=new ne(new F(s),0);let l=new Jt(st);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){ct(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,r=>{const s=new ne(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new ne(n,0),r=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(t){this.ri=t,this.docs=function(){return new Pt(F.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():se.newInvalidDocument(n))}getEntries(t,n){let i=di();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():se.newInvalidDocument(r))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=di();const a=n.path,l=new F(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||rD(iD(d),i)<=0||(r.has(d.key)||nh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(t,n,i,r){Q(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new Nx(this)}getSize(t){return P.resolve(this.size)}}class Nx extends Tx{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(t){this.persistence=t,this.si=new Xr(n=>lp(n),up),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.oi=0,this._i=new mp,this.targetCount=0,this.ai=ia.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new ia(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),P.waitFor(s).next(()=>r)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(t,n){this.ui={},this.overlays={},this.ci=new Wc(0),this.li=!1,this.li=!0,this.hi=new Rx,this.referenceDelegate=t(this),this.Pi=new Dx(this),this.indexManager=new mx,this.remoteDocumentCache=function(r){return new Cx(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new fx(n),this.Ii=new bx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new wx,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new Ix(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){H("MemoryPersistence","Starting transaction:",t);const r=new xx(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class xx extends aD{constructor(t){super(),this.currentSequenceNumber=t}}class pp{constructor(t){this.persistence=t,this.Ri=new mp,this.Vi=null}static mi(t){return new pp(t)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const r=F.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,Y.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Sc{constructor(t,n){this.persistence=t,this.pi=new Xr(i=>uD(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=Ex(this,n)}static mi(t,n){return new Sc(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?P.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,Y.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Ru(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return P.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=at(),r=at();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new gp(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return c2()?8:oD(Ie())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Ox;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(us()<=rt.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",cs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(us()<=rt.DEBUG&&H("QueryEngine","Query:",cs(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(us()<=rt.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",cs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ln(n))):P.resolve())}ys(t,n){if(rv(n))return P.resolve(null);let i=Ln(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=kd(n,null,"F"),i=Ln(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=at(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,kd(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return rv(n)||r.isEqual(Y.min())?P.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?P.resolve(null):(us()<=rt.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),cs(n)),this.vs(t,a,n,nD(r,zo)).next(l=>l))})}Ds(t,n){let i=new Jt(sS(t));return n.forEach((r,s)=>{nh(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return us()<=rt.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",cs(n)),this.ps.getDocumentsMatchingQuery(t,n,sr.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="LocalStore",Mx=3e8;class kx{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Pt(st),this.xs=new Xr(s=>lp(s),up),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Sx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function Px(e,t,n,i){return new kx(e,t,n,i)}async function xS(e,t){const n=J(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=at();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function Lx(e,t){const n=J(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const p=h.batch,m=p.keys();let y=P.resolve();return m.forEach(D=>{y=y.next(()=>d.getEntry(u,D)).next(V=>{const M=h.docVersions.get(D);ct(M!==null,48541),V.version.compareTo(M)<0&&(p.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=at();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function OS(e){const t=J(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function Ux(e,t){const n=J(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,p)=>{const m=r.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?y=y.withResumeToken(Ee.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,i)),r=r.insert(p,y),function(V,M,b){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=Mx?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,y,d)&&l.push(n.Pi.updateTargetData(s,y))});let u=di(),h=at();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(jx(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual(Y.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function jx(e,t,n){let i=at(),r=at();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=di();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Y.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(yp,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function zx(e,t){const n=J(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=sp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Bx(e,t){const n=J(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,P.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Bi(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function jd(e,t,n){const i=J(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ya(a))throw a;H(yp,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function yv(e,t,n){const i=J(e);let r=Y.min(),s=at();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const p=J(u),m=p.xs.get(d);return m!==void 0?P.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,d)}(i,a,Ln(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:Y.min(),n?s:at())).next(l=>(qx(i,CD(t),l),{documents:l,Qs:s})))}function qx(e,t,n){let i=e.Os.get(t)||Y.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class _v{constructor(){this.activeTargetIds=MD()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Hx{constructor(){this.Mo=new _v,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new _v,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="ConnectivityMonitor";class Ev{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(vv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H(vv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ou=null;function zd(){return ou===null?ou=function(){return 268435456+Math.round(2147483648*Math.random())}():ou++,"0x"+ou.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="RestConnection",Fx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Qx{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===yc?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=zd(),l=this.zo(t,n.toUriEncodedString());H(Tf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=fa(h);return this.Jo(t,l,u,i,d).then(p=>(H(Tf,`Received RPC '${t}' ${a}: `,p),p),p=>{throw Js(Tf,`RPC '${t}' ${a} failed with error: `,p,"url: ",l,"request:",i),p})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=Fx[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se="WebChannelConnection";class Yx extends Qx{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=zd();return new Promise((l,u)=>{const h=new OA;h.setWithCredentials(!0),h.listenOnce(VA.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case wu.NO_ERROR:const p=h.getResponseJson();H(Se,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),l(p);break;case wu.TIMEOUT:H(Se,`RPC '${t}' ${a} timed out`),u(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case wu.HTTP_ERROR:const m=h.getStatus();if(H(Se,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const D=y==null?void 0:y.error;if(D&&D.status&&D.message){const V=function(b){const v=b.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(v)>=0?v:k.UNKNOWN}(D.status);u(new z(V,D.message))}else u(new z(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new z(k.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(Se,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);H(Se,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=zd(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=PA(),l=kA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");H(Se,`Creating RPC '${t}' stream ${r}: ${d}`,u);const p=a.createWebChannel(d,u);this.I_(p);let m=!1,y=!1;const D=new Kx({Yo:M=>{y?H(Se,`Not sending because RPC '${t}' stream ${r} is closed:`,M):(m||(H(Se,`Opening RPC '${t}' stream ${r} transport.`),p.open(),m=!0),H(Se,`RPC '${t}' stream ${r} sending:`,M),p.send(M))},Zo:()=>p.close()}),V=(M,b,v)=>{M.listen(b,R=>{try{v(R)}catch(x){setTimeout(()=>{throw x},0)}})};return V(p,$a.EventType.OPEN,()=>{y||(H(Se,`RPC '${t}' stream ${r} transport opened.`),D.o_())}),V(p,$a.EventType.CLOSE,()=>{y||(y=!0,H(Se,`RPC '${t}' stream ${r} transport closed`),D.a_(),this.E_(p))}),V(p,$a.EventType.ERROR,M=>{y||(y=!0,Js(Se,`RPC '${t}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),D.a_(new z(k.UNAVAILABLE,"The operation could not be completed")))}),V(p,$a.EventType.MESSAGE,M=>{var b;if(!y){const v=M.data[0];ct(!!v,16349);const R=v,x=(R==null?void 0:R.error)||((b=R[0])==null?void 0:b.error);if(x){H(Se,`RPC '${t}' stream ${r} received error:`,x);const U=x.status;let B=function(A){const S=Qt[A];if(S!==void 0)return _S(S)}(U),T=x.message;B===void 0&&(B=k.INTERNAL,T="Unknown error status: "+U+" with message "+x.message),y=!0,D.a_(new z(B,T)),p.close()}else H(Se,`RPC '${t}' stream ${r} received:`,v),D.u_(v)}}),V(l,MA.STAT_EVENT,M=>{M.stat===Cd.PROXY?H(Se,`RPC '${t}' stream ${r} detected buffering proxy`):M.stat===Cd.NOPROXY&&H(Se,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function Af(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(e){return new WD(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="PersistentStream";class VS{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _p(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(fi(n.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new z(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return H(Tv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(H(Tv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xx extends VS{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=nx(this.serializer,t),i=function(s){if(!("targetChange"in s))return Y.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Y.min():a.readTime?sn(a.readTime):Y.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Ud(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Vd(u)?{documents:rx(s,u)}:{query:sx(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=TS(s,a.resumeToken);const h=Pd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Y.min())>0){l.readTime=Tc(s,a.snapshotVersion.toTimestamp());const h=Pd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=ox(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Ud(this.serializer),n.removeTarget=t,this.q_(n)}}class $x extends VS{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ct(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ct(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ct(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=ix(t.writeResults,t.commitTime),i=sn(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Ud(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>wS(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{}class Wx extends Zx{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,Ld(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(k.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Ld(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Jx{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fi(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="RemoteStore";class t4{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{$r(this)&&(H(qr,"Restarting streams for network reachability change."),await async function(u){const h=J(u);h.Ea.add(4),await El(h),h.Ra.set("Unknown"),h.Ea.delete(4),await lh(h)}(this))})}),this.Ra=new Jx(i,r)}}async function lh(e){if($r(e))for(const t of e.da)await t(!0)}async function El(e){for(const t of e.da)await t(!1)}function MS(e,t){const n=J(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Ap(n)?Tp(n):va(n).O_()&&Ep(n,t))}function vp(e,t){const n=J(e),i=va(n);n.Ia.delete(t),i.O_()&&kS(n,t),n.Ia.size===0&&(i.O_()?i.L_():$r(n)&&n.Ra.set("Unknown"))}function Ep(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Y.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}va(e).Y_(t)}function kS(e,t){e.Va.Ue(t),va(e).Z_(t)}function Tp(e){e.Va=new YD({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),va(e).start(),e.Ra.ua()}function Ap(e){return $r(e)&&!va(e).x_()&&e.Ia.size>0}function $r(e){return J(e).Ea.size===0}function PS(e){e.Va=void 0}async function e4(e){e.Ra.set("Online")}async function n4(e){e.Ia.forEach((t,n)=>{Ep(e,t)})}async function i4(e,t){PS(e),Ap(e)?(e.Ra.ha(t),Tp(e)):e.Ra.set("Unknown")}async function r4(e,t,n){if(e.Ra.set("Online"),t instanceof ES&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){H(qr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await bc(e,i)}else if(t instanceof Nu?e.Va.Ze(t):t instanceof vS?e.Va.st(t):e.Va.tt(t),!n.isEqual(Y.min()))try{const i=await OS(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(Ee.EMPTY_BYTE_STRING,d.snapshotVersion)),kS(s,u);const p=new Bi(d.target,u,h,d.sequenceNumber);Ep(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){H(qr,"Failed to raise snapshot:",i),await bc(e,i)}}async function bc(e,t,n){if(!ya(t))throw t;e.Ea.add(1),await El(e),e.Ra.set("Offline"),n||(n=()=>OS(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{H(qr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await lh(e)})}function LS(e,t){return t().catch(n=>bc(e,n,t))}async function uh(e){const t=J(e),n=ur(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:sp;for(;s4(t);)try{const r=await zx(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,a4(t,r)}catch(r){await bc(t,r)}US(t)&&jS(t)}function s4(e){return $r(e)&&e.Ta.length<10}function a4(e,t){e.Ta.push(t);const n=ur(e);n.O_()&&n.X_&&n.ea(t.mutations)}function US(e){return $r(e)&&!ur(e).x_()&&e.Ta.length>0}function jS(e){ur(e).start()}async function o4(e){ur(e).ra()}async function l4(e){const t=ur(e);for(const n of e.Ta)t.ea(n.mutations)}async function u4(e,t,n){const i=e.Ta.shift(),r=hp.from(i,t,n);await LS(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await uh(e)}async function c4(e,t){t&&ur(e).X_&&await async function(i,r){if(function(a){return yS(a)&&a!==k.ABORTED}(r.code)){const s=i.Ta.shift();ur(i).B_(),await LS(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await uh(i)}}(e,t),US(e)&&jS(e)}async function Av(e,t){const n=J(e);n.asyncQueue.verifyOperationInProgress(),H(qr,"RemoteStore received new credentials");const i=$r(n);n.Ea.add(3),await El(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await lh(n)}async function h4(e,t){const n=J(e);t?(n.Ea.delete(2),await lh(n)):t||(n.Ea.add(2),await El(n),n.Ra.set("Unknown"))}function va(e){return e.ma||(e.ma=function(n,i,r){const s=J(n);return s.sa(),new Xx(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:e4.bind(null,e),t_:n4.bind(null,e),r_:i4.bind(null,e),H_:r4.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Ap(e)?Tp(e):e.Ra.set("Unknown")):(await e.ma.stop(),PS(e))})),e.ma}function ur(e){return e.fa||(e.fa=function(n,i,r){const s=J(n);return s.sa(),new $x(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:o4.bind(null,e),r_:c4.bind(null,e),ta:l4.bind(null,e),na:u4.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await uh(e)):(await e.fa.stop(),e.Ta.length>0&&(H(qr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new Sp(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bp(e,t){if(fi("AsyncQueue",`${t}: ${e}`),ya(e))return new z(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{static emptySet(t){return new Us(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||F.comparator(n.key,i.key):(n,i)=>F.comparator(n.key,i.key),this.keyedMap=Za(),this.sortedSet=new Pt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Us)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Us;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(){this.ga=new Pt(F.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Q(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class ra{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ra(t,n,Us.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&eh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class d4{constructor(){this.queries=bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=J(n),s=r.queries;r.queries=bv(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new z(k.ABORTED,"Firestore shutting down"))}}function bv(){return new Xr(e=>rS(e),eh)}async function zS(e,t){const n=J(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new f4,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=bp(a,`Initialization of query '${cs(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&wp(n)}async function BS(e,t){const n=J(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function m4(e,t){const n=J(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&wp(n)}function p4(e,t,n){const i=J(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function wp(e){e.Ca.forEach(t=>{t.next()})}var Bd,wv;(wv=Bd||(Bd={})).Ma="default",wv.Cache="cache";class qS{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new ra(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=ra.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Bd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(t){this.key=t}}class GS{constructor(t){this.key=t}}class g4{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=at(),this.mutatedKeys=at(),this.eu=sS(t),this.tu=new Us(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new Sv,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,p)=>{const m=r.get(d),y=nh(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),V=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?D!==V&&(i.track({type:3,doc:y}),M=!0):this.su(m,y)||(i.track({type:2,doc:y}),M=!0,(u&&this.eu(y,u)>0||h&&this.eu(y,h)<0)&&(l=!0)):!m&&y?(i.track({type:0,doc:y}),M=!0):m&&!y&&(i.track({type:1,doc:m}),M=!0,(u||h)&&(l=!0)),M&&(y?(a=a.add(y),s=V?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,p)=>function(y,D){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Rt:M})}};return V(y)-V(D)}(d.type,p.type)||this.eu(d.doc,p.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new ra(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Sv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=at(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new GS(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new HS(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=at();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return ra.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Rp="SyncEngine";class y4{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class _4{constructor(t){this.key=t,this.hu=!1}}class v4{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Xr(l=>rS(l),eh),this.Iu=new Map,this.Eu=new Set,this.du=new Pt(F.comparator),this.Au=new Map,this.Ru=new mp,this.Vu={},this.mu=new Map,this.fu=ia.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function E4(e,t,n=!0){const i=$S(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await FS(i,t,n,!0),r}async function T4(e,t){const n=$S(e);await FS(n,t,!0,!1)}async function FS(e,t,n,i){const r=await Bx(e.localStore,Ln(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await A4(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&MS(e.remoteStore,r),l}async function A4(e,t,n,i,r){e.pu=(p,m,y)=>async function(V,M,b,v){let R=M.view.ru(b);R.Cs&&(R=await yv(V.localStore,M.query,!1).then(({documents:T})=>M.view.ru(T,R)));const x=v&&v.targetChanges.get(M.targetId),U=v&&v.targetMismatches.get(M.targetId)!=null,B=M.view.applyChanges(R,V.isPrimaryClient,x,U);return Iv(V,M.targetId,B.au),B.snapshot}(e,p,m,y);const s=await yv(e.localStore,t,!0),a=new g4(t,s.Qs),l=a.ru(s.documents),u=vl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);Iv(e,n,h.au);const d=new y4(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function S4(e,t,n){const i=J(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!eh(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await jd(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&vp(i.remoteStore,r.targetId),qd(i,r.targetId)}).catch(ga)):(qd(i,r.targetId),await jd(i.localStore,r.targetId,!0))}async function b4(e,t){const n=J(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),vp(n.remoteStore,i.targetId))}async function w4(e,t,n){const i=O4(e);try{const r=await function(a,l){const u=J(a),h=It.now(),d=l.reduce((y,D)=>y.add(D.key),at());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=di(),V=at();return u.Ns.getEntries(y,d).next(M=>{D=M,D.forEach((b,v)=>{v.isValidDocument()||(V=V.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(M=>{p=M;const b=[];for(const v of l){const R=qD(v,p.get(v.key).overlayedDocument);R!=null&&b.push(new pr(v.key,R,$A(R.value.mapValue),_e.exists(!0)))}return u.mutationQueue.addMutationBatch(y,h,b,l)}).next(M=>{m=M;const b=M.applyToLocalDocumentSet(p,V);return u.documentOverlayCache.saveOverlays(y,M.batchId,b)})}).then(()=>({batchId:m.batchId,changes:oS(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Pt(st)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await Tl(i,r.changes),await uh(i.remoteStore)}catch(r){const s=bp(r,"Failed to persist write");n.reject(s)}}async function QS(e,t){const n=J(e);try{const i=await Ux(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(ct(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?ct(a.hu,14607):r.removedDocuments.size>0&&(ct(a.hu,42227),a.hu=!1))}),await Tl(n,i,t)}catch(i){await ga(i)}}function Rv(e,t,n){const i=J(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=J(a);u.onlineState=l;let h=!1;u.queries.forEach((d,p)=>{for(const m of p.Sa)m.va(l)&&(h=!0)}),h&&wp(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function R4(e,t,n){const i=J(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Pt(F.comparator);a=a.insert(s,se.newNoDocument(s,Y.min()));const l=at().add(s),u=new ah(Y.min(),new Map,new Pt(st),a,l);await QS(i,u),i.du=i.du.remove(s),i.Au.delete(t),Ip(i)}else await jd(i.localStore,t,!1).then(()=>qd(i,t,n)).catch(ga)}async function I4(e,t){const n=J(e),i=t.batch.batchId;try{const r=await Lx(n.localStore,t);YS(n,i,null),KS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Tl(n,r)}catch(r){await ga(r)}}async function C4(e,t,n){const i=J(e);try{const r=await function(a,l){const u=J(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(ct(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);YS(i,t,n),KS(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Tl(i,r)}catch(r){await ga(r)}}function KS(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function YS(e,t,n){const i=J(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function qd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||XS(e,i)})}function XS(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(vp(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Ip(e))}function Iv(e,t,n){for(const i of n)i instanceof HS?(e.Ru.addReference(i.key,t),N4(e,i)):i instanceof GS?(H(Rp,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||XS(e,i.key)):Q(19791,{wu:i})}function N4(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(H(Rp,"New document in limbo: "+n),e.Eu.add(i),Ip(e))}function Ip(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new F(Et.fromString(t)),i=e.fu.next();e.Au.set(i,new _4(n)),e.du=e.du.insert(n,i),MS(e.remoteStore,new Bi(Ln(th(n.path)),i,"TargetPurposeLimboResolution",Wc.ce))}}async function Tl(e,t,n){const i=J(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){r.push(h);const p=gp.As(u.targetId,h);s.push(p)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=J(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(h,m=>P.forEach(m.Es,y=>d.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.ds,y=>d.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!ya(p))throw p;H(yp,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const y=d.Ms.get(m),D=y.snapshotVersion,V=y.withLastLimboFreeSnapshotVersion(D);d.Ms=d.Ms.insert(m,V)}}}(i.localStore,s))}async function D4(e,t){const n=J(e);if(!n.currentUser.isEqual(t)){H(Rp,"User change. New user:",t.toKey());const i=await xS(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new z(k.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Tl(n,i.Ls)}}function x4(e,t){const n=J(e),i=n.Au.get(t);if(i&&i.hu)return at().add(i.key);{let r=at();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function $S(e){const t=J(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=QS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=x4.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=R4.bind(null,t),t.Pu.H_=m4.bind(null,t.eventManager),t.Pu.yu=p4.bind(null,t.eventManager),t}function O4(e){const t=J(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=I4.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=C4.bind(null,t),t}class wc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=oh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return Px(this.persistence,new Vx,t.initialUser,this.serializer)}Cu(t){return new DS(pp.mi,this.serializer)}Du(t){return new Hx}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wc.provider={build:()=>new wc};class V4 extends wc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ct(this.persistence.referenceDelegate instanceof Sc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new _x(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?He.withCacheSize(this.cacheSizeBytes):He.DEFAULT;return new DS(i=>Sc.mi(i,n),this.serializer)}}class Hd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Rv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=D4.bind(null,this.syncEngine),await h4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new d4}()}createDatastore(t){const n=oh(t.databaseInfo.databaseId),i=function(s){return new Yx(s)}(t.databaseInfo);return function(s,a,l,u){return new Wx(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new t4(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Rv(this.syncEngine,n,0),function(){return Ev.v()?new Ev:new Gx}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const p=new v4(r,s,a,l,u,h);return d&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=J(r);H(qr,"RemoteStore shutting down."),s.Ea.add(5),await El(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Hd.provider={build:()=>new Hd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):fi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=J(r),l={documents:s.map(p=>Ac(a.serializer,p))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,Et.emptyPath(),l,s.length),h=new Map;u.forEach(p=>{const m=ex(a.serializer,p);h.set(m.key.toString(),m)});const d=[];return s.forEach(p=>{const m=h.get(p.toString());ct(!!m,55234,{key:p}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new sh(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=F.fromPath(i);this.mutations.push(new gS(r,this.precondition(r)))}),await async function(i,r){const s=J(i),a={writes:r.map(l=>wS(s.serializer,l))};await s.Go("Commit",s.serializer.databaseId,Et.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Q(50498,{Gu:t.constructor.name});n=Y.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new z(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Y.min())?_e.exists(!1):_e.updateTime(n):_e.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Y.min()))throw new z(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _e.updateTime(n)}return _e.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new _p(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new M4(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!yl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!yS(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="FirestoreClient";class P4{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=be.UNAUTHENTICATED,this.clientId=rp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{H(cr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(cr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=bp(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Sf(e,t){e.asyncQueue.verifyOperationInProgress(),H(cr,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await xS(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Cv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await L4(e);H(cr,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>Av(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>Av(t.remoteStore,r)),e._onlineComponents=t}async function L4(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(cr,"Using user provided OfflineComponentProvider");try{await Sf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===k.FAILED_PRECONDITION||r.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Js("Error using user provided cache. Falling back to memory cache: "+n),await Sf(e,new wc)}}else H(cr,"Using default OfflineComponentProvider"),await Sf(e,new V4(void 0));return e._offlineComponents}async function Cp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(cr,"Using user provided OnlineComponentProvider"),await Cv(e,e._uninitializedComponentsProvider._online)):(H(cr,"Using default OnlineComponentProvider"),await Cv(e,new Hd))),e._onlineComponents}function U4(e){return Cp(e).then(t=>t.syncEngine)}function j4(e){return Cp(e).then(t=>t.datastore)}async function Gd(e){const t=await Cp(e),n=t.eventManager;return n.onListen=E4.bind(null,t.syncEngine),n.onUnlisten=S4.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=T4.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=b4.bind(null,t.syncEngine),n}function z4(e,t,n={}){const i=new si;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new ZS({next:m=>{d.Nu(),a.enqueueAndForget(()=>BS(s,p));const y=m.docs.has(l);!y&&m.fromCache?h.reject(new z(k.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?h.reject(new z(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new qS(th(l.path),d,{includeMetadataChanges:!0,qa:!0});return zS(s,p)}(await Gd(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="firestore.googleapis.com",Dv=!0;class xv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JS,this.ssl=Dv}else this.host=t.host,this.ssl=t.ssl??Dv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=NS;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<gx)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}eD("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WS(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ch{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new FN;switch(i.type){case"firstParty":return new XN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Nv.get(n);i&&(H("ComponentProvider","Removing Datastore"),Nv.delete(n),i.terminate())}(this),Promise.resolve()}}function B4(e,t,n,i={}){var h;e=rn(e,ch);const r=fa(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(q0(`https://${l}`),H0("Firestore",!0)),s.host!==JS&&s.host!==l&&Js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!Lr(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=be.MOCK_USER;else{d=e2(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new be(m)}e._authCredentials=new QN(new UA(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Zr(this.firestore,t,this._query)}}class Mt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Mt(this.firestore,t,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(gl(n,Mt._jsonSchema))return new Mt(t,i||null,new F(Et.fromString(n.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Xt("string",Mt._jsonSchemaVersion),referencePath:Xt("string")};class tr extends Zr{constructor(t,n,i){super(t,n,th(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Mt(this.firestore,null,new F(t))}withConverter(t){return new tr(this.firestore,t,this._path)}}function Ov(e,t,...n){if(e=kt(e),jA("collection","path",t),e instanceof ch){const i=Et.fromString(t,...n);return G_(i),new tr(e,null,i)}{if(!(e instanceof Mt||e instanceof tr))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Et.fromString(t,...n));return G_(i),new tr(e.firestore,null,i)}}function xe(e,t,...n){if(e=kt(e),arguments.length===1&&(t=rp.newId()),jA("doc","path",t),e instanceof ch){const i=Et.fromString(t,...n);return H_(i),new Mt(e,null,new F(i))}{if(!(e instanceof Mt||e instanceof tr))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Et.fromString(t,...n));return H_(i),new Mt(e.firestore,e instanceof tr?e.converter:null,new F(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="AsyncQueue";class Mv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _p(this,"async_queue_retry"),this._c=()=>{const i=Af();i&&H(Vv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=Af();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Af();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new si;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ya(t))throw t;H(Vv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,fi("INTERNAL UNHANDLED ERROR: ",kv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=Sp.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&Q(47125,{Pc:kv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function kv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class mi extends ch{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new Mv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Mv(t),this._firestoreClient=void 0,await t}}}function q4(e,t){const n=typeof e=="object"?e:K0(),i=typeof e=="string"?e:yc,r=Ym(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=JR("firestore");s&&B4(r,...s)}return r}function hh(e){if(e._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||H4(e),e._firestoreClient}function H4(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new fD(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,WS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new P4(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ze(Ee.fromBase64String(t))}catch(n){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ze(Ee.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ze._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(gl(t,Ze._jsonSchema))return Ze.fromBase64String(t.bytes)}}Ze._jsonSchemaVersion="firestore/bytes/1.0",Ze._jsonSchema={type:Xt("string",Ze._jsonSchemaVersion),bytes:Xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ye(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return st(this._lat,t._lat)||st(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Un._jsonSchemaVersion}}static fromJSON(t){if(gl(t,Un._jsonSchema))return new Un(t.latitude,t.longitude)}}Un._jsonSchemaVersion="firestore/geoPoint/1.0",Un._jsonSchema={type:Xt("string",Un._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:jn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(gl(t,jn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new jn(t.vectorValues);throw new z(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jn._jsonSchemaVersion="firestore/vectorValue/1.0",jn._jsonSchema={type:Xt("string",jn._jsonSchemaVersion),vectorValues:Xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=/^__.*__$/;class F4{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new pr(t,this.data,this.fieldMask,n,this.fieldTransforms):new _l(t,this.data,n,this.fieldTransforms)}}class tb{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new pr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function eb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ac:e})}}class Np{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Np({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Rc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(eb(this.Ac)&&G4.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Q4{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||oh(t)}Cc(t,n,i,r=!1){return new Np({Ac:t,methodName:n,Dc:i,path:ye.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sl(e){const t=e._freezeSettings(),n=oh(e._databaseId);return new Q4(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Dp(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);Op("Data must be an object, but it was:",a,i);const l=rb(i,a);let u,h;if(s.merge)u=new We(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const m=Fd(t,p,n);if(!a.contains(m))throw new z(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ab(d,m)||d.push(m)}u=new We(d),h=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=a.fieldTransforms;return new F4(new Ve(l),u,h)}class dh extends fh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof dh}}class xp extends fh{_toFieldTransform(t){return new UD(t.path,new Fo)}isEqual(t){return t instanceof xp}}function nb(e,t,n,i){const r=e.Cc(1,t,n);Op("Data must be an object, but it was:",r,i);const s=[],a=Ve.empty();mr(i,(u,h)=>{const d=Vp(t,u,n);h=kt(h);const p=r.yc(d);if(h instanceof dh)s.push(d);else{const m=bl(h,p);m!=null&&(s.push(d),a.set(d,m))}});const l=new We(s);return new tb(a,l,r.fieldTransforms)}function ib(e,t,n,i,r,s){const a=e.Cc(1,t,n),l=[Fd(t,i,n)],u=[r];if(s.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(Fd(t,s[m])),u.push(s[m+1]);const h=[],d=Ve.empty();for(let m=l.length-1;m>=0;--m)if(!ab(h,l[m])){const y=l[m];let D=u[m];D=kt(D);const V=a.yc(y);if(D instanceof dh)h.push(y);else{const M=bl(D,V);M!=null&&(h.push(y),d.set(y,M))}}const p=new We(h);return new tb(d,p,a.fieldTransforms)}function K4(e,t,n,i=!1){return bl(n,e.Cc(i?4:3,t))}function bl(e,t){if(sb(e=kt(e)))return Op("Unsupported field value:",t,e),rb(e,t);if(e instanceof fh)return function(i,r){if(!eb(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=bl(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=kt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return kD(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=It.fromDate(i);return{timestampValue:Tc(r.serializer,s)}}if(i instanceof It){const s=new It(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Tc(r.serializer,s)}}if(i instanceof Un)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ze)return{bytesValue:TS(r.serializer,i._byteString)};if(i instanceof Mt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dp(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof jn)return function(a,l){return{mapValue:{fields:{[YA]:{stringValue:XA},[_c]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return cp(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Zc(i)}`)}(e,t)}function rb(e,t){const n={};return qA(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):mr(e,(i,r)=>{const s=bl(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function sb(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof It||e instanceof Un||e instanceof Ze||e instanceof Mt||e instanceof fh||e instanceof jn)}function Op(e,t,n){if(!sb(n)||!zA(n)){const i=Zc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Fd(e,t,n){if((t=kt(t))instanceof Al)return t._internalPath;if(typeof t=="string")return Vp(e,t);throw Rc("Field path arguments must be of type string or ",e,!1,void 0,n)}const Y4=new RegExp("[~\\*/\\[\\]]");function Vp(e,t,n){if(t.search(Y4)>=0)throw Rc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Al(...t.split("."))._internalPath}catch{throw Rc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Rc(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new z(k.INVALID_ARGUMENT,l+e+u)}function ab(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new X4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Mp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class X4 extends Ic{data(){return super.data()}}function Mp(e,t){return typeof t=="string"?Vp(e,t):t instanceof Al?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kp{}class ob extends kp{}function Z4(e,t,...n){let i=[];t instanceof kp&&i.push(t),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof Lp).length,l=s.filter(u=>u instanceof Pp).length;if(a>1||a>0&&l>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class Pp extends ob{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Pp(t,n,i)}_apply(t){const n=this._parse(t);return lb(t._query,n),new Zr(t.firestore,t.converter,Md(t._query,n))}_parse(t){const n=Sl(t.firestore);return function(s,a,l,u,h,d,p){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Uv(p,d);const D=[];for(const V of p)D.push(Lv(u,s,V));m={arrayValue:{values:D}}}else m=Lv(u,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Uv(p,d),m=K4(l,a,p,d==="in"||d==="not-in");return Yt.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Lp extends kp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Lp(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:wn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)lb(a,u),a=Md(a,u)}(t._query,n),new Zr(t.firestore,t.converter,Md(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Up extends ob{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Up(t,n)}_apply(t){const n=function(r,s,a){if(r.startAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Go(s,a)}(t._query,this._field,this._direction);return new Zr(t.firestore,t.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new _a(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}}function W4(e,t="asc"){const n=t,i=Mp("orderBy",e);return Up._create(i,n)}function Lv(e,t,n){if(typeof(n=kt(n))=="string"){if(n==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iS(t)&&n.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Et.fromString(n));if(!F.isDocumentKey(i))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return W_(e,new F(i))}if(n instanceof Mt)return W_(e,n._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zc(n)}.`)}function Uv(e,t){if(!Array.isArray(e)||e.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function lb(e,t){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ub{convertValue(t,n="none"){switch(lr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Gt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(or(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Q(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return mr(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[_c].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>Gt(a.doubleValue));return new jn(n)}convertGeoPoint(t){return new Un(Gt(t.latitude),Gt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Jc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Bo(t));default:return null}}convertTimestamp(t){const n=ar(t);return new It(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Et.fromString(t);ct(CS(i),9688,{name:t});const r=new qo(i.get(1),i.get(3)),s=new F(i.popFirst(5));return r.isEqual(n)||fi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class J4 extends ub{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ze(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}class Rs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class er extends Ic{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(Mp("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=er._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}er._jsonSchemaVersion="firestore/documentSnapshot/1.0",er._jsonSchema={type:Xt("string",er._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Du extends er{data(t={}){return super.data(t)}}class js{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new Rs(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Du(this._firestore,this._userDataWriter,i.key,i,new Rs(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new Du(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Rs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Du(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Rs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:tO(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=js._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=rp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function tO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(e){e=rn(e,Mt);const t=rn(e.firestore,mi);return z4(hh(t),e._key).then(n=>cb(t,e,n))}js._jsonSchemaVersion="firestore/querySnapshot/1.0",js._jsonSchema={type:Xt("string",js._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class zp extends ub{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ze(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function Qd(e,t,n){e=rn(e,Mt);const i=rn(e.firestore,mi),r=jp(e.converter,t,n);return mh(i,[Dp(Sl(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,_e.none())])}function eO(e,t,n,...i){e=rn(e,Mt);const r=rn(e.firestore,mi),s=Sl(r);let a;return a=typeof(t=kt(t))=="string"||t instanceof Al?ib(s,"updateDoc",e._key,t,n,i):nb(s,"updateDoc",e._key,t),mh(r,[a.toMutation(e._key,_e.exists(!0))])}function nO(e){return mh(rn(e.firestore,mi),[new sh(e._key,_e.none())])}function iO(e,t){const n=rn(e.firestore,mi),i=xe(e),r=jp(e.converter,t);return mh(n,[Dp(Sl(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,_e.exists(!1))]).then(()=>i)}function So(e,...t){var u,h,d;e=kt(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||Pv(t[i])||(n=t[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Pv(t[i])){const p=t[i];t[i]=(u=p.next)==null?void 0:u.bind(p),t[i+1]=(h=p.error)==null?void 0:h.bind(p),t[i+2]=(d=p.complete)==null?void 0:d.bind(p)}let s,a,l;if(e instanceof Mt)a=rn(e.firestore,mi),l=th(e._key.path),s={next:p=>{t[i]&&t[i](cb(a,e,p))},error:t[i+1],complete:t[i+2]};else{const p=rn(e,Zr);a=rn(p.firestore,mi),l=p._query;const m=new zp(a);s={next:y=>{t[i]&&t[i](new js(a,m,p,y))},error:t[i+1],complete:t[i+2]},$4(e._query)}return function(m,y,D,V){const M=new ZS(V),b=new qS(y,M,D);return m.asyncQueue.enqueueAndForget(async()=>zS(await Gd(m),b)),()=>{M.Nu(),m.asyncQueue.enqueueAndForget(async()=>BS(await Gd(m),b))}}(hh(a),l,r,s)}function mh(e,t){return function(i,r){const s=new si;return i.asyncQueue.enqueueAndForget(async()=>w4(await U4(i),r,s)),s.promise}(hh(e),t)}function cb(e,t,n){const i=n.docs.get(t._key),r=new zp(e);return new er(e,r,t._key,i,new Rs(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO={maxAttempts:5};function Ja(e,t){if((e=kt(e)).firestore!==t)throw new z(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=Sl(t)}get(t){const n=Ja(t,this._firestore),i=new J4(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return Q(24041);const s=r[0];if(s.isFoundDocument())return new Ic(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new Ic(this._firestore,i,n._key,null,n.converter);throw Q(18433,{doc:s})})}set(t,n,i){const r=Ja(t,this._firestore),s=jp(r.converter,n,i),a=Dp(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(t,n,i,...r){const s=Ja(t,this._firestore);let a;return a=typeof(n=kt(n))=="string"||n instanceof Al?ib(this._dataReader,"Transaction.update",s._key,n,i,r):nb(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(t){const n=Ja(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO extends sO{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=Ja(t,this._firestore),i=new zp(this._firestore);return super.get(t).then(r=>new er(this._firestore,i,n._key,r._document,new Rs(!1,!1),n.converter))}}function oO(e,t,n){e=rn(e,mi);const i={...rO,...n};return function(s){if(s.maxAttempts<1)throw new z(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,l){const u=new si;return s.asyncQueue.enqueueAndForget(async()=>{const h=await j4(s);new k4(s.asyncQueue,h,l,a,u).ju()}),u.promise}(hh(e),r=>t(new aO(e,r)),i)}function jv(){return new xp("serverTimestamp")}(function(t,n=!0){(function(r){pa=r})(da),Zs(new Ur("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new mi(new KN(i.getProvider("auth-internal")),new $N(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qo(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Wi(j_,z_,t),Wi(j_,z_,"esm2020")})();var lO="firebase",uO="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wi(lO,uO,"app");const cO={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},hb=Q0(cO),de=q4(hb),xu=HN(hb);NC(xu,AA);const hO=({auth:e})=>{const[t,n]=G.useState(!1),[i,r]=G.useState(""),[s,a]=G.useState(""),[l,u]=G.useState(""),[h,d]=G.useState(""),p=async y=>{if(y.preventDefault(),d(""),t){if(!l.trim()){d("Пожалуйста, введите имя.");return}try{const D=await wC(e,i,s);await CC(D.user,{displayName:l})}catch(D){d(m(D.code))}}else try{await RC(e,i,s)}catch(D){d(m(D.code))}},m=y=>{switch(y){case"auth/invalid-email":return"Неверный формат электронной почты.";case"auth/user-not-found":case"auth/wrong-password":return"Неверный email или пароль.";case"auth/email-already-in-use":return"Этот email уже зарегистрирован.";case"auth/weak-password":return"Пароль слишком слабый. Используйте не менее 6 символов.";default:return"Произошла ошибка. Пожалуйста, попробуйте еще раз."}};return E.jsxs("div",{className:"space-y-4",children:[E.jsxs("form",{onSubmit:p,className:"space-y-4",children:[t&&E.jsx("input",{type:"text",value:l,onChange:y=>u(y.target.value),placeholder:"Ваше имя",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),E.jsx("input",{type:"email",value:i,onChange:y=>r(y.target.value),placeholder:"Email",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),E.jsx("input",{type:"password",value:s,onChange:y=>a(y.target.value),placeholder:"Пароль",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),h&&E.jsx("p",{className:"text-red-500 text-sm text-center",children:h}),E.jsx("button",{type:"submit",className:"w-full py-3 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-transform hover:scale-105",children:t?"Зарегистрироваться":"Войти"})]}),E.jsx("div",{className:"flex items-center justify-center",children:E.jsx("button",{onClick:()=>{n(!t),d("")},className:"text-sm text-accent hover:underline",children:t?"У меня уже есть аккаунт":"Создать новый аккаунт"})})]})},fO=({auth:e})=>E.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main p-4",children:E.jsxs("div",{className:"w-full max-w-sm text-center",children:[E.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Добро пожаловать"}),E.jsx("p",{className:"text-text-main/70 mb-8",children:"Войдите или создайте аккаунт, чтобы продолжить."}),E.jsx("div",{className:"bg-component-bg p-6 rounded-2xl border border-border-color shadow-lg",children:E.jsx(hO,{auth:e})})]})}),fb=({className:e=""})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:E.jsx("path",{d:"m9 18 6-6-6-6"})}),db=({className:e=""})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[E.jsx("path",{d:"M19 12H5"}),E.jsx("polyline",{points:"12 19 5 12 12 5"})]}),mb=({className:e="",filled:t=!1})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[E.jsx("circle",{cx:"11",cy:"11",r:"8"}),E.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),dO=({className:e=""})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[E.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),E.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),mO=({className:e=""})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:E.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),pb=({className:e="",filled:t=!1})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:E.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),gb=({className:e=""})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[E.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),E.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),yb=({className:e="",filled:t=!1})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:E.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),pO=({className:e="",filled:t=!1})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[E.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),E.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),gO=({className:e="",filled:t=!1})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[E.jsx("path",{d:"M4 22h16"}),E.jsx("path",{d:"M7 22V2h10v20"}),E.jsx("path",{d:"M7 12h4"})]}),yO=({className:e=""})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:E.jsx("path",{d:"m15 18-6-6 6-6"})}),_O=({className:e=""})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:E.jsx("path",{d:"m9 18 6-6-6-6"})}),vO=({className:e=""})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[E.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),E.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),EO=({className:e=""})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[E.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),E.jsx("polyline",{points:"16 17 21 12 16 7"}),E.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),TO=()=>E.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main",children:[E.jsx(pb,{className:"animate-pulse-heart text-accent",filled:!0}),E.jsx("p",{className:"mt-4 text-lg opacity-70",children:"Загрузка новелл..."})]}),AO=({activeTab:e,setActiveTab:t})=>{const n=[{id:"library",label:"Библиотека",icon:gO},{id:"search",label:"Поиск",icon:mb},{id:"bookmarks",label:"Закладки",icon:yb},{id:"profile",label:"Профиль",icon:pO}];return E.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:E.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>E.jsxs("button",{onClick:()=>t(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===i.id?"text-accent":"text-text-main opacity-60"}`,children:[E.jsx(i.icon,{filled:e===i.id}),E.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},Bp=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>E.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:e.length>0?e.map((r,s)=>E.jsx("div",{onClick:()=>t(r),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${s*50}ms`},children:E.jsxs("div",{className:"relative transition-all duration-300",children:[E.jsx("button",{onClick:a=>{a.stopPropagation(),i(r.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(r.id)?"text-accent":""}`,children:E.jsx(yb,{filled:n.includes(r.id),width:"20",height:"20"})}),E.jsx("img",{src:`/tene/${r.coverUrl}`,alt:r.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),E.jsx("h2",{className:"mt-2 font-semibold text-xs truncate",children:r.title})]})},r.id)):E.jsx("p",{className:"col-span-3 text-center opacity-70",children:"Ничего не найдено."})}),Hr=({title:e,onBack:t,children:n})=>E.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[t&&E.jsx("button",{onClick:t,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:E.jsx(db,{})}),E.jsx("h1",{className:"text-xl font-bold flex-grow",children:e}),n]}),SO=({novel:e,onSelectChapter:t,onGenreSelect:n,subscription:i,chapters:r,isLoadingChapters:s,lastReadData:a,onBack:l})=>{if(!e)return E.jsxs("div",{children:[E.jsx(Hr,{title:"Загрузка...",onBack:l}),E.jsx("div",{className:"p-4 text-center",children:"Загрузка данных о новелле..."})]});const u=a==null?void 0:a[e.id],h=i&&new Date(i.endDate.seconds*1e3)>new Date;return E.jsxs("div",{className:"animate-slide-in-right",children:[E.jsx(Hr,{title:e.title,onBack:l}),E.jsxs("div",{className:"p-4",children:[E.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 mb-5",children:[E.jsx("img",{src:`/tene/${e.coverUrl}`,alt:e.title,className:"w-32 h-auto mx-auto sm:mx-0 rounded-lg shadow-lg border border-border-color"}),E.jsxs("div",{className:"text-center sm:text-left",children:[E.jsx("h1",{className:"text-2xl font-bold text-text-main",children:e.title}),E.jsx("p",{className:"text-sm opacity-80 mt-1",children:e.author}),E.jsx("div",{className:"flex flex-wrap justify-center sm:justify-start gap-2 mt-3",children:e.genres.map(d=>E.jsx("button",{onClick:()=>n(d),className:"px-3 py-1 text-xs font-medium rounded-full bg-background border border-border-color hover:bg-border-color transition-colors",children:d},d))})]})]}),E.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap opacity-90",children:e.description})]}),E.jsxs("div",{className:"px-4 pb-4",children:[u&&E.jsxs("button",{onClick:()=>t(e.id,u.chapterId),className:"flex items-center justify-between w-full p-4 mb-4 rounded-lg bg-accent/10 border border-accent/20 hover:bg-accent/20 transition-colors",children:[E.jsxs("div",{children:[E.jsx("p",{className:"font-semibold text-accent",children:"Продолжить чтение"}),E.jsx("p",{className:"text-sm opacity-80",children:u.chapterTitle})]}),E.jsx(fb,{className:"text-accent"})]}),E.jsx("h3",{className:"text-lg font-bold mb-3",children:"Главы"}),E.jsx("div",{className:"border border-border-color rounded-lg overflow-hidden",children:s?E.jsx("div",{className:"p-4 text-center opacity-70",children:"Загрузка глав..."}):r.map((d,p)=>{const m=d.paid&&!h;return E.jsxs("button",{onClick:()=>t(e.id,d.id),disabled:m,className:`flex items-center justify-between w-full text-left p-4 transition-colors duration-200 ${m?"bg-background text-text-main/50 cursor-not-allowed":"hover:bg-background"} ${p!==r.length-1?"border-b border-border-color":""}`,children:[E.jsx("span",{children:d.title}),m&&E.jsx(dO,{})]},d.id)})})]})]})},_b=h1.memo(({comment:e,onReply:t,onLike:n,onEdit:i,onDelete:r,onUpdate:s,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:d,replyingTo:p,replyText:m,setReplyText:y,onCommentSubmit:D,isLiked:V})=>{const M=u===e.id,b=p===e.id,v=a||l===e.userId;return E.jsxs("div",{className:"flex flex-col",children:[E.jsxs("div",{className:"flex items-start space-x-3",children:[E.jsx("div",{className:"w-8 h-8 rounded-full bg-border-color flex-shrink-0"}),E.jsxs("div",{className:"flex-1",children:[E.jsx("p",{className:"font-semibold text-sm",children:e.userName}),M?E.jsx("input",{value:h,onChange:R=>d(R.target.value),className:"w-full p-1 bg-background border border-border-color rounded"}):E.jsx("p",{className:"text-sm opacity-90",children:e.text}),E.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs opacity-70",children:[E.jsxs("button",{onClick:n,className:`flex items-center space-x-1 ${V?"text-accent":""}`,children:[E.jsx(pb,{filled:V,width:"16",height:"16"}),E.jsx("span",{children:e.likes})]}),E.jsx("button",{onClick:()=>t(e.id),children:"Ответить"}),v&&E.jsxs(E.Fragment,{children:[M?E.jsx("button",{onClick:()=>s(e.id,h),children:"Сохранить"}):E.jsx("button",{onClick:()=>i(e.id,e.text),children:"Изменить"}),E.jsx("button",{onClick:r,children:"Удалить"})]})]})]})]}),b&&E.jsxs("div",{className:"ml-11 mt-2 flex items-center gap-2",children:[E.jsx("input",{value:m,onChange:R=>y(R.target.value),type:"text",placeholder:`Ответ ${e.userName}...`,className:"w-full p-2 text-sm bg-background border border-border-color rounded-lg focus:outline-none focus:ring-1 focus:ring-accent"}),E.jsx("button",{onClick:()=>D(m,e.id),className:"p-2 rounded-full bg-accent text-white",children:E.jsx(gb,{width:"20",height:"20"})})]}),e.replies&&e.replies.length>0&&E.jsx("div",{className:"ml-11 mt-3 space-y-3 pl-3 border-l-2 border-border-color",children:e.replies.map(R=>E.jsx(_b,{comment:R,onLike:()=>n(R.id),onDelete:()=>r(R.id),onEdit:()=>i(R.id,R.text),onUpdate:s,onReply:t,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:d,replyingTo:p,replyText:m,setReplyText:y,onCommentSubmit:D,isLiked:!1},R.id))})]})}),vb=({onClose:e,onSelectPlan:t})=>{const n=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return E.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:E.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[E.jsx(mO,{className:"mx-auto mb-4 text-accent"}),E.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),E.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),E.jsx("div",{className:"space-y-3",children:n.map(i=>E.jsxs("button",{onClick:()=>t(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[E.jsx("p",{className:"font-bold",children:i.name}),E.jsxs("p",{className:"text-sm",children:[i.price," ₽"]})]},i.duration))}),E.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},Eb=({onClose:e,onSelectMethod:t,plan:n})=>E.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:E.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[E.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),E.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),E.jsxs("div",{className:"space-y-3",children:[E.jsxs("button",{onClick:()=>t("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[E.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),E.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),E.jsxs("button",{onClick:()=>t("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[E.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),E.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]})]}),E.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Назад"})]})}),bO=({newsItem:e,onClose:t})=>E.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:E.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main",onClick:n=>n.stopPropagation(),children:[E.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title}),E.jsx("p",{className:"whitespace-pre-wrap opacity-80",children:e.fullText}),E.jsx("button",{onClick:t,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})}),wO=e=>{const t={},n=[];return e.forEach(i=>{t[i.id]={...i,replies:[]}}),e.forEach(i=>{i.replyTo&&t[i.replyTo]?t[i.replyTo].replies.push(t[i.id]):n.push(t[i.id])}),n},RO=({chapter:e,novel:t,onBack:n,onSelectChapter:i,allChapters:r,subscription:s,userId:a,userName:l,isUserAdmin:u,fontSize:h,onFontSizeChange:d,currentFontClass:p})=>{if(!t||!e)return E.jsxs("div",{children:[E.jsx(Hr,{title:"Ошибка",onBack:n}),E.jsx("div",{className:"p-4 text-center",children:"Не удалось загрузить главу. Пожалуйста, вернитесь назад."})]});const[m,y]=G.useState(""),[D,V]=G.useState(!0),[M,b]=G.useState([]),[v,R]=G.useState(""),[x,U]=G.useState(null),[B,T]=G.useState(""),[_,A]=G.useState(null),[S,I]=G.useState(""),[C,w]=G.useState(0),[Ce,Pe]=G.useState(!1),[q,K]=G.useState(!1),[$,pt]=G.useState(!1),[ht,yn]=G.useState(!1),[Ft,wt]=G.useState(null),le=s&&s.expires_at&&typeof s.expires_at.toDate=="function"&&s.expires_at.toDate()>new Date,ue=G.useMemo(()=>xe(de,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);G.useEffect(()=>{(async()=>{if(V(!0),y(""),e.isPaid&&!le){V(!1),y("### 🔒 Для доступа к этой главе необходима подписка.");return}try{const Ot=xe(de,"chapter_content",`${t.id}-${e.id}`),Ue=await Cc(Ot);Ue.exists()?y(Ue.data().content):y(`## Ошибка

Не удалось загрузить текст главы.`)}catch(Ot){console.error("Ошибка загрузки главы:",Ot),y(`## Ошибка

Произошла ошибка при загрузке.`)}finally{V(!1)}})()},[t.id,e.id,le]),G.useEffect(()=>{const W=So(ue,Bt=>{var je;w(((je=Bt.data())==null?void 0:je.likeCount)||0)}),Ot=Z4(Ov(de,`chapters_metadata/${t.id}_${e.id}/comments`),W4("timestamp","asc")),Ue=So(Ot,async Bt=>{const je=Bt.docs.map(vn=>({id:vn.id,...vn.data()}));if(a){const vn=je.map(async Aa=>{const ee=xe(de,`chapters_metadata/${t.id}_${e.id}/comments/${Aa.id}/likes`,a),he=await Cc(ee);return{...Aa,userHasLiked:he.exists()}}),Ta=await Promise.all(vn);b(Ta)}else b(je)});let zt=()=>{};if(a){const Bt=xe(de,`chapters_metadata/${t.id}_${e.id}/likes`,a);zt=So(Bt,je=>{Pe(je.exists())})}return()=>{W(),Ue(),zt()}},[ue,t.id,e.id,a]);const Wr=G.useCallback(async(W,Ot=null)=>{W.preventDefault();const Ue=Ot?S:v;if(!(!Ue.trim()||!a))try{await Qd(ue,{},{merge:!0});const zt=Ov(de,`chapters_metadata/${t.id}_${e.id}/comments`),Bt={userId:a,userName:l||"Аноним",text:Ue,timestamp:jv(),likeCount:0};Ot&&(Bt.replyTo=Ot),await iO(zt,Bt),Ot?(A(null),I("")):R("")}catch(zt){console.error("Ошибка добавления комментария:",zt)}},[a,l,v,S,ue,t.id,e.id]),_i=G.useCallback(async W=>{if(!a)return;const Ot=xe(de,`chapters_metadata/${t.id}_${e.id}/comments`,W),Ue=xe(de,`chapters_metadata/${t.id}_${e.id}/comments/${W}/likes`,a);b(zt=>zt.map(Bt=>{if(Bt.id===W){const je=Bt.userHasLiked?(Bt.likeCount||1)-1:(Bt.likeCount||0)+1;return{...Bt,userHasLiked:!Bt.userHasLiked,likeCount:je}}return Bt}));try{await oO(de,async zt=>{const Bt=await zt.get(Ue),je=await zt.get(Ot);if(!je.exists())return;const vn=je.data().likeCount||0;Bt.exists()?(zt.delete(Ue),zt.update(Ot,{likeCount:Math.max(0,vn-1)})):(zt.set(Ue,{timestamp:jv()}),zt.update(Ot,{likeCount:vn+1}))})}catch(zt){console.error("Ошибка при обновлении лайка комментария:",zt)}},[a,t.id,e.id]),Ea=G.useCallback(W=>{W?(U(W.id),T(W.text)):(U(null),T(""))},[]),St=G.useCallback(async W=>{if(!B.trim())return;const Ot=xe(de,`chapters_metadata/${t.id}_${e.id}/comments`,W);await eO(Ot,{text:B}),U(null),T("")},[B,t.id,e.id]),ot=G.useCallback(async W=>{const Ot=xe(de,`chapters_metadata/${t.id}_${e.id}/comments`,W);await nO(Ot)},[t.id,e.id]),ce=G.useCallback(W=>{A(Ot=>Ot===W?null:W),I("")},[]),In=W=>window.marked?`<div class="prose max-w-none prose-p:text-text-main prose-headings:text-text-main">${window.marked.parse(W||"")}</div>`:W,Le=r.findIndex(W=>W.id===e.id),_n=r[Le-1],Ne=r[Le+1],vi=W=>{W&&(!le&&W.isPaid?(K(!1),yn(!0)):(i(W),K(!1)))};return E.jsxs("div",{className:"min-h-screen bg-background text-text-main",children:[E.jsx(Hr,{title:t.title,onBack:n}),E.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[E.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:e.title}),E.jsx("div",{className:`whitespace-normal leading-relaxed ${p}`,style:{fontSize:`${h}px`},dangerouslySetInnerHTML:{__html:D?"<p>Загрузка...</p>":In(m)}}),E.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"╚══ ≪ °❈° ≫ ══╝"}),E.jsxs("div",{className:"border-t border-border-color pt-8",children:[E.jsx("h3",{className:"text-xl font-bold mb-4",children:"Комментарии"}),E.jsx("div",{className:"space-y-4 mb-6",children:M.length>0?wO(M).map(W=>E.jsx(_b,{comment:W,onReply:ce,onLike:_i,onEdit:Ea,onDelete:ot,onUpdate:St,isUserAdmin:u,currentUserId:a,editingCommentId:x,editingText:B,setEditingText:T,replyingTo:_,replyText:S,setReplyText:I,onCommentSubmit:Wr},W.id)):E.jsx("p",{className:"opacity-70 text-sm",children:"Комментариев пока нет."})}),E.jsxs("form",{onSubmit:W=>Wr(W,null),className:"flex items-center gap-2",children:[E.jsx("input",{type:"text",value:v,onChange:W=>R(W.target.value),placeholder:"Написать комментарий...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4"}),E.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white",children:E.jsx(gb,{className:"w-5 h-5"})})]})]})]}),E.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10",children:[E.jsx("button",{onClick:()=>vi(_n),disabled:!_n,className:"p-2 disabled:opacity-50",children:E.jsx(db,{})}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("button",{onClick:()=>K(!0),className:"px-4 py-2 rounded-lg bg-background",children:"Оглавление"}),E.jsx("button",{onClick:()=>pt(!0),className:"p-2 rounded-lg bg-background",children:E.jsx(vO,{})})]}),E.jsx("button",{onClick:()=>vi(Ne),disabled:!Ne,className:"p-2 disabled:opacity-50",children:E.jsx(fb,{className:"opacity-100"})})]}),q&&E.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>K(!1),children:E.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:W=>W.stopPropagation(),children:[E.jsx("h3",{className:"font-bold text-lg mb-4",children:"Главы"}),E.jsx("div",{className:"overflow-y-auto",children:r.map(W=>E.jsx("button",{onClick:()=>vi(W),className:`w-full p-2 text-left rounded-md ${W.id===e.id?"bg-accent text-white":"bg-background"}`,children:W.title},W.id))})]})}),$&&E.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>pt(!1),children:E.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg",onClick:W=>W.stopPropagation(),children:[E.jsx("h3",{className:"font-bold text-lg mb-4",children:"Настройки"}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{children:"Размер текста"}),E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("button",{onClick:()=>d(-1),className:"text-2xl font-bold",children:"-"}),E.jsx("span",{children:h}),E.jsx("button",{onClick:()=>d(1),className:"text-2xl font-bold",children:"+"})]})]})]})}),ht&&E.jsx(vb,{onClose:()=>yn(!1),onSelectPlan:()=>{}}),Ft&&E.jsx(Eb,{onClose:()=>wt(null),onSelectMethod:()=>{},plan:Ft})]})},IO=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i,onGenreSelect:r})=>{const[s,a]=G.useState(""),[l,u]=G.useState(null),h=G.useMemo(()=>{const m=new Set;return e.forEach(y=>y.genres.forEach(D=>m.add(D))),["Все",...Array.from(m)]},[e]),d=G.useMemo(()=>e.filter(m=>{const y=m.title.toLowerCase().includes(s.toLowerCase()),D=l==="Все"||!l||m.genres.includes(l);return y&&D}),[e,s,l]),p=m=>{u(m),r(m)};return E.jsxs("div",{children:[E.jsx(Hr,{title:"Поиск"}),E.jsxs("div",{className:"p-4",children:[E.jsxs("div",{className:"relative mb-4",children:[E.jsx(mb,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-50"}),E.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:s,onChange:m=>a(m.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-background border border-border-color focus:outline-none focus:ring-1 focus:ring-accent"})]}),E.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:h.map(m=>E.jsx("button",{onClick:()=>p(m),className:`px-3 py-1 text-xs font-medium rounded-full border transition-colors ${l===m?"bg-accent text-white border-accent":"bg-background border-border-color hover:bg-border-color"}`,children:m},m))})]}),E.jsx(Bp,{novels:d,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]})},CO=({allNovels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>{const r=G.useMemo(()=>e.filter(s=>n.includes(s.id)),[e,n]);return E.jsxs("div",{children:[E.jsx(Hr,{title:"Закладки"}),r.length>0?E.jsx(Bp,{novels:r,onSelectNovel:t,bookmarks:n,onToggleBookmark:i}):E.jsx("p",{className:"text-center p-4 opacity-70",children:"У вас пока нет закладок."})]})},NO=({user:e,subscription:t,onGetSubscriptionClick:n,auth:i})=>{const r=()=>{VC(i).catch(l=>console.error("Logout failed:",l))},s=l=>l?new Date(l.seconds*1e3).toLocaleDateString("ru-RU"):"N/A",a=t&&new Date(t.endDate.seconds*1e3)>new Date;return E.jsxs("div",{children:[E.jsx(Hr,{title:"Профиль"}),E.jsxs("div",{className:"p-4 space-y-4",children:[E.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[E.jsx("p",{className:"text-lg font-semibold",children:e.displayName||"Анонимный пользователь"}),E.jsx("p",{className:"text-sm opacity-70",children:e.email})]}),E.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Статус подписки"}),a?E.jsxs("div",{children:[E.jsx("p",{className:"text-green-500",children:"Активна"}),E.jsxs("p",{className:"text-sm opacity-70",children:["Действительна до: ",s(t.endDate)]})]}):E.jsxs("div",{children:[E.jsx("p",{className:"text-red-500",children:"Неактивна"}),E.jsx("button",{onClick:n,className:"mt-2 px-4 py-2 text-sm font-bold text-white bg-accent rounded-lg",children:"Оформить подписку"})]})]}),E.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 p-3 text-red-500 rounded-lg bg-component-bg border border-border-color hover:bg-border-color transition-colors",children:[E.jsx(EO,{}),E.jsx("span",{children:"Выйти из аккаунта"})]})]})]})},DO=({onReadMore:e})=>{const[t,n]=G.useState([]),[i,r]=G.useState(0);G.useEffect(()=>{const l=`${"/tene/".replace(/\/$/,"")}/data/news.json`;fetch(l).then(u=>{if(!u.ok)throw new Error("Network response was not ok");return u.json()}).then(u=>n(u)).catch(u=>console.error("Failed to load news:",u))},[]);const s=()=>{r(l=>l===0?t.length-1:l-1)},a=()=>{r(l=>l===t.length-1?0:l+1)};return t.length===0?null:E.jsxs("div",{className:"relative w-full max-w-2xl mx-auto overflow-hidden rounded-lg shadow-lg my-4 border border-border-color",children:[E.jsx("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${i*100}%)`},children:t.map(l=>E.jsxs("div",{className:"w-full flex-shrink-0 p-6 bg-component-bg text-text-main",children:[E.jsx("h3",{className:"text-xl font-bold",children:l.title}),E.jsx("p",{className:"mt-2 text-sm opacity-80",children:l.shortText}),E.jsx("button",{onClick:()=>e(l),className:"mt-4 text-accent font-semibold",children:"Читать далее"})]},l.id))}),E.jsx("button",{onClick:s,className:"absolute top-1/2 left-2 -translate-y-1/2 p-2 rounded-full bg-black/20 text-white backdrop-blur-sm",children:E.jsx(yO,{})}),E.jsx("button",{onClick:a,className:"absolute top-1/2 right-2 -translate-y-1/2 p-2 rounded-full bg-black/20 text-white backdrop-blur-sm",children:E.jsx(_O,{})}),E.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex space-x-2",children:t.map((l,u)=>E.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${i===u?"bg-accent":"bg-gray-400"}`},u))})]})};function xO(){const[e,t]=G.useState(null),[n,i]=G.useState(!0),[r,s]=G.useState([]),[a,l]=G.useState("list"),[u,h]=G.useState(null),[d,p]=G.useState(null),[m,y]=G.useState([]),[D,V]=G.useState(!1),[M,b]=G.useState(null),[v,R]=G.useState([]),[x,U]=G.useState(!1),[B,T]=G.useState({}),[_,A]=G.useState(!1),[S,I]=G.useState(null),[C,w]=G.useState(null),[Ce,Pe]=G.useState("library"),[q,K]=G.useState(()=>parseInt(localStorage.getItem("fontSize"),10)||16),[$]=G.useState("font-sans"),pt="tenebrisverbot",ht=e==null?void 0:e.uid,yn=(e==null?void 0:e.displayName)||"Аноним";G.useEffect(()=>OC(xu,async ot=>{if(t(ot),ot){const ce=xe(de,"admins",ot.uid),In=await Cc(ce);U(In.exists()),So(xe(de,"users",ot.uid,"subscription","current"),Le=>{b(Le.data())}),So(xe(de,"users",ot.uid),Le=>{var _n,Ne;R(((_n=Le.data())==null?void 0:_n.bookmarks)||[]),T(((Ne=Le.data())==null?void 0:Ne.lastRead)||{})})}i(!1)}),[]),G.useEffect(()=>{if(e){const St=`${"/tene/".replace(/\/$/,"")}/data/novels.json`;fetch(St).then(ot=>{if(!ot.ok)throw new Error("Could not fetch novels.json");return ot.json()}).then(ot=>s(ot.novels||[])).catch(ot=>console.error("Failed to load novels:",ot))}},[e]),G.useEffect(()=>{if(!u){y([]);return}(async()=>{V(!0);try{const ot=xe(de,"chapter_info",u.id.toString()),ce=await Cc(ot);if(ce.exists()&&ce.data()){const Le=ce.data().chapters||{},_n=Object.keys(Le).map(Ne=>({id:parseInt(Ne),title:`Глава ${Ne}`,isPaid:Le[Ne].isPaid||!1})).sort((Ne,vi)=>Ne.id-vi.id);y(_n)}else y([])}catch(ot){console.error("Ошибка загрузки глав из Firebase:",ot),y([])}finally{V(!1)}})()},[u]);const Ft=G.useCallback(St=>{h(St),l("details")},[]),wt=G.useCallback(async St=>{if(St&&u&&(p(St),l("reader"),ht)){const ot=xe(de,"users",ht);await Qd(ot,{lastRead:{...B,[u.id]:{chapterId:St.id,chapterTitle:St.title}}},{merge:!0})}},[ht,u,B]),le=G.useCallback(async St=>{if(!ht)return;const ot=xe(de,"users",ht),ce=v.includes(St)?v.filter(In=>In!==St):[...v,St];await Qd(ot,{bookmarks:ce},{merge:!0})},[v,ht]),ue=St=>{K(ot=>{const ce=Math.max(12,Math.min(32,ot+St));return localStorage.setItem("fontSize",ce.toString()),ce})},Wr=St=>{I(St),A(!1)},_i=async St=>{if(!S||!ht)return;const ot=`https://t.me/${pt}?start=subscribe_${ht}_${S.duration}`;window.open(ot,"_blank"),I(null)},Ea=()=>{if(a==="details"&&u)return E.jsx(SO,{novel:u,onBack:()=>{l("list"),h(null)},onSelectChapter:wt,chapters:m,isLoadingChapters:D,subscription:M,lastReadData:B,onGenreSelect:St=>{Pe("search"),l("list")}});if(a==="reader"&&d)return E.jsx(RO,{chapter:d,novel:u,onBack:()=>l("details"),onSelectChapter:wt,allChapters:m,subscription:M,userId:ht,userName:yn,isUserAdmin:x,fontSize:q,onFontSizeChange:ue,currentFontClass:$});switch(Ce){case"search":return E.jsx(IO,{novels:r,onSelectNovel:Ft,bookmarks:v,onToggleBookmark:le,onGenreSelect:ot=>console.log(ot)});case"bookmarks":const St=r.filter(ot=>v.includes(ot.id));return E.jsx(CO,{allNovels:St,onSelectNovel:Ft,bookmarks:v,onToggleBookmark:le});case"profile":return E.jsx(NO,{user:e,subscription:M,auth:xu,onGetSubscriptionClick:()=>A(!0)});case"library":default:return E.jsxs("div",{children:[E.jsx(DO,{onReadMore:w}),E.jsx(Bp,{novels:r,onSelectNovel:Ft,bookmarks:v,onToggleBookmark:le})]})}};return n?E.jsx(TO,{}):e?E.jsxs("main",{className:`bg-background min-h-screen text-text-main ${x?"":"no-select"}`,children:[E.jsx("div",{className:"pb-20 max-w-4xl mx-auto",children:Ea()}),a==="list"&&E.jsx(AO,{activeTab:Ce,setActiveTab:Pe}),_&&E.jsx(vb,{onClose:()=>A(!1),onSelectPlan:Wr}),S&&E.jsx(Eb,{onClose:()=>I(null),onSelectMethod:_i,plan:S}),C&&E.jsx(bO,{newsItem:C,onClose:()=>w(null)})]}):E.jsx(fO,{auth:xu})}GR.createRoot(document.getElementById("root")).render(E.jsx(G.StrictMode,{children:E.jsx(xO,{})}));
