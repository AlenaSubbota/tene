(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var Cv={exports:{}},_c={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O1=Symbol.for("react.transitional.element"),V1=Symbol.for("react.fragment");function Nv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var s in t)s!=="key"&&(n[s]=t[s])}else n=t;return t=n.ref,{$$typeof:O1,type:e,key:i,ref:t!==void 0?t:null,props:n}}_c.Fragment=V1;_c.jsx=Nv;_c.jsxs=Nv;Cv.exports=_c;var R=Cv.exports,Dv={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pd=Symbol.for("react.transitional.element"),M1=Symbol.for("react.portal"),k1=Symbol.for("react.fragment"),P1=Symbol.for("react.strict_mode"),U1=Symbol.for("react.profiler"),L1=Symbol.for("react.consumer"),j1=Symbol.for("react.context"),z1=Symbol.for("react.forward_ref"),B1=Symbol.for("react.suspense"),q1=Symbol.for("react.memo"),xv=Symbol.for("react.lazy"),wp=Symbol.iterator;function H1(e){return e===null||typeof e!="object"?null:(e=wp&&e[wp]||e["@@iterator"],typeof e=="function"?e:null)}var Ov={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vv=Object.assign,Mv={};function Wr(e,t,n){this.props=e,this.context=t,this.refs=Mv,this.updater=n||Ov}Wr.prototype.isReactComponent={};Wr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kv(){}kv.prototype=Wr.prototype;function Ud(e,t,n){this.props=e,this.context=t,this.refs=Mv,this.updater=n||Ov}var Ld=Ud.prototype=new kv;Ld.constructor=Ud;Vv(Ld,Wr.prototype);Ld.isPureReactComponent=!0;var Rp=Array.isArray,Vt={H:null,A:null,T:null,S:null,V:null},Pv=Object.prototype.hasOwnProperty;function jd(e,t,n,i,s,r){return n=r.ref,{$$typeof:Pd,type:e,key:t,ref:n!==void 0?n:null,props:r}}function G1(e,t){return jd(e.type,t,void 0,void 0,void 0,e.props)}function zd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pd}function F1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ip=/\/+/g;function Ah(e,t){return typeof e=="object"&&e!==null&&e.key!=null?F1(""+e.key):t.toString(36)}function Cp(){}function Q1(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Cp,Cp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Js(e,t,n,i,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Pd:case M1:a=!0;break;case xv:return a=e._init,Js(a(e._payload),t,n,i,s)}}if(a)return s=s(e),a=i===""?"."+Ah(e,0):i,Rp(s)?(n="",a!=null&&(n=a.replace(Ip,"$&/")+"/"),Js(s,t,n,"",function(h){return h})):s!=null&&(zd(s)&&(s=G1(s,n+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(Ip,"$&/")+"/")+a)),t.push(s)),1;a=0;var l=i===""?".":i+":";if(Rp(e))for(var u=0;u<e.length;u++)i=e[u],r=l+Ah(i,u),a+=Js(i,t,n,r,s);else if(u=H1(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,r=l+Ah(i,u++),a+=Js(i,t,n,r,s);else if(r==="object"){if(typeof e.then=="function")return Js(Q1(e),t,n,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Ol(e,t,n){if(e==null)return e;var i=[],s=0;return Js(e,i,"","",function(r){return t.call(n,r,s++)}),i}function $1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Np=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Y1(){}et.Children={map:Ol,forEach:function(e,t,n){Ol(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ol(e,function(){t++}),t},toArray:function(e){return Ol(e,function(t){return t})||[]},only:function(e){if(!zd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};et.Component=Wr;et.Fragment=k1;et.Profiler=U1;et.PureComponent=Ud;et.StrictMode=P1;et.Suspense=B1;et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Vt;et.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Vt.H.useMemoCache(e)}};et.cache=function(e){return function(){return e.apply(null,arguments)}};et.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=Vv({},e.props),s=e.key,r=void 0;if(t!=null)for(a in t.ref!==void 0&&(r=void 0),t.key!==void 0&&(s=""+t.key),t)!Pv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return jd(e.type,s,void 0,void 0,r,i)};et.createContext=function(e){return e={$$typeof:j1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:L1,_context:e},e};et.createElement=function(e,t,n){var i,s={},r=null;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)Pv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=t[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return jd(e,r,void 0,void 0,null,s)};et.createRef=function(){return{current:null}};et.forwardRef=function(e){return{$$typeof:z1,render:e}};et.isValidElement=zd;et.lazy=function(e){return{$$typeof:xv,_payload:{_status:-1,_result:e},_init:$1}};et.memo=function(e,t){return{$$typeof:q1,type:e,compare:t===void 0?null:t}};et.startTransition=function(e){var t=Vt.T,n={};Vt.T=n;try{var i=e(),s=Vt.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Y1,Np)}catch(r){Np(r)}finally{Vt.T=t}};et.unstable_useCacheRefresh=function(){return Vt.H.useCacheRefresh()};et.use=function(e){return Vt.H.use(e)};et.useActionState=function(e,t,n){return Vt.H.useActionState(e,t,n)};et.useCallback=function(e,t){return Vt.H.useCallback(e,t)};et.useContext=function(e){return Vt.H.useContext(e)};et.useDebugValue=function(){};et.useDeferredValue=function(e,t){return Vt.H.useDeferredValue(e,t)};et.useEffect=function(e,t,n){var i=Vt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};et.useId=function(){return Vt.H.useId()};et.useImperativeHandle=function(e,t,n){return Vt.H.useImperativeHandle(e,t,n)};et.useInsertionEffect=function(e,t){return Vt.H.useInsertionEffect(e,t)};et.useLayoutEffect=function(e,t){return Vt.H.useLayoutEffect(e,t)};et.useMemo=function(e,t){return Vt.H.useMemo(e,t)};et.useOptimistic=function(e,t){return Vt.H.useOptimistic(e,t)};et.useReducer=function(e,t,n){return Vt.H.useReducer(e,t,n)};et.useRef=function(e){return Vt.H.useRef(e)};et.useState=function(e){return Vt.H.useState(e)};et.useSyncExternalStore=function(e,t,n){return Vt.H.useSyncExternalStore(e,t,n)};et.useTransition=function(){return Vt.H.useTransition()};et.version="19.1.1";Dv.exports=et;var Q=Dv.exports,Uv={exports:{}},vc={},Lv={exports:{}},jv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,G){var K=B.length;B.push(G);t:for(;0<K;){var mt=K-1>>>1,Rt=B[mt];if(0<s(Rt,G))B[mt]=G,B[K]=Rt,K=mt;else break t}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var G=B[0],K=B.pop();if(K!==G){B[0]=K;t:for(var mt=0,Rt=B.length,we=Rt>>>1;mt<we;){var oe=2*(mt+1)-1,It=B[oe],Re=oe+1,Ie=B[Re];if(0>s(It,K))Re<Rt&&0>s(Ie,It)?(B[mt]=Ie,B[Re]=K,mt=Re):(B[mt]=It,B[oe]=K,mt=oe);else if(Re<Rt&&0>s(Ie,K))B[mt]=Ie,B[Re]=K,mt=Re;else break t}}return G}function s(B,G){var K=B.sortIndex-G.sortIndex;return K!==0?K:B.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,y=!1,D=!1,O=!1,M=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function x(B){for(var G=n(h);G!==null;){if(G.callback===null)i(h);else if(G.startTime<=B)i(h),G.sortIndex=G.expirationTime,t(u,G);else break;G=n(h)}}function L(B){if(O=!1,x(B),!D)if(n(u)!==null)D=!0,q||(q=!0,C());else{var G=n(h);G!==null&&xt(L,G.startTime-B)}}var q=!1,T=-1,_=5,A=-1;function b(){return M?!0:!(e.unstable_now()-A<_)}function I(){if(M=!1,q){var B=e.unstable_now();A=B;var G=!0;try{t:{D=!1,O&&(O=!1,v(T),T=-1),y=!0;var K=m;try{e:{for(x(B),g=n(u);g!==null&&!(g.expirationTime>B&&b());){var mt=g.callback;if(typeof mt=="function"){g.callback=null,m=g.priorityLevel;var Rt=mt(g.expirationTime<=B);if(B=e.unstable_now(),typeof Rt=="function"){g.callback=Rt,x(B),G=!0;break e}g===n(u)&&i(u),x(B)}else i(u);g=n(u)}if(g!==null)G=!0;else{var we=n(h);we!==null&&xt(L,we.startTime-B),G=!1}}break t}finally{g=null,m=K,y=!1}G=void 0}}finally{G?C():q=!1}}}var C;if(typeof w=="function")C=function(){w(I)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,bt=E.port2;E.port1.onmessage=I,C=function(){bt.postMessage(null)}}else C=function(){S(I,0)};function xt(B,G){T=S(function(){B(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(B){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var K=m;m=G;try{return B()}finally{m=K}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=m;m=B;try{return G()}finally{m=K}},e.unstable_scheduleCallback=function(B,G,K){var mt=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?mt+K:mt):K=mt,B){case 1:var Rt=-1;break;case 2:Rt=250;break;case 5:Rt=1073741823;break;case 4:Rt=1e4;break;default:Rt=5e3}return Rt=K+Rt,B={id:d++,callback:G,priorityLevel:B,startTime:K,expirationTime:Rt,sortIndex:-1},K>mt?(B.sortIndex=K,t(h,B),n(u)===null&&B===n(h)&&(O?(v(T),T=-1):O=!0,xt(L,K-mt))):(B.sortIndex=Rt,t(u,B),D||y||(D=!0,q||(q=!0,C()))),B},e.unstable_shouldYield=b,e.unstable_wrapCallback=function(B){var G=m;return function(){var K=m;m=G;try{return B.apply(this,arguments)}finally{m=K}}}})(jv);Lv.exports=jv;var K1=Lv.exports,zv={exports:{}},Me={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1=Q;function Bv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function yi(){}var Ve={d:{f:yi,r:function(){throw Error(Bv(522))},D:yi,C:yi,L:yi,m:yi,X:yi,S:yi,M:yi},p:0,findDOMNode:null},Z1=Symbol.for("react.portal");function W1(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z1,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Fa=X1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ec(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Me.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ve;Me.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Bv(299));return W1(e,t,null,n)};Me.flushSync=function(e){var t=Fa.T,n=Ve.p;try{if(Fa.T=null,Ve.p=2,e)return e()}finally{Fa.T=t,Ve.p=n,Ve.d.f()}};Me.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Ve.d.C(e,t))};Me.prefetchDNS=function(e){typeof e=="string"&&Ve.d.D(e)};Me.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Ec(n,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Ve.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&Ve.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Me.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Ec(t.as,t.crossOrigin);Ve.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Ve.d.M(e)};Me.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Ec(n,t.crossOrigin);Ve.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Me.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Ec(t.as,t.crossOrigin);Ve.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Ve.d.m(e)};Me.requestFormReset=function(e){Ve.d.r(e)};Me.unstable_batchedUpdates=function(e,t){return e(t)};Me.useFormState=function(e,t,n){return Fa.H.useFormState(e,t,n)};Me.useFormStatus=function(){return Fa.H.useHostTransitionStatus()};Me.version="19.1.1";function qv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qv)}catch(e){console.error(e)}}qv(),zv.exports=Me;var J1=zv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wt=K1,Hv=Q,tb=J1;function U(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Gv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Fv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dp(e){if(Lo(e)!==e)throw Error(U(188))}function eb(e){var t=e.alternate;if(!t){if(t=Lo(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return Dp(s),e;if(r===i)return Dp(s),t;r=r.sibling}throw Error(U(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function Qv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Qv(e),t!==null)return t;e=e.sibling}return null}var Dt=Object.assign,nb=Symbol.for("react.element"),Vl=Symbol.for("react.transitional.element"),Ua=Symbol.for("react.portal"),or=Symbol.for("react.fragment"),$v=Symbol.for("react.strict_mode"),gf=Symbol.for("react.profiler"),ib=Symbol.for("react.provider"),Yv=Symbol.for("react.consumer"),Fn=Symbol.for("react.context"),Bd=Symbol.for("react.forward_ref"),pf=Symbol.for("react.suspense"),yf=Symbol.for("react.suspense_list"),qd=Symbol.for("react.memo"),Ti=Symbol.for("react.lazy"),_f=Symbol.for("react.activity"),sb=Symbol.for("react.memo_cache_sentinel"),xp=Symbol.iterator;function Na(e){return e===null||typeof e!="object"?null:(e=xp&&e[xp]||e["@@iterator"],typeof e=="function"?e:null)}var rb=Symbol.for("react.client.reference");function vf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===rb?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case or:return"Fragment";case gf:return"Profiler";case $v:return"StrictMode";case pf:return"Suspense";case yf:return"SuspenseList";case _f:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Ua:return"Portal";case Fn:return(e.displayName||"Context")+".Provider";case Yv:return(e._context.displayName||"Context")+".Consumer";case Bd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qd:return t=e.displayName||null,t!==null?t:vf(e.type)||"Memo";case Ti:t=e._payload,e=e._init;try{return vf(e(t))}catch{}}return null}var La=Array.isArray,W=Hv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt=tb.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ts={pending:!1,data:null,method:null,action:null},Ef=[],lr=-1;function Un(e){return{current:e}}function re(e){0>lr||(e.current=Ef[lr],Ef[lr]=null,lr--)}function Mt(e,t){lr++,Ef[lr]=e.current,e.current=t}var In=Un(null),mo=Un(null),Pi=Un(null),Au=Un(null);function Su(e,t){switch(Mt(Pi,t),Mt(mo,e),Mt(In,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Py(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Py(t),e=h0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}re(In),Mt(In,e)}function Mr(){re(In),re(mo),re(Pi)}function Tf(e){e.memoizedState!==null&&Mt(Au,e);var t=In.current,n=h0(t,e.type);t!==n&&(Mt(mo,e),Mt(In,n))}function bu(e){mo.current===e&&(re(In),re(mo)),Au.current===e&&(re(Au),bo._currentValue=Ts)}var Af=Object.prototype.hasOwnProperty,Hd=Wt.unstable_scheduleCallback,Sh=Wt.unstable_cancelCallback,ab=Wt.unstable_shouldYield,ob=Wt.unstable_requestPaint,Cn=Wt.unstable_now,lb=Wt.unstable_getCurrentPriorityLevel,Kv=Wt.unstable_ImmediatePriority,Xv=Wt.unstable_UserBlockingPriority,wu=Wt.unstable_NormalPriority,ub=Wt.unstable_LowPriority,Zv=Wt.unstable_IdlePriority,cb=Wt.log,hb=Wt.unstable_setDisableYieldValue,jo=null,Ye=null;function xi(e){if(typeof cb=="function"&&hb(e),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(jo,e)}catch{}}var Ke=Math.clz32?Math.clz32:mb,fb=Math.log,db=Math.LN2;function mb(e){return e>>>=0,e===0?32:31-(fb(e)/db|0)|0}var Ml=256,kl=4194304;function ps(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Tc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var s=0,r=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~r,i!==0?s=ps(i):(a&=l,a!==0?s=ps(a):n||(n=l&~e,n!==0&&(s=ps(n))))):(l=i&~r,l!==0?s=ps(l):a!==0?s=ps(a):n||(n=i&~e,n!==0&&(s=ps(n)))),s===0?0:t!==0&&t!==s&&!(t&r)&&(r=s&-s,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:s}function zo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function gb(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wv(){var e=Ml;return Ml<<=1,!(Ml&4194048)&&(Ml=256),e}function Jv(){var e=kl;return kl<<=1,!(kl&62914560)&&(kl=4194304),e}function bh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function pb(e,t,n,i,s,r){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-Ke(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var y=m[d];y!==null&&(y.lane&=-536870913)}n&=~g}i!==0&&tE(e,i,0),r!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=r&~(a&~t))}function tE(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Ke(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function eE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Ke(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}function Gd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function nE(){var e=dt.p;return e!==0?e:(e=window.event,e===void 0?32:T0(e.type))}function yb(e,t){var n=dt.p;try{return dt.p=e,t()}finally{dt.p=n}}var os=Math.random().toString(36).slice(2),Ae="__reactFiber$"+os,je="__reactProps$"+os,Jr="__reactContainer$"+os,Sf="__reactEvents$"+os,_b="__reactListeners$"+os,vb="__reactHandles$"+os,Op="__reactResources$"+os,qo="__reactMarker$"+os;function Qd(e){delete e[Ae],delete e[je],delete e[Sf],delete e[_b],delete e[vb]}function ur(e){var t=e[Ae];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jr]||n[Ae]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=jy(e);e!==null;){if(n=e[Ae])return n;e=jy(e)}return t}e=n,n=e.parentNode}return null}function ta(e){if(e=e[Ae]||e[Jr]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function ja(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(U(33))}function Tr(e){var t=e[Op];return t||(t=e[Op]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ne(e){e[qo]=!0}var iE=new Set,sE={};function Us(e,t){kr(e,t),kr(e+"Capture",t)}function kr(e,t){for(sE[e]=t,e=0;e<t.length;e++)iE.add(t[e])}var Eb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vp={},Mp={};function Tb(e){return Af.call(Mp,e)?!0:Af.call(Vp,e)?!1:Eb.test(e)?Mp[e]=!0:(Vp[e]=!0,!1)}function Jl(e,t,n){if(Tb(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Pl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Bn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var wh,kp;function tr(e){if(wh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wh=t&&t[1]||"",kp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wh+e+kp}var Rh=!1;function Ih(e,t){if(!e||Rh)return"";Rh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(y){var m=y}Reflect.construct(e,[],g)}else{try{g.call()}catch(y){m=y}e.call(g.prototype)}}else{try{throw Error()}catch(y){m=y}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(y){if(y&&m&&typeof y.stack=="string")return[y.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<h.length&&!h[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===h.length)for(i=u.length-1,s=h.length-1;1<=i&&0<=s&&u[i]!==h[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==h[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==h[s]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=s);break}}}finally{Rh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?tr(n):""}function Ab(e){switch(e.tag){case 26:case 27:case 5:return tr(e.type);case 16:return tr("Lazy");case 13:return tr("Suspense");case 19:return tr("SuspenseList");case 0:case 15:return Ih(e.type,!1);case 11:return Ih(e.type.render,!1);case 1:return Ih(e.type,!0);case 31:return tr("Activity");default:return""}}function Pp(e){try{var t="";do t+=Ab(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Sb(e){var t=rE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ru(e){e._valueTracker||(e._valueTracker=Sb(e))}function aE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=rE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Iu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var bb=/[\n"\\]/g;function on(e){return e.replace(bb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function bf(e,t,n,i,s,r,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+sn(t)):e.value!==""+sn(t)&&(e.value=""+sn(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?wf(e,a,sn(t)):n!=null?wf(e,a,sn(n)):i!=null&&e.removeAttribute("value"),s==null&&r!=null&&(e.defaultChecked=!!r),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+sn(l):e.removeAttribute("name")}function oE(e,t,n,i,s,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;n=n!=null?""+sn(n):"",t=t!=null?""+sn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function wf(e,t,n){t==="number"&&Iu(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ar(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+sn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function lE(e,t,n){if(t!=null&&(t=""+sn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+sn(n):""}function uE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(U(92));if(La(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=sn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Pr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var wb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Up(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||wb.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function cE(e,t,n){if(t!=null&&typeof t!="object")throw Error(U(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&Up(e,s,i)}else for(var r in t)t.hasOwnProperty(r)&&Up(e,r,t[r])}function $d(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ib=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tu(e){return Ib.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Rf=null;function Yd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cr=null,Sr=null;function Lp(e){var t=ta(e);if(t&&(e=t.stateNode)){var n=e[je]||null;t:switch(e=t.stateNode,t.type){case"input":if(bf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+on(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[je]||null;if(!s)throw Error(U(90));bf(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&aE(i)}break t;case"textarea":lE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Ar(e,!!n.multiple,t,!1)}}}var Ch=!1;function hE(e,t,n){if(Ch)return e(t,n);Ch=!0;try{var i=e(t);return i}finally{if(Ch=!1,(cr!==null||Sr!==null)&&(xc(),cr&&(t=cr,e=Sr,Sr=cr=null,Lp(t),e)))for(t=0;t<e.length;t++)Lp(e[t])}}function go(e,t){var n=e.stateNode;if(n===null)return null;var i=n[je]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),If=!1;if(ei)try{var Da={};Object.defineProperty(Da,"passive",{get:function(){If=!0}}),window.addEventListener("test",Da,Da),window.removeEventListener("test",Da,Da)}catch{If=!1}var Oi=null,Kd=null,eu=null;function fE(){if(eu)return eu;var e,t=Kd,n=t.length,i,s="value"in Oi?Oi.value:Oi.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===s[r-i];i++);return eu=s.slice(e,1<i?1-i:void 0)}function nu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ul(){return!0}function jp(){return!1}function ze(e){function t(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Ul:jp,this.isPropagationStopped=jp,this}return Dt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ul)},persist:function(){},isPersistent:Ul}),t}var Ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ac=ze(Ls),Ho=Dt({},Ls,{view:0,detail:0}),Cb=ze(Ho),Nh,Dh,xa,Sc=Dt({},Ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xa&&(xa&&e.type==="mousemove"?(Nh=e.screenX-xa.screenX,Dh=e.screenY-xa.screenY):Dh=Nh=0,xa=e),Nh)},movementY:function(e){return"movementY"in e?e.movementY:Dh}}),zp=ze(Sc),Nb=Dt({},Sc,{dataTransfer:0}),Db=ze(Nb),xb=Dt({},Ho,{relatedTarget:0}),xh=ze(xb),Ob=Dt({},Ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Vb=ze(Ob),Mb=Dt({},Ls,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kb=ze(Mb),Pb=Dt({},Ls,{data:0}),Bp=ze(Pb),Ub={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jb[e])?!!t[e]:!1}function Xd(){return zb}var Bb=Dt({},Ho,{key:function(e){if(e.key){var t=Ub[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=nu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xd,charCode:function(e){return e.type==="keypress"?nu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?nu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qb=ze(Bb),Hb=Dt({},Sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qp=ze(Hb),Gb=Dt({},Ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xd}),Fb=ze(Gb),Qb=Dt({},Ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),$b=ze(Qb),Yb=Dt({},Sc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kb=ze(Yb),Xb=Dt({},Ls,{newState:0,oldState:0}),Zb=ze(Xb),Wb=[9,13,27,32],Zd=ei&&"CompositionEvent"in window,Qa=null;ei&&"documentMode"in document&&(Qa=document.documentMode);var Jb=ei&&"TextEvent"in window&&!Qa,dE=ei&&(!Zd||Qa&&8<Qa&&11>=Qa),Hp=" ",Gp=!1;function mE(e,t){switch(e){case"keyup":return Wb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hr=!1;function tw(e,t){switch(e){case"compositionend":return gE(t);case"keypress":return t.which!==32?null:(Gp=!0,Hp);case"textInput":return e=t.data,e===Hp&&Gp?null:e;default:return null}}function ew(e,t){if(hr)return e==="compositionend"||!Zd&&mE(e,t)?(e=fE(),eu=Kd=Oi=null,hr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dE&&t.locale!=="ko"?null:t.data;default:return null}}var nw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nw[e.type]:t==="textarea"}function pE(e,t,n,i){cr?Sr?Sr.push(i):Sr=[i]:cr=i,t=Fu(t,"onChange"),0<t.length&&(n=new Ac("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var $a=null,po=null;function iw(e){l0(e,0)}function bc(e){var t=ja(e);if(aE(t))return e}function Qp(e,t){if(e==="change")return t}var yE=!1;if(ei){var Oh;if(ei){var Vh="oninput"in document;if(!Vh){var $p=document.createElement("div");$p.setAttribute("oninput","return;"),Vh=typeof $p.oninput=="function"}Oh=Vh}else Oh=!1;yE=Oh&&(!document.documentMode||9<document.documentMode)}function Yp(){$a&&($a.detachEvent("onpropertychange",_E),po=$a=null)}function _E(e){if(e.propertyName==="value"&&bc(po)){var t=[];pE(t,po,e,Yd(e)),hE(iw,t)}}function sw(e,t,n){e==="focusin"?(Yp(),$a=t,po=n,$a.attachEvent("onpropertychange",_E)):e==="focusout"&&Yp()}function rw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bc(po)}function aw(e,t){if(e==="click")return bc(t)}function ow(e,t){if(e==="input"||e==="change")return bc(t)}function lw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tn=typeof Object.is=="function"?Object.is:lw;function yo(e,t){if(tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Af.call(t,s)||!tn(e[s],t[s]))return!1}return!0}function Kp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xp(e,t){var n=Kp(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Kp(n)}}function vE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function EE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Iu(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Iu(e.document)}return t}function Wd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var uw=ei&&"documentMode"in document&&11>=document.documentMode,fr=null,Cf=null,Ya=null,Nf=!1;function Zp(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nf||fr==null||fr!==Iu(i)||(i=fr,"selectionStart"in i&&Wd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ya&&yo(Ya,i)||(Ya=i,i=Fu(Cf,"onSelect"),0<i.length&&(t=new Ac("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=fr)))}function gs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dr={animationend:gs("Animation","AnimationEnd"),animationiteration:gs("Animation","AnimationIteration"),animationstart:gs("Animation","AnimationStart"),transitionrun:gs("Transition","TransitionRun"),transitionstart:gs("Transition","TransitionStart"),transitioncancel:gs("Transition","TransitionCancel"),transitionend:gs("Transition","TransitionEnd")},Mh={},TE={};ei&&(TE=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function js(e){if(Mh[e])return Mh[e];if(!dr[e])return e;var t=dr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in TE)return Mh[e]=t[n];return e}var AE=js("animationend"),SE=js("animationiteration"),bE=js("animationstart"),cw=js("transitionrun"),hw=js("transitionstart"),fw=js("transitioncancel"),wE=js("transitionend"),RE=new Map,Df="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Df.push("scrollEnd");function _n(e,t){RE.set(e,t),Us(t,[e])}var Wp=new WeakMap;function ln(e,t){if(typeof e=="object"&&e!==null){var n=Wp.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Pp(t)},Wp.set(e,t),t)}return{value:e,source:t,stack:Pp(t)}}var nn=[],mr=0,Jd=0;function wc(){for(var e=mr,t=Jd=mr=0;t<e;){var n=nn[t];nn[t++]=null;var i=nn[t];nn[t++]=null;var s=nn[t];nn[t++]=null;var r=nn[t];if(nn[t++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&IE(n,s,r)}}function Rc(e,t,n,i){nn[mr++]=e,nn[mr++]=t,nn[mr++]=n,nn[mr++]=i,Jd|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function tm(e,t,n,i){return Rc(e,t,n,i),Cu(e)}function ea(e,t){return Rc(e,null,null,t),Cu(e)}function IE(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=e.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(s=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,s&&t!==null&&(s=31-Ke(n),e=r.hiddenUpdates,i=e[s],i===null?e[s]=[t]:i.push(t),t.lane=n|536870912),r):null}function Cu(e){if(50<so)throw so=0,Zf=null,Error(U(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var gr={};function dw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fe(e,t,n,i){return new dw(e,t,n,i)}function em(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wn(e,t){var n=e.alternate;return n===null?(n=Fe(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function CE(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function iu(e,t,n,i,s,r){var a=0;if(i=e,typeof e=="function")em(e)&&(a=1);else if(typeof e=="string")a=gR(e,n,In.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case _f:return e=Fe(31,n,t,s),e.elementType=_f,e.lanes=r,e;case or:return As(n.children,s,r,t);case $v:a=8,s|=24;break;case gf:return e=Fe(12,n,t,s|2),e.elementType=gf,e.lanes=r,e;case pf:return e=Fe(13,n,t,s),e.elementType=pf,e.lanes=r,e;case yf:return e=Fe(19,n,t,s),e.elementType=yf,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ib:case Fn:a=10;break t;case Yv:a=9;break t;case Bd:a=11;break t;case qd:a=14;break t;case Ti:a=16,i=null;break t}a=29,n=Error(U(130,e===null?"null":typeof e,"")),i=null}return t=Fe(a,n,t,s),t.elementType=e,t.type=i,t.lanes=r,t}function As(e,t,n,i){return e=Fe(7,e,i,t),e.lanes=n,e}function kh(e,t,n){return e=Fe(6,e,null,t),e.lanes=n,e}function Ph(e,t,n){return t=Fe(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var pr=[],yr=0,Nu=null,Du=0,rn=[],an=0,Ss=null,Qn=1,$n="";function ys(e,t){pr[yr++]=Du,pr[yr++]=Nu,Nu=e,Du=t}function NE(e,t,n){rn[an++]=Qn,rn[an++]=$n,rn[an++]=Ss,Ss=e;var i=Qn;e=$n;var s=32-Ke(i)-1;i&=~(1<<s),n+=1;var r=32-Ke(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Qn=1<<32-Ke(t)+s|n<<s|i,$n=r+e}else Qn=1<<r|n<<s|i,$n=e}function nm(e){e.return!==null&&(ys(e,1),NE(e,1,0))}function im(e){for(;e===Nu;)Nu=pr[--yr],pr[yr]=null,Du=pr[--yr],pr[yr]=null;for(;e===Ss;)Ss=rn[--an],rn[an]=null,$n=rn[--an],rn[an]=null,Qn=rn[--an],rn[an]=null}var xe=null,jt=null,ft=!1,bs=null,wn=!1,xf=Error(U(519));function Cs(e){var t=Error(U(418,""));throw _o(ln(t,e)),xf}function Jp(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ae]=e,t[je]=i,n){case"dialog":it("cancel",t),it("close",t);break;case"iframe":case"object":case"embed":it("load",t);break;case"video":case"audio":for(n=0;n<To.length;n++)it(To[n],t);break;case"source":it("error",t);break;case"img":case"image":case"link":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"input":it("invalid",t),oE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Ru(t);break;case"select":it("invalid",t);break;case"textarea":it("invalid",t),uE(t,i.value,i.defaultValue,i.children),Ru(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||c0(t.textContent,n)?(i.popover!=null&&(it("beforetoggle",t),it("toggle",t)),i.onScroll!=null&&it("scroll",t),i.onScrollEnd!=null&&it("scrollend",t),i.onClick!=null&&(t.onclick=Mc),t=!0):t=!1,t||Cs(e)}function ty(e){for(xe=e.return;xe;)switch(xe.tag){case 5:case 13:wn=!1;return;case 27:case 3:wn=!0;return;default:xe=xe.return}}function Oa(e){if(e!==xe)return!1;if(!ft)return ty(e),ft=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||id(e.type,e.memoizedProps)),n=!n),n&&jt&&Cs(e),ty(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){jt=pn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}jt=null}}else t===27?(t=jt,ls(e.type)?(e=ad,ad=null,jt=e):jt=t):jt=xe?pn(e.stateNode.nextSibling):null;return!0}function Go(){jt=xe=null,ft=!1}function ey(){var e=bs;return e!==null&&(Ue===null?Ue=e:Ue.push.apply(Ue,e),bs=null),e}function _o(e){bs===null?bs=[e]:bs.push(e)}var Of=Un(null),zs=null,Yn=null;function Si(e,t,n){Mt(Of,t._currentValue),t._currentValue=n}function Jn(e){e._currentValue=Of.current,re(Of)}function Vf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Mf(e,t,n,i){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;t:for(;r!==null;){var l=r;r=s;for(var u=0;u<t.length;u++)if(l.context===t[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),Vf(r.return,n,e),i||(a=null);break t}r=l.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(U(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),Vf(a,n,e),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function Fo(e,t,n,i){e=null;for(var s=t,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(U(387));if(a=a.memoizedProps,a!==null){var l=s.type;tn(s.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(s===Au.current){if(a=s.alternate,a===null)throw Error(U(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(bo):e=[bo])}s=s.return}e!==null&&Mf(t,e,n,i),t.flags|=262144}function xu(e){for(e=e.firstContext;e!==null;){if(!tn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ns(e){zs=e,Yn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Se(e){return DE(zs,e)}function Ll(e,t){return zs===null&&Ns(e),DE(e,t)}function DE(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Yn===null){if(e===null)throw Error(U(308));Yn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Yn=Yn.next=t;return n}var mw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},gw=Wt.unstable_scheduleCallback,pw=Wt.unstable_NormalPriority,Kt={$$typeof:Fn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sm(){return{controller:new mw,data:new Map,refCount:0}}function Qo(e){e.refCount--,e.refCount===0&&gw(pw,function(){e.controller.abort()})}var Ka=null,kf=0,Ur=0,br=null;function yw(e,t){if(Ka===null){var n=Ka=[];kf=0,Ur=Im(),br={status:"pending",value:void 0,then:function(i){n.push(i)}}}return kf++,t.then(ny,ny),t}function ny(){if(--kf===0&&Ka!==null){br!==null&&(br.status="fulfilled");var e=Ka;Ka=null,Ur=0,br=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function _w(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var iy=W.S;W.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&yw(e,t),iy!==null&&iy(e,t)};var ws=Un(null);function rm(){var e=ws.current;return e!==null?e:wt.pooledCache}function su(e,t){t===null?Mt(ws,ws.current):Mt(ws,t.pool)}function xE(){var e=rm();return e===null?null:{parent:Kt._currentValue,pool:e}}var $o=Error(U(460)),OE=Error(U(474)),Ic=Error(U(542)),Pf={then:function(){}};function sy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function jl(){}function VE(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(jl,jl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ay(e),e;default:if(typeof t.status=="string")t.then(jl,jl);else{if(e=wt,e!==null&&100<e.shellSuspendCounter)throw Error(U(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=i}},function(i){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ay(e),e}throw Xa=t,$o}}var Xa=null;function ry(){if(Xa===null)throw Error(U(459));var e=Xa;return Xa=null,e}function ay(e){if(e===$o||e===Ic)throw Error(U(483))}var Ai=!1;function am(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ui(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Li(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,pt&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=Cu(e),IE(e,null,n),t}return Rc(e,i,t,n),Cu(e)}function Za(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,eE(e,n)}}function Uh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Lf=!1;function Wa(){if(Lf){var e=br;if(e!==null)throw e}}function Ja(e,t,n,i){Lf=!1;var s=e.updateQueue;Ai=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?r=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(r!==null){var g=s.baseState;a=0,d=h=u=null,l=r;do{var m=l.lane&-536870913,y=m!==l.lane;if(y?(ut&m)===m:(i&m)===m){m!==0&&m===Ur&&(Lf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var D=e,O=l;m=t;var M=n;switch(O.tag){case 1:if(D=O.payload,typeof D=="function"){g=D.call(M,g,m);break t}g=D;break t;case 3:D.flags=D.flags&-65537|128;case 0:if(D=O.payload,m=typeof D=="function"?D.call(M,g,m):D,m==null)break t;g=Dt({},g,m);break t;case 2:Ai=!0}}m=l.callback,m!==null&&(e.flags|=64,y&&(e.flags|=8192),y=s.callbacks,y===null?s.callbacks=[m]:y.push(m))}else y={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=y,u=g):d=d.next=y,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;y=l,l=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);d===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=d,r===null&&(s.shared.lanes=0),Ji|=a,e.lanes=a,e.memoizedState=g}}function ME(e,t){if(typeof e!="function")throw Error(U(191,e));e.call(t)}function kE(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)ME(n[e],t)}var Lr=Un(null),Ou=Un(0);function oy(e,t){e=si,Mt(Ou,e),Mt(Lr,t),si=e|t.baseLanes}function jf(){Mt(Ou,si),Mt(Lr,Lr.current)}function om(){si=Ou.current,re(Lr),re(Ou)}var Zi=0,nt=null,vt=null,Ft=null,Vu=!1,wr=!1,Ds=!1,Mu=0,vo=0,Rr=null,vw=0;function Bt(){throw Error(U(321))}function lm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tn(e[n],t[n]))return!1;return!0}function um(e,t,n,i,s,r){return Zi=r,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,W.H=e===null||e.memoizedState===null?fT:dT,Ds=!1,r=n(i,s),Ds=!1,wr&&(r=UE(t,n,i,s)),PE(e),r}function PE(e){W.H=ku;var t=vt!==null&&vt.next!==null;if(Zi=0,Ft=vt=nt=null,Vu=!1,vo=0,Rr=null,t)throw Error(U(300));e===null||se||(e=e.dependencies,e!==null&&xu(e)&&(se=!0))}function UE(e,t,n,i){nt=e;var s=0;do{if(wr&&(Rr=null),vo=0,wr=!1,25<=s)throw Error(U(301));if(s+=1,Ft=vt=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}W.H=Rw,r=t(n,i)}while(wr);return r}function Ew(){var e=W.H,t=e.useState()[0];return t=typeof t.then=="function"?Yo(t):t,e=e.useState()[0],(vt!==null?vt.memoizedState:null)!==e&&(nt.flags|=1024),t}function cm(){var e=Mu!==0;return Mu=0,e}function hm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function fm(e){if(Vu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Vu=!1}Zi=0,Ft=vt=nt=null,wr=!1,vo=Mu=0,Rr=null}function ke(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?nt.memoizedState=Ft=e:Ft=Ft.next=e,Ft}function Yt(){if(vt===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=vt.next;var t=Ft===null?nt.memoizedState:Ft.next;if(t!==null)Ft=t,vt=e;else{if(e===null)throw nt.alternate===null?Error(U(467)):Error(U(310));vt=e,e={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Ft===null?nt.memoizedState=Ft=e:Ft=Ft.next=e}return Ft}function dm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yo(e){var t=vo;return vo+=1,Rr===null&&(Rr=[]),e=VE(Rr,e,t),t=nt,(Ft===null?t.memoizedState:Ft.next)===null&&(t=t.alternate,W.H=t===null||t.memoizedState===null?fT:dT),e}function Cc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Yo(e);if(e.$$typeof===Fn)return Se(e)}throw Error(U(438,String(e)))}function mm(e){var t=null,n=nt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=nt.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=dm(),nt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=sb;return t.index++,n}function ni(e,t){return typeof t=="function"?t(e):t}function ru(e){var t=Yt();return gm(t,vt,e)}function gm(e,t,n){var i=e.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var s=e.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}t.baseQueue=s=r,i.pending=null}if(r=e.baseState,s===null)e.memoizedState=r;else{t=s.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(ut&g)===g:(Zi&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Ur&&(d=!0);else if((Zi&m)===m){h=h.next,m===Ur&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=r):u=u.next=g,nt.lanes|=m,Ji|=m;g=h.action,Ds&&n(r,g),r=h.hasEagerState?h.eagerState:n(r,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=r):u=u.next=m,nt.lanes|=g,Ji|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=r:u.next=l,!tn(r,e.memoizedState)&&(se=!0,d&&(n=br,n!==null)))throw n;e.memoizedState=r,e.baseState=a,e.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Lh(e){var t=Yt(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=e(r,a.action),a=a.next;while(a!==s);tn(r,t.memoizedState)||(se=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function LE(e,t,n){var i=nt,s=Yt(),r=ft;if(r){if(n===void 0)throw Error(U(407));n=n()}else n=t();var a=!tn((vt||s).memoizedState,n);a&&(s.memoizedState=n,se=!0),s=s.queue;var l=BE.bind(null,i,s,e);if(Ko(2048,8,l,[e]),s.getSnapshot!==t||a||Ft!==null&&Ft.memoizedState.tag&1){if(i.flags|=2048,jr(9,Nc(),zE.bind(null,i,s,n,t),null),wt===null)throw Error(U(349));r||Zi&124||jE(i,t,n)}return n}function jE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=nt.updateQueue,t===null?(t=dm(),nt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zE(e,t,n,i){t.value=n,t.getSnapshot=i,qE(t)&&HE(e)}function BE(e,t,n){return n(function(){qE(t)&&HE(e)})}function qE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tn(e,n)}catch{return!0}}function HE(e){var t=ea(e,2);t!==null&&Ze(t,e,2)}function zf(e){var t=ke();if(typeof e=="function"){var n=e;if(e=n(),Ds){xi(!0);try{n()}finally{xi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:e},t}function GE(e,t,n,i){return e.baseState=n,gm(e,vt,typeof i=="function"?i:ni)}function Tw(e,t,n,i,s){if(Dc(e))throw Error(U(485));if(e=t.action,e!==null){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};W.T!==null?n(!0):r.isTransition=!1,i(r),n=t.pending,n===null?(r.next=t.pending=r,FE(t,r)):(r.next=n.next,t.pending=n.next=r)}}function FE(e,t){var n=t.action,i=t.payload,s=e.state;if(t.isTransition){var r=W.T,a={};W.T=a;try{var l=n(s,i),u=W.S;u!==null&&u(a,l),ly(e,t,l)}catch(h){Bf(e,t,h)}finally{W.T=r}}else try{r=n(s,i),ly(e,t,r)}catch(h){Bf(e,t,h)}}function ly(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){uy(e,t,i)},function(i){return Bf(e,t,i)}):uy(e,t,n)}function uy(e,t,n){t.status="fulfilled",t.value=n,QE(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,FE(e,n)))}function Bf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,QE(t),t=t.next;while(t!==i)}e.action=null}function QE(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function $E(e,t){return t}function cy(e,t){if(ft){var n=wt.formState;if(n!==null){t:{var i=nt;if(ft){if(jt){e:{for(var s=jt,r=wn;s.nodeType!==8;){if(!r){s=null;break e}if(s=pn(s.nextSibling),s===null){s=null;break e}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){jt=pn(s.nextSibling),i=s.data==="F!";break t}}Cs(i)}i=!1}i&&(t=n[0])}}return n=ke(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$E,lastRenderedState:t},n.queue=i,n=uT.bind(null,nt,i),i.dispatch=n,i=zf(!1),r=vm.bind(null,nt,!1,i.queue),i=ke(),s={state:t,dispatch:null,action:e,pending:null},i.queue=s,n=Tw.bind(null,nt,s,r,n),s.dispatch=n,i.memoizedState=e,[t,n,!1]}function hy(e){var t=Yt();return YE(t,vt,e)}function YE(e,t,n){if(t=gm(e,t,$E)[0],e=ru(ni)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Yo(t)}catch(a){throw a===$o?Ic:a}else i=t;t=Yt();var s=t.queue,r=s.dispatch;return n!==t.memoizedState&&(nt.flags|=2048,jr(9,Nc(),Aw.bind(null,s,n),null)),[i,r,e]}function Aw(e,t){e.action=t}function fy(e){var t=Yt(),n=vt;if(n!==null)return YE(t,n,e);Yt(),t=t.memoizedState,n=Yt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function jr(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=nt.updateQueue,t===null&&(t=dm(),nt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Nc(){return{destroy:void 0,resource:void 0}}function KE(){return Yt().memoizedState}function au(e,t,n,i){var s=ke();i=i===void 0?null:i,nt.flags|=e,s.memoizedState=jr(1|t,Nc(),n,i)}function Ko(e,t,n,i){var s=Yt();i=i===void 0?null:i;var r=s.memoizedState.inst;vt!==null&&i!==null&&lm(i,vt.memoizedState.deps)?s.memoizedState=jr(t,r,n,i):(nt.flags|=e,s.memoizedState=jr(1|t,r,n,i))}function dy(e,t){au(8390656,8,e,t)}function XE(e,t){Ko(2048,8,e,t)}function ZE(e,t){return Ko(4,2,e,t)}function WE(e,t){return Ko(4,4,e,t)}function JE(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tT(e,t,n){n=n!=null?n.concat([e]):null,Ko(4,4,JE.bind(null,t,e),n)}function pm(){}function eT(e,t){var n=Yt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&lm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function nT(e,t){var n=Yt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&lm(t,i[1]))return i[0];if(i=e(),Ds){xi(!0);try{e()}finally{xi(!1)}}return n.memoizedState=[i,t],i}function ym(e,t,n){return n===void 0||Zi&1073741824?e.memoizedState=t:(e.memoizedState=n,e=QT(),nt.lanes|=e,Ji|=e,n)}function iT(e,t,n,i){return tn(n,t)?n:Lr.current!==null?(e=ym(e,n,i),tn(e,t)||(se=!0),e):Zi&42?(e=QT(),nt.lanes|=e,Ji|=e,t):(se=!0,e.memoizedState=n)}function sT(e,t,n,i,s){var r=dt.p;dt.p=r!==0&&8>r?r:8;var a=W.T,l={};W.T=l,vm(e,!1,t,n);try{var u=s(),h=W.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=_w(u,i);to(e,t,d,Xe(e))}else to(e,t,i,Xe(e))}catch(g){to(e,t,{then:function(){},status:"rejected",reason:g},Xe())}finally{dt.p=r,W.T=a}}function Sw(){}function qf(e,t,n,i){if(e.tag!==5)throw Error(U(476));var s=rT(e).queue;sT(e,s,t,Ts,n===null?Sw:function(){return aT(e),n(i)})}function rT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ts,baseState:Ts,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:Ts},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function aT(e){var t=rT(e).next.queue;to(e,t,{},Xe())}function _m(){return Se(bo)}function oT(){return Yt().memoizedState}function lT(){return Yt().memoizedState}function bw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Xe();e=Ui(n);var i=Li(t,e,n);i!==null&&(Ze(i,t,n),Za(i,t,n)),t={cache:sm()},e.payload=t;return}t=t.return}}function ww(e,t,n){var i=Xe();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Dc(e)?cT(t,n):(n=tm(e,t,n,i),n!==null&&(Ze(n,e,i),hT(n,t,i)))}function uT(e,t,n){var i=Xe();to(e,t,n,i)}function to(e,t,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dc(e))cT(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var a=t.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,tn(l,a))return Rc(e,t,s,0),wt===null&&wc(),!1}catch{}finally{}if(n=tm(e,t,s,i),n!==null)return Ze(n,e,i),hT(n,t,i),!0}return!1}function vm(e,t,n,i){if(i={lane:2,revertLane:Im(),action:i,hasEagerState:!1,eagerState:null,next:null},Dc(e)){if(t)throw Error(U(479))}else t=tm(e,n,i,2),t!==null&&Ze(t,e,2)}function Dc(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function cT(e,t){wr=Vu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,eE(e,n)}}var ku={readContext:Se,use:Cc,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt},fT={readContext:Se,use:Cc,useCallback:function(e,t){return ke().memoizedState=[e,t===void 0?null:t],e},useContext:Se,useEffect:dy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,au(4194308,4,JE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return au(4194308,4,e,t)},useInsertionEffect:function(e,t){au(4,2,e,t)},useMemo:function(e,t){var n=ke();t=t===void 0?null:t;var i=e();if(Ds){xi(!0);try{e()}finally{xi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ke();if(n!==void 0){var s=n(t);if(Ds){xi(!0);try{n(t)}finally{xi(!1)}}}else s=t;return i.memoizedState=i.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},i.queue=e,e=e.dispatch=ww.bind(null,nt,e),[i.memoizedState,e]},useRef:function(e){var t=ke();return e={current:e},t.memoizedState=e},useState:function(e){e=zf(e);var t=e.queue,n=uT.bind(null,nt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:pm,useDeferredValue:function(e,t){var n=ke();return ym(n,e,t)},useTransition:function(){var e=zf(!1);return e=sT.bind(null,nt,e.queue,!0,!1),ke().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=nt,s=ke();if(ft){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),wt===null)throw Error(U(349));ut&124||jE(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,dy(BE.bind(null,i,r,e),[e]),i.flags|=2048,jr(9,Nc(),zE.bind(null,i,r,n,t),null),n},useId:function(){var e=ke(),t=wt.identifierPrefix;if(ft){var n=$n,i=Qn;n=(i&~(1<<32-Ke(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=Mu++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=vw++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:_m,useFormState:cy,useActionState:cy,useOptimistic:function(e){var t=ke();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=vm.bind(null,nt,!0,n),n.dispatch=t,[e,t]},useMemoCache:mm,useCacheRefresh:function(){return ke().memoizedState=bw.bind(null,nt)}},dT={readContext:Se,use:Cc,useCallback:eT,useContext:Se,useEffect:XE,useImperativeHandle:tT,useInsertionEffect:ZE,useLayoutEffect:WE,useMemo:nT,useReducer:ru,useRef:KE,useState:function(){return ru(ni)},useDebugValue:pm,useDeferredValue:function(e,t){var n=Yt();return iT(n,vt.memoizedState,e,t)},useTransition:function(){var e=ru(ni)[0],t=Yt().memoizedState;return[typeof e=="boolean"?e:Yo(e),t]},useSyncExternalStore:LE,useId:oT,useHostTransitionStatus:_m,useFormState:hy,useActionState:hy,useOptimistic:function(e,t){var n=Yt();return GE(n,vt,e,t)},useMemoCache:mm,useCacheRefresh:lT},Rw={readContext:Se,use:Cc,useCallback:eT,useContext:Se,useEffect:XE,useImperativeHandle:tT,useInsertionEffect:ZE,useLayoutEffect:WE,useMemo:nT,useReducer:Lh,useRef:KE,useState:function(){return Lh(ni)},useDebugValue:pm,useDeferredValue:function(e,t){var n=Yt();return vt===null?ym(n,e,t):iT(n,vt.memoizedState,e,t)},useTransition:function(){var e=Lh(ni)[0],t=Yt().memoizedState;return[typeof e=="boolean"?e:Yo(e),t]},useSyncExternalStore:LE,useId:oT,useHostTransitionStatus:_m,useFormState:fy,useActionState:fy,useOptimistic:function(e,t){var n=Yt();return vt!==null?GE(n,vt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:mm,useCacheRefresh:lT},Ir=null,Eo=0;function zl(e){var t=Eo;return Eo+=1,Ir===null&&(Ir=[]),VE(Ir,e,t)}function Va(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Bl(e,t){throw t.$$typeof===nb?Error(U(525)):(e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function my(e){var t=e._init;return t(e._payload)}function mT(e){function t(S,v){if(e){var w=S.deletions;w===null?(S.deletions=[v],S.flags|=16):w.push(v)}}function n(S,v){if(!e)return null;for(;v!==null;)t(S,v),v=v.sibling;return null}function i(S){for(var v=new Map;S!==null;)S.key!==null?v.set(S.key,S):v.set(S.index,S),S=S.sibling;return v}function s(S,v){return S=Wn(S,v),S.index=0,S.sibling=null,S}function r(S,v,w){return S.index=w,e?(w=S.alternate,w!==null?(w=w.index,w<v?(S.flags|=67108866,v):w):(S.flags|=67108866,v)):(S.flags|=1048576,v)}function a(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function l(S,v,w,x){return v===null||v.tag!==6?(v=kh(w,S.mode,x),v.return=S,v):(v=s(v,w),v.return=S,v)}function u(S,v,w,x){var L=w.type;return L===or?d(S,v,w.props.children,x,w.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ti&&my(L)===v.type)?(v=s(v,w.props),Va(v,w),v.return=S,v):(v=iu(w.type,w.key,w.props,null,S.mode,x),Va(v,w),v.return=S,v)}function h(S,v,w,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Ph(w,S.mode,x),v.return=S,v):(v=s(v,w.children||[]),v.return=S,v)}function d(S,v,w,x,L){return v===null||v.tag!==7?(v=As(w,S.mode,x,L),v.return=S,v):(v=s(v,w),v.return=S,v)}function g(S,v,w){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=kh(""+v,S.mode,w),v.return=S,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Vl:return w=iu(v.type,v.key,v.props,null,S.mode,w),Va(w,v),w.return=S,w;case Ua:return v=Ph(v,S.mode,w),v.return=S,v;case Ti:var x=v._init;return v=x(v._payload),g(S,v,w)}if(La(v)||Na(v))return v=As(v,S.mode,w,null),v.return=S,v;if(typeof v.then=="function")return g(S,zl(v),w);if(v.$$typeof===Fn)return g(S,Ll(S,v),w);Bl(S,v)}return null}function m(S,v,w,x){var L=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return L!==null?null:l(S,v,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vl:return w.key===L?u(S,v,w,x):null;case Ua:return w.key===L?h(S,v,w,x):null;case Ti:return L=w._init,w=L(w._payload),m(S,v,w,x)}if(La(w)||Na(w))return L!==null?null:d(S,v,w,x,null);if(typeof w.then=="function")return m(S,v,zl(w),x);if(w.$$typeof===Fn)return m(S,v,Ll(S,w),x);Bl(S,w)}return null}function y(S,v,w,x,L){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return S=S.get(w)||null,l(v,S,""+x,L);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Vl:return S=S.get(x.key===null?w:x.key)||null,u(v,S,x,L);case Ua:return S=S.get(x.key===null?w:x.key)||null,h(v,S,x,L);case Ti:var q=x._init;return x=q(x._payload),y(S,v,w,x,L)}if(La(x)||Na(x))return S=S.get(w)||null,d(v,S,x,L,null);if(typeof x.then=="function")return y(S,v,w,zl(x),L);if(x.$$typeof===Fn)return y(S,v,w,Ll(v,x),L);Bl(v,x)}return null}function D(S,v,w,x){for(var L=null,q=null,T=v,_=v=0,A=null;T!==null&&_<w.length;_++){T.index>_?(A=T,T=null):A=T.sibling;var b=m(S,T,w[_],x);if(b===null){T===null&&(T=A);break}e&&T&&b.alternate===null&&t(S,T),v=r(b,v,_),q===null?L=b:q.sibling=b,q=b,T=A}if(_===w.length)return n(S,T),ft&&ys(S,_),L;if(T===null){for(;_<w.length;_++)T=g(S,w[_],x),T!==null&&(v=r(T,v,_),q===null?L=T:q.sibling=T,q=T);return ft&&ys(S,_),L}for(T=i(T);_<w.length;_++)A=y(T,S,_,w[_],x),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?_:A.key),v=r(A,v,_),q===null?L=A:q.sibling=A,q=A);return e&&T.forEach(function(I){return t(S,I)}),ft&&ys(S,_),L}function O(S,v,w,x){if(w==null)throw Error(U(151));for(var L=null,q=null,T=v,_=v=0,A=null,b=w.next();T!==null&&!b.done;_++,b=w.next()){T.index>_?(A=T,T=null):A=T.sibling;var I=m(S,T,b.value,x);if(I===null){T===null&&(T=A);break}e&&T&&I.alternate===null&&t(S,T),v=r(I,v,_),q===null?L=I:q.sibling=I,q=I,T=A}if(b.done)return n(S,T),ft&&ys(S,_),L;if(T===null){for(;!b.done;_++,b=w.next())b=g(S,b.value,x),b!==null&&(v=r(b,v,_),q===null?L=b:q.sibling=b,q=b);return ft&&ys(S,_),L}for(T=i(T);!b.done;_++,b=w.next())b=y(T,S,_,b.value,x),b!==null&&(e&&b.alternate!==null&&T.delete(b.key===null?_:b.key),v=r(b,v,_),q===null?L=b:q.sibling=b,q=b);return e&&T.forEach(function(C){return t(S,C)}),ft&&ys(S,_),L}function M(S,v,w,x){if(typeof w=="object"&&w!==null&&w.type===or&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Vl:t:{for(var L=w.key;v!==null;){if(v.key===L){if(L=w.type,L===or){if(v.tag===7){n(S,v.sibling),x=s(v,w.props.children),x.return=S,S=x;break t}}else if(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ti&&my(L)===v.type){n(S,v.sibling),x=s(v,w.props),Va(x,w),x.return=S,S=x;break t}n(S,v);break}else t(S,v);v=v.sibling}w.type===or?(x=As(w.props.children,S.mode,x,w.key),x.return=S,S=x):(x=iu(w.type,w.key,w.props,null,S.mode,x),Va(x,w),x.return=S,S=x)}return a(S);case Ua:t:{for(L=w.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(S,v.sibling),x=s(v,w.children||[]),x.return=S,S=x;break t}else{n(S,v);break}else t(S,v);v=v.sibling}x=Ph(w,S.mode,x),x.return=S,S=x}return a(S);case Ti:return L=w._init,w=L(w._payload),M(S,v,w,x)}if(La(w))return D(S,v,w,x);if(Na(w)){if(L=Na(w),typeof L!="function")throw Error(U(150));return w=L.call(w),O(S,v,w,x)}if(typeof w.then=="function")return M(S,v,zl(w),x);if(w.$$typeof===Fn)return M(S,v,Ll(S,w),x);Bl(S,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,v!==null&&v.tag===6?(n(S,v.sibling),x=s(v,w),x.return=S,S=x):(n(S,v),x=kh(w,S.mode,x),x.return=S,S=x),a(S)):n(S,v)}return function(S,v,w,x){try{Eo=0;var L=M(S,v,w,x);return Ir=null,L}catch(T){if(T===$o||T===Ic)throw T;var q=Fe(29,T,null,S.mode);return q.lanes=x,q.return=S,q}finally{}}}var zr=mT(!0),gT=mT(!1),cn=Un(null),Nn=null;function bi(e){var t=e.alternate;Mt(Xt,Xt.current&1),Mt(cn,e),Nn===null&&(t===null||Lr.current!==null||t.memoizedState!==null)&&(Nn=e)}function pT(e){if(e.tag===22){if(Mt(Xt,Xt.current),Mt(cn,e),Nn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Nn=e)}}else wi()}function wi(){Mt(Xt,Xt.current),Mt(cn,cn.current)}function Kn(e){re(cn),Nn===e&&(Nn=null),re(Xt)}var Xt=Un(0);function Pu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||rd(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function jh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Dt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Hf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Xe(),s=Ui(i);s.payload=t,n!=null&&(s.callback=n),t=Li(e,s,i),t!==null&&(Ze(t,e,i),Za(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Xe(),s=Ui(i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Li(e,s,i),t!==null&&(Ze(t,e,i),Za(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xe(),i=Ui(n);i.tag=2,t!=null&&(i.callback=t),t=Li(e,i,n),t!==null&&(Ze(t,e,n),Za(t,e,n))}};function gy(e,t,n,i,s,r,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,a):t.prototype&&t.prototype.isPureReactComponent?!yo(n,i)||!yo(s,r):!0}function py(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Hf.enqueueReplaceState(t,t.state,null)}function xs(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Dt({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}var Uu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function yT(e){Uu(e)}function _T(e){console.error(e)}function vT(e){Uu(e)}function Lu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function yy(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Gf(e,t,n){return n=Ui(n),n.tag=3,n.payload={element:null},n.callback=function(){Lu(e,t)},n}function ET(e){return e=Ui(e),e.tag=3,e}function TT(e,t,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;e.payload=function(){return s(r)},e.callback=function(){yy(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){yy(t,n,i),typeof s!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Iw(e,t,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Fo(t,n,s,!0),n=cn.current,n!==null){switch(n.tag){case 13:return Nn===null?Wf():n.alternate===null&&zt===0&&(zt=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===Pf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Xh(e,i,s)),!1;case 22:return n.flags|=65536,i===Pf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Xh(e,i,s)),!1}throw Error(U(435,n.tag))}return Xh(e,i,s),Wf(),!1}if(ft)return t=cn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==xf&&(e=Error(U(422),{cause:i}),_o(ln(e,n)))):(i!==xf&&(t=Error(U(423),{cause:i}),_o(ln(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,i=ln(i,n),s=Gf(e.stateNode,i,s),Uh(e,s),zt!==4&&(zt=2)),!1;var r=Error(U(520),{cause:i});if(r=ln(r,n),io===null?io=[r]:io.push(r),zt!==4&&(zt=2),t===null)return!0;i=ln(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=Gf(n.stateNode,i,e),Uh(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(ji===null||!ji.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=ET(s),TT(s,e,n,i),Uh(n,s),!1}n=n.return}while(n!==null);return!1}var AT=Error(U(461)),se=!1;function ce(e,t,n,i){t.child=e===null?gT(t,null,n,i):zr(t,e.child,n,i)}function _y(e,t,n,i,s){n=n.render;var r=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Ns(t),i=um(e,t,n,a,r,s),l=cm(),e!==null&&!se?(hm(e,t,s),ii(e,t,s)):(ft&&l&&nm(t),t.flags|=1,ce(e,t,i,s),t.child)}function vy(e,t,n,i,s){if(e===null){var r=n.type;return typeof r=="function"&&!em(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,ST(e,t,r,i,s)):(e=iu(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Em(e,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:yo,n(a,i)&&e.ref===t.ref)return ii(e,t,s)}return t.flags|=1,e=Wn(r,i),e.ref=t.ref,e.return=t,t.child=e}function ST(e,t,n,i,s){if(e!==null){var r=e.memoizedProps;if(yo(r,i)&&e.ref===t.ref)if(se=!1,t.pendingProps=i=r,Em(e,s))e.flags&131072&&(se=!0);else return t.lanes=e.lanes,ii(e,t,s)}return Ff(e,t,n,i,s)}function bT(e,t,n){var i=t.pendingProps,s=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=r!==null?r.baseLanes|n:n,e!==null){for(s=t.child=e.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~i}else t.childLanes=0,t.child=null;return Ey(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&su(t,r!==null?r.cachePool:null),r!==null?oy(t,r):jf(),pT(t);else return t.lanes=t.childLanes=536870912,Ey(e,t,r!==null?r.baseLanes|n:n,n)}else r!==null?(su(t,r.cachePool),oy(t,r),wi(),t.memoizedState=null):(e!==null&&su(t,null),jf(),wi());return ce(e,t,s,n),t.child}function Ey(e,t,n,i){var s=rm();return s=s===null?null:{parent:Kt._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&su(t,null),jf(),pT(t),e!==null&&Fo(e,t,i,!0),null}function ou(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Ff(e,t,n,i,s){return Ns(t),n=um(e,t,n,i,void 0,s),i=cm(),e!==null&&!se?(hm(e,t,s),ii(e,t,s)):(ft&&i&&nm(t),t.flags|=1,ce(e,t,n,s),t.child)}function Ty(e,t,n,i,s,r){return Ns(t),t.updateQueue=null,n=UE(t,i,n,s),PE(e),i=cm(),e!==null&&!se?(hm(e,t,r),ii(e,t,r)):(ft&&i&&nm(t),t.flags|=1,ce(e,t,n,r),t.child)}function Ay(e,t,n,i,s){if(Ns(t),t.stateNode===null){var r=gr,a=n.contextType;typeof a=="object"&&a!==null&&(r=Se(a)),r=new n(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Hf,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},am(t),a=n.contextType,r.context=typeof a=="object"&&a!==null?Se(a):gr,r.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(jh(t,n,a,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&Hf.enqueueReplaceState(r,r.state,null),Ja(t,i,r,s),Wa(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var l=t.memoizedProps,u=xs(n,l);r.props=u;var h=r.context,d=n.contextType;a=gr,typeof d=="object"&&d!==null&&(a=Se(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||h!==a)&&py(t,r,i,a),Ai=!1;var m=t.memoizedState;r.state=m,Ja(t,i,r,s),Wa(),h=t.memoizedState,l||m!==h||Ai?(typeof g=="function"&&(jh(t,n,g,i),h=t.memoizedState),(u=Ai||gy(t,n,u,i,m,h,a))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),r.props=i,r.state=h,r.context=a,i=u):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,Uf(e,t),a=t.memoizedProps,d=xs(n,a),r.props=d,g=t.pendingProps,m=r.context,h=n.contextType,u=gr,typeof h=="object"&&h!==null&&(u=Se(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==g||m!==u)&&py(t,r,i,u),Ai=!1,m=t.memoizedState,r.state=m,Ja(t,i,r,s),Wa();var y=t.memoizedState;a!==g||m!==y||Ai||e!==null&&e.dependencies!==null&&xu(e.dependencies)?(typeof l=="function"&&(jh(t,n,l,i),y=t.memoizedState),(d=Ai||gy(t,n,d,i,m,y,u)||e!==null&&e.dependencies!==null&&xu(e.dependencies))?(h||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,y,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,y,u)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=y),r.props=i,r.state=y,r.context=u,i=d):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,ou(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=zr(t,e.child,null,s),t.child=zr(t,null,n,s)):ce(e,t,n,s),t.memoizedState=r.state,e=t.child):e=ii(e,t,s),e}function Sy(e,t,n,i){return Go(),t.flags|=256,ce(e,t,n,i),t.child}var zh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bh(e){return{baseLanes:e,cachePool:xE()}}function qh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=un),e}function wT(e,t,n){var i=t.pendingProps,s=!1,r=(t.flags&128)!==0,a;if((a=r)||(a=e!==null&&e.memoizedState===null?!1:(Xt.current&2)!==0),a&&(s=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(ft){if(s?bi(t):wi(),ft){var l=jt,u;if(u=l){t:{for(u=l,l=wn;u.nodeType!==8;){if(!l){l=null;break t}if(u=pn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Ss!==null?{id:Qn,overflow:$n}:null,retryLane:536870912,hydrationErrors:null},u=Fe(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,xe=t,jt=null,u=!0):u=!1}u||Cs(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return rd(l)?t.lanes=32:t.lanes=536870912,null;Kn(t)}return l=i.children,i=i.fallback,s?(wi(),s=t.mode,l=ju({mode:"hidden",children:l},s),i=As(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,s=t.child,s.memoizedState=Bh(n),s.childLanes=qh(e,a,n),t.memoizedState=zh,i):(bi(t),Qf(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(r)t.flags&256?(bi(t),t.flags&=-257,t=Hh(e,t,n)):t.memoizedState!==null?(wi(),t.child=e.child,t.flags|=128,t=null):(wi(),s=i.fallback,l=t.mode,i=ju({mode:"visible",children:i.children},l),s=As(s,l,n,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,zr(t,e.child,null,n),i=t.child,i.memoizedState=Bh(n),i.childLanes=qh(e,a,n),t.memoizedState=zh,t=s);else if(bi(t),rd(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(U(419)),i.stack="",i.digest=a,_o({value:i,source:null,stack:null}),t=Hh(e,t,n)}else if(se||Fo(e,t,n,!1),a=(n&e.childLanes)!==0,se||a){if(a=wt,a!==null&&(i=n&-n,i=i&42?1:Gd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,ea(e,i),Ze(a,e,i),AT;l.data==="$?"||Wf(),t=Hh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,jt=pn(l.nextSibling),xe=t,ft=!0,bs=null,wn=!1,e!==null&&(rn[an++]=Qn,rn[an++]=$n,rn[an++]=Ss,Qn=e.id,$n=e.overflow,Ss=t),t=Qf(t,i.children),t.flags|=4096);return t}return s?(wi(),s=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=Wn(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?s=Wn(h,s):(s=As(s,l,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=e.child.memoizedState,l===null?l=Bh(n):(u=l.cachePool,u!==null?(h=Kt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=xE(),l={baseLanes:l.baseLanes|n,cachePool:u}),s.memoizedState=l,s.childLanes=qh(e,a,n),t.memoizedState=zh,i):(bi(t),n=e.child,e=n.sibling,n=Wn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Qf(e,t){return t=ju({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ju(e,t){return e=Fe(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Hh(e,t,n){return zr(t,e.child,null,n),e=Qf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function by(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Vf(e.return,t,n)}function Gh(e,t,n,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function RT(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(ce(e,t,i.children,n),i=Xt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&by(e,n,t);else if(e.tag===19)by(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Mt(Xt,i),s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Pu(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Gh(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Pu(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Gh(t,!0,n,null,r);break;case"together":Gh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ii(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ji|=t.lanes,!(n&t.childLanes))if(e!==null){if(Fo(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=Wn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Wn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Em(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&xu(e)))}function Cw(e,t,n){switch(t.tag){case 3:Su(t,t.stateNode.containerInfo),Si(t,Kt,e.memoizedState.cache),Go();break;case 27:case 5:Tf(t);break;case 4:Su(t,t.stateNode.containerInfo);break;case 10:Si(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(bi(t),t.flags|=128,null):n&t.child.childLanes?wT(e,t,n):(bi(t),e=ii(e,t,n),e!==null?e.sibling:null);bi(t);break;case 19:var s=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Fo(e,t,n,!1),i=(n&t.childLanes)!==0),s){if(i)return RT(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Mt(Xt,Xt.current),i)break;return null;case 22:case 23:return t.lanes=0,bT(e,t,n);case 24:Si(t,Kt,e.memoizedState.cache)}return ii(e,t,n)}function IT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)se=!0;else{if(!Em(e,n)&&!(t.flags&128))return se=!1,Cw(e,t,n);se=!!(e.flags&131072)}else se=!1,ft&&t.flags&1048576&&NE(t,Du,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,typeof i=="function")em(i)?(e=xs(i,e),t.tag=1,t=Ay(null,t,i,e,n)):(t.tag=0,t=Ff(null,t,i,e,n));else{if(i!=null){if(s=i.$$typeof,s===Bd){t.tag=11,t=_y(null,t,i,e,n);break t}else if(s===qd){t.tag=14,t=vy(null,t,i,e,n);break t}}throw t=vf(i)||i,Error(U(306,t,""))}}return t;case 0:return Ff(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,s=xs(i,t.pendingProps),Ay(e,t,i,s,n);case 3:t:{if(Su(t,t.stateNode.containerInfo),e===null)throw Error(U(387));i=t.pendingProps;var r=t.memoizedState;s=r.element,Uf(e,t),Ja(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Si(t,Kt,i),i!==r.cache&&Mf(t,[Kt],n,!0),Wa(),i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Sy(e,t,i,n);break t}else if(i!==s){s=ln(Error(U(424)),t),_o(s),t=Sy(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(jt=pn(e.firstChild),xe=t,ft=!0,bs=null,wn=!0,n=gT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Go(),i===s){t=ii(e,t,n);break t}ce(e,t,i,n)}t=t.child}return t;case 26:return ou(e,t),e===null?(n=By(t.type,null,t.pendingProps,null))?t.memoizedState=n:ft||(n=t.type,e=t.pendingProps,i=Qu(Pi.current).createElement(n),i[Ae]=t,i[je]=e,ge(i,n,e),ne(i),t.stateNode=i):t.memoizedState=By(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Tf(t),e===null&&ft&&(i=t.stateNode=d0(t.type,t.pendingProps,Pi.current),xe=t,wn=!0,s=jt,ls(t.type)?(ad=s,jt=pn(i.firstChild)):jt=s),ce(e,t,t.pendingProps.children,n),ou(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ft&&((s=i=jt)&&(i=nR(i,t.type,t.pendingProps,wn),i!==null?(t.stateNode=i,xe=t,jt=pn(i.firstChild),wn=!1,s=!0):s=!1),s||Cs(t)),Tf(t),s=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,i=r.children,id(s,r)?i=null:a!==null&&id(s,a)&&(t.flags|=32),t.memoizedState!==null&&(s=um(e,t,Ew,null,null,n),bo._currentValue=s),ou(e,t),ce(e,t,i,n),t.child;case 6:return e===null&&ft&&((e=n=jt)&&(n=iR(n,t.pendingProps,wn),n!==null?(t.stateNode=n,xe=t,jt=null,e=!0):e=!1),e||Cs(t)),null;case 13:return wT(e,t,n);case 4:return Su(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=zr(t,null,i,n):ce(e,t,i,n),t.child;case 11:return _y(e,t,t.type,t.pendingProps,n);case 7:return ce(e,t,t.pendingProps,n),t.child;case 8:return ce(e,t,t.pendingProps.children,n),t.child;case 12:return ce(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Si(t,t.type,i.value),ce(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,Ns(t),s=Se(s),i=i(s),t.flags|=1,ce(e,t,i,n),t.child;case 14:return vy(e,t,t.type,t.pendingProps,n);case 15:return ST(e,t,t.type,t.pendingProps,n);case 19:return RT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=ju(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Wn(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return bT(e,t,n);case 24:return Ns(t),i=Se(Kt),e===null?(s=rm(),s===null&&(s=wt,r=sm(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),t.memoizedState={parent:i,cache:s},am(t),Si(t,Kt,s)):(e.lanes&n&&(Uf(e,t),Ja(t,null,null,n),Wa()),s=e.memoizedState,r=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Si(t,Kt,i)):(i=r.cache,Si(t,Kt,i),i!==s.cache&&Mf(t,[Kt],n,!0))),ce(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(U(156,t.tag))}function qn(e){e.flags|=4}function wy(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!p0(t)){if(t=cn.current,t!==null&&((ut&4194048)===ut?Nn!==null:(ut&62914560)!==ut&&!(ut&536870912)||t!==Nn))throw Xa=Pf,OE;e.flags|=8192}}function ql(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Jv():536870912,e.lanes|=t,Br|=t)}function Ma(e,t){if(!ft)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Nw(e,t,n){var i=t.pendingProps;switch(im(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return kt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Jn(Kt),Mr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Oa(t)?qn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ey())),kt(t),null;case 26:return n=t.memoizedState,e===null?(qn(t),n!==null?(kt(t),wy(t,n)):(kt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(qn(t),kt(t),wy(t,n)):(kt(t),t.flags&=-16777217):(e.memoizedProps!==i&&qn(t),kt(t),t.flags&=-16777217),null;case 27:bu(t),n=Pi.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&qn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return kt(t),null}e=In.current,Oa(t)?Jp(t):(e=d0(s,i,n),t.stateNode=e,qn(t))}return kt(t),null;case 5:if(bu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&qn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return kt(t),null}if(e=In.current,Oa(t))Jp(t);else{switch(s=Qu(Pi.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}e[Ae]=t,e[je]=i;t:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;t:switch(ge(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&qn(t)}}return kt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&qn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(e=Pi.current,Oa(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,s=xe,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}e[Ae]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||c0(e.nodeValue,n)),e||Cs(t)}else e=Qu(e).createTextNode(i),e[Ae]=t,t.stateNode=e}return kt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=Oa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(U(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Ae]=t}else Go(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),s=!1}else s=ey(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Kn(t),t):(Kn(t),null)}if(Kn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),ql(t,t.updateQueue),kt(t),null;case 4:return Mr(),e===null&&Cm(t.stateNode.containerInfo),kt(t),null;case 10:return Jn(t.type),kt(t),null;case 19:if(re(Xt),s=t.memoizedState,s===null)return kt(t),null;if(i=(t.flags&128)!==0,r=s.rendering,r===null)if(i)Ma(s,!1);else{if(zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=Pu(e),r!==null){for(t.flags|=128,Ma(s,!1),e=r.updateQueue,t.updateQueue=e,ql(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)CE(n,e),n=n.sibling;return Mt(Xt,Xt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Cn()>Bu&&(t.flags|=128,i=!0,Ma(s,!1),t.lanes=4194304)}else{if(!i)if(e=Pu(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ql(t,e),Ma(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!ft)return kt(t),null}else 2*Cn()-s.renderingStartTime>Bu&&n!==536870912&&(t.flags|=128,i=!0,Ma(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Cn(),t.sibling=null,e=Xt.current,Mt(Xt,i?e&1|2:e&1),t):(kt(t),null);case 22:case 23:return Kn(t),om(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),n=t.updateQueue,n!==null&&ql(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&re(ws),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Jn(Kt),kt(t),null;case 25:return null;case 30:return null}throw Error(U(156,t.tag))}function Dw(e,t){switch(im(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jn(Kt),Mr(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return bu(t),null;case 13:if(Kn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Go()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return re(Xt),null;case 4:return Mr(),null;case 10:return Jn(t.type),null;case 22:case 23:return Kn(t),om(),e!==null&&re(ws),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Jn(Kt),null;case 25:return null;default:return null}}function CT(e,t){switch(im(t),t.tag){case 3:Jn(Kt),Mr();break;case 26:case 27:case 5:bu(t);break;case 4:Mr();break;case 13:Kn(t);break;case 19:re(Xt);break;case 10:Jn(t.type);break;case 22:case 23:Kn(t),om(),e!==null&&re(ws);break;case 24:Jn(Kt)}}function Xo(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&e)===e){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(l){St(t,t.return,l)}}function Wi(e,t,n){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,s=t;var u=n,h=l;try{h()}catch(d){St(s,u,d)}}}i=i.next}while(i!==r)}}catch(d){St(t,t.return,d)}}function NT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{kE(t,n)}catch(i){St(e,e.return,i)}}}function DT(e,t,n){n.props=xs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){St(e,t,i)}}function eo(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(s){St(e,t,s)}}function Rn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){St(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){St(e,t,s)}else n.current=null}function xT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){St(e,e.return,s)}}function Fh(e,t,n){try{var i=e.stateNode;Zw(i,e.type,n,t),i[je]=t}catch(s){St(e,e.return,s)}}function OT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ls(e.type)||e.tag===4}function Qh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||OT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ls(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $f(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Mc));else if(i!==4&&(i===27&&ls(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for($f(e,t,n),e=e.sibling;e!==null;)$f(e,t,n),e=e.sibling}function zu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&ls(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(zu(e,t,n),e=e.sibling;e!==null;)zu(e,t,n),e=e.sibling}function VT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ge(t,i,n),t[Ae]=e,t[je]=n}catch(r){St(e,e.return,r)}}var Gn=!1,qt=!1,$h=!1,Ry=typeof WeakSet=="function"?WeakSet:Set,ee=null;function xw(e,t){if(e=e.containerInfo,ed=Xu,e=EE(e),Wd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var y;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==r||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(y=g.firstChild)!==null;)m=g,g=y;for(;;){if(g===e)break e;if(m===n&&++h===s&&(l=a),m===r&&++d===i&&(u=a),(y=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},Xu=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){switch(t=ee,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&r!==null){e=void 0,n=t,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var D=xs(n.type,s,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(D,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(O){St(n,n.return,O)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)sd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":sd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(U(163))}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}}function MT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:_i(e,n),i&4&&Xo(5,n);break;case 1:if(_i(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){St(n,n.return,a)}else{var s=xs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){St(n,n.return,a)}}i&64&&NT(n),i&512&&eo(n,n.return);break;case 3:if(_i(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{kE(e,t)}catch(a){St(n,n.return,a)}}break;case 27:t===null&&i&4&&VT(n);case 26:case 5:_i(e,n),t===null&&i&4&&xT(n),i&512&&eo(n,n.return);break;case 12:_i(e,n);break;case 13:_i(e,n),i&4&&UT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=zw.bind(null,n),sR(e,n))));break;case 22:if(i=n.memoizedState!==null||Gn,!i){t=t!==null&&t.memoizedState!==null||qt,s=Gn;var r=qt;Gn=i,(qt=t)&&!r?Ei(e,n,(n.subtreeFlags&8772)!==0):_i(e,n),Gn=s,qt=r}break;case 30:break;default:_i(e,n)}}function kT(e){var t=e.alternate;t!==null&&(e.alternate=null,kT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Qd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ot=null,Pe=!1;function Hn(e,t,n){for(n=n.child;n!==null;)PT(e,t,n),n=n.sibling}function PT(e,t,n){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(jo,n)}catch{}switch(n.tag){case 26:qt||Rn(n,t),Hn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:qt||Rn(n,t);var i=Ot,s=Pe;ls(n.type)&&(Ot=n.stateNode,Pe=!1),Hn(e,t,n),ro(n.stateNode),Ot=i,Pe=s;break;case 5:qt||Rn(n,t);case 6:if(i=Ot,s=Pe,Ot=null,Hn(e,t,n),Ot=i,Pe=s,Ot!==null)if(Pe)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(n.stateNode)}catch(r){St(n,t,r)}else try{Ot.removeChild(n.stateNode)}catch(r){St(n,t,r)}break;case 18:Ot!==null&&(Pe?(e=Ot,Ly(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Io(e)):Ly(Ot,n.stateNode));break;case 4:i=Ot,s=Pe,Ot=n.stateNode.containerInfo,Pe=!0,Hn(e,t,n),Ot=i,Pe=s;break;case 0:case 11:case 14:case 15:qt||Wi(2,n,t),qt||Wi(4,n,t),Hn(e,t,n);break;case 1:qt||(Rn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&DT(n,t,i)),Hn(e,t,n);break;case 21:Hn(e,t,n);break;case 22:qt=(i=qt)||n.memoizedState!==null,Hn(e,t,n),qt=i;break;default:Hn(e,t,n)}}function UT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Io(e)}catch(n){St(t,t.return,n)}}function Ow(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ry),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ry),t;default:throw Error(U(435,e.tag))}}function Yh(e,t){var n=Ow(e);t.forEach(function(i){var s=Bw.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}function qe(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(ls(l.type)){Ot=l.stateNode,Pe=!1;break t}break;case 5:Ot=l.stateNode,Pe=!1;break t;case 3:case 4:Ot=l.stateNode.containerInfo,Pe=!0;break t}l=l.return}if(Ot===null)throw Error(U(160));PT(r,a,s),Ot=null,Pe=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)LT(t,e),t=t.sibling}var dn=null;function LT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:qe(t,e),He(e),i&4&&(Wi(3,e,e.return),Xo(3,e),Wi(5,e,e.return));break;case 1:qe(t,e),He(e),i&512&&(qt||n===null||Rn(n,n.return)),i&64&&Gn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=dn;if(qe(t,e),He(e),i&512&&(qt||n===null||Rn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;e:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[qo]||r[Ae]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),ge(r,i,n),r[Ae]=e,ne(r),i=r;break t;case"link":var a=Hy("link","href",s).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}r=s.createElement(i),ge(r,i,n),s.head.appendChild(r);break;case"meta":if(a=Hy("meta","content",s).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}r=s.createElement(i),ge(r,i,n),s.head.appendChild(r);break;default:throw Error(U(468,i))}r[Ae]=e,ne(r),i=r}e.stateNode=i}else Gy(s,e.type,e.stateNode);else e.stateNode=qy(s,i,e.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?Gy(s,e.type,e.stateNode):qy(s,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Fh(e,e.memoizedProps,n.memoizedProps)}break;case 27:qe(t,e),He(e),i&512&&(qt||n===null||Rn(n,n.return)),n!==null&&i&4&&Fh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(qe(t,e),He(e),i&512&&(qt||n===null||Rn(n,n.return)),e.flags&32){s=e.stateNode;try{Pr(s,"")}catch(y){St(e,e.return,y)}}i&4&&e.stateNode!=null&&(s=e.memoizedProps,Fh(e,s,n!==null?n.memoizedProps:s)),i&1024&&($h=!0);break;case 6:if(qe(t,e),He(e),i&4){if(e.stateNode===null)throw Error(U(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(y){St(e,e.return,y)}}break;case 3:if(cu=null,s=dn,dn=$u(t.containerInfo),qe(t,e),dn=s,He(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Io(t.containerInfo)}catch(y){St(e,e.return,y)}$h&&($h=!1,jT(e));break;case 4:i=dn,dn=$u(e.stateNode.containerInfo),qe(t,e),He(e),dn=i;break;case 12:qe(t,e),He(e);break;case 13:qe(t,e),He(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(wm=Cn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Yh(e,i)));break;case 22:s=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Gn,d=qt;if(Gn=h||s,qt=d||u,qe(t,e),qt=d,Gn=h,He(e),i&8192)t:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(n===null||u||Gn||qt||_s(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(r=u.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(y){St(u,u.return,y)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(y){St(u,u.return,y)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Yh(e,n))));break;case 19:qe(t,e),He(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Yh(e,i)));break;case 30:break;case 21:break;default:qe(t,e),He(e)}}function He(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(OT(i)){n=i;break}i=i.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var s=n.stateNode,r=Qh(e);zu(e,r,s);break;case 5:var a=n.stateNode;n.flags&32&&(Pr(a,""),n.flags&=-33);var l=Qh(e);zu(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Qh(e);$f(e,h,u);break;default:throw Error(U(161))}}catch(d){St(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;jT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function _i(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)MT(e,t.alternate,t),t=t.sibling}function _s(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Wi(4,t,t.return),_s(t);break;case 1:Rn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&DT(t,t.return,n),_s(t);break;case 27:ro(t.stateNode);case 26:case 5:Rn(t,t.return),_s(t);break;case 22:t.memoizedState===null&&_s(t);break;case 30:_s(t);break;default:_s(t)}e=e.sibling}}function Ei(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,s=e,r=t,a=r.flags;switch(r.tag){case 0:case 11:case 15:Ei(s,r,n),Xo(4,r);break;case 1:if(Ei(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(h){St(i,i.return,h)}if(i=r,s=i.updateQueue,s!==null){var l=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)ME(u[s],l)}catch(h){St(i,i.return,h)}}n&&a&64&&NT(r),eo(r,r.return);break;case 27:VT(r);case 26:case 5:Ei(s,r,n),n&&i===null&&a&4&&xT(r),eo(r,r.return);break;case 12:Ei(s,r,n);break;case 13:Ei(s,r,n),n&&a&4&&UT(s,r);break;case 22:r.memoizedState===null&&Ei(s,r,n),eo(r,r.return);break;case 30:break;default:Ei(s,r,n)}t=t.sibling}}function Tm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Qo(n))}function Am(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Qo(e))}function An(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zT(e,t,n,i),t=t.sibling}function zT(e,t,n,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:An(e,t,n,i),s&2048&&Xo(9,t);break;case 1:An(e,t,n,i);break;case 3:An(e,t,n,i),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Qo(e)));break;case 12:if(s&2048){An(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){St(t,t.return,u)}}else An(e,t,n,i);break;case 13:An(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,a=t.alternate,t.memoizedState!==null?r._visibility&2?An(e,t,n,i):no(e,t):r._visibility&2?An(e,t,n,i):(r._visibility|=2,er(e,t,n,i,(t.subtreeFlags&10256)!==0)),s&2048&&Tm(a,t);break;case 24:An(e,t,n,i),s&2048&&Am(t.alternate,t);break;default:An(e,t,n,i)}}function er(e,t,n,i,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:er(r,a,l,u,s),Xo(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?er(r,a,l,u,s):no(r,a):(d._visibility|=2,er(r,a,l,u,s)),s&&h&2048&&Tm(a.alternate,a);break;case 24:er(r,a,l,u,s),s&&h&2048&&Am(a.alternate,a);break;default:er(r,a,l,u,s)}t=t.sibling}}function no(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,s=i.flags;switch(i.tag){case 22:no(n,i),s&2048&&Tm(i.alternate,i);break;case 24:no(n,i),s&2048&&Am(i.alternate,i);break;default:no(n,i)}t=t.sibling}}var za=8192;function Zs(e){if(e.subtreeFlags&za)for(e=e.child;e!==null;)BT(e),e=e.sibling}function BT(e){switch(e.tag){case 26:Zs(e),e.flags&za&&e.memoizedState!==null&&yR(dn,e.memoizedState,e.memoizedProps);break;case 5:Zs(e);break;case 3:case 4:var t=dn;dn=$u(e.stateNode.containerInfo),Zs(e),dn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=za,za=16777216,Zs(e),za=t):Zs(e));break;default:Zs(e)}}function qT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ka(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ee=i,GT(i,e)}qT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)HT(e),e=e.sibling}function HT(e){switch(e.tag){case 0:case 11:case 15:ka(e),e.flags&2048&&Wi(9,e,e.return);break;case 3:ka(e);break;case 12:ka(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,lu(e)):ka(e);break;default:ka(e)}}function lu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ee=i,GT(i,e)}qT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Wi(8,t,t.return),lu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,lu(t));break;default:lu(t)}e=e.sibling}}function GT(e,t){for(;ee!==null;){var n=ee;switch(n.tag){case 0:case 11:case 15:Wi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Qo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ee=i;else t:for(n=e;ee!==null;){i=ee;var s=i.sibling,r=i.return;if(kT(i),i===n){ee=null;break t}if(s!==null){s.return=r,ee=s;break t}ee=r}}}var Vw={getCacheForType:function(e){var t=Se(Kt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Mw=typeof WeakMap=="function"?WeakMap:Map,pt=0,wt=null,st=null,ut=0,gt=0,Ge=null,Vi=!1,na=!1,Sm=!1,si=0,zt=0,Ji=0,Rs=0,bm=0,un=0,Br=0,io=null,Ue=null,Yf=!1,wm=0,Bu=1/0,qu=null,ji=null,fe=0,zi=null,qr=null,Cr=0,Kf=0,Xf=null,FT=null,so=0,Zf=null;function Xe(){if(pt&2&&ut!==0)return ut&-ut;if(W.T!==null){var e=Ur;return e!==0?e:Im()}return nE()}function QT(){un===0&&(un=!(ut&536870912)||ft?Wv():536870912);var e=cn.current;return e!==null&&(e.flags|=32),un}function Ze(e,t,n){(e===wt&&(gt===2||gt===9)||e.cancelPendingCommit!==null)&&(Hr(e,0),Mi(e,ut,un,!1)),Bo(e,n),(!(pt&2)||e!==wt)&&(e===wt&&(!(pt&2)&&(Rs|=n),zt===4&&Mi(e,ut,un,!1)),Ln(e))}function $T(e,t,n){if(pt&6)throw Error(U(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||zo(e,t),s=i?Uw(e,t):Kh(e,t,!0),r=i;do{if(s===0){na&&!i&&Mi(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!kw(n)){s=Kh(e,t,!1),r=!1;continue}if(s===2){if(r=t,e.errorRecoveryDisabledLanes&r)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;s=io;var u=l.current.memoizedState.isDehydrated;if(u&&(Hr(l,a).flags|=256),a=Kh(l,a,!1),a!==2){if(Sm&&!u){l.errorRecoveryDisabledLanes|=r,Rs|=r,s=4;break t}r=Ue,Ue=s,r!==null&&(Ue===null?Ue=r:Ue.push.apply(Ue,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){Hr(e,0),Mi(e,t,0,!0);break}t:{switch(i=e,r=s,r){case 0:case 1:throw Error(U(345));case 4:if((t&4194048)!==t)break;case 6:Mi(i,t,un,!Vi);break t;case 2:Ue=null;break;case 3:case 5:break;default:throw Error(U(329))}if((t&62914560)===t&&(s=wm+300-Cn(),10<s)){if(Mi(i,t,un,!Vi),Tc(i,0,!0)!==0)break t;i.timeoutHandle=f0(Iy.bind(null,i,n,Ue,qu,Yf,t,un,Rs,Br,Vi,r,2,-0,0),s);break t}Iy(i,n,Ue,qu,Yf,t,un,Rs,Br,Vi,r,0,-0,0)}}break}while(!0);Ln(e)}function Iy(e,t,n,i,s,r,a,l,u,h,d,g,m,y){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(So={stylesheets:null,count:0,unsuspend:pR},BT(t),g=_R(),g!==null)){e.cancelPendingCommit=g(Ny.bind(null,e,t,r,n,i,s,a,l,u,d,1,m,y)),Mi(e,r,a,!h);return}Ny(e,t,r,n,i,s,a,l,u)}function kw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!tn(r(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mi(e,t,n,i){t&=~bm,t&=~Rs,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var s=t;0<s;){var r=31-Ke(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&tE(e,n,t)}function xc(){return pt&6?!0:(Zo(0),!1)}function Rm(){if(st!==null){if(gt===0)var e=st.return;else e=st,Yn=zs=null,fm(e),Ir=null,Eo=0,e=st;for(;e!==null;)CT(e.alternate,e),e=e.return;st=null}}function Hr(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Jw(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Rm(),wt=e,st=n=Wn(e.current,null),ut=t,gt=0,Ge=null,Vi=!1,na=zo(e,t),Sm=!1,Br=un=bm=Rs=Ji=zt=0,Ue=io=null,Yf=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var s=31-Ke(i),r=1<<s;t|=e[s],i&=~r}return si=t,wc(),n}function YT(e,t){nt=null,W.H=ku,t===$o||t===Ic?(t=ry(),gt=3):t===OE?(t=ry(),gt=4):gt=t===AT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ge=t,st===null&&(zt=1,Lu(e,ln(t,e.current)))}function KT(){var e=W.H;return W.H=ku,e===null?ku:e}function XT(){var e=W.A;return W.A=Vw,e}function Wf(){zt=4,Vi||(ut&4194048)!==ut&&cn.current!==null||(na=!0),!(Ji&134217727)&&!(Rs&134217727)||wt===null||Mi(wt,ut,un,!1)}function Kh(e,t,n){var i=pt;pt|=2;var s=KT(),r=XT();(wt!==e||ut!==t)&&(qu=null,Hr(e,t)),t=!1;var a=zt;t:do try{if(gt!==0&&st!==null){var l=st,u=Ge;switch(gt){case 8:Rm(),a=6;break t;case 3:case 2:case 9:case 6:cn.current===null&&(t=!0);var h=gt;if(gt=0,Ge=null,_r(e,l,u,h),n&&na){a=0;break t}break;default:h=gt,gt=0,Ge=null,_r(e,l,u,h)}}Pw(),a=zt;break}catch(d){YT(e,d)}while(!0);return t&&e.shellSuspendCounter++,Yn=zs=null,pt=i,W.H=s,W.A=r,st===null&&(wt=null,ut=0,wc()),a}function Pw(){for(;st!==null;)ZT(st)}function Uw(e,t){var n=pt;pt|=2;var i=KT(),s=XT();wt!==e||ut!==t?(qu=null,Bu=Cn()+500,Hr(e,t)):na=zo(e,t);t:do try{if(gt!==0&&st!==null){t=st;var r=Ge;e:switch(gt){case 1:gt=0,Ge=null,_r(e,t,r,1);break;case 2:case 9:if(sy(r)){gt=0,Ge=null,Cy(t);break}t=function(){gt!==2&&gt!==9||wt!==e||(gt=7),Ln(e)},r.then(t,t);break t;case 3:gt=7;break t;case 4:gt=5;break t;case 7:sy(r)?(gt=0,Ge=null,Cy(t)):(gt=0,Ge=null,_r(e,t,r,7));break;case 5:var a=null;switch(st.tag){case 26:a=st.memoizedState;case 5:case 27:var l=st;if(!a||p0(a)){gt=0,Ge=null;var u=l.sibling;if(u!==null)st=u;else{var h=l.return;h!==null?(st=h,Oc(h)):st=null}break e}}gt=0,Ge=null,_r(e,t,r,5);break;case 6:gt=0,Ge=null,_r(e,t,r,6);break;case 8:Rm(),zt=6;break t;default:throw Error(U(462))}}Lw();break}catch(d){YT(e,d)}while(!0);return Yn=zs=null,W.H=i,W.A=s,pt=n,st!==null?0:(wt=null,ut=0,wc(),zt)}function Lw(){for(;st!==null&&!ab();)ZT(st)}function ZT(e){var t=IT(e.alternate,e,si);e.memoizedProps=e.pendingProps,t===null?Oc(e):st=t}function Cy(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ty(n,t,t.pendingProps,t.type,void 0,ut);break;case 11:t=Ty(n,t,t.pendingProps,t.type.render,t.ref,ut);break;case 5:fm(t);default:CT(n,t),t=st=CE(t,si),t=IT(n,t,si)}e.memoizedProps=e.pendingProps,t===null?Oc(e):st=t}function _r(e,t,n,i){Yn=zs=null,fm(t),Ir=null,Eo=0;var s=t.return;try{if(Iw(e,s,t,n,ut)){zt=1,Lu(e,ln(n,e.current)),st=null;return}}catch(r){if(s!==null)throw st=s,r;zt=1,Lu(e,ln(n,e.current)),st=null;return}t.flags&32768?(ft||i===1?e=!0:na||ut&536870912?e=!1:(Vi=e=!0,(i===2||i===9||i===3||i===6)&&(i=cn.current,i!==null&&i.tag===13&&(i.flags|=16384))),WT(t,e)):Oc(t)}function Oc(e){var t=e;do{if(t.flags&32768){WT(t,Vi);return}e=t.return;var n=Nw(t.alternate,t,si);if(n!==null){st=n;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);zt===0&&(zt=5)}function WT(e,t){do{var n=Dw(e.alternate,e);if(n!==null){n.flags&=32767,st=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){st=e;return}st=e=n}while(e!==null);zt=6,st=null}function Ny(e,t,n,i,s,r,a,l,u){e.cancelPendingCommit=null;do Vc();while(fe!==0);if(pt&6)throw Error(U(327));if(t!==null){if(t===e.current)throw Error(U(177));if(r=t.lanes|t.childLanes,r|=Jd,pb(e,n,r,a,l,u),e===wt&&(st=wt=null,ut=0),qr=t,zi=e,Cr=n,Kf=r,Xf=s,FT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,qw(wu,function(){return i0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=W.T,W.T=null,s=dt.p,dt.p=2,a=pt,pt|=4;try{xw(e,t,n)}finally{pt=a,dt.p=s,W.T=i}}fe=1,JT(),t0(),e0()}}function JT(){if(fe===1){fe=0;var e=zi,t=qr,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=W.T,W.T=null;var i=dt.p;dt.p=2;var s=pt;pt|=4;try{LT(t,e);var r=nd,a=EE(e.containerInfo),l=r.focusedElem,u=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&vE(l.ownerDocument.documentElement,l)){if(u!==null&&Wd(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var y=m.getSelection(),D=l.textContent.length,O=Math.min(u.start,D),M=u.end===void 0?O:Math.min(u.end,D);!y.extend&&O>M&&(a=M,M=O,O=a);var S=Xp(l,O),v=Xp(l,M);if(S&&v&&(y.rangeCount!==1||y.anchorNode!==S.node||y.anchorOffset!==S.offset||y.focusNode!==v.node||y.focusOffset!==v.offset)){var w=g.createRange();w.setStart(S.node,S.offset),y.removeAllRanges(),O>M?(y.addRange(w),y.extend(v.node,v.offset)):(w.setEnd(v.node,v.offset),y.addRange(w))}}}}for(g=[],y=l;y=y.parentNode;)y.nodeType===1&&g.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var x=g[l];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}Xu=!!ed,nd=ed=null}finally{pt=s,dt.p=i,W.T=n}}e.current=t,fe=2}}function t0(){if(fe===2){fe=0;var e=zi,t=qr,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=W.T,W.T=null;var i=dt.p;dt.p=2;var s=pt;pt|=4;try{MT(e,t.alternate,t)}finally{pt=s,dt.p=i,W.T=n}}fe=3}}function e0(){if(fe===4||fe===3){fe=0,ob();var e=zi,t=qr,n=Cr,i=FT;t.subtreeFlags&10256||t.flags&10256?fe=5:(fe=0,qr=zi=null,n0(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(ji=null),Fd(n),t=t.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(jo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=W.T,s=dt.p,dt.p=2,W.T=null;try{for(var r=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];r(l.value,{componentStack:l.stack})}}finally{W.T=t,dt.p=s}}Cr&3&&Vc(),Ln(e),s=e.pendingLanes,n&4194090&&s&42?e===Zf?so++:(so=0,Zf=e):so=0,Zo(0)}}function n0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Qo(t)))}function Vc(e){return JT(),t0(),e0(),i0()}function i0(){if(fe!==5)return!1;var e=zi,t=Kf;Kf=0;var n=Fd(Cr),i=W.T,s=dt.p;try{dt.p=32>n?32:n,W.T=null,n=Xf,Xf=null;var r=zi,a=Cr;if(fe=0,qr=zi=null,Cr=0,pt&6)throw Error(U(331));var l=pt;if(pt|=4,HT(r.current),zT(r,r.current,a,n),pt=l,Zo(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(jo,r)}catch{}return!0}finally{dt.p=s,W.T=i,n0(e,t)}}function Dy(e,t,n){t=ln(n,t),t=Gf(e.stateNode,t,2),e=Li(e,t,2),e!==null&&(Bo(e,2),Ln(e))}function St(e,t,n){if(e.tag===3)Dy(e,e,n);else for(;t!==null;){if(t.tag===3){Dy(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ji===null||!ji.has(i))){e=ln(n,e),n=ET(2),i=Li(t,n,2),i!==null&&(TT(n,i,t,e),Bo(i,2),Ln(i));break}}t=t.return}}function Xh(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Mw;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(Sm=!0,s.add(n),e=jw.bind(null,e,t,n),t.then(e,e))}function jw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,wt===e&&(ut&n)===n&&(zt===4||zt===3&&(ut&62914560)===ut&&300>Cn()-wm?!(pt&2)&&Hr(e,0):bm|=n,Br===ut&&(Br=0)),Ln(e)}function s0(e,t){t===0&&(t=Jv()),e=ea(e,t),e!==null&&(Bo(e,t),Ln(e))}function zw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),s0(e,n)}function Bw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(t),s0(e,n)}function qw(e,t){return Hd(e,t)}var Hu=null,nr=null,Jf=!1,Gu=!1,Zh=!1,Is=0;function Ln(e){e!==nr&&e.next===null&&(nr===null?Hu=nr=e:nr=nr.next=e),Gu=!0,Jf||(Jf=!0,Gw())}function Zo(e,t){if(!Zh&&Gu){Zh=!0;do for(var n=!1,i=Hu;i!==null;){if(e!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,l=i.pingedLanes;r=(1<<31-Ke(42|e)+1)-1,r&=s&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,xy(i,r))}else r=ut,r=Tc(i,i===wt?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||zo(i,r)||(n=!0,xy(i,r));i=i.next}while(n);Zh=!1}}function Hw(){r0()}function r0(){Gu=Jf=!1;var e=0;Is!==0&&(Ww()&&(e=Is),Is=0);for(var t=Cn(),n=null,i=Hu;i!==null;){var s=i.next,r=a0(i,t);r===0?(i.next=null,n===null?Hu=s:n.next=s,s===null&&(nr=n)):(n=i,(e!==0||r&3)&&(Gu=!0)),i=s}Zo(e)}function a0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var a=31-Ke(r),l=1<<a,u=s[a];u===-1?(!(l&n)||l&i)&&(s[a]=gb(l,t)):u<=t&&(e.expiredLanes|=l),r&=~l}if(t=wt,n=ut,n=Tc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(gt===2||gt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Sh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||zo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Sh(i),Fd(n)){case 2:case 8:n=Xv;break;case 32:n=wu;break;case 268435456:n=Zv;break;default:n=wu}return i=o0.bind(null,e),n=Hd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Sh(i),e.callbackPriority=2,e.callbackNode=null,2}function o0(e,t){if(fe!==0&&fe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Vc()&&e.callbackNode!==n)return null;var i=ut;return i=Tc(e,e===wt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:($T(e,i,t),a0(e,Cn()),e.callbackNode!=null&&e.callbackNode===n?o0.bind(null,e):null)}function xy(e,t){if(Vc())return null;$T(e,t,!0)}function Gw(){tR(function(){pt&6?Hd(Kv,Hw):r0()})}function Im(){return Is===0&&(Is=Wv()),Is}function Oy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:tu(""+e)}function Vy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Fw(e,t,n,i,s){if(t==="submit"&&n&&n.stateNode===s){var r=Oy((s[je]||null).action),a=i.submitter;a&&(t=(t=a[je]||null)?Oy(t.formAction):a.getAttribute("formAction"),t!==null&&(r=t,a=null));var l=new Ac("action","action",null,i,s);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Is!==0){var u=a?Vy(s,a):new FormData(s);qf(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?Vy(s,a):new FormData(s),qf(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var Wh=0;Wh<Df.length;Wh++){var Jh=Df[Wh],Qw=Jh.toLowerCase(),$w=Jh[0].toUpperCase()+Jh.slice(1);_n(Qw,"on"+$w)}_n(AE,"onAnimationEnd");_n(SE,"onAnimationIteration");_n(bE,"onAnimationStart");_n("dblclick","onDoubleClick");_n("focusin","onFocus");_n("focusout","onBlur");_n(cw,"onTransitionRun");_n(hw,"onTransitionStart");_n(fw,"onTransitionCancel");_n(wE,"onTransitionEnd");kr("onMouseEnter",["mouseout","mouseover"]);kr("onMouseLeave",["mouseout","mouseover"]);kr("onPointerEnter",["pointerout","pointerover"]);kr("onPointerLeave",["pointerout","pointerover"]);Us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Us("onBeforeInput",["compositionend","keypress","textInput","paste"]);Us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(To));function l0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=h;try{r(s)}catch(d){Uu(d)}s.currentTarget=null,r=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=h;try{r(s)}catch(d){Uu(d)}s.currentTarget=null,r=u}}}}function it(e,t){var n=t[Sf];n===void 0&&(n=t[Sf]=new Set);var i=e+"__bubble";n.has(i)||(u0(t,e,2,!1),n.add(i))}function tf(e,t,n){var i=0;t&&(i|=4),u0(n,e,i,t)}var Hl="_reactListening"+Math.random().toString(36).slice(2);function Cm(e){if(!e[Hl]){e[Hl]=!0,iE.forEach(function(n){n!=="selectionchange"&&(Yw.has(n)||tf(n,!1,e),tf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hl]||(t[Hl]=!0,tf("selectionchange",!1,t))}}function u0(e,t,n,i){switch(T0(t)){case 2:var s=TR;break;case 8:s=AR;break;default:s=Om}n=s.bind(null,t,n,e),s=void 0,!If||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ef(e,t,n,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;l!==null;){if(a=ur(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=r=a;continue t}l=l.parentNode}}i=i.return}hE(function(){var h=r,d=Yd(n),g=[];t:{var m=RE.get(e);if(m!==void 0){var y=Ac,D=e;switch(e){case"keypress":if(nu(n)===0)break t;case"keydown":case"keyup":y=qb;break;case"focusin":D="focus",y=xh;break;case"focusout":D="blur",y=xh;break;case"beforeblur":case"afterblur":y=xh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=zp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Db;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Fb;break;case AE:case SE:case bE:y=Vb;break;case wE:y=$b;break;case"scroll":case"scrollend":y=Cb;break;case"wheel":y=Kb;break;case"copy":case"cut":case"paste":y=kb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=qp;break;case"toggle":case"beforetoggle":y=Zb}var O=(t&4)!==0,M=!O&&(e==="scroll"||e==="scrollend"),S=O?m!==null?m+"Capture":null:m;O=[];for(var v=h,w;v!==null;){var x=v;if(w=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||w===null||S===null||(x=go(v,S),x!=null&&O.push(Ao(v,x,w))),M)break;v=v.return}0<O.length&&(m=new y(m,D,null,n,d),g.push({event:m,listeners:O}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&n!==Rf&&(D=n.relatedTarget||n.fromElement)&&(ur(D)||D[Jr]))break t;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(D=n.relatedTarget||n.toElement,y=h,D=D?ur(D):null,D!==null&&(M=Lo(D),O=D.tag,D!==M||O!==5&&O!==27&&O!==6)&&(D=null)):(y=null,D=h),y!==D)){if(O=zp,x="onMouseLeave",S="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(O=qp,x="onPointerLeave",S="onPointerEnter",v="pointer"),M=y==null?m:ja(y),w=D==null?m:ja(D),m=new O(x,v+"leave",y,n,d),m.target=M,m.relatedTarget=w,x=null,ur(d)===h&&(O=new O(S,v+"enter",D,n,d),O.target=w,O.relatedTarget=M,x=O),M=x,y&&D)e:{for(O=y,S=D,v=0,w=O;w;w=Ws(w))v++;for(w=0,x=S;x;x=Ws(x))w++;for(;0<v-w;)O=Ws(O),v--;for(;0<w-v;)S=Ws(S),w--;for(;v--;){if(O===S||S!==null&&O===S.alternate)break e;O=Ws(O),S=Ws(S)}O=null}else O=null;y!==null&&My(g,m,y,O,!1),D!==null&&M!==null&&My(g,M,D,O,!0)}}t:{if(m=h?ja(h):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var L=Qp;else if(Fp(m))if(yE)L=ow;else{L=rw;var q=sw}else y=m.nodeName,!y||y.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&$d(h.elementType)&&(L=Qp):L=aw;if(L&&(L=L(e,h))){pE(g,L,n,d);break t}q&&q(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&wf(m,"number",m.value)}switch(q=h?ja(h):window,e){case"focusin":(Fp(q)||q.contentEditable==="true")&&(fr=q,Cf=h,Ya=null);break;case"focusout":Ya=Cf=fr=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,Zp(g,n,d);break;case"selectionchange":if(uw)break;case"keydown":case"keyup":Zp(g,n,d)}var T;if(Zd)t:{switch(e){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else hr?mE(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(dE&&n.locale!=="ko"&&(hr||_!=="onCompositionStart"?_==="onCompositionEnd"&&hr&&(T=fE()):(Oi=d,Kd="value"in Oi?Oi.value:Oi.textContent,hr=!0)),q=Fu(h,_),0<q.length&&(_=new Bp(_,e,null,n,d),g.push({event:_,listeners:q}),T?_.data=T:(T=gE(n),T!==null&&(_.data=T)))),(T=Jb?tw(e,n):ew(e,n))&&(_=Fu(h,"onBeforeInput"),0<_.length&&(q=new Bp("onBeforeInput","beforeinput",null,n,d),g.push({event:q,listeners:_}),q.data=T)),Fw(g,e,h,n,d)}l0(g,t)})}function Ao(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fu(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=go(e,n),s!=null&&i.unshift(Ao(e,s,r)),s=go(e,t),s!=null&&i.push(Ao(e,s,r))),e.tag===3)return i;e=e.return}return[]}function Ws(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function My(e,t,n,i,s){for(var r=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,s?(h=go(n,r),h!=null&&a.unshift(Ao(n,h,u))):s||(h=go(n,r),h!=null&&a.push(Ao(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Kw=/\r\n?/g,Xw=/\u0000|\uFFFD/g;function ky(e){return(typeof e=="string"?e:""+e).replace(Kw,`
`).replace(Xw,"")}function c0(e,t){return t=ky(t),ky(e)===t}function Mc(){}function _t(e,t,n,i,s,r){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Pr(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Pr(e,""+i);break;case"className":Pl(e,"class",i);break;case"tabIndex":Pl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Pl(e,n,i);break;case"style":cE(e,i,r);break;case"data":if(t!=="object"){Pl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=tu(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&_t(e,t,"name",s.name,s,null),_t(e,t,"formEncType",s.formEncType,s,null),_t(e,t,"formMethod",s.formMethod,s,null),_t(e,t,"formTarget",s.formTarget,s,null)):(_t(e,t,"encType",s.encType,s,null),_t(e,t,"method",s.method,s,null),_t(e,t,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=tu(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Mc);break;case"onScroll":i!=null&&it("scroll",e);break;case"onScrollEnd":i!=null&&it("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=tu(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":it("beforetoggle",e),it("toggle",e),Jl(e,"popover",i);break;case"xlinkActuate":Bn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Bn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Bn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Bn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Bn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Bn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Jl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Rb.get(n)||n,Jl(e,n,i))}}function td(e,t,n,i,s,r){switch(n){case"style":cE(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Pr(e,i):(typeof i=="number"||typeof i=="bigint")&&Pr(e,""+i);break;case"onScroll":i!=null&&it("scroll",e);break;case"onScrollEnd":i!=null&&it("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Mc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sE.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),r=e[je]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Jl(e,n,i)}}}function ge(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",e),it("load",e);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:_t(e,t,r,a,n,null)}}s&&_t(e,t,"srcSet",n.srcSet,n,null),i&&_t(e,t,"src",n.src,n,null);return;case"input":it("invalid",e);var l=r=a=s=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,t));break;default:_t(e,t,i,d,n,null)}}oE(e,r,l,u,h,a,s,!1),Ru(e);return;case"select":it("invalid",e),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:_t(e,t,s,l,n,null)}t=r,n=a,e.multiple=!!i,t!=null?Ar(e,!!i,t,!1):n!=null&&Ar(e,!!i,n,!0);return;case"textarea":it("invalid",e),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:_t(e,t,a,l,n,null)}uE(e,i,s,r),Ru(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:_t(e,t,u,i,n,null)}return;case"dialog":it("beforetoggle",e),it("toggle",e),it("cancel",e),it("close",e);break;case"iframe":case"object":it("load",e);break;case"video":case"audio":for(i=0;i<To.length;i++)it(To[i],e);break;case"image":it("error",e),it("load",e);break;case"details":it("toggle",e);break;case"embed":case"source":case"link":it("error",e),it("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:_t(e,t,h,i,n,null)}return;default:if($d(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&td(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&_t(e,t,l,i,n,null))}function Zw(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,u=null,h=null,d=null;for(y in n){var g=n[y];if(n.hasOwnProperty(y)&&g!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(y)||_t(e,t,y,null,i,g)}}for(var m in i){var y=i[m];if(g=n[m],i.hasOwnProperty(m)&&(y!=null||g!=null))switch(m){case"type":r=y;break;case"name":s=y;break;case"checked":h=y;break;case"defaultChecked":d=y;break;case"value":a=y;break;case"defaultValue":l=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(U(137,t));break;default:y!==g&&_t(e,t,m,y,i,g)}}bf(e,a,l,u,h,d,r,s);return;case"select":y=a=l=m=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":y=u;default:i.hasOwnProperty(r)||_t(e,t,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":m=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&_t(e,t,s,r,i,u)}t=l,n=a,i=y,m!=null?Ar(e,!!n,m,!1):!!i!=!!n&&(t!=null?Ar(e,!!n,t,!0):Ar(e,!!n,n?[]:"",!1));return;case"textarea":y=m=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:_t(e,t,l,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":m=s;break;case"defaultValue":y=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(U(91));break;default:s!==r&&_t(e,t,a,s,i,r)}lE(e,m,y);return;case"option":for(var D in n)if(m=n[D],n.hasOwnProperty(D)&&m!=null&&!i.hasOwnProperty(D))switch(D){case"selected":e.selected=!1;break;default:_t(e,t,D,null,i,m)}for(u in i)if(m=i[u],y=n[u],i.hasOwnProperty(u)&&m!==y&&(m!=null||y!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:_t(e,t,u,m,i,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)m=n[O],n.hasOwnProperty(O)&&m!=null&&!i.hasOwnProperty(O)&&_t(e,t,O,null,i,m);for(h in i)if(m=i[h],y=n[h],i.hasOwnProperty(h)&&m!==y&&(m!=null||y!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,t));break;default:_t(e,t,h,m,i,y)}return;default:if($d(t)){for(var M in n)m=n[M],n.hasOwnProperty(M)&&m!==void 0&&!i.hasOwnProperty(M)&&td(e,t,M,void 0,i,m);for(d in i)m=i[d],y=n[d],!i.hasOwnProperty(d)||m===y||m===void 0&&y===void 0||td(e,t,d,m,i,y);return}}for(var S in n)m=n[S],n.hasOwnProperty(S)&&m!=null&&!i.hasOwnProperty(S)&&_t(e,t,S,null,i,m);for(g in i)m=i[g],y=n[g],!i.hasOwnProperty(g)||m===y||m==null&&y==null||_t(e,t,g,m,i,y)}var ed=null,nd=null;function Qu(e){return e.nodeType===9?e:e.ownerDocument}function Py(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function id(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nf=null;function Ww(){var e=window.event;return e&&e.type==="popstate"?e===nf?!1:(nf=e,!0):(nf=null,!1)}var f0=typeof setTimeout=="function"?setTimeout:void 0,Jw=typeof clearTimeout=="function"?clearTimeout:void 0,Uy=typeof Promise=="function"?Promise:void 0,tR=typeof queueMicrotask=="function"?queueMicrotask:typeof Uy<"u"?function(e){return Uy.resolve(null).then(e).catch(eR)}:f0;function eR(e){setTimeout(function(){throw e})}function ls(e){return e==="head"}function Ly(e,t){var n=t,i=0,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&ro(a.documentElement),n&2&&ro(a.body),n&4)for(n=a.head,ro(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[qo]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(s===0){e.removeChild(r),Io(t);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);Io(t)}function sd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":sd(n),Qd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function nR(e,t,n,i){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[qo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=pn(e.nextSibling),e===null)break}return null}function iR(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=pn(e.nextSibling),e===null))return null;return e}function rd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function sR(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var ad=null;function jy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function d0(e,t,n){switch(t=Qu(n),e){case"html":if(e=t.documentElement,!e)throw Error(U(452));return e;case"head":if(e=t.head,!e)throw Error(U(453));return e;case"body":if(e=t.body,!e)throw Error(U(454));return e;default:throw Error(U(451))}}function ro(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Qd(e)}var hn=new Map,zy=new Set;function $u(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var hi=dt.d;dt.d={f:rR,r:aR,D:oR,C:lR,L:uR,m:cR,X:fR,S:hR,M:dR};function rR(){var e=hi.f(),t=xc();return e||t}function aR(e){var t=ta(e);t!==null&&t.tag===5&&t.type==="form"?aT(t):hi.r(e)}var ia=typeof document>"u"?null:document;function m0(e,t,n){var i=ia;if(i&&typeof t=="string"&&t){var s=on(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),zy.has(s)||(zy.add(s),e={rel:e,crossOrigin:n,href:t},i.querySelector(s)===null&&(t=i.createElement("link"),ge(t,"link",e),ne(t),i.head.appendChild(t)))}}function oR(e){hi.D(e),m0("dns-prefetch",e,null)}function lR(e,t){hi.C(e,t),m0("preconnect",e,t)}function uR(e,t,n){hi.L(e,t,n);var i=ia;if(i&&e&&t){var s='link[rel="preload"][as="'+on(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+on(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+on(n.imageSizes)+'"]')):s+='[href="'+on(e)+'"]';var r=s;switch(t){case"style":r=Gr(e);break;case"script":r=sa(e)}hn.has(r)||(e=Dt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),hn.set(r,e),i.querySelector(s)!==null||t==="style"&&i.querySelector(Wo(r))||t==="script"&&i.querySelector(Jo(r))||(t=i.createElement("link"),ge(t,"link",e),ne(t),i.head.appendChild(t)))}}function cR(e,t){hi.m(e,t);var n=ia;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+on(i)+'"][href="'+on(e)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=sa(e)}if(!hn.has(r)&&(e=Dt({rel:"modulepreload",href:e},t),hn.set(r,e),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Jo(r)))return}i=n.createElement("link"),ge(i,"link",e),ne(i),n.head.appendChild(i)}}}function hR(e,t,n){hi.S(e,t,n);var i=ia;if(i&&e){var s=Tr(i).hoistableStyles,r=Gr(e);t=t||"default";var a=s.get(r);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Wo(r)))l.loading=5;else{e=Dt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=hn.get(r))&&Nm(e,n);var u=a=i.createElement("link");ne(u),ge(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,uu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},s.set(r,a)}}}function fR(e,t){hi.X(e,t);var n=ia;if(n&&e){var i=Tr(n).hoistableScripts,s=sa(e),r=i.get(s);r||(r=n.querySelector(Jo(s)),r||(e=Dt({src:e,async:!0},t),(t=hn.get(s))&&Dm(e,t),r=n.createElement("script"),ne(r),ge(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function dR(e,t){hi.M(e,t);var n=ia;if(n&&e){var i=Tr(n).hoistableScripts,s=sa(e),r=i.get(s);r||(r=n.querySelector(Jo(s)),r||(e=Dt({src:e,async:!0,type:"module"},t),(t=hn.get(s))&&Dm(e,t),r=n.createElement("script"),ne(r),ge(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function By(e,t,n,i){var s=(s=Pi.current)?$u(s):null;if(!s)throw Error(U(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Gr(n.href),n=Tr(s).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Gr(n.href);var r=Tr(s).hoistableStyles,a=r.get(e);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,a),(r=s.querySelector(Wo(e)))&&!r._p&&(a.instance=r,a.state.loading=5),hn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},hn.set(e,n),r||mR(s,e,n,a.state))),t&&i===null)throw Error(U(528,""));return a}if(t&&i!==null)throw Error(U(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=sa(n),n=Tr(s).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,e))}}function Gr(e){return'href="'+on(e)+'"'}function Wo(e){return'link[rel="stylesheet"]['+e+"]"}function g0(e){return Dt({},e,{"data-precedence":e.precedence,precedence:null})}function mR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),ge(t,"link",n),ne(t),e.head.appendChild(t))}function sa(e){return'[src="'+on(e)+'"]'}function Jo(e){return"script[async]"+e}function qy(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+on(n.href)+'"]');if(i)return t.instance=i,ne(i),i;var s=Dt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ne(i),ge(i,"style",s),uu(i,n.precedence,e),t.instance=i;case"stylesheet":s=Gr(n.href);var r=e.querySelector(Wo(s));if(r)return t.state.loading|=4,t.instance=r,ne(r),r;i=g0(n),(s=hn.get(s))&&Nm(i,s),r=(e.ownerDocument||e).createElement("link"),ne(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ge(r,"link",i),t.state.loading|=4,uu(r,n.precedence,e),t.instance=r;case"script":return r=sa(n.src),(s=e.querySelector(Jo(r)))?(t.instance=s,ne(s),s):(i=n,(s=hn.get(r))&&(i=Dt({},n),Dm(i,s)),e=e.ownerDocument||e,s=e.createElement("script"),ne(s),ge(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(U(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,uu(i,n.precedence,e));return t.instance}function uu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Nm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Dm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var cu=null;function Hy(e,t,n){if(cu===null){var i=new Map,s=cu=new Map;s.set(n,i)}else s=cu,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[qo]||r[Ae]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(r):i.set(a,[r])}}return i}function Gy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function gR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function p0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var So=null;function pR(){}function yR(e,t,n){if(So===null)throw Error(U(475));var i=So;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=Gr(n.href),r=e.querySelector(Wo(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Yu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=r,ne(r);return}r=e.ownerDocument||e,n=g0(n),(s=hn.get(s))&&Nm(n,s),r=r.createElement("link"),ne(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ge(r,"link",n),t.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Yu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function _R(){if(So===null)throw Error(U(475));var e=So;return e.stylesheets&&e.count===0&&od(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&od(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Yu(){if(this.count--,this.count===0){if(this.stylesheets)od(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ku=null;function od(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ku=new Map,t.forEach(vR,e),Ku=null,Yu.call(e))}function vR(e,t){if(!(t.state.loading&4)){var n=Ku.get(e);if(n)var i=n.get(null);else{n=new Map,Ku.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=t.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=Yu.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var bo={$$typeof:Fn,Provider:null,Consumer:null,_currentValue:Ts,_currentValue2:Ts,_threadCount:0};function ER(e,t,n,i,s,r,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bh(0),this.hiddenUpdates=bh(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function y0(e,t,n,i,s,r,a,l,u,h,d,g){return e=new ER(e,t,n,a,l,u,h,g),t=1,r===!0&&(t|=24),r=Fe(3,null,null,t),e.current=r,r.stateNode=e,t=sm(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},am(r),e}function _0(e){return e?(e=gr,e):gr}function v0(e,t,n,i,s,r){s=_0(s),i.context===null?i.context=s:i.pendingContext=s,i=Ui(t),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=Li(e,i,t),n!==null&&(Ze(n,e,t),Za(n,e,t))}function Fy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xm(e,t){Fy(e,t),(e=e.alternate)&&Fy(e,t)}function E0(e){if(e.tag===13){var t=ea(e,67108864);t!==null&&Ze(t,e,67108864),xm(e,67108864)}}var Xu=!0;function TR(e,t,n,i){var s=W.T;W.T=null;var r=dt.p;try{dt.p=2,Om(e,t,n,i)}finally{dt.p=r,W.T=s}}function AR(e,t,n,i){var s=W.T;W.T=null;var r=dt.p;try{dt.p=8,Om(e,t,n,i)}finally{dt.p=r,W.T=s}}function Om(e,t,n,i){if(Xu){var s=ld(i);if(s===null)ef(e,t,i,Zu,n),Qy(e,i);else if(bR(s,e,t,n,i))i.stopPropagation();else if(Qy(e,i),t&4&&-1<SR.indexOf(e)){for(;s!==null;){var r=ta(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=ps(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-Ke(a);l.entanglements[1]|=u,a&=~u}Ln(r),!(pt&6)&&(Bu=Cn()+500,Zo(0))}}break;case 13:l=ea(r,2),l!==null&&Ze(l,r,2),xc(),xm(r,2)}if(r=ld(i),r===null&&ef(e,t,i,Zu,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else ef(e,t,i,null,n)}}function ld(e){return e=Yd(e),Vm(e)}var Zu=null;function Vm(e){if(Zu=null,e=ur(e),e!==null){var t=Lo(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Fv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Zu=e,null}function T0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lb()){case Kv:return 2;case Xv:return 8;case wu:case ub:return 32;case Zv:return 268435456;default:return 32}default:return 32}}var ud=!1,Bi=null,qi=null,Hi=null,wo=new Map,Ro=new Map,Ri=[],SR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qy(e,t){switch(e){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":qi=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":wo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ro.delete(t.pointerId)}}function Pa(e,t,n,i,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=ta(t),t!==null&&E0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function bR(e,t,n,i,s){switch(t){case"focusin":return Bi=Pa(Bi,e,t,n,i,s),!0;case"dragenter":return qi=Pa(qi,e,t,n,i,s),!0;case"mouseover":return Hi=Pa(Hi,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return wo.set(r,Pa(wo.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Ro.set(r,Pa(Ro.get(r)||null,e,t,n,i,s)),!0}return!1}function A0(e){var t=ur(e.target);if(t!==null){var n=Lo(t);if(n!==null){if(t=n.tag,t===13){if(t=Fv(n),t!==null){e.blockedOn=t,yb(e.priority,function(){if(n.tag===13){var i=Xe();i=Gd(i);var s=ea(n,i);s!==null&&Ze(s,n,i),xm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ld(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Rf=i,n.target.dispatchEvent(i),Rf=null}else return t=ta(n),t!==null&&E0(t),e.blockedOn=n,!1;t.shift()}return!0}function $y(e,t,n){hu(e)&&n.delete(t)}function wR(){ud=!1,Bi!==null&&hu(Bi)&&(Bi=null),qi!==null&&hu(qi)&&(qi=null),Hi!==null&&hu(Hi)&&(Hi=null),wo.forEach($y),Ro.forEach($y)}function Gl(e,t){e.blockedOn===t&&(e.blockedOn=null,ud||(ud=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,wR)))}var Fl=null;function Yy(e){Fl!==e&&(Fl=e,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,function(){Fl===e&&(Fl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],s=e[t+2];if(typeof i!="function"){if(Vm(i||n)===null)continue;break}var r=ta(n);r!==null&&(e.splice(t,3),t-=3,qf(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Io(e){function t(u){return Gl(u,e)}Bi!==null&&Gl(Bi,e),qi!==null&&Gl(qi,e),Hi!==null&&Gl(Hi,e),wo.forEach(t),Ro.forEach(t);for(var n=0;n<Ri.length;n++){var i=Ri[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Ri.length&&(n=Ri[0],n.blockedOn===null);)A0(n),n.blockedOn===null&&Ri.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[je]||null;if(typeof r=="function")a||Yy(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[je]||null)l=a.formAction;else if(Vm(s)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Yy(n)}}}function Mm(e){this._internalRoot=e}kc.prototype.render=Mm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));var n=t.current,i=Xe();v0(n,i,e,t,null,null)};kc.prototype.unmount=Mm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;v0(e.current,2,null,e,null,null),xc(),t[Jr]=null}};function kc(e){this._internalRoot=e}kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=nE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ri.length&&t!==0&&t<Ri[n].priority;n++);Ri.splice(n,0,e),n===0&&A0(e)}};var Ky=Hv.version;if(Ky!=="19.1.1")throw Error(U(527,Ky,"19.1.1"));dt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=eb(t),e=e!==null?Qv(e):null,e=e===null?null:e.stateNode,e};var RR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{jo=Ql.inject(RR),Ye=Ql}catch{}}vc.createRoot=function(e,t){if(!Gv(e))throw Error(U(299));var n=!1,i="",s=yT,r=_T,a=vT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=y0(e,1,!1,null,null,n,i,s,r,a,l,null),e[Jr]=t.current,Cm(e),new Mm(t)};vc.hydrateRoot=function(e,t,n){if(!Gv(e))throw Error(U(299));var i=!1,s="",r=yT,a=_T,l=vT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=y0(e,1,!0,t,n??null,i,s,r,a,l,u,h),t.context=_0(null),n=t.current,i=Xe(),i=Gd(i),s=Ui(i),s.callback=null,Li(n,s,i),n=i,t.current.lanes=n,Bo(t,n),Ln(t),e[Jr]=t.current,Cm(e),new kc(t)};vc.version="19.1.1";function S0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S0)}catch(e){console.error(e)}}S0(),Uv.exports=vc;var IR=Uv.exports;const CR=()=>{};var Xy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},NR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return t.join("")},w0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,h=u?e[s+2]:0,d=r>>2,g=(r&3)<<4|l>>4;let m=(l&15)<<2|h>>6,y=h&63;u||(y=64,a||(m=64)),i.push(n[d],n[g],n[m],n[y])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(b0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):NR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const g=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||l==null||h==null||g==null)throw new DR;const m=r<<2|l>>4;if(i.push(m),h!==64){const y=l<<4&240|h>>2;if(i.push(y),g!==64){const D=h<<6&192|g;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class DR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xR=function(e){const t=b0(e);return w0.encodeByteArray(t,!0)},Wu=function(e){return xR(e).replace(/\./g,"")},R0=function(e){try{return w0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=()=>OR().__FIREBASE_DEFAULTS__,MR=()=>{if(typeof process>"u"||typeof Xy>"u")return;const e=Xy.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},kR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&R0(e[1]);return t&&JSON.parse(t)},Pc=()=>{try{return CR()||VR()||MR()||kR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},I0=e=>{var t,n;return(n=(t=Pc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},PR=e=>{const t=I0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},C0=()=>{var e;return(e=Pc())==null?void 0:e.config},N0=e=>{var t;return(t=Pc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function D0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Wu(JSON.stringify(n)),Wu(JSON.stringify(a)),""].join(".")}const ao={};function jR(){const e={prod:[],emulator:[]};for(const t of Object.keys(ao))ao[t]?e.emulator.push(t):e.prod.push(t);return e}function zR(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Zy=!1;function x0(e,t){if(typeof window>"u"||typeof document>"u"||!ra(window.location.host)||ao[e]===t||ao[e]||Zy)return;ao[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",r=jR().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Zy=!0,a()},m}function d(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=zR(i),y=n("text"),D=document.getElementById(y)||document.createElement("span"),O=n("learnmore"),M=document.getElementById(O)||document.createElement("a"),S=n("preprendIcon"),v=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const w=m.element;l(w),d(M,O);const x=h();u(v,S),w.append(v,D,M,x),document.body.appendChild(w)}r?(D.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(be())}function qR(){var t;const e=(t=Pc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function FR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QR(){const e=be();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function $R(){return!qR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YR(){try{return typeof indexedDB=="object"}catch{return!1}}function KR(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)==null?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="FirebaseError";class fi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=XR,Object.setPrototypeOf(this,fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tl.prototype.create)}}class tl{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],a=r?ZR(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new fi(s,l,i)}}function ZR(e,t){return e.replace(WR,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const WR=/\{\$([^}]+)}/g;function JR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Os(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],a=t[s];if(Wy(r)&&Wy(a)){if(!Os(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Wy(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function t2(e,t){const n=new e2(e,t);return n.subscribe.bind(n)}class e2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");n2(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=sf),s.error===void 0&&(s.error=sf),s.complete===void 0&&(s.complete=sf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function n2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function sf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(e){return e&&e._delegate?e._delegate:e}class Vs{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new UR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(r2(t))try{this.getOrInitializeService({instanceIdentifier:vs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=vs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=vs){return this.instances.has(t)}getOptions(t=vs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:s2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=vs){return this.component?this.component.multipleInstances?t:vs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function s2(e){return e===vs?void 0:e}function r2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new i2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(rt||(rt={}));const o2={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},l2=rt.INFO,u2={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},c2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=u2[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class km{constructor(t){this.name=t,this._logLevel=l2,this._logHandler=c2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in rt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?o2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...t),this._logHandler(this,rt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...t),this._logHandler(this,rt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...t),this._logHandler(this,rt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...t),this._logHandler(this,rt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...t),this._logHandler(this,rt.ERROR,...t)}}const h2=(e,t)=>t.some(n=>e instanceof n);let Jy,t_;function f2(){return Jy||(Jy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d2(){return t_||(t_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O0=new WeakMap,cd=new WeakMap,V0=new WeakMap,rf=new WeakMap,Pm=new WeakMap;function m2(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{n(Gi(e.result)),s()},a=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&O0.set(n,e)}).catch(()=>{}),Pm.set(t,e),t}function g2(e){if(cd.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});cd.set(e,t)}let hd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return cd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||V0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function p2(e){hd=e(hd)}function y2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(af(this),t,...n);return V0.set(i,t.sort?t.sort():[t]),Gi(i)}:d2().includes(e)?function(...t){return e.apply(af(this),t),Gi(O0.get(this))}:function(...t){return Gi(e.apply(af(this),t))}}function _2(e){return typeof e=="function"?y2(e):(e instanceof IDBTransaction&&g2(e),h2(e,f2())?new Proxy(e,hd):e)}function Gi(e){if(e instanceof IDBRequest)return m2(e);if(rf.has(e))return rf.get(e);const t=_2(e);return t!==e&&(rf.set(e,t),Pm.set(t,e)),t}const af=e=>Pm.get(e);function v2(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),l=Gi(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Gi(a.result),u.oldVersion,u.newVersion,Gi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const E2=["get","getKey","getAll","getAllKeys","count"],T2=["put","add","delete","clear"],of=new Map;function e_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(of.get(t))return of.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=T2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||E2.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return of.set(t,r),r}p2(e=>({...e,get:(t,n,i)=>e_(t,n)||e.get(t,n,i),has:(t,n)=>!!e_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(S2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function S2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const fd="@firebase/app",n_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new km("@firebase/app"),b2="@firebase/app-compat",w2="@firebase/analytics-compat",R2="@firebase/analytics",I2="@firebase/app-check-compat",C2="@firebase/app-check",N2="@firebase/auth",D2="@firebase/auth-compat",x2="@firebase/database",O2="@firebase/data-connect",V2="@firebase/database-compat",M2="@firebase/functions",k2="@firebase/functions-compat",P2="@firebase/installations",U2="@firebase/installations-compat",L2="@firebase/messaging",j2="@firebase/messaging-compat",z2="@firebase/performance",B2="@firebase/performance-compat",q2="@firebase/remote-config",H2="@firebase/remote-config-compat",G2="@firebase/storage",F2="@firebase/storage-compat",Q2="@firebase/firestore",$2="@firebase/ai",Y2="@firebase/firestore-compat",K2="firebase",X2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="[DEFAULT]",Z2={[fd]:"fire-core",[b2]:"fire-core-compat",[R2]:"fire-analytics",[w2]:"fire-analytics-compat",[C2]:"fire-app-check",[I2]:"fire-app-check-compat",[N2]:"fire-auth",[D2]:"fire-auth-compat",[x2]:"fire-rtdb",[O2]:"fire-data-connect",[V2]:"fire-rtdb-compat",[M2]:"fire-fn",[k2]:"fire-fn-compat",[P2]:"fire-iid",[U2]:"fire-iid-compat",[L2]:"fire-fcm",[j2]:"fire-fcm-compat",[z2]:"fire-perf",[B2]:"fire-perf-compat",[q2]:"fire-rc",[H2]:"fire-rc-compat",[G2]:"fire-gcs",[F2]:"fire-gcs-compat",[Q2]:"fire-fst",[Y2]:"fire-fst-compat",[$2]:"fire-vertex","fire-js":"fire-js",[K2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=new Map,W2=new Map,md=new Map;function i_(e,t){try{e.container.addComponent(t)}catch(n){ri.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Fr(e){const t=e.name;if(md.has(t))return ri.debug(`There were multiple attempts to register component ${t}.`),!1;md.set(t,e);for(const n of Ju.values())i_(n,e);for(const n of W2.values())i_(n,e);return!0}function Um(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function mn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fi=new tl("app","Firebase",J2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=X2;function M0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:dd,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw Fi.create("bad-app-name",{appName:String(s)});if(n||(n=C0()),!n)throw Fi.create("no-options");const r=Ju.get(s);if(r){if(Os(n,r.options)&&Os(i,r.config))return r;throw Fi.create("duplicate-app",{appName:s})}const a=new a2(s);for(const u of md.values())a.addComponent(u);const l=new tI(n,i,a);return Ju.set(s,l),l}function k0(e=dd){const t=Ju.get(e);if(!t&&e===dd&&C0())return M0();if(!t)throw Fi.create("no-app",{appName:e});return t}function Qi(e,t,n){let i=Z2[e]??e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ri.warn(a.join(" "));return}Fr(new Vs(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="firebase-heartbeat-database",nI=1,Co="firebase-heartbeat-store";let lf=null;function P0(){return lf||(lf=v2(eI,nI,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Co)}catch(n){console.warn(n)}}}}).catch(e=>{throw Fi.create("idb-open",{originalErrorMessage:e.message})})),lf}async function iI(e){try{const n=(await P0()).transaction(Co),i=await n.objectStore(Co).get(U0(e));return await n.done,i}catch(t){if(t instanceof fi)ri.warn(t.message);else{const n=Fi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ri.warn(n.message)}}}async function s_(e,t){try{const i=(await P0()).transaction(Co,"readwrite");await i.objectStore(Co).put(t,U0(e)),await i.done}catch(n){if(n instanceof fi)ri.warn(n.message);else{const i=Fi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ri.warn(i.message)}}}function U0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=1024,rI=30;class aI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=r_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>rI){const a=uI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ri.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=r_(),{heartbeatsToSend:i,unsentEntries:s}=oI(this._heartbeatsCache.heartbeats),r=Wu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return ri.warn(n),""}}}function r_(){return new Date().toISOString().substring(0,10)}function oI(e,t=sI){const n=[];let i=e.slice();for(const s of e){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),a_(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),a_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class lI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YR()?KR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return s_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return s_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function a_(e){return Wu(JSON.stringify({version:2,heartbeats:e})).length}function uI(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(e){Fr(new Vs("platform-logger",t=>new A2(t),"PRIVATE")),Fr(new Vs("heartbeat",t=>new aI(t),"PRIVATE")),Qi(fd,n_,e),Qi(fd,n_,"esm2020"),Qi("fire-js","")}cI("");var hI="firebase",fI="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qi(hI,fI,"app");var o_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $i,L0;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,_){function A(){}A.prototype=_.prototype,T.D=_.prototype,T.prototype=new A,T.prototype.constructor=T,T.C=function(b,I,C){for(var E=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)E[bt-2]=arguments[bt];return _.prototype[I].apply(b,E)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,_,A){A||(A=0);var b=Array(16);if(typeof _=="string")for(var I=0;16>I;++I)b[I]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(I=0;16>I;++I)b[I]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=T.g[0],A=T.g[1],I=T.g[2];var C=T.g[3],E=_+(C^A&(I^C))+b[0]+3614090360&4294967295;_=A+(E<<7&4294967295|E>>>25),E=C+(I^_&(A^I))+b[1]+3905402710&4294967295,C=_+(E<<12&4294967295|E>>>20),E=I+(A^C&(_^A))+b[2]+606105819&4294967295,I=C+(E<<17&4294967295|E>>>15),E=A+(_^I&(C^_))+b[3]+3250441966&4294967295,A=I+(E<<22&4294967295|E>>>10),E=_+(C^A&(I^C))+b[4]+4118548399&4294967295,_=A+(E<<7&4294967295|E>>>25),E=C+(I^_&(A^I))+b[5]+1200080426&4294967295,C=_+(E<<12&4294967295|E>>>20),E=I+(A^C&(_^A))+b[6]+2821735955&4294967295,I=C+(E<<17&4294967295|E>>>15),E=A+(_^I&(C^_))+b[7]+4249261313&4294967295,A=I+(E<<22&4294967295|E>>>10),E=_+(C^A&(I^C))+b[8]+1770035416&4294967295,_=A+(E<<7&4294967295|E>>>25),E=C+(I^_&(A^I))+b[9]+2336552879&4294967295,C=_+(E<<12&4294967295|E>>>20),E=I+(A^C&(_^A))+b[10]+4294925233&4294967295,I=C+(E<<17&4294967295|E>>>15),E=A+(_^I&(C^_))+b[11]+2304563134&4294967295,A=I+(E<<22&4294967295|E>>>10),E=_+(C^A&(I^C))+b[12]+1804603682&4294967295,_=A+(E<<7&4294967295|E>>>25),E=C+(I^_&(A^I))+b[13]+4254626195&4294967295,C=_+(E<<12&4294967295|E>>>20),E=I+(A^C&(_^A))+b[14]+2792965006&4294967295,I=C+(E<<17&4294967295|E>>>15),E=A+(_^I&(C^_))+b[15]+1236535329&4294967295,A=I+(E<<22&4294967295|E>>>10),E=_+(I^C&(A^I))+b[1]+4129170786&4294967295,_=A+(E<<5&4294967295|E>>>27),E=C+(A^I&(_^A))+b[6]+3225465664&4294967295,C=_+(E<<9&4294967295|E>>>23),E=I+(_^A&(C^_))+b[11]+643717713&4294967295,I=C+(E<<14&4294967295|E>>>18),E=A+(C^_&(I^C))+b[0]+3921069994&4294967295,A=I+(E<<20&4294967295|E>>>12),E=_+(I^C&(A^I))+b[5]+3593408605&4294967295,_=A+(E<<5&4294967295|E>>>27),E=C+(A^I&(_^A))+b[10]+38016083&4294967295,C=_+(E<<9&4294967295|E>>>23),E=I+(_^A&(C^_))+b[15]+3634488961&4294967295,I=C+(E<<14&4294967295|E>>>18),E=A+(C^_&(I^C))+b[4]+3889429448&4294967295,A=I+(E<<20&4294967295|E>>>12),E=_+(I^C&(A^I))+b[9]+568446438&4294967295,_=A+(E<<5&4294967295|E>>>27),E=C+(A^I&(_^A))+b[14]+3275163606&4294967295,C=_+(E<<9&4294967295|E>>>23),E=I+(_^A&(C^_))+b[3]+4107603335&4294967295,I=C+(E<<14&4294967295|E>>>18),E=A+(C^_&(I^C))+b[8]+1163531501&4294967295,A=I+(E<<20&4294967295|E>>>12),E=_+(I^C&(A^I))+b[13]+2850285829&4294967295,_=A+(E<<5&4294967295|E>>>27),E=C+(A^I&(_^A))+b[2]+4243563512&4294967295,C=_+(E<<9&4294967295|E>>>23),E=I+(_^A&(C^_))+b[7]+1735328473&4294967295,I=C+(E<<14&4294967295|E>>>18),E=A+(C^_&(I^C))+b[12]+2368359562&4294967295,A=I+(E<<20&4294967295|E>>>12),E=_+(A^I^C)+b[5]+4294588738&4294967295,_=A+(E<<4&4294967295|E>>>28),E=C+(_^A^I)+b[8]+2272392833&4294967295,C=_+(E<<11&4294967295|E>>>21),E=I+(C^_^A)+b[11]+1839030562&4294967295,I=C+(E<<16&4294967295|E>>>16),E=A+(I^C^_)+b[14]+4259657740&4294967295,A=I+(E<<23&4294967295|E>>>9),E=_+(A^I^C)+b[1]+2763975236&4294967295,_=A+(E<<4&4294967295|E>>>28),E=C+(_^A^I)+b[4]+1272893353&4294967295,C=_+(E<<11&4294967295|E>>>21),E=I+(C^_^A)+b[7]+4139469664&4294967295,I=C+(E<<16&4294967295|E>>>16),E=A+(I^C^_)+b[10]+3200236656&4294967295,A=I+(E<<23&4294967295|E>>>9),E=_+(A^I^C)+b[13]+681279174&4294967295,_=A+(E<<4&4294967295|E>>>28),E=C+(_^A^I)+b[0]+3936430074&4294967295,C=_+(E<<11&4294967295|E>>>21),E=I+(C^_^A)+b[3]+3572445317&4294967295,I=C+(E<<16&4294967295|E>>>16),E=A+(I^C^_)+b[6]+76029189&4294967295,A=I+(E<<23&4294967295|E>>>9),E=_+(A^I^C)+b[9]+3654602809&4294967295,_=A+(E<<4&4294967295|E>>>28),E=C+(_^A^I)+b[12]+3873151461&4294967295,C=_+(E<<11&4294967295|E>>>21),E=I+(C^_^A)+b[15]+530742520&4294967295,I=C+(E<<16&4294967295|E>>>16),E=A+(I^C^_)+b[2]+3299628645&4294967295,A=I+(E<<23&4294967295|E>>>9),E=_+(I^(A|~C))+b[0]+4096336452&4294967295,_=A+(E<<6&4294967295|E>>>26),E=C+(A^(_|~I))+b[7]+1126891415&4294967295,C=_+(E<<10&4294967295|E>>>22),E=I+(_^(C|~A))+b[14]+2878612391&4294967295,I=C+(E<<15&4294967295|E>>>17),E=A+(C^(I|~_))+b[5]+4237533241&4294967295,A=I+(E<<21&4294967295|E>>>11),E=_+(I^(A|~C))+b[12]+1700485571&4294967295,_=A+(E<<6&4294967295|E>>>26),E=C+(A^(_|~I))+b[3]+2399980690&4294967295,C=_+(E<<10&4294967295|E>>>22),E=I+(_^(C|~A))+b[10]+4293915773&4294967295,I=C+(E<<15&4294967295|E>>>17),E=A+(C^(I|~_))+b[1]+2240044497&4294967295,A=I+(E<<21&4294967295|E>>>11),E=_+(I^(A|~C))+b[8]+1873313359&4294967295,_=A+(E<<6&4294967295|E>>>26),E=C+(A^(_|~I))+b[15]+4264355552&4294967295,C=_+(E<<10&4294967295|E>>>22),E=I+(_^(C|~A))+b[6]+2734768916&4294967295,I=C+(E<<15&4294967295|E>>>17),E=A+(C^(I|~_))+b[13]+1309151649&4294967295,A=I+(E<<21&4294967295|E>>>11),E=_+(I^(A|~C))+b[4]+4149444226&4294967295,_=A+(E<<6&4294967295|E>>>26),E=C+(A^(_|~I))+b[11]+3174756917&4294967295,C=_+(E<<10&4294967295|E>>>22),E=I+(_^(C|~A))+b[2]+718787259&4294967295,I=C+(E<<15&4294967295|E>>>17),E=A+(C^(I|~_))+b[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(I+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+I&4294967295,T.g[3]=T.g[3]+C&4294967295}i.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var A=_-this.blockSize,b=this.B,I=this.h,C=0;C<_;){if(I==0)for(;C<=A;)s(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<_;)if(b[I++]=T.charCodeAt(C++),I==this.blockSize){s(this,b),I=0;break}}else for(;C<_;)if(b[I++]=T[C++],I==this.blockSize){s(this,b),I=0;break}}this.h=I,this.o+=_},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var A=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=A&255,A/=256;for(this.u(T),T=Array(16),_=A=0;4>_;++_)for(var b=0;32>b;b+=8)T[A++]=this.g[_]>>>b&255;return T};function r(T,_){var A=l;return Object.prototype.hasOwnProperty.call(A,T)?A[T]:A[T]=_(T)}function a(T,_){this.h=_;for(var A=[],b=!0,I=T.length-1;0<=I;I--){var C=T[I]|0;b&&C==_||(A[I]=C,b=!1)}this.g=A}var l={};function u(T){return-128<=T&&128>T?r(T,function(_){return new a([_|0],0>_?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return M(h(-T));for(var _=[],A=1,b=0;T>=A;b++)_[b]=T/A|0,A*=4294967296;return new a(_,0)}function d(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return M(d(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(_,8)),b=g,I=0;I<T.length;I+=8){var C=Math.min(8,T.length-I),E=parseInt(T.substring(I,I+C),_);8>C?(C=h(Math.pow(_,C)),b=b.j(C).add(h(E))):(b=b.j(A),b=b.add(h(E)))}return b}var g=u(0),m=u(1),y=u(16777216);e=a.prototype,e.m=function(){if(O(this))return-M(this).m();for(var T=0,_=1,A=0;A<this.g.length;A++){var b=this.i(A);T+=(0<=b?b:4294967296+b)*_,_*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D(this))return"0";if(O(this))return"-"+M(this).toString(T);for(var _=h(Math.pow(T,6)),A=this,b="";;){var I=x(A,_).g;A=S(A,I.j(_));var C=((0<A.g.length?A.g[0]:A.h)>>>0).toString(T);if(A=I,D(A))return C+b;for(;6>C.length;)C="0"+C;b=C+b}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function D(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function O(T){return T.h==-1}e.l=function(T){return T=S(this,T),O(T)?-1:D(T)?0:1};function M(T){for(var _=T.g.length,A=[],b=0;b<_;b++)A[b]=~T.g[b];return new a(A,~T.h).add(m)}e.abs=function(){return O(this)?M(this):this},e.add=function(T){for(var _=Math.max(this.g.length,T.g.length),A=[],b=0,I=0;I<=_;I++){var C=b+(this.i(I)&65535)+(T.i(I)&65535),E=(C>>>16)+(this.i(I)>>>16)+(T.i(I)>>>16);b=E>>>16,C&=65535,E&=65535,A[I]=E<<16|C}return new a(A,A[A.length-1]&-2147483648?-1:0)};function S(T,_){return T.add(M(_))}e.j=function(T){if(D(this)||D(T))return g;if(O(this))return O(T)?M(this).j(M(T)):M(M(this).j(T));if(O(T))return M(this.j(M(T)));if(0>this.l(y)&&0>T.l(y))return h(this.m()*T.m());for(var _=this.g.length+T.g.length,A=[],b=0;b<2*_;b++)A[b]=0;for(b=0;b<this.g.length;b++)for(var I=0;I<T.g.length;I++){var C=this.i(b)>>>16,E=this.i(b)&65535,bt=T.i(I)>>>16,xt=T.i(I)&65535;A[2*b+2*I]+=E*xt,v(A,2*b+2*I),A[2*b+2*I+1]+=C*xt,v(A,2*b+2*I+1),A[2*b+2*I+1]+=E*bt,v(A,2*b+2*I+1),A[2*b+2*I+2]+=C*bt,v(A,2*b+2*I+2)}for(b=0;b<_;b++)A[b]=A[2*b+1]<<16|A[2*b];for(b=_;b<2*_;b++)A[b]=0;return new a(A,0)};function v(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function w(T,_){this.g=T,this.h=_}function x(T,_){if(D(_))throw Error("division by zero");if(D(T))return new w(g,g);if(O(T))return _=x(M(T),_),new w(M(_.g),M(_.h));if(O(_))return _=x(T,M(_)),new w(M(_.g),_.h);if(30<T.g.length){if(O(T)||O(_))throw Error("slowDivide_ only works with positive integers.");for(var A=m,b=_;0>=b.l(T);)A=L(A),b=L(b);var I=q(A,1),C=q(b,1);for(b=q(b,2),A=q(A,2);!D(b);){var E=C.add(b);0>=E.l(T)&&(I=I.add(A),C=E),b=q(b,1),A=q(A,1)}return _=S(T,I.j(_)),new w(I,_)}for(I=g;0<=T.l(_);){for(A=Math.max(1,Math.floor(T.m()/_.m())),b=Math.ceil(Math.log(A)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),C=h(A),E=C.j(_);O(E)||0<E.l(T);)A-=b,C=h(A),E=C.j(_);D(C)&&(C=m),I=I.add(C),T=S(T,E)}return new w(I,T)}e.A=function(T){return x(this,T).h},e.and=function(T){for(var _=Math.max(this.g.length,T.g.length),A=[],b=0;b<_;b++)A[b]=this.i(b)&T.i(b);return new a(A,this.h&T.h)},e.or=function(T){for(var _=Math.max(this.g.length,T.g.length),A=[],b=0;b<_;b++)A[b]=this.i(b)|T.i(b);return new a(A,this.h|T.h)},e.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),A=[],b=0;b<_;b++)A[b]=this.i(b)^T.i(b);return new a(A,this.h^T.h)};function L(T){for(var _=T.g.length+1,A=[],b=0;b<_;b++)A[b]=T.i(b)<<1|T.i(b-1)>>>31;return new a(A,T.h)}function q(T,_){var A=_>>5;_%=32;for(var b=T.g.length-A,I=[],C=0;C<b;C++)I[C]=0<_?T.i(C+A)>>>_|T.i(C+A+1)<<32-_:T.i(C+A);return new a(I,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,L0=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,$i=a}).apply(typeof o_<"u"?o_:typeof self<"u"?self:typeof window<"u"?window:{});var $l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j0,Ba,z0,fu,gd,B0,q0,H0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof $l=="object"&&$l];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function s(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var N=o[p];if(!(N in f))break t;f=f[N]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function r(o,c){o instanceof String&&(o+="");var f=0,p=!1,N={next:function(){if(!p&&f<o.length){var V=f++;return{value:c(V,o[V]),done:!1}}return p=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}s("Array.prototype.values",function(o){return o||function(){return r(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,p),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function y(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function D(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,N,V){for(var j=Array(arguments.length-2),At=2;At<arguments.length;At++)j[At-2]=arguments[At];return c.prototype[N].apply(p,j)}}function O(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function M(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const N=o.length||0,V=p.length||0;o.length=N+V;for(let j=0;j<V;j++)o[N+j]=p[j]}else o.push(p)}}class S{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function w(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function x(o){return x[" "](o),o}x[" "]=function(){};var L=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function q(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function T(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function _(o){const c={};for(const f in o)c[f]=o[f];return c}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(o,c){let f,p;for(let N=1;N<arguments.length;N++){p=arguments[N];for(f in p)o[f]=p[f];for(let V=0;V<A.length;V++)f=A[V],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function I(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function C(o){l.setTimeout(()=>{throw o},0)}function E(){var o=mt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class bt{constructor(){this.h=this.g=null}add(c,f){const p=xt.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var xt=new S(()=>new B,o=>o.reset());class B{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let G,K=!1,mt=new bt,Rt=()=>{const o=l.Promise.resolve(void 0);G=()=>{o.then(we)}};var we=()=>{for(var o;o=E();){try{o.h.call(o.g)}catch(f){C(f)}var c=xt;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}K=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function It(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}It.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function Ie(o,c){if(It.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{x(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Gs[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Ie.aa.h.call(this)}}D(Ie,It);var Gs={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),Tt=0;function vn(o,c,f,p,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=N,this.key=++Tt,this.da=this.fa=!1}function le(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Jt(o){this.src=o,this.g={},this.h=0}Jt.prototype.add=function(o,c,f,p,N){var V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);var j=yt(o,c,p,N);return-1<j?(c=o[j],f||(c.fa=!1)):(c=new vn(c,this.src,V,!!p,N),c.fa=f,o.push(c)),c};function F(o,c){var f=c.type;if(f in o.g){var p=o.g[f],N=Array.prototype.indexOf.call(p,c,void 0),V;(V=0<=N)&&Array.prototype.splice.call(p,N,1),V&&(le(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function yt(o,c,f,p){for(var N=0;N<o.length;++N){var V=o[N];if(!V.da&&V.listener==c&&V.capture==!!f&&V.ha==p)return N}return-1}var Ce="closure_lm_"+(1e6*Math.random()|0),Fs={};function da(o,c,f,p,N){if(Array.isArray(c)){for(var V=0;V<c.length;V++)da(o,c[V],f,p,N);return null}return f=Tn(f),o&&o[X]?o.K(c,f,h(p)?!!p.capture:!1,N):ml(o,c,f,!1,p,N)}function ml(o,c,f,p,N,V){if(!c)throw Error("Invalid event type");var j=h(N)?!!N.capture:!!N,At=ga(o);if(At||(o[Ce]=At=new Jt(o)),f=At.add(c,f,p,j,V),f.proxy)return f;if(p=gl(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)Re||(N=j),N===void 0&&(N=!1),o.addEventListener(c.toString(),p,N);else if(o.attachEvent)o.attachEvent(ma(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function gl(){function o(f){return c.call(o.src,o.listener,f)}const c=rh;return o}function En(o,c,f,p,N){if(Array.isArray(c))for(var V=0;V<c.length;V++)En(o,c[V],f,p,N);else p=h(p)?!!p.capture:!!p,f=Tn(f),o&&o[X]?(o=o.i,c=String(c).toString(),c in o.g&&(V=o.g[c],f=yt(V,f,p,N),-1<f&&(le(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete o.g[c],o.h--)))):o&&(o=ga(o))&&(c=o.g[c.toString()],o=-1,c&&(o=yt(c,f,p,N)),(f=-1<o?c[o]:null)&&di(f))}function di(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[X])F(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(ma(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=ga(c))?(F(f,o),f.h==0&&(f.src=null,c[Ce]=null)):le(o)}}}function ma(o){return o in Fs?Fs[o]:Fs[o]="on"+o}function rh(o,c){if(o.da)o=!0;else{c=new Ie(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&di(o),o=f.call(p,c)}return o}function ga(o){return o=o[Ce],o instanceof Jt?o:null}var Qs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(o){return typeof o=="function"?o:(o[Qs]||(o[Qs]=function(c){return o.handleEvent(c)}),o[Qs])}function ye(){oe.call(this),this.i=new Jt(this),this.M=this,this.F=null}D(ye,oe),ye.prototype[X]=!0,ye.prototype.removeEventListener=function(o,c,f,p){En(this,o,c,f,p)};function Ne(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new It(c,o);else if(c instanceof It)c.target=c.target||o;else{var N=c;c=new It(p,o),b(c,N)}if(N=!0,f)for(var V=f.length-1;0<=V;V--){var j=c.g=f[V];N=pl(j,p,!0,c)&&N}if(j=c.g=o,N=pl(j,p,!0,c)&&N,N=pl(j,p,!1,c)&&N,f)for(V=0;V<f.length;V++)j=c.g=f[V],N=pl(j,p,!1,c)&&N}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)le(f[p]);delete o.g[c],o.h--}}this.F=null},ye.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},ye.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function pl(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,V=0;V<c.length;++V){var j=c[V];if(j&&!j.da&&j.capture==f){var At=j.listener,ue=j.ha||j.src;j.fa&&F(o.i,j),N=At.call(ue,p)!==!1&&N}}return N&&!p.defaultPrevented}function Dg(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function xg(o){o.g=Dg(()=>{o.g=null,o.i&&(o.i=!1,xg(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class a1 extends oe{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:xg(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pa(o){oe.call(this),this.h=o,this.g={}}D(pa,oe);var Og=[];function Vg(o){q(o.g,function(c,f){this.g.hasOwnProperty(f)&&di(c)},o),o.g={}}pa.prototype.N=function(){pa.aa.N.call(this),Vg(this)},pa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ah=l.JSON.stringify,o1=l.JSON.parse,l1=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function oh(){}oh.prototype.h=null;function Mg(o){return o.h||(o.h=o.i())}function kg(){}var ya={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lh(){It.call(this,"d")}D(lh,It);function uh(){It.call(this,"c")}D(uh,It);var hs={},Pg=null;function yl(){return Pg=Pg||new ye}hs.La="serverreachability";function Ug(o){It.call(this,hs.La,o)}D(Ug,It);function _a(o){const c=yl();Ne(c,new Ug(c))}hs.STAT_EVENT="statevent";function Lg(o,c){It.call(this,hs.STAT_EVENT,o),this.stat=c}D(Lg,It);function De(o){const c=yl();Ne(c,new Lg(c,o))}hs.Ma="timingevent";function jg(o,c){It.call(this,hs.Ma,o),this.size=c}D(jg,It);function va(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ea(){this.g=!0}Ea.prototype.xa=function(){this.g=!1};function u1(o,c,f,p,N,V){o.info(function(){if(o.g)if(V)for(var j="",At=V.split("&"),ue=0;ue<At.length;ue++){var ht=At[ue].split("=");if(1<ht.length){var _e=ht[0];ht=ht[1];var ve=_e.split("_");j=2<=ve.length&&ve[1]=="type"?j+(_e+"="+ht+"&"):j+(_e+"=redacted&")}}else j=null;else j=V;return"XMLHTTP REQ ("+p+") [attempt "+N+"]: "+c+`
`+f+`
`+j})}function c1(o,c,f,p,N,V,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+N+"]: "+c+`
`+f+`
`+V+" "+j})}function $s(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+f1(o,f)+(p?" "+p:"")})}function h1(o,c){o.info(function(){return"TIMEOUT: "+c})}Ea.prototype.info=function(){};function f1(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var N=p[1];if(Array.isArray(N)&&!(1>N.length)){var V=N[0];if(V!="noop"&&V!="stop"&&V!="close")for(var j=1;j<N.length;j++)N[j]=""}}}}return ah(f)}catch{return c}}var _l={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ch;function vl(){}D(vl,oh),vl.prototype.g=function(){return new XMLHttpRequest},vl.prototype.i=function(){return{}},ch=new vl;function mi(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new pa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bg}function Bg(){this.i=null,this.g="",this.h=!1}var qg={},hh={};function fh(o,c,f){o.L=1,o.v=Sl(jn(c)),o.m=f,o.P=!0,Hg(o,null)}function Hg(o,c){o.F=Date.now(),El(o),o.A=jn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),ip(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Bg,o.g=Tp(o.j,f?c:null,!o.m),0<o.O&&(o.M=new a1(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Og[0]=N.toString()),N=Og);for(var V=0;V<N.length;V++){var j=da(f,N[V],p||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.H?_(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),_a(),u1(o.i,o.u,o.A,o.l,o.R,o.m)}mi.prototype.ca=function(o){o=o.target;const c=this.M;c&&zn(o)==3?c.j():this.Y(o)},mi.prototype.Y=function(o){try{if(o==this.g)t:{const ve=zn(this.g);var c=this.g.Ba();const Xs=this.g.Z();if(!(3>ve)&&(ve!=3||this.g&&(this.h.h||this.g.oa()||cp(this.g)))){this.J||ve!=4||c==7||(c==8||0>=Xs?_a(3):_a(2)),dh(this);var f=this.g.Z();this.X=f;e:if(Gg(this)){var p=cp(this.g);o="";var N=p.length,V=zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fs(this),Ta(this);var j="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(V&&c==N-1)});p.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,c1(this.i,this.u,this.A,this.l,this.R,ve,f),this.o){if(this.T&&!this.K){e:{if(this.g){var At,ue=this.g;if((At=ue.g?ue.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(At)){var ht=At;break e}}ht=null}if(f=ht)$s(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mh(this,f);else{this.o=!1,this.s=3,De(12),fs(this),Ta(this);break t}}if(this.P){f=!0;let fn;for(;!this.J&&this.C<j.length;)if(fn=d1(this,j),fn==hh){ve==4&&(this.s=4,De(14),f=!1),$s(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==qg){this.s=4,De(15),$s(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else $s(this.i,this.l,fn,null),mh(this,fn);if(Gg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||j.length!=0||this.h.h||(this.s=1,De(16),f=!1),this.o=this.o&&f,!f)$s(this.i,this.l,j,"[Invalid Chunked Response]"),fs(this),Ta(this);else if(0<j.length&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.ba&&!_e.M&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Eh(_e),_e.M=!0,De(11))}}else $s(this.i,this.l,j,null),mh(this,j);ve==4&&fs(this),this.o&&!this.J&&(ve==4?yp(this.j,this):(this.o=!1,El(this)))}else D1(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,De(12)):(this.s=0,De(13)),fs(this),Ta(this)}}}catch{}finally{}};function Gg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function d1(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?hh:(f=Number(c.substring(f,p)),isNaN(f)?qg:(p+=1,p+f>c.length?hh:(c=c.slice(p,p+f),o.C=p+f,c)))}mi.prototype.cancel=function(){this.J=!0,fs(this)};function El(o){o.S=Date.now()+o.I,Fg(o,o.I)}function Fg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=va(m(o.ba,o),c)}function dh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}mi.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(h1(this.i,this.A),this.L!=2&&(_a(),De(17)),fs(this),this.s=2,Ta(this)):Fg(this,this.S-o)};function Ta(o){o.j.G==0||o.J||yp(o.j,o)}function fs(o){dh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Vg(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function mh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||gh(f.h,o))){if(!o.K&&gh(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var N=p;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Nl(f),Il(f);else break t;vh(f),De(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=va(m(f.Za,f),6e3));if(1>=Yg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ms(f,11)}else if((o.K||f.g==o)&&Nl(f),!v(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let ht=N[c];if(f.T=ht[0],ht=ht[1],f.G==2)if(ht[0]=="c"){f.K=ht[1],f.ia=ht[2];const _e=ht[3];_e!=null&&(f.la=_e,f.j.info("VER="+f.la));const ve=ht[4];ve!=null&&(f.Aa=ve,f.j.info("SVER="+f.Aa));const Xs=ht[5];Xs!=null&&typeof Xs=="number"&&0<Xs&&(p=1.5*Xs,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const fn=o.g;if(fn){const xl=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xl){var V=p.h;V.g||xl.indexOf("spdy")==-1&&xl.indexOf("quic")==-1&&xl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(ph(V,V.h),V.h=null))}if(p.D){const Th=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Th&&(p.ya=Th,Ct(p.I,p.D,Th))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var j=o;if(p.qa=Ep(p,p.J?p.ia:null,p.W),j.K){Kg(p.h,j);var At=j,ue=p.L;ue&&(At.I=ue),At.B&&(dh(At),El(At)),p.g=j}else gp(p);0<f.i.length&&Cl(f)}else ht[0]!="stop"&&ht[0]!="close"||ms(f,7);else f.G==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?ms(f,7):_h(f):ht[0]!="noop"&&f.l&&f.l.ta(ht),f.v=0)}}_a(4)}catch{}}var m1=class{constructor(o,c){this.g=o,this.map=c}};function Qg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $g(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Yg(o){return o.h?1:o.g?o.g.size:0}function gh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function ph(o,c){o.g?o.g.add(c):o.h=c}function Kg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Qg.prototype.cancel=function(){if(this.i=Xg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Xg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return O(o.i)}function g1(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function p1(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function Zg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=p1(o),p=g1(o),N=p.length,V=0;V<N;V++)c.call(void 0,p[V],f&&f[V],o)}var Wg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function y1(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),N=null;if(0<=p){var V=o[f].substring(0,p);N=o[f].substring(p+1)}else V=o[f];c(V,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function ds(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof ds){this.h=o.h,Tl(this,o.j),this.o=o.o,this.g=o.g,Al(this,o.s),this.l=o.l;var c=o.i,f=new ba;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Jg(this,f),this.m=o.m}else o&&(c=String(o).match(Wg))?(this.h=!1,Tl(this,c[1]||"",!0),this.o=Aa(c[2]||""),this.g=Aa(c[3]||"",!0),Al(this,c[4]),this.l=Aa(c[5]||"",!0),Jg(this,c[6]||"",!0),this.m=Aa(c[7]||"")):(this.h=!1,this.i=new ba(null,this.h))}ds.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Sa(c,tp,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Sa(c,tp,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Sa(f,f.charAt(0)=="/"?E1:v1,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Sa(f,A1)),o.join("")};function jn(o){return new ds(o)}function Tl(o,c,f){o.j=f?Aa(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Al(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Jg(o,c,f){c instanceof ba?(o.i=c,S1(o.i,o.h)):(f||(c=Sa(c,T1)),o.i=new ba(c,o.h))}function Ct(o,c,f){o.i.set(c,f)}function Sl(o){return Ct(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Aa(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Sa(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,_1),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function _1(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var tp=/[#\/\?@]/g,v1=/[#\?:]/g,E1=/[#\?]/g,T1=/[#\?@]/g,A1=/#/g;function ba(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function gi(o){o.g||(o.g=new Map,o.h=0,o.i&&y1(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=ba.prototype,e.add=function(o,c){gi(this),this.i=null,o=Ys(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function ep(o,c){gi(o),c=Ys(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function np(o,c){return gi(o),c=Ys(o,c),o.g.has(c)}e.forEach=function(o,c){gi(this),this.g.forEach(function(f,p){f.forEach(function(N){o.call(c,N,p,this)},this)},this)},e.na=function(){gi(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const N=o[p];for(let V=0;V<N.length;V++)f.push(c[p])}return f},e.V=function(o){gi(this);let c=[];if(typeof o=="string")np(this,o)&&(c=c.concat(this.g.get(Ys(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return gi(this),this.i=null,o=Ys(this,o),np(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function ip(o,c,f){ep(o,c),0<f.length&&(o.i=null,o.g.set(Ys(o,c),O(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const V=encodeURIComponent(String(p)),j=this.V(p);for(p=0;p<j.length;p++){var N=V;j[p]!==""&&(N+="="+encodeURIComponent(String(j[p]))),o.push(N)}}return this.i=o.join("&")};function Ys(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function S1(o,c){c&&!o.j&&(gi(o),o.i=null,o.g.forEach(function(f,p){var N=p.toLowerCase();p!=N&&(ep(this,p),ip(this,N,f))},o)),o.j=c}function b1(o,c){const f=new Ea;if(l.Image){const p=new Image;p.onload=y(pi,f,"TestLoadImage: loaded",!0,c,p),p.onerror=y(pi,f,"TestLoadImage: error",!1,c,p),p.onabort=y(pi,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=y(pi,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function w1(o,c){const f=new Ea,p=new AbortController,N=setTimeout(()=>{p.abort(),pi(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(V=>{clearTimeout(N),V.ok?pi(f,"TestPingServer: ok",!0,c):pi(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),pi(f,"TestPingServer: error",!1,c)})}function pi(o,c,f,p,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),p(f)}catch{}}function R1(){this.g=new l1}function I1(o,c,f){const p=f||"";try{Zg(o,function(N,V){let j=N;h(N)&&(j=ah(N)),c.push(p+V+"="+encodeURIComponent(j))})}catch(N){throw c.push(p+"type="+encodeURIComponent("_badmap")),N}}function bl(o){this.l=o.Ub||null,this.j=o.eb||!1}D(bl,oh),bl.prototype.g=function(){return new wl(this.l,this.j)},bl.prototype.i=function(o){return function(){return o}}({});function wl(o,c){ye.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(wl,ye),e=wl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Ra(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wa(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ra(this)),this.g&&(this.readyState=3,Ra(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sp(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function sp(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?wa(this):Ra(this),this.readyState==3&&sp(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,wa(this))},e.Qa=function(o){this.g&&(this.response=o,wa(this))},e.ga=function(){this.g&&wa(this)};function wa(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ra(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Ra(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function rp(o){let c="";return q(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function yh(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=rp(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Ct(o,c,f))}function Lt(o){ye.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Lt,ye);var C1=/^https?$/i,N1=["POST","PUT"];e=Lt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ch.g(),this.v=this.o?Mg(this.o):Mg(ch),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(V){ap(this,V);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var N in p)f.set(N,p[N]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const V of p.keys())f.set(V,p.get(V));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(N1,c,void 0))||p||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,j]of f)this.g.setRequestHeader(V,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{up(this),this.u=!0,this.g.send(o),this.u=!1}catch(V){ap(this,V)}};function ap(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,op(o),Rl(o)}function op(o){o.A||(o.A=!0,Ne(o,"complete"),Ne(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ne(this,"complete"),Ne(this,"abort"),Rl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rl(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?lp(this):this.bb())},e.bb=function(){lp(this)};function lp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||zn(o)!=4||o.Z()!=2)){if(o.u&&zn(o)==4)Dg(o.Ea,0,o);else if(Ne(o,"readystatechange"),zn(o)==4){o.h=!1;try{const j=o.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=j===0){var N=String(o.D).match(Wg)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),p=!C1.test(N?N.toLowerCase():"")}f=p}if(f)Ne(o,"complete"),Ne(o,"success");else{o.m=6;try{var V=2<zn(o)?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.Z()+"]",op(o)}}finally{Rl(o)}}}}function Rl(o,c){if(o.g){up(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||Ne(o,"ready");try{f.onreadystatechange=p}catch{}}}function up(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function zn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<zn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),o1(c)}};function cp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function D1(o){const c={};o=(o.g&&2<=zn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(v(o[p]))continue;var f=I(o[p]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=c[N]||[];c[N]=V,V.push(f)}T(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ia(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function hp(o){this.Aa=0,this.i=[],this.j=new Ea,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ia("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ia("baseRetryDelayMs",5e3,o),this.cb=Ia("retryDelaySeedMs",1e4,o),this.Wa=Ia("forwardChannelMaxRetries",2,o),this.wa=Ia("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Qg(o&&o.concurrentRequestLimit),this.Da=new R1,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=hp.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){De(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=Ep(this,null,this.W),Cl(this)};function _h(o){if(fp(o),o.G==3){var c=o.U++,f=jn(o.I);if(Ct(f,"SID",o.K),Ct(f,"RID",c),Ct(f,"TYPE","terminate"),Ca(o,f),c=new mi(o,o.j,c),c.L=2,c.v=Sl(jn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Tp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),El(c)}vp(o)}function Il(o){o.g&&(Eh(o),o.g.cancel(),o.g=null)}function fp(o){Il(o),o.u&&(l.clearTimeout(o.u),o.u=null),Nl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Cl(o){if(!$g(o.h)&&!o.s){o.s=!0;var c=o.Ga;G||Rt(),K||(G(),K=!0),mt.add(c,o),o.B=0}}function x1(o,c){return Yg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=va(m(o.Ga,o,c),_p(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new mi(this,this.j,o);let V=this.o;if(this.S&&(V?(V=_(V),b(V,this.S)):V=this.S),this.m!==null||this.O||(N.H=V,V=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=mp(this,N,c),f=jn(this.I),Ct(f,"RID",o),Ct(f,"CVER",22),this.D&&Ct(f,"X-HTTP-Session-Id",this.D),Ca(this,f),V&&(this.O?c="headers="+encodeURIComponent(String(rp(V)))+"&"+c:this.m&&yh(f,this.m,V)),ph(this.h,N),this.Ua&&Ct(f,"TYPE","init"),this.P?(Ct(f,"$req",c),Ct(f,"SID","null"),N.T=!0,fh(N,f,null)):fh(N,f,c),this.G=2}}else this.G==3&&(o?dp(this,o):this.i.length==0||$g(this.h)||dp(this))};function dp(o,c){var f;c?f=c.l:f=o.U++;const p=jn(o.I);Ct(p,"SID",o.K),Ct(p,"RID",f),Ct(p,"AID",o.T),Ca(o,p),o.m&&o.o&&yh(p,o.m,o.o),f=new mi(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=mp(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),ph(o.h,f),fh(f,p,c)}function Ca(o,c){o.H&&q(o.H,function(f,p){Ct(c,p,f)}),o.l&&Zg({},function(f,p){Ct(c,p,f)})}function mp(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let V=-1;for(;;){const j=["count="+f];V==-1?0<f?(V=N[0].g,j.push("ofs="+V)):V=0:j.push("ofs="+V);let At=!0;for(let ue=0;ue<f;ue++){let ht=N[ue].g;const _e=N[ue].map;if(ht-=V,0>ht)V=Math.max(0,N[ue].g-100),At=!1;else try{I1(_e,j,"req"+ht+"_")}catch{p&&p(_e)}}if(At){p=j.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function gp(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;G||Rt(),K||(G(),K=!0),mt.add(c,o),o.v=0}}function vh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=va(m(o.Fa,o),_p(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,pp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=va(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,De(10),Il(this),pp(this))};function Eh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function pp(o){o.g=new mi(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=jn(o.qa);Ct(c,"RID","rpc"),Ct(c,"SID",o.K),Ct(c,"AID",o.T),Ct(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ct(c,"TO",o.ja),Ct(c,"TYPE","xmlhttp"),Ca(o,c),o.m&&o.o&&yh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Sl(jn(c)),f.m=null,f.P=!0,Hg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Il(this),vh(this),De(19))};function Nl(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function yp(o,c){var f=null;if(o.g==c){Nl(o),Eh(o),o.g=null;var p=2}else if(gh(o.h,c))f=c.D,Kg(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;p=yl(),Ne(p,new jg(p,f)),Cl(o)}else gp(o);else if(N=c.s,N==3||N==0&&0<c.X||!(p==1&&x1(o,c)||p==2&&vh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:ms(o,5);break;case 4:ms(o,10);break;case 3:ms(o,6);break;default:ms(o,2)}}}function _p(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function ms(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const N=!p;p=new ds(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Tl(p,"https"),Sl(p),N?b1(p.toString(),f):w1(p.toString(),f)}else De(2);o.G=0,o.l&&o.l.sa(c),vp(o),fp(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function vp(o){if(o.G=0,o.ka=[],o.l){const c=Xg(o.h);(c.length!=0||o.i.length!=0)&&(M(o.ka,c),M(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function Ep(o,c,f){var p=f instanceof ds?jn(f):new ds(f);if(p.g!="")c&&(p.g=c+"."+p.g),Al(p,p.s);else{var N=l.location;p=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var V=new ds(null);p&&Tl(V,p),c&&(V.g=c),N&&Al(V,N),f&&(V.l=f),p=V}return f=o.D,c=o.ya,f&&c&&Ct(p,f,c),Ct(p,"VER",o.la),Ca(o,p),p}function Tp(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Lt(new bl({eb:f})):new Lt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ap(){}e=Ap.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Dl(){}Dl.prototype.g=function(o,c){return new Be(o,c)};function Be(o,c){ye.call(this),this.g=new hp(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Ks(this)}D(Be,ye),Be.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Be.prototype.close=function(){_h(this.g)},Be.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=ah(o),o=f);c.i.push(new m1(c.Ya++,o)),c.G==3&&Cl(c)},Be.prototype.N=function(){this.g.l=null,delete this.j,_h(this.g),delete this.g,Be.aa.N.call(this)};function Sp(o){lh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}D(Sp,lh);function bp(){uh.call(this),this.status=1}D(bp,uh);function Ks(o){this.g=o}D(Ks,Ap),Ks.prototype.ua=function(){Ne(this.g,"a")},Ks.prototype.ta=function(o){Ne(this.g,new Sp(o))},Ks.prototype.sa=function(o){Ne(this.g,new bp)},Ks.prototype.ra=function(){Ne(this.g,"b")},Dl.prototype.createWebChannel=Dl.prototype.g,Be.prototype.send=Be.prototype.o,Be.prototype.open=Be.prototype.m,Be.prototype.close=Be.prototype.close,H0=function(){return new Dl},q0=function(){return yl()},B0=hs,gd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_l.NO_ERROR=0,_l.TIMEOUT=8,_l.HTTP_ERROR=6,fu=_l,zg.COMPLETE="complete",z0=zg,kg.EventType=ya,ya.OPEN="a",ya.CLOSE="b",ya.ERROR="c",ya.MESSAGE="d",ye.prototype.listen=ye.prototype.K,Ba=kg,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,j0=Lt}).apply(typeof $l<"u"?$l:typeof self<"u"?self:typeof window<"u"?window:{});const l_="@firebase/firestore",u_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Te.UNAUTHENTICATED=new Te(null),Te.GOOGLE_CREDENTIALS=new Te("google-credentials-uid"),Te.FIRST_PARTY=new Te("first-party-uid"),Te.MOCK_USER=new Te("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new km("@firebase/firestore");function ir(){return Ms.logLevel}function H(e,...t){if(Ms.logLevel<=rt.DEBUG){const n=t.map(Lm);Ms.debug(`Firestore (${oa}): ${e}`,...n)}}function ai(e,...t){if(Ms.logLevel<=rt.ERROR){const n=t.map(Lm);Ms.error(`Firestore (${oa}): ${e}`,...n)}}function Qr(e,...t){if(Ms.logLevel<=rt.WARN){const n=t.map(Lm);Ms.warn(`Firestore (${oa}): ${e}`,...n)}}function Lm(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,G0(e,i,n)}function G0(e,t,n){let i=`FIRESTORE (${oa}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ai(i),new Error(i)}function ct(e,t,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,e||G0(t,s,i)}function tt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends fi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class dI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Te.UNAUTHENTICATED))}shutdown(){}}class mI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gI{constructor(t){this.t=t,this.currentUser=Te.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ct(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ti,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ti)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ct(typeof i.accessToken=="string",31837,{l:i}),new F0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ct(t===null||typeof t=="string",2055,{h:t}),new Te(t)}}class pI{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Te.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yI{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new pI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Te.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class c_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _I{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ct(this.o===void 0,3512);const i=r=>{r.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new c_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new c_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=vI(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%62))}return i}}function at(e,t){return e<t?-1:e>t?1:0}function pd(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.charAt(i),r=t.charAt(i);if(s!==r)return uf(s)===uf(r)?at(s,r):uf(s)?1:-1}return at(e.length,t.length)}const EI=55296,TI=57343;function uf(e){const t=e.charCodeAt(0);return t>=EI&&t<=TI}function $r(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="__name__";class Sn{constructor(t,n,i){n===void 0?n=0:n>t.length&&Y(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Y(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Sn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Sn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=Sn.compareSegments(t.get(s),n.get(s));if(r!==0)return r}return at(t.length,n.length)}static compareSegments(t,n){const i=Sn.isNumericId(t),s=Sn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Sn.extractNumericId(t).compare(Sn.extractNumericId(n)):pd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return $i.fromString(t.substring(4,t.length-2))}}class Et extends Sn{construct(t,n,i){return new Et(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Et(n)}static emptyPath(){return new Et([])}}const AI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class de extends Sn{construct(t,n,i){return new de(t,n,i)}static isValidIdentifier(t){return AI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),de.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===h_}static keyField(){return new de([h_])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new de(n)}static emptyPath(){return new de([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.path=t}static fromPath(t){return new $(Et.fromString(t))}static fromName(t){return new $(Et.fromString(t).popFirst(5))}static empty(){return new $(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Et.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Et.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new $(new Et(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(e,t,n){if(!n)throw new z(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function SI(e,t,n,i){if(t===!0&&i===!0)throw new z(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function f_(e){if(!$.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function d_(e){if($.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function $0(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Uc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Y(12329,{type:typeof e})}function We(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uc(e);throw new z(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(e,t){const n={typeString:e};return t&&(n.value=t),n}function nl(e,t){if(!$0(e))throw new z(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const s=t[i].typeString,r="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new z(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=-62135596800,g_=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(t){return Nt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*g_);return new Nt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<m_)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/g_}_compareTo(t){return this.seconds===t.seconds?at(this.nanoseconds,t.nanoseconds):at(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(nl(t,Nt._jsonSchema))return new Nt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-m_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:$t("string",Nt._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(t){return new Z(t)}static min(){return new Z(new Nt(0,0))}static max(){return new Z(new Nt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=-1;function bI(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(i===1e9?new Nt(n+1,0):new Nt(n,i));return new ts(s,$.empty(),t)}function wI(e){return new ts(e.readTime,e.key,No)}class ts{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new ts(Z.min(),$.empty(),No)}static max(){return new ts(Z.max(),$.empty(),No)}}function RI(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=$.comparator(e.documentKey,t.documentKey),n!==0?n:at(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==II)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let s=0,r=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(s=>s?P.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new P((i,s)=>{const r=t.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===r&&i(a)},d=>s(d))}})}static doWhile(t,n){return new P((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function NI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ua(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Lc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=-1;function il(e){return e==null}function tc(e){return e===0&&1/e==-1/0}function DI(e){return typeof e=="number"&&Number.isInteger(e)&&!tc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="";function xI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=p_(t)),t=OI(e.get(n),t);return p_(t)}function OI(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const r=e.charAt(s);switch(r){case"\0":n+="";break;case Y0:n+="";break;default:n+=r}}return n}function p_(e){return e+Y0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function us(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function K0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t,n){this.comparator=t,this.root=n||he.EMPTY}insert(t,n){return new Ut(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,he.BLACK,null,null))}remove(t){return new Ut(this.comparator,this.root.remove(t,this.comparator).copy(null,null,he.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Yl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Yl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Yl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Yl(this.root,t,this.comparator,!0)}}class Yl{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class he{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??he.RED,this.left=s??he.EMPTY,this.right=r??he.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new he(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return he.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return he.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,he.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,he.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Y(27949);return t+(this.isRed()?0:1)}}he.EMPTY=null,he.RED=!0,he.BLACK=!1;he.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(t,n,i,s,r){return this}insert(t,n,i){return new he(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.comparator=t,this.data=new Ut(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new __(this.data.getIterator())}getIteratorFrom(t){return new __(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Zt)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Zt(this.comparator);return n.data=t,n}}class __{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.fields=t,t.sort(de.comparator)}static empty(){return new $e([])}unionWith(t){let n=new Zt(de.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new $e(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return $r(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new X0("Invalid base64 string: "+r):r}}(t);return new pe(n)}static fromUint8Array(t){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(t);return new pe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return at(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}pe.EMPTY_BYTE_STRING=new pe("");const VI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(e){if(ct(!!e,39018),typeof e=="string"){let t=0;const n=VI.exec(e);if(ct(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ht(e.seconds),nanos:Ht(e.nanos)}}function Ht(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ns(e){return typeof e=="string"?pe.fromBase64String(e):pe.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="server_timestamp",W0="__type__",J0="__previous_value__",tA="__local_write_time__";function Bm(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[W0])==null?void 0:i.stringValue)===Z0}function jc(e){const t=e.mapValue.fields[J0];return Bm(t)?jc(t):t}function Do(e){const t=es(e.mapValue.fields[tA].timestampValue);return new Nt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(t,n,i,s,r,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const ec="(default)";class xo{constructor(t,n){this.projectId=t,this.database=n||ec}static empty(){return new xo("","")}get isDefaultDatabase(){return this.database===ec}isEqual(t){return t instanceof xo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="__type__",kI="__max__",Kl={mapValue:{}},nA="__vector__",nc="value";function is(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Bm(e)?4:UI(e)?9007199254740991:PI(e)?10:11:Y(28295,{value:e})}function Pn(e,t){if(e===t)return!0;const n=is(e);if(n!==is(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Do(e).isEqual(Do(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=es(s.timestampValue),l=es(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return ns(s.bytesValue).isEqual(ns(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return Ht(s.geoPointValue.latitude)===Ht(r.geoPointValue.latitude)&&Ht(s.geoPointValue.longitude)===Ht(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Ht(s.integerValue)===Ht(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=Ht(s.doubleValue),l=Ht(r.doubleValue);return a===l?tc(a)===tc(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return $r(e.arrayValue.values||[],t.arrayValue.values||[],Pn);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(y_(a)!==y_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Pn(a[u],l[u])))return!1;return!0}(e,t);default:return Y(52216,{left:e})}}function Oo(e,t){return(e.values||[]).find(n=>Pn(n,t))!==void 0}function Yr(e,t){if(e===t)return 0;const n=is(e),i=is(t);if(n!==i)return at(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return at(e.booleanValue,t.booleanValue);case 2:return function(r,a){const l=Ht(r.integerValue||r.doubleValue),u=Ht(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return v_(e.timestampValue,t.timestampValue);case 4:return v_(Do(e),Do(t));case 5:return pd(e.stringValue,t.stringValue);case 6:return function(r,a){const l=ns(r),u=ns(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=at(l[h],u[h]);if(d!==0)return d}return at(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,a){const l=at(Ht(r.latitude),Ht(a.latitude));return l!==0?l:at(Ht(r.longitude),Ht(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return E_(e.arrayValue,t.arrayValue);case 10:return function(r,a){var m,y,D,O;const l=r.fields||{},u=a.fields||{},h=(m=l[nc])==null?void 0:m.arrayValue,d=(y=u[nc])==null?void 0:y.arrayValue,g=at(((D=h==null?void 0:h.values)==null?void 0:D.length)||0,((O=d==null?void 0:d.values)==null?void 0:O.length)||0);return g!==0?g:E_(h,d)}(e.mapValue,t.mapValue);case 11:return function(r,a){if(r===Kl.mapValue&&a===Kl.mapValue)return 0;if(r===Kl.mapValue)return 1;if(a===Kl.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=pd(u[g],d[g]);if(m!==0)return m;const y=Yr(l[u[g]],h[d[g]]);if(y!==0)return y}return at(u.length,d.length)}(e.mapValue,t.mapValue);default:throw Y(23264,{he:n})}}function v_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return at(e,t);const n=es(e),i=es(t),s=at(n.seconds,i.seconds);return s!==0?s:at(n.nanos,i.nanos)}function E_(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Yr(n[s],i[s]);if(r)return r}return at(n.length,i.length)}function Kr(e){return yd(e)}function yd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=es(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ns(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return $.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=yd(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${yd(n.fields[a])}`;return s+"}"}(e.mapValue):Y(61005,{value:e})}function du(e){switch(is(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=jc(e);return t?16+du(t):16;case 5:return 2*e.stringValue.length;case 6:return ns(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+du(r),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return us(i.fields,(r,a)=>{s+=r.length+du(a)}),s}(e.mapValue);default:throw Y(13486,{value:e})}}function T_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function _d(e){return!!e&&"integerValue"in e}function qm(e){return!!e&&"arrayValue"in e}function A_(e){return!!e&&"nullValue"in e}function S_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function mu(e){return!!e&&"mapValue"in e}function PI(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[eA])==null?void 0:i.stringValue)===nA}function oo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return us(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=oo(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=oo(e.arrayValue.values[n]);return t}return{...e}}function UI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===kI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(t){this.value=t}static empty(){return new Oe({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!mu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=oo(n)}setAll(t){let n=de.emptyPath(),i={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=oo(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());mu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Pn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];mu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){us(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new Oe(oo(this.value))}}function iA(e){const t=[];return us(e.fields,(n,i)=>{const s=new de([n]);if(mu(i)){const r=iA(i.mapValue).fields;if(r.length===0)t.push(s);else for(const a of r)t.push(s.child(a))}else t.push(s)}),new $e(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t,n,i,s,r,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ie(t,0,Z.min(),Z.min(),Z.min(),Oe.empty(),0)}static newFoundDocument(t,n,i,s){return new ie(t,1,n,Z.min(),i,s,0)}static newNoDocument(t,n){return new ie(t,2,n,Z.min(),Z.min(),Oe.empty(),0)}static newUnknownDocument(t,n){return new ie(t,3,n,Z.min(),Z.min(),Oe.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Oe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Oe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ie&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ie(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t,n){this.position=t,this.inclusive=n}}function b_(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],a=e.position[s];if(r.field.isKeyField()?i=$.comparator($.fromName(a.referenceValue),n.key):i=Yr(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function w_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Pn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(t,n="asc"){this.field=t,this.dir=n}}function LI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{}class Qt extends sA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new zI(t,n,i):n==="array-contains"?new HI(t,i):n==="in"?new GI(t,i):n==="not-in"?new FI(t,i):n==="array-contains-any"?new QI(t,i):new Qt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new BI(t,i):new qI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Yr(n,this.value)):n!==null&&is(this.value)===is(n)&&this.matchesComparison(Yr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yn extends sA{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new yn(t,n)}matches(t){return rA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rA(e){return e.op==="and"}function aA(e){return jI(e)&&rA(e)}function jI(e){for(const t of e.filters)if(t instanceof yn)return!1;return!0}function vd(e){if(e instanceof Qt)return e.field.canonicalString()+e.op.toString()+Kr(e.value);if(aA(e))return e.filters.map(t=>vd(t)).join(",");{const t=e.filters.map(n=>vd(n)).join(",");return`${e.op}(${t})`}}function oA(e,t){return e instanceof Qt?function(i,s){return s instanceof Qt&&i.op===s.op&&i.field.isEqual(s.field)&&Pn(i.value,s.value)}(e,t):e instanceof yn?function(i,s){return s instanceof yn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&oA(a,s.filters[l]),!0):!1}(e,t):void Y(19439)}function lA(e){return e instanceof Qt?function(n){return`${n.field.canonicalString()} ${n.op} ${Kr(n.value)}`}(e):e instanceof yn?function(n){return n.op.toString()+" {"+n.getFilters().map(lA).join(" ,")+"}"}(e):"Filter"}class zI extends Qt{constructor(t,n,i){super(t,n,i),this.key=$.fromName(i.referenceValue)}matches(t){const n=$.comparator(t.key,this.key);return this.matchesComparison(n)}}class BI extends Qt{constructor(t,n){super(t,"in",n),this.keys=uA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class qI extends Qt{constructor(t,n){super(t,"not-in",n),this.keys=uA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function uA(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>$.fromName(i.referenceValue))}class HI extends Qt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return qm(n)&&Oo(n.arrayValue,this.value)}}class GI extends Qt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Oo(this.value.arrayValue,n)}}class FI extends Qt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Oo(this.value.arrayValue,n)}}class QI extends Qt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Oo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(t,n=null,i=[],s=[],r=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function R_(e,t=null,n=[],i=[],s=null,r=null,a=null){return new $I(e,t,n,i,s,r,a)}function Hm(e){const t=tt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>vd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),il(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Kr(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Kr(i)).join(",")),t.Te=n}return t.Te}function Gm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!LI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!oA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!w_(e.startAt,t.startAt)&&w_(e.endAt,t.endAt)}function Ed(e){return $.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t,n=null,i=[],s=[],r=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function YI(e,t,n,i,s,r,a,l){return new ca(e,t,n,i,s,r,a,l)}function zc(e){return new ca(e)}function I_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function cA(e){return e.collectionGroup!==null}function lo(e){const t=tt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Zt(de.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Vo(r,i))}),n.has(de.keyField().canonicalString())||t.Ie.push(new Vo(de.keyField(),i))}return t.Ie}function Dn(e){const t=tt(e);return t.Ee||(t.Ee=KI(t,lo(e))),t.Ee}function KI(e,t){if(e.limitType==="F")return R_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Vo(s.field,r)});const n=e.endAt?new ic(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ic(e.startAt.position,e.startAt.inclusive):null;return R_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Td(e,t){const n=e.filters.concat([t]);return new ca(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ad(e,t,n){return new ca(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Bc(e,t){return Gm(Dn(e),Dn(t))&&e.limitType===t.limitType}function hA(e){return`${Hm(Dn(e))}|lt:${e.limitType}`}function sr(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>lA(s)).join(", ")}]`),il(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Kr(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Kr(s)).join(",")),`Target(${i})`}(Dn(e))}; limitType=${e.limitType})`}function qc(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):$.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of lo(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(a,l,u){const h=b_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,lo(i),s)||i.endAt&&!function(a,l,u){const h=b_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,lo(i),s))}(e,t)}function XI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fA(e){return(t,n)=>{let i=!1;for(const s of lo(e)){const r=ZI(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function ZI(e,t,n){const i=e.field.isKeyField()?$.comparator(t.key,n.key):function(r,a,l){const u=a.data.field(r),h=l.data.field(r);return u!==null&&h!==null?Yr(u,h):Y(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Y(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){us(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return K0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=new Ut($.comparator);function oi(){return WI}const dA=new Ut($.comparator);function qa(...e){let t=dA;for(const n of e)t=t.insert(n.key,n);return t}function mA(e){let t=dA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Es(){return uo()}function gA(){return uo()}function uo(){return new Bs(e=>e.toString(),(e,t)=>e.isEqual(t))}const JI=new Ut($.comparator),tC=new Zt($.comparator);function ot(...e){let t=tC;for(const n of e)t=t.add(n);return t}const eC=new Zt(at);function nC(){return eC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(t)?"-0":t}}function pA(e){return{integerValue:""+e}}function iC(e,t){return DI(t)?pA(t):Fm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(){this._=void 0}}function sC(e,t,n){return e instanceof Mo?function(s,r){const a={fields:{[W0]:{stringValue:Z0},[tA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Bm(r)&&(r=jc(r)),r&&(a.fields[J0]=r),{mapValue:a}}(n,t):e instanceof ko?_A(e,t):e instanceof Po?vA(e,t):function(s,r){const a=yA(s,r),l=C_(a)+C_(s.Ae);return _d(a)&&_d(s.Ae)?pA(l):Fm(s.serializer,l)}(e,t)}function rC(e,t,n){return e instanceof ko?_A(e,t):e instanceof Po?vA(e,t):n}function yA(e,t){return e instanceof sc?function(i){return _d(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class Mo extends Hc{}class ko extends Hc{constructor(t){super(),this.elements=t}}function _A(e,t){const n=EA(t);for(const i of e.elements)n.some(s=>Pn(s,i))||n.push(i);return{arrayValue:{values:n}}}class Po extends Hc{constructor(t){super(),this.elements=t}}function vA(e,t){let n=EA(t);for(const i of e.elements)n=n.filter(s=>!Pn(s,i));return{arrayValue:{values:n}}}class sc extends Hc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function C_(e){return Ht(e.integerValue||e.doubleValue)}function EA(e){return qm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(t,n){this.field=t,this.transform=n}}function oC(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof ko&&s instanceof ko||i instanceof Po&&s instanceof Po?$r(i.elements,s.elements,Pn):i instanceof sc&&s instanceof sc?Pn(i.Ae,s.Ae):i instanceof Mo&&s instanceof Mo}(e.transform,t.transform)}class lC{constructor(t,n){this.version=t,this.transformResults=n}}class me{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new me}static exists(t){return new me(void 0,t)}static updateTime(t){return new me(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function gu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Gc{}function TA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Fc(e.key,me.none()):new sl(e.key,e.data,me.none());{const n=e.data,i=Oe.empty();let s=new Zt(de.comparator);for(let r of t.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new cs(e.key,i,new $e(s.toArray()),me.none())}}function uC(e,t,n){e instanceof sl?function(s,r,a){const l=s.value.clone(),u=D_(s.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof cs?function(s,r,a){if(!gu(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=D_(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(AA(s)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function co(e,t,n,i){return e instanceof sl?function(r,a,l,u){if(!gu(r.precondition,a))return l;const h=r.value.clone(),d=x_(r.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof cs?function(r,a,l,u){if(!gu(r.precondition,a))return l;const h=x_(r.fieldTransforms,u,a),d=a.data;return d.setAll(AA(r)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(r,a,l){return gu(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function cC(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),r=yA(i.transform,s||null);r!=null&&(n===null&&(n=Oe.empty()),n.set(i.field,r))}return n||null}function N_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&$r(i,s,(r,a)=>oC(r,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class sl extends Gc{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class cs extends Gc{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function AA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function D_(e,t,n){const i=new Map;ct(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const r=e[s],a=r.transform,l=t.data.field(r.field);i.set(r.field,rC(a,l,n[s]))}return i}function x_(e,t,n){const i=new Map;for(const s of e){const r=s.transform,a=n.data.field(s.field);i.set(s.field,sC(r,a,t))}return i}class Fc extends Gc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SA extends Gc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&uC(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=co(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=co(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=gA();return this.mutations.forEach(s=>{const r=t.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const u=TA(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ot())}isEqual(t){return this.batchId===t.batchId&&$r(this.mutations,t.mutations,(n,i)=>N_(n,i))&&$r(this.baseMutations,t.baseMutations,(n,i)=>N_(n,i))}}class Qm{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){ct(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return JI}();const r=t.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new Qm(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,lt;function bA(e){switch(e){case k.OK:return Y(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return Y(15467,{code:e})}}function wA(e){if(e===void 0)return ai("GRPC error has no .code"),k.UNKNOWN;switch(e){case Gt.OK:return k.OK;case Gt.CANCELLED:return k.CANCELLED;case Gt.UNKNOWN:return k.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return k.INTERNAL;case Gt.UNAVAILABLE:return k.UNAVAILABLE;case Gt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Gt.NOT_FOUND:return k.NOT_FOUND;case Gt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Gt.ABORTED:return k.ABORTED;case Gt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Gt.DATA_LOSS:return k.DATA_LOSS;default:return Y(39323,{code:e})}}(lt=Gt||(Gt={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new $i([4294967295,4294967295],0);function O_(e){const t=mC().encode(e),n=new L0;return n.update(t),new Uint8Array(n.digest())}function V_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new $i([n,i],0),new $i([s,r],0)]}class $m{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ha(`Invalid padding: ${n}`);if(i<0)throw new Ha(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ha(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Ha(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=$i.fromNumber(this.ge)}ye(t,n,i){let s=t.add(n.multiply($i.fromNumber(i)));return s.compare(gC)===1&&(s=new $i([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=O_(t),[i,s]=V_(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);if(!this.we(a))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new $m(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=O_(t),[i,s]=V_(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Ha extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,rl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Qc(Z.min(),s,new Ut(at),oi(),ot())}}class rl{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new rl(i,n,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(t,n,i,s){this.be=t,this.removedTargetIds=n,this.key=i,this.De=s}}class RA{constructor(t,n){this.targetId=t,this.Ce=n}}class IA{constructor(t,n,i=pe.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class M_{constructor(){this.ve=0,this.Fe=k_(),this.Me=pe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ot(),n=ot(),i=ot();return this.Fe.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Y(38017,{changeType:r})}}),new rl(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=k_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class pC{constructor(t){this.Ge=t,this.ze=new Map,this.je=oi(),this.Je=Xl(),this.He=Xl(),this.Ye=new Ut(at)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Y(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(t){const n=t.targetId,i=t.Ce.count,s=this.ot(n);if(s){const r=s.target;if(Ed(r))if(i===0){const a=new $(r.path);this.et(n,a,ie.newNoDocument(a,Z.min()))}else ct(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=ns(i).toUint8Array()}catch(u){if(u instanceof X0)return Qr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new $m(a,s,r)}catch(u){return Qr(u instanceof Ha?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(l)||(this.et(n,r,null),s++)}),s}Tt(t){const n=new Map;this.ze.forEach((r,a)=>{const l=this.ot(a);if(l){if(r.current&&Ed(l.target)){const u=new $(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,ie.newNoDocument(u,t))}r.Be&&(n.set(a,r.ke()),r.qe())}});let i=ot();this.He.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.je.forEach((r,a)=>a.setReadTime(t));const s=new Qc(t,n,this.Ye,this.je,i);return this.je=oi(),this.Je=Xl(),this.He=Xl(),this.Ye=new Ut(at),s}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new M_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Zt(at),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Zt(at),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new M_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Xl(){return new Ut($.comparator)}function k_(){return new Ut($.comparator)}const yC={asc:"ASCENDING",desc:"DESCENDING"},_C={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vC={and:"AND",or:"OR"};class EC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Sd(e,t){return e.useProto3Json||il(t)?t:{value:t}}function rc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function CA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function TC(e,t){return rc(e,t.toTimestamp())}function Je(e){return ct(!!e,49232),Z.fromTimestamp(function(n){const i=es(n);return new Nt(i.seconds,i.nanos)}(e))}function Ym(e,t){return bd(e,t).canonicalString()}function bd(e,t){const n=function(s){return new Et(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function NA(e){const t=Et.fromString(e);return ct(kA(t),10190,{key:t.toString()}),t}function ac(e,t){return Ym(e.databaseId,t.path)}function ho(e,t){const n=NA(t);if(n.get(1)!==e.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new $(xA(n))}function DA(e,t){return Ym(e.databaseId,t)}function AC(e){const t=NA(e);return t.length===4?Et.emptyPath():xA(t)}function wd(e){return new Et(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function xA(e){return ct(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function P_(e,t,n){return{name:ac(e,t),fields:n.value.mapValue.fields}}function SC(e,t){return"found"in t?function(i,s){ct(!!s.found,43571),s.found.name,s.found.updateTime;const r=ho(i,s.found.name),a=Je(s.found.updateTime),l=s.found.createTime?Je(s.found.createTime):Z.min(),u=new Oe({mapValue:{fields:s.found.fields}});return ie.newFoundDocument(r,a,l,u)}(e,t):"missing"in t?function(i,s){ct(!!s.missing,3894),ct(!!s.readTime,22933);const r=ho(i,s.missing),a=Je(s.readTime);return ie.newNoDocument(r,a)}(e,t):Y(7234,{result:t})}function bC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(h,d){return h.useProto3Json?(ct(d===void 0||typeof d=="string",58123),pe.fromBase64String(d||"")):(ct(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),pe.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?k.UNKNOWN:wA(h.code);return new z(d,h.message||"")}(a);n=new IA(i,s,r,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=ho(e,i.document.name),r=Je(i.document.updateTime),a=i.document.createTime?Je(i.document.createTime):Z.min(),l=new Oe({mapValue:{fields:i.document.fields}}),u=ie.newFoundDocument(s,r,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new pu(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=ho(e,i.document),r=i.readTime?Je(i.readTime):Z.min(),a=ie.newNoDocument(s,r),l=i.removedTargetIds||[];n=new pu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=ho(e,i.document),r=i.removedTargetIds||[];n=new pu([],r,s,null)}else{if(!("filter"in t))return Y(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new dC(s,r),l=i.targetId;n=new RA(l,a)}}return n}function OA(e,t){let n;if(t instanceof sl)n={update:P_(e,t.key,t.value)};else if(t instanceof Fc)n={delete:ac(e,t.key)};else if(t instanceof cs)n={update:P_(e,t.key,t.data),updateMask:VC(t.fieldMask)};else{if(!(t instanceof SA))return Y(16599,{Vt:t.type});n={verify:ac(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof Mo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ko)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Po)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:TC(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Y(27497)}(e,t.precondition)),n}function wC(e,t){return e&&e.length>0?(ct(t!==void 0,14353),e.map(n=>function(s,r){let a=s.updateTime?Je(s.updateTime):Je(r);return a.isEqual(Z.min())&&(a=Je(r)),new lC(a,s.transformResults||[])}(n,t))):[]}function RC(e,t){return{documents:[DA(e,t.path)]}}function IC(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=DA(e,s);const r=function(h){if(h.length!==0)return MA(yn.create(h,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:rr(m.field),direction:DC(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Sd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:s}}function CC(e){let t=AC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){ct(i===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let r=[];n.where&&(r=function(g){const m=VA(g);return m instanceof yn&&aA(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(D){return new Vo(ar(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,il(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,y=g.values||[];return new ic(y,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,y=g.values||[];return new ic(y,m)}(n.endAt)),YI(t,s,a,r,l,"F",u,h)}function NC(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function VA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ar(n.unaryFilter.field);return Qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=ar(n.unaryFilter.field);return Qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ar(n.unaryFilter.field);return Qt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ar(n.unaryFilter.field);return Qt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(e):e.fieldFilter!==void 0?function(n){return Qt.create(ar(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return yn.create(n.compositeFilter.filters.map(i=>VA(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(e):Y(30097,{filter:e})}function DC(e){return yC[e]}function xC(e){return _C[e]}function OC(e){return vC[e]}function rr(e){return{fieldPath:e.canonicalString()}}function ar(e){return de.fromServerFormat(e.fieldPath)}function MA(e){return e instanceof Qt?function(n){if(n.op==="=="){if(S_(n.value))return{unaryFilter:{field:rr(n.field),op:"IS_NAN"}};if(A_(n.value))return{unaryFilter:{field:rr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(S_(n.value))return{unaryFilter:{field:rr(n.field),op:"IS_NOT_NAN"}};if(A_(n.value))return{unaryFilter:{field:rr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rr(n.field),op:xC(n.op),value:n.value}}}(e):e instanceof yn?function(n){const i=n.getFilters().map(s=>MA(s));return i.length===1?i[0]:{compositeFilter:{op:OC(n.op),filters:i}}}(e):Y(54877,{filter:e})}function VC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function kA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(t,n,i,s,r=Z.min(),a=Z.min(),l=pe.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new ki(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(t){this.yt=t}}function kC(e){const t=CC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Ad(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.Cn=new UC}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(ts.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(ts.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class UC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new Zt(Et.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new Zt(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PA=41943040;class Le{static withCacheSize(t){return new Le(t,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Le.DEFAULT_COLLECTION_PERCENTILE=10,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Le.DEFAULT=new Le(PA,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Le.DISABLED=new Le(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Xr(0)}static cr(){return new Xr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="LruGarbageCollector",LC=1048576;function j_([e,t],[n,i]){const s=at(e,n);return s===0?at(t,i):s}class jC{constructor(t){this.Ir=t,this.buffer=new Zt(j_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();j_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(L_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ua(n)?H(L_,"Ignoring IndexedDB error during garbage collection: ",n):await la(n)}await this.Vr(3e5)})}}class BC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(Lc.ce);const i=new jC(n);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(U_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,s,r,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(t,s))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(r=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),ir()<=rt.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:g})))}}function qC(e,t){return new BC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.changes=new Bs(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ie.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&co(i.mutation,s,$e.empty(),Nt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ot()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ot()){const s=Es();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let a=qa();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=Es();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ot()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,s){let r=oi();const a=uo(),l=function(){return uo()}();return n.forEach((u,h)=>{const d=i.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof cs)?r=r.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),co(d.mutation,h,d.mutation.getFieldMask(),Nt.now())):a.set(h.key,$e.empty())}),this.recalculateAndSaveOverlays(t,r).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new GC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=uo();let s=new Ut((a,l)=>a-l),r=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||$e.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(s.get(l.batchId)||ot()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=gA();d.forEach(m=>{if(!r.has(m)){const y=TA(n.get(m),i.get(m));y!==null&&g.set(m,y),r=r.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(a){return $.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):cA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):P.resolve(Es());let l=No,u=r;return a.next(h=>P.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),r.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,r)).next(()=>this.computeViews(t,u,h,ot())).next(d=>({batchId:l,changes:mA(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new $(n)).next(i=>{let s=qa();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let a=qa();return this.indexManager.getCollectionParents(t,r).next(l=>P.forEach(l,u=>{const h=function(g,m){return new ca(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(t,h,i,s).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(a=>{r.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,ie.newInvalidDocument(d)))});let l=qa();return a.forEach((u,h)=>{const d=r.get(u);d!==void 0&&co(d.mutation,h,$e.empty(),Nt.now()),qc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Je(s.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(s){return{name:s.name,query:kC(s.bundledQuery),readTime:Je(s.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.overlays=new Ut($.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Es();return P.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.St(t,n,r)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const s=Es(),r=n.length+1,a=new $(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return P.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Ut((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=r.get(h.largestBatchId);d===null&&(d=Es(),r=r.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Es(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=s)););return P.resolve(l)}St(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new fC(n,i));let r=this.qr.get(n);r===void 0&&(r=ot(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.sessionToken=pe.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this.Qr=new Zt(te.$r),this.Ur=new Zt(te.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new te(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new te(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new $(new Et([])),i=new te(n,t),s=new te(n,t+1),r=[];return this.Ur.forEachInRange([i,s],a=>{this.Gr(a),r.push(a.key)}),r}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new $(new Et([])),i=new te(n,t),s=new te(n,t+1);let r=ot();return this.Ur.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(t){const n=new te(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class te{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return $.comparator(t.key,n.key)||at(t.Yr,n.Yr)}static Kr(t,n){return at(t.Yr,n.Yr)||$.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Zt(te.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new hC(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new te(l.key,r)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return P.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?zm:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new te(n,0),s=new te(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],a=>{const l=this.Xr(a.Yr);r.push(l)}),P.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Zt(at);return n.forEach(s=>{const r=new te(s,0),a=new te(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;$.isDocumentKey(r)||(r=r.child(""));const a=new te(new $(r),0);let l=new Zt(at);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){ct(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,s=>{const r=new te(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new te(n,0),s=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(t){this.ri=t,this.docs=function(){return new Ut($.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():ie.newInvalidDocument(n))}getEntries(t,n){let i=oi();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():ie.newInvalidDocument(s))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=oi();const a=n.path,l=new $(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||RI(wI(d),i)<=0||(s.has(d.key)||qc(n,d))&&(r=r.insert(d.key,d.mutableCopy()))}return P.resolve(r)}getAllFromCollectionGroup(t,n,i,s){Y(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new ZC(this)}getSize(t){return P.resolve(this.size)}}class ZC extends HC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(t){this.persistence=t,this.si=new Bs(n=>Hm(n),Gm),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new Km,this.targetCount=0,this.ai=Xr.ur()}forEachTarget(t,n){return this.si.forEach((i,s)=>n(s)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Xr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),P.waitFor(r).next(()=>s)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(t,a))}),P.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(t,n){this.ui={},this.overlays={},this.ci=new Lc(0),this.li=!1,this.li=!0,this.hi=new YC,this.referenceDelegate=t(this),this.Pi=new WC(this),this.indexManager=new PC,this.remoteDocumentCache=function(s){return new XC(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new MC(n),this.Ii=new QC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new $C,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new KC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){H("MemoryPersistence","Starting transaction:",t);const s=new JC(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class JC extends CI{constructor(t){super(),this.currentSequenceNumber=t}}class Xm{constructor(t){this.persistence=t,this.Ri=new Km,this.Vi=null}static mi(t){return new Xm(t)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const s=$.fromPath(i);return this.gi(t,s).next(r=>{r||n.removeEntry(s,Z.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class oc{constructor(t,n){this.persistence=t,this.pi=new Bs(i=>xI(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=qC(this,n)}static mi(t,n){return new oc(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,s)=>this.br(t,i,s).next(r=>r?P.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,r.removeEntry(a,Z.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=du(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return P.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=s}static As(t,n){let i=ot(),s=ot();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Zm(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return $R()?8:NI(be())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.ys(t,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ws(t,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new tN;return this.Ss(t,n,a).next(l=>{if(r.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>r.result)}bs(t,n,i,s){return i.documentReadCount<this.fs?(ir()<=rt.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",sr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(ir()<=rt.DEBUG&&H("QueryEngine","Query:",sr(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(ir()<=rt.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",sr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Dn(n))):P.resolve())}ys(t,n){if(I_(n))return P.resolve(null);let i=Dn(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ad(n,null,"F"),i=Dn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const a=ot(...r);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,Ad(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,s){return I_(n)||s.isEqual(Z.min())?P.resolve(null):this.ps.getDocuments(t,i).next(r=>{const a=this.Ds(n,r);return this.Cs(n,a,i,s)?P.resolve(null):(ir()<=rt.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),sr(n)),this.vs(t,a,n,bI(s,No)).next(l=>l))})}Ds(t,n){let i=new Zt(fA(t));return n.forEach((s,r)=>{qc(t,r)&&(i=i.add(r))}),i}Cs(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(t,n,i){return ir()<=rt.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",sr(n)),this.ps.getDocumentsMatchingQuery(t,n,ts.min(),i)}vs(t,n,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="LocalStore",nN=3e8;class iN{constructor(t,n,i,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Ut(at),this.xs=new Bs(r=>Hm(r),Gm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new FC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function sN(e,t,n,i){return new iN(e,t,n,i)}async function LA(e,t){const n=tt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let u=ot();for(const h of s){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of r){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function rN(e,t){const n=tt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let y=P.resolve();return m.forEach(D=>{y=y.next(()=>d.getEntry(u,D)).next(O=>{const M=h.docVersions.get(D);ct(M!==null,48541),O.version.compareTo(M)<0&&(g.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),d.addEntry(O)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ot();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function jA(e){const t=tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function aN(e,t){const n=tt(e),i=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=s.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(r,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(r,d.addedDocuments,g)));let y=m.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(g)!==null?y=y.withResumeToken(pe.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,i)),s=s.insert(g,y),function(O,M,S){return O.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=nN?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,y,d)&&l.push(n.Pi.updateTargetData(r,y))});let u=oi(),h=ot();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,d))}),l.push(oN(r,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual(Z.min())){const d=n.Pi.getLastRemoteSnapshotVersion(r).next(g=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,h)).next(()=>u)}).then(r=>(n.Ms=s,r))}function oN(e,t,n){let i=ot(),s=ot();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let a=oi();return n.forEach((l,u)=>{const h=r.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(Wm,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:s}})}function lN(e,t){const n=tt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=zm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function uN(e,t){const n=tt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,t).next(r=>r?(s=r,P.resolve(s)):n.Pi.allocateTargetId(i).next(a=>(s=new ki(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Rd(e,t,n){const i=tt(e),s=i.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ua(a))throw a;H(Wm,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function z_(e,t,n){const i=tt(e);let s=Z.min(),r=ot();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=tt(u),m=g.xs.get(d);return m!==void 0?P.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,Dn(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?s:Z.min(),n?r:ot())).next(l=>(cN(i,XI(t),l),{documents:l,Qs:r})))}function cN(e,t,n){let i=e.Os.get(t)||Z.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.Os.set(t,i)}class B_{constructor(){this.activeTargetIds=nC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class hN{constructor(){this.Mo=new B_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new B_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="ConnectivityMonitor";class H_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(q_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H(q_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zl=null;function Id(){return Zl===null?Zl=function(){return 268435456+Math.round(2147483648*Math.random())}():Zl++,"0x"+Zl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="RestConnection",dN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===ec?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,n,i,s,r){const a=Id(),l=this.zo(t,n.toUriEncodedString());H(cf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,r);const{host:h}=new URL(l),d=ra(h);return this.Jo(t,l,u,i,d).then(g=>(H(cf,`Received RPC '${t}' ${a}: `,g),g),g=>{throw Qr(cf,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,s,r,a){return this.Go(t,n,i,s,r)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}zo(t,n){const i=dN[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee="WebChannelConnection";class pN extends mN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,s,r){const a=Id();return new Promise((l,u)=>{const h=new j0;h.setWithCredentials(!0),h.listenOnce(z0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case fu.NO_ERROR:const g=h.getResponseJson();H(Ee,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case fu.TIMEOUT:H(Ee,`RPC '${t}' ${a} timed out`),u(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case fu.HTTP_ERROR:const m=h.getStatus();if(H(Ee,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const D=y==null?void 0:y.error;if(D&&D.status&&D.message){const O=function(S){const v=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(v)>=0?v:k.UNKNOWN}(D.status);u(new z(O,D.message))}else u(new z(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new z(k.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(Ee,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(s);H(Ee,`RPC '${t}' ${a} sending request:`,s),h.send(n,"POST",d,i,15)})}T_(t,n,i){const s=Id(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=H0(),l=q0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=r.join("");H(Ee,`Creating RPC '${t}' stream ${s}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,y=!1;const D=new gN({Yo:M=>{y?H(Ee,`Not sending because RPC '${t}' stream ${s} is closed:`,M):(m||(H(Ee,`Opening RPC '${t}' stream ${s} transport.`),g.open(),m=!0),H(Ee,`RPC '${t}' stream ${s} sending:`,M),g.send(M))},Zo:()=>g.close()}),O=(M,S,v)=>{M.listen(S,w=>{try{v(w)}catch(x){setTimeout(()=>{throw x},0)}})};return O(g,Ba.EventType.OPEN,()=>{y||(H(Ee,`RPC '${t}' stream ${s} transport opened.`),D.o_())}),O(g,Ba.EventType.CLOSE,()=>{y||(y=!0,H(Ee,`RPC '${t}' stream ${s} transport closed`),D.a_(),this.E_(g))}),O(g,Ba.EventType.ERROR,M=>{y||(y=!0,Qr(Ee,`RPC '${t}' stream ${s} transport errored. Name:`,M.name,"Message:",M.message),D.a_(new z(k.UNAVAILABLE,"The operation could not be completed")))}),O(g,Ba.EventType.MESSAGE,M=>{var S;if(!y){const v=M.data[0];ct(!!v,16349);const w=v,x=(w==null?void 0:w.error)||((S=w[0])==null?void 0:S.error);if(x){H(Ee,`RPC '${t}' stream ${s} received error:`,x);const L=x.status;let q=function(A){const b=Gt[A];if(b!==void 0)return wA(b)}(L),T=x.message;q===void 0&&(q=k.INTERNAL,T="Unknown error status: "+L+" with message "+x.message),y=!0,D.a_(new z(q,T)),g.close()}else H(Ee,`RPC '${t}' stream ${s} received:`,v),D.u_(v)}}),O(l,B0.STAT_EVENT,M=>{M.stat===gd.PROXY?H(Ee,`RPC '${t}' stream ${s} detected buffering proxy`):M.stat===gd.NOPROXY&&H(Ee,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function hf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(e){return new EC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(t,n,i=1e3,s=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="PersistentStream";class zA{constructor(t,n,i,s,r,a,l,u){this.Mi=t,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jm(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(ai(n.toString()),ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{t(()=>{const s=new z(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return H(G_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(H(G_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yN extends zA{constructor(t,n,i,s,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=bC(this.serializer,t),i=function(r){if(!("targetChange"in r))return Z.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?Je(a.readTime):Z.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=wd(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=Ed(u)?{documents:RC(r,u)}:{query:IC(r,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=CA(r,a.resumeToken);const h=Sd(r,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Z.min())>0){l.readTime=rc(r,a.snapshotVersion.toTimestamp());const h=Sd(r,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=NC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=wd(this.serializer),n.removeTarget=t,this.q_(n)}}class _N extends zA{constructor(t,n,i,s,r,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ct(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ct(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ct(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=wC(t.writeResults,t.commitTime),i=Je(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=wd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>OA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{}class EN extends vN{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Go(t,bd(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new z(k.UNKNOWN,r.toString())})}Ho(t,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,bd(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class TN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ai(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="RemoteStore";class AN{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{qs(this)&&(H(ks,"Restarting streams for network reachability change."),await async function(u){const h=tt(u);h.Ea.add(4),await al(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Yc(h)}(this))})}),this.Ra=new TN(i,s)}}async function Yc(e){if(qs(e))for(const t of e.da)await t(!0)}async function al(e){for(const t of e.da)await t(!1)}function BA(e,t){const n=tt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),ig(n)?ng(n):ha(n).O_()&&eg(n,t))}function tg(e,t){const n=tt(e),i=ha(n);n.Ia.delete(t),i.O_()&&qA(n,t),n.Ia.size===0&&(i.O_()?i.L_():qs(n)&&n.Ra.set("Unknown"))}function eg(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Z.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ha(e).Y_(t)}function qA(e,t){e.Va.Ue(t),ha(e).Z_(t)}function ng(e){e.Va=new pC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),ha(e).start(),e.Ra.ua()}function ig(e){return qs(e)&&!ha(e).x_()&&e.Ia.size>0}function qs(e){return tt(e).Ea.size===0}function HA(e){e.Va=void 0}async function SN(e){e.Ra.set("Online")}async function bN(e){e.Ia.forEach((t,n)=>{eg(e,t)})}async function wN(e,t){HA(e),ig(e)?(e.Ra.ha(t),ng(e)):e.Ra.set("Unknown")}async function RN(e,t,n){if(e.Ra.set("Online"),t instanceof IA&&t.state===2&&t.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(e,t)}catch(i){H(ks,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await lc(e,i)}else if(t instanceof pu?e.Va.Ze(t):t instanceof RA?e.Va.st(t):e.Va.tt(t),!n.isEqual(Z.min()))try{const i=await jA(e.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=r.Ia.get(h);d&&r.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=r.Ia.get(u);if(!d)return;r.Ia.set(u,d.withResumeToken(pe.EMPTY_BYTE_STRING,d.snapshotVersion)),qA(r,u);const g=new ki(d.target,u,h,d.sequenceNumber);eg(r,g)}),r.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){H(ks,"Failed to raise snapshot:",i),await lc(e,i)}}async function lc(e,t,n){if(!ua(t))throw t;e.Ea.add(1),await al(e),e.Ra.set("Offline"),n||(n=()=>jA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{H(ks,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Yc(e)})}function GA(e,t){return t().catch(n=>lc(e,n,t))}async function Kc(e){const t=tt(e),n=ss(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:zm;for(;IN(t);)try{const s=await lN(t.localStore,i);if(s===null){t.Ta.length===0&&n.L_();break}i=s.batchId,CN(t,s)}catch(s){await lc(t,s)}FA(t)&&QA(t)}function IN(e){return qs(e)&&e.Ta.length<10}function CN(e,t){e.Ta.push(t);const n=ss(e);n.O_()&&n.X_&&n.ea(t.mutations)}function FA(e){return qs(e)&&!ss(e).x_()&&e.Ta.length>0}function QA(e){ss(e).start()}async function NN(e){ss(e).ra()}async function DN(e){const t=ss(e);for(const n of e.Ta)t.ea(n.mutations)}async function xN(e,t,n){const i=e.Ta.shift(),s=Qm.from(i,t,n);await GA(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Kc(e)}async function ON(e,t){t&&ss(e).X_&&await async function(i,s){if(function(a){return bA(a)&&a!==k.ABORTED}(s.code)){const r=i.Ta.shift();ss(i).B_(),await GA(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Kc(i)}}(e,t),FA(e)&&QA(e)}async function F_(e,t){const n=tt(e);n.asyncQueue.verifyOperationInProgress(),H(ks,"RemoteStore received new credentials");const i=qs(n);n.Ea.add(3),await al(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Yc(n)}async function VN(e,t){const n=tt(e);t?(n.Ea.delete(2),await Yc(n)):t||(n.Ea.add(2),await al(n),n.Ra.set("Unknown"))}function ha(e){return e.ma||(e.ma=function(n,i,s){const r=tt(n);return r.sa(),new yN(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:SN.bind(null,e),t_:bN.bind(null,e),r_:wN.bind(null,e),H_:RN.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),ig(e)?ng(e):e.Ra.set("Unknown")):(await e.ma.stop(),HA(e))})),e.ma}function ss(e){return e.fa||(e.fa=function(n,i,s){const r=tt(n);return r.sa(),new _N(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:NN.bind(null,e),r_:ON.bind(null,e),ta:DN.bind(null,e),na:xN.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Kc(e)):(await e.fa.stop(),e.Ta.length>0&&(H(ks,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const a=Date.now()+i,l=new sg(t,n,a,s,r);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rg(e,t){if(ai("AsyncQueue",`${t}: ${e}`),ua(e))return new z(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{static emptySet(t){return new Nr(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||$.comparator(n.key,i.key):(n,i)=>$.comparator(n.key,i.key),this.keyedMap=qa(),this.sortedSet=new Ut(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Nr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Nr;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.ga=new Ut($.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Y(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class Zr{constructor(t,n,i,s,r,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Zr(t,n,Nr.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class kN{constructor(){this.queries=$_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=tt(n),r=s.queries;s.queries=$_(),r.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new z(k.ABORTED,"Firestore shutting down"))}}function $_(){return new Bs(e=>hA(e),Bc)}async function $A(e,t){const n=tt(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.ba()&&t.Da()&&(i=2):(r=new MN,i=t.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=rg(a,`Initialization of query '${sr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&ag(n)}async function YA(e,t){const n=tt(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const a=r.Sa.indexOf(t);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?s=t.Da()?0:1:!r.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function PN(e,t){const n=tt(e);let i=!1;for(const s of t){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.Sa)l.Fa(s)&&(i=!0);a.wa=s}}i&&ag(n)}function UN(e,t,n){const i=tt(e),s=i.queries.get(t);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(t)}function ag(e){e.Ca.forEach(t=>{t.next()})}var Cd,Y_;(Y_=Cd||(Cd={})).Ma="default",Y_.Cache="cache";class KA{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new Zr(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Zr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Cd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(t){this.key=t}}class ZA{constructor(t){this.key=t}}class LN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ot(),this.mutatedKeys=ot(),this.eu=fA(t),this.tu=new Nr(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new Q_,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,g)=>{const m=s.get(d),y=qc(this.query,g)?g:null,D=!!m&&this.mutatedKeys.has(m.key),O=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?D!==O&&(i.track({type:3,doc:y}),M=!0):this.su(m,y)||(i.track({type:2,doc:y}),M=!0,(u&&this.eu(y,u)>0||h&&this.eu(y,h)<0)&&(l=!0)):!m&&y?(i.track({type:0,doc:y}),M=!0):m&&!y&&(i.track({type:1,doc:m}),M=!0,(u||h)&&(l=!0)),M&&(y?(a=a.add(y),r=O?r.add(d):r.delete(d)):(a=a.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),r=r.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(y,D){const O=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:M})}};return O(y)-O(D)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new Zr(this.query,t.tu,r,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Q_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ot(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new ZA(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new XA(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ot();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Zr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const og="SyncEngine";class jN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class zN{constructor(t){this.key=t,this.hu=!1}}class BN{constructor(t,n,i,s,r,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Bs(l=>hA(l),Bc),this.Iu=new Map,this.Eu=new Set,this.du=new Ut($.comparator),this.Au=new Map,this.Ru=new Km,this.Vu={},this.mu=new Map,this.fu=Xr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qN(e,t,n=!0){const i=iS(e);let s;const r=i.Tu.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await WA(i,t,n,!0),s}async function HN(e,t){const n=iS(e);await WA(n,t,!0,!1)}async function WA(e,t,n,i){const s=await uN(e.localStore,Dn(t)),r=s.targetId,a=e.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await GN(e,t,r,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&BA(e.remoteStore,s),l}async function GN(e,t,n,i,s){e.pu=(g,m,y)=>async function(O,M,S,v){let w=M.view.ru(S);w.Cs&&(w=await z_(O.localStore,M.query,!1).then(({documents:T})=>M.view.ru(T,w)));const x=v&&v.targetChanges.get(M.targetId),L=v&&v.targetMismatches.get(M.targetId)!=null,q=M.view.applyChanges(w,O.isPrimaryClient,x,L);return X_(O,M.targetId,q.au),q.snapshot}(e,g,m,y);const r=await z_(e.localStore,t,!0),a=new LN(t,r.Qs),l=a.ru(r.documents),u=rl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),h=a.applyChanges(l,e.isPrimaryClient,u);X_(e,n,h.au);const d=new jN(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function FN(e,t,n){const i=tt(e),s=i.Tu.get(t),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(a=>!Bc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Rd(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&tg(i.remoteStore,s.targetId),Nd(i,s.targetId)}).catch(la)):(Nd(i,s.targetId),await Rd(i.localStore,s.targetId,!0))}async function QN(e,t){const n=tt(e),i=n.Tu.get(t),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),tg(n.remoteStore,i.targetId))}async function $N(e,t,n){const i=tD(e);try{const s=await function(a,l){const u=tt(a),h=Nt.now(),d=l.reduce((y,D)=>y.add(D.key),ot());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=oi(),O=ot();return u.Ns.getEntries(y,d).next(M=>{D=M,D.forEach((S,v)=>{v.isValidDocument()||(O=O.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(M=>{g=M;const S=[];for(const v of l){const w=cC(v,g.get(v.key).overlayedDocument);w!=null&&S.push(new cs(v.key,w,iA(w.value.mapValue),me.exists(!0)))}return u.mutationQueue.addMutationBatch(y,h,S,l)}).next(M=>{m=M;const S=M.applyToLocalDocumentSet(g,O);return u.documentOverlayCache.saveOverlays(y,M.batchId,S)})}).then(()=>({batchId:m.batchId,changes:mA(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ut(at)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,s.batchId,n),await ol(i,s.changes),await Kc(i.remoteStore)}catch(s){const r=rg(s,"Failed to persist write");n.reject(r)}}async function JA(e,t){const n=tt(e);try{const i=await aN(n.localStore,t);t.targetChanges.forEach((s,r)=>{const a=n.Au.get(r);a&&(ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ct(a.hu,14607):s.removedDocuments.size>0&&(ct(a.hu,42227),a.hu=!1))}),await ol(n,i,t)}catch(i){await la(i)}}function K_(e,t,n){const i=tt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=tt(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&ag(u)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function YN(e,t,n){const i=tt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Au.get(t),r=s&&s.key;if(r){let a=new Ut($.comparator);a=a.insert(r,ie.newNoDocument(r,Z.min()));const l=ot().add(r),u=new Qc(Z.min(),new Map,new Ut(at),a,l);await JA(i,u),i.du=i.du.remove(r),i.Au.delete(t),lg(i)}else await Rd(i.localStore,t,!1).then(()=>Nd(i,t,n)).catch(la)}async function KN(e,t){const n=tt(e),i=t.batch.batchId;try{const s=await rN(n.localStore,t);eS(n,i,null),tS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await ol(n,s)}catch(s){await la(s)}}async function XN(e,t,n){const i=tt(e);try{const s=await function(a,l){const u=tt(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ct(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);eS(i,t,n),tS(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await ol(i,s)}catch(s){await la(s)}}function tS(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function eS(e,t,n){const i=tt(e);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function Nd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||nS(e,i)})}function nS(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(tg(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),lg(e))}function X_(e,t,n){for(const i of n)i instanceof XA?(e.Ru.addReference(i.key,t),ZN(e,i)):i instanceof ZA?(H(og,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||nS(e,i.key)):Y(19791,{wu:i})}function ZN(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(H(og,"New document in limbo: "+n),e.Eu.add(i),lg(e))}function lg(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new $(Et.fromString(t)),i=e.fu.next();e.Au.set(i,new zN(n)),e.du=e.du.insert(n,i),BA(e.remoteStore,new ki(Dn(zc(n.path)),i,"TargetPurposeLimboResolution",Lc.ce))}}async function ol(e,t,n){const i=tt(e),s=[],r=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=Zm.As(u.targetId,h);r.push(g)}}))}),await Promise.all(a),i.Pu.H_(s),await async function(u,h){const d=tt(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,m=>P.forEach(m.Es,y=>d.persistence.referenceDelegate.addReference(g,m.targetId,y)).next(()=>P.forEach(m.ds,y=>d.persistence.referenceDelegate.removeReference(g,m.targetId,y)))))}catch(g){if(!ua(g))throw g;H(Wm,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const y=d.Ms.get(m),D=y.snapshotVersion,O=y.withLastLimboFreeSnapshotVersion(D);d.Ms=d.Ms.insert(m,O)}}}(i.localStore,r))}async function WN(e,t){const n=tt(e);if(!n.currentUser.isEqual(t)){H(og,"User change. New user:",t.toKey());const i=await LA(n.localStore,t);n.currentUser=t,function(r,a){r.mu.forEach(l=>{l.forEach(u=>{u.reject(new z(k.CANCELLED,a))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await ol(n,i.Ls)}}function JN(e,t){const n=tt(e),i=n.Au.get(t);if(i&&i.hu)return ot().add(i.key);{let s=ot();const r=n.Iu.get(t);if(!r)return s;for(const a of r){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function iS(e){const t=tt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=JA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=JN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=YN.bind(null,t),t.Pu.H_=PN.bind(null,t.eventManager),t.Pu.yu=UN.bind(null,t.eventManager),t}function tD(e){const t=tt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=KN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=XN.bind(null,t),t}class uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=$c(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return sN(this.persistence,new eN,t.initialUser,this.serializer)}Cu(t){return new UA(Xm.mi,this.serializer)}Du(t){return new hN}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uc.provider={build:()=>new uc};class eD extends uc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ct(this.persistence.referenceDelegate instanceof oc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new zC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Le.withCacheSize(this.cacheSizeBytes):Le.DEFAULT;return new UA(i=>oc.mi(i,n),this.serializer)}}class Dd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>K_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=WN.bind(null,this.syncEngine),await VN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new kN}()}createDatastore(t){const n=$c(t.databaseInfo.databaseId),i=function(r){return new pN(r)}(t.databaseInfo);return function(r,a,l,u){return new EN(r,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,a,l){return new AN(i,s,r,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>K_(this.syncEngine,n,0),function(){return H_.v()?new H_:new fN}())}createSyncEngine(t,n){return function(s,r,a,l,u,h,d){const g=new BN(s,r,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=tt(s);H(ks,"RemoteStore shutting down."),r.Ea.add(5),await al(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Dd.provider={build:()=>new Dd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ai("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,r){const a=tt(s),l={documents:r.map(g=>ac(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,Et.emptyPath(),l,r.length),h=new Map;u.forEach(g=>{const m=SC(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return r.forEach(g=>{const m=h.get(g.toString());ct(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Fc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const s=$.fromPath(i);this.mutations.push(new SA(s,this.precondition(s)))}),await async function(i,s){const r=tt(i),a={writes:s.map(l=>OA(r.serializer,l))};await r.Go("Commit",r.serializer.databaseId,Et.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Y(50498,{Gu:t.constructor.name});n=Z.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new z(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Z.min())?me.exists(!1):me.updateTime(n):me.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Z.min()))throw new z(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return me.updateTime(n)}return me.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(t,n,i,s,r){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new Jm(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new nD(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Yu(s)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!il(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!bA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="FirestoreClient";class sD{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Te.UNAUTHENTICATED,this.clientId=jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{H(rs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(rs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=rg(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function ff(e,t){e.asyncQueue.verifyOperationInProgress(),H(rs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await LA(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Z_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await rD(e);H(rs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>F_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>F_(t.remoteStore,s)),e._onlineComponents=t}async function rD(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(rs,"Using user provided OfflineComponentProvider");try{await ff(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===k.FAILED_PRECONDITION||s.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Qr("Error using user provided cache. Falling back to memory cache: "+n),await ff(e,new uc)}}else H(rs,"Using default OfflineComponentProvider"),await ff(e,new eD(void 0));return e._offlineComponents}async function ug(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(rs,"Using user provided OnlineComponentProvider"),await Z_(e,e._uninitializedComponentsProvider._online)):(H(rs,"Using default OnlineComponentProvider"),await Z_(e,new Dd))),e._onlineComponents}function aD(e){return ug(e).then(t=>t.syncEngine)}function oD(e){return ug(e).then(t=>t.datastore)}async function xd(e){const t=await ug(e),n=t.eventManager;return n.onListen=qN.bind(null,t.syncEngine),n.onUnlisten=FN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=HN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=QN.bind(null,t.syncEngine),n}function lD(e,t,n={}){const i=new ti;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,h){const d=new sS({next:m=>{d.Nu(),a.enqueueAndForget(()=>YA(r,g));const y=m.docs.has(l);!y&&m.fromCache?h.reject(new z(k.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?h.reject(new z(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new KA(zc(l.path),d,{includeMetadataChanges:!0,qa:!0});return $A(r,g)}(await xd(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="firestore.googleapis.com",J_=!0;class tv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aS,this.ssl=J_}else this.host=t.host,this.ssl=t.ssl??J_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=PA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<LC)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}SI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rS(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Xc{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new dI;switch(i.type){case"firstParty":return new yI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=W_.get(n);i&&(H("ComponentProvider","Removing Datastore"),W_.delete(n),i.terminate())}(this),Promise.resolve()}}function uD(e,t,n,i={}){var h;e=We(e,Xc);const s=ra(t),r=e._getSettings(),a={...r,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(D0(`https://${l}`),x0("Firestore",!0)),r.host!==aS&&r.host!==l&&Qr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:l,ssl:s,emulatorOptions:i};if(!Os(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=Te.MOCK_USER;else{d=LR(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Te(m)}e._authCredentials=new mI(new F0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Hs(this.firestore,t,this._query)}}class Pt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Pt(this.firestore,t,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(nl(n,Pt._jsonSchema))return new Pt(t,i||null,new $(Et.fromString(n.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:$t("string",Pt._jsonSchemaVersion),referencePath:$t("string")};class Yi extends Hs{constructor(t,n,i){super(t,n,zc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Pt(this.firestore,null,new $(t))}withConverter(t){return new Yi(this.firestore,t,this._path)}}function ev(e,t,...n){if(e=ae(e),Q0("collection","path",t),e instanceof Xc){const i=Et.fromString(t,...n);return d_(i),new Yi(e,null,i)}{if(!(e instanceof Pt||e instanceof Yi))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Et.fromString(t,...n));return d_(i),new Yi(e.firestore,null,i)}}function bn(e,t,...n){if(e=ae(e),arguments.length===1&&(t=jm.newId()),Q0("doc","path",t),e instanceof Xc){const i=Et.fromString(t,...n);return f_(i),new Pt(e,null,new $(i))}{if(!(e instanceof Pt||e instanceof Yi))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Et.fromString(t,...n));return f_(i),new Pt(e.firestore,e instanceof Yi?e.converter:null,new $(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="AsyncQueue";class iv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jm(this,"async_queue_retry"),this._c=()=>{const i=hf();i&&H(nv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=hf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=hf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ti;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ua(t))throw t;H(nv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,ai("INTERNAL UNHANDLED ERROR: ",sv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=sg.createAndSchedule(this,t,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&Y(47125,{Pc:sv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function sv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(e,["next","error","complete"])}class li extends Xc{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new iv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new iv(t),this._firestoreClient=void 0,await t}}}function cD(e,t){const n=typeof e=="object"?e:k0(),i=typeof e=="string"?e:ec,s=Um(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=PR("firestore");r&&uD(s,...r)}return s}function Zc(e){if(e._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||hD(e),e._firestoreClient}function hD(e){var i,s,r;const t=e._freezeSettings(),n=function(l,u,h,d){return new MI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,rS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((r=t.localCache)!=null&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new sD(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Qe(pe.fromBase64String(t))}catch(n){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Qe(pe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Qe._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(nl(t,Qe._jsonSchema))return Qe.fromBase64String(t.bytes)}}Qe._jsonSchemaVersion="firestore/bytes/1.0",Qe._jsonSchema={type:$t("string",Qe._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new de(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return at(this._lat,t._lat)||at(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xn._jsonSchemaVersion}}static fromJSON(t){if(nl(t,xn._jsonSchema))return new xn(t.latitude,t.longitude)}}xn._jsonSchemaVersion="firestore/geoPoint/1.0",xn._jsonSchema={type:$t("string",xn._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:On._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(nl(t,On._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new On(t.vectorValues);throw new z(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}On._jsonSchemaVersion="firestore/vectorValue/1.0",On._jsonSchema={type:$t("string",On._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=/^__.*__$/;class dD{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new cs(t,this.data,this.fieldMask,n,this.fieldTransforms):new sl(t,this.data,n,this.fieldTransforms)}}class oS{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new cs(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function lS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:e})}}class cg{constructor(t,n,i,s,r,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new cg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return cc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(lS(this.Ac)&&fD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class mD{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||$c(t)}Cc(t,n,i,s=!1){return new cg({Ac:t,methodName:n,Dc:i,path:de.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ul(e){const t=e._freezeSettings(),n=$c(e._databaseId);return new mD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function hg(e,t,n,i,s,r={}){const a=e.Cc(r.merge||r.mergeFields?2:0,t,n,s);dg("Data must be an object, but it was:",a,i);const l=hS(i,a);let u,h;if(r.merge)u=new $e(a.fieldMask),h=a.fieldTransforms;else if(r.mergeFields){const d=[];for(const g of r.mergeFields){const m=Od(t,g,n);if(!a.contains(m))throw new z(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);dS(d,m)||d.push(m)}u=new $e(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new dD(new Oe(l),u,h)}class Jc extends Wc{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Jc}}class fg extends Wc{_toFieldTransform(t){return new aC(t.path,new Mo)}isEqual(t){return t instanceof fg}}function uS(e,t,n,i){const s=e.Cc(1,t,n);dg("Data must be an object, but it was:",s,i);const r=[],a=Oe.empty();us(i,(u,h)=>{const d=mg(t,u,n);h=ae(h);const g=s.yc(d);if(h instanceof Jc)r.push(d);else{const m=cl(h,g);m!=null&&(r.push(d),a.set(d,m))}});const l=new $e(r);return new oS(a,l,s.fieldTransforms)}function cS(e,t,n,i,s,r){const a=e.Cc(1,t,n),l=[Od(t,i,n)],u=[s];if(r.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<r.length;m+=2)l.push(Od(t,r[m])),u.push(r[m+1]);const h=[],d=Oe.empty();for(let m=l.length-1;m>=0;--m)if(!dS(h,l[m])){const y=l[m];let D=u[m];D=ae(D);const O=a.yc(y);if(D instanceof Jc)h.push(y);else{const M=cl(D,O);M!=null&&(h.push(y),d.set(y,M))}}const g=new $e(h);return new oS(d,g,a.fieldTransforms)}function gD(e,t,n,i=!1){return cl(n,e.Cc(i?4:3,t))}function cl(e,t){if(fS(e=ae(e)))return dg("Unsupported field value:",t,e),hS(e,t);if(e instanceof Wc)return function(i,s){if(!lS(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let u=cl(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=ae(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return iC(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Nt.fromDate(i);return{timestampValue:rc(s.serializer,r)}}if(i instanceof Nt){const r=new Nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:rc(s.serializer,r)}}if(i instanceof xn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Qe)return{bytesValue:CA(s.serializer,i._byteString)};if(i instanceof Pt){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Ym(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof On)return function(a,l){return{mapValue:{fields:{[eA]:{stringValue:nA},[nc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Fm(l.serializer,h)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${Uc(i)}`)}(e,t)}function hS(e,t){const n={};return K0(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):us(e,(i,s)=>{const r=cl(s,t.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function fS(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Nt||e instanceof xn||e instanceof Qe||e instanceof Pt||e instanceof Wc||e instanceof On)}function dg(e,t,n){if(!fS(n)||!$0(n)){const i=Uc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Od(e,t,n){if((t=ae(t))instanceof ll)return t._internalPath;if(typeof t=="string")return mg(e,t);throw cc("Field path arguments must be of type string or ",e,!1,void 0,n)}const pD=new RegExp("[~\\*/\\[\\]]");function mg(e,t,n){if(t.search(pD)>=0)throw cc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ll(...t.split("."))._internalPath}catch{throw cc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function cc(e,t,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new z(k.INVALID_ARGUMENT,l+e+u)}function dS(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new yD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(gg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yD extends hc{data(){return super.data()}}function gg(e,t){return typeof t=="string"?mg(e,t):t instanceof ll?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pg{}class mS extends pg{}function vD(e,t,...n){let i=[];t instanceof pg&&i.push(t),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof _g).length,l=r.filter(u=>u instanceof yg).length;if(a>1||a>0&&l>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class yg extends mS{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new yg(t,n,i)}_apply(t){const n=this._parse(t);return gS(t._query,n),new Hs(t.firestore,t.converter,Td(t._query,n))}_parse(t){const n=ul(t.firestore);return function(r,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){ov(g,d);const D=[];for(const O of g)D.push(av(u,r,O));m={arrayValue:{values:D}}}else m=av(u,r,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||ov(g,d),m=gD(l,a,g,d==="in"||d==="not-in");return Qt.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class _g extends pg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new _g(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:yn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let a=s;const l=r.getFlattenedFilters();for(const u of l)gS(a,u),a=Td(a,u)}(t._query,n),new Hs(t.firestore,t.converter,Td(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vg extends mS{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new vg(t,n)}_apply(t){const n=function(s,r,a){if(s.startAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vo(r,a)}(t._query,this._field,this._direction);return new Hs(t.firestore,t.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new ca(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function ED(e,t="asc"){const n=t,i=gg("orderBy",e);return vg._create(i,n)}function av(e,t,n){if(typeof(n=ae(n))=="string"){if(n==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cA(t)&&n.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Et.fromString(n));if(!$.isDocumentKey(i))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return T_(e,new $(i))}if(n instanceof Pt)return T_(e,n._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uc(n)}.`)}function ov(e,t){if(!Array.isArray(e)||e.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function gS(e,t){const n=function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class pS{convertValue(t,n="none"){switch(is(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ht(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ns(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Y(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return us(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var i,s,r;const n=(r=(s=(i=t.fields)==null?void 0:i[nc].arrayValue)==null?void 0:s.values)==null?void 0:r.map(a=>Ht(a.doubleValue));return new On(n)}convertGeoPoint(t){return new xn(Ht(t.latitude),Ht(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=jc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Do(t));default:return null}}convertTimestamp(t){const n=es(t);return new Nt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Et.fromString(t);ct(kA(i),9688,{name:t});const s=new xo(i.get(1),i.get(3)),r=new $(i.popFirst(5));return s.isEqual(n)||ai(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class TD extends pS{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qe(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}class vr{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ki extends hc{constructor(t,n,i,s,r,a){super(t,n,i,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(gg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ki._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ki._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ki._jsonSchema={type:$t("string",Ki._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class yu extends Ki{data(t={}){return super.data(t)}}class Dr{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new vr(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new yu(this._firestore,this._userDataWriter,i.key,i,new vr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new yu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new vr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new yu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new vr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:AD(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Dr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function AD(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(e){e=We(e,Pt);const t=We(e.firestore,li);return lD(Zc(t),e._key).then(n=>_S(t,e,n))}Dr._jsonSchemaVersion="firestore/querySnapshot/1.0",Dr._jsonSchema={type:$t("string",Dr._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class Tg extends pS{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qe(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function Ag(e,t,n){e=We(e,Pt);const i=We(e.firestore,li),s=Eg(e.converter,t,n);return th(i,[hg(ul(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,me.none())])}function SD(e,t,n,...i){e=We(e,Pt);const s=We(e.firestore,li),r=ul(s);let a;return a=typeof(t=ae(t))=="string"||t instanceof ll?cS(r,"updateDoc",e._key,t,n,i):uS(r,"updateDoc",e._key,t),th(s,[a.toMutation(e._key,me.exists(!0))])}function bD(e){return th(We(e.firestore,li),[new Fc(e._key,me.none())])}function wD(e,t){const n=We(e.firestore,li),i=bn(e),s=Eg(e.converter,t);return th(n,[hg(ul(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,me.exists(!1))]).then(()=>i)}function lv(e,...t){var u,h,d;e=ae(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||rv(t[i])||(n=t[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(rv(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let r,a,l;if(e instanceof Pt)a=We(e.firestore,li),l=zc(e._key.path),r={next:g=>{t[i]&&t[i](_S(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=We(e,Hs);a=We(g.firestore,li),l=g._query;const m=new Tg(a);r={next:y=>{t[i]&&t[i](new Dr(a,m,g,y))},error:t[i+1],complete:t[i+2]},_D(e._query)}return function(m,y,D,O){const M=new sS(O),S=new KA(y,M,D);return m.asyncQueue.enqueueAndForget(async()=>$A(await xd(m),S)),()=>{M.Nu(),m.asyncQueue.enqueueAndForget(async()=>YA(await xd(m),S))}}(Zc(a),l,s,r)}function th(e,t){return function(i,s){const r=new ti;return i.asyncQueue.enqueueAndForget(async()=>$N(await aD(i),s,r)),r.promise}(Zc(e),t)}function _S(e,t,n){const i=n.docs.get(t._key),s=new Tg(e);return new Ki(e,s,t._key,i,new vr(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD={maxAttempts:5};function Ga(e,t){if((e=ae(e)).firestore!==t)throw new z(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=ul(t)}get(t){const n=Ga(t,this._firestore),i=new TD(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Y(24041);const r=s[0];if(r.isFoundDocument())return new hc(this._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new hc(this._firestore,i,n._key,null,n.converter);throw Y(18433,{doc:r})})}set(t,n,i){const s=Ga(t,this._firestore),r=Eg(s.converter,n,i),a=hg(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,n,i,...s){const r=Ga(t,this._firestore);let a;return a=typeof(n=ae(n))=="string"||n instanceof ll?cS(this._dataReader,"Transaction.update",r._key,n,i,s):uS(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,a),this}delete(t){const n=Ga(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD extends ID{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=Ga(t,this._firestore),i=new Tg(this._firestore);return super.get(t).then(s=>new Ki(this._firestore,i,n._key,s._document,new vr(!1,!1),n.converter))}}function ND(e,t,n){e=We(e,li);const i={...RD,...n};return function(r){if(r.maxAttempts<1)throw new z(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,a,l){const u=new ti;return r.asyncQueue.enqueueAndForget(async()=>{const h=await oD(r);new iD(r.asyncQueue,h,l,a,u).ju()}),u.promise}(Zc(e),s=>t(new CD(e,s)),i)}function uv(){return new fg("serverTimestamp")}(function(t,n=!0){(function(s){oa=s})(aa),Fr(new Vs("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new li(new gI(i.getProvider("auth-internal")),new _I(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xo(h.options.projectId,d)}(a,s),a);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),Qi(l_,u_,t),Qi(l_,u_,"esm2020")})();function vS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DD=vS,ES=new tl("auth","Firebase",vS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new km("@firebase/auth");function xD(e,...t){fc.logLevel<=rt.WARN&&fc.warn(`Auth (${aa}): ${e}`,...t)}function _u(e,...t){fc.logLevel<=rt.ERROR&&fc.error(`Auth (${aa}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(e,...t){throw Sg(e,...t)}function Vn(e,...t){return Sg(e,...t)}function TS(e,t,n){const i={...DD(),[t]:n};return new tl("auth","Firebase",i).create(t,{appName:e.name})}function Xi(e){return TS(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sg(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return ES.create(e,...t)}function J(e,t,...n){if(!e)throw Sg(t,...n)}function Xn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw _u(t),new Error(t)}function ci(e,t){e||Xn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function OD(){return cv()==="http:"||cv()==="https:"}function cv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OD()||GR()||"connection"in navigator)?navigator.onLine:!0}function MD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(t,n){this.shortDelay=t,this.longDelay=n,ci(n>t,"Short delay should be less than long delay!"),this.isMobile=BR()||FR()}get(){return VD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(e,t){ci(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UD=new hl(3e4,6e4);function eh(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function fa(e,t,n,i,s={}){return SS(e,s,async()=>{let r={},a={};i&&(t==="GET"?a=i:r={body:JSON.stringify(i)});const l=el({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...r};return HR()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&ra(e.emulatorConfig.host)&&(h.credentials="include"),AS.fetch()(await wS(e,e.config.apiHost,n,l),h)})}async function SS(e,t,n){e._canInitEmulator=!1;const i={...kD,...t};try{const s=new LD(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Wl(e,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wl(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Wl(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw Wl(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw TS(e,d,h);ui(e,d)}}catch(s){if(s instanceof fi)throw s;ui(e,"network-request-failed",{message:String(s)})}}async function bS(e,t,n,i,s={}){const r=await fa(e,t,n,i,s);return"mfaPendingCredential"in r&&ui(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function wS(e,t,n,i){const s=`${t}${n}?${i}`,r=e,a=r.config.emulator?bg(e.config,s):`${e.config.apiScheme}://${s}`;return PD.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}class LD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Vn(this.auth,"network-request-failed")),UD.get())})}}function Wl(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Vn(e,t,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(e,t){return fa(e,"POST","/v1/accounts:delete",t)}async function dc(e,t){return fa(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function zD(e,t=!1){const n=ae(e),i=await n.getIdToken(t),s=wg(i);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:fo(df(s.auth_time)),issuedAtTime:fo(df(s.iat)),expirationTime:fo(df(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function df(e){return Number(e)*1e3}function wg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return _u("JWT malformed, contained fewer than 3 sections"),null;try{const s=R0(n);return s?JSON.parse(s):(_u("Failed to decode base64 JWT payload"),null)}catch(s){return _u("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function hv(e){const t=wg(e);return J(t,"internal-error"),J(typeof t.exp<"u","internal-error"),J(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof fi&&BD(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function BD({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fo(this.lastLoginAt),this.creationTime=fo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(e){var g;const t=e.auth,n=await e.getIdToken(),i=await Uo(e,dc(t,{idToken:n}));J(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const r=(g=s.providerUserInfo)!=null&&g.length?RS(s.providerUserInfo):[],a=GD(e.providerData,r),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Md(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function HD(e){const t=ae(e);await mc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function GD(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function RS(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(e,t){const n=await SS(e,{},async()=>{const i=el({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,a=await wS(e,s,"/v1/token",`key=${r}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&ra(e.emulatorConfig.host)&&(u.credentials="include"),AS.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function QD(e,t){return fa(e,"POST","/v2/accounts:revokeToken",eh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){J(t.idToken,"internal-error"),J(typeof t.idToken<"u","internal-error"),J(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):hv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){J(t.length!==0,"internal-error");const n=hv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await FD(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new xr;return i&&(J(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),s&&(J(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),r&&(J(typeof r=="number","internal-error",{appName:t}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new xr,this.toJSON())}_performRefresh(){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(e,t){J(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class gn{constructor({uid:t,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new qD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Md(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await Uo(this,this.stsTokenManager.getToken(this.auth,t));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return zD(this,t)}reload(){return HD(this)}_assign(t){this!==t&&(J(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new gn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await mc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(Xi(this.auth));const t=await this.getIdToken();return await Uo(this,jD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:y,providerData:D,stsTokenManager:O}=n;J(g&&O,t,"internal-error");const M=xr.fromJSON(this.name,O);J(typeof g=="string",t,"internal-error"),vi(i,t.name),vi(s,t.name),J(typeof m=="boolean",t,"internal-error"),J(typeof y=="boolean",t,"internal-error"),vi(r,t.name),vi(a,t.name),vi(l,t.name),vi(u,t.name),vi(h,t.name),vi(d,t.name);const S=new gn({uid:g,auth:t,email:s,emailVerified:m,displayName:i,isAnonymous:y,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:M,createdAt:h,lastLoginAt:d});return D&&Array.isArray(D)&&(S.providerData=D.map(v=>({...v}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(t,n,i=!1){const s=new xr;s.updateFromServerResponse(n);const r=new gn({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await mc(r),r}static async _fromGetAccountInfoResponse(t,n,i){const s=n.users[0];J(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?RS(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new xr;l.updateFromIdToken(i);const u=new gn({uid:s.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Md(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=new Map;function Zn(e){ci(e instanceof Function,"Expected a class definition");let t=fv.get(e);return t?(ci(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,fv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}IS.type="NONE";const dv=IS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(e,t,n){return`firebase:${e}:${t}:${n}`}class Or{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=vu(this.userKey,s.apiKey,r),this.fullPersistenceKey=vu("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await dc(this.auth,{idToken:t}).catch(()=>{});return n?gn._fromGetAccountInfoResponse(this.auth,n,t):null}return gn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Or(Zn(dv),t,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=s[0]||Zn(dv);const a=vu(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await dc(t,{idToken:d}).catch(()=>{});if(!m)break;g=await gn._fromGetAccountInfoResponse(t,m,d)}else g=gn._fromJSON(t,d);h!==r&&(l=g),r=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new Or(r,t,i):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==r)try{await h._remove(a)}catch{}})),new Or(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(xS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(CS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(VS(t))return"Blackberry";if(MS(t))return"Webos";if(NS(t))return"Safari";if((t.includes("chrome/")||DS(t))&&!t.includes("edge/"))return"Chrome";if(OS(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function CS(e=be()){return/firefox\//i.test(e)}function NS(e=be()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function DS(e=be()){return/crios\//i.test(e)}function xS(e=be()){return/iemobile/i.test(e)}function OS(e=be()){return/android/i.test(e)}function VS(e=be()){return/blackberry/i.test(e)}function MS(e=be()){return/webos/i.test(e)}function Rg(e=be()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function $D(e=be()){var t;return Rg(e)&&!!((t=window.navigator)!=null&&t.standalone)}function YD(){return QR()&&document.documentMode===10}function kS(e=be()){return Rg(e)||OS(e)||MS(e)||VS(e)||/windows phone/i.test(e)||xS(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(e,t=[]){let n;switch(e){case"Browser":n=mv(be());break;case"Worker":n=`${mv(be())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${aa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((a,l)=>{try{const u=t(r);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(e,t={}){return fa(e,"GET","/v2/passwordPolicy",eh(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=6;class WD{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ZD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gv(this),this.idTokenSubscription=new gv(this),this.beforeStateQueue=new KD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ES,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Zn(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await Or.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await dc(this,{idToken:t}),i=await gn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(mn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await mc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=MD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(mn(this.app))return Promise.reject(Xi(this));const n=t?ae(t):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&J(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(Xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return mn(this.app)?Promise.reject(Xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await XD(this),n=new WD(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new tl("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await QD(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Zn(t)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Or.create(this,[Zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=PS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&xD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function nh(e){return ae(e)}class gv{constructor(t){this.auth=t,this.observer=null,this.addObserver=t2(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tx(e){Ig=e}function ex(e){return Ig.loadJS(e)}function nx(){return Ig.gapiScript}function ix(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(e,t){const n=Um(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Os(r,t??{}))return s;ui(s,"already-initialized")}return n.initialize({options:t})}function rx(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Zn);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function ax(e,t,n){const i=nh(e);J(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,r=US(t),{host:a,port:l}=ox(t),u=l===null?"":`:${l}`,h={url:`${r}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){J(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),J(Os(h,i.config.emulator)&&Os(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,ra(a)?(D0(`${r}//${a}${u}`),x0("Auth",!0)):lx()}function US(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ox(e){const t=US(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:pv(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:pv(a)}}}function pv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function lx(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Xn("not implemented")}_getIdTokenResponse(t){return Xn("not implemented")}_linkToIdToken(t,n){return Xn("not implemented")}_getReauthenticationResolver(t){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vr(e,t){return bS(e,"POST","/v1/accounts:signInWithIdp",eh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="http://localhost";class Ps extends LS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ps(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ui("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const a=new Ps(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Vr(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Vr(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Vr(t,n)}buildRequest(){const t={requestUri:ux,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=el(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends jS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends fl{constructor(){super("facebook.com")}static credential(t){return Ps._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ii.credentialFromTaggedObject(t)}static credentialFromError(t){return Ii.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ii.credential(t.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ps._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ci.credentialFromTaggedObject(t)}static credentialFromError(t){return Ci.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Ci.credential(n,i)}catch{return null}}}Ci.GOOGLE_SIGN_IN_METHOD="google.com";Ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends fl{constructor(){super("github.com")}static credential(t){return Ps._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ni.credentialFromTaggedObject(t)}static credentialFromError(t){return Ni.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ni.credential(t.oauthAccessToken)}catch{return null}}}Ni.GITHUB_SIGN_IN_METHOD="github.com";Ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends fl{constructor(){super("twitter.com")}static credential(t,n){return Ps._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Di.credentialFromTaggedObject(t)}static credentialFromError(t){return Di.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Di.credential(n,i)}catch{return null}}}Di.TWITTER_SIGN_IN_METHOD="twitter.com";Di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(e,t){return bS(e,"POST","/v1/accounts:signUp",eh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await gn._fromIdTokenResponse(t,i,s),a=yv(i);return new as({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=yv(i);return new as({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function yv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(e){var s;if(mn(e.app))return Promise.reject(Xi(e));const t=nh(e);if(await t._initializationPromise,(s=t.currentUser)!=null&&s.isAnonymous)return new as({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await cx(t,{returnSecureToken:!0}),i=await as._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends fi{constructor(t,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,gc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new gc(t,n,i,s)}}function zS(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?gc._fromErrorAndOperation(e,r,t,i):r})}async function fx(e,t,n=!1){const i=await Uo(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return as._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dx(e,t,n=!1){const{auth:i}=e;if(mn(i.app))return Promise.reject(Xi(i));const s="reauthenticate";try{const r=await Uo(e,zS(i,s,t,e),n);J(r.idToken,i,"internal-error");const a=wg(r.idToken);J(a,i,"internal-error");const{sub:l}=a;return J(e.uid===l,i,"user-mismatch"),as._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&ui(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mx(e,t,n=!1){if(mn(e.app))return Promise.reject(Xi(e));const i="signIn",s=await zS(e,i,t),r=await as._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}function gx(e,t,n,i){return ae(e).onIdTokenChanged(t,n,i)}function px(e,t,n){return ae(e).beforeAuthStateChanged(t,n)}const pc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pc,"1"),this.storage.removeItem(pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=1e3,_x=10;class qS extends BS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);YD()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,_x):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},yx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}qS.type="LOCAL";const vx=qS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS extends BS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}HS.type="SESSION";const GS=HS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new ih(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async h=>h(n.origin,r)),u=await Ex(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ih.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const h=Cg("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(m.data.response);break;default:clearTimeout(d),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return window}function Ax(e){Mn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){return typeof Mn().WorkerGlobalScope<"u"&&typeof Mn().importScripts=="function"}async function Sx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bx(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function wx(){return FS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="firebaseLocalStorageDb",Rx=1,yc="firebaseLocalStorage",$S="fbase_key";class dl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sh(e,t){return e.transaction([yc],t?"readwrite":"readonly").objectStore(yc)}function Ix(){const e=indexedDB.deleteDatabase(QS);return new dl(e).toPromise()}function kd(){const e=indexedDB.open(QS,Rx);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(yc,{keyPath:$S})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(yc)?t(i):(i.close(),await Ix(),t(await kd()))})})}async function _v(e,t,n){const i=sh(e,!0).put({[$S]:t,value:n});return new dl(i).toPromise()}async function Cx(e,t){const n=sh(e,!1).get(t),i=await new dl(n).toPromise();return i===void 0?null:i.value}function vv(e,t){const n=sh(e,!0).delete(t);return new dl(n).toPromise()}const Nx=800,Dx=3;class YS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>Dx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ih._getInstance(wx()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await Sx(),!this.activeServiceWorker)return;this.sender=new Tx(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||bx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await kd();return await _v(t,pc,"1"),await vv(t,pc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>_v(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>Cx(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>vv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=sh(s,!1).getAll();return new dl(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YS.type="LOCAL";const xx=YS;new hl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(e,t){return t?Zn(t):(J(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng extends LS{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Vr(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Vr(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Vr(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Vx(e){return mx(e.auth,new Ng(e),e.bypassAuthState)}function Mx(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),dx(n,new Ng(e),e.bypassAuthState)}async function kx(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),fx(n,new Ng(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Vx;case"linkViaPopup":case"linkViaRedirect":return kx;case"reauthViaPopup":case"reauthViaRedirect":return Mx;default:ui(this.auth,"internal-error")}}resolve(t){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new hl(2e3,1e4);class Er extends KS{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Er.currentPopupAction&&Er.currentPopupAction.cancel(),Er.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return J(t,this.auth,"internal-error"),t}async onExecution(){ci(this.filter.length===1,"Popup operations only handle one event");const t=Cg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Er.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Px.get())};t()}}Er.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="pendingRedirect",Eu=new Map;class Lx extends KS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Eu.get(this.auth._key());if(!t){try{const i=await jx(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Eu.set(this.auth._key(),t)}return this.bypassAuthState||Eu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jx(e,t){const n=qx(t),i=Bx(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function zx(e,t){Eu.set(e._key(),t)}function Bx(e){return Zn(e._redirectPersistence)}function qx(e){return vu(Ux,e.config.apiKey,e.name)}async function Hx(e,t,n=!1){if(mn(e.app))return Promise.reject(Xi(e));const i=nh(e),s=Ox(i,t),a=await new Lx(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=10*60*1e3;class Fx{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Qx(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!XS(t)){const s=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Vn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Gx&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ev(t))}saveEventToCache(t){this.cachedEventUids.add(Ev(t)),this.lastProcessedEventTime=Date.now()}}function Ev(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function XS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Qx(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(e,t={}){return fa(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kx=/^https?/;async function Xx(e){if(e.config.emulator)return;const{authorizedDomains:t}=await $x(e);for(const n of t)try{if(Zx(n))return}catch{}ui(e,"unauthorized-domain")}function Zx(e){const t=Vd(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!Kx.test(n))return!1;if(Yx.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=new hl(3e4,6e4);function Tv(){const e=Mn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Jx(e){return new Promise((t,n)=>{var s,r,a;function i(){Tv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Tv(),n(Vn(e,"network-request-failed"))},timeout:Wx.get()})}if((r=(s=Mn().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)t(gapi.iframes.getContext());else if((a=Mn().gapi)!=null&&a.load)i();else{const l=ix("iframefcb");return Mn()[l]=()=>{gapi.load?i():n(Vn(e,"network-request-failed"))},ex(`${nx()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Tu=null,t})}let Tu=null;function t4(e){return Tu=Tu||Jx(e),Tu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=new hl(5e3,15e3),n4="__/auth/iframe",i4="emulator/auth/iframe",s4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},r4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a4(e){const t=e.config;J(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?bg(t,i4):`https://${e.config.authDomain}/${n4}`,i={apiKey:t.apiKey,appName:e.name,v:aa},s=r4.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${el(i).slice(1)}`}async function o4(e){const t=await t4(e),n=Mn().gapi;return J(n,e,"internal-error"),t.open({where:document.body,url:a4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s4,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=Vn(e,"network-request-failed"),l=Mn().setTimeout(()=>{r(a)},e4.get());function u(){Mn().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u4=500,c4=600,h4="_blank",f4="http://localhost";class Av{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function d4(e,t,n,i=u4,s=c4){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...l4,width:i.toString(),height:s.toString(),top:r,left:a},h=be().toLowerCase();n&&(l=DS(h)?h4:n),CS(h)&&(t=t||f4,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[y,D])=>`${m}${y}=${D},`,"");if($D(h)&&l!=="_self")return m4(t||"",l),new Av(null);const g=window.open(t||"",l,d);J(g,e,"popup-blocked");try{g.focus()}catch{}return new Av(g)}function m4(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4="__/auth/handler",p4="emulator/auth/handler",y4=encodeURIComponent("fac");async function Sv(e,t,n,i,s,r){J(e.config.authDomain,e,"auth-domain-config-required"),J(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:aa,eventId:s};if(t instanceof jS){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",JR(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof fl){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${y4}=${encodeURIComponent(u)}`:"";return`${_4(e)}?${el(l).slice(1)}${h}`}function _4({config:e}){return e.emulator?bg(e,p4):`https://${e.authDomain}/${g4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="webStorageSupport";class v4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GS,this._completeRedirectFn=Hx,this._overrideRedirectResult=zx}async _openPopup(t,n,i,s){var a;ci((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=await Sv(t,n,i,Vd(),s);return d4(t,r,Cg())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await Sv(t,n,i,Vd(),s);return Ax(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(ci(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await o4(t),i=new Fx(t);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(mf,{type:mf},s=>{var a;const r=(a=s==null?void 0:s[0])==null?void 0:a[mf];r!==void 0&&n(!!r),ui(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Xx(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return kS()||NS()||Rg()}}const E4=v4;var bv="@firebase/auth",wv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S4(e){Fr(new Vs("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PS(e)},h=new JD(i,s,r,u);return rx(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Fr(new Vs("auth-internal",t=>{const n=nh(t.getProvider("auth").getImmediate());return(i=>new T4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qi(bv,wv,A4(e)),Qi(bv,wv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=5*60,w4=N0("authIdTokenMaxAge")||b4;let Rv=null;const R4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>w4)return;const s=n==null?void 0:n.token;Rv!==s&&(Rv=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function I4(e=k0()){const t=Um(e,"auth");if(t.isInitialized())return t.getImmediate();const n=sx(e,{popupRedirectResolver:E4,persistence:[xx,vx,GS]}),i=N0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=R4(r.toString());px(n,a,()=>a(n.currentUser)),gx(n,l=>a(l))}}const s=I0("auth");return s&&ax(n,`http://${s}`),n}function C4(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}tx({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=Vn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",C4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S4("Browser");const N4={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},ZS=M0(N4),en=cD(ZS),D4=I4(ZS),WS="417641827",JS=({className:e=""})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:R.jsx("path",{d:"m9 18 6-6-6-6"})}),t1=({className:e=""})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[R.jsx("circle",{cx:"12",cy:"12",r:"4"}),R.jsx("path",{d:"M12 2v2"}),R.jsx("path",{d:"M12 20v2"}),R.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),R.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),R.jsx("path",{d:"M2 12h2"}),R.jsx("path",{d:"M20 12h2"}),R.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),R.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),e1=({className:e=""})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:R.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),x4=({className:e=""})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[R.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),R.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),n1=({className:e=""})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[R.jsx("path",{d:"M19 12H5"}),R.jsx("polyline",{points:"12 19 5 12 12 5"})]}),O4=({className:e=""})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 ${e}`,children:[R.jsx("circle",{cx:"11",cy:"11",r:"8"}),R.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),V4=({className:e=""})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[R.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),R.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),M4=({className:e=""})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:R.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),i1=({className:e="",filled:t=!1})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:R.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),k4=({className:e=""})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[R.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),R.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),Iv=({className:e="",filled:t=!1})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:R.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),P4=({className:e=""})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[R.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),R.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),R.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]}),U4=({theme:e})=>{const t=kn[e];return R.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.bg}`,children:[R.jsx(i1,{className:"animate-pulse-heart text-pink-400",filled:!0}),R.jsx("p",{className:`mt-4 text-lg ${t.text} opacity-70`,children:"Загрузка новелл..."})]})},kn={light:{bg:"bg-stone-100",text:"text-stone-800",componentBg:"bg-white",componentText:"text-stone-700",border:"border-stone-200",searchBg:"bg-white",searchPlaceholder:"placeholder-stone-400",searchRing:"focus:ring-pink-400",tgBg:"#f8f7f5",tgHeader:"#FFFFFF",accent:"pink-500",accentHover:"pink-400",commentBg:"bg-stone-50",commentText:"text-stone-800"},dark:{bg:"bg-gray-900",text:"text-gray-100",componentBg:"bg-gray-800",componentText:"text-gray-200",border:"border-gray-700",searchBg:"bg-gray-800",searchPlaceholder:"placeholder-gray-500",searchRing:"focus:ring-pink-500",tgBg:"#111827",tgHeader:"#1f2937",accent:"pink-500",accentHover:"pink-400",commentBg:"bg-gray-700",commentText:"text-gray-100"}},s1=({onClose:e,onSelectPlan:t,theme:n})=>{const i=kn[n],s=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return R.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:R.jsxs("div",{className:`w-full max-w-sm rounded-2xl p-6 shadow-lg ${i.componentBg} ${i.text}`,children:[R.jsx(M4,{className:`mx-auto mb-4 text-${i.accent}`}),R.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),R.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),R.jsx("div",{className:"space-y-3",children:s.map(r=>R.jsxs("button",{onClick:()=>t(r),className:`relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${i.border} ${i.componentBg} hover:border-${i.accentHover}`,children:[R.jsx("p",{className:"font-bold",children:r.name}),R.jsxs("p",{className:"text-sm",children:[r.price," ₽"]})]},r.duration))}),R.jsx("button",{onClick:e,className:`w-full py-3 mt-4 rounded-lg border ${i.border}`,children:"Не сейчас"})]})})},r1=({onClose:e,onSelectMethod:t,theme:n,plan:i})=>{const s=kn[n];return R.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:R.jsxs("div",{className:`w-full max-w-sm rounded-2xl p-6 shadow-lg ${s.componentBg} ${s.text}`,children:[R.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),R.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",i.name," (",i.price," ₽)"]}),R.jsxs("div",{className:"space-y-3",children:[R.jsxs("button",{onClick:()=>t("card"),className:`w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${s.border} ${s.componentBg} hover:border-${s.accentHover}`,children:[R.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),R.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),R.jsxs("button",{onClick:()=>t("tribut"),className:`w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${s.border} ${s.componentBg} hover:border-${s.accentHover}`,children:[R.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),R.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]})]}),R.jsx("button",{onClick:e,className:`w-full py-3 mt-4 rounded-lg border ${s.border}`,children:"Назад"})]})})},L4=({onBack:e,onHome:t,isReader:n=!1,onTextSizeChange:i,onThemeChange:s,theme:r,onFontChange:a,currentFont:l})=>{const[u,h]=Q.useState(!1),d=kn[r];return R.jsxs(R.Fragment,{children:[R.jsx("button",{onClick:()=>h(!0),className:`fixed top-4 right-4 z-20 w-12 h-12 rounded-full ${d.componentBg} ${d.border} border text-lg shadow-lg flex items-center justify-center ${d.text}`,children:R.jsx(P4,{})}),u&&R.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-30",onClick:()=>h(!1),children:R.jsxs("div",{className:`fixed top-0 left-0 right-0 p-4 ${d.componentBg} shadow-lg rounded-b-2xl animate-fade-in-down ${d.text}`,onClick:g=>g.stopPropagation(),children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsx("h3",{className:"font-bold text-lg",children:"Настройки"}),R.jsx("button",{onClick:()=>h(!1),className:"font-bold text-2xl",children:"×"})]}),n&&R.jsxs("div",{className:"space-y-3",children:[R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("span",{children:"Размер текста"}),R.jsxs("div",{className:`w-28 h-12 rounded-full ${d.bg} flex items-center justify-around`,children:[R.jsx("button",{onClick:()=>i(-2),className:"text-2xl font-bold",children:"-"}),R.jsx("button",{onClick:()=>i(2),className:"text-2xl font-bold",children:"+"})]})]}),R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("span",{children:"Тема"}),R.jsx("button",{onClick:s,className:`w-12 h-12 rounded-full ${d.bg} flex items-center justify-center`,children:r==="dark"?R.jsx(t1,{}):R.jsx(e1,{})})]})]}),R.jsxs("div",{className:"flex gap-3 mt-4",children:[e&&R.jsxs("button",{onClick:()=>{e(),h(!1)},className:`flex-1 py-3 rounded-lg ${d.bg} flex items-center justify-center gap-2`,children:[R.jsx(n1,{})," Назад"]}),t&&R.jsxs("button",{onClick:()=>{t(),h(!1)},className:`flex-1 py-3 rounded-lg ${d.bg} flex items-center justify-center gap-2`,children:[R.jsx(x4,{})," Главная"]})]})]})})]})},j4=({novels:e,onSelectNovel:t,theme:n,setTheme:i,genreFilter:s,onClearGenreFilter:r,bookmarks:a,onToggleBookmark:l,onShowBookmarks:u})=>{const h=kn[n],[d,g]=Q.useState(""),m=Q.useMemo(()=>e.filter(y=>(!s||y.genres.includes(s))&&y.title.toLowerCase().includes(d.toLowerCase())),[e,d,s]);return!e.length&&!d?R.jsx("div",{className:`p-4 text-center ${h.text}`,children:"Загрузка библиотеки..."}):R.jsxs("div",{className:`p-4 ${h.text}`,children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsx("h1",{className:"text-3xl font-bold",children:"Библиотека"}),R.jsxs("div",{className:"flex gap-2 items-center",children:[R.jsx("button",{onClick:u,className:`p-2.5 rounded-full ${h.componentBg} ${h.border} border`,children:R.jsx(Iv,{})}),R.jsx("button",{onClick:()=>i(n==="dark"?"light":"dark"),className:`p-2.5 rounded-full ${h.componentBg} ${h.border} border`,children:n==="dark"?R.jsx(t1,{}):R.jsx(e1,{})})]})]}),s&&R.jsxs("div",{className:`flex items-center justify-between p-3 mb-4 rounded-lg border ${h.border} ${h.componentBg}`,children:[R.jsxs("p",{className:"text-sm",children:[R.jsx("span",{className:"opacity-70",children:"Жанр:"}),R.jsx("strong",{className:"ml-2",children:s})]}),R.jsx("button",{onClick:r,className:`text-xs font-bold text-${h.accent} hover:underline`,children:"Сбросить"})]}),R.jsxs("div",{className:"relative mb-6",children:[R.jsx(O4,{className:h.searchPlaceholder}),R.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:d,onChange:y=>g(y.target.value),className:`w-full ${h.searchBg} ${h.border} border rounded-lg py-2 pl-10 pr-4 ${h.text} ${h.searchPlaceholder} focus:outline-none focus:ring-2 ${h.searchRing} transition-shadow duration-300`})]}),R.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4",children:m.map((y,D)=>R.jsx("div",{onClick:()=>t(y),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${D*50}ms`},children:R.jsxs("div",{className:"relative filter drop-shadow-md group-hover:drop-shadow-pink transition-all duration-300",children:[R.jsx("button",{onClick:O=>{O.stopPropagation(),l(y.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${a.includes(y.id)?"text-pink-400":""}`,children:R.jsx(Iv,{filled:a.includes(y.id),width:"20",height:"20"})}),R.jsx("img",{src:y.coverUrl,alt:y.title,className:`w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 ${h.border} border`}),R.jsx("h2",{className:`mt-2 font-semibold text-xs truncate ${h.text}`,children:y.title})]})},y.id))})]})},z4=({novel:e,onSelectChapter:t,onGenreSelect:n,theme:i,subscription:s,botUsername:r,userId:a,chaptersCache:l,lastReadData:u})=>{const h=kn[i],[d,g]=Q.useState([]),[m,y]=Q.useState(!0),[D,O]=Q.useState(!1),[M,S]=Q.useState(null),[v,w]=Q.useState("newest"),[x,L]=Q.useState(!1),q=s&&new Date(s.expires_at)>new Date,T=Q.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);Q.useEffect(()=>{l[e.id]?(g(l[e.id]),y(!1)):(y(!0),fetch(`./data/chapters/${e.id}.json`).then(E=>E.json()).then(E=>{g(E.chapters||[]),y(!1)}).catch(E=>{console.error(E),g([]),y(!1)}))},[e.id,l]);const _=Q.useMemo(()=>{const E=[...d];return v==="newest"?E.reverse():d},[d,v]),A=E=>{!q&&E.isPaid?O(!0):t(E)},b=()=>{if(T){const E=d.find(bt=>bt.id===T);E&&t(E)}},I=E=>S(E),C=async E=>{var xt;const bt=(xt=window.Telegram)==null?void 0:xt.WebApp;bt&&a&&M&&bt.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async B=>{if(B){const G=bn(en,"users",a);try{await Ag(G,{pendingSubscription:{...M,method:E,date:new Date().toISOString()}},{merge:!0}),bt.openTelegramLink(`https://t.me/${r}?start=true`),bt.close()}catch(K){console.error("Ошибка записи в Firebase:",K),bt.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})};return R.jsxs("div",{className:h.text,children:[R.jsxs("div",{className:"relative h-64",children:[R.jsx("img",{src:e.coverUrl,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),R.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${i==="dark"?"from-gray-900 via-gray-900/80":"from-stone-100 via-stone-100/80"} to-transparent`}),R.jsxs("div",{className:"absolute bottom-4 left-4",children:[R.jsx("h1",{className:"text-3xl font-bold font-sans text-white drop-shadow-pink",children:e.title}),R.jsx("p",{className:"text-sm font-sans text-white",children:e.author})]})]}),R.jsxs("div",{className:"p-4",children:[R.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(E=>R.jsx("button",{onClick:()=>n(E),className:`text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 ${i==="dark"?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:E},E))}),R.jsx("div",{className:`relative overflow-hidden transition-all duration-500 ${x?"max-h-full":"max-h-24"}`,children:R.jsx("p",{className:`text-sm mb-2 ${i==="dark"?"text-gray-300":"text-stone-600"} font-body`,children:e.description})}),R.jsx("button",{onClick:()=>L(!x),className:`text-sm font-semibold text-${h.accent} mb-4`,children:x?"Скрыть":"Читать полностью..."}),T&&R.jsxs("button",{onClick:b,className:"w-full py-3 mb-4 rounded-lg bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold shadow-lg shadow-pink-500/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",T,")"]}),R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),R.jsx("button",{onClick:()=>w(E=>E==="newest"?"oldest":"newest"),className:`text-sm font-semibold text-${h.accent}`,children:v==="newest"?"Сначала новые":"Сначала старые"})]}),q&&R.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",new Date(s.expires_at).toLocaleDateString()]}),m?R.jsx("p",{className:h.text,children:"Загрузка глав..."}):R.jsx("div",{className:"flex flex-col gap-3",children:_.map(E=>{const bt=!q&&E.isPaid,xt=T===E.id;return R.jsxs("div",{onClick:()=>A(E),className:`p-4 ${h.componentBg} rounded-xl cursor-pointer transition-all duration-200 hover:border-pink-400 hover:bg-pink-500/10 border ${h.border} flex items-center justify-between shadow-sm hover:shadow-md ${bt?"opacity-70":""}`,children:[R.jsxs("div",{className:"flex items-center gap-3",children:[xt&&R.jsx("span",{className:"w-2 h-2 rounded-full bg-pink-400"}),R.jsx("p",{className:`font-semibold ${h.componentText}`,children:E.title})]}),bt?R.jsx(V4,{className:h.text}):R.jsx(JS,{className:h.text})]},E.id)})}),D&&R.jsx(s1,{onClose:()=>O(!1),onSelectPlan:I,theme:i}),M&&R.jsx(r1,{onClose:()=>S(null),onSelectMethod:C,theme:i,plan:M})]})]})},B4=({chapter:e,novel:t,theme:n,fontSize:i,userId:s,userName:r,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,botUsername:d})=>{const g=kn[n],[m,y]=Q.useState([]),[D,O]=Q.useState(""),[M,S]=Q.useState(null),[v,w]=Q.useState(""),[x,L]=Q.useState(0),[q,T]=Q.useState(!1),[_,A]=Q.useState(!1),[b,I]=Q.useState(!1),[C,E]=Q.useState(null),bt=h&&new Date(h.expires_at)>new Date,xt=Q.useMemo(()=>bn(en,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);Q.useEffect(()=>{const X=lv(xt,le=>{var Jt;L(((Jt=le.data())==null?void 0:Jt.likeCount)||0)}),Tt=vD(ev(en,`chapters_metadata/${t.id}_${e.id}/comments`),ED("timestamp","asc")),vn=lv(Tt,le=>{const Jt=le.docs.map(F=>({id:F.id,...F.data()}));y(Jt)});if(s&&s!=="guest_user"){const le=bn(en,`chapters_metadata/${t.id}_${e.id}/likes`,s);yS(le).then(Jt=>T(Jt.exists()))}return()=>{X(),vn()}},[xt,t.id,e.id,s]);const B=async X=>{if(X.preventDefault(),!D.trim()||!s||s==="guest_user")return;const Tt=ev(en,`chapters_metadata/${t.id}_${e.id}/comments`);await wD(Tt,{userId:s,userName:r||"Аноним",text:D,timestamp:uv()}),O("")},G=X=>{S(X.id),w(X.text)},K=async X=>{if(!v.trim())return;const Tt=bn(en,`chapters_metadata/${t.id}_${e.id}/comments`,X);await SD(Tt,{text:v}),S(null),w("")},mt=async X=>{const Tt=bn(en,`chapters_metadata/${t.id}_${e.id}/comments`,X);await bD(Tt)},Rt=async()=>{if(!s||s==="guest_user")return;const X=bn(en,`chapters_metadata/${t.id}_${e.id}/likes`,s);await ND(en,async Tt=>{var F;const vn=await Tt.get(X),Jt=((F=(await Tt.get(xt)).data())==null?void 0:F.likeCount)||0;vn.exists()?(Tt.delete(X),Tt.set(xt,{likeCount:Math.max(0,Jt-1)},{merge:!0}),T(!1)):(Tt.set(X,{timestamp:uv()}),Tt.set(xt,{likeCount:Jt+1},{merge:!0}),T(!0))})},we=X=>{X&&(!bt&&X.isPaid?I(!0):(l(X),A(!1)))},oe=X=>{E(X),I(!1)},It=async X=>{var vn;const Tt=(vn=window.Telegram)==null?void 0:vn.WebApp;Tt&&s&&C&&Tt.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async le=>{if(le){const Jt=bn(en,"users",s);try{await Ag(Jt,{pendingSubscription:{...C,method:X,date:new Date().toISOString()}},{merge:!0}),Tt.openTelegramLink(`https://t.me/${d}?start=true`),Tt.close()}catch(F){console.error("Ошибка записи в Firebase:",F),Tt.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})},Re=u.findIndex(X=>X.id===e.id),Ie=u[Re-1],Gs=u[Re+1];return R.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${g.bg}`,children:[R.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[R.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 text-center font-sans text-pink-400",children:t.title}),R.jsx("h2",{className:`text-lg sm:text-xl mb-8 text-center opacity-80 font-sans ${g.text}`,children:e.title}),R.jsx("div",{className:`whitespace-pre-wrap leading-relaxed ${g.text} ${a}`,style:{fontSize:`${i}px`},children:e.content}),R.jsxs("div",{className:"mt-12 border-t pt-8",children:[R.jsx("div",{className:"flex items-center gap-4 mb-8",children:R.jsxs("button",{onClick:Rt,className:`flex items-center gap-2 text-${g.accentHover} transition-transform hover:scale-110`,children:[R.jsx(i1,{filled:q,className:q?`text-${g.accent}`:""}),R.jsx("span",{className:"font-bold text-lg",children:x})]})}),R.jsx("h3",{className:`text-2xl font-bold mb-4 ${g.text}`,children:"Комментарии"}),R.jsxs("div",{className:"space-y-4 mb-6",children:[m.map(X=>R.jsxs("div",{className:`p-3 rounded-lg ${g.commentBg}`,children:[R.jsx("p",{className:`font-bold text-sm ${g.commentText}`,children:X.userName}),M===X.id?R.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[R.jsx("input",{type:"text",value:v,onChange:Tt=>w(Tt.target.value),className:`w-full ${g.searchBg} ${g.border} border rounded-lg py-1 px-2 ${g.commentText}`}),R.jsx("button",{onClick:()=>K(X.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),R.jsx("button",{onClick:()=>S(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):R.jsx("p",{className:`text-md mt-1 ${g.commentText}`,children:X.text}),(s===X.userId||s===WS)&&R.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[R.jsx("button",{onClick:()=>G(X),className:"text-xs text-gray-500",children:"Редактировать"}),R.jsx("button",{onClick:()=>mt(X.id),className:"text-xs text-red-500",children:"Удалить"})]})]},X.id)),m.length===0&&R.jsx("p",{className:`opacity-70 ${g.text}`,children:"Комментариев пока нет. Будьте первым!"})]}),R.jsxs("form",{onSubmit:B,className:"flex items-center gap-2",children:[R.jsx("input",{type:"text",value:D,onChange:X=>O(X.target.value),placeholder:"Написать комментарий...",className:`w-full ${g.searchBg} ${g.border} border rounded-lg py-2 px-4 ${g.commentText} ${g.searchPlaceholder} focus:outline-none focus:ring-2 ${g.searchRing}`}),R.jsx("button",{type:"submit",className:`p-2 rounded-full bg-${g.accent} text-white`,children:R.jsx(k4,{})})]})]})]}),R.jsxs("div",{className:`fixed bottom-0 left-0 right-0 p-2 border-t ${g.border} ${g.componentBg} flex justify-between items-center z-10`,children:[R.jsx("button",{onClick:()=>we(Ie),disabled:!Ie,className:"p-2 disabled:opacity-50",children:R.jsx(n1,{})}),R.jsx("button",{onClick:()=>A(!0),className:`px-4 py-2 rounded-lg ${g.bg}`,children:"Оглавление"}),R.jsx("button",{onClick:()=>we(Gs),disabled:!Gs,className:"p-2 disabled:opacity-50",children:R.jsx(JS,{className:"opacity-100"})})]}),_&&R.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>A(!1),children:R.jsxs("div",{className:`absolute bottom-0 left-0 right-0 max-h-1/2 p-4 rounded-t-2xl ${g.componentBg} overflow-y-auto`,onClick:X=>X.stopPropagation(),children:[R.jsx("h3",{className:"font-bold text-lg mb-4",children:"Главы"}),R.jsx("div",{className:"flex flex-col gap-2",children:u.map(X=>R.jsx("button",{onClick:()=>we(X),className:`p-2 text-left rounded-md ${X.id===e.id?`bg-${g.accent} text-white`:g.bg}`,children:X.title},X.id))})]})}),b&&R.jsx(s1,{onClose:()=>I(!1),onSelectPlan:oe,theme:n}),C&&R.jsx(r1,{onClose:()=>E(null),onSelectMethod:It,theme:n,plan:C})]})};function q4(){const[e,t]=Q.useState("light"),[n,i]=Q.useState(18),[s,r]=Q.useState("font-sans"),[a,l]=Q.useState("list"),[u,h]=Q.useState([]),[d,g]=Q.useState(null),[m,y]=Q.useState(null),[D,O]=Q.useState(null),[M,S]=Q.useState(null),[v,w]=Q.useState(null),[x,L]=Q.useState(null),[q,T]=Q.useState(!0),[_,A]=Q.useState({}),[b,I]=Q.useState(null),[C,E]=Q.useState([]),[bt,xt]=Q.useState(!1),B="tenebrisverbot",G=Q.useCallback(async F=>{if(v&&v!=="guest_user"){const yt=bn(en,"users",v);try{await Ag(yt,F,{merge:!0})}catch(Ce){console.error("Не удалось обновить данные пользователя:",Ce)}}},[v]),K=Q.useCallback(F=>{t(F),G({settings:{theme:F,fontSize:n,fontClass:s}})},[n,s,G]),mt=Q.useCallback(F=>{i(yt=>{const Ce=Math.max(12,Math.min(32,yt+F));return G({settings:{theme:e,fontSize:Ce,fontClass:s}}),Ce})},[e,s,G]),Rt=Q.useCallback(F=>{r(F),G({settings:{theme:e,fontSize:n,fontClass:F}})},[e,n,G]);Q.useEffect(()=>{(async()=>{var yt,Ce,Fs,da,ml,gl;try{const En=(yt=window.Telegram)==null?void 0:yt.WebApp;let di="guest_user";if(En&&(En.ready(),En.expand(),di=((da=(Fs=(Ce=En.initDataUnsafe)==null?void 0:Ce.user)==null?void 0:Fs.id)==null?void 0:da.toString())||"guest_user",L(((gl=(ml=En.initDataUnsafe)==null?void 0:ml.user)==null?void 0:gl.first_name)||null)),w(di),await hx(D4),di!=="guest_user"){const ga=bn(en,"users",di),Qs=await yS(ga);if(Qs.exists()){const Tn=Qs.data();S(Tn.subscription||null),I(Tn.lastRead||null),E(Tn.bookmarks||[]),Tn.settings&&(t(Tn.settings.theme||"light"),i(Tn.settings.fontSize||18),r(Tn.settings.fontClass||"font-sans"))}}const ma=await fetch("./data/novels.json");if(!ma.ok)throw new Error("Failed to fetch novels");const rh=await ma.json();h(rh.novels)}catch(En){console.error("Ошибка инициализации:",En)}finally{T(!1)}})()},[]),Q.useEffect(()=>{u.length>0&&u.forEach(F=>{fetch(`./data/chapters/${F.id}.json`).then(yt=>yt.json()).then(yt=>A(Ce=>({...Ce,[F.id]:yt.chapters||[]}))).catch(yt=>console.error(`Не удалось предзагрузить главы для ${F.title}:`,yt))})},[u]),Q.useEffect(()=>{document.documentElement.className=e},[e]);const we=Q.useCallback(()=>{a==="reader"?l("details"):a==="details"&&(l("list"),O(null))},[a]),oe=Q.useCallback(()=>{l("list"),O(null)},[]);Q.useEffect(()=>{var yt;const F=(yt=window.Telegram)==null?void 0:yt.WebApp;if(F)return F.onEvent("backButtonClicked",we),a==="list"?F.BackButton.hide():F.BackButton.show(),()=>F.offEvent("backButtonClicked",we)},[a,we]),Q.useEffect(()=>{var yt;const F=(yt=window.Telegram)==null?void 0:yt.WebApp;F&&(F.setHeaderColor(kn[e].tgHeader),F.setBackgroundColor(kn[e].tgBg))},[e]);const It=Q.useCallback(async F=>{if(y(F),l("reader"),v&&v!=="guest_user"&&d){const yt={...b||{},[d.id]:{novelId:d.id,chapterId:F.id,timestamp:new Date().toISOString()}};I(yt),await G({lastRead:yt})}},[v,d,b,G]),Re=F=>{g(F),l("details")},Ie=F=>{O(F),l("list")},Gs=()=>{O(null)},X=Q.useCallback(async F=>{const yt=C.includes(F)?C.filter(Ce=>Ce!==F):[...C,F];E(yt),await G({bookmarks:yt})},[C,G]),Tt=Q.useMemo(()=>u.filter(F=>C.includes(F.id)),[u,C]);if(q)return R.jsx(U4,{theme:e});const vn=()=>{switch(a){case"details":return R.jsx(z4,{novel:d,onSelectChapter:It,onGenreSelect:Ie,theme:e,subscription:M,botUsername:B,userId:v,chaptersCache:_,lastReadData:b});case"reader":return R.jsx(B4,{chapter:m,novel:d,theme:e,fontSize:n,userId:v,userName:x,currentFontClass:s,onSelectChapter:It,allChapters:_[d.id]||[],subscription:M,botUsername:B});case"list":default:return R.jsx(j4,{novels:u,onSelectNovel:Re,theme:e,setTheme:K,genreFilter:D,onClearGenreFilter:Gs,bookmarks:C,onToggleBookmark:X,onShowBookmarks:()=>xt(!0)})}},le=kn[e],Jt=v===WS;return R.jsxs("main",{className:`${le.bg} min-h-screen font-sans ${Jt?"":"no-select"}`,children:[vn(),bt&&R.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 p-4",onClick:()=>xt(!1),children:R.jsxs("div",{className:`w-full max-w-md mx-auto mt-10 p-4 rounded-2xl shadow-lg ${le.componentBg} ${le.text}`,onClick:F=>F.stopPropagation(),children:[R.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Закладки"}),R.jsx("div",{className:"grid grid-cols-3 gap-3",children:Tt.length>0?Tt.map(F=>R.jsxs("div",{onClick:()=>{Re(F),xt(!1)},className:"cursor-pointer",children:[R.jsx("img",{src:F.coverUrl,alt:F.title,className:"w-full aspect-[2/3] object-cover rounded-lg"}),R.jsx("p",{className:"text-xs mt-1 truncate",children:F.title})]},F.id)):R.jsx("p",{children:"У вас пока нет закладок."})})]})}),R.jsx(L4,{onBack:a!=="list"?we:null,onHome:a!=="list"?oe:null,isReader:a==="reader",onTextSizeChange:mt,onThemeChange:()=>K(e==="dark"?"light":"dark"),onFontChange:Rt,currentFont:s,theme:e})]})}IR.createRoot(document.getElementById("root")).render(R.jsx(Q.StrictMode,{children:R.jsx(q4,{})}));
