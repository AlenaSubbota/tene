(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Cv={exports:{}},yc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1=Symbol.for("react.transitional.element"),O1=Symbol.for("react.fragment");function Dv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:N1,type:e,key:i,ref:t!==void 0?t:null,props:n}}yc.Fragment=O1;yc.jsx=Dv;yc.jsxs=Dv;Cv.exports=yc;var O=Cv.exports,Nv={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pd=Symbol.for("react.transitional.element"),V1=Symbol.for("react.portal"),M1=Symbol.for("react.fragment"),x1=Symbol.for("react.strict_mode"),k1=Symbol.for("react.profiler"),P1=Symbol.for("react.consumer"),U1=Symbol.for("react.context"),L1=Symbol.for("react.forward_ref"),z1=Symbol.for("react.suspense"),B1=Symbol.for("react.memo"),Ov=Symbol.for("react.lazy"),Rp=Symbol.iterator;function j1(e){return e===null||typeof e!="object"?null:(e=Rp&&e[Rp]||e["@@iterator"],typeof e=="function"?e:null)}var Vv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mv=Object.assign,xv={};function Zs(e,t,n){this.props=e,this.context=t,this.refs=xv,this.updater=n||Vv}Zs.prototype.isReactComponent={};Zs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kv(){}kv.prototype=Zs.prototype;function Ud(e,t,n){this.props=e,this.context=t,this.refs=xv,this.updater=n||Vv}var Ld=Ud.prototype=new kv;Ld.constructor=Ud;Mv(Ld,Zs.prototype);Ld.isPureReactComponent=!0;var Ip=Array.isArray,Mt={H:null,A:null,T:null,S:null,V:null},Pv=Object.prototype.hasOwnProperty;function zd(e,t,n,i,r,s){return n=s.ref,{$$typeof:Pd,type:e,key:t,ref:n!==void 0?n:null,props:s}}function q1(e,t){return zd(e.type,t,void 0,void 0,void 0,e.props)}function Bd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pd}function H1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Cp=/\/+/g;function Ah(e,t){return typeof e=="object"&&e!==null&&e.key!=null?H1(""+e.key):t.toString(36)}function Dp(){}function G1(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Dp,Dp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Jr(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Pd:case V1:a=!0;break;case Ov:return a=e._init,Jr(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+Ah(e,0):i,Ip(r)?(n="",a!=null&&(n=a.replace(Cp,"$&/")+"/"),Jr(r,t,n,"",function(h){return h})):r!=null&&(Bd(r)&&(r=q1(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(Cp,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(Ip(e))for(var u=0;u<e.length;u++)i=e[u],s=l+Ah(i,u),a+=Jr(i,t,n,s,r);else if(u=j1(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+Ah(i,u++),a+=Jr(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return Jr(G1(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Nl(e,t,n){if(e==null)return e;var i=[],r=0;return Jr(e,i,"","",function(s){return t.call(n,s,r++)}),i}function F1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Np=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Q1(){}nt.Children={map:Nl,forEach:function(e,t,n){Nl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Nl(e,function(){t++}),t},toArray:function(e){return Nl(e,function(t){return t})||[]},only:function(e){if(!Bd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=Zs;nt.Fragment=M1;nt.Profiler=k1;nt.PureComponent=Ud;nt.StrictMode=x1;nt.Suspense=z1;nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Mt;nt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Mt.H.useMemoCache(e)}};nt.cache=function(e){return function(){return e.apply(null,arguments)}};nt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=Mv({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!Pv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return zd(e.type,r,void 0,void 0,s,i)};nt.createContext=function(e){return e={$$typeof:U1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:P1,_context:e},e};nt.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)Pv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return zd(e,s,void 0,void 0,null,r)};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:L1,render:e}};nt.isValidElement=Bd;nt.lazy=function(e){return{$$typeof:Ov,_payload:{_status:-1,_result:e},_init:F1}};nt.memo=function(e,t){return{$$typeof:B1,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=Mt.T,n={};Mt.T=n;try{var i=e(),r=Mt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Q1,Np)}catch(s){Np(s)}finally{Mt.T=t}};nt.unstable_useCacheRefresh=function(){return Mt.H.useCacheRefresh()};nt.use=function(e){return Mt.H.use(e)};nt.useActionState=function(e,t,n){return Mt.H.useActionState(e,t,n)};nt.useCallback=function(e,t){return Mt.H.useCallback(e,t)};nt.useContext=function(e){return Mt.H.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e,t){return Mt.H.useDeferredValue(e,t)};nt.useEffect=function(e,t,n){var i=Mt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};nt.useId=function(){return Mt.H.useId()};nt.useImperativeHandle=function(e,t,n){return Mt.H.useImperativeHandle(e,t,n)};nt.useInsertionEffect=function(e,t){return Mt.H.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return Mt.H.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return Mt.H.useMemo(e,t)};nt.useOptimistic=function(e,t){return Mt.H.useOptimistic(e,t)};nt.useReducer=function(e,t,n){return Mt.H.useReducer(e,t,n)};nt.useRef=function(e){return Mt.H.useRef(e)};nt.useState=function(e){return Mt.H.useState(e)};nt.useSyncExternalStore=function(e,t,n){return Mt.H.useSyncExternalStore(e,t,n)};nt.useTransition=function(){return Mt.H.useTransition()};nt.version="19.1.1";Nv.exports=nt;var $=Nv.exports,Uv={exports:{}},_c={},Lv={exports:{}},zv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,F){var X=z.length;z.push(F);t:for(;0<X;){var ct=X-1>>>1,bt=z[ct];if(0<r(bt,F))z[ct]=F,z[X]=bt,X=ct;else break t}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var F=z[0],X=z.pop();if(X!==F){z[0]=X;t:for(var ct=0,bt=z.length,We=bt>>>1;ct<We;){var $t=2*(ct+1)-1,Ot=z[$t],be=$t+1,we=z[be];if(0>r(Ot,X))be<bt&&0>r(we,Ot)?(z[ct]=we,z[be]=X,ct=be):(z[ct]=Ot,z[$t]=X,ct=$t);else if(be<bt&&0>r(we,X))z[ct]=we,z[be]=X,ct=be;else break t}}return F}function r(z,F){var X=z.sortIndex-F.sortIndex;return X!==0?X:z.id-F.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,_=!1,N=!1,M=!1,k=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function D(z){for(var F=n(h);F!==null;){if(F.callback===null)i(h);else if(F.startTime<=z)i(h),F.sortIndex=F.expirationTime,t(u,F);else break;F=n(h)}}function L(z){if(M=!1,D(z),!N)if(n(u)!==null)N=!0,q||(q=!0,I());else{var F=n(h);F!==null&&Rt(L,F.startTime-z)}}var q=!1,E=-1,y=5,T=-1;function S(){return k?!0:!(e.unstable_now()-T<y)}function R(){if(k=!1,q){var z=e.unstable_now();T=z;var F=!0;try{t:{N=!1,M&&(M=!1,v(E),E=-1),_=!0;var X=m;try{e:{for(D(z),g=n(u);g!==null&&!(g.expirationTime>z&&S());){var ct=g.callback;if(typeof ct=="function"){g.callback=null,m=g.priorityLevel;var bt=ct(g.expirationTime<=z);if(z=e.unstable_now(),typeof bt=="function"){g.callback=bt,D(z),F=!0;break e}g===n(u)&&i(u),D(z)}else i(u);g=n(u)}if(g!==null)F=!0;else{var We=n(h);We!==null&&Rt(L,We.startTime-z),F=!1}}break t}finally{g=null,m=X,_=!1}F=void 0}}finally{F?I():q=!1}}}var I;if(typeof w=="function")I=function(){w(R)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,Y=b.port2;b.port1.onmessage=R,I=function(){Y.postMessage(null)}}else I=function(){A(R,0)};function Rt(z,F){E=A(function(){z(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(z){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var X=m;m=F;try{return z()}finally{m=X}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(z,F){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=m;m=z;try{return F()}finally{m=X}},e.unstable_scheduleCallback=function(z,F,X){var ct=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ct+X:ct):X=ct,z){case 1:var bt=-1;break;case 2:bt=250;break;case 5:bt=1073741823;break;case 4:bt=1e4;break;default:bt=5e3}return bt=X+bt,z={id:d++,callback:F,priorityLevel:z,startTime:X,expirationTime:bt,sortIndex:-1},X>ct?(z.sortIndex=X,t(h,z),n(u)===null&&z===n(h)&&(M?(v(E),E=-1):M=!0,Rt(L,X-ct))):(z.sortIndex=bt,t(u,z),N||_||(N=!0,q||(q=!0,I()))),z},e.unstable_shouldYield=S,e.unstable_wrapCallback=function(z){var F=m;return function(){var X=m;m=F;try{return z.apply(this,arguments)}finally{m=X}}}})(zv);Lv.exports=zv;var Y1=Lv.exports,Bv={exports:{}},Oe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K1=$;function jv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function gi(){}var Ne={d:{f:gi,r:function(){throw Error(jv(522))},D:gi,C:gi,L:gi,m:gi,X:gi,S:gi,M:gi},p:0,findDOMNode:null},$1=Symbol.for("react.portal");function X1(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$1,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Ha=K1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function vc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Oe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ne;Oe.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(jv(299));return X1(e,t,null,n)};Oe.flushSync=function(e){var t=Ha.T,n=Ne.p;try{if(Ha.T=null,Ne.p=2,e)return e()}finally{Ha.T=t,Ne.p=n,Ne.d.f()}};Oe.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Ne.d.C(e,t))};Oe.prefetchDNS=function(e){typeof e=="string"&&Ne.d.D(e)};Oe.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=vc(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Ne.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Ne.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Oe.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=vc(t.as,t.crossOrigin);Ne.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Ne.d.M(e)};Oe.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=vc(n,t.crossOrigin);Ne.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Oe.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=vc(t.as,t.crossOrigin);Ne.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Ne.d.m(e)};Oe.requestFormReset=function(e){Ne.d.r(e)};Oe.unstable_batchedUpdates=function(e,t){return e(t)};Oe.useFormState=function(e,t,n){return Ha.H.useFormState(e,t,n)};Oe.useFormStatus=function(){return Ha.H.useHostTransitionStatus()};Oe.version="19.1.1";function qv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qv)}catch(e){console.error(e)}}qv(),Bv.exports=Oe;var Z1=Bv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wt=Y1,Hv=$,J1=Z1;function U(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Gv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Po(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Fv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Op(e){if(Po(e)!==e)throw Error(U(188))}function W1(e){var t=e.alternate;if(!t){if(t=Po(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Op(r),e;if(s===i)return Op(r),t;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function Qv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Qv(e),t!==null)return t;e=e.sibling}return null}var Nt=Object.assign,tb=Symbol.for("react.element"),Ol=Symbol.for("react.transitional.element"),ka=Symbol.for("react.portal"),as=Symbol.for("react.fragment"),Yv=Symbol.for("react.strict_mode"),gf=Symbol.for("react.profiler"),eb=Symbol.for("react.provider"),Kv=Symbol.for("react.consumer"),Gn=Symbol.for("react.context"),jd=Symbol.for("react.forward_ref"),pf=Symbol.for("react.suspense"),yf=Symbol.for("react.suspense_list"),qd=Symbol.for("react.memo"),vi=Symbol.for("react.lazy"),_f=Symbol.for("react.activity"),nb=Symbol.for("react.memo_cache_sentinel"),Vp=Symbol.iterator;function Ia(e){return e===null||typeof e!="object"?null:(e=Vp&&e[Vp]||e["@@iterator"],typeof e=="function"?e:null)}var ib=Symbol.for("react.client.reference");function vf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ib?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case as:return"Fragment";case gf:return"Profiler";case Yv:return"StrictMode";case pf:return"Suspense";case yf:return"SuspenseList";case _f:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ka:return"Portal";case Gn:return(e.displayName||"Context")+".Provider";case Kv:return(e._context.displayName||"Context")+".Consumer";case jd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qd:return t=e.displayName||null,t!==null?t:vf(e.type)||"Memo";case vi:t=e._payload,e=e._init;try{return vf(e(t))}catch{}}return null}var Pa=Array.isArray,J=Hv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pt=J1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vr={pending:!1,data:null,method:null,action:null},Ef=[],os=-1;function xn(e){return{current:e}}function ae(e){0>os||(e.current=Ef[os],Ef[os]=null,os--)}function xt(e,t){os++,Ef[os]=e.current,e.current=t}var bn=xn(null),ho=xn(null),xi=xn(null),Eu=xn(null);function Tu(e,t){switch(xt(xi,t),xt(ho,e),xt(bn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Uy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Uy(t),e=h0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ae(bn),xt(bn,e)}function Ms(){ae(bn),ae(ho),ae(xi)}function Tf(e){e.memoizedState!==null&&xt(Eu,e);var t=bn.current,n=h0(t,e.type);t!==n&&(xt(ho,e),xt(bn,n))}function Au(e){ho.current===e&&(ae(bn),ae(ho)),Eu.current===e&&(ae(Eu),Ao._currentValue=vr)}var Af=Object.prototype.hasOwnProperty,Hd=Wt.unstable_scheduleCallback,Sh=Wt.unstable_cancelCallback,rb=Wt.unstable_shouldYield,sb=Wt.unstable_requestPaint,wn=Wt.unstable_now,ab=Wt.unstable_getCurrentPriorityLevel,$v=Wt.unstable_ImmediatePriority,Xv=Wt.unstable_UserBlockingPriority,Su=Wt.unstable_NormalPriority,ob=Wt.unstable_LowPriority,Zv=Wt.unstable_IdlePriority,lb=Wt.log,ub=Wt.unstable_setDisableYieldValue,Uo=null,Qe=null;function Di(e){if(typeof lb=="function"&&ub(e),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(Uo,e)}catch{}}var Ye=Math.clz32?Math.clz32:fb,cb=Math.log,hb=Math.LN2;function fb(e){return e>>>=0,e===0?32:31-(cb(e)/hb|0)|0}var Vl=256,Ml=4194304;function mr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ec(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=mr(i):(a&=l,a!==0?r=mr(a):n||(n=l&~e,n!==0&&(r=mr(n))))):(l=i&~s,l!==0?r=mr(l):a!==0?r=mr(a):n||(n=i&~e,n!==0&&(r=mr(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function Lo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function db(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jv(){var e=Vl;return Vl<<=1,!(Vl&4194048)&&(Vl=256),e}function Wv(){var e=Ml;return Ml<<=1,!(Ml&62914560)&&(Ml=4194304),e}function bh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function mb(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-Ye(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&tE(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function tE(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Ye(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function eE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Ye(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Gd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function nE(){var e=pt.p;return e!==0?e:(e=window.event,e===void 0?32:T0(e.type))}function gb(e,t){var n=pt.p;try{return pt.p=e,t()}finally{pt.p=n}}var sr=Math.random().toString(36).slice(2),Te="__reactFiber$"+sr,Ue="__reactProps$"+sr,Js="__reactContainer$"+sr,Sf="__reactEvents$"+sr,pb="__reactListeners$"+sr,yb="__reactHandles$"+sr,Mp="__reactResources$"+sr,Bo="__reactMarker$"+sr;function Qd(e){delete e[Te],delete e[Ue],delete e[Sf],delete e[pb],delete e[yb]}function ls(e){var t=e[Te];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Js]||n[Te]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=By(e);e!==null;){if(n=e[Te])return n;e=By(e)}return t}e=n,n=e.parentNode}return null}function Ws(e){if(e=e[Te]||e[Js]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Ua(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(U(33))}function Es(e){var t=e[Mp];return t||(t=e[Mp]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ie(e){e[Bo]=!0}var iE=new Set,rE={};function kr(e,t){xs(e,t),xs(e+"Capture",t)}function xs(e,t){for(rE[e]=t,e=0;e<t.length;e++)iE.add(t[e])}var _b=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xp={},kp={};function vb(e){return Af.call(kp,e)?!0:Af.call(xp,e)?!1:_b.test(e)?kp[e]=!0:(xp[e]=!0,!1)}function Zl(e,t,n){if(vb(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function xl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Bn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var wh,Pp;function Wr(e){if(wh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wh=t&&t[1]||"",Pp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wh+e+Pp}var Rh=!1;function Ih(e,t){if(!e||Rh)return"";Rh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var m=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){m=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){m=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{Rh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Wr(n):""}function Eb(e){switch(e.tag){case 26:case 27:case 5:return Wr(e.type);case 16:return Wr("Lazy");case 13:return Wr("Suspense");case 19:return Wr("SuspenseList");case 0:case 15:return Ih(e.type,!1);case 11:return Ih(e.type.render,!1);case 1:return Ih(e.type,!0);case 31:return Wr("Activity");default:return""}}function Up(e){try{var t="";do t+=Eb(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function nn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Tb(e){var t=sE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bu(e){e._valueTracker||(e._valueTracker=Tb(e))}function aE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=sE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function wu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ab=/[\n"\\]/g;function an(e){return e.replace(Ab,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function bf(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+nn(t)):e.value!==""+nn(t)&&(e.value=""+nn(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?wf(e,a,nn(t)):n!=null?wf(e,a,nn(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+nn(l):e.removeAttribute("name")}function oE(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+nn(n):"",t=t!=null?""+nn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function wf(e,t,n){t==="number"&&wu(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ts(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+nn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function lE(e,t,n){if(t!=null&&(t=""+nn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+nn(n):""}function uE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(U(92));if(Pa(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=nn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function ks(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Sb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||Sb.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function cE(e,t,n){if(t!=null&&typeof t!="object")throw Error(U(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Lp(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&Lp(e,s,t[s])}function Yd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jl(e){return wb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Rf=null;function Kd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var us=null,As=null;function zp(e){var t=Ws(e);if(t&&(e=t.stateNode)){var n=e[Ue]||null;t:switch(e=t.stateNode,t.type){case"input":if(bf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+an(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Ue]||null;if(!r)throw Error(U(90));bf(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&aE(i)}break t;case"textarea":lE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Ts(e,!!n.multiple,t,!1)}}}var Ch=!1;function hE(e,t,n){if(Ch)return e(t,n);Ch=!0;try{var i=e(t);return i}finally{if(Ch=!1,(us!==null||As!==null)&&(Nc(),us&&(t=us,e=As,As=us=null,zp(t),e)))for(t=0;t<e.length;t++)zp(e[t])}}function fo(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Ue]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),If=!1;if(ti)try{var Ca={};Object.defineProperty(Ca,"passive",{get:function(){If=!0}}),window.addEventListener("test",Ca,Ca),window.removeEventListener("test",Ca,Ca)}catch{If=!1}var Ni=null,$d=null,Wl=null;function fE(){if(Wl)return Wl;var e,t=$d,n=t.length,i,r="value"in Ni?Ni.value:Ni.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return Wl=r.slice(e,1<i?1-i:void 0)}function tu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kl(){return!0}function Bp(){return!1}function Le(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?kl:Bp,this.isPropagationStopped=Bp,this}return Nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kl)},persist:function(){},isPersistent:kl}),t}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tc=Le(Pr),jo=Nt({},Pr,{view:0,detail:0}),Rb=Le(jo),Dh,Nh,Da,Ac=Nt({},jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Da&&(Da&&e.type==="mousemove"?(Dh=e.screenX-Da.screenX,Nh=e.screenY-Da.screenY):Nh=Dh=0,Da=e),Dh)},movementY:function(e){return"movementY"in e?e.movementY:Nh}}),jp=Le(Ac),Ib=Nt({},Ac,{dataTransfer:0}),Cb=Le(Ib),Db=Nt({},jo,{relatedTarget:0}),Oh=Le(Db),Nb=Nt({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ob=Le(Nb),Vb=Nt({},Pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mb=Le(Vb),xb=Nt({},Pr,{data:0}),qp=Le(xb),kb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ub={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ub[e])?!!t[e]:!1}function Xd(){return Lb}var zb=Nt({},jo,{key:function(e){if(e.key){var t=kb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Pb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xd,charCode:function(e){return e.type==="keypress"?tu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Bb=Le(zb),jb=Nt({},Ac,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hp=Le(jb),qb=Nt({},jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xd}),Hb=Le(qb),Gb=Nt({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fb=Le(Gb),Qb=Nt({},Ac,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yb=Le(Qb),Kb=Nt({},Pr,{newState:0,oldState:0}),$b=Le(Kb),Xb=[9,13,27,32],Zd=ti&&"CompositionEvent"in window,Ga=null;ti&&"documentMode"in document&&(Ga=document.documentMode);var Zb=ti&&"TextEvent"in window&&!Ga,dE=ti&&(!Zd||Ga&&8<Ga&&11>=Ga),Gp=" ",Fp=!1;function mE(e,t){switch(e){case"keyup":return Xb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cs=!1;function Jb(e,t){switch(e){case"compositionend":return gE(t);case"keypress":return t.which!==32?null:(Fp=!0,Gp);case"textInput":return e=t.data,e===Gp&&Fp?null:e;default:return null}}function Wb(e,t){if(cs)return e==="compositionend"||!Zd&&mE(e,t)?(e=fE(),Wl=$d=Ni=null,cs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dE&&t.locale!=="ko"?null:t.data;default:return null}}var tw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!tw[e.type]:t==="textarea"}function pE(e,t,n,i){us?As?As.push(i):As=[i]:us=i,t=Hu(t,"onChange"),0<t.length&&(n=new Tc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Fa=null,mo=null;function ew(e){l0(e,0)}function Sc(e){var t=Ua(e);if(aE(t))return e}function Yp(e,t){if(e==="change")return t}var yE=!1;if(ti){var Vh;if(ti){var Mh="oninput"in document;if(!Mh){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),Mh=typeof Kp.oninput=="function"}Vh=Mh}else Vh=!1;yE=Vh&&(!document.documentMode||9<document.documentMode)}function $p(){Fa&&(Fa.detachEvent("onpropertychange",_E),mo=Fa=null)}function _E(e){if(e.propertyName==="value"&&Sc(mo)){var t=[];pE(t,mo,e,Kd(e)),hE(ew,t)}}function nw(e,t,n){e==="focusin"?($p(),Fa=t,mo=n,Fa.attachEvent("onpropertychange",_E)):e==="focusout"&&$p()}function iw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sc(mo)}function rw(e,t){if(e==="click")return Sc(t)}function sw(e,t){if(e==="input"||e==="change")return Sc(t)}function aw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Je=typeof Object.is=="function"?Object.is:aw;function go(e,t){if(Je(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Af.call(t,r)||!Je(e[r],t[r]))return!1}return!0}function Xp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zp(e,t){var n=Xp(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Xp(n)}}function vE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function EE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=wu(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=wu(e.document)}return t}function Jd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ow=ti&&"documentMode"in document&&11>=document.documentMode,hs=null,Cf=null,Qa=null,Df=!1;function Jp(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Df||hs==null||hs!==wu(i)||(i=hs,"selectionStart"in i&&Jd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Qa&&go(Qa,i)||(Qa=i,i=Hu(Cf,"onSelect"),0<i.length&&(t=new Tc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=hs)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fs={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},xh={},TE={};ti&&(TE=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function Ur(e){if(xh[e])return xh[e];if(!fs[e])return e;var t=fs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in TE)return xh[e]=t[n];return e}var AE=Ur("animationend"),SE=Ur("animationiteration"),bE=Ur("animationstart"),lw=Ur("transitionrun"),uw=Ur("transitionstart"),cw=Ur("transitioncancel"),wE=Ur("transitionend"),RE=new Map,Nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nf.push("scrollEnd");function yn(e,t){RE.set(e,t),kr(t,[e])}var Wp=new WeakMap;function on(e,t){if(typeof e=="object"&&e!==null){var n=Wp.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Up(t)},Wp.set(e,t),t)}return{value:e,source:t,stack:Up(t)}}var en=[],ds=0,Wd=0;function bc(){for(var e=ds,t=Wd=ds=0;t<e;){var n=en[t];en[t++]=null;var i=en[t];en[t++]=null;var r=en[t];en[t++]=null;var s=en[t];if(en[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&IE(n,r,s)}}function wc(e,t,n,i){en[ds++]=e,en[ds++]=t,en[ds++]=n,en[ds++]=i,Wd|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function tm(e,t,n,i){return wc(e,t,n,i),Ru(e)}function ta(e,t){return wc(e,null,null,t),Ru(e)}function IE(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-Ye(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function Ru(e){if(50<no)throw no=0,Zf=null,Error(U(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ms={};function hw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function He(e,t,n,i){return new hw(e,t,n,i)}function em(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zn(e,t){var n=e.alternate;return n===null?(n=He(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function CE(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function eu(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")em(e)&&(a=1);else if(typeof e=="string")a=dR(e,n,bn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case _f:return e=He(31,n,t,r),e.elementType=_f,e.lanes=s,e;case as:return Er(n.children,r,s,t);case Yv:a=8,r|=24;break;case gf:return e=He(12,n,t,r|2),e.elementType=gf,e.lanes=s,e;case pf:return e=He(13,n,t,r),e.elementType=pf,e.lanes=s,e;case yf:return e=He(19,n,t,r),e.elementType=yf,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case eb:case Gn:a=10;break t;case Kv:a=9;break t;case jd:a=11;break t;case qd:a=14;break t;case vi:a=16,i=null;break t}a=29,n=Error(U(130,e===null?"null":typeof e,"")),i=null}return t=He(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Er(e,t,n,i){return e=He(7,e,i,t),e.lanes=n,e}function kh(e,t,n){return e=He(6,e,null,t),e.lanes=n,e}function Ph(e,t,n){return t=He(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var gs=[],ps=0,Iu=null,Cu=0,rn=[],sn=0,Tr=null,Fn=1,Qn="";function gr(e,t){gs[ps++]=Cu,gs[ps++]=Iu,Iu=e,Cu=t}function DE(e,t,n){rn[sn++]=Fn,rn[sn++]=Qn,rn[sn++]=Tr,Tr=e;var i=Fn;e=Qn;var r=32-Ye(i)-1;i&=~(1<<r),n+=1;var s=32-Ye(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Fn=1<<32-Ye(t)+r|n<<r|i,Qn=s+e}else Fn=1<<s|n<<r|i,Qn=e}function nm(e){e.return!==null&&(gr(e,1),DE(e,1,0))}function im(e){for(;e===Iu;)Iu=gs[--ps],gs[ps]=null,Cu=gs[--ps],gs[ps]=null;for(;e===Tr;)Tr=rn[--sn],rn[sn]=null,Qn=rn[--sn],rn[sn]=null,Fn=rn[--sn],rn[sn]=null}var Ce=null,zt=null,gt=!1,Ar=null,An=!1,Of=Error(U(519));function Rr(e){var t=Error(U(418,""));throw po(on(t,e)),Of}function ty(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Te]=e,t[Ue]=i,n){case"dialog":rt("cancel",t),rt("close",t);break;case"iframe":case"object":case"embed":rt("load",t);break;case"video":case"audio":for(n=0;n<vo.length;n++)rt(vo[n],t);break;case"source":rt("error",t);break;case"img":case"image":case"link":rt("error",t),rt("load",t);break;case"details":rt("toggle",t);break;case"input":rt("invalid",t),oE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),bu(t);break;case"select":rt("invalid",t);break;case"textarea":rt("invalid",t),uE(t,i.value,i.defaultValue,i.children),bu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||c0(t.textContent,n)?(i.popover!=null&&(rt("beforetoggle",t),rt("toggle",t)),i.onScroll!=null&&rt("scroll",t),i.onScrollEnd!=null&&rt("scrollend",t),i.onClick!=null&&(t.onclick=Mc),t=!0):t=!1,t||Rr(e)}function ey(e){for(Ce=e.return;Ce;)switch(Ce.tag){case 5:case 13:An=!1;return;case 27:case 3:An=!0;return;default:Ce=Ce.return}}function Na(e){if(e!==Ce)return!1;if(!gt)return ey(e),gt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||id(e.type,e.memoizedProps)),n=!n),n&&zt&&Rr(e),ey(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){zt=gn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}zt=null}}else t===27?(t=zt,ar(e.type)?(e=ad,ad=null,zt=e):zt=t):zt=Ce?gn(e.stateNode.nextSibling):null;return!0}function qo(){zt=Ce=null,gt=!1}function ny(){var e=Ar;return e!==null&&(ke===null?ke=e:ke.push.apply(ke,e),Ar=null),e}function po(e){Ar===null?Ar=[e]:Ar.push(e)}var Vf=xn(null),Lr=null,Yn=null;function Ti(e,t,n){xt(Vf,t._currentValue),t._currentValue=n}function Jn(e){e._currentValue=Vf.current,ae(Vf)}function Mf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function xf(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Mf(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(U(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Mf(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Ho(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(U(387));if(a=a.memoizedProps,a!==null){var l=r.type;Je(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===Eu.current){if(a=r.alternate,a===null)throw Error(U(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Ao):e=[Ao])}r=r.return}e!==null&&xf(t,e,n,i),t.flags|=262144}function Du(e){for(e=e.firstContext;e!==null;){if(!Je(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ir(e){Lr=e,Yn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ae(e){return NE(Lr,e)}function Pl(e,t){return Lr===null&&Ir(e),NE(e,t)}function NE(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Yn===null){if(e===null)throw Error(U(308));Yn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Yn=Yn.next=t;return n}var fw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},dw=Wt.unstable_scheduleCallback,mw=Wt.unstable_NormalPriority,Xt={$$typeof:Gn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rm(){return{controller:new fw,data:new Map,refCount:0}}function Go(e){e.refCount--,e.refCount===0&&dw(mw,function(){e.controller.abort()})}var Ya=null,kf=0,Ps=0,Ss=null;function gw(e,t){if(Ya===null){var n=Ya=[];kf=0,Ps=Im(),Ss={status:"pending",value:void 0,then:function(i){n.push(i)}}}return kf++,t.then(iy,iy),t}function iy(){if(--kf===0&&Ya!==null){Ss!==null&&(Ss.status="fulfilled");var e=Ya;Ya=null,Ps=0,Ss=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function pw(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var ry=J.S;J.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&gw(e,t),ry!==null&&ry(e,t)};var Sr=xn(null);function sm(){var e=Sr.current;return e!==null?e:wt.pooledCache}function nu(e,t){t===null?xt(Sr,Sr.current):xt(Sr,t.pool)}function OE(){var e=sm();return e===null?null:{parent:Xt._currentValue,pool:e}}var Fo=Error(U(460)),VE=Error(U(474)),Rc=Error(U(542)),Pf={then:function(){}};function sy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ul(){}function ME(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ul,Ul),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,oy(e),e;default:if(typeof t.status=="string")t.then(Ul,Ul);else{if(e=wt,e!==null&&100<e.shellSuspendCounter)throw Error(U(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,oy(e),e}throw Ka=t,Fo}}var Ka=null;function ay(){if(Ka===null)throw Error(U(459));var e=Ka;return Ka=null,e}function oy(e){if(e===Fo||e===Rc)throw Error(U(483))}var Ei=!1;function am(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ki(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Pi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,_t&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Ru(e),IE(e,null,n),t}return wc(e,i,t,n),Ru(e)}function $a(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,eE(e,n)}}function Uh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Lf=!1;function Xa(){if(Lf){var e=Ss;if(e!==null)throw e}}function Za(e,t,n,i){Lf=!1;var r=e.updateQueue;Ei=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(ft&m)===m:(i&m)===m){m!==0&&m===Ps&&(Lf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var N=e,M=l;m=t;var k=n;switch(M.tag){case 1:if(N=M.payload,typeof N=="function"){g=N.call(k,g,m);break t}g=N;break t;case 3:N.flags=N.flags&-65537|128;case 0:if(N=M.payload,m=typeof N=="function"?N.call(k,g,m):N,m==null)break t;g=Nt({},g,m);break t;case 2:Ei=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=r.callbacks,_===null?r.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=g):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);d===null&&(u=g),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),Zi|=a,e.lanes=a,e.memoizedState=g}}function xE(e,t){if(typeof e!="function")throw Error(U(191,e));e.call(t)}function kE(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)xE(n[e],t)}var Us=xn(null),Nu=xn(0);function ly(e,t){e=ii,xt(Nu,e),xt(Us,t),ii=e|t.baseLanes}function zf(){xt(Nu,ii),xt(Us,Us.current)}function om(){ii=Nu.current,ae(Us),ae(Nu)}var $i=0,it=null,Et=null,Ft=null,Ou=!1,bs=!1,Cr=!1,Vu=0,yo=0,ws=null,yw=0;function jt(){throw Error(U(321))}function lm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Je(e[n],t[n]))return!1;return!0}function um(e,t,n,i,r,s){return $i=s,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,J.H=e===null||e.memoizedState===null?fT:dT,Cr=!1,s=n(i,r),Cr=!1,bs&&(s=UE(t,n,i,r)),PE(e),s}function PE(e){J.H=Mu;var t=Et!==null&&Et.next!==null;if($i=0,Ft=Et=it=null,Ou=!1,yo=0,ws=null,t)throw Error(U(300));e===null||se||(e=e.dependencies,e!==null&&Du(e)&&(se=!0))}function UE(e,t,n,i){it=e;var r=0;do{if(bs&&(ws=null),yo=0,bs=!1,25<=r)throw Error(U(301));if(r+=1,Ft=Et=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}J.H=bw,s=t(n,i)}while(bs);return s}function _w(){var e=J.H,t=e.useState()[0];return t=typeof t.then=="function"?Qo(t):t,e=e.useState()[0],(Et!==null?Et.memoizedState:null)!==e&&(it.flags|=1024),t}function cm(){var e=Vu!==0;return Vu=0,e}function hm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function fm(e){if(Ou){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ou=!1}$i=0,Ft=Et=it=null,bs=!1,yo=Vu=0,ws=null}function Me(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?it.memoizedState=Ft=e:Ft=Ft.next=e,Ft}function Kt(){if(Et===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=Et.next;var t=Ft===null?it.memoizedState:Ft.next;if(t!==null)Ft=t,Et=e;else{if(e===null)throw it.alternate===null?Error(U(467)):Error(U(310));Et=e,e={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Ft===null?it.memoizedState=Ft=e:Ft=Ft.next=e}return Ft}function dm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qo(e){var t=yo;return yo+=1,ws===null&&(ws=[]),e=ME(ws,e,t),t=it,(Ft===null?t.memoizedState:Ft.next)===null&&(t=t.alternate,J.H=t===null||t.memoizedState===null?fT:dT),e}function Ic(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Qo(e);if(e.$$typeof===Gn)return Ae(e)}throw Error(U(438,String(e)))}function mm(e){var t=null,n=it.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=it.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=dm(),it.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=nb;return t.index++,n}function ei(e,t){return typeof t=="function"?t(e):t}function iu(e){var t=Kt();return gm(t,Et,e)}function gm(e,t,n){var i=e.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(ft&g)===g:($i&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Ps&&(d=!0);else if(($i&m)===m){h=h.next,m===Ps&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=s):u=u.next=g,it.lanes|=m,Zi|=m;g=h.action,Cr&&n(s,g),s=h.hasEagerState?h.eagerState:n(s,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,it.lanes|=g,Zi|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!Je(s,e.memoizedState)&&(se=!0,d&&(n=Ss,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Lh(e){var t=Kt(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);Je(s,t.memoizedState)||(se=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function LE(e,t,n){var i=it,r=Kt(),s=gt;if(s){if(n===void 0)throw Error(U(407));n=n()}else n=t();var a=!Je((Et||r).memoizedState,n);a&&(r.memoizedState=n,se=!0),r=r.queue;var l=jE.bind(null,i,r,e);if(Yo(2048,8,l,[e]),r.getSnapshot!==t||a||Ft!==null&&Ft.memoizedState.tag&1){if(i.flags|=2048,Ls(9,Cc(),BE.bind(null,i,r,n,t),null),wt===null)throw Error(U(349));s||$i&124||zE(i,t,n)}return n}function zE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=it.updateQueue,t===null?(t=dm(),it.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function BE(e,t,n,i){t.value=n,t.getSnapshot=i,qE(t)&&HE(e)}function jE(e,t,n){return n(function(){qE(t)&&HE(e)})}function qE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Je(e,n)}catch{return!0}}function HE(e){var t=ta(e,2);t!==null&&$e(t,e,2)}function Bf(e){var t=Me();if(typeof e=="function"){var n=e;if(e=n(),Cr){Di(!0);try{n()}finally{Di(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:e},t}function GE(e,t,n,i){return e.baseState=n,gm(e,Et,typeof i=="function"?i:ei)}function vw(e,t,n,i,r){if(Dc(e))throw Error(U(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};J.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,FE(t,s)):(s.next=n.next,t.pending=n.next=s)}}function FE(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=J.T,a={};J.T=a;try{var l=n(r,i),u=J.S;u!==null&&u(a,l),uy(e,t,l)}catch(h){jf(e,t,h)}finally{J.T=s}}else try{s=n(r,i),uy(e,t,s)}catch(h){jf(e,t,h)}}function uy(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){cy(e,t,i)},function(i){return jf(e,t,i)}):cy(e,t,n)}function cy(e,t,n){t.status="fulfilled",t.value=n,QE(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,FE(e,n)))}function jf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,QE(t),t=t.next;while(t!==i)}e.action=null}function QE(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function YE(e,t){return t}function hy(e,t){if(gt){var n=wt.formState;if(n!==null){t:{var i=it;if(gt){if(zt){e:{for(var r=zt,s=An;r.nodeType!==8;){if(!s){r=null;break e}if(r=gn(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){zt=gn(r.nextSibling),i=r.data==="F!";break t}}Rr(i)}i=!1}i&&(t=n[0])}}return n=Me(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:YE,lastRenderedState:t},n.queue=i,n=uT.bind(null,it,i),i.dispatch=n,i=Bf(!1),s=vm.bind(null,it,!1,i.queue),i=Me(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=vw.bind(null,it,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function fy(e){var t=Kt();return KE(t,Et,e)}function KE(e,t,n){if(t=gm(e,t,YE)[0],e=iu(ei)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Qo(t)}catch(a){throw a===Fo?Rc:a}else i=t;t=Kt();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(it.flags|=2048,Ls(9,Cc(),Ew.bind(null,r,n),null)),[i,s,e]}function Ew(e,t){e.action=t}function dy(e){var t=Kt(),n=Et;if(n!==null)return KE(t,n,e);Kt(),t=t.memoizedState,n=Kt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Ls(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=it.updateQueue,t===null&&(t=dm(),it.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Cc(){return{destroy:void 0,resource:void 0}}function $E(){return Kt().memoizedState}function ru(e,t,n,i){var r=Me();i=i===void 0?null:i,it.flags|=e,r.memoizedState=Ls(1|t,Cc(),n,i)}function Yo(e,t,n,i){var r=Kt();i=i===void 0?null:i;var s=r.memoizedState.inst;Et!==null&&i!==null&&lm(i,Et.memoizedState.deps)?r.memoizedState=Ls(t,s,n,i):(it.flags|=e,r.memoizedState=Ls(1|t,s,n,i))}function my(e,t){ru(8390656,8,e,t)}function XE(e,t){Yo(2048,8,e,t)}function ZE(e,t){return Yo(4,2,e,t)}function JE(e,t){return Yo(4,4,e,t)}function WE(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tT(e,t,n){n=n!=null?n.concat([e]):null,Yo(4,4,WE.bind(null,t,e),n)}function pm(){}function eT(e,t){var n=Kt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&lm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function nT(e,t){var n=Kt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&lm(t,i[1]))return i[0];if(i=e(),Cr){Di(!0);try{e()}finally{Di(!1)}}return n.memoizedState=[i,t],i}function ym(e,t,n){return n===void 0||$i&1073741824?e.memoizedState=t:(e.memoizedState=n,e=QT(),it.lanes|=e,Zi|=e,n)}function iT(e,t,n,i){return Je(n,t)?n:Us.current!==null?(e=ym(e,n,i),Je(e,t)||(se=!0),e):$i&42?(e=QT(),it.lanes|=e,Zi|=e,t):(se=!0,e.memoizedState=n)}function rT(e,t,n,i,r){var s=pt.p;pt.p=s!==0&&8>s?s:8;var a=J.T,l={};J.T=l,vm(e,!1,t,n);try{var u=r(),h=J.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=pw(u,i);Ja(e,t,d,Ke(e))}else Ja(e,t,i,Ke(e))}catch(g){Ja(e,t,{then:function(){},status:"rejected",reason:g},Ke())}finally{pt.p=s,J.T=a}}function Tw(){}function qf(e,t,n,i){if(e.tag!==5)throw Error(U(476));var r=sT(e).queue;rT(e,r,t,vr,n===null?Tw:function(){return aT(e),n(i)})}function sT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:vr,baseState:vr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:vr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function aT(e){var t=sT(e).next.queue;Ja(e,t,{},Ke())}function _m(){return Ae(Ao)}function oT(){return Kt().memoizedState}function lT(){return Kt().memoizedState}function Aw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ke();e=ki(n);var i=Pi(t,e,n);i!==null&&($e(i,t,n),$a(i,t,n)),t={cache:rm()},e.payload=t;return}t=t.return}}function Sw(e,t,n){var i=Ke();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Dc(e)?cT(t,n):(n=tm(e,t,n,i),n!==null&&($e(n,e,i),hT(n,t,i)))}function uT(e,t,n){var i=Ke();Ja(e,t,n,i)}function Ja(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dc(e))cT(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,Je(l,a))return wc(e,t,r,0),wt===null&&bc(),!1}catch{}finally{}if(n=tm(e,t,r,i),n!==null)return $e(n,e,i),hT(n,t,i),!0}return!1}function vm(e,t,n,i){if(i={lane:2,revertLane:Im(),action:i,hasEagerState:!1,eagerState:null,next:null},Dc(e)){if(t)throw Error(U(479))}else t=tm(e,n,i,2),t!==null&&$e(t,e,2)}function Dc(e){var t=e.alternate;return e===it||t!==null&&t===it}function cT(e,t){bs=Ou=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,eE(e,n)}}var Mu={readContext:Ae,use:Ic,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt},fT={readContext:Ae,use:Ic,useCallback:function(e,t){return Me().memoizedState=[e,t===void 0?null:t],e},useContext:Ae,useEffect:my,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,ru(4194308,4,WE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ru(4194308,4,e,t)},useInsertionEffect:function(e,t){ru(4,2,e,t)},useMemo:function(e,t){var n=Me();t=t===void 0?null:t;var i=e();if(Cr){Di(!0);try{e()}finally{Di(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Me();if(n!==void 0){var r=n(t);if(Cr){Di(!0);try{n(t)}finally{Di(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Sw.bind(null,it,e),[i.memoizedState,e]},useRef:function(e){var t=Me();return e={current:e},t.memoizedState=e},useState:function(e){e=Bf(e);var t=e.queue,n=uT.bind(null,it,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:pm,useDeferredValue:function(e,t){var n=Me();return ym(n,e,t)},useTransition:function(){var e=Bf(!1);return e=rT.bind(null,it,e.queue,!0,!1),Me().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=it,r=Me();if(gt){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),wt===null)throw Error(U(349));ft&124||zE(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,my(jE.bind(null,i,s,e),[e]),i.flags|=2048,Ls(9,Cc(),BE.bind(null,i,s,n,t),null),n},useId:function(){var e=Me(),t=wt.identifierPrefix;if(gt){var n=Qn,i=Fn;n=(i&~(1<<32-Ye(i)-1)).toString(32)+n,t=""+t+"R"+n,n=Vu++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=yw++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:_m,useFormState:hy,useActionState:hy,useOptimistic:function(e){var t=Me();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=vm.bind(null,it,!0,n),n.dispatch=t,[e,t]},useMemoCache:mm,useCacheRefresh:function(){return Me().memoizedState=Aw.bind(null,it)}},dT={readContext:Ae,use:Ic,useCallback:eT,useContext:Ae,useEffect:XE,useImperativeHandle:tT,useInsertionEffect:ZE,useLayoutEffect:JE,useMemo:nT,useReducer:iu,useRef:$E,useState:function(){return iu(ei)},useDebugValue:pm,useDeferredValue:function(e,t){var n=Kt();return iT(n,Et.memoizedState,e,t)},useTransition:function(){var e=iu(ei)[0],t=Kt().memoizedState;return[typeof e=="boolean"?e:Qo(e),t]},useSyncExternalStore:LE,useId:oT,useHostTransitionStatus:_m,useFormState:fy,useActionState:fy,useOptimistic:function(e,t){var n=Kt();return GE(n,Et,e,t)},useMemoCache:mm,useCacheRefresh:lT},bw={readContext:Ae,use:Ic,useCallback:eT,useContext:Ae,useEffect:XE,useImperativeHandle:tT,useInsertionEffect:ZE,useLayoutEffect:JE,useMemo:nT,useReducer:Lh,useRef:$E,useState:function(){return Lh(ei)},useDebugValue:pm,useDeferredValue:function(e,t){var n=Kt();return Et===null?ym(n,e,t):iT(n,Et.memoizedState,e,t)},useTransition:function(){var e=Lh(ei)[0],t=Kt().memoizedState;return[typeof e=="boolean"?e:Qo(e),t]},useSyncExternalStore:LE,useId:oT,useHostTransitionStatus:_m,useFormState:dy,useActionState:dy,useOptimistic:function(e,t){var n=Kt();return Et!==null?GE(n,Et,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:mm,useCacheRefresh:lT},Rs=null,_o=0;function Ll(e){var t=_o;return _o+=1,Rs===null&&(Rs=[]),ME(Rs,e,t)}function Oa(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function zl(e,t){throw t.$$typeof===tb?Error(U(525)):(e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function gy(e){var t=e._init;return t(e._payload)}function mT(e){function t(A,v){if(e){var w=A.deletions;w===null?(A.deletions=[v],A.flags|=16):w.push(v)}}function n(A,v){if(!e)return null;for(;v!==null;)t(A,v),v=v.sibling;return null}function i(A){for(var v=new Map;A!==null;)A.key!==null?v.set(A.key,A):v.set(A.index,A),A=A.sibling;return v}function r(A,v){return A=Zn(A,v),A.index=0,A.sibling=null,A}function s(A,v,w){return A.index=w,e?(w=A.alternate,w!==null?(w=w.index,w<v?(A.flags|=67108866,v):w):(A.flags|=67108866,v)):(A.flags|=1048576,v)}function a(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function l(A,v,w,D){return v===null||v.tag!==6?(v=kh(w,A.mode,D),v.return=A,v):(v=r(v,w),v.return=A,v)}function u(A,v,w,D){var L=w.type;return L===as?d(A,v,w.props.children,D,w.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===vi&&gy(L)===v.type)?(v=r(v,w.props),Oa(v,w),v.return=A,v):(v=eu(w.type,w.key,w.props,null,A.mode,D),Oa(v,w),v.return=A,v)}function h(A,v,w,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Ph(w,A.mode,D),v.return=A,v):(v=r(v,w.children||[]),v.return=A,v)}function d(A,v,w,D,L){return v===null||v.tag!==7?(v=Er(w,A.mode,D,L),v.return=A,v):(v=r(v,w),v.return=A,v)}function g(A,v,w){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=kh(""+v,A.mode,w),v.return=A,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ol:return w=eu(v.type,v.key,v.props,null,A.mode,w),Oa(w,v),w.return=A,w;case ka:return v=Ph(v,A.mode,w),v.return=A,v;case vi:var D=v._init;return v=D(v._payload),g(A,v,w)}if(Pa(v)||Ia(v))return v=Er(v,A.mode,w,null),v.return=A,v;if(typeof v.then=="function")return g(A,Ll(v),w);if(v.$$typeof===Gn)return g(A,Pl(A,v),w);zl(A,v)}return null}function m(A,v,w,D){var L=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return L!==null?null:l(A,v,""+w,D);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ol:return w.key===L?u(A,v,w,D):null;case ka:return w.key===L?h(A,v,w,D):null;case vi:return L=w._init,w=L(w._payload),m(A,v,w,D)}if(Pa(w)||Ia(w))return L!==null?null:d(A,v,w,D,null);if(typeof w.then=="function")return m(A,v,Ll(w),D);if(w.$$typeof===Gn)return m(A,v,Pl(A,w),D);zl(A,w)}return null}function _(A,v,w,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return A=A.get(w)||null,l(v,A,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ol:return A=A.get(D.key===null?w:D.key)||null,u(v,A,D,L);case ka:return A=A.get(D.key===null?w:D.key)||null,h(v,A,D,L);case vi:var q=D._init;return D=q(D._payload),_(A,v,w,D,L)}if(Pa(D)||Ia(D))return A=A.get(w)||null,d(v,A,D,L,null);if(typeof D.then=="function")return _(A,v,w,Ll(D),L);if(D.$$typeof===Gn)return _(A,v,w,Pl(v,D),L);zl(v,D)}return null}function N(A,v,w,D){for(var L=null,q=null,E=v,y=v=0,T=null;E!==null&&y<w.length;y++){E.index>y?(T=E,E=null):T=E.sibling;var S=m(A,E,w[y],D);if(S===null){E===null&&(E=T);break}e&&E&&S.alternate===null&&t(A,E),v=s(S,v,y),q===null?L=S:q.sibling=S,q=S,E=T}if(y===w.length)return n(A,E),gt&&gr(A,y),L;if(E===null){for(;y<w.length;y++)E=g(A,w[y],D),E!==null&&(v=s(E,v,y),q===null?L=E:q.sibling=E,q=E);return gt&&gr(A,y),L}for(E=i(E);y<w.length;y++)T=_(E,A,y,w[y],D),T!==null&&(e&&T.alternate!==null&&E.delete(T.key===null?y:T.key),v=s(T,v,y),q===null?L=T:q.sibling=T,q=T);return e&&E.forEach(function(R){return t(A,R)}),gt&&gr(A,y),L}function M(A,v,w,D){if(w==null)throw Error(U(151));for(var L=null,q=null,E=v,y=v=0,T=null,S=w.next();E!==null&&!S.done;y++,S=w.next()){E.index>y?(T=E,E=null):T=E.sibling;var R=m(A,E,S.value,D);if(R===null){E===null&&(E=T);break}e&&E&&R.alternate===null&&t(A,E),v=s(R,v,y),q===null?L=R:q.sibling=R,q=R,E=T}if(S.done)return n(A,E),gt&&gr(A,y),L;if(E===null){for(;!S.done;y++,S=w.next())S=g(A,S.value,D),S!==null&&(v=s(S,v,y),q===null?L=S:q.sibling=S,q=S);return gt&&gr(A,y),L}for(E=i(E);!S.done;y++,S=w.next())S=_(E,A,y,S.value,D),S!==null&&(e&&S.alternate!==null&&E.delete(S.key===null?y:S.key),v=s(S,v,y),q===null?L=S:q.sibling=S,q=S);return e&&E.forEach(function(I){return t(A,I)}),gt&&gr(A,y),L}function k(A,v,w,D){if(typeof w=="object"&&w!==null&&w.type===as&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ol:t:{for(var L=w.key;v!==null;){if(v.key===L){if(L=w.type,L===as){if(v.tag===7){n(A,v.sibling),D=r(v,w.props.children),D.return=A,A=D;break t}}else if(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===vi&&gy(L)===v.type){n(A,v.sibling),D=r(v,w.props),Oa(D,w),D.return=A,A=D;break t}n(A,v);break}else t(A,v);v=v.sibling}w.type===as?(D=Er(w.props.children,A.mode,D,w.key),D.return=A,A=D):(D=eu(w.type,w.key,w.props,null,A.mode,D),Oa(D,w),D.return=A,A=D)}return a(A);case ka:t:{for(L=w.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(A,v.sibling),D=r(v,w.children||[]),D.return=A,A=D;break t}else{n(A,v);break}else t(A,v);v=v.sibling}D=Ph(w,A.mode,D),D.return=A,A=D}return a(A);case vi:return L=w._init,w=L(w._payload),k(A,v,w,D)}if(Pa(w))return N(A,v,w,D);if(Ia(w)){if(L=Ia(w),typeof L!="function")throw Error(U(150));return w=L.call(w),M(A,v,w,D)}if(typeof w.then=="function")return k(A,v,Ll(w),D);if(w.$$typeof===Gn)return k(A,v,Pl(A,w),D);zl(A,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,v!==null&&v.tag===6?(n(A,v.sibling),D=r(v,w),D.return=A,A=D):(n(A,v),D=kh(w,A.mode,D),D.return=A,A=D),a(A)):n(A,v)}return function(A,v,w,D){try{_o=0;var L=k(A,v,w,D);return Rs=null,L}catch(E){if(E===Fo||E===Rc)throw E;var q=He(29,E,null,A.mode);return q.lanes=D,q.return=A,q}finally{}}}var zs=mT(!0),gT=mT(!1),un=xn(null),Rn=null;function Ai(e){var t=e.alternate;xt(Zt,Zt.current&1),xt(un,e),Rn===null&&(t===null||Us.current!==null||t.memoizedState!==null)&&(Rn=e)}function pT(e){if(e.tag===22){if(xt(Zt,Zt.current),xt(un,e),Rn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Rn=e)}}else Si()}function Si(){xt(Zt,Zt.current),xt(un,un.current)}function Kn(e){ae(un),Rn===e&&(Rn=null),ae(Zt)}var Zt=xn(0);function xu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||sd(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function zh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Nt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Hf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ke(),r=ki(i);r.payload=t,n!=null&&(r.callback=n),t=Pi(e,r,i),t!==null&&($e(t,e,i),$a(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ke(),r=ki(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Pi(e,r,i),t!==null&&($e(t,e,i),$a(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ke(),i=ki(n);i.tag=2,t!=null&&(i.callback=t),t=Pi(e,i,n),t!==null&&($e(t,e,n),$a(t,e,n))}};function py(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!go(n,i)||!go(r,s):!0}function yy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Hf.enqueueReplaceState(t,t.state,null)}function Dr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Nt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var ku=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function yT(e){ku(e)}function _T(e){console.error(e)}function vT(e){ku(e)}function Pu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function _y(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Gf(e,t,n){return n=ki(n),n.tag=3,n.payload={element:null},n.callback=function(){Pu(e,t)},n}function ET(e){return e=ki(e),e.tag=3,e}function TT(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){_y(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){_y(t,n,i),typeof r!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function ww(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Ho(t,n,r,!0),n=un.current,n!==null){switch(n.tag){case 13:return Rn===null?Jf():n.alternate===null&&Bt===0&&(Bt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Pf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Xh(e,i,r)),!1;case 22:return n.flags|=65536,i===Pf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Xh(e,i,r)),!1}throw Error(U(435,n.tag))}return Xh(e,i,r),Jf(),!1}if(gt)return t=un.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==Of&&(e=Error(U(422),{cause:i}),po(on(e,n)))):(i!==Of&&(t=Error(U(423),{cause:i}),po(on(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=on(i,n),r=Gf(e.stateNode,i,r),Uh(e,r),Bt!==4&&(Bt=2)),!1;var s=Error(U(520),{cause:i});if(s=on(s,n),eo===null?eo=[s]:eo.push(s),Bt!==4&&(Bt=2),t===null)return!0;i=on(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Gf(n.stateNode,i,e),Uh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Ui===null||!Ui.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=ET(r),TT(r,e,n,i),Uh(n,r),!1}n=n.return}while(n!==null);return!1}var AT=Error(U(461)),se=!1;function ue(e,t,n,i){t.child=e===null?gT(t,null,n,i):zs(t,e.child,n,i)}function vy(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Ir(t),i=um(e,t,n,a,s,r),l=cm(),e!==null&&!se?(hm(e,t,r),ni(e,t,r)):(gt&&l&&nm(t),t.flags|=1,ue(e,t,i,r),t.child)}function Ey(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!em(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,ST(e,t,s,i,r)):(e=eu(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Em(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:go,n(a,i)&&e.ref===t.ref)return ni(e,t,r)}return t.flags|=1,e=Zn(s,i),e.ref=t.ref,e.return=t,t.child=e}function ST(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(go(s,i)&&e.ref===t.ref)if(se=!1,t.pendingProps=i=s,Em(e,r))e.flags&131072&&(se=!0);else return t.lanes=e.lanes,ni(e,t,r)}return Ff(e,t,n,i,r)}function bT(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return Ty(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&nu(t,s!==null?s.cachePool:null),s!==null?ly(t,s):zf(),pT(t);else return t.lanes=t.childLanes=536870912,Ty(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(nu(t,s.cachePool),ly(t,s),Si(),t.memoizedState=null):(e!==null&&nu(t,null),zf(),Si());return ue(e,t,r,n),t.child}function Ty(e,t,n,i){var r=sm();return r=r===null?null:{parent:Xt._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&nu(t,null),zf(),pT(t),e!==null&&Ho(e,t,i,!0),null}function su(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Ff(e,t,n,i,r){return Ir(t),n=um(e,t,n,i,void 0,r),i=cm(),e!==null&&!se?(hm(e,t,r),ni(e,t,r)):(gt&&i&&nm(t),t.flags|=1,ue(e,t,n,r),t.child)}function Ay(e,t,n,i,r,s){return Ir(t),t.updateQueue=null,n=UE(t,i,n,r),PE(e),i=cm(),e!==null&&!se?(hm(e,t,s),ni(e,t,s)):(gt&&i&&nm(t),t.flags|=1,ue(e,t,n,s),t.child)}function Sy(e,t,n,i,r){if(Ir(t),t.stateNode===null){var s=ms,a=n.contextType;typeof a=="object"&&a!==null&&(s=Ae(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Hf,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},am(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?Ae(a):ms,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(zh(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Hf.enqueueReplaceState(s,s.state,null),Za(t,i,s,r),Xa(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=Dr(n,l);s.props=u;var h=s.context,d=n.contextType;a=ms,typeof d=="object"&&d!==null&&(a=Ae(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&yy(t,s,i,a),Ei=!1;var m=t.memoizedState;s.state=m,Za(t,i,s,r),Xa(),h=t.memoizedState,l||m!==h||Ei?(typeof g=="function"&&(zh(t,n,g,i),h=t.memoizedState),(u=Ei||py(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Uf(e,t),a=t.memoizedProps,d=Dr(n,a),s.props=d,g=t.pendingProps,m=s.context,h=n.contextType,u=ms,typeof h=="object"&&h!==null&&(u=Ae(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==g||m!==u)&&yy(t,s,i,u),Ei=!1,m=t.memoizedState,s.state=m,Za(t,i,s,r),Xa();var _=t.memoizedState;a!==g||m!==_||Ei||e!==null&&e.dependencies!==null&&Du(e.dependencies)?(typeof l=="function"&&(zh(t,n,l,i),_=t.memoizedState),(d=Ei||py(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&Du(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),s.props=i,s.state=_,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,su(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=zs(t,e.child,null,r),t.child=zs(t,null,n,r)):ue(e,t,n,r),t.memoizedState=s.state,e=t.child):e=ni(e,t,r),e}function by(e,t,n,i){return qo(),t.flags|=256,ue(e,t,n,i),t.child}var Bh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jh(e){return{baseLanes:e,cachePool:OE()}}function qh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=ln),e}function wT(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(Zt.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(gt){if(r?Ai(t):Si(),gt){var l=zt,u;if(u=l){t:{for(u=l,l=An;u.nodeType!==8;){if(!l){l=null;break t}if(u=gn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Tr!==null?{id:Fn,overflow:Qn}:null,retryLane:536870912,hydrationErrors:null},u=He(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Ce=t,zt=null,u=!0):u=!1}u||Rr(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return sd(l)?t.lanes=32:t.lanes=536870912,null;Kn(t)}return l=i.children,i=i.fallback,r?(Si(),r=t.mode,l=Uu({mode:"hidden",children:l},r),i=Er(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=jh(n),r.childLanes=qh(e,a,n),t.memoizedState=Bh,i):(Ai(t),Qf(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(Ai(t),t.flags&=-257,t=Hh(e,t,n)):t.memoizedState!==null?(Si(),t.child=e.child,t.flags|=128,t=null):(Si(),r=i.fallback,l=t.mode,i=Uu({mode:"visible",children:i.children},l),r=Er(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,zs(t,e.child,null,n),i=t.child,i.memoizedState=jh(n),i.childLanes=qh(e,a,n),t.memoizedState=Bh,t=r);else if(Ai(t),sd(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(U(419)),i.stack="",i.digest=a,po({value:i,source:null,stack:null}),t=Hh(e,t,n)}else if(se||Ho(e,t,n,!1),a=(n&e.childLanes)!==0,se||a){if(a=wt,a!==null&&(i=n&-n,i=i&42?1:Gd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,ta(e,i),$e(a,e,i),AT;l.data==="$?"||Jf(),t=Hh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,zt=gn(l.nextSibling),Ce=t,gt=!0,Ar=null,An=!1,e!==null&&(rn[sn++]=Fn,rn[sn++]=Qn,rn[sn++]=Tr,Fn=e.id,Qn=e.overflow,Tr=t),t=Qf(t,i.children),t.flags|=4096);return t}return r?(Si(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=Zn(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=Zn(h,r):(r=Er(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=jh(n):(u=l.cachePool,u!==null?(h=Xt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=OE(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=qh(e,a,n),t.memoizedState=Bh,i):(Ai(t),n=e.child,e=n.sibling,n=Zn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Qf(e,t){return t=Uu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Uu(e,t){return e=He(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Hh(e,t,n){return zs(t,e.child,null,n),e=Qf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Mf(e.return,t,n)}function Gh(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function RT(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(ue(e,t,i.children,n),i=Zt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wy(e,n,t);else if(e.tag===19)wy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(xt(Zt,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&xu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Gh(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&xu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Gh(t,!0,n,null,s);break;case"together":Gh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ni(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Zi|=t.lanes,!(n&t.childLanes))if(e!==null){if(Ho(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=Zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Em(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Du(e)))}function Rw(e,t,n){switch(t.tag){case 3:Tu(t,t.stateNode.containerInfo),Ti(t,Xt,e.memoizedState.cache),qo();break;case 27:case 5:Tf(t);break;case 4:Tu(t,t.stateNode.containerInfo);break;case 10:Ti(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ai(t),t.flags|=128,null):n&t.child.childLanes?wT(e,t,n):(Ai(t),e=ni(e,t,n),e!==null?e.sibling:null);Ai(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Ho(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return RT(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),xt(Zt,Zt.current),i)break;return null;case 22:case 23:return t.lanes=0,bT(e,t,n);case 24:Ti(t,Xt,e.memoizedState.cache)}return ni(e,t,n)}function IT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)se=!0;else{if(!Em(e,n)&&!(t.flags&128))return se=!1,Rw(e,t,n);se=!!(e.flags&131072)}else se=!1,gt&&t.flags&1048576&&DE(t,Cu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")em(i)?(e=Dr(i,e),t.tag=1,t=Sy(null,t,i,e,n)):(t.tag=0,t=Ff(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===jd){t.tag=11,t=vy(null,t,i,e,n);break t}else if(r===qd){t.tag=14,t=Ey(null,t,i,e,n);break t}}throw t=vf(i)||i,Error(U(306,t,""))}}return t;case 0:return Ff(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Dr(i,t.pendingProps),Sy(e,t,i,r,n);case 3:t:{if(Tu(t,t.stateNode.containerInfo),e===null)throw Error(U(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,Uf(e,t),Za(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Ti(t,Xt,i),i!==s.cache&&xf(t,[Xt],n,!0),Xa(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=by(e,t,i,n);break t}else if(i!==r){r=on(Error(U(424)),t),po(r),t=by(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(zt=gn(e.firstChild),Ce=t,gt=!0,Ar=null,An=!0,n=gT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(qo(),i===r){t=ni(e,t,n);break t}ue(e,t,i,n)}t=t.child}return t;case 26:return su(e,t),e===null?(n=qy(t.type,null,t.pendingProps,null))?t.memoizedState=n:gt||(n=t.type,e=t.pendingProps,i=Gu(xi.current).createElement(n),i[Te]=t,i[Ue]=e,me(i,n,e),ie(i),t.stateNode=i):t.memoizedState=qy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Tf(t),e===null&&gt&&(i=t.stateNode=d0(t.type,t.pendingProps,xi.current),Ce=t,An=!0,r=zt,ar(t.type)?(ad=r,zt=gn(i.firstChild)):zt=r),ue(e,t,t.pendingProps.children,n),su(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&gt&&((r=i=zt)&&(i=tR(i,t.type,t.pendingProps,An),i!==null?(t.stateNode=i,Ce=t,zt=gn(i.firstChild),An=!1,r=!0):r=!1),r||Rr(t)),Tf(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,id(r,s)?i=null:a!==null&&id(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=um(e,t,_w,null,null,n),Ao._currentValue=r),su(e,t),ue(e,t,i,n),t.child;case 6:return e===null&&gt&&((e=n=zt)&&(n=eR(n,t.pendingProps,An),n!==null?(t.stateNode=n,Ce=t,zt=null,e=!0):e=!1),e||Rr(t)),null;case 13:return wT(e,t,n);case 4:return Tu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=zs(t,null,i,n):ue(e,t,i,n),t.child;case 11:return vy(e,t,t.type,t.pendingProps,n);case 7:return ue(e,t,t.pendingProps,n),t.child;case 8:return ue(e,t,t.pendingProps.children,n),t.child;case 12:return ue(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Ti(t,t.type,i.value),ue(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Ir(t),r=Ae(r),i=i(r),t.flags|=1,ue(e,t,i,n),t.child;case 14:return Ey(e,t,t.type,t.pendingProps,n);case 15:return ST(e,t,t.type,t.pendingProps,n);case 19:return RT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Uu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Zn(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return bT(e,t,n);case 24:return Ir(t),i=Ae(Xt),e===null?(r=sm(),r===null&&(r=wt,s=rm(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},am(t),Ti(t,Xt,r)):(e.lanes&n&&(Uf(e,t),Za(t,null,null,n),Xa()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Ti(t,Xt,i)):(i=s.cache,Ti(t,Xt,i),i!==r.cache&&xf(t,[Xt],n,!0))),ue(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(U(156,t.tag))}function jn(e){e.flags|=4}function Ry(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!p0(t)){if(t=un.current,t!==null&&((ft&4194048)===ft?Rn!==null:(ft&62914560)!==ft&&!(ft&536870912)||t!==Rn))throw Ka=Pf,VE;e.flags|=8192}}function Bl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Wv():536870912,e.lanes|=t,Bs|=t)}function Va(e,t){if(!gt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Iw(e,t,n){var i=t.pendingProps;switch(im(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return kt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Jn(Xt),Ms(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Na(t)?jn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ny())),kt(t),null;case 26:return n=t.memoizedState,e===null?(jn(t),n!==null?(kt(t),Ry(t,n)):(kt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(jn(t),kt(t),Ry(t,n)):(kt(t),t.flags&=-16777217):(e.memoizedProps!==i&&jn(t),kt(t),t.flags&=-16777217),null;case 27:Au(t),n=xi.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&jn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return kt(t),null}e=bn.current,Na(t)?ty(t):(e=d0(r,i,n),t.stateNode=e,jn(t))}return kt(t),null;case 5:if(Au(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&jn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return kt(t),null}if(e=bn.current,Na(t))ty(t);else{switch(r=Gu(xi.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Te]=t,e[Ue]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(me(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&jn(t)}}return kt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&jn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(e=xi.current,Na(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Ce,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Te]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||c0(e.nodeValue,n)),e||Rr(t)}else e=Gu(e).createTextNode(i),e[Te]=t,t.stateNode=e}return kt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Na(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(U(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(U(317));r[Te]=t}else qo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),r=!1}else r=ny(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Kn(t),t):(Kn(t),null)}if(Kn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Bl(t,t.updateQueue),kt(t),null;case 4:return Ms(),e===null&&Cm(t.stateNode.containerInfo),kt(t),null;case 10:return Jn(t.type),kt(t),null;case 19:if(ae(Zt),r=t.memoizedState,r===null)return kt(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)Va(r,!1);else{if(Bt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=xu(e),s!==null){for(t.flags|=128,Va(r,!1),e=s.updateQueue,t.updateQueue=e,Bl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)CE(n,e),n=n.sibling;return xt(Zt,Zt.current&1|2),t.child}e=e.sibling}r.tail!==null&&wn()>zu&&(t.flags|=128,i=!0,Va(r,!1),t.lanes=4194304)}else{if(!i)if(e=xu(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Bl(t,e),Va(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!gt)return kt(t),null}else 2*wn()-r.renderingStartTime>zu&&n!==536870912&&(t.flags|=128,i=!0,Va(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=wn(),t.sibling=null,e=Zt.current,xt(Zt,i?e&1|2:e&1),t):(kt(t),null);case 22:case 23:return Kn(t),om(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),n=t.updateQueue,n!==null&&Bl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&ae(Sr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Jn(Xt),kt(t),null;case 25:return null;case 30:return null}throw Error(U(156,t.tag))}function Cw(e,t){switch(im(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jn(Xt),Ms(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Au(t),null;case 13:if(Kn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));qo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ae(Zt),null;case 4:return Ms(),null;case 10:return Jn(t.type),null;case 22:case 23:return Kn(t),om(),e!==null&&ae(Sr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Jn(Xt),null;case 25:return null;default:return null}}function CT(e,t){switch(im(t),t.tag){case 3:Jn(Xt),Ms();break;case 26:case 27:case 5:Au(t);break;case 4:Ms();break;case 13:Kn(t);break;case 19:ae(Zt);break;case 10:Jn(t.type);break;case 22:case 23:Kn(t),om(),e!==null&&ae(Sr);break;case 24:Jn(Xt)}}function Ko(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){St(t,t.return,l)}}function Xi(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){St(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){St(t,t.return,d)}}function DT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{kE(t,n)}catch(i){St(e,e.return,i)}}}function NT(e,t,n){n.props=Dr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){St(e,t,i)}}function Wa(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){St(e,t,r)}}function Sn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){St(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){St(e,t,r)}else n.current=null}function OT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){St(e,e.return,r)}}function Fh(e,t,n){try{var i=e.stateNode;$w(i,e.type,n,t),i[Ue]=t}catch(r){St(e,e.return,r)}}function VT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ar(e.type)||e.tag===4}function Qh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||VT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ar(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Mc));else if(i!==4&&(i===27&&ar(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Yf(e,t,n),e=e.sibling;e!==null;)Yf(e,t,n),e=e.sibling}function Lu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&ar(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Lu(e,t,n),e=e.sibling;e!==null;)Lu(e,t,n),e=e.sibling}function MT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);me(t,i,n),t[Te]=e,t[Ue]=n}catch(s){St(e,e.return,s)}}var Hn=!1,qt=!1,Yh=!1,Iy=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Dw(e,t){if(e=e.containerInfo,ed=Ku,e=EE(e),Jd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var _;g!==n||r!==0&&g.nodeType!==3||(l=a+r),g!==s||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},Ku=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){switch(t=ne,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var N=Dr(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(N,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(M){St(n,n.return,M)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)rd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":rd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(U(163))}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}}function xT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:pi(e,n),i&4&&Ko(5,n);break;case 1:if(pi(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){St(n,n.return,a)}else{var r=Dr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){St(n,n.return,a)}}i&64&&DT(n),i&512&&Wa(n,n.return);break;case 3:if(pi(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{kE(e,t)}catch(a){St(n,n.return,a)}}break;case 27:t===null&&i&4&&MT(n);case 26:case 5:pi(e,n),t===null&&i&4&&OT(n),i&512&&Wa(n,n.return);break;case 12:pi(e,n);break;case 13:pi(e,n),i&4&&UT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Lw.bind(null,n),nR(e,n))));break;case 22:if(i=n.memoizedState!==null||Hn,!i){t=t!==null&&t.memoizedState!==null||qt,r=Hn;var s=qt;Hn=i,(qt=t)&&!s?_i(e,n,(n.subtreeFlags&8772)!==0):pi(e,n),Hn=r,qt=s}break;case 30:break;default:pi(e,n)}}function kT(e){var t=e.alternate;t!==null&&(e.alternate=null,kT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Qd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Vt=null,xe=!1;function qn(e,t,n){for(n=n.child;n!==null;)PT(e,t,n),n=n.sibling}function PT(e,t,n){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(Uo,n)}catch{}switch(n.tag){case 26:qt||Sn(n,t),qn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:qt||Sn(n,t);var i=Vt,r=xe;ar(n.type)&&(Vt=n.stateNode,xe=!1),qn(e,t,n),io(n.stateNode),Vt=i,xe=r;break;case 5:qt||Sn(n,t);case 6:if(i=Vt,r=xe,Vt=null,qn(e,t,n),Vt=i,xe=r,Vt!==null)if(xe)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(n.stateNode)}catch(s){St(n,t,s)}else try{Vt.removeChild(n.stateNode)}catch(s){St(n,t,s)}break;case 18:Vt!==null&&(xe?(e=Vt,zy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),wo(e)):zy(Vt,n.stateNode));break;case 4:i=Vt,r=xe,Vt=n.stateNode.containerInfo,xe=!0,qn(e,t,n),Vt=i,xe=r;break;case 0:case 11:case 14:case 15:qt||Xi(2,n,t),qt||Xi(4,n,t),qn(e,t,n);break;case 1:qt||(Sn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&NT(n,t,i)),qn(e,t,n);break;case 21:qn(e,t,n);break;case 22:qt=(i=qt)||n.memoizedState!==null,qn(e,t,n),qt=i;break;default:qn(e,t,n)}}function UT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{wo(e)}catch(n){St(t,t.return,n)}}function Nw(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Iy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Iy),t;default:throw Error(U(435,e.tag))}}function Kh(e,t){var n=Nw(e);t.forEach(function(i){var r=zw.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Be(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(ar(l.type)){Vt=l.stateNode,xe=!1;break t}break;case 5:Vt=l.stateNode,xe=!1;break t;case 3:case 4:Vt=l.stateNode.containerInfo,xe=!0;break t}l=l.return}if(Vt===null)throw Error(U(160));PT(s,a,r),Vt=null,xe=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)LT(t,e),t=t.sibling}var fn=null;function LT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Be(t,e),je(e),i&4&&(Xi(3,e,e.return),Ko(3,e),Xi(5,e,e.return));break;case 1:Be(t,e),je(e),i&512&&(qt||n===null||Sn(n,n.return)),i&64&&Hn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=fn;if(Be(t,e),je(e),i&512&&(qt||n===null||Sn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Bo]||s[Te]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),me(s,i,n),s[Te]=e,ie(s),i=s;break t;case"link":var a=Gy("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),me(s,i,n),r.head.appendChild(s);break;case"meta":if(a=Gy("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),me(s,i,n),r.head.appendChild(s);break;default:throw Error(U(468,i))}s[Te]=e,ie(s),i=s}e.stateNode=i}else Fy(r,e.type,e.stateNode);else e.stateNode=Hy(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?Fy(r,e.type,e.stateNode):Hy(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Fh(e,e.memoizedProps,n.memoizedProps)}break;case 27:Be(t,e),je(e),i&512&&(qt||n===null||Sn(n,n.return)),n!==null&&i&4&&Fh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Be(t,e),je(e),i&512&&(qt||n===null||Sn(n,n.return)),e.flags&32){r=e.stateNode;try{ks(r,"")}catch(_){St(e,e.return,_)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,Fh(e,r,n!==null?n.memoizedProps:r)),i&1024&&(Yh=!0);break;case 6:if(Be(t,e),je(e),i&4){if(e.stateNode===null)throw Error(U(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){St(e,e.return,_)}}break;case 3:if(lu=null,r=fn,fn=Fu(t.containerInfo),Be(t,e),fn=r,je(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{wo(t.containerInfo)}catch(_){St(e,e.return,_)}Yh&&(Yh=!1,zT(e));break;case 4:i=fn,fn=Fu(e.stateNode.containerInfo),Be(t,e),je(e),fn=i;break;case 12:Be(t,e),je(e);break;case 13:Be(t,e),je(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(wm=wn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Kh(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Hn,d=qt;if(Hn=h||r,qt=d||u,Be(t,e),qt=d,Hn=h,je(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||Hn||qt||pr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){St(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(_){St(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Kh(e,n))));break;case 19:Be(t,e),je(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Kh(e,i)));break;case 30:break;case 21:break;default:Be(t,e),je(e)}}function je(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(VT(i)){n=i;break}i=i.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var r=n.stateNode,s=Qh(e);Lu(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(ks(a,""),n.flags&=-33);var l=Qh(e);Lu(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Qh(e);Yf(e,h,u);break;default:throw Error(U(161))}}catch(d){St(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;zT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function pi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)xT(e,t.alternate,t),t=t.sibling}function pr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Xi(4,t,t.return),pr(t);break;case 1:Sn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&NT(t,t.return,n),pr(t);break;case 27:io(t.stateNode);case 26:case 5:Sn(t,t.return),pr(t);break;case 22:t.memoizedState===null&&pr(t);break;case 30:pr(t);break;default:pr(t)}e=e.sibling}}function _i(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:_i(r,s,n),Ko(4,s);break;case 1:if(_i(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){St(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)xE(u[r],l)}catch(h){St(i,i.return,h)}}n&&a&64&&DT(s),Wa(s,s.return);break;case 27:MT(s);case 26:case 5:_i(r,s,n),n&&i===null&&a&4&&OT(s),Wa(s,s.return);break;case 12:_i(r,s,n);break;case 13:_i(r,s,n),n&&a&4&&UT(r,s);break;case 22:s.memoizedState===null&&_i(r,s,n),Wa(s,s.return);break;case 30:break;default:_i(r,s,n)}t=t.sibling}}function Tm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Go(n))}function Am(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Go(e))}function vn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)BT(e,t,n,i),t=t.sibling}function BT(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:vn(e,t,n,i),r&2048&&Ko(9,t);break;case 1:vn(e,t,n,i);break;case 3:vn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Go(e)));break;case 12:if(r&2048){vn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){St(t,t.return,u)}}else vn(e,t,n,i);break;case 13:vn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?vn(e,t,n,i):to(e,t):s._visibility&2?vn(e,t,n,i):(s._visibility|=2,ts(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&Tm(a,t);break;case 24:vn(e,t,n,i),r&2048&&Am(t.alternate,t);break;default:vn(e,t,n,i)}}function ts(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:ts(s,a,l,u,r),Ko(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?ts(s,a,l,u,r):to(s,a):(d._visibility|=2,ts(s,a,l,u,r)),r&&h&2048&&Tm(a.alternate,a);break;case 24:ts(s,a,l,u,r),r&&h&2048&&Am(a.alternate,a);break;default:ts(s,a,l,u,r)}t=t.sibling}}function to(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:to(n,i),r&2048&&Tm(i.alternate,i);break;case 24:to(n,i),r&2048&&Am(i.alternate,i);break;default:to(n,i)}t=t.sibling}}var La=8192;function Xr(e){if(e.subtreeFlags&La)for(e=e.child;e!==null;)jT(e),e=e.sibling}function jT(e){switch(e.tag){case 26:Xr(e),e.flags&La&&e.memoizedState!==null&&gR(fn,e.memoizedState,e.memoizedProps);break;case 5:Xr(e);break;case 3:case 4:var t=fn;fn=Fu(e.stateNode.containerInfo),Xr(e),fn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=La,La=16777216,Xr(e),La=t):Xr(e));break;default:Xr(e)}}function qT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ma(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ne=i,GT(i,e)}qT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)HT(e),e=e.sibling}function HT(e){switch(e.tag){case 0:case 11:case 15:Ma(e),e.flags&2048&&Xi(9,e,e.return);break;case 3:Ma(e);break;case 12:Ma(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,au(e)):Ma(e);break;default:Ma(e)}}function au(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ne=i,GT(i,e)}qT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Xi(8,t,t.return),au(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,au(t));break;default:au(t)}e=e.sibling}}function GT(e,t){for(;ne!==null;){var n=ne;switch(n.tag){case 0:case 11:case 15:Xi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Go(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ne=i;else t:for(n=e;ne!==null;){i=ne;var r=i.sibling,s=i.return;if(kT(i),i===n){ne=null;break t}if(r!==null){r.return=s,ne=r;break t}ne=s}}}var Ow={getCacheForType:function(e){var t=Ae(Xt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Vw=typeof WeakMap=="function"?WeakMap:Map,_t=0,wt=null,st=null,ft=0,yt=0,qe=null,Oi=!1,ea=!1,Sm=!1,ii=0,Bt=0,Zi=0,br=0,bm=0,ln=0,Bs=0,eo=null,ke=null,Kf=!1,wm=0,zu=1/0,Bu=null,Ui=null,he=0,Li=null,js=null,Is=0,$f=0,Xf=null,FT=null,no=0,Zf=null;function Ke(){if(_t&2&&ft!==0)return ft&-ft;if(J.T!==null){var e=Ps;return e!==0?e:Im()}return nE()}function QT(){ln===0&&(ln=!(ft&536870912)||gt?Jv():536870912);var e=un.current;return e!==null&&(e.flags|=32),ln}function $e(e,t,n){(e===wt&&(yt===2||yt===9)||e.cancelPendingCommit!==null)&&(qs(e,0),Vi(e,ft,ln,!1)),zo(e,n),(!(_t&2)||e!==wt)&&(e===wt&&(!(_t&2)&&(br|=n),Bt===4&&Vi(e,ft,ln,!1)),kn(e))}function YT(e,t,n){if(_t&6)throw Error(U(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Lo(e,t),r=i?kw(e,t):$h(e,t,!0),s=i;do{if(r===0){ea&&!i&&Vi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Mw(n)){r=$h(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=eo;var u=l.current.memoizedState.isDehydrated;if(u&&(qs(l,a).flags|=256),a=$h(l,a,!1),a!==2){if(Sm&&!u){l.errorRecoveryDisabledLanes|=s,br|=s,r=4;break t}s=ke,ke=r,s!==null&&(ke===null?ke=s:ke.push.apply(ke,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){qs(e,0),Vi(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(U(345));case 4:if((t&4194048)!==t)break;case 6:Vi(i,t,ln,!Oi);break t;case 2:ke=null;break;case 3:case 5:break;default:throw Error(U(329))}if((t&62914560)===t&&(r=wm+300-wn(),10<r)){if(Vi(i,t,ln,!Oi),Ec(i,0,!0)!==0)break t;i.timeoutHandle=f0(Cy.bind(null,i,n,ke,Bu,Kf,t,ln,br,Bs,Oi,s,2,-0,0),r);break t}Cy(i,n,ke,Bu,Kf,t,ln,br,Bs,Oi,s,0,-0,0)}}break}while(!0);kn(e)}function Cy(e,t,n,i,r,s,a,l,u,h,d,g,m,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(To={stylesheets:null,count:0,unsuspend:mR},jT(t),g=pR(),g!==null)){e.cancelPendingCommit=g(Ny.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,_)),Vi(e,s,a,!h);return}Ny(e,t,s,n,i,r,a,l,u)}function Mw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Je(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vi(e,t,n,i){t&=~bm,t&=~br,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-Ye(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&tE(e,n,t)}function Nc(){return _t&6?!0:($o(0),!1)}function Rm(){if(st!==null){if(yt===0)var e=st.return;else e=st,Yn=Lr=null,fm(e),Rs=null,_o=0,e=st;for(;e!==null;)CT(e.alternate,e),e=e.return;st=null}}function qs(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Zw(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Rm(),wt=e,st=n=Zn(e.current,null),ft=t,yt=0,qe=null,Oi=!1,ea=Lo(e,t),Sm=!1,Bs=ln=bm=br=Zi=Bt=0,ke=eo=null,Kf=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-Ye(i),s=1<<r;t|=e[r],i&=~s}return ii=t,bc(),n}function KT(e,t){it=null,J.H=Mu,t===Fo||t===Rc?(t=ay(),yt=3):t===VE?(t=ay(),yt=4):yt=t===AT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,qe=t,st===null&&(Bt=1,Pu(e,on(t,e.current)))}function $T(){var e=J.H;return J.H=Mu,e===null?Mu:e}function XT(){var e=J.A;return J.A=Ow,e}function Jf(){Bt=4,Oi||(ft&4194048)!==ft&&un.current!==null||(ea=!0),!(Zi&134217727)&&!(br&134217727)||wt===null||Vi(wt,ft,ln,!1)}function $h(e,t,n){var i=_t;_t|=2;var r=$T(),s=XT();(wt!==e||ft!==t)&&(Bu=null,qs(e,t)),t=!1;var a=Bt;t:do try{if(yt!==0&&st!==null){var l=st,u=qe;switch(yt){case 8:Rm(),a=6;break t;case 3:case 2:case 9:case 6:un.current===null&&(t=!0);var h=yt;if(yt=0,qe=null,ys(e,l,u,h),n&&ea){a=0;break t}break;default:h=yt,yt=0,qe=null,ys(e,l,u,h)}}xw(),a=Bt;break}catch(d){KT(e,d)}while(!0);return t&&e.shellSuspendCounter++,Yn=Lr=null,_t=i,J.H=r,J.A=s,st===null&&(wt=null,ft=0,bc()),a}function xw(){for(;st!==null;)ZT(st)}function kw(e,t){var n=_t;_t|=2;var i=$T(),r=XT();wt!==e||ft!==t?(Bu=null,zu=wn()+500,qs(e,t)):ea=Lo(e,t);t:do try{if(yt!==0&&st!==null){t=st;var s=qe;e:switch(yt){case 1:yt=0,qe=null,ys(e,t,s,1);break;case 2:case 9:if(sy(s)){yt=0,qe=null,Dy(t);break}t=function(){yt!==2&&yt!==9||wt!==e||(yt=7),kn(e)},s.then(t,t);break t;case 3:yt=7;break t;case 4:yt=5;break t;case 7:sy(s)?(yt=0,qe=null,Dy(t)):(yt=0,qe=null,ys(e,t,s,7));break;case 5:var a=null;switch(st.tag){case 26:a=st.memoizedState;case 5:case 27:var l=st;if(!a||p0(a)){yt=0,qe=null;var u=l.sibling;if(u!==null)st=u;else{var h=l.return;h!==null?(st=h,Oc(h)):st=null}break e}}yt=0,qe=null,ys(e,t,s,5);break;case 6:yt=0,qe=null,ys(e,t,s,6);break;case 8:Rm(),Bt=6;break t;default:throw Error(U(462))}}Pw();break}catch(d){KT(e,d)}while(!0);return Yn=Lr=null,J.H=i,J.A=r,_t=n,st!==null?0:(wt=null,ft=0,bc(),Bt)}function Pw(){for(;st!==null&&!rb();)ZT(st)}function ZT(e){var t=IT(e.alternate,e,ii);e.memoizedProps=e.pendingProps,t===null?Oc(e):st=t}function Dy(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ay(n,t,t.pendingProps,t.type,void 0,ft);break;case 11:t=Ay(n,t,t.pendingProps,t.type.render,t.ref,ft);break;case 5:fm(t);default:CT(n,t),t=st=CE(t,ii),t=IT(n,t,ii)}e.memoizedProps=e.pendingProps,t===null?Oc(e):st=t}function ys(e,t,n,i){Yn=Lr=null,fm(t),Rs=null,_o=0;var r=t.return;try{if(ww(e,r,t,n,ft)){Bt=1,Pu(e,on(n,e.current)),st=null;return}}catch(s){if(r!==null)throw st=r,s;Bt=1,Pu(e,on(n,e.current)),st=null;return}t.flags&32768?(gt||i===1?e=!0:ea||ft&536870912?e=!1:(Oi=e=!0,(i===2||i===9||i===3||i===6)&&(i=un.current,i!==null&&i.tag===13&&(i.flags|=16384))),JT(t,e)):Oc(t)}function Oc(e){var t=e;do{if(t.flags&32768){JT(t,Oi);return}e=t.return;var n=Iw(t.alternate,t,ii);if(n!==null){st=n;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);Bt===0&&(Bt=5)}function JT(e,t){do{var n=Cw(e.alternate,e);if(n!==null){n.flags&=32767,st=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){st=e;return}st=e=n}while(e!==null);Bt=6,st=null}function Ny(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do Vc();while(he!==0);if(_t&6)throw Error(U(327));if(t!==null){if(t===e.current)throw Error(U(177));if(s=t.lanes|t.childLanes,s|=Wd,mb(e,n,s,a,l,u),e===wt&&(st=wt=null,ft=0),js=t,Li=e,Is=n,$f=s,Xf=r,FT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Bw(Su,function(){return i0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=J.T,J.T=null,r=pt.p,pt.p=2,a=_t,_t|=4;try{Dw(e,t,n)}finally{_t=a,pt.p=r,J.T=i}}he=1,WT(),t0(),e0()}}function WT(){if(he===1){he=0;var e=Li,t=js,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=J.T,J.T=null;var i=pt.p;pt.p=2;var r=_t;_t|=4;try{LT(t,e);var s=nd,a=EE(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&vE(l.ownerDocument.documentElement,l)){if(u!==null&&Jd(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var _=m.getSelection(),N=l.textContent.length,M=Math.min(u.start,N),k=u.end===void 0?M:Math.min(u.end,N);!_.extend&&M>k&&(a=k,k=M,M=a);var A=Zp(l,M),v=Zp(l,k);if(A&&v&&(_.rangeCount!==1||_.anchorNode!==A.node||_.anchorOffset!==A.offset||_.focusNode!==v.node||_.focusOffset!==v.offset)){var w=g.createRange();w.setStart(A.node,A.offset),_.removeAllRanges(),M>k?(_.addRange(w),_.extend(v.node,v.offset)):(w.setEnd(v.node,v.offset),_.addRange(w))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Ku=!!ed,nd=ed=null}finally{_t=r,pt.p=i,J.T=n}}e.current=t,he=2}}function t0(){if(he===2){he=0;var e=Li,t=js,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=J.T,J.T=null;var i=pt.p;pt.p=2;var r=_t;_t|=4;try{xT(e,t.alternate,t)}finally{_t=r,pt.p=i,J.T=n}}he=3}}function e0(){if(he===4||he===3){he=0,sb();var e=Li,t=js,n=Is,i=FT;t.subtreeFlags&10256||t.flags&10256?he=5:(he=0,js=Li=null,n0(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Ui=null),Fd(n),t=t.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(Uo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=J.T,r=pt.p,pt.p=2,J.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{J.T=t,pt.p=r}}Is&3&&Vc(),kn(e),r=e.pendingLanes,n&4194090&&r&42?e===Zf?no++:(no=0,Zf=e):no=0,$o(0)}}function n0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Go(t)))}function Vc(e){return WT(),t0(),e0(),i0()}function i0(){if(he!==5)return!1;var e=Li,t=$f;$f=0;var n=Fd(Is),i=J.T,r=pt.p;try{pt.p=32>n?32:n,J.T=null,n=Xf,Xf=null;var s=Li,a=Is;if(he=0,js=Li=null,Is=0,_t&6)throw Error(U(331));var l=_t;if(_t|=4,HT(s.current),BT(s,s.current,a,n),_t=l,$o(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(Uo,s)}catch{}return!0}finally{pt.p=r,J.T=i,n0(e,t)}}function Oy(e,t,n){t=on(n,t),t=Gf(e.stateNode,t,2),e=Pi(e,t,2),e!==null&&(zo(e,2),kn(e))}function St(e,t,n){if(e.tag===3)Oy(e,e,n);else for(;t!==null;){if(t.tag===3){Oy(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ui===null||!Ui.has(i))){e=on(n,e),n=ET(2),i=Pi(t,n,2),i!==null&&(TT(n,i,t,e),zo(i,2),kn(i));break}}t=t.return}}function Xh(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Vw;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Sm=!0,r.add(n),e=Uw.bind(null,e,t,n),t.then(e,e))}function Uw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,wt===e&&(ft&n)===n&&(Bt===4||Bt===3&&(ft&62914560)===ft&&300>wn()-wm?!(_t&2)&&qs(e,0):bm|=n,Bs===ft&&(Bs=0)),kn(e)}function r0(e,t){t===0&&(t=Wv()),e=ta(e,t),e!==null&&(zo(e,t),kn(e))}function Lw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),r0(e,n)}function zw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(t),r0(e,n)}function Bw(e,t){return Hd(e,t)}var ju=null,es=null,Wf=!1,qu=!1,Zh=!1,wr=0;function kn(e){e!==es&&e.next===null&&(es===null?ju=es=e:es=es.next=e),qu=!0,Wf||(Wf=!0,qw())}function $o(e,t){if(!Zh&&qu){Zh=!0;do for(var n=!1,i=ju;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-Ye(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Vy(i,s))}else s=ft,s=Ec(i,i===wt?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Lo(i,s)||(n=!0,Vy(i,s));i=i.next}while(n);Zh=!1}}function jw(){s0()}function s0(){qu=Wf=!1;var e=0;wr!==0&&(Xw()&&(e=wr),wr=0);for(var t=wn(),n=null,i=ju;i!==null;){var r=i.next,s=a0(i,t);s===0?(i.next=null,n===null?ju=r:n.next=r,r===null&&(es=n)):(n=i,(e!==0||s&3)&&(qu=!0)),i=r}$o(e)}function a0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-Ye(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=db(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=wt,n=ft,n=Ec(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(yt===2||yt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Sh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Lo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Sh(i),Fd(n)){case 2:case 8:n=Xv;break;case 32:n=Su;break;case 268435456:n=Zv;break;default:n=Su}return i=o0.bind(null,e),n=Hd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Sh(i),e.callbackPriority=2,e.callbackNode=null,2}function o0(e,t){if(he!==0&&he!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Vc()&&e.callbackNode!==n)return null;var i=ft;return i=Ec(e,e===wt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(YT(e,i,t),a0(e,wn()),e.callbackNode!=null&&e.callbackNode===n?o0.bind(null,e):null)}function Vy(e,t){if(Vc())return null;YT(e,t,!0)}function qw(){Jw(function(){_t&6?Hd($v,jw):s0()})}function Im(){return wr===0&&(wr=Jv()),wr}function My(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Jl(""+e)}function xy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Hw(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=My((r[Ue]||null).action),a=i.submitter;a&&(t=(t=a[Ue]||null)?My(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new Tc("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(wr!==0){var u=a?xy(r,a):new FormData(r);qf(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?xy(r,a):new FormData(r),qf(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var Jh=0;Jh<Nf.length;Jh++){var Wh=Nf[Jh],Gw=Wh.toLowerCase(),Fw=Wh[0].toUpperCase()+Wh.slice(1);yn(Gw,"on"+Fw)}yn(AE,"onAnimationEnd");yn(SE,"onAnimationIteration");yn(bE,"onAnimationStart");yn("dblclick","onDoubleClick");yn("focusin","onFocus");yn("focusout","onBlur");yn(lw,"onTransitionRun");yn(uw,"onTransitionStart");yn(cw,"onTransitionCancel");yn(wE,"onTransitionEnd");xs("onMouseEnter",["mouseout","mouseover"]);xs("onMouseLeave",["mouseout","mouseover"]);xs("onPointerEnter",["pointerout","pointerover"]);xs("onPointerLeave",["pointerout","pointerover"]);kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vo));function l0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){ku(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){ku(d)}r.currentTarget=null,s=u}}}}function rt(e,t){var n=t[Sf];n===void 0&&(n=t[Sf]=new Set);var i=e+"__bubble";n.has(i)||(u0(t,e,2,!1),n.add(i))}function tf(e,t,n){var i=0;t&&(i|=4),u0(n,e,i,t)}var jl="_reactListening"+Math.random().toString(36).slice(2);function Cm(e){if(!e[jl]){e[jl]=!0,iE.forEach(function(n){n!=="selectionchange"&&(Qw.has(n)||tf(n,!1,e),tf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jl]||(t[jl]=!0,tf("selectionchange",!1,t))}}function u0(e,t,n,i){switch(T0(t)){case 2:var r=vR;break;case 8:r=ER;break;default:r=Vm}n=r.bind(null,t,n,e),r=void 0,!If||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function ef(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=ls(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}hE(function(){var h=s,d=Kd(n),g=[];t:{var m=RE.get(e);if(m!==void 0){var _=Tc,N=e;switch(e){case"keypress":if(tu(n)===0)break t;case"keydown":case"keyup":_=Bb;break;case"focusin":N="focus",_=Oh;break;case"focusout":N="blur",_=Oh;break;case"beforeblur":case"afterblur":_=Oh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=jp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=Cb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Hb;break;case AE:case SE:case bE:_=Ob;break;case wE:_=Fb;break;case"scroll":case"scrollend":_=Rb;break;case"wheel":_=Yb;break;case"copy":case"cut":case"paste":_=Mb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Hp;break;case"toggle":case"beforetoggle":_=$b}var M=(t&4)!==0,k=!M&&(e==="scroll"||e==="scrollend"),A=M?m!==null?m+"Capture":null:m;M=[];for(var v=h,w;v!==null;){var D=v;if(w=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||w===null||A===null||(D=fo(v,A),D!=null&&M.push(Eo(v,D,w))),k)break;v=v.return}0<M.length&&(m=new _(m,N,null,n,d),g.push({event:m,listeners:M}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==Rf&&(N=n.relatedTarget||n.fromElement)&&(ls(N)||N[Js]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(N=n.relatedTarget||n.toElement,_=h,N=N?ls(N):null,N!==null&&(k=Po(N),M=N.tag,N!==k||M!==5&&M!==27&&M!==6)&&(N=null)):(_=null,N=h),_!==N)){if(M=jp,D="onMouseLeave",A="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(M=Hp,D="onPointerLeave",A="onPointerEnter",v="pointer"),k=_==null?m:Ua(_),w=N==null?m:Ua(N),m=new M(D,v+"leave",_,n,d),m.target=k,m.relatedTarget=w,D=null,ls(d)===h&&(M=new M(A,v+"enter",N,n,d),M.target=w,M.relatedTarget=k,D=M),k=D,_&&N)e:{for(M=_,A=N,v=0,w=M;w;w=Zr(w))v++;for(w=0,D=A;D;D=Zr(D))w++;for(;0<v-w;)M=Zr(M),v--;for(;0<w-v;)A=Zr(A),w--;for(;v--;){if(M===A||A!==null&&M===A.alternate)break e;M=Zr(M),A=Zr(A)}M=null}else M=null;_!==null&&ky(g,m,_,M,!1),N!==null&&k!==null&&ky(g,k,N,M,!0)}}t:{if(m=h?Ua(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=Yp;else if(Qp(m))if(yE)L=sw;else{L=iw;var q=nw}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&Yd(h.elementType)&&(L=Yp):L=rw;if(L&&(L=L(e,h))){pE(g,L,n,d);break t}q&&q(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&wf(m,"number",m.value)}switch(q=h?Ua(h):window,e){case"focusin":(Qp(q)||q.contentEditable==="true")&&(hs=q,Cf=h,Qa=null);break;case"focusout":Qa=Cf=hs=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,Jp(g,n,d);break;case"selectionchange":if(ow)break;case"keydown":case"keyup":Jp(g,n,d)}var E;if(Zd)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else cs?mE(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(dE&&n.locale!=="ko"&&(cs||y!=="onCompositionStart"?y==="onCompositionEnd"&&cs&&(E=fE()):(Ni=d,$d="value"in Ni?Ni.value:Ni.textContent,cs=!0)),q=Hu(h,y),0<q.length&&(y=new qp(y,e,null,n,d),g.push({event:y,listeners:q}),E?y.data=E:(E=gE(n),E!==null&&(y.data=E)))),(E=Zb?Jb(e,n):Wb(e,n))&&(y=Hu(h,"onBeforeInput"),0<y.length&&(q=new qp("onBeforeInput","beforeinput",null,n,d),g.push({event:q,listeners:y}),q.data=E)),Hw(g,e,h,n,d)}l0(g,t)})}function Eo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hu(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=fo(e,n),r!=null&&i.unshift(Eo(e,r,s)),r=fo(e,t),r!=null&&i.push(Eo(e,r,s))),e.tag===3)return i;e=e.return}return[]}function Zr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ky(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=fo(n,s),h!=null&&a.unshift(Eo(n,h,u))):r||(h=fo(n,s),h!=null&&a.push(Eo(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Yw=/\r\n?/g,Kw=/\u0000|\uFFFD/g;function Py(e){return(typeof e=="string"?e:""+e).replace(Yw,`
`).replace(Kw,"")}function c0(e,t){return t=Py(t),Py(e)===t}function Mc(){}function vt(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ks(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ks(e,""+i);break;case"className":xl(e,"class",i);break;case"tabIndex":xl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":xl(e,n,i);break;case"style":cE(e,i,s);break;case"data":if(t!=="object"){xl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Jl(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&vt(e,t,"name",r.name,r,null),vt(e,t,"formEncType",r.formEncType,r,null),vt(e,t,"formMethod",r.formMethod,r,null),vt(e,t,"formTarget",r.formTarget,r,null)):(vt(e,t,"encType",r.encType,r,null),vt(e,t,"method",r.method,r,null),vt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Jl(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Mc);break;case"onScroll":i!=null&&rt("scroll",e);break;case"onScrollEnd":i!=null&&rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Jl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":rt("beforetoggle",e),rt("toggle",e),Zl(e,"popover",i);break;case"xlinkActuate":Bn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Bn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Bn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Bn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Bn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Bn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Zl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=bb.get(n)||n,Zl(e,n,i))}}function td(e,t,n,i,r,s){switch(n){case"style":cE(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ks(e,i):(typeof i=="number"||typeof i=="bigint")&&ks(e,""+i);break;case"onScroll":i!=null&&rt("scroll",e);break;case"onScrollEnd":i!=null&&rt("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Mc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rE.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Ue]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Zl(e,n,i)}}}function me(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",e),rt("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:vt(e,t,s,a,n,null)}}r&&vt(e,t,"srcSet",n.srcSet,n,null),i&&vt(e,t,"src",n.src,n,null);return;case"input":rt("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,t));break;default:vt(e,t,i,d,n,null)}}oE(e,s,l,u,h,a,r,!1),bu(e);return;case"select":rt("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:vt(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?Ts(e,!!i,t,!1):n!=null&&Ts(e,!!i,n,!0);return;case"textarea":rt("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:vt(e,t,a,l,n,null)}uE(e,i,r,s),bu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:vt(e,t,u,i,n,null)}return;case"dialog":rt("beforetoggle",e),rt("toggle",e),rt("cancel",e),rt("close",e);break;case"iframe":case"object":rt("load",e);break;case"video":case"audio":for(i=0;i<vo.length;i++)rt(vo[i],e);break;case"image":rt("error",e),rt("load",e);break;case"details":rt("toggle",e);break;case"embed":case"source":case"link":rt("error",e),rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:vt(e,t,h,i,n,null)}return;default:if(Yd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&td(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&vt(e,t,l,i,n,null))}function $w(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||vt(e,t,_,null,i,g)}}for(var m in i){var _=i[m];if(g=n[m],i.hasOwnProperty(m)&&(_!=null||g!=null))switch(m){case"type":s=_;break;case"name":r=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(U(137,t));break;default:_!==g&&vt(e,t,m,_,i,g)}}bf(e,a,l,u,h,d,s,r);return;case"select":_=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(s)||vt(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&vt(e,t,r,s,i,u)}t=l,n=a,i=_,m!=null?Ts(e,!!n,m,!1):!!i!=!!n&&(t!=null?Ts(e,!!n,t,!0):Ts(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:vt(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":_=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(U(91));break;default:r!==s&&vt(e,t,a,r,i,s)}lE(e,m,_);return;case"option":for(var N in n)if(m=n[N],n.hasOwnProperty(N)&&m!=null&&!i.hasOwnProperty(N))switch(N){case"selected":e.selected=!1;break;default:vt(e,t,N,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:vt(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var M in n)m=n[M],n.hasOwnProperty(M)&&m!=null&&!i.hasOwnProperty(M)&&vt(e,t,M,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,t));break;default:vt(e,t,h,m,i,_)}return;default:if(Yd(t)){for(var k in n)m=n[k],n.hasOwnProperty(k)&&m!==void 0&&!i.hasOwnProperty(k)&&td(e,t,k,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||td(e,t,d,m,i,_);return}}for(var A in n)m=n[A],n.hasOwnProperty(A)&&m!=null&&!i.hasOwnProperty(A)&&vt(e,t,A,null,i,m);for(g in i)m=i[g],_=n[g],!i.hasOwnProperty(g)||m===_||m==null&&_==null||vt(e,t,g,m,i,_)}var ed=null,nd=null;function Gu(e){return e.nodeType===9?e:e.ownerDocument}function Uy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function id(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nf=null;function Xw(){var e=window.event;return e&&e.type==="popstate"?e===nf?!1:(nf=e,!0):(nf=null,!1)}var f0=typeof setTimeout=="function"?setTimeout:void 0,Zw=typeof clearTimeout=="function"?clearTimeout:void 0,Ly=typeof Promise=="function"?Promise:void 0,Jw=typeof queueMicrotask=="function"?queueMicrotask:typeof Ly<"u"?function(e){return Ly.resolve(null).then(e).catch(Ww)}:f0;function Ww(e){setTimeout(function(){throw e})}function ar(e){return e==="head"}function zy(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&io(a.documentElement),n&2&&io(a.body),n&4)for(n=a.head,io(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[Bo]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),wo(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);wo(t)}function rd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":rd(n),Qd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function tR(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Bo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=gn(e.nextSibling),e===null)break}return null}function eR(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=gn(e.nextSibling),e===null))return null;return e}function sd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function nR(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function gn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var ad=null;function By(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function d0(e,t,n){switch(t=Gu(n),e){case"html":if(e=t.documentElement,!e)throw Error(U(452));return e;case"head":if(e=t.head,!e)throw Error(U(453));return e;case"body":if(e=t.body,!e)throw Error(U(454));return e;default:throw Error(U(451))}}function io(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Qd(e)}var cn=new Map,jy=new Set;function Fu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ci=pt.d;pt.d={f:iR,r:rR,D:sR,C:aR,L:oR,m:lR,X:cR,S:uR,M:hR};function iR(){var e=ci.f(),t=Nc();return e||t}function rR(e){var t=Ws(e);t!==null&&t.tag===5&&t.type==="form"?aT(t):ci.r(e)}var na=typeof document>"u"?null:document;function m0(e,t,n){var i=na;if(i&&typeof t=="string"&&t){var r=an(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),jy.has(r)||(jy.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),me(t,"link",e),ie(t),i.head.appendChild(t)))}}function sR(e){ci.D(e),m0("dns-prefetch",e,null)}function aR(e,t){ci.C(e,t),m0("preconnect",e,t)}function oR(e,t,n){ci.L(e,t,n);var i=na;if(i&&e&&t){var r='link[rel="preload"][as="'+an(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+an(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+an(n.imageSizes)+'"]')):r+='[href="'+an(e)+'"]';var s=r;switch(t){case"style":s=Hs(e);break;case"script":s=ia(e)}cn.has(s)||(e=Nt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),cn.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Xo(s))||t==="script"&&i.querySelector(Zo(s))||(t=i.createElement("link"),me(t,"link",e),ie(t),i.head.appendChild(t)))}}function lR(e,t){ci.m(e,t);var n=na;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+an(i)+'"][href="'+an(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=ia(e)}if(!cn.has(s)&&(e=Nt({rel:"modulepreload",href:e},t),cn.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Zo(s)))return}i=n.createElement("link"),me(i,"link",e),ie(i),n.head.appendChild(i)}}}function uR(e,t,n){ci.S(e,t,n);var i=na;if(i&&e){var r=Es(i).hoistableStyles,s=Hs(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Xo(s)))l.loading=5;else{e=Nt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=cn.get(s))&&Dm(e,n);var u=a=i.createElement("link");ie(u),me(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,ou(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function cR(e,t){ci.X(e,t);var n=na;if(n&&e){var i=Es(n).hoistableScripts,r=ia(e),s=i.get(r);s||(s=n.querySelector(Zo(r)),s||(e=Nt({src:e,async:!0},t),(t=cn.get(r))&&Nm(e,t),s=n.createElement("script"),ie(s),me(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function hR(e,t){ci.M(e,t);var n=na;if(n&&e){var i=Es(n).hoistableScripts,r=ia(e),s=i.get(r);s||(s=n.querySelector(Zo(r)),s||(e=Nt({src:e,async:!0,type:"module"},t),(t=cn.get(r))&&Nm(e,t),s=n.createElement("script"),ie(s),me(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function qy(e,t,n,i){var r=(r=xi.current)?Fu(r):null;if(!r)throw Error(U(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Hs(n.href),n=Es(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Hs(n.href);var s=Es(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(Xo(e)))&&!s._p&&(a.instance=s,a.state.loading=5),cn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},cn.set(e,n),s||fR(r,e,n,a.state))),t&&i===null)throw Error(U(528,""));return a}if(t&&i!==null)throw Error(U(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ia(n),n=Es(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,e))}}function Hs(e){return'href="'+an(e)+'"'}function Xo(e){return'link[rel="stylesheet"]['+e+"]"}function g0(e){return Nt({},e,{"data-precedence":e.precedence,precedence:null})}function fR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),me(t,"link",n),ie(t),e.head.appendChild(t))}function ia(e){return'[src="'+an(e)+'"]'}function Zo(e){return"script[async]"+e}function Hy(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+an(n.href)+'"]');if(i)return t.instance=i,ie(i),i;var r=Nt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ie(i),me(i,"style",r),ou(i,n.precedence,e),t.instance=i;case"stylesheet":r=Hs(n.href);var s=e.querySelector(Xo(r));if(s)return t.state.loading|=4,t.instance=s,ie(s),s;i=g0(n),(r=cn.get(r))&&Dm(i,r),s=(e.ownerDocument||e).createElement("link"),ie(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),me(s,"link",i),t.state.loading|=4,ou(s,n.precedence,e),t.instance=s;case"script":return s=ia(n.src),(r=e.querySelector(Zo(s)))?(t.instance=r,ie(r),r):(i=n,(r=cn.get(s))&&(i=Nt({},n),Nm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),ie(r),me(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(U(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,ou(i,n.precedence,e));return t.instance}function ou(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Dm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Nm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var lu=null;function Gy(e,t,n){if(lu===null){var i=new Map,r=lu=new Map;r.set(n,i)}else r=lu,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Bo]||s[Te]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function Fy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function dR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function p0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var To=null;function mR(){}function gR(e,t,n){if(To===null)throw Error(U(475));var i=To;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Hs(n.href),s=e.querySelector(Xo(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Qu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,ie(s);return}s=e.ownerDocument||e,n=g0(n),(r=cn.get(r))&&Dm(n,r),s=s.createElement("link"),ie(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),me(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Qu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function pR(){if(To===null)throw Error(U(475));var e=To;return e.stylesheets&&e.count===0&&od(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&od(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Qu(){if(this.count--,this.count===0){if(this.stylesheets)od(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yu=null;function od(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yu=new Map,t.forEach(yR,e),Yu=null,Qu.call(e))}function yR(e,t){if(!(t.state.loading&4)){var n=Yu.get(e);if(n)var i=n.get(null);else{n=new Map,Yu.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Qu.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Ao={$$typeof:Gn,Provider:null,Consumer:null,_currentValue:vr,_currentValue2:vr,_threadCount:0};function _R(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bh(0),this.hiddenUpdates=bh(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function y0(e,t,n,i,r,s,a,l,u,h,d,g){return e=new _R(e,t,n,a,l,u,h,g),t=1,s===!0&&(t|=24),s=He(3,null,null,t),e.current=s,s.stateNode=e,t=rm(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},am(s),e}function _0(e){return e?(e=ms,e):ms}function v0(e,t,n,i,r,s){r=_0(r),i.context===null?i.context=r:i.pendingContext=r,i=ki(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Pi(e,i,t),n!==null&&($e(n,e,t),$a(n,e,t))}function Qy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Om(e,t){Qy(e,t),(e=e.alternate)&&Qy(e,t)}function E0(e){if(e.tag===13){var t=ta(e,67108864);t!==null&&$e(t,e,67108864),Om(e,67108864)}}var Ku=!0;function vR(e,t,n,i){var r=J.T;J.T=null;var s=pt.p;try{pt.p=2,Vm(e,t,n,i)}finally{pt.p=s,J.T=r}}function ER(e,t,n,i){var r=J.T;J.T=null;var s=pt.p;try{pt.p=8,Vm(e,t,n,i)}finally{pt.p=s,J.T=r}}function Vm(e,t,n,i){if(Ku){var r=ld(i);if(r===null)ef(e,t,i,$u,n),Yy(e,i);else if(AR(r,e,t,n,i))i.stopPropagation();else if(Yy(e,i),t&4&&-1<TR.indexOf(e)){for(;r!==null;){var s=Ws(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=mr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-Ye(a);l.entanglements[1]|=u,a&=~u}kn(s),!(_t&6)&&(zu=wn()+500,$o(0))}}break;case 13:l=ta(s,2),l!==null&&$e(l,s,2),Nc(),Om(s,2)}if(s=ld(i),s===null&&ef(e,t,i,$u,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else ef(e,t,i,null,n)}}function ld(e){return e=Kd(e),Mm(e)}var $u=null;function Mm(e){if($u=null,e=ls(e),e!==null){var t=Po(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Fv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return $u=e,null}function T0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ab()){case $v:return 2;case Xv:return 8;case Su:case ob:return 32;case Zv:return 268435456;default:return 32}default:return 32}}var ud=!1,zi=null,Bi=null,ji=null,So=new Map,bo=new Map,bi=[],TR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yy(e,t){switch(e){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":ji=null;break;case"pointerover":case"pointerout":So.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(t.pointerId)}}function xa(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Ws(t),t!==null&&E0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function AR(e,t,n,i,r){switch(t){case"focusin":return zi=xa(zi,e,t,n,i,r),!0;case"dragenter":return Bi=xa(Bi,e,t,n,i,r),!0;case"mouseover":return ji=xa(ji,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return So.set(s,xa(So.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,bo.set(s,xa(bo.get(s)||null,e,t,n,i,r)),!0}return!1}function A0(e){var t=ls(e.target);if(t!==null){var n=Po(t);if(n!==null){if(t=n.tag,t===13){if(t=Fv(n),t!==null){e.blockedOn=t,gb(e.priority,function(){if(n.tag===13){var i=Ke();i=Gd(i);var r=ta(n,i);r!==null&&$e(r,n,i),Om(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ld(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Rf=i,n.target.dispatchEvent(i),Rf=null}else return t=Ws(n),t!==null&&E0(t),e.blockedOn=n,!1;t.shift()}return!0}function Ky(e,t,n){uu(e)&&n.delete(t)}function SR(){ud=!1,zi!==null&&uu(zi)&&(zi=null),Bi!==null&&uu(Bi)&&(Bi=null),ji!==null&&uu(ji)&&(ji=null),So.forEach(Ky),bo.forEach(Ky)}function ql(e,t){e.blockedOn===t&&(e.blockedOn=null,ud||(ud=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,SR)))}var Hl=null;function $y(e){Hl!==e&&(Hl=e,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,function(){Hl===e&&(Hl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(Mm(i||n)===null)continue;break}var s=Ws(n);s!==null&&(e.splice(t,3),t-=3,qf(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function wo(e){function t(u){return ql(u,e)}zi!==null&&ql(zi,e),Bi!==null&&ql(Bi,e),ji!==null&&ql(ji,e),So.forEach(t),bo.forEach(t);for(var n=0;n<bi.length;n++){var i=bi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<bi.length&&(n=bi[0],n.blockedOn===null);)A0(n),n.blockedOn===null&&bi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Ue]||null;if(typeof s=="function")a||$y(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Ue]||null)l=a.formAction;else if(Mm(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),$y(n)}}}function xm(e){this._internalRoot=e}xc.prototype.render=xm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));var n=t.current,i=Ke();v0(n,i,e,t,null,null)};xc.prototype.unmount=xm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;v0(e.current,2,null,e,null,null),Nc(),t[Js]=null}};function xc(e){this._internalRoot=e}xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=nE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<bi.length&&t!==0&&t<bi[n].priority;n++);bi.splice(n,0,e),n===0&&A0(e)}};var Xy=Hv.version;if(Xy!=="19.1.1")throw Error(U(527,Xy,"19.1.1"));pt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=W1(t),e=e!==null?Qv(e):null,e=e===null?null:e.stateNode,e};var bR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{Uo=Gl.inject(bR),Qe=Gl}catch{}}_c.createRoot=function(e,t){if(!Gv(e))throw Error(U(299));var n=!1,i="",r=yT,s=_T,a=vT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=y0(e,1,!1,null,null,n,i,r,s,a,l,null),e[Js]=t.current,Cm(e),new xm(t)};_c.hydrateRoot=function(e,t,n){if(!Gv(e))throw Error(U(299));var i=!1,r="",s=yT,a=_T,l=vT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=y0(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=_0(null),n=t.current,i=Ke(),i=Gd(i),r=ki(i),r.callback=null,Pi(n,r,i),n=i,t.current.lanes=n,zo(t,n),kn(t),e[Js]=t.current,Cm(e),new xc(t)};_c.version="19.1.1";function S0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S0)}catch(e){console.error(e)}}S0(),Uv.exports=_c;var wR=Uv.exports;const RR=()=>{};var Zy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},IR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},w0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[g],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(b0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):IR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const g=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||g==null)throw new CR;const m=s<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const N=h<<6&192|g;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class CR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DR=function(e){const t=b0(e);return w0.encodeByteArray(t,!0)},Xu=function(e){return DR(e).replace(/\./g,"")},R0=function(e){try{return w0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=()=>NR().__FIREBASE_DEFAULTS__,VR=()=>{if(typeof process>"u"||typeof Zy>"u")return;const e=Zy.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},MR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&R0(e[1]);return t&&JSON.parse(t)},kc=()=>{try{return RR()||OR()||VR()||MR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},I0=e=>{var t,n;return(n=(t=kc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},xR=e=>{const t=I0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},C0=()=>{var e;return(e=kc())==null?void 0:e.config},D0=e=>{var t;return(t=kc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function N0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Xu(JSON.stringify(n)),Xu(JSON.stringify(a)),""].join(".")}const ro={};function UR(){const e={prod:[],emulator:[]};for(const t of Object.keys(ro))ro[t]?e.emulator.push(t):e.prod.push(t);return e}function LR(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Jy=!1;function O0(e,t){if(typeof window>"u"||typeof document>"u"||!ra(window.location.host)||ro[e]===t||ro[e]||Jy)return;ro[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=UR().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Jy=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=LR(i),_=n("text"),N=document.getElementById(_)||document.createElement("span"),M=n("learnmore"),k=document.getElementById(M)||document.createElement("a"),A=n("preprendIcon"),v=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const w=m.element;l(w),d(k,M);const D=h();u(v,A),w.append(v,N,k,D),document.body.appendChild(w)}s?(N.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function BR(){var t;const e=(t=kc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function HR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GR(){const e=Se();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function FR(){return!BR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QR(){try{return typeof indexedDB=="object"}catch{return!1}}function YR(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="FirebaseError";class hi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=KR,Object.setPrototypeOf(this,hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jo.prototype.create)}}class Jo{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?$R(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new hi(r,l,i)}}function $R(e,t){return e.replace(XR,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const XR=/\{\$([^}]+)}/g;function ZR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Nr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(Wy(s)&&Wy(a)){if(!Nr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Wy(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function JR(e,t){const n=new WR(e,t);return n.subscribe.bind(n)}class WR{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");tI(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=rf),r.error===void 0&&(r.error=rf),r.complete===void 0&&(r.complete=rf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tI(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function rf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(e){return e&&e._delegate?e._delegate:e}class Or{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new kR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(iI(t))try{this.getOrInitializeService({instanceIdentifier:yr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=yr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=yr){return this.instances.has(t)}getOptions(t=yr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:nI(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=yr){return this.component?this.component.multipleInstances?t:yr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nI(e){return e===yr?void 0:e}function iI(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new eI(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));const sI={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},aI=ot.INFO,oI={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},lI=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=oI[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class km{constructor(t){this.name=t,this._logLevel=aI,this._logHandler=lI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?sI[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...t),this._logHandler(this,ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...t),this._logHandler(this,ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...t),this._logHandler(this,ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...t),this._logHandler(this,ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...t),this._logHandler(this,ot.ERROR,...t)}}const uI=(e,t)=>t.some(n=>e instanceof n);let t_,e_;function cI(){return t_||(t_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hI(){return e_||(e_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const V0=new WeakMap,cd=new WeakMap,M0=new WeakMap,sf=new WeakMap,Pm=new WeakMap;function fI(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(qi(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&V0.set(n,e)}).catch(()=>{}),Pm.set(t,e),t}function dI(e){if(cd.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});cd.set(e,t)}let hd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return cd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||M0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function mI(e){hd=e(hd)}function gI(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(af(this),t,...n);return M0.set(i,t.sort?t.sort():[t]),qi(i)}:hI().includes(e)?function(...t){return e.apply(af(this),t),qi(V0.get(this))}:function(...t){return qi(e.apply(af(this),t))}}function pI(e){return typeof e=="function"?gI(e):(e instanceof IDBTransaction&&dI(e),uI(e,cI())?new Proxy(e,hd):e)}function qi(e){if(e instanceof IDBRequest)return fI(e);if(sf.has(e))return sf.get(e);const t=pI(e);return t!==e&&(sf.set(e,t),Pm.set(t,e)),t}const af=e=>Pm.get(e);function yI(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=qi(a);return i&&a.addEventListener("upgradeneeded",u=>{i(qi(a.result),u.oldVersion,u.newVersion,qi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const _I=["get","getKey","getAll","getAllKeys","count"],vI=["put","add","delete","clear"],of=new Map;function n_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(of.get(t))return of.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=vI.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||_I.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return of.set(t,s),s}mI(e=>({...e,get:(t,n,i)=>n_(t,n)||e.get(t,n,i),has:(t,n)=>!!n_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TI(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function TI(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const fd="@firebase/app",i_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new km("@firebase/app"),AI="@firebase/app-compat",SI="@firebase/analytics-compat",bI="@firebase/analytics",wI="@firebase/app-check-compat",RI="@firebase/app-check",II="@firebase/auth",CI="@firebase/auth-compat",DI="@firebase/database",NI="@firebase/data-connect",OI="@firebase/database-compat",VI="@firebase/functions",MI="@firebase/functions-compat",xI="@firebase/installations",kI="@firebase/installations-compat",PI="@firebase/messaging",UI="@firebase/messaging-compat",LI="@firebase/performance",zI="@firebase/performance-compat",BI="@firebase/remote-config",jI="@firebase/remote-config-compat",qI="@firebase/storage",HI="@firebase/storage-compat",GI="@firebase/firestore",FI="@firebase/ai",QI="@firebase/firestore-compat",YI="firebase",KI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="[DEFAULT]",$I={[fd]:"fire-core",[AI]:"fire-core-compat",[bI]:"fire-analytics",[SI]:"fire-analytics-compat",[RI]:"fire-app-check",[wI]:"fire-app-check-compat",[II]:"fire-auth",[CI]:"fire-auth-compat",[DI]:"fire-rtdb",[NI]:"fire-data-connect",[OI]:"fire-rtdb-compat",[VI]:"fire-fn",[MI]:"fire-fn-compat",[xI]:"fire-iid",[kI]:"fire-iid-compat",[PI]:"fire-fcm",[UI]:"fire-fcm-compat",[LI]:"fire-perf",[zI]:"fire-perf-compat",[BI]:"fire-rc",[jI]:"fire-rc-compat",[qI]:"fire-gcs",[HI]:"fire-gcs-compat",[GI]:"fire-fst",[QI]:"fire-fst-compat",[FI]:"fire-vertex","fire-js":"fire-js",[YI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=new Map,XI=new Map,md=new Map;function r_(e,t){try{e.container.addComponent(t)}catch(n){ri.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Gs(e){const t=e.name;if(md.has(t))return ri.debug(`There were multiple attempts to register component ${t}.`),!1;md.set(t,e);for(const n of Zu.values())r_(n,e);for(const n of XI.values())r_(n,e);return!0}function Um(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function dn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hi=new Jo("app","Firebase",ZI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=KI;function x0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:dd,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Hi.create("bad-app-name",{appName:String(r)});if(n||(n=C0()),!n)throw Hi.create("no-options");const s=Zu.get(r);if(s){if(Nr(n,s.options)&&Nr(i,s.config))return s;throw Hi.create("duplicate-app",{appName:r})}const a=new rI(r);for(const u of md.values())a.addComponent(u);const l=new JI(n,i,a);return Zu.set(r,l),l}function k0(e=dd){const t=Zu.get(e);if(!t&&e===dd&&C0())return x0();if(!t)throw Hi.create("no-app",{appName:e});return t}function Gi(e,t,n){let i=$I[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ri.warn(a.join(" "));return}Gs(new Or(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="firebase-heartbeat-database",t2=1,Ro="firebase-heartbeat-store";let lf=null;function P0(){return lf||(lf=yI(WI,t2,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ro)}catch(n){console.warn(n)}}}}).catch(e=>{throw Hi.create("idb-open",{originalErrorMessage:e.message})})),lf}async function e2(e){try{const n=(await P0()).transaction(Ro),i=await n.objectStore(Ro).get(U0(e));return await n.done,i}catch(t){if(t instanceof hi)ri.warn(t.message);else{const n=Hi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ri.warn(n.message)}}}async function s_(e,t){try{const i=(await P0()).transaction(Ro,"readwrite");await i.objectStore(Ro).put(t,U0(e)),await i.done}catch(n){if(n instanceof hi)ri.warn(n.message);else{const i=Hi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ri.warn(i.message)}}}function U0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=1024,i2=30;class r2{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=a_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>i2){const a=o2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ri.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=a_(),{heartbeatsToSend:i,unsentEntries:r}=s2(this._heartbeatsCache.heartbeats),s=Xu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ri.warn(n),""}}}function a_(){return new Date().toISOString().substring(0,10)}function s2(e,t=n2){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),o_(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),o_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class a2{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QR()?YR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await e2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return s_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return s_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function o_(e){return Xu(JSON.stringify({version:2,heartbeats:e})).length}function o2(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(e){Gs(new Or("platform-logger",t=>new EI(t),"PRIVATE")),Gs(new Or("heartbeat",t=>new r2(t),"PRIVATE")),Gi(fd,i_,e),Gi(fd,i_,"esm2020"),Gi("fire-js","")}l2("");var u2="firebase",c2="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gi(u2,c2,"app");var l_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fi,L0;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,y){function T(){}T.prototype=y.prototype,E.D=y.prototype,E.prototype=new T,E.prototype.constructor=E,E.C=function(S,R,I){for(var b=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)b[Y-2]=arguments[Y];return y.prototype[R].apply(S,b)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,y,T){T||(T=0);var S=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)S[R]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(R=0;16>R;++R)S[R]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=E.g[0],T=E.g[1],R=E.g[2];var I=E.g[3],b=y+(I^T&(R^I))+S[0]+3614090360&4294967295;y=T+(b<<7&4294967295|b>>>25),b=I+(R^y&(T^R))+S[1]+3905402710&4294967295,I=y+(b<<12&4294967295|b>>>20),b=R+(T^I&(y^T))+S[2]+606105819&4294967295,R=I+(b<<17&4294967295|b>>>15),b=T+(y^R&(I^y))+S[3]+3250441966&4294967295,T=R+(b<<22&4294967295|b>>>10),b=y+(I^T&(R^I))+S[4]+4118548399&4294967295,y=T+(b<<7&4294967295|b>>>25),b=I+(R^y&(T^R))+S[5]+1200080426&4294967295,I=y+(b<<12&4294967295|b>>>20),b=R+(T^I&(y^T))+S[6]+2821735955&4294967295,R=I+(b<<17&4294967295|b>>>15),b=T+(y^R&(I^y))+S[7]+4249261313&4294967295,T=R+(b<<22&4294967295|b>>>10),b=y+(I^T&(R^I))+S[8]+1770035416&4294967295,y=T+(b<<7&4294967295|b>>>25),b=I+(R^y&(T^R))+S[9]+2336552879&4294967295,I=y+(b<<12&4294967295|b>>>20),b=R+(T^I&(y^T))+S[10]+4294925233&4294967295,R=I+(b<<17&4294967295|b>>>15),b=T+(y^R&(I^y))+S[11]+2304563134&4294967295,T=R+(b<<22&4294967295|b>>>10),b=y+(I^T&(R^I))+S[12]+1804603682&4294967295,y=T+(b<<7&4294967295|b>>>25),b=I+(R^y&(T^R))+S[13]+4254626195&4294967295,I=y+(b<<12&4294967295|b>>>20),b=R+(T^I&(y^T))+S[14]+2792965006&4294967295,R=I+(b<<17&4294967295|b>>>15),b=T+(y^R&(I^y))+S[15]+1236535329&4294967295,T=R+(b<<22&4294967295|b>>>10),b=y+(R^I&(T^R))+S[1]+4129170786&4294967295,y=T+(b<<5&4294967295|b>>>27),b=I+(T^R&(y^T))+S[6]+3225465664&4294967295,I=y+(b<<9&4294967295|b>>>23),b=R+(y^T&(I^y))+S[11]+643717713&4294967295,R=I+(b<<14&4294967295|b>>>18),b=T+(I^y&(R^I))+S[0]+3921069994&4294967295,T=R+(b<<20&4294967295|b>>>12),b=y+(R^I&(T^R))+S[5]+3593408605&4294967295,y=T+(b<<5&4294967295|b>>>27),b=I+(T^R&(y^T))+S[10]+38016083&4294967295,I=y+(b<<9&4294967295|b>>>23),b=R+(y^T&(I^y))+S[15]+3634488961&4294967295,R=I+(b<<14&4294967295|b>>>18),b=T+(I^y&(R^I))+S[4]+3889429448&4294967295,T=R+(b<<20&4294967295|b>>>12),b=y+(R^I&(T^R))+S[9]+568446438&4294967295,y=T+(b<<5&4294967295|b>>>27),b=I+(T^R&(y^T))+S[14]+3275163606&4294967295,I=y+(b<<9&4294967295|b>>>23),b=R+(y^T&(I^y))+S[3]+4107603335&4294967295,R=I+(b<<14&4294967295|b>>>18),b=T+(I^y&(R^I))+S[8]+1163531501&4294967295,T=R+(b<<20&4294967295|b>>>12),b=y+(R^I&(T^R))+S[13]+2850285829&4294967295,y=T+(b<<5&4294967295|b>>>27),b=I+(T^R&(y^T))+S[2]+4243563512&4294967295,I=y+(b<<9&4294967295|b>>>23),b=R+(y^T&(I^y))+S[7]+1735328473&4294967295,R=I+(b<<14&4294967295|b>>>18),b=T+(I^y&(R^I))+S[12]+2368359562&4294967295,T=R+(b<<20&4294967295|b>>>12),b=y+(T^R^I)+S[5]+4294588738&4294967295,y=T+(b<<4&4294967295|b>>>28),b=I+(y^T^R)+S[8]+2272392833&4294967295,I=y+(b<<11&4294967295|b>>>21),b=R+(I^y^T)+S[11]+1839030562&4294967295,R=I+(b<<16&4294967295|b>>>16),b=T+(R^I^y)+S[14]+4259657740&4294967295,T=R+(b<<23&4294967295|b>>>9),b=y+(T^R^I)+S[1]+2763975236&4294967295,y=T+(b<<4&4294967295|b>>>28),b=I+(y^T^R)+S[4]+1272893353&4294967295,I=y+(b<<11&4294967295|b>>>21),b=R+(I^y^T)+S[7]+4139469664&4294967295,R=I+(b<<16&4294967295|b>>>16),b=T+(R^I^y)+S[10]+3200236656&4294967295,T=R+(b<<23&4294967295|b>>>9),b=y+(T^R^I)+S[13]+681279174&4294967295,y=T+(b<<4&4294967295|b>>>28),b=I+(y^T^R)+S[0]+3936430074&4294967295,I=y+(b<<11&4294967295|b>>>21),b=R+(I^y^T)+S[3]+3572445317&4294967295,R=I+(b<<16&4294967295|b>>>16),b=T+(R^I^y)+S[6]+76029189&4294967295,T=R+(b<<23&4294967295|b>>>9),b=y+(T^R^I)+S[9]+3654602809&4294967295,y=T+(b<<4&4294967295|b>>>28),b=I+(y^T^R)+S[12]+3873151461&4294967295,I=y+(b<<11&4294967295|b>>>21),b=R+(I^y^T)+S[15]+530742520&4294967295,R=I+(b<<16&4294967295|b>>>16),b=T+(R^I^y)+S[2]+3299628645&4294967295,T=R+(b<<23&4294967295|b>>>9),b=y+(R^(T|~I))+S[0]+4096336452&4294967295,y=T+(b<<6&4294967295|b>>>26),b=I+(T^(y|~R))+S[7]+1126891415&4294967295,I=y+(b<<10&4294967295|b>>>22),b=R+(y^(I|~T))+S[14]+2878612391&4294967295,R=I+(b<<15&4294967295|b>>>17),b=T+(I^(R|~y))+S[5]+4237533241&4294967295,T=R+(b<<21&4294967295|b>>>11),b=y+(R^(T|~I))+S[12]+1700485571&4294967295,y=T+(b<<6&4294967295|b>>>26),b=I+(T^(y|~R))+S[3]+2399980690&4294967295,I=y+(b<<10&4294967295|b>>>22),b=R+(y^(I|~T))+S[10]+4293915773&4294967295,R=I+(b<<15&4294967295|b>>>17),b=T+(I^(R|~y))+S[1]+2240044497&4294967295,T=R+(b<<21&4294967295|b>>>11),b=y+(R^(T|~I))+S[8]+1873313359&4294967295,y=T+(b<<6&4294967295|b>>>26),b=I+(T^(y|~R))+S[15]+4264355552&4294967295,I=y+(b<<10&4294967295|b>>>22),b=R+(y^(I|~T))+S[6]+2734768916&4294967295,R=I+(b<<15&4294967295|b>>>17),b=T+(I^(R|~y))+S[13]+1309151649&4294967295,T=R+(b<<21&4294967295|b>>>11),b=y+(R^(T|~I))+S[4]+4149444226&4294967295,y=T+(b<<6&4294967295|b>>>26),b=I+(T^(y|~R))+S[11]+3174756917&4294967295,I=y+(b<<10&4294967295|b>>>22),b=R+(y^(I|~T))+S[2]+718787259&4294967295,R=I+(b<<15&4294967295|b>>>17),b=T+(I^(R|~y))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+I&4294967295}i.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var T=y-this.blockSize,S=this.B,R=this.h,I=0;I<y;){if(R==0)for(;I<=T;)r(this,E,I),I+=this.blockSize;if(typeof E=="string"){for(;I<y;)if(S[R++]=E.charCodeAt(I++),R==this.blockSize){r(this,S),R=0;break}}else for(;I<y;)if(S[R++]=E[I++],R==this.blockSize){r(this,S),R=0;break}}this.h=R,this.o+=y},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var T=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=T&255,T/=256;for(this.u(E),E=Array(16),y=T=0;4>y;++y)for(var S=0;32>S;S+=8)E[T++]=this.g[y]>>>S&255;return E};function s(E,y){var T=l;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=y(E)}function a(E,y){this.h=y;for(var T=[],S=!0,R=E.length-1;0<=R;R--){var I=E[R]|0;S&&I==y||(T[R]=I,S=!1)}this.g=T}var l={};function u(E){return-128<=E&&128>E?s(E,function(y){return new a([y|0],0>y?-1:0)}):new a([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return k(h(-E));for(var y=[],T=1,S=0;E>=T;S++)y[S]=E/T|0,T*=4294967296;return new a(y,0)}function d(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return k(d(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(y,8)),S=g,R=0;R<E.length;R+=8){var I=Math.min(8,E.length-R),b=parseInt(E.substring(R,R+I),y);8>I?(I=h(Math.pow(y,I)),S=S.j(I).add(h(b))):(S=S.j(T),S=S.add(h(b)))}return S}var g=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(M(this))return-k(this).m();for(var E=0,y=1,T=0;T<this.g.length;T++){var S=this.i(T);E+=(0<=S?S:4294967296+S)*y,y*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(N(this))return"0";if(M(this))return"-"+k(this).toString(E);for(var y=h(Math.pow(E,6)),T=this,S="";;){var R=D(T,y).g;T=A(T,R.j(y));var I=((0<T.g.length?T.g[0]:T.h)>>>0).toString(E);if(T=R,N(T))return I+S;for(;6>I.length;)I="0"+I;S=I+S}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function N(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function M(E){return E.h==-1}e.l=function(E){return E=A(this,E),M(E)?-1:N(E)?0:1};function k(E){for(var y=E.g.length,T=[],S=0;S<y;S++)T[S]=~E.g[S];return new a(T,~E.h).add(m)}e.abs=function(){return M(this)?k(this):this},e.add=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0,R=0;R<=y;R++){var I=S+(this.i(R)&65535)+(E.i(R)&65535),b=(I>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);S=b>>>16,I&=65535,b&=65535,T[R]=b<<16|I}return new a(T,T[T.length-1]&-2147483648?-1:0)};function A(E,y){return E.add(k(y))}e.j=function(E){if(N(this)||N(E))return g;if(M(this))return M(E)?k(this).j(k(E)):k(k(this).j(E));if(M(E))return k(this.j(k(E)));if(0>this.l(_)&&0>E.l(_))return h(this.m()*E.m());for(var y=this.g.length+E.g.length,T=[],S=0;S<2*y;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<E.g.length;R++){var I=this.i(S)>>>16,b=this.i(S)&65535,Y=E.i(R)>>>16,Rt=E.i(R)&65535;T[2*S+2*R]+=b*Rt,v(T,2*S+2*R),T[2*S+2*R+1]+=I*Rt,v(T,2*S+2*R+1),T[2*S+2*R+1]+=b*Y,v(T,2*S+2*R+1),T[2*S+2*R+2]+=I*Y,v(T,2*S+2*R+2)}for(S=0;S<y;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=y;S<2*y;S++)T[S]=0;return new a(T,0)};function v(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function w(E,y){this.g=E,this.h=y}function D(E,y){if(N(y))throw Error("division by zero");if(N(E))return new w(g,g);if(M(E))return y=D(k(E),y),new w(k(y.g),k(y.h));if(M(y))return y=D(E,k(y)),new w(k(y.g),y.h);if(30<E.g.length){if(M(E)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var T=m,S=y;0>=S.l(E);)T=L(T),S=L(S);var R=q(T,1),I=q(S,1);for(S=q(S,2),T=q(T,2);!N(S);){var b=I.add(S);0>=b.l(E)&&(R=R.add(T),I=b),S=q(S,1),T=q(T,1)}return y=A(E,R.j(y)),new w(R,y)}for(R=g;0<=E.l(y);){for(T=Math.max(1,Math.floor(E.m()/y.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),I=h(T),b=I.j(y);M(b)||0<b.l(E);)T-=S,I=h(T),b=I.j(y);N(I)&&(I=m),R=R.add(I),E=A(E,b)}return new w(R,E)}e.A=function(E){return D(this,E).h},e.and=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)&E.i(S);return new a(T,this.h&E.h)},e.or=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)|E.i(S);return new a(T,this.h|E.h)},e.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)^E.i(S);return new a(T,this.h^E.h)};function L(E){for(var y=E.g.length+1,T=[],S=0;S<y;S++)T[S]=E.i(S)<<1|E.i(S-1)>>>31;return new a(T,E.h)}function q(E,y){var T=y>>5;y%=32;for(var S=E.g.length-T,R=[],I=0;I<S;I++)R[I]=0<y?E.i(I+T)>>>y|E.i(I+T+1)<<32-y:E.i(I+T);return new a(R,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,L0=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Fi=a}).apply(typeof l_<"u"?l_:typeof self<"u"?self:typeof window<"u"?window:{});var Fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z0,za,B0,cu,gd,j0,q0,H0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fl=="object"&&Fl];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var C=o[p];if(!(C in f))break t;f=f[C]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,p=!1,C={next:function(){if(!p&&f<o.length){var V=f++;return{value:c(V,o[V]),done:!1}}return p=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,p),o.apply(c,C)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function N(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,C,V){for(var B=Array(arguments.length-2),At=2;At<arguments.length;At++)B[At-2]=arguments[At];return c.prototype[C].apply(p,B)}}function M(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function k(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const C=o.length||0,V=p.length||0;o.length=C+V;for(let B=0;B<V;B++)o[C+B]=p[B]}else o.push(p)}}class A{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function w(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var L=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function q(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function E(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(o,c){let f,p;for(let C=1;C<arguments.length;C++){p=arguments[C];for(f in p)o[f]=p[f];for(let V=0;V<T.length;V++)f=T[V],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function R(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function I(o){l.setTimeout(()=>{throw o},0)}function b(){var o=ct;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Y{constructor(){this.h=this.g=null}add(c,f){const p=Rt.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var Rt=new A(()=>new z,o=>o.reset());class z{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let F,X=!1,ct=new Y,bt=()=>{const o=l.Promise.resolve(void 0);F=()=>{o.then(We)}};var We=()=>{for(var o;o=b();){try{o.h.call(o.g)}catch(f){I(f)}var c=Rt;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}X=!1};function $t(){this.s=this.s,this.C=this.C}$t.prototype.s=!1,$t.prototype.ma=function(){this.s||(this.s=!0,this.N())},$t.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ot(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Ot.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function we(o,c){if(Ot.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{D(c.nodeName);var C=!0;break t}catch{}C=!1}C||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:qr[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&we.aa.h.call(this)}}N(we,Ot);var qr={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Pn="closure_listenable_"+(1e6*Math.random()|0),tt=0;function G(o,c,f,p,C){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=C,this.key=++tt,this.da=this.fa=!1}function at(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function It(o){this.src=o,this.g={},this.h=0}It.prototype.add=function(o,c,f,p,C){var V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);var B=Ve(o,c,p,C);return-1<B?(c=o[B],f||(c.fa=!1)):(c=new G(c,this.src,V,!!p,C),c.fa=f,o.push(c)),c};function te(o,c){var f=c.type;if(f in o.g){var p=o.g[f],C=Array.prototype.indexOf.call(p,c,void 0),V;(V=0<=C)&&Array.prototype.splice.call(p,C,1),V&&(at(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Ve(o,c,f,p){for(var C=0;C<o.length;++C){var V=o[C];if(!V.da&&V.listener==c&&V.capture==!!f&&V.ha==p)return C}return-1}var Hr="closure_lm_"+(1e6*Math.random()|0),Gr={};function _n(o,c,f,p,C){if(Array.isArray(c)){for(var V=0;V<c.length;V++)_n(o,c[V],f,p,C);return null}return f=Ng(f),o&&o[Pn]?o.K(c,f,h(p)?!!p.capture:!1,C):Fr(o,c,f,!1,p,C)}function Fr(o,c,f,p,C,V){if(!c)throw Error("Invalid event type");var B=h(C)?!!C.capture:!!C,At=rh(o);if(At||(o[Hr]=At=new It(o)),f=At.add(c,f,p,B,V),f.proxy)return f;if(p=fl(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)be||(C=B),C===void 0&&(C=!1),o.addEventListener(c.toString(),p,C);else if(o.attachEvent)o.attachEvent(da(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function fl(){function o(f){return c.call(o.src,o.listener,f)}const c=Un;return o}function dl(o,c,f,p,C){if(Array.isArray(c))for(var V=0;V<c.length;V++)dl(o,c[V],f,p,C);else p=h(p)?!!p.capture:!!p,f=Ng(f),o&&o[Pn]?(o=o.i,c=String(c).toString(),c in o.g&&(V=o.g[c],f=Ve(V,f,p,C),-1<f&&(at(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete o.g[c],o.h--)))):o&&(o=rh(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Ve(c,f,p,C)),(f=-1<o?c[o]:null)&&fa(f))}function fa(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Pn])te(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(da(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=rh(c))?(te(f,o),f.h==0&&(f.src=null,c[Hr]=null)):at(o)}}}function da(o){return o in Gr?Gr[o]:Gr[o]="on"+o}function Un(o,c){if(o.da)o=!0;else{c=new we(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&fa(o),o=f.call(p,c)}return o}function rh(o){return o=o[Hr],o instanceof It?o:null}var sh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ng(o){return typeof o=="function"?o:(o[sh]||(o[sh]=function(c){return o.handleEvent(c)}),o[sh])}function pe(){$t.call(this),this.i=new It(this),this.M=this,this.F=null}N(pe,$t),pe.prototype[Pn]=!0,pe.prototype.removeEventListener=function(o,c,f,p){dl(this,o,c,f,p)};function Re(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new Ot(c,o);else if(c instanceof Ot)c.target=c.target||o;else{var C=c;c=new Ot(p,o),S(c,C)}if(C=!0,f)for(var V=f.length-1;0<=V;V--){var B=c.g=f[V];C=ml(B,p,!0,c)&&C}if(B=c.g=o,C=ml(B,p,!0,c)&&C,C=ml(B,p,!1,c)&&C,f)for(V=0;V<f.length;V++)B=c.g=f[V],C=ml(B,p,!1,c)&&C}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)at(f[p]);delete o.g[c],o.h--}}this.F=null},pe.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},pe.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function ml(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var C=!0,V=0;V<c.length;++V){var B=c[V];if(B&&!B.da&&B.capture==f){var At=B.listener,le=B.ha||B.src;B.fa&&te(o.i,B),C=At.call(le,p)!==!1&&C}}return C&&!p.defaultPrevented}function Og(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Vg(o){o.g=Og(()=>{o.g=null,o.i&&(o.i=!1,Vg(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class r1 extends $t{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Vg(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ma(o){$t.call(this),this.h=o,this.g={}}N(ma,$t);var Mg=[];function xg(o){q(o.g,function(c,f){this.g.hasOwnProperty(f)&&fa(c)},o),o.g={}}ma.prototype.N=function(){ma.aa.N.call(this),xg(this)},ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ah=l.JSON.stringify,s1=l.JSON.parse,a1=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function oh(){}oh.prototype.h=null;function kg(o){return o.h||(o.h=o.i())}function Pg(){}var ga={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lh(){Ot.call(this,"d")}N(lh,Ot);function uh(){Ot.call(this,"c")}N(uh,Ot);var ur={},Ug=null;function gl(){return Ug=Ug||new pe}ur.La="serverreachability";function Lg(o){Ot.call(this,ur.La,o)}N(Lg,Ot);function pa(o){const c=gl();Re(c,new Lg(c))}ur.STAT_EVENT="statevent";function zg(o,c){Ot.call(this,ur.STAT_EVENT,o),this.stat=c}N(zg,Ot);function Ie(o){const c=gl();Re(c,new zg(c,o))}ur.Ma="timingevent";function Bg(o,c){Ot.call(this,ur.Ma,o),this.size=c}N(Bg,Ot);function ya(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function _a(){this.g=!0}_a.prototype.xa=function(){this.g=!1};function o1(o,c,f,p,C,V){o.info(function(){if(o.g)if(V)for(var B="",At=V.split("&"),le=0;le<At.length;le++){var mt=At[le].split("=");if(1<mt.length){var ye=mt[0];mt=mt[1];var _e=ye.split("_");B=2<=_e.length&&_e[1]=="type"?B+(ye+"="+mt+"&"):B+(ye+"=redacted&")}}else B=null;else B=V;return"XMLHTTP REQ ("+p+") [attempt "+C+"]: "+c+`
`+f+`
`+B})}function l1(o,c,f,p,C,V,B){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+C+"]: "+c+`
`+f+`
`+V+" "+B})}function Qr(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+c1(o,f)+(p?" "+p:"")})}function u1(o,c){o.info(function(){return"TIMEOUT: "+c})}_a.prototype.info=function(){};function c1(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var C=p[1];if(Array.isArray(C)&&!(1>C.length)){var V=C[0];if(V!="noop"&&V!="stop"&&V!="close")for(var B=1;B<C.length;B++)C[B]=""}}}}return ah(f)}catch{return c}}var pl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ch;function yl(){}N(yl,oh),yl.prototype.g=function(){return new XMLHttpRequest},yl.prototype.i=function(){return{}},ch=new yl;function fi(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new ma(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qg}function qg(){this.i=null,this.g="",this.h=!1}var Hg={},hh={};function fh(o,c,f){o.L=1,o.v=Tl(Ln(c)),o.m=f,o.P=!0,Gg(o,null)}function Gg(o,c){o.F=Date.now(),_l(o),o.A=Ln(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),rp(f.i,"t",p),o.C=0,f=o.j.J,o.h=new qg,o.g=Ap(o.j,f?c:null,!o.m),0<o.O&&(o.M=new r1(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(Mg[0]=C.toString()),C=Mg);for(var V=0;V<C.length;V++){var B=_n(f,C[V],p||c.handleEvent,!1,c.h||c);if(!B)break;c.g[B.key]=B}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),pa(),o1(o.i,o.u,o.A,o.l,o.R,o.m)}fi.prototype.ca=function(o){o=o.target;const c=this.M;c&&zn(o)==3?c.j():this.Y(o)},fi.prototype.Y=function(o){try{if(o==this.g)t:{const _e=zn(this.g);var c=this.g.Ba();const $r=this.g.Z();if(!(3>_e)&&(_e!=3||this.g&&(this.h.h||this.g.oa()||hp(this.g)))){this.J||_e!=4||c==7||(c==8||0>=$r?pa(3):pa(2)),dh(this);var f=this.g.Z();this.X=f;e:if(Fg(this)){var p=hp(this.g);o="";var C=p.length,V=zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cr(this),va(this);var B="";break e}this.h.i=new l.TextDecoder}for(c=0;c<C;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(V&&c==C-1)});p.length=0,this.h.g+=o,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,l1(this.i,this.u,this.A,this.l,this.R,_e,f),this.o){if(this.T&&!this.K){e:{if(this.g){var At,le=this.g;if((At=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(At)){var mt=At;break e}}mt=null}if(f=mt)Qr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mh(this,f);else{this.o=!1,this.s=3,Ie(12),cr(this),va(this);break t}}if(this.P){f=!0;let hn;for(;!this.J&&this.C<B.length;)if(hn=h1(this,B),hn==hh){_e==4&&(this.s=4,Ie(14),f=!1),Qr(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==Hg){this.s=4,Ie(15),Qr(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else Qr(this.i,this.l,hn,null),mh(this,hn);if(Fg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||B.length!=0||this.h.h||(this.s=1,Ie(16),f=!1),this.o=this.o&&f,!f)Qr(this.i,this.l,B,"[Invalid Chunked Response]"),cr(this),va(this);else if(0<B.length&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.ba&&!ye.M&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Eh(ye),ye.M=!0,Ie(11))}}else Qr(this.i,this.l,B,null),mh(this,B);_e==4&&cr(this),this.o&&!this.J&&(_e==4?_p(this.j,this):(this.o=!1,_l(this)))}else C1(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,Ie(12)):(this.s=0,Ie(13)),cr(this),va(this)}}}catch{}finally{}};function Fg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function h1(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?hh:(f=Number(c.substring(f,p)),isNaN(f)?Hg:(p+=1,p+f>c.length?hh:(c=c.slice(p,p+f),o.C=p+f,c)))}fi.prototype.cancel=function(){this.J=!0,cr(this)};function _l(o){o.S=Date.now()+o.I,Qg(o,o.I)}function Qg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ya(m(o.ba,o),c)}function dh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}fi.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(u1(this.i,this.A),this.L!=2&&(pa(),Ie(17)),cr(this),this.s=2,va(this)):Qg(this,this.S-o)};function va(o){o.j.G==0||o.J||_p(o.j,o)}function cr(o){dh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,xg(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function mh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||gh(f.h,o))){if(!o.K&&gh(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var C=p;if(C[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Il(f),wl(f);else break t;vh(f),Ie(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ya(m(f.Za,f),6e3));if(1>=$g(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else fr(f,11)}else if((o.K||f.g==o)&&Il(f),!v(c))for(C=f.Da.g.parse(c),c=0;c<C.length;c++){let mt=C[c];if(f.T=mt[0],mt=mt[1],f.G==2)if(mt[0]=="c"){f.K=mt[1],f.ia=mt[2];const ye=mt[3];ye!=null&&(f.la=ye,f.j.info("VER="+f.la));const _e=mt[4];_e!=null&&(f.Aa=_e,f.j.info("SVER="+f.Aa));const $r=mt[5];$r!=null&&typeof $r=="number"&&0<$r&&(p=1.5*$r,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const hn=o.g;if(hn){const Dl=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dl){var V=p.h;V.g||Dl.indexOf("spdy")==-1&&Dl.indexOf("quic")==-1&&Dl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(ph(V,V.h),V.h=null))}if(p.D){const Th=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Th&&(p.ya=Th,Ct(p.I,p.D,Th))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var B=o;if(p.qa=Tp(p,p.J?p.ia:null,p.W),B.K){Xg(p.h,B);var At=B,le=p.L;le&&(At.I=le),At.B&&(dh(At),_l(At)),p.g=B}else pp(p);0<f.i.length&&Rl(f)}else mt[0]!="stop"&&mt[0]!="close"||fr(f,7);else f.G==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?fr(f,7):_h(f):mt[0]!="noop"&&f.l&&f.l.ta(mt),f.v=0)}}pa(4)}catch{}}var f1=class{constructor(o,c){this.g=o,this.map=c}};function Yg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Kg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function $g(o){return o.h?1:o.g?o.g.size:0}function gh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function ph(o,c){o.g?o.g.add(c):o.h=c}function Xg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Yg.prototype.cancel=function(){if(this.i=Zg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Zg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return M(o.i)}function d1(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function m1(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function Jg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=m1(o),p=d1(o),C=p.length,V=0;V<C;V++)c.call(void 0,p[V],f&&f[V],o)}var Wg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function g1(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),C=null;if(0<=p){var V=o[f].substring(0,p);C=o[f].substring(p+1)}else V=o[f];c(V,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function hr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof hr){this.h=o.h,vl(this,o.j),this.o=o.o,this.g=o.g,El(this,o.s),this.l=o.l;var c=o.i,f=new Aa;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),tp(this,f),this.m=o.m}else o&&(c=String(o).match(Wg))?(this.h=!1,vl(this,c[1]||"",!0),this.o=Ea(c[2]||""),this.g=Ea(c[3]||"",!0),El(this,c[4]),this.l=Ea(c[5]||"",!0),tp(this,c[6]||"",!0),this.m=Ea(c[7]||"")):(this.h=!1,this.i=new Aa(null,this.h))}hr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Ta(c,ep,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Ta(c,ep,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Ta(f,f.charAt(0)=="/"?_1:y1,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Ta(f,E1)),o.join("")};function Ln(o){return new hr(o)}function vl(o,c,f){o.j=f?Ea(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function El(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function tp(o,c,f){c instanceof Aa?(o.i=c,T1(o.i,o.h)):(f||(c=Ta(c,v1)),o.i=new Aa(c,o.h))}function Ct(o,c,f){o.i.set(c,f)}function Tl(o){return Ct(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ea(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ta(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,p1),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function p1(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var ep=/[#\/\?@]/g,y1=/[#\?:]/g,_1=/[#\?]/g,v1=/[#\?@]/g,E1=/#/g;function Aa(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function di(o){o.g||(o.g=new Map,o.h=0,o.i&&g1(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=Aa.prototype,e.add=function(o,c){di(this),this.i=null,o=Yr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function np(o,c){di(o),c=Yr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function ip(o,c){return di(o),c=Yr(o,c),o.g.has(c)}e.forEach=function(o,c){di(this),this.g.forEach(function(f,p){f.forEach(function(C){o.call(c,C,p,this)},this)},this)},e.na=function(){di(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const C=o[p];for(let V=0;V<C.length;V++)f.push(c[p])}return f},e.V=function(o){di(this);let c=[];if(typeof o=="string")ip(this,o)&&(c=c.concat(this.g.get(Yr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return di(this),this.i=null,o=Yr(this,o),ip(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function rp(o,c,f){np(o,c),0<f.length&&(o.i=null,o.g.set(Yr(o,c),M(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const V=encodeURIComponent(String(p)),B=this.V(p);for(p=0;p<B.length;p++){var C=V;B[p]!==""&&(C+="="+encodeURIComponent(String(B[p]))),o.push(C)}}return this.i=o.join("&")};function Yr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function T1(o,c){c&&!o.j&&(di(o),o.i=null,o.g.forEach(function(f,p){var C=p.toLowerCase();p!=C&&(np(this,p),rp(this,C,f))},o)),o.j=c}function A1(o,c){const f=new _a;if(l.Image){const p=new Image;p.onload=_(mi,f,"TestLoadImage: loaded",!0,c,p),p.onerror=_(mi,f,"TestLoadImage: error",!1,c,p),p.onabort=_(mi,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=_(mi,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function S1(o,c){const f=new _a,p=new AbortController,C=setTimeout(()=>{p.abort(),mi(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(V=>{clearTimeout(C),V.ok?mi(f,"TestPingServer: ok",!0,c):mi(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(C),mi(f,"TestPingServer: error",!1,c)})}function mi(o,c,f,p,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),p(f)}catch{}}function b1(){this.g=new a1}function w1(o,c,f){const p=f||"";try{Jg(o,function(C,V){let B=C;h(C)&&(B=ah(C)),c.push(p+V+"="+encodeURIComponent(B))})}catch(C){throw c.push(p+"type="+encodeURIComponent("_badmap")),C}}function Al(o){this.l=o.Ub||null,this.j=o.eb||!1}N(Al,oh),Al.prototype.g=function(){return new Sl(this.l,this.j)},Al.prototype.i=function(o){return function(){return o}}({});function Sl(o,c){pe.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Sl,pe),e=Sl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,ba(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sa(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ba(this)),this.g&&(this.readyState=3,ba(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sp(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function sp(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Sa(this):ba(this),this.readyState==3&&sp(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Sa(this))},e.Qa=function(o){this.g&&(this.response=o,Sa(this))},e.ga=function(){this.g&&Sa(this)};function Sa(o){o.readyState=4,o.l=null,o.j=null,o.v=null,ba(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function ba(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ap(o){let c="";return q(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function yh(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=ap(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Ct(o,c,f))}function Lt(o){pe.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Lt,pe);var R1=/^https?$/i,I1=["POST","PUT"];e=Lt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ch.g(),this.v=this.o?kg(this.o):kg(ch),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(V){op(this,V);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var C in p)f.set(C,p[C]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const V of p.keys())f.set(V,p.get(V));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),C=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(I1,c,void 0))||p||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,B]of f)this.g.setRequestHeader(V,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cp(this),this.u=!0,this.g.send(o),this.u=!1}catch(V){op(this,V)}};function op(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,lp(o),bl(o)}function lp(o){o.A||(o.A=!0,Re(o,"complete"),Re(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Re(this,"complete"),Re(this,"abort"),bl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bl(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?up(this):this.bb())},e.bb=function(){up(this)};function up(o){if(o.h&&typeof a<"u"&&(!o.v[1]||zn(o)!=4||o.Z()!=2)){if(o.u&&zn(o)==4)Og(o.Ea,0,o);else if(Re(o,"readystatechange"),zn(o)==4){o.h=!1;try{const B=o.Z();t:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=B===0){var C=String(o.D).match(Wg)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),p=!R1.test(C?C.toLowerCase():"")}f=p}if(f)Re(o,"complete"),Re(o,"success");else{o.m=6;try{var V=2<zn(o)?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.Z()+"]",lp(o)}}finally{bl(o)}}}}function bl(o,c){if(o.g){cp(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||Re(o,"ready");try{f.onreadystatechange=p}catch{}}}function cp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function zn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<zn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),s1(c)}};function hp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function C1(o){const c={};o=(o.g&&2<=zn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(v(o[p]))continue;var f=R(o[p]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=c[C]||[];c[C]=V,V.push(f)}E(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wa(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function fp(o){this.Aa=0,this.i=[],this.j=new _a,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wa("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wa("baseRetryDelayMs",5e3,o),this.cb=wa("retryDelaySeedMs",1e4,o),this.Wa=wa("forwardChannelMaxRetries",2,o),this.wa=wa("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Yg(o&&o.concurrentRequestLimit),this.Da=new b1,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=fp.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){Ie(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=Tp(this,null,this.W),Rl(this)};function _h(o){if(dp(o),o.G==3){var c=o.U++,f=Ln(o.I);if(Ct(f,"SID",o.K),Ct(f,"RID",c),Ct(f,"TYPE","terminate"),Ra(o,f),c=new fi(o,o.j,c),c.L=2,c.v=Tl(Ln(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Ap(c.j,null),c.g.ea(c.v)),c.F=Date.now(),_l(c)}Ep(o)}function wl(o){o.g&&(Eh(o),o.g.cancel(),o.g=null)}function dp(o){wl(o),o.u&&(l.clearTimeout(o.u),o.u=null),Il(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Rl(o){if(!Kg(o.h)&&!o.s){o.s=!0;var c=o.Ga;F||bt(),X||(F(),X=!0),ct.add(c,o),o.B=0}}function D1(o,c){return $g(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ya(m(o.Ga,o,c),vp(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new fi(this,this.j,o);let V=this.o;if(this.S&&(V?(V=y(V),S(V,this.S)):V=this.S),this.m!==null||this.O||(C.H=V,V=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=gp(this,C,c),f=Ln(this.I),Ct(f,"RID",o),Ct(f,"CVER",22),this.D&&Ct(f,"X-HTTP-Session-Id",this.D),Ra(this,f),V&&(this.O?c="headers="+encodeURIComponent(String(ap(V)))+"&"+c:this.m&&yh(f,this.m,V)),ph(this.h,C),this.Ua&&Ct(f,"TYPE","init"),this.P?(Ct(f,"$req",c),Ct(f,"SID","null"),C.T=!0,fh(C,f,null)):fh(C,f,c),this.G=2}}else this.G==3&&(o?mp(this,o):this.i.length==0||Kg(this.h)||mp(this))};function mp(o,c){var f;c?f=c.l:f=o.U++;const p=Ln(o.I);Ct(p,"SID",o.K),Ct(p,"RID",f),Ct(p,"AID",o.T),Ra(o,p),o.m&&o.o&&yh(p,o.m,o.o),f=new fi(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=gp(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),ph(o.h,f),fh(f,p,c)}function Ra(o,c){o.H&&q(o.H,function(f,p){Ct(c,p,f)}),o.l&&Jg({},function(f,p){Ct(c,p,f)})}function gp(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var C=o.i;let V=-1;for(;;){const B=["count="+f];V==-1?0<f?(V=C[0].g,B.push("ofs="+V)):V=0:B.push("ofs="+V);let At=!0;for(let le=0;le<f;le++){let mt=C[le].g;const ye=C[le].map;if(mt-=V,0>mt)V=Math.max(0,C[le].g-100),At=!1;else try{w1(ye,B,"req"+mt+"_")}catch{p&&p(ye)}}if(At){p=B.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function pp(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;F||bt(),X||(F(),X=!0),ct.add(c,o),o.v=0}}function vh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ya(m(o.Fa,o),vp(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,yp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ya(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ie(10),wl(this),yp(this))};function Eh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function yp(o){o.g=new fi(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Ln(o.qa);Ct(c,"RID","rpc"),Ct(c,"SID",o.K),Ct(c,"AID",o.T),Ct(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ct(c,"TO",o.ja),Ct(c,"TYPE","xmlhttp"),Ra(o,c),o.m&&o.o&&yh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Tl(Ln(c)),f.m=null,f.P=!0,Gg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,wl(this),vh(this),Ie(19))};function Il(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function _p(o,c){var f=null;if(o.g==c){Il(o),Eh(o),o.g=null;var p=2}else if(gh(o.h,c))f=c.D,Xg(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var C=o.B;p=gl(),Re(p,new Bg(p,f)),Rl(o)}else pp(o);else if(C=c.s,C==3||C==0&&0<c.X||!(p==1&&D1(o,c)||p==2&&vh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),C){case 1:fr(o,5);break;case 4:fr(o,10);break;case 3:fr(o,6);break;default:fr(o,2)}}}function vp(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function fr(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const C=!p;p=new hr(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||vl(p,"https"),Tl(p),C?A1(p.toString(),f):S1(p.toString(),f)}else Ie(2);o.G=0,o.l&&o.l.sa(c),Ep(o),dp(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))};function Ep(o){if(o.G=0,o.ka=[],o.l){const c=Zg(o.h);(c.length!=0||o.i.length!=0)&&(k(o.ka,c),k(o.ka,o.i),o.h.i.length=0,M(o.i),o.i.length=0),o.l.ra()}}function Tp(o,c,f){var p=f instanceof hr?Ln(f):new hr(f);if(p.g!="")c&&(p.g=c+"."+p.g),El(p,p.s);else{var C=l.location;p=C.protocol,c=c?c+"."+C.hostname:C.hostname,C=+C.port;var V=new hr(null);p&&vl(V,p),c&&(V.g=c),C&&El(V,C),f&&(V.l=f),p=V}return f=o.D,c=o.ya,f&&c&&Ct(p,f,c),Ct(p,"VER",o.la),Ra(o,p),p}function Ap(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Lt(new Al({eb:f})):new Lt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sp(){}e=Sp.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Cl(){}Cl.prototype.g=function(o,c){return new ze(o,c)};function ze(o,c){pe.call(this),this.g=new fp(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Kr(this)}N(ze,pe),ze.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ze.prototype.close=function(){_h(this.g)},ze.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=ah(o),o=f);c.i.push(new f1(c.Ya++,o)),c.G==3&&Rl(c)},ze.prototype.N=function(){this.g.l=null,delete this.j,_h(this.g),delete this.g,ze.aa.N.call(this)};function bp(o){lh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}N(bp,lh);function wp(){uh.call(this),this.status=1}N(wp,uh);function Kr(o){this.g=o}N(Kr,Sp),Kr.prototype.ua=function(){Re(this.g,"a")},Kr.prototype.ta=function(o){Re(this.g,new bp(o))},Kr.prototype.sa=function(o){Re(this.g,new wp)},Kr.prototype.ra=function(){Re(this.g,"b")},Cl.prototype.createWebChannel=Cl.prototype.g,ze.prototype.send=ze.prototype.o,ze.prototype.open=ze.prototype.m,ze.prototype.close=ze.prototype.close,H0=function(){return new Cl},q0=function(){return gl()},j0=ur,gd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pl.NO_ERROR=0,pl.TIMEOUT=8,pl.HTTP_ERROR=6,cu=pl,jg.COMPLETE="complete",B0=jg,Pg.EventType=ga,ga.OPEN="a",ga.CLOSE="b",ga.ERROR="c",ga.MESSAGE="d",pe.prototype.listen=pe.prototype.K,za=Pg,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,z0=Lt}).apply(typeof Fl<"u"?Fl:typeof self<"u"?self:typeof window<"u"?window:{});const u_="@firebase/firestore",c_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ee.UNAUTHENTICATED=new Ee(null),Ee.GOOGLE_CREDENTIALS=new Ee("google-credentials-uid"),Ee.FIRST_PARTY=new Ee("first-party-uid"),Ee.MOCK_USER=new Ee("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aa="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new km("@firebase/firestore");function ns(){return Vr.logLevel}function H(e,...t){if(Vr.logLevel<=ot.DEBUG){const n=t.map(Lm);Vr.debug(`Firestore (${aa}): ${e}`,...n)}}function si(e,...t){if(Vr.logLevel<=ot.ERROR){const n=t.map(Lm);Vr.error(`Firestore (${aa}): ${e}`,...n)}}function Fs(e,...t){if(Vr.logLevel<=ot.WARN){const n=t.map(Lm);Vr.warn(`Firestore (${aa}): ${e}`,...n)}}function Lm(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,G0(e,i,n)}function G0(e,t,n){let i=`FIRESTORE (${aa}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw si(i),new Error(i)}function dt(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||G0(t,r,i)}function et(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends hi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class h2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ee.UNAUTHENTICATED))}shutdown(){}}class f2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class d2{constructor(t){this.t=t,this.currentUser=Ee.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){dt(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wn,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(dt(typeof i.accessToken=="string",31837,{l:i}),new F0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return dt(t===null||typeof t=="string",2055,{h:t}),new Ee(t)}}class m2{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Ee.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class g2{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new m2(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Ee.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class h_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p2{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){dt(this.o===void 0,3512);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new h_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(dt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new h_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=y2(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function lt(e,t){return e<t?-1:e>t?1:0}function pd(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return uf(r)===uf(s)?lt(r,s):uf(r)?1:-1}return lt(e.length,t.length)}const _2=55296,v2=57343;function uf(e){const t=e.charCodeAt(0);return t>=_2&&t<=v2}function Qs(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="__name__";class En{constructor(t,n,i){n===void 0?n=0:n>t.length&&K(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&K(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return En.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof En?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=En.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return lt(t.length,n.length)}static compareSegments(t,n){const i=En.isNumericId(t),r=En.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?En.extractNumericId(t).compare(En.extractNumericId(n)):pd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Fi.fromString(t.substring(4,t.length-2))}}class Tt extends En{construct(t,n,i){return new Tt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new j(x.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Tt(n)}static emptyPath(){return new Tt([])}}const E2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fe extends En{construct(t,n,i){return new fe(t,n,i)}static isValidIdentifier(t){return E2.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===f_}static keyField(){return new fe([f_])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new j(x.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new j(x.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new j(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new j(x.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new fe(n)}static emptyPath(){return new fe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.path=t}static fromPath(t){return new Q(Tt.fromString(t))}static fromName(t){return new Q(Tt.fromString(t).popFirst(5))}static empty(){return new Q(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Tt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Tt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Q(new Tt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(e,t,n){if(!n)throw new j(x.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function T2(e,t,n,i){if(t===!0&&i===!0)throw new j(x.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function d_(e){if(!Q.isDocumentKey(e))throw new j(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function m_(e){if(Q.isDocumentKey(e))throw new j(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Y0(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Pc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":K(12329,{type:typeof e})}function Xe(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new j(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pc(e);throw new j(x.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(e,t){const n={typeString:e};return t&&(n.value=t),n}function tl(e,t){if(!Y0(e))throw new j(x.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new j(x.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=-62135596800,p_=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(t){return Dt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*p_);return new Dt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new j(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<g_)throw new j(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new j(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/p_}_compareTo(t){return this.seconds===t.seconds?lt(this.nanoseconds,t.nanoseconds):lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(tl(t,Dt._jsonSchema))return new Dt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-g_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dt._jsonSchemaVersion="firestore/timestamp/1.0",Dt._jsonSchema={type:Yt("string",Dt._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(t){return new Z(t)}static min(){return new Z(new Dt(0,0))}static max(){return new Z(new Dt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=-1;function A2(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(i===1e9?new Dt(n+1,0):new Dt(n,i));return new Ji(r,Q.empty(),t)}function S2(e){return new Ji(e.readTime,e.key,Io)}class Ji{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Ji(Z.min(),Q.empty(),Io)}static max(){return new Ji(Z.max(),Q.empty(),Io)}}function b2(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Q.comparator(e.documentKey,t.documentKey),n!==0?n:lt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(e){if(e.code!==x.FAILED_PRECONDITION||e.message!==w2)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(r=>r?P.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new P((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new P((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function I2(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function la(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Uc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=-1;function el(e){return e==null}function Ju(e){return e===0&&1/e==-1/0}function C2(e){return typeof e=="number"&&Number.isInteger(e)&&!Ju(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="";function D2(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=y_(t)),t=N2(e.get(n),t);return y_(t)}function N2(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case K0:n+="";break;default:n+=s}}return n}function y_(e){return e+K0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function or(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t,n){this.comparator=t,this.root=n||ce.EMPTY}insert(t,n){return new Ut(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ce.BLACK,null,null))}remove(t){return new Ut(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ce.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ql(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ql(this.root,t,this.comparator,!0)}}class Ql{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ce{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??ce.RED,this.left=r??ce.EMPTY,this.right=s??ce.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new ce(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ce.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ce.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ce.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ce.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw K(27949);return t+(this.isRed()?0:1)}}ce.EMPTY=null,ce.RED=!0,ce.BLACK=!1;ce.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new ce(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t){this.comparator=t,this.data=new Ut(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new v_(this.data.getIterator())}getIteratorFrom(t){return new v_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Jt)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Jt(this.comparator);return n.data=t,n}}class v_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t){this.fields=t,t.sort(fe.comparator)}static empty(){return new Fe([])}unionWith(t){let n=new Jt(fe.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Fe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Qs(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new X0("Invalid base64 string: "+s):s}}(t);return new ge(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new ge(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ge.EMPTY_BYTE_STRING=new ge("");const O2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wi(e){if(dt(!!e,39018),typeof e=="string"){let t=0;const n=O2.exec(e);if(dt(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ht(e.seconds),nanos:Ht(e.nanos)}}function Ht(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function tr(e){return typeof e=="string"?ge.fromBase64String(e):ge.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="server_timestamp",J0="__type__",W0="__previous_value__",tA="__local_write_time__";function jm(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[J0])==null?void 0:i.stringValue)===Z0}function Lc(e){const t=e.mapValue.fields[W0];return jm(t)?Lc(t):t}function Co(e){const t=Wi(e.mapValue.fields[tA].timestampValue);return new Dt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const Wu="(default)";class Do{constructor(t,n){this.projectId=t,this.database=n||Wu}static empty(){return new Do("","")}get isDefaultDatabase(){return this.database===Wu}isEqual(t){return t instanceof Do&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="__type__",M2="__max__",Yl={mapValue:{}},nA="__vector__",tc="value";function er(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?jm(e)?4:k2(e)?9007199254740991:x2(e)?10:11:K(28295,{value:e})}function Mn(e,t){if(e===t)return!0;const n=er(e);if(n!==er(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Co(e).isEqual(Co(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Wi(r.timestampValue),l=Wi(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return tr(r.bytesValue).isEqual(tr(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Ht(r.geoPointValue.latitude)===Ht(s.geoPointValue.latitude)&&Ht(r.geoPointValue.longitude)===Ht(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ht(r.integerValue)===Ht(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Ht(r.doubleValue),l=Ht(s.doubleValue);return a===l?Ju(a)===Ju(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return Qs(e.arrayValue.values||[],t.arrayValue.values||[],Mn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(__(a)!==__(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Mn(a[u],l[u])))return!1;return!0}(e,t);default:return K(52216,{left:e})}}function No(e,t){return(e.values||[]).find(n=>Mn(n,t))!==void 0}function Ys(e,t){if(e===t)return 0;const n=er(e),i=er(t);if(n!==i)return lt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=Ht(s.integerValue||s.doubleValue),u=Ht(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return E_(e.timestampValue,t.timestampValue);case 4:return E_(Co(e),Co(t));case 5:return pd(e.stringValue,t.stringValue);case 6:return function(s,a){const l=tr(s),u=tr(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=lt(l[h],u[h]);if(d!==0)return d}return lt(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=lt(Ht(s.latitude),Ht(a.latitude));return l!==0?l:lt(Ht(s.longitude),Ht(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return T_(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,_,N,M;const l=s.fields||{},u=a.fields||{},h=(m=l[tc])==null?void 0:m.arrayValue,d=(_=u[tc])==null?void 0:_.arrayValue,g=lt(((N=h==null?void 0:h.values)==null?void 0:N.length)||0,((M=d==null?void 0:d.values)==null?void 0:M.length)||0);return g!==0?g:T_(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===Yl.mapValue&&a===Yl.mapValue)return 0;if(s===Yl.mapValue)return 1;if(a===Yl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=pd(u[g],d[g]);if(m!==0)return m;const _=Ys(l[u[g]],h[d[g]]);if(_!==0)return _}return lt(u.length,d.length)}(e.mapValue,t.mapValue);default:throw K(23264,{he:n})}}function E_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return lt(e,t);const n=Wi(e),i=Wi(t),r=lt(n.seconds,i.seconds);return r!==0?r:lt(n.nanos,i.nanos)}function T_(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Ys(n[r],i[r]);if(s)return s}return lt(n.length,i.length)}function Ks(e){return yd(e)}function yd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Wi(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return tr(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Q.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=yd(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${yd(n.fields[a])}`;return r+"}"}(e.mapValue):K(61005,{value:e})}function hu(e){switch(er(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Lc(e);return t?16+hu(t):16;case 5:return 2*e.stringValue.length;case 6:return tr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+hu(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return or(i.fields,(s,a)=>{r+=s.length+hu(a)}),r}(e.mapValue);default:throw K(13486,{value:e})}}function A_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function _d(e){return!!e&&"integerValue"in e}function qm(e){return!!e&&"arrayValue"in e}function S_(e){return!!e&&"nullValue"in e}function b_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function fu(e){return!!e&&"mapValue"in e}function x2(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[eA])==null?void 0:i.stringValue)===nA}function so(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return or(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=so(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=so(e.arrayValue.values[n]);return t}return{...e}}function k2(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===M2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t){this.value=t}static empty(){return new De({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!fu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=so(n)}setAll(t){let n=fe.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=so(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());fu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Mn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];fu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){or(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new De(so(this.value))}}function iA(e){const t=[];return or(e.fields,(n,i)=>{const r=new fe([n]);if(fu(i)){const s=iA(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new Fe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new re(t,0,Z.min(),Z.min(),Z.min(),De.empty(),0)}static newFoundDocument(t,n,i,r){return new re(t,1,n,Z.min(),i,r,0)}static newNoDocument(t,n){return new re(t,2,n,Z.min(),Z.min(),De.empty(),0)}static newUnknownDocument(t,n){return new re(t,3,n,Z.min(),Z.min(),De.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=De.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=De.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof re&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new re(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t,n){this.position=t,this.inclusive=n}}function w_(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=Q.comparator(Q.fromName(a.referenceValue),n.key):i=Ys(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function R_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Mn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t,n="asc"){this.field=t,this.dir=n}}function P2(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{}class Qt extends rA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new L2(t,n,i):n==="array-contains"?new j2(t,i):n==="in"?new q2(t,i):n==="not-in"?new H2(t,i):n==="array-contains-any"?new G2(t,i):new Qt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new z2(t,i):new B2(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ys(n,this.value)):n!==null&&er(this.value)===er(n)&&this.matchesComparison(Ys(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pn extends rA{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new pn(t,n)}matches(t){return sA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sA(e){return e.op==="and"}function aA(e){return U2(e)&&sA(e)}function U2(e){for(const t of e.filters)if(t instanceof pn)return!1;return!0}function vd(e){if(e instanceof Qt)return e.field.canonicalString()+e.op.toString()+Ks(e.value);if(aA(e))return e.filters.map(t=>vd(t)).join(",");{const t=e.filters.map(n=>vd(n)).join(",");return`${e.op}(${t})`}}function oA(e,t){return e instanceof Qt?function(i,r){return r instanceof Qt&&i.op===r.op&&i.field.isEqual(r.field)&&Mn(i.value,r.value)}(e,t):e instanceof pn?function(i,r){return r instanceof pn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&oA(a,r.filters[l]),!0):!1}(e,t):void K(19439)}function lA(e){return e instanceof Qt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ks(n.value)}`}(e):e instanceof pn?function(n){return n.op.toString()+" {"+n.getFilters().map(lA).join(" ,")+"}"}(e):"Filter"}class L2 extends Qt{constructor(t,n,i){super(t,n,i),this.key=Q.fromName(i.referenceValue)}matches(t){const n=Q.comparator(t.key,this.key);return this.matchesComparison(n)}}class z2 extends Qt{constructor(t,n){super(t,"in",n),this.keys=uA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class B2 extends Qt{constructor(t,n){super(t,"not-in",n),this.keys=uA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function uA(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class j2 extends Qt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return qm(n)&&No(n.arrayValue,this.value)}}class q2 extends Qt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&No(this.value.arrayValue,n)}}class H2 extends Qt{constructor(t,n){super(t,"not-in",n)}matches(t){if(No(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!No(this.value.arrayValue,n)}}class G2 extends Qt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>No(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function I_(e,t=null,n=[],i=[],r=null,s=null,a=null){return new F2(e,t,n,i,r,s,a)}function Hm(e){const t=et(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>vd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),el(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Ks(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Ks(i)).join(",")),t.Te=n}return t.Te}function Gm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!P2(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!oA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!R_(e.startAt,t.startAt)&&R_(e.endAt,t.endAt)}function Ed(e){return Q.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Q2(e,t,n,i,r,s,a,l){return new ua(e,t,n,i,r,s,a,l)}function zc(e){return new ua(e)}function C_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function cA(e){return e.collectionGroup!==null}function ao(e){const t=et(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Jt(fe.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Oo(s,i))}),n.has(fe.keyField().canonicalString())||t.Ie.push(new Oo(fe.keyField(),i))}return t.Ie}function In(e){const t=et(e);return t.Ee||(t.Ee=Y2(t,ao(e))),t.Ee}function Y2(e,t){if(e.limitType==="F")return I_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Oo(r.field,s)});const n=e.endAt?new ec(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ec(e.startAt.position,e.startAt.inclusive):null;return I_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Td(e,t){const n=e.filters.concat([t]);return new ua(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ad(e,t,n){return new ua(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Bc(e,t){return Gm(In(e),In(t))&&e.limitType===t.limitType}function hA(e){return`${Hm(In(e))}|lt:${e.limitType}`}function is(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>lA(r)).join(", ")}]`),el(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ks(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ks(r)).join(",")),`Target(${i})`}(In(e))}; limitType=${e.limitType})`}function jc(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of ao(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=w_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,ao(i),r)||i.endAt&&!function(a,l,u){const h=w_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,ao(i),r))}(e,t)}function K2(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fA(e){return(t,n)=>{let i=!1;for(const r of ao(e)){const s=$2(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function $2(e,t,n){const i=e.field.isKeyField()?Q.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ys(u,h):K(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return K(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){or(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return $0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=new Ut(Q.comparator);function ai(){return X2}const dA=new Ut(Q.comparator);function Ba(...e){let t=dA;for(const n of e)t=t.insert(n.key,n);return t}function mA(e){let t=dA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function _r(){return oo()}function gA(){return oo()}function oo(){return new zr(e=>e.toString(),(e,t)=>e.isEqual(t))}const Z2=new Ut(Q.comparator),J2=new Jt(Q.comparator);function ut(...e){let t=J2;for(const n of e)t=t.add(n);return t}const W2=new Jt(lt);function tC(){return W2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(t)?"-0":t}}function pA(e){return{integerValue:""+e}}function eC(e,t){return C2(t)?pA(t):Fm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this._=void 0}}function nC(e,t,n){return e instanceof Vo?function(r,s){const a={fields:{[J0]:{stringValue:Z0},[tA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&jm(s)&&(s=Lc(s)),s&&(a.fields[W0]=s),{mapValue:a}}(n,t):e instanceof Mo?_A(e,t):e instanceof xo?vA(e,t):function(r,s){const a=yA(r,s),l=D_(a)+D_(r.Ae);return _d(a)&&_d(r.Ae)?pA(l):Fm(r.serializer,l)}(e,t)}function iC(e,t,n){return e instanceof Mo?_A(e,t):e instanceof xo?vA(e,t):n}function yA(e,t){return e instanceof nc?function(i){return _d(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class Vo extends qc{}class Mo extends qc{constructor(t){super(),this.elements=t}}function _A(e,t){const n=EA(t);for(const i of e.elements)n.some(r=>Mn(r,i))||n.push(i);return{arrayValue:{values:n}}}class xo extends qc{constructor(t){super(),this.elements=t}}function vA(e,t){let n=EA(t);for(const i of e.elements)n=n.filter(r=>!Mn(r,i));return{arrayValue:{values:n}}}class nc extends qc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function D_(e){return Ht(e.integerValue||e.doubleValue)}function EA(e){return qm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(t,n){this.field=t,this.transform=n}}function sC(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Mo&&r instanceof Mo||i instanceof xo&&r instanceof xo?Qs(i.elements,r.elements,Mn):i instanceof nc&&r instanceof nc?Mn(i.Ae,r.Ae):i instanceof Vo&&r instanceof Vo}(e.transform,t.transform)}class aC{constructor(t,n){this.version=t,this.transformResults=n}}class de{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new de}static exists(t){return new de(void 0,t)}static updateTime(t){return new de(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function du(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Hc{}function TA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Gc(e.key,de.none()):new nl(e.key,e.data,de.none());{const n=e.data,i=De.empty();let r=new Jt(fe.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new lr(e.key,i,new Fe(r.toArray()),de.none())}}function oC(e,t,n){e instanceof nl?function(r,s,a){const l=r.value.clone(),u=O_(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof lr?function(r,s,a){if(!du(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=O_(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(AA(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function lo(e,t,n,i){return e instanceof nl?function(s,a,l,u){if(!du(s.precondition,a))return l;const h=s.value.clone(),d=V_(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof lr?function(s,a,l,u){if(!du(s.precondition,a))return l;const h=V_(s.fieldTransforms,u,a),d=a.data;return d.setAll(AA(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(s,a,l){return du(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function lC(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=yA(i.transform,r||null);s!=null&&(n===null&&(n=De.empty()),n.set(i.field,s))}return n||null}function N_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Qs(i,r,(s,a)=>sC(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class nl extends Hc{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class lr extends Hc{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function AA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function O_(e,t,n){const i=new Map;dt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,iC(a,l,n[r]))}return i}function V_(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,nC(s,a,t))}return i}class Gc extends Hc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SA extends Hc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&oC(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=lo(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=lo(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=gA();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=TA(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ut())}isEqual(t){return this.batchId===t.batchId&&Qs(this.mutations,t.mutations,(n,i)=>N_(n,i))&&Qs(this.baseMutations,t.baseMutations,(n,i)=>N_(n,i))}}class Qm{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){dt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return Z2}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Qm(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,ht;function bA(e){switch(e){case x.OK:return K(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return K(15467,{code:e})}}function wA(e){if(e===void 0)return si("GRPC error has no .code"),x.UNKNOWN;switch(e){case Gt.OK:return x.OK;case Gt.CANCELLED:return x.CANCELLED;case Gt.UNKNOWN:return x.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return x.INTERNAL;case Gt.UNAVAILABLE:return x.UNAVAILABLE;case Gt.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Gt.NOT_FOUND:return x.NOT_FOUND;case Gt.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Gt.ABORTED:return x.ABORTED;case Gt.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Gt.DATA_LOSS:return x.DATA_LOSS;default:return K(39323,{code:e})}}(ht=Gt||(Gt={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=new Fi([4294967295,4294967295],0);function M_(e){const t=fC().encode(e),n=new L0;return n.update(t),new Uint8Array(n.digest())}function x_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Fi([n,i],0),new Fi([r,s],0)]}class Ym{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ja(`Invalid padding: ${n}`);if(i<0)throw new ja(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new ja(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new ja(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Fi.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(Fi.fromNumber(i)));return r.compare(dC)===1&&(r=new Fi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=M_(t),[i,r]=x_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new Ym(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=M_(t),[i,r]=x_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,il.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Fc(Z.min(),r,new Ut(lt),ai(),ut())}}class il{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new il(i,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class RA{constructor(t,n){this.targetId=t,this.Ce=n}}class IA{constructor(t,n,i=ge.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class k_{constructor(){this.ve=0,this.Fe=P_(),this.Me=ge.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ut(),n=ut(),i=ut();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:K(38017,{changeType:s})}}),new il(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=P_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mC{constructor(t){this.Ge=t,this.ze=new Map,this.je=ai(),this.Je=Kl(),this.He=Kl(),this.Ye=new Ut(lt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:K(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(Ed(s))if(i===0){const a=new Q(s.path);this.et(n,a,re.newNoDocument(a,Z.min()))}else dt(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=tr(i).toUint8Array()}catch(u){if(u instanceof X0)return Fs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Ym(a,r,s)}catch(u){return Fs(u instanceof ja?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&Ed(l.target)){const u=new Q(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,re.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ut();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new Fc(t,n,this.Ye,this.je,i);return this.je=ai(),this.Je=Kl(),this.He=Kl(),this.Ye=new Ut(lt),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new k_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Jt(lt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Jt(lt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new k_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Kl(){return new Ut(Q.comparator)}function P_(){return new Ut(Q.comparator)}const gC={asc:"ASCENDING",desc:"DESCENDING"},pC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yC={and:"AND",or:"OR"};class _C{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Sd(e,t){return e.useProto3Json||el(t)?t:{value:t}}function ic(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function CA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function vC(e,t){return ic(e,t.toTimestamp())}function Ze(e){return dt(!!e,49232),Z.fromTimestamp(function(n){const i=Wi(n);return new Dt(i.seconds,i.nanos)}(e))}function Km(e,t){return bd(e,t).canonicalString()}function bd(e,t){const n=function(r){return new Tt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function DA(e){const t=Tt.fromString(e);return dt(kA(t),10190,{key:t.toString()}),t}function rc(e,t){return Km(e.databaseId,t.path)}function uo(e,t){const n=DA(t);if(n.get(1)!==e.databaseId.projectId)throw new j(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new j(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Q(OA(n))}function NA(e,t){return Km(e.databaseId,t)}function EC(e){const t=DA(e);return t.length===4?Tt.emptyPath():OA(t)}function wd(e){return new Tt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function OA(e){return dt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function U_(e,t,n){return{name:rc(e,t),fields:n.value.mapValue.fields}}function TC(e,t){return"found"in t?function(i,r){dt(!!r.found,43571),r.found.name,r.found.updateTime;const s=uo(i,r.found.name),a=Ze(r.found.updateTime),l=r.found.createTime?Ze(r.found.createTime):Z.min(),u=new De({mapValue:{fields:r.found.fields}});return re.newFoundDocument(s,a,l,u)}(e,t):"missing"in t?function(i,r){dt(!!r.missing,3894),dt(!!r.readTime,22933);const s=uo(i,r.missing),a=Ze(r.readTime);return re.newNoDocument(s,a)}(e,t):K(7234,{result:t})}function AC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:K(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(dt(d===void 0||typeof d=="string",58123),ge.fromBase64String(d||"")):(dt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ge.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?x.UNKNOWN:wA(h.code);return new j(d,h.message||"")}(a);n=new IA(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=uo(e,i.document.name),s=Ze(i.document.updateTime),a=i.document.createTime?Ze(i.document.createTime):Z.min(),l=new De({mapValue:{fields:i.document.fields}}),u=re.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new mu(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=uo(e,i.document),s=i.readTime?Ze(i.readTime):Z.min(),a=re.newNoDocument(r,s),l=i.removedTargetIds||[];n=new mu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=uo(e,i.document),s=i.removedTargetIds||[];n=new mu([],s,r,null)}else{if(!("filter"in t))return K(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new hC(r,s),l=i.targetId;n=new RA(l,a)}}return n}function VA(e,t){let n;if(t instanceof nl)n={update:U_(e,t.key,t.value)};else if(t instanceof Gc)n={delete:rc(e,t.key)};else if(t instanceof lr)n={update:U_(e,t.key,t.data),updateMask:OC(t.fieldMask)};else{if(!(t instanceof SA))return K(16599,{Vt:t.type});n={verify:rc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Vo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Mo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof xo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof nc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw K(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:vC(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K(27497)}(e,t.precondition)),n}function SC(e,t){return e&&e.length>0?(dt(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?Ze(r.updateTime):Ze(s);return a.isEqual(Z.min())&&(a=Ze(s)),new aC(a,r.transformResults||[])}(n,t))):[]}function bC(e,t){return{documents:[NA(e,t.path)]}}function wC(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=NA(e,r);const s=function(h){if(h.length!==0)return xA(pn.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:rs(m.field),direction:CC(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Sd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function RC(e){let t=EC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){dt(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(g){const m=MA(g);return m instanceof pn&&aA(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(N){return new Oo(ss(N.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,el(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,_=g.values||[];return new ec(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,_=g.values||[];return new ec(_,m)}(n.endAt)),Q2(t,r,a,s,l,"F",u,h)}function IC(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function MA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ss(n.unaryFilter.field);return Qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ss(n.unaryFilter.field);return Qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ss(n.unaryFilter.field);return Qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ss(n.unaryFilter.field);return Qt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(e):e.fieldFilter!==void 0?function(n){return Qt.create(ss(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return pn.create(n.compositeFilter.filters.map(i=>MA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(e):K(30097,{filter:e})}function CC(e){return gC[e]}function DC(e){return pC[e]}function NC(e){return yC[e]}function rs(e){return{fieldPath:e.canonicalString()}}function ss(e){return fe.fromServerFormat(e.fieldPath)}function xA(e){return e instanceof Qt?function(n){if(n.op==="=="){if(b_(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NAN"}};if(S_(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(b_(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NOT_NAN"}};if(S_(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rs(n.field),op:DC(n.op),value:n.value}}}(e):e instanceof pn?function(n){const i=n.getFilters().map(r=>xA(r));return i.length===1?i[0]:{compositeFilter:{op:NC(n.op),filters:i}}}(e):K(54877,{filter:e})}function OC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function kA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(t,n,i,r,s=Z.min(),a=Z.min(),l=ge.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Mi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(t){this.yt=t}}function MC(e){const t=RC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Ad(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.Cn=new kC}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(Ji.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(Ji.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class kC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new Jt(Tt.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Jt(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PA=41943040;class Pe{static withCacheSize(t){return new Pe(t,Pe.DEFAULT_COLLECTION_PERCENTILE,Pe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pe.DEFAULT_COLLECTION_PERCENTILE=10,Pe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pe.DEFAULT=new Pe(PA,Pe.DEFAULT_COLLECTION_PERCENTILE,Pe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pe.DISABLED=new Pe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new $s(0)}static cr(){return new $s(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="LruGarbageCollector",PC=1048576;function B_([e,t],[n,i]){const r=lt(e,n);return r===0?lt(t,i):r}class UC{constructor(t){this.Ir=t,this.buffer=new Jt(B_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();B_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(z_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){la(n)?H(z_,"Ignoring IndexedDB error during garbage collection: ",n):await oa(n)}await this.Vr(3e5)})}}class zC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(Uc.ce);const i=new UC(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(L_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),L_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(t,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),ns()<=ot.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function BC(e,t){return new zC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.changes=new zr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,re.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&lo(i.mutation,r,Fe.empty(),Dt.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ut()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ut()){const r=_r();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=Ba();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=_r();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ut()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=ai();const a=oo(),l=function(){return oo()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof lr)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),lo(d.mutation,h,d.mutation.getFieldMask(),Dt.now())):a.set(h.key,Fe.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new qC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=oo();let r=new Ut((a,l)=>a-l),s=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||Fe.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(r.get(l.batchId)||ut()).add(u);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=gA();d.forEach(m=>{if(!s.has(m)){const _=TA(n.get(m),i.get(m));_!==null&&g.set(m,_),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):cA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):P.resolve(_r());let l=Io,u=s;return a.next(h=>P.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,ut())).next(d=>({batchId:l,changes:mA(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Q(n)).next(i=>{let r=Ba();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=Ba();return this.indexManager.getCollectionParents(t,s).next(l=>P.forEach(l,u=>{const h=function(g,m){return new ua(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,re.newInvalidDocument(d)))});let l=Ba();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&lo(d.mutation,h,Fe.empty(),Dt.now()),jc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ze(r.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:MC(r.bundledQuery),readTime:Ze(r.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.overlays=new Ut(Q.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=_r();return P.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const r=_r(),s=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return P.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Ut((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=_r(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=_r(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return P.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new cC(n,i));let s=this.qr.get(n);s===void 0&&(s=ut(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.sessionToken=ge.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.Qr=new Jt(ee.$r),this.Ur=new Jt(ee.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new ee(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new ee(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new Q(new Tt([])),i=new ee(n,t),r=new ee(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Q(new Tt([])),i=new ee(n,t),r=new ee(n,t+1);let s=ut();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new ee(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class ee{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Q.comparator(t.key,n.key)||lt(t.Yr,n.Yr)}static Kr(t,n){return lt(t.Yr,n.Yr)||Q.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(ee.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new uC(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new ee(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?Bm:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new ee(n,0),r=new ee(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Jt(lt);return n.forEach(r=>{const s=new ee(r,0),a=new ee(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;Q.isDocumentKey(s)||(s=s.child(""));const a=new ee(new Q(s),0);let l=new Jt(lt);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){dt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,r=>{const s=new ee(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new ee(n,0),r=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(t){this.ri=t,this.docs=function(){return new Ut(Q.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():re.newInvalidDocument(n))}getEntries(t,n){let i=ai();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():re.newInvalidDocument(r))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=ai();const a=n.path,l=new Q(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||b2(S2(d),i)<=0||(r.has(d.key)||jc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(t,n,i,r){K(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new $C(this)}getSize(t){return P.resolve(this.size)}}class $C extends jC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(t){this.persistence=t,this.si=new zr(n=>Hm(n),Gm),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new $m,this.targetCount=0,this.ai=$s.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new $s(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),P.waitFor(s).next(()=>r)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(t,n){this.ui={},this.overlays={},this.ci=new Uc(0),this.li=!1,this.li=!0,this.hi=new QC,this.referenceDelegate=t(this),this.Pi=new XC(this),this.indexManager=new xC,this.remoteDocumentCache=function(r){return new KC(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new VC(n),this.Ii=new GC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new FC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new YC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){H("MemoryPersistence","Starting transaction:",t);const r=new ZC(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class ZC extends R2{constructor(t){super(),this.currentSequenceNumber=t}}class Xm{constructor(t){this.persistence=t,this.Ri=new $m,this.Vi=null}static mi(t){return new Xm(t)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const r=Q.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,Z.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class sc{constructor(t,n){this.persistence=t,this.pi=new zr(i=>D2(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=BC(this,n)}static mi(t,n){return new sc(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?P.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,Z.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=hu(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return P.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=ut(),r=ut();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Zm(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return FR()?8:I2(Se())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new JC;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(ns()<=ot.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(ns()<=ot.DEBUG&&H("QueryEngine","Query:",is(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(ns()<=ot.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,In(n))):P.resolve())}ys(t,n){if(C_(n))return P.resolve(null);let i=In(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Ad(n,null,"F"),i=In(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=ut(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,Ad(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return C_(n)||r.isEqual(Z.min())?P.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?P.resolve(null):(ns()<=ot.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),is(n)),this.vs(t,a,n,A2(r,Io)).next(l=>l))})}Ds(t,n){let i=new Jt(fA(t));return n.forEach((r,s)=>{jc(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return ns()<=ot.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",is(n)),this.ps.getDocumentsMatchingQuery(t,n,Ji.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="LocalStore",tD=3e8;class eD{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Ut(lt),this.xs=new zr(s=>Hm(s),Gm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new HC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function nD(e,t,n,i){return new eD(e,t,n,i)}async function LA(e,t){const n=et(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=ut();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function iD(e,t){const n=et(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let _=P.resolve();return m.forEach(N=>{_=_.next(()=>d.getEntry(u,N)).next(M=>{const k=h.docVersions.get(N);dt(k!==null,48541),M.version.compareTo(k)<0&&(g.applyToRemoteDocument(M,h),M.isValidDocument()&&(M.setReadTime(h.commitVersion),d.addEntry(M)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ut();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function zA(e){const t=et(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function rD(e,t){const n=et(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=r.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,g)));let _=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(ge.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(g,_),function(M,k,A){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=tD?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(s,_))});let u=ai(),h=ut();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(sD(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual(Z.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(g=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function sD(e,t,n){let i=ut(),r=ut();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=ai();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(Jm,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function aD(e,t){const n=et(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Bm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function oD(e,t){const n=et(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,P.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Mi(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Rd(e,t,n){const i=et(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!la(a))throw a;H(Jm,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function j_(e,t,n){const i=et(e);let r=Z.min(),s=ut();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=et(u),m=g.xs.get(d);return m!==void 0?P.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,In(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:Z.min(),n?s:ut())).next(l=>(lD(i,K2(t),l),{documents:l,Qs:s})))}function lD(e,t,n){let i=e.Os.get(t)||Z.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class q_{constructor(){this.activeTargetIds=tC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class uD{constructor(){this.Mo=new q_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new q_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="ConnectivityMonitor";class G_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(H_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H(H_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l=null;function Id(){return $l===null?$l=function(){return 268435456+Math.round(2147483648*Math.random())}():$l++,"0x"+$l.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="RestConnection",hD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fD{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Wu?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=Id(),l=this.zo(t,n.toUriEncodedString());H(cf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=ra(h);return this.Jo(t,l,u,i,d).then(g=>(H(cf,`Received RPC '${t}' ${a}: `,g),g),g=>{throw Fs(cf,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+aa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=hD[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve="WebChannelConnection";class mD extends fD{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=Id();return new Promise((l,u)=>{const h=new z0;h.setWithCredentials(!0),h.listenOnce(B0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case cu.NO_ERROR:const g=h.getResponseJson();H(ve,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case cu.TIMEOUT:H(ve,`RPC '${t}' ${a} timed out`),u(new j(x.DEADLINE_EXCEEDED,"Request time out"));break;case cu.HTTP_ERROR:const m=h.getStatus();if(H(ve,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const N=_==null?void 0:_.error;if(N&&N.status&&N.message){const M=function(A){const v=A.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(v)>=0?v:x.UNKNOWN}(N.status);u(new j(M,N.message))}else u(new j(x.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new j(x.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(ve,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);H(ve,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=Id(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=H0(),l=q0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");H(ve,`Creating RPC '${t}' stream ${r}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,_=!1;const N=new dD({Yo:k=>{_?H(ve,`Not sending because RPC '${t}' stream ${r} is closed:`,k):(m||(H(ve,`Opening RPC '${t}' stream ${r} transport.`),g.open(),m=!0),H(ve,`RPC '${t}' stream ${r} sending:`,k),g.send(k))},Zo:()=>g.close()}),M=(k,A,v)=>{k.listen(A,w=>{try{v(w)}catch(D){setTimeout(()=>{throw D},0)}})};return M(g,za.EventType.OPEN,()=>{_||(H(ve,`RPC '${t}' stream ${r} transport opened.`),N.o_())}),M(g,za.EventType.CLOSE,()=>{_||(_=!0,H(ve,`RPC '${t}' stream ${r} transport closed`),N.a_(),this.E_(g))}),M(g,za.EventType.ERROR,k=>{_||(_=!0,Fs(ve,`RPC '${t}' stream ${r} transport errored. Name:`,k.name,"Message:",k.message),N.a_(new j(x.UNAVAILABLE,"The operation could not be completed")))}),M(g,za.EventType.MESSAGE,k=>{var A;if(!_){const v=k.data[0];dt(!!v,16349);const w=v,D=(w==null?void 0:w.error)||((A=w[0])==null?void 0:A.error);if(D){H(ve,`RPC '${t}' stream ${r} received error:`,D);const L=D.status;let q=function(T){const S=Gt[T];if(S!==void 0)return wA(S)}(L),E=D.message;q===void 0&&(q=x.INTERNAL,E="Unknown error status: "+L+" with message "+D.message),_=!0,N.a_(new j(q,E)),g.close()}else H(ve,`RPC '${t}' stream ${r} received:`,v),N.u_(v)}}),M(l,j0.STAT_EVENT,k=>{k.stat===gd.PROXY?H(ve,`RPC '${t}' stream ${r} detected buffering proxy`):k.stat===gd.NOPROXY&&H(ve,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function hf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(e){return new _C(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="PersistentStream";class BA{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wm(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(si(n.toString()),si("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new j(x.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return H(F_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(H(F_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gD extends BA{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=AC(this.serializer,t),i=function(s){if(!("targetChange"in s))return Z.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?Ze(a.readTime):Z.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=wd(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Ed(u)?{documents:bC(s,u)}:{query:wC(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=CA(s,a.resumeToken);const h=Sd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Z.min())>0){l.readTime=ic(s,a.snapshotVersion.toTimestamp());const h=Sd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=IC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=wd(this.serializer),n.removeTarget=t,this.q_(n)}}class pD extends BA{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return dt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,dt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){dt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=SC(t.writeResults,t.commitTime),i=Ze(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=wd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>VA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{}class _D extends yD{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new j(x.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,bd(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(x.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,bd(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new j(x.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class vD{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(si(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="RemoteStore";class ED{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Br(this)&&(H(Mr,"Restarting streams for network reachability change."),await async function(u){const h=et(u);h.Ea.add(4),await rl(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Yc(h)}(this))})}),this.Ra=new vD(i,r)}}async function Yc(e){if(Br(e))for(const t of e.da)await t(!0)}async function rl(e){for(const t of e.da)await t(!1)}function jA(e,t){const n=et(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),ig(n)?ng(n):ca(n).O_()&&eg(n,t))}function tg(e,t){const n=et(e),i=ca(n);n.Ia.delete(t),i.O_()&&qA(n,t),n.Ia.size===0&&(i.O_()?i.L_():Br(n)&&n.Ra.set("Unknown"))}function eg(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Z.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ca(e).Y_(t)}function qA(e,t){e.Va.Ue(t),ca(e).Z_(t)}function ng(e){e.Va=new mC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),ca(e).start(),e.Ra.ua()}function ig(e){return Br(e)&&!ca(e).x_()&&e.Ia.size>0}function Br(e){return et(e).Ea.size===0}function HA(e){e.Va=void 0}async function TD(e){e.Ra.set("Online")}async function AD(e){e.Ia.forEach((t,n)=>{eg(e,t)})}async function SD(e,t){HA(e),ig(e)?(e.Ra.ha(t),ng(e)):e.Ra.set("Unknown")}async function bD(e,t,n){if(e.Ra.set("Online"),t instanceof IA&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){H(Mr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await ac(e,i)}else if(t instanceof mu?e.Va.Ze(t):t instanceof RA?e.Va.st(t):e.Va.tt(t),!n.isEqual(Z.min()))try{const i=await zA(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(ge.EMPTY_BYTE_STRING,d.snapshotVersion)),qA(s,u);const g=new Mi(d.target,u,h,d.sequenceNumber);eg(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){H(Mr,"Failed to raise snapshot:",i),await ac(e,i)}}async function ac(e,t,n){if(!la(t))throw t;e.Ea.add(1),await rl(e),e.Ra.set("Offline"),n||(n=()=>zA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{H(Mr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Yc(e)})}function GA(e,t){return t().catch(n=>ac(e,n,t))}async function Kc(e){const t=et(e),n=nr(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Bm;for(;wD(t);)try{const r=await aD(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,RD(t,r)}catch(r){await ac(t,r)}FA(t)&&QA(t)}function wD(e){return Br(e)&&e.Ta.length<10}function RD(e,t){e.Ta.push(t);const n=nr(e);n.O_()&&n.X_&&n.ea(t.mutations)}function FA(e){return Br(e)&&!nr(e).x_()&&e.Ta.length>0}function QA(e){nr(e).start()}async function ID(e){nr(e).ra()}async function CD(e){const t=nr(e);for(const n of e.Ta)t.ea(n.mutations)}async function DD(e,t,n){const i=e.Ta.shift(),r=Qm.from(i,t,n);await GA(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Kc(e)}async function ND(e,t){t&&nr(e).X_&&await async function(i,r){if(function(a){return bA(a)&&a!==x.ABORTED}(r.code)){const s=i.Ta.shift();nr(i).B_(),await GA(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Kc(i)}}(e,t),FA(e)&&QA(e)}async function Q_(e,t){const n=et(e);n.asyncQueue.verifyOperationInProgress(),H(Mr,"RemoteStore received new credentials");const i=Br(n);n.Ea.add(3),await rl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Yc(n)}async function OD(e,t){const n=et(e);t?(n.Ea.delete(2),await Yc(n)):t||(n.Ea.add(2),await rl(n),n.Ra.set("Unknown"))}function ca(e){return e.ma||(e.ma=function(n,i,r){const s=et(n);return s.sa(),new gD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:TD.bind(null,e),t_:AD.bind(null,e),r_:SD.bind(null,e),H_:bD.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),ig(e)?ng(e):e.Ra.set("Unknown")):(await e.ma.stop(),HA(e))})),e.ma}function nr(e){return e.fa||(e.fa=function(n,i,r){const s=et(n);return s.sa(),new pD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:ID.bind(null,e),r_:ND.bind(null,e),ta:CD.bind(null,e),na:DD.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Kc(e)):(await e.fa.stop(),e.Ta.length>0&&(H(Mr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new rg(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(x.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(e,t){if(si("AsyncQueue",`${t}: ${e}`),la(e))return new j(x.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{static emptySet(t){return new Cs(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=Ba(),this.sortedSet=new Ut(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Cs)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Cs;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(){this.ga=new Ut(Q.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):K(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class Xs{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Xs(t,n,Cs.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class MD{constructor(){this.queries=K_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=et(n),s=r.queries;r.queries=K_(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new j(x.ABORTED,"Firestore shutting down"))}}function K_(){return new zr(e=>hA(e),Bc)}async function YA(e,t){const n=et(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new VD,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=sg(a,`Initialization of query '${is(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&ag(n)}async function KA(e,t){const n=et(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function xD(e,t){const n=et(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&ag(n)}function kD(e,t,n){const i=et(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function ag(e){e.Ca.forEach(t=>{t.next()})}var Cd,$_;($_=Cd||(Cd={})).Ma="default",$_.Cache="cache";class $A{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Xs(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Xs.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Cd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(t){this.key=t}}class ZA{constructor(t){this.key=t}}class PD{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=fA(t),this.tu=new Cs(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new Y_,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,g)=>{const m=r.get(d),_=jc(this.query,g)?g:null,N=!!m&&this.mutatedKeys.has(m.key),M=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let k=!1;m&&_?m.data.isEqual(_.data)?N!==M&&(i.track({type:3,doc:_}),k=!0):this.su(m,_)||(i.track({type:2,doc:_}),k=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),k=!0):m&&!_&&(i.track({type:1,doc:m}),k=!0,(u||h)&&(l=!0)),k&&(_?(a=a.add(_),s=M?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(_,N){const M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Rt:k})}};return M(_)-M(N)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new Xs(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Y_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ut(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new ZA(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new XA(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ut();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Xs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const og="SyncEngine";class UD{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class LD{constructor(t){this.key=t,this.hu=!1}}class zD{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new zr(l=>hA(l),Bc),this.Iu=new Map,this.Eu=new Set,this.du=new Ut(Q.comparator),this.Au=new Map,this.Ru=new $m,this.Vu={},this.mu=new Map,this.fu=$s.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BD(e,t,n=!0){const i=iS(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await JA(i,t,n,!0),r}async function jD(e,t){const n=iS(e);await JA(n,t,!0,!1)}async function JA(e,t,n,i){const r=await oD(e.localStore,In(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await qD(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&jA(e.remoteStore,r),l}async function qD(e,t,n,i,r){e.pu=(g,m,_)=>async function(M,k,A,v){let w=k.view.ru(A);w.Cs&&(w=await j_(M.localStore,k.query,!1).then(({documents:E})=>k.view.ru(E,w)));const D=v&&v.targetChanges.get(k.targetId),L=v&&v.targetMismatches.get(k.targetId)!=null,q=k.view.applyChanges(w,M.isPrimaryClient,D,L);return Z_(M,k.targetId,q.au),q.snapshot}(e,g,m,_);const s=await j_(e.localStore,t,!0),a=new PD(t,s.Qs),l=a.ru(s.documents),u=il.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);Z_(e,n,h.au);const d=new UD(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function HD(e,t,n){const i=et(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!Bc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Rd(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&tg(i.remoteStore,r.targetId),Dd(i,r.targetId)}).catch(oa)):(Dd(i,r.targetId),await Rd(i.localStore,r.targetId,!0))}async function GD(e,t){const n=et(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),tg(n.remoteStore,i.targetId))}async function FD(e,t,n){const i=JD(e);try{const r=await function(a,l){const u=et(a),h=Dt.now(),d=l.reduce((_,N)=>_.add(N.key),ut());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let N=ai(),M=ut();return u.Ns.getEntries(_,d).next(k=>{N=k,N.forEach((A,v)=>{v.isValidDocument()||(M=M.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,N)).next(k=>{g=k;const A=[];for(const v of l){const w=lC(v,g.get(v.key).overlayedDocument);w!=null&&A.push(new lr(v.key,w,iA(w.value.mapValue),de.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,A,l)}).next(k=>{m=k;const A=k.applyToLocalDocumentSet(g,M);return u.documentOverlayCache.saveOverlays(_,k.batchId,A)})}).then(()=>({batchId:m.batchId,changes:mA(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ut(lt)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await sl(i,r.changes),await Kc(i.remoteStore)}catch(r){const s=sg(r,"Failed to persist write");n.reject(s)}}async function WA(e,t){const n=et(e);try{const i=await rD(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(dt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?dt(a.hu,14607):r.removedDocuments.size>0&&(dt(a.hu,42227),a.hu=!1))}),await sl(n,i,t)}catch(i){await oa(i)}}function X_(e,t,n){const i=et(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=et(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&ag(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function QD(e,t,n){const i=et(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Ut(Q.comparator);a=a.insert(s,re.newNoDocument(s,Z.min()));const l=ut().add(s),u=new Fc(Z.min(),new Map,new Ut(lt),a,l);await WA(i,u),i.du=i.du.remove(s),i.Au.delete(t),lg(i)}else await Rd(i.localStore,t,!1).then(()=>Dd(i,t,n)).catch(oa)}async function YD(e,t){const n=et(e),i=t.batch.batchId;try{const r=await iD(n.localStore,t);eS(n,i,null),tS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await sl(n,r)}catch(r){await oa(r)}}async function KD(e,t,n){const i=et(e);try{const r=await function(a,l){const u=et(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(dt(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);eS(i,t,n),tS(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await sl(i,r)}catch(r){await oa(r)}}function tS(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function eS(e,t,n){const i=et(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Dd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||nS(e,i)})}function nS(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(tg(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),lg(e))}function Z_(e,t,n){for(const i of n)i instanceof XA?(e.Ru.addReference(i.key,t),$D(e,i)):i instanceof ZA?(H(og,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||nS(e,i.key)):K(19791,{wu:i})}function $D(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(H(og,"New document in limbo: "+n),e.Eu.add(i),lg(e))}function lg(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Q(Tt.fromString(t)),i=e.fu.next();e.Au.set(i,new LD(n)),e.du=e.du.insert(n,i),jA(e.remoteStore,new Mi(In(zc(n.path)),i,"TargetPurposeLimboResolution",Uc.ce))}}async function sl(e,t,n){const i=et(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){r.push(h);const g=Zm.As(u.targetId,h);s.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=et(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,m=>P.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>P.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!la(g))throw g;H(Jm,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const _=d.Ms.get(m),N=_.snapshotVersion,M=_.withLastLimboFreeSnapshotVersion(N);d.Ms=d.Ms.insert(m,M)}}}(i.localStore,s))}async function XD(e,t){const n=et(e);if(!n.currentUser.isEqual(t)){H(og,"User change. New user:",t.toKey());const i=await LA(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new j(x.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await sl(n,i.Ls)}}function ZD(e,t){const n=et(e),i=n.Au.get(t);if(i&&i.hu)return ut().add(i.key);{let r=ut();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function iS(e){const t=et(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=WA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=QD.bind(null,t),t.Pu.H_=xD.bind(null,t.eventManager),t.Pu.yu=kD.bind(null,t.eventManager),t}function JD(e){const t=et(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=YD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=KD.bind(null,t),t}class oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Qc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return nD(this.persistence,new WC,t.initialUser,this.serializer)}Cu(t){return new UA(Xm.mi,this.serializer)}Du(t){return new uD}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oc.provider={build:()=>new oc};class WD extends oc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){dt(this.persistence.referenceDelegate instanceof sc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new LC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Pe.withCacheSize(this.cacheSizeBytes):Pe.DEFAULT;return new UA(i=>sc.mi(i,n),this.serializer)}}class Nd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>X_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=XD.bind(null,this.syncEngine),await OD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new MD}()}createDatastore(t){const n=Qc(t.databaseInfo.databaseId),i=function(s){return new mD(s)}(t.databaseInfo);return function(s,a,l,u){return new _D(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new ED(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>X_(this.syncEngine,n,0),function(){return G_.v()?new G_:new cD}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const g=new zD(r,s,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=et(r);H(Mr,"RemoteStore shutting down."),s.Ea.add(5),await rl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Nd.provider={build:()=>new Nd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):si("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=et(r),l={documents:s.map(g=>rc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,Tt.emptyPath(),l,s.length),h=new Map;u.forEach(g=>{const m=TC(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return s.forEach(g=>{const m=h.get(g.toString());dt(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Gc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=Q.fromPath(i);this.mutations.push(new SA(r,this.precondition(r)))}),await async function(i,r){const s=et(i),a={writes:r.map(l=>VA(s.serializer,l))};await s.Go("Commit",s.serializer.databaseId,Tt.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw K(50498,{Gu:t.constructor.name});n=Z.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new j(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Z.min())?de.exists(!1):de.updateTime(n):de.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Z.min()))throw new j(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return de.updateTime(n)}return de.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new Wm(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new tN(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!el(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!bA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir="FirestoreClient";class nN{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ee.UNAUTHENTICATED,this.clientId=zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{H(ir,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(ir,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=sg(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function ff(e,t){e.asyncQueue.verifyOperationInProgress(),H(ir,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await LA(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function J_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await iN(e);H(ir,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>Q_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>Q_(t.remoteStore,r)),e._onlineComponents=t}async function iN(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(ir,"Using user provided OfflineComponentProvider");try{await ff(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===x.FAILED_PRECONDITION||r.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Fs("Error using user provided cache. Falling back to memory cache: "+n),await ff(e,new oc)}}else H(ir,"Using default OfflineComponentProvider"),await ff(e,new WD(void 0));return e._offlineComponents}async function ug(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(ir,"Using user provided OnlineComponentProvider"),await J_(e,e._uninitializedComponentsProvider._online)):(H(ir,"Using default OnlineComponentProvider"),await J_(e,new Nd))),e._onlineComponents}function rN(e){return ug(e).then(t=>t.syncEngine)}function sN(e){return ug(e).then(t=>t.datastore)}async function Od(e){const t=await ug(e),n=t.eventManager;return n.onListen=BD.bind(null,t.syncEngine),n.onUnlisten=HD.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=jD.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=GD.bind(null,t.syncEngine),n}function aN(e,t,n={}){const i=new Wn;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new rS({next:m=>{d.Nu(),a.enqueueAndForget(()=>KA(s,g));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new j(x.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new j(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new $A(zc(l.path),d,{includeMetadataChanges:!0,qa:!0});return YA(s,g)}(await Od(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="firestore.googleapis.com",tv=!0;class ev{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new j(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aS,this.ssl=tv}else this.host=t.host,this.ssl=t.ssl??tv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=PA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<PC)throw new j(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}T2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sS(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class $c{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ev({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new j(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ev(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new h2;switch(i.type){case"firstParty":return new g2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new j(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=W_.get(n);i&&(H("ComponentProvider","Removing Datastore"),W_.delete(n),i.terminate())}(this),Promise.resolve()}}function oN(e,t,n,i={}){var h;e=Xe(e,$c);const r=ra(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(N0(`https://${l}`),O0("Firestore",!0)),s.host!==aS&&s.host!==l&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!Nr(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=Ee.MOCK_USER;else{d=PR(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new j(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ee(m)}e._authCredentials=new f2(new F0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new jr(this.firestore,t,this._query)}}class Pt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Pt(this.firestore,t,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(tl(n,Pt._jsonSchema))return new Pt(t,i||null,new Q(Tt.fromString(n.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:Yt("string",Pt._jsonSchemaVersion),referencePath:Yt("string")};class Qi extends jr{constructor(t,n,i){super(t,n,zc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Pt(this.firestore,null,new Q(t))}withConverter(t){return new Qi(this.firestore,t,this._path)}}function nv(e,t,...n){if(e=oe(e),Q0("collection","path",t),e instanceof $c){const i=Tt.fromString(t,...n);return m_(i),new Qi(e,null,i)}{if(!(e instanceof Pt||e instanceof Qi))throw new j(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Tt.fromString(t,...n));return m_(i),new Qi(e.firestore,null,i)}}function Tn(e,t,...n){if(e=oe(e),arguments.length===1&&(t=zm.newId()),Q0("doc","path",t),e instanceof $c){const i=Tt.fromString(t,...n);return d_(i),new Pt(e,null,new Q(i))}{if(!(e instanceof Pt||e instanceof Qi))throw new j(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Tt.fromString(t,...n));return d_(i),new Pt(e.firestore,e instanceof Qi?e.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="AsyncQueue";class rv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wm(this,"async_queue_retry"),this._c=()=>{const i=hf();i&&H(iv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=hf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=hf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Wn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!la(t))throw t;H(iv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,si("INTERNAL UNHANDLED ERROR: ",sv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=rg.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&K(47125,{Pc:sv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function sv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class oi extends $c{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new rv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new rv(t),this._firestoreClient=void 0,await t}}}function lN(e,t){const n=typeof e=="object"?e:k0(),i=typeof e=="string"?e:Wu,r=Um(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=xR("firestore");s&&oN(r,...s)}return r}function Xc(e){if(e._terminated)throw new j(x.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||uN(e),e._firestoreClient}function uN(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new V2(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,sS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new nN(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ge(ge.fromBase64String(t))}catch(n){throw new j(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ge(ge.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ge._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(tl(t,Ge._jsonSchema))return Ge.fromBase64String(t.bytes)}}Ge._jsonSchemaVersion="firestore/bytes/1.0",Ge._jsonSchema={type:Yt("string",Ge._jsonSchemaVersion),bytes:Yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new j(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new j(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new j(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return lt(this._lat,t._lat)||lt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cn._jsonSchemaVersion}}static fromJSON(t){if(tl(t,Cn._jsonSchema))return new Cn(t.latitude,t.longitude)}}Cn._jsonSchemaVersion="firestore/geoPoint/1.0",Cn._jsonSchema={type:Yt("string",Cn._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Dn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(tl(t,Dn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Dn(t.vectorValues);throw new j(x.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Dn._jsonSchemaVersion="firestore/vectorValue/1.0",Dn._jsonSchema={type:Yt("string",Dn._jsonSchemaVersion),vectorValues:Yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=/^__.*__$/;class hN{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new lr(t,this.data,this.fieldMask,n,this.fieldTransforms):new nl(t,this.data,n,this.fieldTransforms)}}class oS{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new lr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function lS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:e})}}class cg{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new cg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return lc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(lS(this.Ac)&&cN.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class fN{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Qc(t)}Cc(t,n,i,r=!1){return new cg({Ac:t,methodName:n,Dc:i,path:fe.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ol(e){const t=e._freezeSettings(),n=Qc(e._databaseId);return new fN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function hg(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);dg("Data must be an object, but it was:",a,i);const l=hS(i,a);let u,h;if(s.merge)u=new Fe(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=Vd(t,g,n);if(!a.contains(m))throw new j(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);dS(d,m)||d.push(m)}u=new Fe(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new hN(new De(l),u,h)}class Jc extends Zc{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Jc}}class fg extends Zc{_toFieldTransform(t){return new rC(t.path,new Vo)}isEqual(t){return t instanceof fg}}function uS(e,t,n,i){const r=e.Cc(1,t,n);dg("Data must be an object, but it was:",r,i);const s=[],a=De.empty();or(i,(u,h)=>{const d=mg(t,u,n);h=oe(h);const g=r.yc(d);if(h instanceof Jc)s.push(d);else{const m=ll(h,g);m!=null&&(s.push(d),a.set(d,m))}});const l=new Fe(s);return new oS(a,l,r.fieldTransforms)}function cS(e,t,n,i,r,s){const a=e.Cc(1,t,n),l=[Vd(t,i,n)],u=[r];if(s.length%2!=0)throw new j(x.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(Vd(t,s[m])),u.push(s[m+1]);const h=[],d=De.empty();for(let m=l.length-1;m>=0;--m)if(!dS(h,l[m])){const _=l[m];let N=u[m];N=oe(N);const M=a.yc(_);if(N instanceof Jc)h.push(_);else{const k=ll(N,M);k!=null&&(h.push(_),d.set(_,k))}}const g=new Fe(h);return new oS(d,g,a.fieldTransforms)}function dN(e,t,n,i=!1){return ll(n,e.Cc(i?4:3,t))}function ll(e,t){if(fS(e=oe(e)))return dg("Unsupported field value:",t,e),hS(e,t);if(e instanceof Zc)return function(i,r){if(!lS(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=ll(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=oe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return eC(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Dt.fromDate(i);return{timestampValue:ic(r.serializer,s)}}if(i instanceof Dt){const s=new Dt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ic(r.serializer,s)}}if(i instanceof Cn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ge)return{bytesValue:CA(r.serializer,i._byteString)};if(i instanceof Pt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Km(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Dn)return function(a,l){return{mapValue:{fields:{[eA]:{stringValue:nA},[tc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Fm(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Pc(i)}`)}(e,t)}function hS(e,t){const n={};return $0(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):or(e,(i,r)=>{const s=ll(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function fS(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Dt||e instanceof Cn||e instanceof Ge||e instanceof Pt||e instanceof Zc||e instanceof Dn)}function dg(e,t,n){if(!fS(n)||!Y0(n)){const i=Pc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Vd(e,t,n){if((t=oe(t))instanceof al)return t._internalPath;if(typeof t=="string")return mg(e,t);throw lc("Field path arguments must be of type string or ",e,!1,void 0,n)}const mN=new RegExp("[~\\*/\\[\\]]");function mg(e,t,n){if(t.search(mN)>=0)throw lc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new al(...t.split("."))._internalPath}catch{throw lc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function lc(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new j(x.INVALID_ARGUMENT,l+e+u)}function dS(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new gN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(gg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gN extends uc{data(){return super.data()}}function gg(e,t){return typeof t=="string"?mg(e,t):t instanceof al?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new j(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pg{}class mS extends pg{}function yN(e,t,...n){let i=[];t instanceof pg&&i.push(t),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof _g).length,l=s.filter(u=>u instanceof yg).length;if(a>1||a>0&&l>0)throw new j(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class yg extends mS{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new yg(t,n,i)}_apply(t){const n=this._parse(t);return gS(t._query,n),new jr(t.firestore,t.converter,Td(t._query,n))}_parse(t){const n=ol(t.firestore);return function(s,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){lv(g,d);const N=[];for(const M of g)N.push(ov(u,s,M));m={arrayValue:{values:N}}}else m=ov(u,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||lv(g,d),m=dN(l,a,g,d==="in"||d==="not-in");return Qt.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class _g extends pg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new _g(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:pn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)gS(a,u),a=Td(a,u)}(t._query,n),new jr(t.firestore,t.converter,Td(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vg extends mS{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new vg(t,n)}_apply(t){const n=function(r,s,a){if(r.startAt!==null)throw new j(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new j(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oo(s,a)}(t._query,this._field,this._direction);return new jr(t.firestore,t.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new ua(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}}function _N(e,t="asc"){const n=t,i=gg("orderBy",e);return vg._create(i,n)}function ov(e,t,n){if(typeof(n=oe(n))=="string"){if(n==="")throw new j(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cA(t)&&n.indexOf("/")!==-1)throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Tt.fromString(n));if(!Q.isDocumentKey(i))throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return A_(e,new Q(i))}if(n instanceof Pt)return A_(e,n._key);throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pc(n)}.`)}function lv(e,t){if(!Array.isArray(e)||e.length===0)throw new j(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function gS(e,t){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new j(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new j(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class pS{convertValue(t,n="none"){switch(er(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ht(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(tr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw K(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return or(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[tc].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>Ht(a.doubleValue));return new Dn(n)}convertGeoPoint(t){return new Cn(Ht(t.latitude),Ht(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Lc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Co(t));default:return null}}convertTimestamp(t){const n=Wi(t);return new Dt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Tt.fromString(t);dt(kA(i),9688,{name:t});const r=new Do(i.get(1),i.get(3)),s=new Q(i.popFirst(5));return r.isEqual(n)||si(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class vN extends pS{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ge(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}class _s{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Yi extends uc{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new gu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(gg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new j(x.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Yi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Yi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yi._jsonSchema={type:Yt("string",Yi._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class gu extends Yi{data(t={}){return super.data(t)}}class Ds{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new _s(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new gu(this._firestore,this._userDataWriter,i.key,i,new _s(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new gu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new _s(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new gu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new _s(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:EN(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new j(x.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ds._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function EN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(e){e=Xe(e,Pt);const t=Xe(e.firestore,oi);return aN(Xc(t),e._key).then(n=>_S(t,e,n))}Ds._jsonSchemaVersion="firestore/querySnapshot/1.0",Ds._jsonSchema={type:Yt("string",Ds._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class Tg extends pS{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ge(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function Ag(e,t,n){e=Xe(e,Pt);const i=Xe(e.firestore,oi),r=Eg(e.converter,t,n);return Wc(i,[hg(ol(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,de.none())])}function TN(e,t,n,...i){e=Xe(e,Pt);const r=Xe(e.firestore,oi),s=ol(r);let a;return a=typeof(t=oe(t))=="string"||t instanceof al?cS(s,"updateDoc",e._key,t,n,i):uS(s,"updateDoc",e._key,t),Wc(r,[a.toMutation(e._key,de.exists(!0))])}function AN(e){return Wc(Xe(e.firestore,oi),[new Gc(e._key,de.none())])}function SN(e,t){const n=Xe(e.firestore,oi),i=Tn(e),r=Eg(e.converter,t);return Wc(n,[hg(ol(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,de.exists(!1))]).then(()=>i)}function uv(e,...t){var u,h,d;e=oe(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||av(t[i])||(n=t[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(av(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let s,a,l;if(e instanceof Pt)a=Xe(e.firestore,oi),l=zc(e._key.path),s={next:g=>{t[i]&&t[i](_S(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=Xe(e,jr);a=Xe(g.firestore,oi),l=g._query;const m=new Tg(a);s={next:_=>{t[i]&&t[i](new Ds(a,m,g,_))},error:t[i+1],complete:t[i+2]},pN(e._query)}return function(m,_,N,M){const k=new rS(M),A=new $A(_,k,N);return m.asyncQueue.enqueueAndForget(async()=>YA(await Od(m),A)),()=>{k.Nu(),m.asyncQueue.enqueueAndForget(async()=>KA(await Od(m),A))}}(Xc(a),l,r,s)}function Wc(e,t){return function(i,r){const s=new Wn;return i.asyncQueue.enqueueAndForget(async()=>FD(await rN(i),r,s)),s.promise}(Xc(e),t)}function _S(e,t,n){const i=n.docs.get(t._key),r=new Tg(e);return new Yi(e,r,t._key,i,new _s(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN={maxAttempts:5};function qa(e,t){if((e=oe(e)).firestore!==t)throw new j(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=ol(t)}get(t){const n=qa(t,this._firestore),i=new vN(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return K(24041);const s=r[0];if(s.isFoundDocument())return new uc(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new uc(this._firestore,i,n._key,null,n.converter);throw K(18433,{doc:s})})}set(t,n,i){const r=qa(t,this._firestore),s=Eg(r.converter,n,i),a=hg(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(t,n,i,...r){const s=qa(t,this._firestore);let a;return a=typeof(n=oe(n))=="string"||n instanceof al?cS(this._dataReader,"Transaction.update",s._key,n,i,r):uS(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(t){const n=qa(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN extends wN{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=qa(t,this._firestore),i=new Tg(this._firestore);return super.get(t).then(r=>new Yi(this._firestore,i,n._key,r._document,new _s(!1,!1),n.converter))}}function IN(e,t,n){e=Xe(e,oi);const i={...bN,...n};return function(s){if(s.maxAttempts<1)throw new j(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,l){const u=new Wn;return s.asyncQueue.enqueueAndForget(async()=>{const h=await sN(s);new eN(s.asyncQueue,h,l,a,u).ju()}),u.promise}(Xc(e),r=>t(new RN(e,r)),i)}function cv(){return new fg("serverTimestamp")}(function(t,n=!0){(function(r){aa=r})(sa),Gs(new Or("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new oi(new d2(i.getProvider("auth-internal")),new p2(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new j(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Do(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Gi(u_,c_,t),Gi(u_,c_,"esm2020")})();function vS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CN=vS,ES=new Jo("auth","Firebase",vS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new km("@firebase/auth");function DN(e,...t){cc.logLevel<=ot.WARN&&cc.warn(`Auth (${sa}): ${e}`,...t)}function pu(e,...t){cc.logLevel<=ot.ERROR&&cc.error(`Auth (${sa}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(e,...t){throw Sg(e,...t)}function Nn(e,...t){return Sg(e,...t)}function TS(e,t,n){const i={...CN(),[t]:n};return new Jo("auth","Firebase",i).create(t,{appName:e.name})}function Ki(e){return TS(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sg(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return ES.create(e,...t)}function W(e,t,...n){if(!e)throw Sg(t,...n)}function $n(e){const t="INTERNAL ASSERTION FAILED: "+e;throw pu(t),new Error(t)}function ui(e,t){e||$n(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function NN(){return hv()==="http:"||hv()==="https:"}function hv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NN()||qR()||"connection"in navigator)?navigator.onLine:!0}function VN(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(t,n){this.shortDelay=t,this.longDelay=n,ui(n>t,"Short delay should be less than long delay!"),this.isMobile=zR()||HR()}get(){return ON()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(e,t){ui(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kN=new ul(3e4,6e4);function th(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function ha(e,t,n,i,r={}){return SS(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=Wo({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return jR()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&ra(e.emulatorConfig.host)&&(h.credentials="include"),AS.fetch()(await wS(e,e.config.apiHost,n,l),h)})}async function SS(e,t,n){e._canInitEmulator=!1;const i={...MN,...t};try{const r=new PN(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Xl(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xl(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Xl(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw Xl(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw TS(e,d,h);li(e,d)}}catch(r){if(r instanceof hi)throw r;li(e,"network-request-failed",{message:String(r)})}}async function bS(e,t,n,i,r={}){const s=await ha(e,t,n,i,r);return"mfaPendingCredential"in s&&li(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function wS(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?bg(e.config,r):`${e.config.apiScheme}://${r}`;return xN.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class PN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Nn(this.auth,"network-request-failed")),kN.get())})}}function Xl(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Nn(e,t,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(e,t){return ha(e,"POST","/v1/accounts:delete",t)}async function hc(e,t){return ha(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function LN(e,t=!1){const n=oe(e),i=await n.getIdToken(t),r=wg(i);W(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:co(df(r.auth_time)),issuedAtTime:co(df(r.iat)),expirationTime:co(df(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function df(e){return Number(e)*1e3}function wg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return pu("JWT malformed, contained fewer than 3 sections"),null;try{const r=R0(n);return r?JSON.parse(r):(pu("Failed to decode base64 JWT payload"),null)}catch(r){return pu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function fv(e){const t=wg(e);return W(t,"internal-error"),W(typeof t.exp<"u","internal-error"),W(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof hi&&zN(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function zN({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=co(this.lastLoginAt),this.creationTime=co(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(e){var g;const t=e.auth,n=await e.getIdToken(),i=await ko(e,hc(t,{idToken:n}));W(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(g=r.providerUserInfo)!=null&&g.length?RS(r.providerUserInfo):[],a=qN(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new xd(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function jN(e){const t=oe(e);await fc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function qN(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function RS(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(e,t){const n=await SS(e,{},async()=>{const i=Wo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await wS(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&ra(e.emulatorConfig.host)&&(u.credentials="include"),AS.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function GN(e,t){return ha(e,"POST","/v2/accounts:revokeToken",th(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){W(t.idToken,"internal-error"),W(typeof t.idToken<"u","internal-error"),W(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):fv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){W(t.length!==0,"internal-error");const n=fv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await HN(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Ns;return i&&(W(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(W(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(W(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ns,this.toJSON())}_performRefresh(){return $n("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(e,t){W(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class mn{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new BN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new xd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await ko(this,this.stsTokenManager.getToken(this.auth,t));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return LN(this,t)}reload(){return jN(this)}_assign(t){this!==t&&(W(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new mn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await fc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dn(this.auth.app))return Promise.reject(Ki(this.auth));const t=await this.getIdToken();return await ko(this,UN(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:_,providerData:N,stsTokenManager:M}=n;W(g&&M,t,"internal-error");const k=Ns.fromJSON(this.name,M);W(typeof g=="string",t,"internal-error"),yi(i,t.name),yi(r,t.name),W(typeof m=="boolean",t,"internal-error"),W(typeof _=="boolean",t,"internal-error"),yi(s,t.name),yi(a,t.name),yi(l,t.name),yi(u,t.name),yi(h,t.name),yi(d,t.name);const A=new mn({uid:g,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:k,createdAt:h,lastLoginAt:d});return N&&Array.isArray(N)&&(A.providerData=N.map(v=>({...v}))),u&&(A._redirectEventId=u),A}static async _fromIdTokenResponse(t,n,i=!1){const r=new Ns;r.updateFromServerResponse(n);const s=new mn({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await fc(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];W(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?RS(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new Ns;l.updateFromIdToken(i);const u=new mn({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new xd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=new Map;function Xn(e){ui(e instanceof Function,"Expected a class definition");let t=dv.get(e);return t?(ui(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,dv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}IS.type="NONE";const mv=IS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(e,t,n){return`firebase:${e}:${t}:${n}`}class Os{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=yu(this.userKey,r.apiKey,s),this.fullPersistenceKey=yu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await hc(this.auth,{idToken:t}).catch(()=>{});return n?mn._fromGetAccountInfoResponse(this.auth,n,t):null}return mn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Os(Xn(mv),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||Xn(mv);const a=yu(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await hc(t,{idToken:d}).catch(()=>{});if(!m)break;g=await mn._fromGetAccountInfoResponse(t,m,d)}else g=mn._fromJSON(t,d);h!==s&&(l=g),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Os(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Os(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(OS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(CS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(MS(t))return"Blackberry";if(xS(t))return"Webos";if(DS(t))return"Safari";if((t.includes("chrome/")||NS(t))&&!t.includes("edge/"))return"Chrome";if(VS(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function CS(e=Se()){return/firefox\//i.test(e)}function DS(e=Se()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function NS(e=Se()){return/crios\//i.test(e)}function OS(e=Se()){return/iemobile/i.test(e)}function VS(e=Se()){return/android/i.test(e)}function MS(e=Se()){return/blackberry/i.test(e)}function xS(e=Se()){return/webos/i.test(e)}function Rg(e=Se()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function FN(e=Se()){var t;return Rg(e)&&!!((t=window.navigator)!=null&&t.standalone)}function QN(){return GR()&&document.documentMode===10}function kS(e=Se()){return Rg(e)||VS(e)||xS(e)||MS(e)||/windows phone/i.test(e)||OS(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(e,t=[]){let n;switch(e){case"Browser":n=gv(Se());break;case"Worker":n=`${gv(Se())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${sa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(e,t={}){return ha(e,"GET","/v2/passwordPolicy",th(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=6;class XN{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$N,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pv(this),this.idTokenSubscription=new pv(this),this.beforeStateQueue=new YN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ES,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Os.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await hc(this,{idToken:t}),i=await mn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(dn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await fc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=VN()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(dn(this.app))return Promise.reject(Ki(this));const n=t?oe(t):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&W(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return dn(this.app)?Promise.reject(Ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return dn(this.app)?Promise.reject(Ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await KN(this),n=new XN(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Jo("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await GN(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Xn(t)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=await Os.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=PS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&DN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function eh(e){return oe(e)}class pv{constructor(t){this.auth=t,this.observer=null,this.addObserver=JR(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JN(e){Ig=e}function WN(e){return Ig.loadJS(e)}function tO(){return Ig.gapiScript}function eO(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(e,t){const n=Um(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Nr(s,t??{}))return r;li(r,"already-initialized")}return n.initialize({options:t})}function iO(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Xn);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function rO(e,t,n){const i=eh(e);W(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=US(t),{host:a,port:l}=sO(t),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){W(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),W(Nr(h,i.config.emulator)&&Nr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,ra(a)?(N0(`${s}//${a}${u}`),O0("Auth",!0)):aO()}function US(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function sO(e){const t=US(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:yv(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:yv(a)}}}function yv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function aO(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return $n("not implemented")}_getIdTokenResponse(t){return $n("not implemented")}_linkToIdToken(t,n){return $n("not implemented")}_getReauthenticationResolver(t){return $n("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vs(e,t){return bS(e,"POST","/v1/accounts:signInWithIdp",th(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="http://localhost";class xr extends LS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new xr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):li("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new xr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Vs(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Vs(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Vs(t,n)}buildRequest(){const t={requestUri:oO,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Wo(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends zS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends cl{constructor(){super("facebook.com")}static credential(t){return xr._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return wi.credentialFromTaggedObject(t)}static credentialFromError(t){return wi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return wi.credential(t.oauthAccessToken)}catch{return null}}}wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends cl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return xr._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ri.credentialFromTaggedObject(t)}static credentialFromError(t){return Ri.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Ri.credential(n,i)}catch{return null}}}Ri.GOOGLE_SIGN_IN_METHOD="google.com";Ri.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends cl{constructor(){super("github.com")}static credential(t){return xr._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ii.credentialFromTaggedObject(t)}static credentialFromError(t){return Ii.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ii.credential(t.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends cl{constructor(){super("twitter.com")}static credential(t,n){return xr._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ci.credentialFromTaggedObject(t)}static credentialFromError(t){return Ci.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Ci.credential(n,i)}catch{return null}}}Ci.TWITTER_SIGN_IN_METHOD="twitter.com";Ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(e,t){return bS(e,"POST","/v1/accounts:signUp",th(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await mn._fromIdTokenResponse(t,i,r),a=_v(i);return new rr({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=_v(i);return new rr({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function _v(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(e){var r;if(dn(e.app))return Promise.reject(Ki(e));const t=eh(e);if(await t._initializationPromise,(r=t.currentUser)!=null&&r.isAnonymous)return new rr({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await lO(t,{returnSecureToken:!0}),i=await rr._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends hi{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,dc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new dc(t,n,i,r)}}function BS(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?dc._fromErrorAndOperation(e,s,t,i):s})}async function cO(e,t,n=!1){const i=await ko(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return rr._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hO(e,t,n=!1){const{auth:i}=e;if(dn(i.app))return Promise.reject(Ki(i));const r="reauthenticate";try{const s=await ko(e,BS(i,r,t,e),n);W(s.idToken,i,"internal-error");const a=wg(s.idToken);W(a,i,"internal-error");const{sub:l}=a;return W(e.uid===l,i,"user-mismatch"),rr._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&li(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fO(e,t,n=!1){if(dn(e.app))return Promise.reject(Ki(e));const i="signIn",r=await BS(e,i,t),s=await rr._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}function dO(e,t,n,i){return oe(e).onIdTokenChanged(t,n,i)}function mO(e,t,n){return oe(e).beforeAuthStateChanged(t,n)}const mc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mc,"1"),this.storage.removeItem(mc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=1e3,pO=10;class qS extends jS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);QN()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,pO):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},gO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}qS.type="LOCAL";const yO=qS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS extends jS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}HS.type="SESSION";const GS=HS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new nh(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await _O(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=Cg("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return window}function EO(e){On().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}async function TO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AO(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function SO(){return FS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="firebaseLocalStorageDb",bO=1,gc="firebaseLocalStorage",YS="fbase_key";class hl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ih(e,t){return e.transaction([gc],t?"readwrite":"readonly").objectStore(gc)}function wO(){const e=indexedDB.deleteDatabase(QS);return new hl(e).toPromise()}function kd(){const e=indexedDB.open(QS,bO);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(gc,{keyPath:YS})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(gc)?t(i):(i.close(),await wO(),t(await kd()))})})}async function vv(e,t,n){const i=ih(e,!0).put({[YS]:t,value:n});return new hl(i).toPromise()}async function RO(e,t){const n=ih(e,!1).get(t),i=await new hl(n).toPromise();return i===void 0?null:i.value}function Ev(e,t){const n=ih(e,!0).delete(t);return new hl(n).toPromise()}const IO=800,CO=3;class KS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>CO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nh._getInstance(SO()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await TO(),!this.activeServiceWorker)return;this.sender=new vO(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||AO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await kd();return await vv(t,mc,"1"),await Ev(t,mc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>vv(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>RO(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ev(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=ih(r,!1).getAll();return new hl(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KS.type="LOCAL";const DO=KS;new ul(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(e,t){return t?Xn(t):(W(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg extends LS{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Vs(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Vs(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Vs(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function OO(e){return fO(e.auth,new Dg(e),e.bypassAuthState)}function VO(e){const{auth:t,user:n}=e;return W(n,t,"internal-error"),hO(n,new Dg(e),e.bypassAuthState)}async function MO(e){const{auth:t,user:n}=e;return W(n,t,"internal-error"),cO(n,new Dg(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return OO;case"linkViaPopup":case"linkViaRedirect":return MO;case"reauthViaPopup":case"reauthViaRedirect":return VO;default:li(this.auth,"internal-error")}}resolve(t){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=new ul(2e3,1e4);class vs extends $S{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,vs.currentPopupAction&&vs.currentPopupAction.cancel(),vs.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return W(t,this.auth,"internal-error"),t}async onExecution(){ui(this.filter.length===1,"Popup operations only handle one event");const t=Cg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vs.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,xO.get())};t()}}vs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO="pendingRedirect",_u=new Map;class PO extends $S{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=_u.get(this.auth._key());if(!t){try{const i=await UO(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}_u.set(this.auth._key(),t)}return this.bypassAuthState||_u.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UO(e,t){const n=BO(t),i=zO(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function LO(e,t){_u.set(e._key(),t)}function zO(e){return Xn(e._redirectPersistence)}function BO(e){return yu(kO,e.config.apiKey,e.name)}async function jO(e,t,n=!1){if(dn(e.app))return Promise.reject(Ki(e));const i=eh(e),r=NO(i,t),a=await new PO(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=10*60*1e3;class HO{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!GO(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!XS(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Nn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=qO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tv(t))}saveEventToCache(t){this.cachedEventUids.add(Tv(t)),this.lastProcessedEventTime=Date.now()}}function Tv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function XS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function GO(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(e,t={}){return ha(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YO=/^https?/;async function KO(e){if(e.config.emulator)return;const{authorizedDomains:t}=await FO(e);for(const n of t)try{if($O(n))return}catch{}li(e,"unauthorized-domain")}function $O(e){const t=Md(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!YO.test(n))return!1;if(QO.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=new ul(3e4,6e4);function Av(){const e=On().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function ZO(e){return new Promise((t,n)=>{var r,s,a;function i(){Av(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Av(),n(Nn(e,"network-request-failed"))},timeout:XO.get()})}if((s=(r=On().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=On().gapi)!=null&&a.load)i();else{const l=eO("iframefcb");return On()[l]=()=>{gapi.load?i():n(Nn(e,"network-request-failed"))},WN(`${tO()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw vu=null,t})}let vu=null;function JO(e){return vu=vu||ZO(e),vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new ul(5e3,15e3),t4="__/auth/iframe",e4="emulator/auth/iframe",n4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},i4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r4(e){const t=e.config;W(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?bg(t,e4):`https://${e.config.authDomain}/${t4}`,i={apiKey:t.apiKey,appName:e.name,v:sa},r=i4.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Wo(i).slice(1)}`}async function s4(e){const t=await JO(e),n=On().gapi;return W(n,e,"internal-error"),t.open({where:document.body,url:r4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:n4,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Nn(e,"network-request-failed"),l=On().setTimeout(()=>{s(a)},WO.get());function u(){On().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},o4=500,l4=600,u4="_blank",c4="http://localhost";class Sv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function h4(e,t,n,i=o4,r=l4){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...a4,width:i.toString(),height:r.toString(),top:s,left:a},h=Se().toLowerCase();n&&(l=NS(h)?u4:n),CS(h)&&(t=t||c4,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,N])=>`${m}${_}=${N},`,"");if(FN(h)&&l!=="_self")return f4(t||"",l),new Sv(null);const g=window.open(t||"",l,d);W(g,e,"popup-blocked");try{g.focus()}catch{}return new Sv(g)}function f4(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="__/auth/handler",m4="emulator/auth/handler",g4=encodeURIComponent("fac");async function bv(e,t,n,i,r,s){W(e.config.authDomain,e,"auth-domain-config-required"),W(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:sa,eventId:r};if(t instanceof zS){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",ZR(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof cl){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${g4}=${encodeURIComponent(u)}`:"";return`${p4(e)}?${Wo(l).slice(1)}${h}`}function p4({config:e}){return e.emulator?bg(e,m4):`https://${e.authDomain}/${d4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="webStorageSupport";class y4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GS,this._completeRedirectFn=jO,this._overrideRedirectResult=LO}async _openPopup(t,n,i,r){var a;ui((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await bv(t,n,i,Md(),r);return h4(t,s,Cg())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await bv(t,n,i,Md(),r);return EO(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ui(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await s4(t),i=new HO(t);return n.register("authEvent",r=>(W(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(mf,{type:mf},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[mf];s!==void 0&&n(!!s),li(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KO(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return kS()||DS()||Rg()}}const _4=y4;var wv="@firebase/auth",Rv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T4(e){Gs(new Or("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PS(e)},h=new ZN(i,r,s,u);return iO(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Gs(new Or("auth-internal",t=>{const n=eh(t.getProvider("auth").getImmediate());return(i=>new v4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gi(wv,Rv,E4(e)),Gi(wv,Rv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=5*60,S4=D0("authIdTokenMaxAge")||A4;let Iv=null;const b4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>S4)return;const r=n==null?void 0:n.token;Iv!==r&&(Iv=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function w4(e=k0()){const t=Um(e,"auth");if(t.isInitialized())return t.getImmediate();const n=nO(e,{popupRedirectResolver:_4,persistence:[DO,yO,GS]}),i=D0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=b4(s.toString());mO(n,a,()=>a(n.currentUser)),dO(n,l=>a(l))}}const r=I0("auth");return r&&rO(n,`http://${r}`),n}function R4(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}JN({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=Nn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",R4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T4("Browser");const I4={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},ZS=x0(I4),tn=lN(ZS),C4=w4(ZS),JS="417641827",WS=({className:e=""})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:O.jsx("path",{d:"m9 18 6-6-6-6"})}),t1=({className:e=""})=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[O.jsx("path",{d:"M19 12H5"}),O.jsx("polyline",{points:"12 19 5 12 12 5"})]}),D4=({className:e=""})=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[O.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),O.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),N4=({className:e=""})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:O.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),e1=({className:e="",filled:t=!1})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:O.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),O4=({className:e=""})=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[O.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),O.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),V4=({className:e="",filled:t=!1})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:O.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),M4=({theme:e})=>{const t=Vn[e];return O.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.bg}`,children:[O.jsx(e1,{className:"animate-pulse-heart text-pink-400",filled:!0}),O.jsx("p",{className:`mt-4 text-lg ${t.text} opacity-70`,children:" ..."})]})},Vn={light:{bg:"bg-stone-100",text:"text-stone-800",componentBg:"bg-white",componentText:"text-stone-700",border:"border-stone-200",searchBg:"bg-white",searchPlaceholder:"placeholder-stone-400",searchRing:"focus:ring-pink-400",tgBg:"#f8f7f5",tgHeader:"#FFFFFF",accent:"pink-500",accentHover:"pink-400",commentBg:"bg-stone-50",commentText:"text-stone-800"},dark:{bg:"bg-gray-900",text:"text-gray-100",componentBg:"bg-gray-800",componentText:"text-gray-200",border:"border-gray-700",searchBg:"bg-gray-800",searchPlaceholder:"placeholder-gray-500",searchRing:"focus:ring-pink-500",tgBg:"#111827",tgHeader:"#1f2937",accent:"pink-500",accentHover:"pink-400",commentBg:"bg-gray-700",commentText:"text-gray-100"}},n1=({onClose:e,onSelectPlan:t,theme:n})=>{const i=Vn[n],r=[{duration:1,name:"1 ",price:199},{duration:3,name:"3 ",price:539,popular:!0},{duration:12,name:"1 ",price:1899}];return O.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:O.jsxs("div",{className:`w-full max-w-sm rounded-2xl p-6 shadow-lg ${i.componentBg} ${i.text}`,children:[O.jsx(N4,{className:`mx-auto mb-4 text-${i.accent}`}),O.jsx("h3",{className:"text-xl text-center font-bold",children:"    "}),O.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"   :"}),O.jsx("div",{className:"space-y-3",children:r.map(s=>O.jsxs("button",{onClick:()=>t(s),className:`relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${i.border} ${i.componentBg} hover:border-${i.accentHover}`,children:[O.jsx("p",{className:"font-bold",children:s.name}),O.jsxs("p",{className:"text-sm",children:[s.price," "]})]},s.duration))}),O.jsx("button",{onClick:e,className:`w-full py-3 mt-4 rounded-lg border ${i.border}`,children:" "})]})})},i1=({onClose:e,onSelectMethod:t,theme:n,plan:i})=>{const r=Vn[n];return O.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:O.jsxs("div",{className:`w-full max-w-sm rounded-2xl p-6 shadow-lg ${r.componentBg} ${r.text}`,children:[O.jsx("h3",{className:"text-xl text-center font-bold",children:"  "}),O.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:[": ",i.name," (",i.price," )"]}),O.jsxs("div",{className:"space-y-3",children:[O.jsxs("button",{onClick:()=>t("card"),className:`w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${r.border} ${r.componentBg} hover:border-${r.accentHover}`,children:[O.jsx("p",{className:"font-bold",children:"  "}),O.jsx("p",{className:"text-sm opacity-70",children:"  ( 24 )"})]}),O.jsxs("button",{onClick:()=>t("tribut"),className:`w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${r.border} ${r.componentBg} hover:border-${r.accentHover}`,children:[O.jsx("p",{className:"font-bold",children:"   tribut"}),O.jsx("p",{className:"text-sm opacity-70",children:"  "})]})]}),O.jsx("button",{onClick:e,className:`w-full py-3 mt-4 rounded-lg border ${r.border}`,children:""})]})})},pc=({title:e,onBack:t,theme:n})=>{const i=Vn[n];return O.jsxs("div",{className:`sticky top-0 ${i.componentBg} z-20 py-3 px-4 flex items-center border-b ${i.border} shadow-sm`,children:[t&&O.jsx("button",{onClick:t,className:`mr-4 p-2 -ml-2 rounded-full hover:${i.bg}`,children:O.jsx(t1,{})}),O.jsx("h1",{className:"text-xl font-bold",children:e})]})},x4=({novels:e,onSelectNovel:t,theme:n,bookmarks:i,onToggleBookmark:r})=>{const s=Vn[n];return O.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4",children:e.length>0?e.map((a,l)=>O.jsx("div",{onClick:()=>t(a),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${l*50}ms`},children:O.jsxs("div",{className:"relative filter drop-shadow-md group-hover:drop-shadow-pink transition-all duration-300",children:[O.jsx("button",{onClick:u=>{u.stopPropagation(),r(a.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${i.includes(a.id)?"text-pink-400":""}`,children:O.jsx(V4,{filled:i.includes(a.id),width:"20",height:"20"})}),O.jsx("img",{src:a.coverUrl,alt:a.title,className:`w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 ${s.border} border`}),O.jsx("h2",{className:`mt-2 font-semibold text-xs truncate ${s.text}`,children:a.title})]})},a.id)):O.jsx("p",{className:`col-span-3 text-center ${s.text} opacity-70`,children:"  ."})})},k4=({novel:e,onSelectChapter:t,onGenreSelect:n,theme:i,subscription:r,botUsername:s,userId:a,chaptersCache:l,lastReadData:u,onBack:h})=>{const d=Vn[i],[g,m]=$.useState([]),[_,N]=$.useState(!0),[M,k]=$.useState(!1),[A,v]=$.useState(null),[w,D]=$.useState("newest"),[L,q]=$.useState(!1),E=r&&new Date(r.expires_at)>new Date,y=$.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);$.useEffect(()=>{l[e.id]?(m(l[e.id]),N(!1)):(N(!0),fetch(`./data/chapters/${e.id}.json`).then(Y=>Y.json()).then(Y=>{m(Y.chapters||[]),N(!1)}).catch(Y=>{console.error(Y),m([]),N(!1)}))},[e.id,l]);const T=$.useMemo(()=>{const Y=[...g];return w==="newest"?Y.reverse():g},[g,w]),S=Y=>{!E&&Y.isPaid?k(!0):t(Y)},R=()=>{if(y){const Y=g.find(Rt=>Rt.id===y);Y&&t(Y)}},I=Y=>v(Y),b=async Y=>{var z;const Rt=(z=window.Telegram)==null?void 0:z.WebApp;Rt&&a&&A&&Rt.showConfirm("       .    ,   /start.",async F=>{if(F){const X=Tn(tn,"users",a);try{await Ag(X,{pendingSubscription:{...A,method:Y,date:new Date().toISOString()}},{merge:!0}),Rt.openTelegramLink(`https://t.me/${s}?start=true`),Rt.close()}catch(ct){console.error("   Firebase:",ct),Rt.showAlert("    .  .")}}})};return O.jsxs("div",{className:d.text,children:[O.jsx(pc,{title:e.title,onBack:h,theme:i}),O.jsxs("div",{className:"relative h-64",children:[O.jsx("img",{src:e.coverUrl,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),O.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${i==="dark"?"from-gray-900 via-gray-900/80":"from-stone-100 via-stone-100/80"} to-transparent`}),O.jsxs("div",{className:"absolute bottom-4 left-4",children:[O.jsx("h1",{className:"text-3xl font-bold font-sans text-white drop-shadow-pink",children:e.title}),O.jsx("p",{className:"text-sm font-sans text-white",children:e.author})]})]}),O.jsxs("div",{className:"p-4",children:[O.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(Y=>O.jsx("button",{onClick:()=>n(Y),className:`text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 ${i==="dark"?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:Y},Y))}),O.jsx("div",{className:`relative overflow-hidden transition-all duration-500 ${L?"max-h-full":"max-h-24"}`,children:O.jsx("p",{className:`text-sm mb-2 ${i==="dark"?"text-gray-300":"text-stone-600"} font-body`,children:e.description})}),O.jsx("button",{onClick:()=>q(!L),className:`text-sm font-semibold text-${d.accent} mb-4`,children:L?"":" ..."}),y&&O.jsxs("button",{onClick:R,className:"w-full py-3 mb-4 rounded-lg bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold shadow-lg shadow-pink-500/30 transition-all hover:scale-105 hover:shadow-xl",children:["  ( ",y,")"]}),O.jsxs("div",{className:"flex justify-between items-center mb-4",children:[O.jsx("h2",{className:"text-xl font-bold",children:""}),O.jsx("button",{onClick:()=>D(Y=>Y==="newest"?"oldest":"newest"),className:`text-sm font-semibold text-${d.accent}`,children:w==="newest"?" ":" "})]}),E&&O.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["  ",new Date(r.expires_at).toLocaleDateString()]}),_?O.jsx("p",{className:d.text,children:" ..."}):O.jsx("div",{className:"flex flex-col gap-3",children:T.map(Y=>{const Rt=!E&&Y.isPaid,z=y===Y.id;return O.jsxs("div",{onClick:()=>S(Y),className:`p-4 ${d.componentBg} rounded-xl cursor-pointer transition-all duration-200 hover:border-pink-400 hover:bg-pink-500/10 border ${d.border} flex items-center justify-between shadow-sm hover:shadow-md ${Rt?"opacity-70":""}`,children:[O.jsxs("div",{className:"flex items-center gap-3",children:[z&&O.jsx("span",{className:"w-2 h-2 rounded-full bg-pink-400"}),O.jsx("p",{className:`font-semibold ${d.componentText}`,children:Y.title})]}),Rt?O.jsx(D4,{className:d.text}):O.jsx(WS,{className:d.text})]},Y.id)})}),M&&O.jsx(n1,{onClose:()=>k(!1),onSelectPlan:I,theme:i}),A&&O.jsx(i1,{onClose:()=>v(null),onSelectMethod:b,theme:i,plan:A})]})]})},P4=({chapter:e,novel:t,theme:n,fontSize:i,userId:r,userName:s,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,botUsername:d,onBack:g})=>{const m=Vn[n],[_,N]=$.useState([]),[M,k]=$.useState(""),[A,v]=$.useState(null),[w,D]=$.useState(""),[L,q]=$.useState(0),[E,y]=$.useState(!1),[T,S]=$.useState(!1),[R,I]=$.useState(!1),[b,Y]=$.useState(null),Rt=h&&new Date(h.expires_at)>new Date,z=$.useMemo(()=>Tn(tn,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);$.useEffect(()=>{const tt=uv(z,It=>{var te;q(((te=It.data())==null?void 0:te.likeCount)||0)}),G=yN(nv(tn,`chapters_metadata/${t.id}_${e.id}/comments`),_N("timestamp","asc")),at=uv(G,It=>{const te=It.docs.map(Ve=>({id:Ve.id,...Ve.data()}));N(te)});if(r&&r!=="guest_user"){const It=Tn(tn,`chapters_metadata/${t.id}_${e.id}/likes`,r);yS(It).then(te=>y(te.exists()))}return()=>{tt(),at()}},[z,t.id,e.id,r]);const F=async tt=>{if(tt.preventDefault(),!M.trim()||!r||r==="guest_user")return;const G=nv(tn,`chapters_metadata/${t.id}_${e.id}/comments`);await SN(G,{userId:r,userName:s||"",text:M,timestamp:cv()}),k("")},X=tt=>{v(tt.id),D(tt.text)},ct=async tt=>{if(!w.trim())return;const G=Tn(tn,`chapters_metadata/${t.id}_${e.id}/comments`,tt);await TN(G,{text:w}),v(null),D("")},bt=async tt=>{const G=Tn(tn,`chapters_metadata/${t.id}_${e.id}/comments`,tt);await AN(G)},We=async()=>{if(!r||r==="guest_user")return;const tt=Tn(tn,`chapters_metadata/${t.id}_${e.id}/likes`,r);await IN(tn,async G=>{var Ve;const at=await G.get(tt),te=((Ve=(await G.get(z)).data())==null?void 0:Ve.likeCount)||0;at.exists()?(G.delete(tt),G.set(z,{likeCount:Math.max(0,te-1)},{merge:!0}),y(!1)):(G.set(tt,{timestamp:cv()}),G.set(z,{likeCount:te+1},{merge:!0}),y(!0))})},$t=tt=>{tt&&(!Rt&&tt.isPaid?(S(!1),I(!0)):(l(tt),S(!1)))},Ot=tt=>{Y(tt),I(!1)},be=async tt=>{var at;const G=(at=window.Telegram)==null?void 0:at.WebApp;G&&r&&b&&G.showConfirm("       .    ,   /start.",async It=>{if(It){const te=Tn(tn,"users",r);try{await Ag(te,{pendingSubscription:{...b,method:tt,date:new Date().toISOString()}},{merge:!0}),G.openTelegramLink(`https://t.me/${d}?start=true`),G.close()}catch(Ve){console.error("   Firebase:",Ve),G.showAlert("    .  .")}}})},we=u.findIndex(tt=>tt.id===e.id),qr=u[we-1],Pn=u[we+1];return O.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${m.bg}`,children:[O.jsx(pc,{title:t.title,onBack:g,theme:n}),O.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[O.jsx("h2",{className:`text-lg sm:text-xl mb-8 text-center opacity-80 font-sans ${m.text}`,children:e.title}),O.jsx("div",{className:`whitespace-pre-wrap leading-relaxed ${m.text} ${a}`,style:{fontSize:`${i}px`},children:e.content}),O.jsxs("div",{className:"mt-12 border-t pt-8",children:[O.jsx("div",{className:"flex items-center gap-4 mb-8",children:O.jsxs("button",{onClick:We,className:`flex items-center gap-2 text-${m.accentHover} transition-transform hover:scale-110`,children:[O.jsx(e1,{filled:E,className:E?`text-${m.accent}`:""}),O.jsx("span",{className:"font-bold text-lg",children:L})]})}),O.jsx("h3",{className:`text-2xl font-bold mb-4 ${m.text}`,children:""}),O.jsxs("div",{className:"space-y-4 mb-6",children:[_.map(tt=>O.jsxs("div",{className:`p-3 rounded-lg ${m.commentBg}`,children:[O.jsx("p",{className:`font-bold text-sm ${m.commentText}`,children:tt.userName}),A===tt.id?O.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[O.jsx("input",{type:"text",value:w,onChange:G=>D(G.target.value),className:`w-full ${m.searchBg} ${m.border} border rounded-lg py-1 px-2 ${m.commentText}`}),O.jsx("button",{onClick:()=>ct(tt.id),className:"p-1 rounded-full bg-green-500 text-white",children:""}),O.jsx("button",{onClick:()=>v(null),className:"p-1 rounded-full bg-gray-500 text-white",children:""})]}):O.jsx("p",{className:`text-md mt-1 ${m.commentText}`,children:tt.text}),(r===tt.userId||r===JS)&&O.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[O.jsx("button",{onClick:()=>X(tt),className:"text-xs text-gray-500",children:""}),O.jsx("button",{onClick:()=>bt(tt.id),className:"text-xs text-red-500",children:""})]})]},tt.id)),_.length===0&&O.jsx("p",{className:`opacity-70 ${m.text}`,children:"  .  !"})]}),O.jsxs("form",{onSubmit:F,className:"flex items-center gap-2",children:[O.jsx("input",{type:"text",value:M,onChange:tt=>k(tt.target.value),placeholder:" ...",className:`w-full ${m.searchBg} ${m.border} border rounded-lg py-2 px-4 ${m.commentText} ${m.searchPlaceholder} focus:outline-none focus:ring-2 ${m.searchRing}`}),O.jsx("button",{type:"submit",className:`p-2 rounded-full bg-${m.accent} text-white`,children:O.jsx(O4,{})})]})]})]}),O.jsxs("div",{className:`fixed bottom-0 left-0 right-0 p-2 border-t ${m.border} ${m.componentBg} flex justify-between items-center z-10`,children:[O.jsx("button",{onClick:()=>$t(qr),disabled:!qr,className:"p-2 disabled:opacity-50",children:O.jsx(t1,{})}),O.jsx("button",{onClick:()=>S(!0),className:`px-4 py-2 rounded-lg ${m.bg}`,children:""}),O.jsx("button",{onClick:()=>$t(Pn),disabled:!Pn,className:"p-2 disabled:opacity-50",children:O.jsx(WS,{className:"opacity-100"})})]}),T&&O.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>S(!1),children:O.jsxs("div",{className:`absolute bottom-0 left-0 right-0 max-h-1/2 p-4 rounded-t-2xl ${m.componentBg} overflow-y-auto`,onClick:tt=>tt.stopPropagation(),children:[O.jsx("h3",{className:"font-bold text-lg mb-4",children:""}),O.jsx("div",{className:"flex flex-col gap-2",children:u.map(tt=>O.jsx("button",{onClick:()=>$t(tt),className:`p-2 text-left rounded-md ${tt.id===e.id?`bg-${m.accent} text-white`:m.bg}`,children:tt.title},tt.id))})]})}),R&&O.jsx(n1,{onClose:()=>I(!1),onSelectPlan:Ot,theme:n}),b&&O.jsx(i1,{onClose:()=>Y(null),onSelectMethod:be,theme:n,plan:b})]})};function U4(){const[e,t]=$.useState("light"),[n,i]=$.useState(18),[r,s]=$.useState("font-sans"),[a,l]=$.useState("list"),[u,h]=$.useState("library"),[d,g]=$.useState([]),[m,_]=$.useState(null),[N,M]=$.useState(null),[k,A]=$.useState(null),[v,w]=$.useState(null),[D,L]=$.useState(null),[q,E]=$.useState(null),[y,T]=$.useState(!0),[S,R]=$.useState({}),[I,b]=$.useState(null),[Y,Rt]=$.useState([]),z="tenebrisverbot",F=$.useCallback(async G=>{if(D&&D!=="guest_user"){const at=Tn(tn,"users",D);try{await Ag(at,G,{merge:!0})}catch(It){console.error("    :",It)}}},[D]),X=$.useCallback(G=>{t(G),F({settings:{theme:G,fontSize:n,fontClass:r}})},[n,r,F]);$.useCallback(G=>{i(at=>{const It=Math.max(12,Math.min(32,at+G));return F({settings:{theme:e,fontSize:It,fontClass:r}}),It})},[e,r,F]),$.useCallback(G=>{s(G),F({settings:{theme:e,fontSize:n,fontClass:G}})},[e,n,F]),$.useEffect(()=>{(async()=>{var at,It,te,Ve,Hr,Gr;try{const _n=(at=window.Telegram)==null?void 0:at.WebApp;let Fr="guest_user";if(_n&&(_n.ready(),_n.expand(),Fr=((Ve=(te=(It=_n.initDataUnsafe)==null?void 0:It.user)==null?void 0:te.id)==null?void 0:Ve.toString())||"guest_user",E(((Gr=(Hr=_n.initDataUnsafe)==null?void 0:Hr.user)==null?void 0:Gr.first_name)||null)),L(Fr),await uO(C4),Fr!=="guest_user"){const fa=Tn(tn,"users",Fr),da=await yS(fa);if(da.exists()){const Un=da.data();w(Un.subscription||null),b(Un.lastRead||null),Rt(Un.bookmarks||[]),Un.settings&&(t(Un.settings.theme||"light"),i(Un.settings.fontSize||18),s(Un.settings.fontClass||"font-sans"))}}const fl=await fetch("./data/novels.json");if(!fl.ok)throw new Error("Failed to fetch novels");const dl=await fl.json();g(dl.novels)}catch(_n){console.error(" :",_n)}finally{T(!1)}})()},[]),$.useEffect(()=>{d.length>0&&d.forEach(G=>{fetch(`./data/chapters/${G.id}.json`).then(at=>at.json()).then(at=>R(It=>({...It,[G.id]:at.chapters||[]}))).catch(at=>console.error(`     ${G.title}:`,at))})},[d]),$.useEffect(()=>{document.documentElement.className=e},[e]);const ct=$.useCallback(()=>{a==="reader"?l("details"):a==="details"&&(l("list"),A(null))},[a]);$.useEffect(()=>{var at;const G=(at=window.Telegram)==null?void 0:at.WebApp;if(G)return G.onEvent("backButtonClicked",ct),a==="list"?G.BackButton.hide():G.BackButton.show(),()=>G.offEvent("backButtonClicked",ct)},[a,ct]),$.useEffect(()=>{var at;const G=(at=window.Telegram)==null?void 0:at.WebApp;G&&(G.setHeaderColor(Vn[e].tgHeader),G.setBackgroundColor(Vn[e].tgBg))},[e]);const bt=$.useCallback(async G=>{if(M(G),l("reader"),D&&D!=="guest_user"&&m){const at={...I||{},[m.id]:{novelId:m.id,chapterId:G.id,timestamp:new Date().toISOString()}};b(at),await F({lastRead:at})}},[D,m,I,F]),We=G=>{_(G),l("details")},$t=G=>{A(G),l("list"),h("library")},Ot=()=>{A(null)},be=$.useCallback(async G=>{const at=Y.includes(G)?Y.filter(It=>It!==G):[...Y,G];Rt(at),await F({bookmarks:at})},[Y,F]),we=$.useMemo(()=>d.filter(G=>Y.includes(G.id)),[d,Y]);if(y)return O.jsx(M4,{theme:e});const qr=Vn[e],Pn=D===JS,tt=()=>{if(a==="details")return O.jsx(k4,{novel:m,onSelectChapter:bt,onGenreSelect:$t,theme:e,subscription:v,botUsername:z,userId:D,chaptersCache:S,lastReadData:I,onBack:ct});if(a==="reader")return O.jsx(P4,{chapter:N,novel:m,theme:e,fontSize:n,userId:D,userName:q,currentFontClass:r,onSelectChapter:bt,allChapters:S[m.id]||[],subscription:v,botUsername:z,onBack:ct});switch(u){case"library":return O.jsxs(O.Fragment,{children:[O.jsx(pc,{title:"",theme:e}),O.jsx(x4,{novels:d,onSelectNovel:We,theme:e,bookmarks:Y,onToggleBookmark:be,genreFilter:k,onClearGenreFilter:Ot})]});case"search":return O.jsx(SearchPage,{novels:d,onSelectNovel:We,theme:e,bookmarks:Y,onToggleBookmark:be});case"bookmarks":return O.jsx(BookmarksPage,{novels:we,onSelectNovel:We,theme:e,bookmarks:Y,onToggleBookmark:be});case"profile":return O.jsx(ProfilePage,{theme:e,subscription:v,onThemeChange:()=>X(e==="dark"?"light":"dark")});default:return O.jsx(pc,{title:"",theme:e})}};return O.jsxs("main",{className:`${qr.bg} min-h-screen font-sans ${Pn?"":"no-select"}`,children:[O.jsx("div",{className:"pb-20",children:tt()}),a==="list"&&O.jsx(BottomNav,{activeTab:u,setActiveTab:h,theme:e})]})}wR.createRoot(document.getElementById("root")).render(O.jsx($.StrictMode,{children:O.jsx(U4,{})}));
