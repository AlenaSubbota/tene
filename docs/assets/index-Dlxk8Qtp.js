(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function fE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dE={exports:{}},Zc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw=Symbol.for("react.transitional.element"),fw=Symbol.for("react.fragment");function mE(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:hw,type:t,key:i,ref:e!==void 0?e:null,props:n}}Zc.Fragment=fw;Zc.jsx=mE;Zc.jsxs=mE;dE.exports=Zc;var h=dE.exports,pE={exports:{}},re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ym=Symbol.for("react.transitional.element"),dw=Symbol.for("react.portal"),mw=Symbol.for("react.fragment"),pw=Symbol.for("react.strict_mode"),gw=Symbol.for("react.profiler"),yw=Symbol.for("react.consumer"),_w=Symbol.for("react.context"),vw=Symbol.for("react.forward_ref"),Ew=Symbol.for("react.suspense"),Tw=Symbol.for("react.memo"),gE=Symbol.for("react.lazy"),ay=Symbol.iterator;function bw(t){return t===null||typeof t!="object"?null:(t=ay&&t[ay]||t["@@iterator"],typeof t=="function"?t:null)}var yE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_E=Object.assign,vE={};function Va(t,e,n){this.props=t,this.context=e,this.refs=vE,this.updater=n||yE}Va.prototype.isReactComponent={};Va.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Va.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function EE(){}EE.prototype=Va.prototype;function _m(t,e,n){this.props=t,this.context=e,this.refs=vE,this.updater=n||yE}var vm=_m.prototype=new EE;vm.constructor=_m;_E(vm,Va.prototype);vm.isPureReactComponent=!0;var oy=Array.isArray,qe={H:null,A:null,T:null,S:null,V:null},TE=Object.prototype.hasOwnProperty;function Em(t,e,n,i,s,r){return n=r.ref,{$$typeof:ym,type:t,key:e,ref:n!==void 0?n:null,props:r}}function Sw(t,e){return Em(t.type,e,void 0,void 0,void 0,t.props)}function Tm(t){return typeof t=="object"&&t!==null&&t.$$typeof===ym}function Aw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ly=/\/+/g;function sf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Aw(""+t.key):e.toString(36)}function uy(){}function ww(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(uy,uy):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Cr(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ym:case dw:a=!0;break;case gE:return a=t._init,Cr(a(t._payload),e,n,i,s)}}if(a)return s=s(t),a=i===""?"."+sf(t,0):i,oy(s)?(n="",a!=null&&(n=a.replace(ly,"$&/")+"/"),Cr(s,e,n,"",function(f){return f})):s!=null&&(Tm(s)&&(s=Sw(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(ly,"$&/")+"/")+a)),e.push(s)),1;a=0;var l=i===""?".":i+":";if(oy(t))for(var u=0;u<t.length;u++)i=t[u],r=l+sf(i,u),a+=Cr(i,e,n,r,s);else if(u=bw(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,r=l+sf(i,u++),a+=Cr(i,e,n,r,s);else if(r==="object"){if(typeof t.then=="function")return Cr(ww(t),e,n,i,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function cu(t,e,n){if(t==null)return t;var i=[],s=0;return Cr(t,i,"","",function(r){return e.call(n,r,s++)}),i}function xw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cy=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Rw(){}re.Children={map:cu,forEach:function(t,e,n){cu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cu(t,function(){e++}),e},toArray:function(t){return cu(t,function(e){return e})||[]},only:function(t){if(!Tm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Va;re.Fragment=mw;re.Profiler=gw;re.PureComponent=_m;re.StrictMode=pw;re.Suspense=Ew;re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=qe;re.__COMPILER_RUNTIME={__proto__:null,c:function(t){return qe.H.useMemoCache(t)}};re.cache=function(t){return function(){return t.apply(null,arguments)}};re.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=_E({},t.props),s=t.key,r=void 0;if(e!=null)for(a in e.ref!==void 0&&(r=void 0),e.key!==void 0&&(s=""+e.key),e)!TE.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(i[a]=e[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Em(t.type,s,void 0,void 0,r,i)};re.createContext=function(t){return t={$$typeof:_w,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:yw,_context:t},t};re.createElement=function(t,e,n){var i,s={},r=null;if(e!=null)for(i in e.key!==void 0&&(r=""+e.key),e)TE.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return Em(t,r,void 0,void 0,null,s)};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:vw,render:t}};re.isValidElement=Tm;re.lazy=function(t){return{$$typeof:gE,_payload:{_status:-1,_result:t},_init:xw}};re.memo=function(t,e){return{$$typeof:Tw,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=qe.T,n={};qe.T=n;try{var i=t(),s=qe.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Rw,cy)}catch(r){cy(r)}finally{qe.T=e}};re.unstable_useCacheRefresh=function(){return qe.H.useCacheRefresh()};re.use=function(t){return qe.H.use(t)};re.useActionState=function(t,e,n){return qe.H.useActionState(t,e,n)};re.useCallback=function(t,e){return qe.H.useCallback(t,e)};re.useContext=function(t){return qe.H.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t,e){return qe.H.useDeferredValue(t,e)};re.useEffect=function(t,e,n){var i=qe.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(t,e)};re.useId=function(){return qe.H.useId()};re.useImperativeHandle=function(t,e,n){return qe.H.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return qe.H.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return qe.H.useLayoutEffect(t,e)};re.useMemo=function(t,e){return qe.H.useMemo(t,e)};re.useOptimistic=function(t,e){return qe.H.useOptimistic(t,e)};re.useReducer=function(t,e,n){return qe.H.useReducer(t,e,n)};re.useRef=function(t){return qe.H.useRef(t)};re.useState=function(t){return qe.H.useState(t)};re.useSyncExternalStore=function(t,e,n){return qe.H.useSyncExternalStore(t,e,n)};re.useTransition=function(){return qe.H.useTransition()};re.version="19.1.1";pE.exports=re;var L=pE.exports;const bE=fE(L);var SE={exports:{}},Wc={},AE={exports:{}},wE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Y){var $=z.length;z.push(Y);e:for(;0<$;){var ge=$-1>>>1,be=z[ge];if(0<s(be,Y))z[ge]=Y,z[$]=be,$=ge;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var Y=z[0],$=z.pop();if($!==Y){z[0]=$;e:for(var ge=0,be=z.length,Wt=be>>>1;ge<Wt;){var nt=2*(ge+1)-1,Se=z[nt],Ye=nt+1,Tt=z[Ye];if(0>s(Se,$))Ye<be&&0>s(Tt,Se)?(z[ge]=Tt,z[Ye]=$,ge=Ye):(z[ge]=Se,z[nt]=$,ge=nt);else if(Ye<be&&0>s(Tt,$))z[ge]=Tt,z[Ye]=$,ge=Ye;else break e}}return Y}function s(z,Y){var $=z.sortIndex-Y.sortIndex;return $!==0?$:z.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],f=[],m=1,g=null,p=3,_=!1,C=!1,O=!1,V=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function D(z){for(var Y=n(f);Y!==null;){if(Y.callback===null)i(f);else if(Y.startTime<=z)i(f),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(f)}}function U(z){if(O=!1,D(z),!C)if(n(u)!==null)C=!0,F||(F=!0,I());else{var Y=n(f);Y!==null&&fe(U,Y.startTime-z)}}var F=!1,T=-1,v=5,b=-1;function S(){return V?!0:!(t.unstable_now()-b<v)}function R(){if(V=!1,F){var z=t.unstable_now();b=z;var Y=!0;try{e:{C=!1,O&&(O=!1,E(T),T=-1),_=!0;var $=p;try{t:{for(D(z),g=n(u);g!==null&&!(g.expirationTime>z&&S());){var ge=g.callback;if(typeof ge=="function"){g.callback=null,p=g.priorityLevel;var be=ge(g.expirationTime<=z);if(z=t.unstable_now(),typeof be=="function"){g.callback=be,D(z),Y=!0;break t}g===n(u)&&i(u),D(z)}else i(u);g=n(u)}if(g!==null)Y=!0;else{var Wt=n(f);Wt!==null&&fe(U,Wt.startTime-z),Y=!1}}break e}finally{g=null,p=$,_=!1}Y=void 0}}finally{Y?I():F=!1}}}var I;if(typeof x=="function")I=function(){x(R)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,Z=w.port2;w.port1.onmessage=R,I=function(){Z.postMessage(null)}}else I=function(){A(R,0)};function fe(z,Y){T=A(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var $=p;p=Y;try{return z()}finally{p=$}},t.unstable_requestPaint=function(){V=!0},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var $=p;p=z;try{return Y()}finally{p=$}},t.unstable_scheduleCallback=function(z,Y,$){var ge=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ge+$:ge):$=ge,z){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=$+be,z={id:m++,callback:Y,priorityLevel:z,startTime:$,expirationTime:be,sortIndex:-1},$>ge?(z.sortIndex=$,e(f,z),n(u)===null&&z===n(f)&&(O?(E(T),T=-1):O=!0,fe(U,$-ge))):(z.sortIndex=be,e(u,z),C||_||(C=!0,F||(F=!0,I()))),z},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(z){var Y=p;return function(){var $=p;p=Y;try{return z.apply(this,arguments)}finally{p=$}}}})(wE);AE.exports=wE;var Iw=AE.exports,xE={exports:{}},Ft={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw=L;function RE(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ui(){}var qt={d:{f:Ui,r:function(){throw Error(RE(522))},D:Ui,C:Ui,L:Ui,m:Ui,X:Ui,S:Ui,M:Ui},p:0,findDOMNode:null},Nw=Symbol.for("react.portal");function Dw(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nw,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var So=Cw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Jc(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=qt;Ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(RE(299));return Dw(t,e,null,n)};Ft.flushSync=function(t){var e=So.T,n=qt.p;try{if(So.T=null,qt.p=2,t)return t()}finally{So.T=e,qt.p=n,qt.d.f()}};Ft.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,qt.d.C(t,e))};Ft.prefetchDNS=function(t){typeof t=="string"&&qt.d.D(t)};Ft.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Jc(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?qt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&qt.d.X(t,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Ft.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Jc(e.as,e.crossOrigin);qt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&qt.d.M(t)};Ft.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Jc(n,e.crossOrigin);qt.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Ft.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Jc(e.as,e.crossOrigin);qt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else qt.d.m(t)};Ft.requestFormReset=function(t){qt.d.r(t)};Ft.unstable_batchedUpdates=function(t,e){return t(e)};Ft.useFormState=function(t,e,n){return So.H.useFormState(t,e,n)};Ft.useFormStatus=function(){return So.H.useHostTransitionStatus()};Ft.version="19.1.1";function IE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IE)}catch(t){console.error(t)}}IE(),xE.exports=Ft;var Ow=xE.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mt=Iw,CE=L,Vw=Ow;function P(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function NE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hy(t){if(gl(t)!==t)throw Error(P(188))}function Mw(t){var e=t.alternate;if(!e){if(e=gl(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return hy(s),t;if(r===i)return hy(s),e;r=r.sibling}throw Error(P(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(P(189))}}if(n.alternate!==i)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function OE(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=OE(t),e!==null)return e;t=t.sibling}return null}var Ue=Object.assign,kw=Symbol.for("react.element"),hu=Symbol.for("react.transitional.element"),fo=Symbol.for("react.portal"),Lr=Symbol.for("react.fragment"),VE=Symbol.for("react.strict_mode"),Xf=Symbol.for("react.profiler"),jw=Symbol.for("react.provider"),ME=Symbol.for("react.consumer"),hi=Symbol.for("react.context"),bm=Symbol.for("react.forward_ref"),Zf=Symbol.for("react.suspense"),Wf=Symbol.for("react.suspense_list"),Sm=Symbol.for("react.memo"),Hi=Symbol.for("react.lazy"),Jf=Symbol.for("react.activity"),Pw=Symbol.for("react.memo_cache_sentinel"),fy=Symbol.iterator;function so(t){return t===null||typeof t!="object"?null:(t=fy&&t[fy]||t["@@iterator"],typeof t=="function"?t:null)}var Lw=Symbol.for("react.client.reference");function ed(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Lw?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Lr:return"Fragment";case Xf:return"Profiler";case VE:return"StrictMode";case Zf:return"Suspense";case Wf:return"SuspenseList";case Jf:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case fo:return"Portal";case hi:return(t.displayName||"Context")+".Provider";case ME:return(t._context.displayName||"Context")+".Consumer";case bm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sm:return e=t.displayName||null,e!==null?e:ed(t.type)||"Memo";case Hi:e=t._payload,t=t._init;try{return ed(t(e))}catch{}}return null}var mo=Array.isArray,te=CE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve=Vw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qs={pending:!1,data:null,method:null,action:null},td=[],Ur=-1;function Jn(t){return{current:t}}function Et(t){0>Ur||(t.current=td[Ur],td[Ur]=null,Ur--)}function He(t,e){Ur++,td[Ur]=t.current,t.current=e}var Bn=Jn(null),Fo=Jn(null),ss=Jn(null),ec=Jn(null);function tc(t,e){switch(He(ss,e),He(Fo,t),He(Bn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?y_(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=y_(e),t=Z0(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Et(Bn),He(Bn,t)}function ha(){Et(Bn),Et(Fo),Et(ss)}function nd(t){t.memoizedState!==null&&He(ec,t);var e=Bn.current,n=Z0(e,t.type);e!==n&&(He(Fo,t),He(Bn,n))}function nc(t){Fo.current===t&&(Et(Bn),Et(Fo)),ec.current===t&&(Et(ec),el._currentValue=Qs)}var id=Object.prototype.hasOwnProperty,Am=mt.unstable_scheduleCallback,rf=mt.unstable_cancelCallback,Uw=mt.unstable_shouldYield,zw=mt.unstable_requestPaint,qn=mt.unstable_now,Bw=mt.unstable_getCurrentPriorityLevel,kE=mt.unstable_ImmediatePriority,jE=mt.unstable_UserBlockingPriority,ic=mt.unstable_NormalPriority,qw=mt.unstable_LowPriority,PE=mt.unstable_IdlePriority,Hw=mt.log,Fw=mt.unstable_setDisableYieldValue,yl=null,ln=null;function Ji(t){if(typeof Hw=="function"&&Fw(t),ln&&typeof ln.setStrictMode=="function")try{ln.setStrictMode(yl,t)}catch{}}var un=Math.clz32?Math.clz32:Kw,Gw=Math.log,Qw=Math.LN2;function Kw(t){return t>>>=0,t===0?32:31-(Gw(t)/Qw|0)|0}var fu=256,du=4194304;function Bs(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function eh(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var s=0,r=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var l=i&134217727;return l!==0?(i=l&~r,i!==0?s=Bs(i):(a&=l,a!==0?s=Bs(a):n||(n=l&~t,n!==0&&(s=Bs(n))))):(l=i&~r,l!==0?s=Bs(l):a!==0?s=Bs(a):n||(n=i&~t,n!==0&&(s=Bs(n)))),s===0?0:e!==0&&e!==s&&!(e&r)&&(r=s&-s,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:s}function _l(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Yw(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LE(){var t=fu;return fu<<=1,!(fu&4194048)&&(fu=256),t}function UE(){var t=du;return du<<=1,!(du&62914560)&&(du=4194304),t}function af(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function $w(t,e,n,i,s,r){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,f=t.hiddenUpdates;for(n=a&~n;0<n;){var m=31-un(n),g=1<<m;l[m]=0,u[m]=-1;var p=f[m];if(p!==null)for(f[m]=null,m=0;m<p.length;m++){var _=p[m];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&zE(t,i,0),r!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=r&~(a&~e))}function zE(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-un(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&4194090}function BE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-un(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}function wm(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function xm(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function qE(){var t=ve.p;return t!==0?t:(t=window.event,t===void 0?32:ob(t.type))}function Xw(t,e){var n=ve.p;try{return ve.p=t,e()}finally{ve.p=n}}var Rs=Math.random().toString(36).slice(2),Pt="__reactFiber$"+Rs,Xt="__reactProps$"+Rs,Ma="__reactContainer$"+Rs,sd="__reactEvents$"+Rs,Zw="__reactListeners$"+Rs,Ww="__reactHandles$"+Rs,dy="__reactResources$"+Rs,El="__reactMarker$"+Rs;function Rm(t){delete t[Pt],delete t[Xt],delete t[sd],delete t[Zw],delete t[Ww]}function zr(t){var e=t[Pt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ma]||n[Pt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=E_(t);t!==null;){if(n=t[Pt])return n;t=E_(t)}return e}t=n,n=t.parentNode}return null}function ka(t){if(t=t[Pt]||t[Ma]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function po(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(P(33))}function Wr(t){var e=t[dy];return e||(e=t[dy]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function yt(t){t[El]=!0}var HE=new Set,FE={};function ur(t,e){fa(t,e),fa(t+"Capture",e)}function fa(t,e){for(FE[t]=e,t=0;t<e.length;t++)HE.add(e[t])}var Jw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),my={},py={};function e1(t){return id.call(py,t)?!0:id.call(my,t)?!1:Jw.test(t)?py[t]=!0:(my[t]=!0,!1)}function Du(t,e,n){if(e1(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function mu(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function oi(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}var of,gy;function Nr(t){if(of===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);of=e&&e[1]||"",gy=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+of+t+gy}var lf=!1;function uf(t,e){if(!t||lf)return"";lf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var p=_}Reflect.construct(t,[],g)}else{try{g.call()}catch(_){p=_}t.call(g.prototype)}}else{try{throw Error()}catch(_){p=_}(g=t())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&p&&typeof _.stack=="string")return[_.stack,p.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),f=l.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<f.length&&!f[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===f.length)for(i=u.length-1,s=f.length-1;1<=i&&0<=s&&u[i]!==f[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==f[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==f[s]){var m=`
`+u[i].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=i&&0<=s);break}}}finally{lf=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Nr(n):""}function t1(t){switch(t.tag){case 26:case 27:case 5:return Nr(t.type);case 16:return Nr("Lazy");case 13:return Nr("Suspense");case 19:return Nr("SuspenseList");case 0:case 15:return uf(t.type,!1);case 11:return uf(t.type.render,!1);case 1:return uf(t.type,!0);case 31:return Nr("Activity");default:return""}}function yy(t){try{var e="";do e+=t1(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function pn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function GE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function n1(t){var e=GE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sc(t){t._valueTracker||(t._valueTracker=n1(t))}function QE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=GE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function rc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var i1=/[\n"\\]/g;function _n(t){return t.replace(i1,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function rd(t,e,n,i,s,r,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+pn(e)):t.value!==""+pn(e)&&(t.value=""+pn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?ad(t,a,pn(e)):n!=null?ad(t,a,pn(n)):i!=null&&t.removeAttribute("value"),s==null&&r!=null&&(t.defaultChecked=!!r),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+pn(l):t.removeAttribute("name")}function KE(t,e,n,i,s,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null))return;n=n!=null?""+pn(n):"",e=e!=null?""+pn(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function ad(t,e,n){e==="number"&&rc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Jr(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+pn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function YE(t,e,n){if(e!=null&&(e=""+pn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+pn(n):""}function $E(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(P(92));if(mo(i)){if(1<i.length)throw Error(P(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=pn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i)}function da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var s1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _y(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||s1.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function XE(t,e,n){if(e!=null&&typeof e!="object")throw Error(P(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var s in e)i=e[s],e.hasOwnProperty(s)&&n[s]!==i&&_y(t,s,i)}else for(var r in e)e.hasOwnProperty(r)&&_y(t,r,e[r])}function Im(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var r1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),a1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ou(t){return a1.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var od=null;function Cm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Br=null,ea=null;function vy(t){var e=ka(t);if(e&&(t=e.stateNode)){var n=t[Xt]||null;e:switch(t=e.stateNode,e.type){case"input":if(rd(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+_n(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=i[Xt]||null;if(!s)throw Error(P(90));rd(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&QE(i)}break e;case"textarea":YE(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Jr(t,!!n.multiple,e,!1)}}}var cf=!1;function ZE(t,e,n){if(cf)return t(e,n);cf=!0;try{var i=t(e);return i}finally{if(cf=!1,(Br!==null||ea!==null)&&(ch(),Br&&(e=Br,t=ea,ea=Br=null,vy(e),t)))for(e=0;e<t.length;e++)vy(t[e])}}function Go(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Xt]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ld=!1;if(Ti)try{var ro={};Object.defineProperty(ro,"passive",{get:function(){ld=!0}}),window.addEventListener("test",ro,ro),window.removeEventListener("test",ro,ro)}catch{ld=!1}var es=null,Nm=null,Vu=null;function WE(){if(Vu)return Vu;var t,e=Nm,n=e.length,i,s="value"in es?es.value:es.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===s[r-i];i++);return Vu=s.slice(t,1<i?1-i:void 0)}function Mu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pu(){return!0}function Ey(){return!1}function Zt(t){function e(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?pu:Ey,this.isPropagationStopped=Ey,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pu)},persist:function(){},isPersistent:pu}),e}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},th=Zt(cr),Tl=Ue({},cr,{view:0,detail:0}),o1=Zt(Tl),hf,ff,ao,nh=Ue({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ao&&(ao&&t.type==="mousemove"?(hf=t.screenX-ao.screenX,ff=t.screenY-ao.screenY):ff=hf=0,ao=t),hf)},movementY:function(t){return"movementY"in t?t.movementY:ff}}),Ty=Zt(nh),l1=Ue({},nh,{dataTransfer:0}),u1=Zt(l1),c1=Ue({},Tl,{relatedTarget:0}),df=Zt(c1),h1=Ue({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),f1=Zt(h1),d1=Ue({},cr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),m1=Zt(d1),p1=Ue({},cr,{data:0}),by=Zt(p1),g1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_1[t])?!!e[t]:!1}function Dm(){return v1}var E1=Ue({},Tl,{key:function(t){if(t.key){var e=g1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?y1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dm,charCode:function(t){return t.type==="keypress"?Mu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),T1=Zt(E1),b1=Ue({},nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sy=Zt(b1),S1=Ue({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dm}),A1=Zt(S1),w1=Ue({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),x1=Zt(w1),R1=Ue({},nh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),I1=Zt(R1),C1=Ue({},cr,{newState:0,oldState:0}),N1=Zt(C1),D1=[9,13,27,32],Om=Ti&&"CompositionEvent"in window,Ao=null;Ti&&"documentMode"in document&&(Ao=document.documentMode);var O1=Ti&&"TextEvent"in window&&!Ao,JE=Ti&&(!Om||Ao&&8<Ao&&11>=Ao),Ay=" ",wy=!1;function eT(t,e){switch(t){case"keyup":return D1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qr=!1;function V1(t,e){switch(t){case"compositionend":return tT(e);case"keypress":return e.which!==32?null:(wy=!0,Ay);case"textInput":return t=e.data,t===Ay&&wy?null:t;default:return null}}function M1(t,e){if(qr)return t==="compositionend"||!Om&&eT(t,e)?(t=WE(),Vu=Nm=es=null,qr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JE&&e.locale!=="ko"?null:e.data;default:return null}}var k1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!k1[t.type]:e==="textarea"}function nT(t,e,n,i){Br?ea?ea.push(i):ea=[i]:Br=i,e=Sc(e,"onChange"),0<e.length&&(n=new th("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var wo=null,Qo=null;function j1(t){Y0(t,0)}function ih(t){var e=po(t);if(QE(e))return t}function Ry(t,e){if(t==="change")return e}var iT=!1;if(Ti){var mf;if(Ti){var pf="oninput"in document;if(!pf){var Iy=document.createElement("div");Iy.setAttribute("oninput","return;"),pf=typeof Iy.oninput=="function"}mf=pf}else mf=!1;iT=mf&&(!document.documentMode||9<document.documentMode)}function Cy(){wo&&(wo.detachEvent("onpropertychange",sT),Qo=wo=null)}function sT(t){if(t.propertyName==="value"&&ih(Qo)){var e=[];nT(e,Qo,t,Cm(t)),ZE(j1,e)}}function P1(t,e,n){t==="focusin"?(Cy(),wo=e,Qo=n,wo.attachEvent("onpropertychange",sT)):t==="focusout"&&Cy()}function L1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ih(Qo)}function U1(t,e){if(t==="click")return ih(e)}function z1(t,e){if(t==="input"||t==="change")return ih(e)}function B1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dn=typeof Object.is=="function"?Object.is:B1;function Ko(t,e){if(dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!id.call(e,s)||!dn(t[s],e[s]))return!1}return!0}function Ny(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Dy(t,e){var n=Ny(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ny(n)}}function rT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aT(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=rc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rc(t.document)}return e}function Vm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var q1=Ti&&"documentMode"in document&&11>=document.documentMode,Hr=null,ud=null,xo=null,cd=!1;function Oy(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cd||Hr==null||Hr!==rc(i)||(i=Hr,"selectionStart"in i&&Vm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),xo&&Ko(xo,i)||(xo=i,i=Sc(ud,"onSelect"),0<i.length&&(e=new th("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Hr)))}function zs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fr={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionrun:zs("Transition","TransitionRun"),transitionstart:zs("Transition","TransitionStart"),transitioncancel:zs("Transition","TransitionCancel"),transitionend:zs("Transition","TransitionEnd")},gf={},oT={};Ti&&(oT=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function hr(t){if(gf[t])return gf[t];if(!Fr[t])return t;var e=Fr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oT)return gf[t]=e[n];return t}var lT=hr("animationend"),uT=hr("animationiteration"),cT=hr("animationstart"),H1=hr("transitionrun"),F1=hr("transitionstart"),G1=hr("transitioncancel"),hT=hr("transitionend"),fT=new Map,hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hd.push("scrollEnd");function Vn(t,e){fT.set(t,e),ur(e,[t])}var Vy=new WeakMap;function vn(t,e){if(typeof t=="object"&&t!==null){var n=Vy.get(t);return n!==void 0?n:(e={value:t,source:e,stack:yy(e)},Vy.set(t,e),e)}return{value:t,source:e,stack:yy(e)}}var mn=[],Gr=0,Mm=0;function sh(){for(var t=Gr,e=Mm=Gr=0;e<t;){var n=mn[e];mn[e++]=null;var i=mn[e];mn[e++]=null;var s=mn[e];mn[e++]=null;var r=mn[e];if(mn[e++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&dT(n,s,r)}}function rh(t,e,n,i){mn[Gr++]=t,mn[Gr++]=e,mn[Gr++]=n,mn[Gr++]=i,Mm|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function km(t,e,n,i){return rh(t,e,n,i),ac(t)}function ja(t,e){return rh(t,null,null,e),ac(t)}function dT(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=t.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(s=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,s&&e!==null&&(s=31-un(n),t=r.hiddenUpdates,i=t[s],i===null?t[s]=[e]:i.push(e),e.lane=n|536870912),r):null}function ac(t){if(50<jo)throw jo=0,Od=null,Error(P(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Qr={};function Q1(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(t,e,n,i){return new Q1(t,e,n,i)}function jm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _i(t,e){var n=t.alternate;return n===null?(n=rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function mT(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ku(t,e,n,i,s,r){var a=0;if(i=t,typeof t=="function")jm(t)&&(a=1);else if(typeof t=="string")a=Yx(t,n,Bn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Jf:return t=rn(31,n,e,s),t.elementType=Jf,t.lanes=r,t;case Lr:return Ks(n.children,s,r,e);case VE:a=8,s|=24;break;case Xf:return t=rn(12,n,e,s|2),t.elementType=Xf,t.lanes=r,t;case Zf:return t=rn(13,n,e,s),t.elementType=Zf,t.lanes=r,t;case Wf:return t=rn(19,n,e,s),t.elementType=Wf,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jw:case hi:a=10;break e;case ME:a=9;break e;case bm:a=11;break e;case Sm:a=14;break e;case Hi:a=16,i=null;break e}a=29,n=Error(P(130,t===null?"null":typeof t,"")),i=null}return e=rn(a,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function Ks(t,e,n,i){return t=rn(7,t,i,e),t.lanes=n,t}function yf(t,e,n){return t=rn(6,t,null,e),t.lanes=n,t}function _f(t,e,n){return e=rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Kr=[],Yr=0,oc=null,lc=0,gn=[],yn=0,Ys=null,fi=1,di="";function qs(t,e){Kr[Yr++]=lc,Kr[Yr++]=oc,oc=t,lc=e}function pT(t,e,n){gn[yn++]=fi,gn[yn++]=di,gn[yn++]=Ys,Ys=t;var i=fi;t=di;var s=32-un(i)-1;i&=~(1<<s),n+=1;var r=32-un(e)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,fi=1<<32-un(e)+s|n<<s|i,di=r+t}else fi=1<<r|n<<s|i,di=t}function Pm(t){t.return!==null&&(qs(t,1),pT(t,1,0))}function Lm(t){for(;t===oc;)oc=Kr[--Yr],Kr[Yr]=null,lc=Kr[--Yr],Kr[Yr]=null;for(;t===Ys;)Ys=gn[--yn],gn[yn]=null,di=gn[--yn],gn[yn]=null,fi=gn[--yn],gn[yn]=null}var zt=null,Ze=null,_e=!1,$s=null,Un=!1,fd=Error(P(519));function er(t){var e=Error(P(418,""));throw Yo(vn(e,t)),fd}function My(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Pt]=t,e[Xt]=i,n){case"dialog":oe("cancel",e),oe("close",e);break;case"iframe":case"object":case"embed":oe("load",e);break;case"video":case"audio":for(n=0;n<Zo.length;n++)oe(Zo[n],e);break;case"source":oe("error",e);break;case"img":case"image":case"link":oe("error",e),oe("load",e);break;case"details":oe("toggle",e);break;case"input":oe("invalid",e),KE(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),sc(e);break;case"select":oe("invalid",e);break;case"textarea":oe("invalid",e),$E(e,i.value,i.defaultValue,i.children),sc(e)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||X0(e.textContent,n)?(i.popover!=null&&(oe("beforetoggle",e),oe("toggle",e)),i.onScroll!=null&&oe("scroll",e),i.onScrollEnd!=null&&oe("scrollend",e),i.onClick!=null&&(e.onclick=dh),e=!0):e=!1,e||er(t)}function ky(t){for(zt=t.return;zt;)switch(zt.tag){case 5:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:zt=zt.return}}function oo(t){if(t!==zt)return!1;if(!_e)return ky(t),_e=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Ld(t.type,t.memoizedProps)),n=!n),n&&Ze&&er(t),ky(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){Ze=Nn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}Ze=null}}else e===27?(e=Ze,Is(t.type)?(t=Bd,Bd=null,Ze=t):Ze=e):Ze=zt?Nn(t.stateNode.nextSibling):null;return!0}function bl(){Ze=zt=null,_e=!1}function jy(){var t=$s;return t!==null&&(Yt===null?Yt=t:Yt.push.apply(Yt,t),$s=null),t}function Yo(t){$s===null?$s=[t]:$s.push(t)}var dd=Jn(null),fr=null,mi=null;function Gi(t,e,n){He(dd,e._currentValue),e._currentValue=n}function vi(t){t._currentValue=dd.current,Et(dd)}function md(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function pd(t,e,n,i){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;e:for(;r!==null;){var l=r;r=s;for(var u=0;u<e.length;u++)if(l.context===e[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),md(r.return,n,t),i||(a=null);break e}r=l.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(P(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),md(a,n,t),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function Sl(t,e,n,i){t=null;for(var s=e,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(P(387));if(a=a.memoizedProps,a!==null){var l=s.type;dn(s.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(s===ec.current){if(a=s.alternate,a===null)throw Error(P(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(el):t=[el])}s=s.return}t!==null&&pd(e,t,n,i),e.flags|=262144}function uc(t){for(t=t.firstContext;t!==null;){if(!dn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function tr(t){fr=t,mi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Lt(t){return gT(fr,t)}function gu(t,e){return fr===null&&tr(t),gT(t,e)}function gT(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},mi===null){if(t===null)throw Error(P(308));mi=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else mi=mi.next=e;return n}var K1=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Y1=mt.unstable_scheduleCallback,$1=mt.unstable_NormalPriority,ht={$$typeof:hi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Um(){return{controller:new K1,data:new Map,refCount:0}}function Al(t){t.refCount--,t.refCount===0&&Y1($1,function(){t.controller.abort()})}var Ro=null,gd=0,ma=0,ta=null;function X1(t,e){if(Ro===null){var n=Ro=[];gd=0,ma=lp(),ta={status:"pending",value:void 0,then:function(i){n.push(i)}}}return gd++,e.then(Py,Py),e}function Py(){if(--gd===0&&Ro!==null){ta!==null&&(ta.status="fulfilled");var t=Ro;Ro=null,ma=0,ta=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Z1(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var Ly=te.S;te.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&X1(t,e),Ly!==null&&Ly(t,e)};var Xs=Jn(null);function zm(){var t=Xs.current;return t!==null?t:ke.pooledCache}function ju(t,e){e===null?He(Xs,Xs.current):He(Xs,e.pool)}function yT(){var t=zm();return t===null?null:{parent:ht._currentValue,pool:t}}var wl=Error(P(460)),_T=Error(P(474)),ah=Error(P(542)),yd={then:function(){}};function Uy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function yu(){}function vT(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(yu,yu),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,By(t),t;default:if(typeof e.status=="string")e.then(yu,yu);else{if(t=ke,t!==null&&100<t.shellSuspendCounter)throw Error(P(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=i}},function(i){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,By(t),t}throw Io=e,wl}}var Io=null;function zy(){if(Io===null)throw Error(P(459));var t=Io;return Io=null,t}function By(t){if(t===wl||t===ah)throw Error(P(483))}var Fi=!1;function Bm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _d(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function rs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function as(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Re&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,e=ac(t),dT(t,null,n),e}return rh(t,i,e,n),ac(t)}function Co(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,BE(t,n)}}function vf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var vd=!1;function No(){if(vd){var t=ta;if(t!==null)throw t}}function Do(t,e,n,i){vd=!1;var s=t.updateQueue;Fi=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,f=u.next;u.next=null,a===null?r=f:a.next=f,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=f:l.next=f,m.lastBaseUpdate=u))}if(r!==null){var g=s.baseState;a=0,m=f=u=null,l=r;do{var p=l.lane&-536870913,_=p!==l.lane;if(_?(me&p)===p:(i&p)===p){p!==0&&p===ma&&(vd=!0),m!==null&&(m=m.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var C=t,O=l;p=e;var V=n;switch(O.tag){case 1:if(C=O.payload,typeof C=="function"){g=C.call(V,g,p);break e}g=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=O.payload,p=typeof C=="function"?C.call(V,g,p):C,p==null)break e;g=Ue({},g,p);break e;case 2:Fi=!0}}p=l.callback,p!==null&&(t.flags|=64,_&&(t.flags|=8192),_=s.callbacks,_===null?s.callbacks=[p]:_.push(p))}else _={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(f=m=_,u=g):m=m.next=_,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);m===null&&(u=g),s.baseState=u,s.firstBaseUpdate=f,s.lastBaseUpdate=m,r===null&&(s.shared.lanes=0),Es|=a,t.lanes=a,t.memoizedState=g}}function ET(t,e){if(typeof t!="function")throw Error(P(191,t));t.call(e)}function TT(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)ET(n[t],e)}var pa=Jn(null),cc=Jn(0);function qy(t,e){t=Ai,He(cc,t),He(pa,e),Ai=t|e.baseLanes}function Ed(){He(cc,Ai),He(pa,pa.current)}function qm(){Ai=cc.current,Et(pa),Et(cc)}var _s=0,ae=null,Ne=null,ot=null,hc=!1,na=!1,nr=!1,fc=0,$o=0,ia=null,W1=0;function Je(){throw Error(P(321))}function Hm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dn(t[n],e[n]))return!1;return!0}function Fm(t,e,n,i,s,r){return _s=r,ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,te.H=t===null||t.memoizedState===null?WT:JT,nr=!1,r=n(i,s),nr=!1,na&&(r=ST(e,n,i,s)),bT(t),r}function bT(t){te.H=dc;var e=Ne!==null&&Ne.next!==null;if(_s=0,ot=Ne=ae=null,hc=!1,$o=0,ia=null,e)throw Error(P(300));t===null||vt||(t=t.dependencies,t!==null&&uc(t)&&(vt=!0))}function ST(t,e,n,i){ae=t;var s=0;do{if(na&&(ia=null),$o=0,na=!1,25<=s)throw Error(P(301));if(s+=1,ot=Ne=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}te.H=rx,r=e(n,i)}while(na);return r}function J1(){var t=te.H,e=t.useState()[0];return e=typeof e.then=="function"?xl(e):e,t=t.useState()[0],(Ne!==null?Ne.memoizedState:null)!==t&&(ae.flags|=1024),e}function Gm(){var t=fc!==0;return fc=0,t}function Qm(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Km(t){if(hc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}hc=!1}_s=0,ot=Ne=ae=null,na=!1,$o=fc=0,ia=null}function Qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?ae.memoizedState=ot=t:ot=ot.next=t,ot}function ct(){if(Ne===null){var t=ae.alternate;t=t!==null?t.memoizedState:null}else t=Ne.next;var e=ot===null?ae.memoizedState:ot.next;if(e!==null)ot=e,Ne=t;else{if(t===null)throw ae.alternate===null?Error(P(467)):Error(P(310));Ne=t,t={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},ot===null?ae.memoizedState=ot=t:ot=ot.next=t}return ot}function Ym(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xl(t){var e=$o;return $o+=1,ia===null&&(ia=[]),t=vT(ia,t,e),e=ae,(ot===null?e.memoizedState:ot.next)===null&&(e=e.alternate,te.H=e===null||e.memoizedState===null?WT:JT),t}function oh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return xl(t);if(t.$$typeof===hi)return Lt(t)}throw Error(P(438,String(t)))}function $m(t){var e=null,n=ae.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=ae.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Ym(),ae.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=Pw;return e.index++,n}function bi(t,e){return typeof e=="function"?e(t):e}function Pu(t){var e=ct();return Xm(e,Ne,t)}function Xm(t,e,n){var i=t.queue;if(i===null)throw Error(P(311));i.lastRenderedReducer=n;var s=t.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}e.baseQueue=s=r,i.pending=null}if(r=t.baseState,s===null)t.memoizedState=r;else{e=s.next;var l=a=null,u=null,f=e,m=!1;do{var g=f.lane&-536870913;if(g!==f.lane?(me&g)===g:(_s&g)===g){var p=f.revertLane;if(p===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),g===ma&&(m=!0);else if((_s&p)===p){f=f.next,p===ma&&(m=!0);continue}else g={lane:0,revertLane:f.revertLane,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(l=u=g,a=r):u=u.next=g,ae.lanes|=p,Es|=p;g=f.action,nr&&n(r,g),r=f.hasEagerState?f.eagerState:n(r,g)}else p={lane:g,revertLane:f.revertLane,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(l=u=p,a=r):u=u.next=p,ae.lanes|=g,Es|=g;f=f.next}while(f!==null&&f!==e);if(u===null?a=r:u.next=l,!dn(r,t.memoizedState)&&(vt=!0,m&&(n=ta,n!==null)))throw n;t.memoizedState=r,t.baseState=a,t.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Ef(t){var e=ct(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=t(r,a.action),a=a.next;while(a!==s);dn(r,e.memoizedState)||(vt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function AT(t,e,n){var i=ae,s=ct(),r=_e;if(r){if(n===void 0)throw Error(P(407));n=n()}else n=e();var a=!dn((Ne||s).memoizedState,n);a&&(s.memoizedState=n,vt=!0),s=s.queue;var l=RT.bind(null,i,s,t);if(Rl(2048,8,l,[t]),s.getSnapshot!==e||a||ot!==null&&ot.memoizedState.tag&1){if(i.flags|=2048,ga(9,lh(),xT.bind(null,i,s,n,e),null),ke===null)throw Error(P(349));r||_s&124||wT(i,e,n)}return n}function wT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ae.updateQueue,e===null?(e=Ym(),ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xT(t,e,n,i){e.value=n,e.getSnapshot=i,IT(e)&&CT(t)}function RT(t,e,n){return n(function(){IT(e)&&CT(t)})}function IT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dn(t,n)}catch{return!0}}function CT(t){var e=ja(t,2);e!==null&&hn(e,t,2)}function Td(t){var e=Qt();if(typeof t=="function"){var n=t;if(t=n(),nr){Ji(!0);try{n()}finally{Ji(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:t},e}function NT(t,e,n,i){return t.baseState=n,Xm(t,Ne,typeof i=="function"?i:bi)}function ex(t,e,n,i,s){if(uh(t))throw Error(P(485));if(t=e.action,t!==null){var r={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};te.T!==null?n(!0):r.isTransition=!1,i(r),n=e.pending,n===null?(r.next=e.pending=r,DT(e,r)):(r.next=n.next,e.pending=n.next=r)}}function DT(t,e){var n=e.action,i=e.payload,s=t.state;if(e.isTransition){var r=te.T,a={};te.T=a;try{var l=n(s,i),u=te.S;u!==null&&u(a,l),Hy(t,e,l)}catch(f){bd(t,e,f)}finally{te.T=r}}else try{r=n(s,i),Hy(t,e,r)}catch(f){bd(t,e,f)}}function Hy(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Fy(t,e,i)},function(i){return bd(t,e,i)}):Fy(t,e,n)}function Fy(t,e,n){e.status="fulfilled",e.value=n,OT(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,DT(t,n)))}function bd(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,OT(e),e=e.next;while(e!==i)}t.action=null}function OT(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function VT(t,e){return e}function Gy(t,e){if(_e){var n=ke.formState;if(n!==null){e:{var i=ae;if(_e){if(Ze){t:{for(var s=Ze,r=Un;s.nodeType!==8;){if(!r){s=null;break t}if(s=Nn(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){Ze=Nn(s.nextSibling),i=s.data==="F!";break e}}er(i)}i=!1}i&&(e=n[0])}}return n=Qt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:VT,lastRenderedState:e},n.queue=i,n=$T.bind(null,ae,i),i.dispatch=n,i=Td(!1),r=ep.bind(null,ae,!1,i.queue),i=Qt(),s={state:e,dispatch:null,action:t,pending:null},i.queue=s,n=ex.bind(null,ae,s,r,n),s.dispatch=n,i.memoizedState=t,[e,n,!1]}function Qy(t){var e=ct();return MT(e,Ne,t)}function MT(t,e,n){if(e=Xm(t,e,VT)[0],t=Pu(bi)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=xl(e)}catch(a){throw a===wl?ah:a}else i=e;e=ct();var s=e.queue,r=s.dispatch;return n!==e.memoizedState&&(ae.flags|=2048,ga(9,lh(),tx.bind(null,s,n),null)),[i,r,t]}function tx(t,e){t.action=e}function Ky(t){var e=ct(),n=Ne;if(n!==null)return MT(e,n,t);ct(),e=e.memoizedState,n=ct();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function ga(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=ae.updateQueue,e===null&&(e=Ym(),ae.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function lh(){return{destroy:void 0,resource:void 0}}function kT(){return ct().memoizedState}function Lu(t,e,n,i){var s=Qt();i=i===void 0?null:i,ae.flags|=t,s.memoizedState=ga(1|e,lh(),n,i)}function Rl(t,e,n,i){var s=ct();i=i===void 0?null:i;var r=s.memoizedState.inst;Ne!==null&&i!==null&&Hm(i,Ne.memoizedState.deps)?s.memoizedState=ga(e,r,n,i):(ae.flags|=t,s.memoizedState=ga(1|e,r,n,i))}function Yy(t,e){Lu(8390656,8,t,e)}function jT(t,e){Rl(2048,8,t,e)}function PT(t,e){return Rl(4,2,t,e)}function LT(t,e){return Rl(4,4,t,e)}function UT(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zT(t,e,n){n=n!=null?n.concat([t]):null,Rl(4,4,UT.bind(null,e,t),n)}function Zm(){}function BT(t,e){var n=ct();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Hm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function qT(t,e){var n=ct();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Hm(e,i[1]))return i[0];if(i=t(),nr){Ji(!0);try{t()}finally{Ji(!1)}}return n.memoizedState=[i,e],i}function Wm(t,e,n){return n===void 0||_s&1073741824?t.memoizedState=e:(t.memoizedState=n,t=O0(),ae.lanes|=t,Es|=t,n)}function HT(t,e,n,i){return dn(n,e)?n:pa.current!==null?(t=Wm(t,n,i),dn(t,e)||(vt=!0),t):_s&42?(t=O0(),ae.lanes|=t,Es|=t,e):(vt=!0,t.memoizedState=n)}function FT(t,e,n,i,s){var r=ve.p;ve.p=r!==0&&8>r?r:8;var a=te.T,l={};te.T=l,ep(t,!1,e,n);try{var u=s(),f=te.S;if(f!==null&&f(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var m=Z1(u,i);Oo(t,e,m,cn(t))}else Oo(t,e,i,cn(t))}catch(g){Oo(t,e,{then:function(){},status:"rejected",reason:g},cn())}finally{ve.p=r,te.T=a}}function nx(){}function Sd(t,e,n,i){if(t.tag!==5)throw Error(P(476));var s=GT(t).queue;FT(t,s,e,Qs,n===null?nx:function(){return QT(t),n(i)})}function GT(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Qs,baseState:Qs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:Qs},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function QT(t){var e=GT(t).next.queue;Oo(t,e,{},cn())}function Jm(){return Lt(el)}function KT(){return ct().memoizedState}function YT(){return ct().memoizedState}function ix(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=cn();t=rs(n);var i=as(e,t,n);i!==null&&(hn(i,e,n),Co(i,e,n)),e={cache:Um()},t.payload=e;return}e=e.return}}function sx(t,e,n){var i=cn();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},uh(t)?XT(e,n):(n=km(t,e,n,i),n!==null&&(hn(n,t,i),ZT(n,e,i)))}function $T(t,e,n){var i=cn();Oo(t,e,n,i)}function Oo(t,e,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(uh(t))XT(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,dn(l,a))return rh(t,e,s,0),ke===null&&sh(),!1}catch{}finally{}if(n=km(t,e,s,i),n!==null)return hn(n,t,i),ZT(n,e,i),!0}return!1}function ep(t,e,n,i){if(i={lane:2,revertLane:lp(),action:i,hasEagerState:!1,eagerState:null,next:null},uh(t)){if(e)throw Error(P(479))}else e=km(t,n,i,2),e!==null&&hn(e,t,2)}function uh(t){var e=t.alternate;return t===ae||e!==null&&e===ae}function XT(t,e){na=hc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ZT(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,BE(t,n)}}var dc={readContext:Lt,use:oh,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useLayoutEffect:Je,useInsertionEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useSyncExternalStore:Je,useId:Je,useHostTransitionStatus:Je,useFormState:Je,useActionState:Je,useOptimistic:Je,useMemoCache:Je,useCacheRefresh:Je},WT={readContext:Lt,use:oh,useCallback:function(t,e){return Qt().memoizedState=[t,e===void 0?null:e],t},useContext:Lt,useEffect:Yy,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Lu(4194308,4,UT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lu(4194308,4,t,e)},useInsertionEffect:function(t,e){Lu(4,2,t,e)},useMemo:function(t,e){var n=Qt();e=e===void 0?null:e;var i=t();if(nr){Ji(!0);try{t()}finally{Ji(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Qt();if(n!==void 0){var s=n(e);if(nr){Ji(!0);try{n(e)}finally{Ji(!1)}}}else s=e;return i.memoizedState=i.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=sx.bind(null,ae,t),[i.memoizedState,t]},useRef:function(t){var e=Qt();return t={current:t},e.memoizedState=t},useState:function(t){t=Td(t);var e=t.queue,n=$T.bind(null,ae,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Zm,useDeferredValue:function(t,e){var n=Qt();return Wm(n,t,e)},useTransition:function(){var t=Td(!1);return t=FT.bind(null,ae,t.queue,!0,!1),Qt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=ae,s=Qt();if(_e){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),ke===null)throw Error(P(349));me&124||wT(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,Yy(RT.bind(null,i,r,t),[t]),i.flags|=2048,ga(9,lh(),xT.bind(null,i,r,n,e),null),n},useId:function(){var t=Qt(),e=ke.identifierPrefix;if(_e){var n=di,i=fi;n=(i&~(1<<32-un(i)-1)).toString(32)+n,e="«"+e+"R"+n,n=fc++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=W1++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:Jm,useFormState:Gy,useActionState:Gy,useOptimistic:function(t){var e=Qt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=ep.bind(null,ae,!0,n),n.dispatch=e,[t,e]},useMemoCache:$m,useCacheRefresh:function(){return Qt().memoizedState=ix.bind(null,ae)}},JT={readContext:Lt,use:oh,useCallback:BT,useContext:Lt,useEffect:jT,useImperativeHandle:zT,useInsertionEffect:PT,useLayoutEffect:LT,useMemo:qT,useReducer:Pu,useRef:kT,useState:function(){return Pu(bi)},useDebugValue:Zm,useDeferredValue:function(t,e){var n=ct();return HT(n,Ne.memoizedState,t,e)},useTransition:function(){var t=Pu(bi)[0],e=ct().memoizedState;return[typeof t=="boolean"?t:xl(t),e]},useSyncExternalStore:AT,useId:KT,useHostTransitionStatus:Jm,useFormState:Qy,useActionState:Qy,useOptimistic:function(t,e){var n=ct();return NT(n,Ne,t,e)},useMemoCache:$m,useCacheRefresh:YT},rx={readContext:Lt,use:oh,useCallback:BT,useContext:Lt,useEffect:jT,useImperativeHandle:zT,useInsertionEffect:PT,useLayoutEffect:LT,useMemo:qT,useReducer:Ef,useRef:kT,useState:function(){return Ef(bi)},useDebugValue:Zm,useDeferredValue:function(t,e){var n=ct();return Ne===null?Wm(n,t,e):HT(n,Ne.memoizedState,t,e)},useTransition:function(){var t=Ef(bi)[0],e=ct().memoizedState;return[typeof t=="boolean"?t:xl(t),e]},useSyncExternalStore:AT,useId:KT,useHostTransitionStatus:Jm,useFormState:Ky,useActionState:Ky,useOptimistic:function(t,e){var n=ct();return Ne!==null?NT(n,Ne,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:$m,useCacheRefresh:YT},sa=null,Xo=0;function _u(t){var e=Xo;return Xo+=1,sa===null&&(sa=[]),vT(sa,t,e)}function lo(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function vu(t,e){throw e.$$typeof===kw?Error(P(525)):(t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function $y(t){var e=t._init;return e(t._payload)}function e0(t){function e(A,E){if(t){var x=A.deletions;x===null?(A.deletions=[E],A.flags|=16):x.push(E)}}function n(A,E){if(!t)return null;for(;E!==null;)e(A,E),E=E.sibling;return null}function i(A){for(var E=new Map;A!==null;)A.key!==null?E.set(A.key,A):E.set(A.index,A),A=A.sibling;return E}function s(A,E){return A=_i(A,E),A.index=0,A.sibling=null,A}function r(A,E,x){return A.index=x,t?(x=A.alternate,x!==null?(x=x.index,x<E?(A.flags|=67108866,E):x):(A.flags|=67108866,E)):(A.flags|=1048576,E)}function a(A){return t&&A.alternate===null&&(A.flags|=67108866),A}function l(A,E,x,D){return E===null||E.tag!==6?(E=yf(x,A.mode,D),E.return=A,E):(E=s(E,x),E.return=A,E)}function u(A,E,x,D){var U=x.type;return U===Lr?m(A,E,x.props.children,D,x.key):E!==null&&(E.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Hi&&$y(U)===E.type)?(E=s(E,x.props),lo(E,x),E.return=A,E):(E=ku(x.type,x.key,x.props,null,A.mode,D),lo(E,x),E.return=A,E)}function f(A,E,x,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==x.containerInfo||E.stateNode.implementation!==x.implementation?(E=_f(x,A.mode,D),E.return=A,E):(E=s(E,x.children||[]),E.return=A,E)}function m(A,E,x,D,U){return E===null||E.tag!==7?(E=Ks(x,A.mode,D,U),E.return=A,E):(E=s(E,x),E.return=A,E)}function g(A,E,x){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=yf(""+E,A.mode,x),E.return=A,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case hu:return x=ku(E.type,E.key,E.props,null,A.mode,x),lo(x,E),x.return=A,x;case fo:return E=_f(E,A.mode,x),E.return=A,E;case Hi:var D=E._init;return E=D(E._payload),g(A,E,x)}if(mo(E)||so(E))return E=Ks(E,A.mode,x,null),E.return=A,E;if(typeof E.then=="function")return g(A,_u(E),x);if(E.$$typeof===hi)return g(A,gu(A,E),x);vu(A,E)}return null}function p(A,E,x,D){var U=E!==null?E.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return U!==null?null:l(A,E,""+x,D);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case hu:return x.key===U?u(A,E,x,D):null;case fo:return x.key===U?f(A,E,x,D):null;case Hi:return U=x._init,x=U(x._payload),p(A,E,x,D)}if(mo(x)||so(x))return U!==null?null:m(A,E,x,D,null);if(typeof x.then=="function")return p(A,E,_u(x),D);if(x.$$typeof===hi)return p(A,E,gu(A,x),D);vu(A,x)}return null}function _(A,E,x,D,U){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return A=A.get(x)||null,l(E,A,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case hu:return A=A.get(D.key===null?x:D.key)||null,u(E,A,D,U);case fo:return A=A.get(D.key===null?x:D.key)||null,f(E,A,D,U);case Hi:var F=D._init;return D=F(D._payload),_(A,E,x,D,U)}if(mo(D)||so(D))return A=A.get(x)||null,m(E,A,D,U,null);if(typeof D.then=="function")return _(A,E,x,_u(D),U);if(D.$$typeof===hi)return _(A,E,x,gu(E,D),U);vu(E,D)}return null}function C(A,E,x,D){for(var U=null,F=null,T=E,v=E=0,b=null;T!==null&&v<x.length;v++){T.index>v?(b=T,T=null):b=T.sibling;var S=p(A,T,x[v],D);if(S===null){T===null&&(T=b);break}t&&T&&S.alternate===null&&e(A,T),E=r(S,E,v),F===null?U=S:F.sibling=S,F=S,T=b}if(v===x.length)return n(A,T),_e&&qs(A,v),U;if(T===null){for(;v<x.length;v++)T=g(A,x[v],D),T!==null&&(E=r(T,E,v),F===null?U=T:F.sibling=T,F=T);return _e&&qs(A,v),U}for(T=i(T);v<x.length;v++)b=_(T,A,v,x[v],D),b!==null&&(t&&b.alternate!==null&&T.delete(b.key===null?v:b.key),E=r(b,E,v),F===null?U=b:F.sibling=b,F=b);return t&&T.forEach(function(R){return e(A,R)}),_e&&qs(A,v),U}function O(A,E,x,D){if(x==null)throw Error(P(151));for(var U=null,F=null,T=E,v=E=0,b=null,S=x.next();T!==null&&!S.done;v++,S=x.next()){T.index>v?(b=T,T=null):b=T.sibling;var R=p(A,T,S.value,D);if(R===null){T===null&&(T=b);break}t&&T&&R.alternate===null&&e(A,T),E=r(R,E,v),F===null?U=R:F.sibling=R,F=R,T=b}if(S.done)return n(A,T),_e&&qs(A,v),U;if(T===null){for(;!S.done;v++,S=x.next())S=g(A,S.value,D),S!==null&&(E=r(S,E,v),F===null?U=S:F.sibling=S,F=S);return _e&&qs(A,v),U}for(T=i(T);!S.done;v++,S=x.next())S=_(T,A,v,S.value,D),S!==null&&(t&&S.alternate!==null&&T.delete(S.key===null?v:S.key),E=r(S,E,v),F===null?U=S:F.sibling=S,F=S);return t&&T.forEach(function(I){return e(A,I)}),_e&&qs(A,v),U}function V(A,E,x,D){if(typeof x=="object"&&x!==null&&x.type===Lr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case hu:e:{for(var U=x.key;E!==null;){if(E.key===U){if(U=x.type,U===Lr){if(E.tag===7){n(A,E.sibling),D=s(E,x.props.children),D.return=A,A=D;break e}}else if(E.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Hi&&$y(U)===E.type){n(A,E.sibling),D=s(E,x.props),lo(D,x),D.return=A,A=D;break e}n(A,E);break}else e(A,E);E=E.sibling}x.type===Lr?(D=Ks(x.props.children,A.mode,D,x.key),D.return=A,A=D):(D=ku(x.type,x.key,x.props,null,A.mode,D),lo(D,x),D.return=A,A=D)}return a(A);case fo:e:{for(U=x.key;E!==null;){if(E.key===U)if(E.tag===4&&E.stateNode.containerInfo===x.containerInfo&&E.stateNode.implementation===x.implementation){n(A,E.sibling),D=s(E,x.children||[]),D.return=A,A=D;break e}else{n(A,E);break}else e(A,E);E=E.sibling}D=_f(x,A.mode,D),D.return=A,A=D}return a(A);case Hi:return U=x._init,x=U(x._payload),V(A,E,x,D)}if(mo(x))return C(A,E,x,D);if(so(x)){if(U=so(x),typeof U!="function")throw Error(P(150));return x=U.call(x),O(A,E,x,D)}if(typeof x.then=="function")return V(A,E,_u(x),D);if(x.$$typeof===hi)return V(A,E,gu(A,x),D);vu(A,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,E!==null&&E.tag===6?(n(A,E.sibling),D=s(E,x),D.return=A,A=D):(n(A,E),D=yf(x,A.mode,D),D.return=A,A=D),a(A)):n(A,E)}return function(A,E,x,D){try{Xo=0;var U=V(A,E,x,D);return sa=null,U}catch(T){if(T===wl||T===ah)throw T;var F=rn(29,T,null,A.mode);return F.lanes=D,F.return=A,F}finally{}}}var ya=e0(!0),t0=e0(!1),bn=Jn(null),Hn=null;function Qi(t){var e=t.alternate;He(ft,ft.current&1),He(bn,t),Hn===null&&(e===null||pa.current!==null||e.memoizedState!==null)&&(Hn=t)}function n0(t){if(t.tag===22){if(He(ft,ft.current),He(bn,t),Hn===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Hn=t)}}else Ki()}function Ki(){He(ft,ft.current),He(bn,bn.current)}function pi(t){Et(bn),Hn===t&&(Hn=null),Et(ft)}var ft=Jn(0);function mc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||zd(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Tf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ad={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=cn(),s=rs(i);s.payload=e,n!=null&&(s.callback=n),e=as(t,s,i),e!==null&&(hn(e,t,i),Co(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=cn(),s=rs(i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=as(t,s,i),e!==null&&(hn(e,t,i),Co(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=cn(),i=rs(n);i.tag=2,e!=null&&(i.callback=e),e=as(t,i,n),e!==null&&(hn(e,t,n),Co(e,t,n))}};function Xy(t,e,n,i,s,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,a):e.prototype&&e.prototype.isPureReactComponent?!Ko(n,i)||!Ko(s,r):!0}function Zy(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ad.enqueueReplaceState(e,e.state,null)}function ir(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Ue({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}var pc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function i0(t){pc(t)}function s0(t){console.error(t)}function r0(t){pc(t)}function gc(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function Wy(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function wd(t,e,n){return n=rs(n),n.tag=3,n.payload={element:null},n.callback=function(){gc(t,e)},n}function a0(t){return t=rs(t),t.tag=3,t}function o0(t,e,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;t.payload=function(){return s(r)},t.callback=function(){Wy(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){Wy(e,n,i),typeof s!="function"&&(os===null?os=new Set([this]):os.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function ax(t,e,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Sl(e,n,s,!0),n=bn.current,n!==null){switch(n.tag){case 13:return Hn===null?Vd():n.alternate===null&&We===0&&(We=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===yd?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Of(t,i,s)),!1;case 22:return n.flags|=65536,i===yd?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Of(t,i,s)),!1}throw Error(P(435,n.tag))}return Of(t,i,s),Vd(),!1}if(_e)return e=bn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,i!==fd&&(t=Error(P(422),{cause:i}),Yo(vn(t,n)))):(i!==fd&&(e=Error(P(423),{cause:i}),Yo(vn(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,i=vn(i,n),s=wd(t.stateNode,i,s),vf(t,s),We!==4&&(We=2)),!1;var r=Error(P(520),{cause:i});if(r=vn(r,n),ko===null?ko=[r]:ko.push(r),We!==4&&(We=2),e===null)return!0;i=vn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=wd(n.stateNode,i,t),vf(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(os===null||!os.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=a0(s),o0(s,t,n,i),vf(n,s),!1}n=n.return}while(n!==null);return!1}var l0=Error(P(461)),vt=!1;function wt(t,e,n,i){e.child=t===null?t0(e,null,n,i):ya(e,t.child,n,i)}function Jy(t,e,n,i,s){n=n.render;var r=e.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return tr(e),i=Fm(t,e,n,a,r,s),l=Gm(),t!==null&&!vt?(Qm(t,e,s),Si(t,e,s)):(_e&&l&&Pm(e),e.flags|=1,wt(t,e,i,s),e.child)}function e_(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!jm(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,u0(t,e,r,i,s)):(t=ku(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!tp(t,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:Ko,n(a,i)&&t.ref===e.ref)return Si(t,e,s)}return e.flags|=1,t=_i(r,i),t.ref=e.ref,t.return=e,e.child=t}function u0(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(Ko(r,i)&&t.ref===e.ref)if(vt=!1,e.pendingProps=i=r,tp(t,s))t.flags&131072&&(vt=!0);else return e.lanes=t.lanes,Si(t,e,s)}return xd(t,e,n,i,s)}function c0(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden"){if(e.flags&128){if(i=r!==null?r.baseLanes|n:n,t!==null){for(s=e.child=t.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;e.childLanes=r&~i}else e.childLanes=0,e.child=null;return t_(t,e,i,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&ju(e,r!==null?r.cachePool:null),r!==null?qy(e,r):Ed(),n0(e);else return e.lanes=e.childLanes=536870912,t_(t,e,r!==null?r.baseLanes|n:n,n)}else r!==null?(ju(e,r.cachePool),qy(e,r),Ki(),e.memoizedState=null):(t!==null&&ju(e,null),Ed(),Ki());return wt(t,e,s,n),e.child}function t_(t,e,n,i){var s=zm();return s=s===null?null:{parent:ht._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&ju(e,null),Ed(),n0(e),t!==null&&Sl(t,e,i,!0),null}function Uu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(P(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function xd(t,e,n,i,s){return tr(e),n=Fm(t,e,n,i,void 0,s),i=Gm(),t!==null&&!vt?(Qm(t,e,s),Si(t,e,s)):(_e&&i&&Pm(e),e.flags|=1,wt(t,e,n,s),e.child)}function n_(t,e,n,i,s,r){return tr(e),e.updateQueue=null,n=ST(e,i,n,s),bT(t),i=Gm(),t!==null&&!vt?(Qm(t,e,r),Si(t,e,r)):(_e&&i&&Pm(e),e.flags|=1,wt(t,e,n,r),e.child)}function i_(t,e,n,i,s){if(tr(e),e.stateNode===null){var r=Qr,a=n.contextType;typeof a=="object"&&a!==null&&(r=Lt(a)),r=new n(i,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Ad,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=i,r.state=e.memoizedState,r.refs={},Bm(e),a=n.contextType,r.context=typeof a=="object"&&a!==null?Lt(a):Qr,r.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Tf(e,n,a,i),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&Ad.enqueueReplaceState(r,r.state,null),Do(e,i,r,s),No(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){r=e.stateNode;var l=e.memoizedProps,u=ir(n,l);r.props=u;var f=r.context,m=n.contextType;a=Qr,typeof m=="object"&&m!==null&&(a=Lt(m));var g=n.getDerivedStateFromProps;m=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,m||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||f!==a)&&Zy(e,r,i,a),Fi=!1;var p=e.memoizedState;r.state=p,Do(e,i,r,s),No(),f=e.memoizedState,l||p!==f||Fi?(typeof g=="function"&&(Tf(e,n,g,i),f=e.memoizedState),(u=Fi||Xy(e,n,u,i,p,f,a))?(m||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=f),r.props=i,r.state=f,r.context=a,i=u):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,_d(t,e),a=e.memoizedProps,m=ir(n,a),r.props=m,g=e.pendingProps,p=r.context,f=n.contextType,u=Qr,typeof f=="object"&&f!==null&&(u=Lt(f)),l=n.getDerivedStateFromProps,(f=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==g||p!==u)&&Zy(e,r,i,u),Fi=!1,p=e.memoizedState,r.state=p,Do(e,i,r,s),No();var _=e.memoizedState;a!==g||p!==_||Fi||t!==null&&t.dependencies!==null&&uc(t.dependencies)?(typeof l=="function"&&(Tf(e,n,l,i),_=e.memoizedState),(m=Fi||Xy(e,n,m,i,p,_,u)||t!==null&&t.dependencies!==null&&uc(t.dependencies))?(f||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,_,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,_,u)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),r.props=i,r.state=_,r.context=u,i=m):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return r=i,Uu(t,e),i=(e.flags&128)!==0,r||i?(r=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&i?(e.child=ya(e,t.child,null,s),e.child=ya(e,null,n,s)):wt(t,e,n,s),e.memoizedState=r.state,t=e.child):t=Si(t,e,s),t}function s_(t,e,n,i){return bl(),e.flags|=256,wt(t,e,n,i),e.child}var bf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sf(t){return{baseLanes:t,cachePool:yT()}}function Af(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Tn),t}function h0(t,e,n){var i=e.pendingProps,s=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=t!==null&&t.memoizedState===null?!1:(ft.current&2)!==0),a&&(s=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(_e){if(s?Qi(e):Ki(),_e){var l=Ze,u;if(u=l){e:{for(u=l,l=Un;u.nodeType!==8;){if(!l){l=null;break e}if(u=Nn(u.nextSibling),u===null){l=null;break e}}l=u}l!==null?(e.memoizedState={dehydrated:l,treeContext:Ys!==null?{id:fi,overflow:di}:null,retryLane:536870912,hydrationErrors:null},u=rn(18,null,null,0),u.stateNode=l,u.return=e,e.child=u,zt=e,Ze=null,u=!0):u=!1}u||er(e)}if(l=e.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return zd(l)?e.lanes=32:e.lanes=536870912,null;pi(e)}return l=i.children,i=i.fallback,s?(Ki(),s=e.mode,l=yc({mode:"hidden",children:l},s),i=Ks(i,s,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,s=e.child,s.memoizedState=Sf(n),s.childLanes=Af(t,a,n),e.memoizedState=bf,i):(Qi(e),Rd(e,l))}if(u=t.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(r)e.flags&256?(Qi(e),e.flags&=-257,e=wf(t,e,n)):e.memoizedState!==null?(Ki(),e.child=t.child,e.flags|=128,e=null):(Ki(),s=i.fallback,l=e.mode,i=yc({mode:"visible",children:i.children},l),s=Ks(s,l,n,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,ya(e,t.child,null,n),i=e.child,i.memoizedState=Sf(n),i.childLanes=Af(t,a,n),e.memoizedState=bf,e=s);else if(Qi(e),zd(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var f=a.dgst;a=f,i=Error(P(419)),i.stack="",i.digest=a,Yo({value:i,source:null,stack:null}),e=wf(t,e,n)}else if(vt||Sl(t,e,n,!1),a=(n&t.childLanes)!==0,vt||a){if(a=ke,a!==null&&(i=n&-n,i=i&42?1:wm(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,ja(t,i),hn(a,t,i),l0;l.data==="$?"||Vd(),e=wf(t,e,n)}else l.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,Ze=Nn(l.nextSibling),zt=e,_e=!0,$s=null,Un=!1,t!==null&&(gn[yn++]=fi,gn[yn++]=di,gn[yn++]=Ys,fi=t.id,di=t.overflow,Ys=e),e=Rd(e,i.children),e.flags|=4096);return e}return s?(Ki(),s=i.fallback,l=e.mode,u=t.child,f=u.sibling,i=_i(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,f!==null?s=_i(f,s):(s=Ks(s,l,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=t.child.memoizedState,l===null?l=Sf(n):(u=l.cachePool,u!==null?(f=ht._currentValue,u=u.parent!==f?{parent:f,pool:f}:u):u=yT(),l={baseLanes:l.baseLanes|n,cachePool:u}),s.memoizedState=l,s.childLanes=Af(t,a,n),e.memoizedState=bf,i):(Qi(e),n=t.child,t=n.sibling,n=_i(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Rd(t,e){return e=yc({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function yc(t,e){return t=rn(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function wf(t,e,n){return ya(e,t.child,null,n),t=Rd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function r_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),md(t.return,e,n)}function xf(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function f0(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(wt(t,e,i.children,n),i=ft.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&r_(t,n,e);else if(t.tag===19)r_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch(He(ft,i),s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&mc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),xf(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&mc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}xf(e,!0,n,null,r);break;case"together":xf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Si(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Es|=e.lanes,!(n&e.childLanes))if(t!==null){if(Sl(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=_i(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_i(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tp(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&uc(t)))}function ox(t,e,n){switch(e.tag){case 3:tc(e,e.stateNode.containerInfo),Gi(e,ht,t.memoizedState.cache),bl();break;case 27:case 5:nd(e);break;case 4:tc(e,e.stateNode.containerInfo);break;case 10:Gi(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Qi(e),e.flags|=128,null):n&e.child.childLanes?h0(t,e,n):(Qi(e),t=Si(t,e,n),t!==null?t.sibling:null);Qi(e);break;case 19:var s=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Sl(t,e,n,!1),i=(n&e.childLanes)!==0),s){if(i)return f0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),He(ft,ft.current),i)break;return null;case 22:case 23:return e.lanes=0,c0(t,e,n);case 24:Gi(e,ht,t.memoizedState.cache)}return Si(t,e,n)}function d0(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)vt=!0;else{if(!tp(t,n)&&!(e.flags&128))return vt=!1,ox(t,e,n);vt=!!(t.flags&131072)}else vt=!1,_e&&e.flags&1048576&&pT(e,lc,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var i=e.elementType,s=i._init;if(i=s(i._payload),e.type=i,typeof i=="function")jm(i)?(t=ir(i,t),e.tag=1,e=i_(null,e,i,t,n)):(e.tag=0,e=xd(null,e,i,t,n));else{if(i!=null){if(s=i.$$typeof,s===bm){e.tag=11,e=Jy(null,e,i,t,n);break e}else if(s===Sm){e.tag=14,e=e_(null,e,i,t,n);break e}}throw e=ed(i)||i,Error(P(306,e,""))}}return e;case 0:return xd(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,s=ir(i,e.pendingProps),i_(t,e,i,s,n);case 3:e:{if(tc(e,e.stateNode.containerInfo),t===null)throw Error(P(387));i=e.pendingProps;var r=e.memoizedState;s=r.element,_d(t,e),Do(e,i,null,n);var a=e.memoizedState;if(i=a.cache,Gi(e,ht,i),i!==r.cache&&pd(e,[ht],n,!0),No(),i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=s_(t,e,i,n);break e}else if(i!==s){s=vn(Error(P(424)),e),Yo(s),e=s_(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ze=Nn(t.firstChild),zt=e,_e=!0,$s=null,Un=!0,n=t0(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(bl(),i===s){e=Si(t,e,n);break e}wt(t,e,i,n)}e=e.child}return e;case 26:return Uu(t,e),t===null?(n=b_(e.type,null,e.pendingProps,null))?e.memoizedState=n:_e||(n=e.type,t=e.pendingProps,i=Ac(ss.current).createElement(n),i[Pt]=e,i[Xt]=t,Nt(i,n,t),yt(i),e.stateNode=i):e.memoizedState=b_(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return nd(e),t===null&&_e&&(i=e.stateNode=J0(e.type,e.pendingProps,ss.current),zt=e,Un=!0,s=Ze,Is(e.type)?(Bd=s,Ze=Nn(i.firstChild)):Ze=s),wt(t,e,e.pendingProps.children,n),Uu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&_e&&((s=i=Ze)&&(i=kx(i,e.type,e.pendingProps,Un),i!==null?(e.stateNode=i,zt=e,Ze=Nn(i.firstChild),Un=!1,s=!0):s=!1),s||er(e)),nd(e),s=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,i=r.children,Ld(s,r)?i=null:a!==null&&Ld(s,a)&&(e.flags|=32),e.memoizedState!==null&&(s=Fm(t,e,J1,null,null,n),el._currentValue=s),Uu(t,e),wt(t,e,i,n),e.child;case 6:return t===null&&_e&&((t=n=Ze)&&(n=jx(n,e.pendingProps,Un),n!==null?(e.stateNode=n,zt=e,Ze=null,t=!0):t=!1),t||er(e)),null;case 13:return h0(t,e,n);case 4:return tc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ya(e,null,i,n):wt(t,e,i,n),e.child;case 11:return Jy(t,e,e.type,e.pendingProps,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Gi(e,e.type,i.value),wt(t,e,i.children,n),e.child;case 9:return s=e.type._context,i=e.pendingProps.children,tr(e),s=Lt(s),i=i(s),e.flags|=1,wt(t,e,i,n),e.child;case 14:return e_(t,e,e.type,e.pendingProps,n);case 15:return u0(t,e,e.type,e.pendingProps,n);case 19:return f0(t,e,n);case 31:return i=e.pendingProps,n=e.mode,i={mode:i.mode,children:i.children},t===null?(n=yc(i,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=_i(t.child,i),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return c0(t,e,n);case 24:return tr(e),i=Lt(ht),t===null?(s=zm(),s===null&&(s=ke,r=Um(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),e.memoizedState={parent:i,cache:s},Bm(e),Gi(e,ht,s)):(t.lanes&n&&(_d(t,e),Do(e,null,null,n),No()),s=t.memoizedState,r=e.memoizedState,s.parent!==i?(s={parent:i,cache:i},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),Gi(e,ht,i)):(i=r.cache,Gi(e,ht,i),i!==s.cache&&pd(e,[ht],n,!0))),wt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(P(156,e.tag))}function li(t){t.flags|=4}function a_(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!nb(e)){if(e=bn.current,e!==null&&((me&4194048)===me?Hn!==null:(me&62914560)!==me&&!(me&536870912)||e!==Hn))throw Io=yd,_T;t.flags|=8192}}function Eu(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?UE():536870912,t.lanes|=e,_a|=e)}function uo(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function lx(t,e,n){var i=e.pendingProps;switch(Lm(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(e),null;case 1:return Ge(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),vi(ht),ha(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(oo(e)?li(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jy())),Ge(e),null;case 26:return n=e.memoizedState,t===null?(li(e),n!==null?(Ge(e),a_(e,n)):(Ge(e),e.flags&=-16777217)):n?n!==t.memoizedState?(li(e),Ge(e),a_(e,n)):(Ge(e),e.flags&=-16777217):(t.memoizedProps!==i&&li(e),Ge(e),e.flags&=-16777217),null;case 27:nc(e),n=ss.current;var s=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==i&&li(e);else{if(!i){if(e.stateNode===null)throw Error(P(166));return Ge(e),null}t=Bn.current,oo(e)?My(e):(t=J0(s,i,n),e.stateNode=t,li(e))}return Ge(e),null;case 5:if(nc(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&li(e);else{if(!i){if(e.stateNode===null)throw Error(P(166));return Ge(e),null}if(t=Bn.current,oo(e))My(e);else{switch(s=Ac(ss.current),t){case 1:t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}t[Pt]=e,t[Xt]=i;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=t;e:switch(Nt(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&li(e)}}return Ge(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&li(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(P(166));if(t=ss.current,oo(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,s=zt,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}t[Pt]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||X0(t.nodeValue,n)),t||er(e)}else t=Ac(t).createTextNode(i),t[Pt]=e,e.stateNode=t}return Ge(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=oo(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(P(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(P(317));s[Pt]=e}else bl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ge(e),s=!1}else s=jy(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(pi(e),e):(pi(e),null)}if(pi(e),e.flags&128)return e.lanes=n,e;if(n=i!==null,t=t!==null&&t.memoizedState!==null,n){i=e.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Eu(e,e.updateQueue),Ge(e),null;case 4:return ha(),t===null&&up(e.stateNode.containerInfo),Ge(e),null;case 10:return vi(e.type),Ge(e),null;case 19:if(Et(ft),s=e.memoizedState,s===null)return Ge(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)uo(s,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=mc(t),r!==null){for(e.flags|=128,uo(s,!1),t=r.updateQueue,e.updateQueue=t,Eu(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)mT(n,t),n=n.sibling;return He(ft,ft.current&1|2),e.child}t=t.sibling}s.tail!==null&&qn()>vc&&(e.flags|=128,i=!0,uo(s,!1),e.lanes=4194304)}else{if(!i)if(t=mc(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Eu(e,t),uo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!_e)return Ge(e),null}else 2*qn()-s.renderingStartTime>vc&&n!==536870912&&(e.flags|=128,i=!0,uo(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=qn(),e.sibling=null,t=ft.current,He(ft,i?t&1|2:t&1),e):(Ge(e),null);case 22:case 23:return pi(e),qm(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Ge(e),e.subtreeFlags&6&&(e.flags|=8192)):Ge(e),n=e.updateQueue,n!==null&&Eu(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Et(Xs),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),vi(ht),Ge(e),null;case 25:return null;case 30:return null}throw Error(P(156,e.tag))}function ux(t,e){switch(Lm(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vi(ht),ha(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return nc(e),null;case 13:if(pi(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));bl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Et(ft),null;case 4:return ha(),null;case 10:return vi(e.type),null;case 22:case 23:return pi(e),qm(),t!==null&&Et(Xs),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return vi(ht),null;case 25:return null;default:return null}}function m0(t,e){switch(Lm(e),e.tag){case 3:vi(ht),ha();break;case 26:case 27:case 5:nc(e);break;case 4:ha();break;case 13:pi(e);break;case 19:Et(ft);break;case 10:vi(e.type);break;case 22:case 23:pi(e),qm(),t!==null&&Et(Xs);break;case 24:vi(ht)}}function Il(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&t)===t){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(l){Me(e,e.return,l)}}function vs(t,e,n){try{var i=e.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&t)===t){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,s=e;var u=n,f=l;try{f()}catch(m){Me(s,u,m)}}}i=i.next}while(i!==r)}}catch(m){Me(e,e.return,m)}}function p0(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{TT(e,n)}catch(i){Me(t,t.return,i)}}}function g0(t,e,n){n.props=ir(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Me(t,e,i)}}function Vo(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(s){Me(t,e,s)}}function zn(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){Me(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){Me(t,e,s)}else n.current=null}function y0(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){Me(t,t.return,s)}}function Rf(t,e,n){try{var i=t.stateNode;Nx(i,t.type,n,e),i[Xt]=e}catch(s){Me(t,t.return,s)}}function _0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Is(t.type)||t.tag===4}function If(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Is(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Id(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dh));else if(i!==4&&(i===27&&Is(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Id(t,e,n),t=t.sibling;t!==null;)Id(t,e,n),t=t.sibling}function _c(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Is(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(_c(t,e,n),t=t.sibling;t!==null;)_c(t,e,n),t=t.sibling}function v0(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);Nt(e,i,n),e[Pt]=t,e[Xt]=n}catch(r){Me(t,t.return,r)}}var ci=!1,et=!1,Cf=!1,o_=typeof WeakSet=="function"?WeakSet:Set,gt=null;function cx(t,e){if(t=t.containerInfo,jd=Ic,t=aT(t),Vm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,f=0,m=0,g=t,p=null;t:for(;;){for(var _;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==r||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)p=g,g=_;for(;;){if(g===t)break t;if(p===n&&++f===s&&(l=a),p===r&&++m===i&&(u=a),(_=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pd={focusedElem:t,selectionRange:n},Ic=!1,gt=e;gt!==null;)if(e=gt,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,gt=t;else for(;gt!==null;){switch(e=gt,r=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var C=ir(n.type,s,n.elementType===n.type);t=i.getSnapshotBeforeUpdate(C,r),i.__reactInternalSnapshotBeforeUpdate=t}catch(O){Me(n,n.return,O)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Ud(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ud(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(P(163))}if(t=e.sibling,t!==null){t.return=e.return,gt=t;break}gt=e.return}}function E0(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:zi(t,n),i&4&&Il(5,n);break;case 1:if(zi(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Me(n,n.return,a)}else{var s=ir(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Me(n,n.return,a)}}i&64&&p0(n),i&512&&Vo(n,n.return);break;case 3:if(zi(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{TT(t,e)}catch(a){Me(n,n.return,a)}}break;case 27:e===null&&i&4&&v0(n);case 26:case 5:zi(t,n),e===null&&i&4&&y0(n),i&512&&Vo(n,n.return);break;case 12:zi(t,n);break;case 13:zi(t,n),i&4&&S0(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=vx.bind(null,n),Px(t,n))));break;case 22:if(i=n.memoizedState!==null||ci,!i){e=e!==null&&e.memoizedState!==null||et,s=ci;var r=et;ci=i,(et=e)&&!r?qi(t,n,(n.subtreeFlags&8772)!==0):zi(t,n),ci=s,et=r}break;case 30:break;default:zi(t,n)}}function T0(t){var e=t.alternate;e!==null&&(t.alternate=null,T0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Rm(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Be=null,Kt=!1;function ui(t,e,n){for(n=n.child;n!==null;)b0(t,e,n),n=n.sibling}function b0(t,e,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(yl,n)}catch{}switch(n.tag){case 26:et||zn(n,e),ui(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:et||zn(n,e);var i=Be,s=Kt;Is(n.type)&&(Be=n.stateNode,Kt=!1),ui(t,e,n),Po(n.stateNode),Be=i,Kt=s;break;case 5:et||zn(n,e);case 6:if(i=Be,s=Kt,Be=null,ui(t,e,n),Be=i,Kt=s,Be!==null)if(Kt)try{(Be.nodeType===9?Be.body:Be.nodeName==="HTML"?Be.ownerDocument.body:Be).removeChild(n.stateNode)}catch(r){Me(n,e,r)}else try{Be.removeChild(n.stateNode)}catch(r){Me(n,e,r)}break;case 18:Be!==null&&(Kt?(t=Be,v_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),il(t)):v_(Be,n.stateNode));break;case 4:i=Be,s=Kt,Be=n.stateNode.containerInfo,Kt=!0,ui(t,e,n),Be=i,Kt=s;break;case 0:case 11:case 14:case 15:et||vs(2,n,e),et||vs(4,n,e),ui(t,e,n);break;case 1:et||(zn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&g0(n,e,i)),ui(t,e,n);break;case 21:ui(t,e,n);break;case 22:et=(i=et)||n.memoizedState!==null,ui(t,e,n),et=i;break;default:ui(t,e,n)}}function S0(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{il(t)}catch(n){Me(e,e.return,n)}}function hx(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new o_),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new o_),e;default:throw Error(P(435,t.tag))}}function Nf(t,e){var n=hx(t);e.forEach(function(i){var s=Ex.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}function tn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:if(Is(l.type)){Be=l.stateNode,Kt=!1;break e}break;case 5:Be=l.stateNode,Kt=!1;break e;case 3:case 4:Be=l.stateNode.containerInfo,Kt=!0;break e}l=l.return}if(Be===null)throw Error(P(160));b0(r,a,s),Be=null,Kt=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)A0(e,t),e=e.sibling}var In=null;function A0(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:tn(e,t),nn(t),i&4&&(vs(3,t,t.return),Il(3,t),vs(5,t,t.return));break;case 1:tn(e,t),nn(t),i&512&&(et||n===null||zn(n,n.return)),i&64&&ci&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=In;if(tn(e,t),nn(t),i&512&&(et||n===null||zn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[El]||r[Pt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),Nt(r,i,n),r[Pt]=t,yt(r),i=r;break e;case"link":var a=A_("link","href",s).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}r=s.createElement(i),Nt(r,i,n),s.head.appendChild(r);break;case"meta":if(a=A_("meta","content",s).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}r=s.createElement(i),Nt(r,i,n),s.head.appendChild(r);break;default:throw Error(P(468,i))}r[Pt]=t,yt(r),i=r}t.stateNode=i}else w_(s,t.type,t.stateNode);else t.stateNode=S_(s,i,t.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?w_(s,t.type,t.stateNode):S_(s,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Rf(t,t.memoizedProps,n.memoizedProps)}break;case 27:tn(e,t),nn(t),i&512&&(et||n===null||zn(n,n.return)),n!==null&&i&4&&Rf(t,t.memoizedProps,n.memoizedProps);break;case 5:if(tn(e,t),nn(t),i&512&&(et||n===null||zn(n,n.return)),t.flags&32){s=t.stateNode;try{da(s,"")}catch(_){Me(t,t.return,_)}}i&4&&t.stateNode!=null&&(s=t.memoizedProps,Rf(t,s,n!==null?n.memoizedProps:s)),i&1024&&(Cf=!0);break;case 6:if(tn(e,t),nn(t),i&4){if(t.stateNode===null)throw Error(P(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(_){Me(t,t.return,_)}}break;case 3:if(qu=null,s=In,In=wc(e.containerInfo),tn(e,t),In=s,nn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{il(e.containerInfo)}catch(_){Me(t,t.return,_)}Cf&&(Cf=!1,w0(t));break;case 4:i=In,In=wc(t.stateNode.containerInfo),tn(e,t),nn(t),In=i;break;case 12:tn(e,t),nn(t);break;case 13:tn(e,t),nn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(ap=qn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Nf(t,i)));break;case 22:s=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,f=ci,m=et;if(ci=f||s,et=m||u,tn(e,t),et=m,ci=f,nn(t),i&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(n===null||u||ci||et||Hs(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(r=u.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,p=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(_){Me(u,u.return,_)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(_){Me(u,u.return,_)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Nf(t,n))));break;case 19:tn(e,t),nn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Nf(t,i)));break;case 30:break;case 21:break;default:tn(e,t),nn(t)}}function nn(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(_0(i)){n=i;break}i=i.return}if(n==null)throw Error(P(160));switch(n.tag){case 27:var s=n.stateNode,r=If(t);_c(t,r,s);break;case 5:var a=n.stateNode;n.flags&32&&(da(a,""),n.flags&=-33);var l=If(t);_c(t,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,f=If(t);Id(t,f,u);break;default:throw Error(P(161))}}catch(m){Me(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function w0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;w0(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function zi(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)E0(t,e.alternate,e),e=e.sibling}function Hs(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:vs(4,e,e.return),Hs(e);break;case 1:zn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&g0(e,e.return,n),Hs(e);break;case 27:Po(e.stateNode);case 26:case 5:zn(e,e.return),Hs(e);break;case 22:e.memoizedState===null&&Hs(e);break;case 30:Hs(e);break;default:Hs(e)}t=t.sibling}}function qi(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,s=t,r=e,a=r.flags;switch(r.tag){case 0:case 11:case 15:qi(s,r,n),Il(4,r);break;case 1:if(qi(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(f){Me(i,i.return,f)}if(i=r,s=i.updateQueue,s!==null){var l=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)ET(u[s],l)}catch(f){Me(i,i.return,f)}}n&&a&64&&p0(r),Vo(r,r.return);break;case 27:v0(r);case 26:case 5:qi(s,r,n),n&&i===null&&a&4&&y0(r),Vo(r,r.return);break;case 12:qi(s,r,n);break;case 13:qi(s,r,n),n&&a&4&&S0(s,r);break;case 22:r.memoizedState===null&&qi(s,r,n),Vo(r,r.return);break;case 30:break;default:qi(s,r,n)}e=e.sibling}}function np(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Al(n))}function ip(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Al(t))}function Pn(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)x0(t,e,n,i),e=e.sibling}function x0(t,e,n,i){var s=e.flags;switch(e.tag){case 0:case 11:case 15:Pn(t,e,n,i),s&2048&&Il(9,e);break;case 1:Pn(t,e,n,i);break;case 3:Pn(t,e,n,i),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Al(t)));break;case 12:if(s&2048){Pn(t,e,n,i),t=e.stateNode;try{var r=e.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Me(e,e.return,u)}}else Pn(t,e,n,i);break;case 13:Pn(t,e,n,i);break;case 23:break;case 22:r=e.stateNode,a=e.alternate,e.memoizedState!==null?r._visibility&2?Pn(t,e,n,i):Mo(t,e):r._visibility&2?Pn(t,e,n,i):(r._visibility|=2,Dr(t,e,n,i,(e.subtreeFlags&10256)!==0)),s&2048&&np(a,e);break;case 24:Pn(t,e,n,i),s&2048&&ip(e.alternate,e);break;default:Pn(t,e,n,i)}}function Dr(t,e,n,i,s){for(s=s&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var r=t,a=e,l=n,u=i,f=a.flags;switch(a.tag){case 0:case 11:case 15:Dr(r,a,l,u,s),Il(8,a);break;case 23:break;case 22:var m=a.stateNode;a.memoizedState!==null?m._visibility&2?Dr(r,a,l,u,s):Mo(r,a):(m._visibility|=2,Dr(r,a,l,u,s)),s&&f&2048&&np(a.alternate,a);break;case 24:Dr(r,a,l,u,s),s&&f&2048&&ip(a.alternate,a);break;default:Dr(r,a,l,u,s)}e=e.sibling}}function Mo(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,s=i.flags;switch(i.tag){case 22:Mo(n,i),s&2048&&np(i.alternate,i);break;case 24:Mo(n,i),s&2048&&ip(i.alternate,i);break;default:Mo(n,i)}e=e.sibling}}var go=8192;function Rr(t){if(t.subtreeFlags&go)for(t=t.child;t!==null;)R0(t),t=t.sibling}function R0(t){switch(t.tag){case 26:Rr(t),t.flags&go&&t.memoizedState!==null&&Xx(In,t.memoizedState,t.memoizedProps);break;case 5:Rr(t);break;case 3:case 4:var e=In;In=wc(t.stateNode.containerInfo),Rr(t),In=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=go,go=16777216,Rr(t),go=e):Rr(t));break;default:Rr(t)}}function I0(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function co(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];gt=i,N0(i,t)}I0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)C0(t),t=t.sibling}function C0(t){switch(t.tag){case 0:case 11:case 15:co(t),t.flags&2048&&vs(9,t,t.return);break;case 3:co(t);break;case 12:co(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,zu(t)):co(t);break;default:co(t)}}function zu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];gt=i,N0(i,t)}I0(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:vs(8,e,e.return),zu(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,zu(e));break;default:zu(e)}t=t.sibling}}function N0(t,e){for(;gt!==null;){var n=gt;switch(n.tag){case 0:case 11:case 15:vs(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Al(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,gt=i;else e:for(n=t;gt!==null;){i=gt;var s=i.sibling,r=i.return;if(T0(i),i===n){gt=null;break e}if(s!==null){s.return=r,gt=s;break e}gt=r}}}var fx={getCacheForType:function(t){var e=Lt(ht),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},dx=typeof WeakMap=="function"?WeakMap:Map,Re=0,ke=null,le=null,me=0,we=0,sn=null,ts=!1,Pa=!1,sp=!1,Ai=0,We=0,Es=0,Zs=0,rp=0,Tn=0,_a=0,ko=null,Yt=null,Cd=!1,ap=0,vc=1/0,Ec=null,os=null,Rt=0,ls=null,va=null,ra=0,Nd=0,Dd=null,D0=null,jo=0,Od=null;function cn(){if(Re&2&&me!==0)return me&-me;if(te.T!==null){var t=ma;return t!==0?t:lp()}return qE()}function O0(){Tn===0&&(Tn=!(me&536870912)||_e?LE():536870912);var t=bn.current;return t!==null&&(t.flags|=32),Tn}function hn(t,e,n){(t===ke&&(we===2||we===9)||t.cancelPendingCommit!==null)&&(Ea(t,0),ns(t,me,Tn,!1)),vl(t,n),(!(Re&2)||t!==ke)&&(t===ke&&(!(Re&2)&&(Zs|=n),We===4&&ns(t,me,Tn,!1)),ei(t))}function V0(t,e,n){if(Re&6)throw Error(P(327));var i=!n&&(e&124)===0&&(e&t.expiredLanes)===0||_l(t,e),s=i?gx(t,e):Df(t,e,!0),r=i;do{if(s===0){Pa&&!i&&ns(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!mx(n)){s=Df(t,e,!1),r=!1;continue}if(s===2){if(r=e,t.errorRecoveryDisabledLanes&r)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;s=ko;var u=l.current.memoizedState.isDehydrated;if(u&&(Ea(l,a).flags|=256),a=Df(l,a,!1),a!==2){if(sp&&!u){l.errorRecoveryDisabledLanes|=r,Zs|=r,s=4;break e}r=Yt,Yt=s,r!==null&&(Yt===null?Yt=r:Yt.push.apply(Yt,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){Ea(t,0),ns(t,e,0,!0);break}e:{switch(i=t,r=s,r){case 0:case 1:throw Error(P(345));case 4:if((e&4194048)!==e)break;case 6:ns(i,e,Tn,!ts);break e;case 2:Yt=null;break;case 3:case 5:break;default:throw Error(P(329))}if((e&62914560)===e&&(s=ap+300-qn(),10<s)){if(ns(i,e,Tn,!ts),eh(i,0,!0)!==0)break e;i.timeoutHandle=W0(l_.bind(null,i,n,Yt,Ec,Cd,e,Tn,Zs,_a,ts,r,2,-0,0),s);break e}l_(i,n,Yt,Ec,Cd,e,Tn,Zs,_a,ts,r,0,-0,0)}}break}while(!0);ei(t)}function l_(t,e,n,i,s,r,a,l,u,f,m,g,p,_){if(t.timeoutHandle=-1,g=e.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(Jo={stylesheets:null,count:0,unsuspend:$x},R0(e),g=Zx(),g!==null)){t.cancelPendingCommit=g(c_.bind(null,t,e,r,n,i,s,a,l,u,m,1,p,_)),ns(t,r,a,!f);return}c_(t,e,r,n,i,s,a,l,u)}function mx(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!dn(r(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ns(t,e,n,i){e&=~rp,e&=~Zs,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var s=e;0<s;){var r=31-un(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&zE(t,n,e)}function ch(){return Re&6?!0:(Cl(0),!1)}function op(){if(le!==null){if(we===0)var t=le.return;else t=le,mi=fr=null,Km(t),sa=null,Xo=0,t=le;for(;t!==null;)m0(t.alternate,t),t=t.return;le=null}}function Ea(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Ox(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),op(),ke=t,le=n=_i(t.current,null),me=e,we=0,sn=null,ts=!1,Pa=_l(t,e),sp=!1,_a=Tn=rp=Zs=Es=We=0,Yt=ko=null,Cd=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var s=31-un(i),r=1<<s;e|=t[s],i&=~r}return Ai=e,sh(),n}function M0(t,e){ae=null,te.H=dc,e===wl||e===ah?(e=zy(),we=3):e===_T?(e=zy(),we=4):we=e===l0?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,sn=e,le===null&&(We=1,gc(t,vn(e,t.current)))}function k0(){var t=te.H;return te.H=dc,t===null?dc:t}function j0(){var t=te.A;return te.A=fx,t}function Vd(){We=4,ts||(me&4194048)!==me&&bn.current!==null||(Pa=!0),!(Es&134217727)&&!(Zs&134217727)||ke===null||ns(ke,me,Tn,!1)}function Df(t,e,n){var i=Re;Re|=2;var s=k0(),r=j0();(ke!==t||me!==e)&&(Ec=null,Ea(t,e)),e=!1;var a=We;e:do try{if(we!==0&&le!==null){var l=le,u=sn;switch(we){case 8:op(),a=6;break e;case 3:case 2:case 9:case 6:bn.current===null&&(e=!0);var f=we;if(we=0,sn=null,$r(t,l,u,f),n&&Pa){a=0;break e}break;default:f=we,we=0,sn=null,$r(t,l,u,f)}}px(),a=We;break}catch(m){M0(t,m)}while(!0);return e&&t.shellSuspendCounter++,mi=fr=null,Re=i,te.H=s,te.A=r,le===null&&(ke=null,me=0,sh()),a}function px(){for(;le!==null;)P0(le)}function gx(t,e){var n=Re;Re|=2;var i=k0(),s=j0();ke!==t||me!==e?(Ec=null,vc=qn()+500,Ea(t,e)):Pa=_l(t,e);e:do try{if(we!==0&&le!==null){e=le;var r=sn;t:switch(we){case 1:we=0,sn=null,$r(t,e,r,1);break;case 2:case 9:if(Uy(r)){we=0,sn=null,u_(e);break}e=function(){we!==2&&we!==9||ke!==t||(we=7),ei(t)},r.then(e,e);break e;case 3:we=7;break e;case 4:we=5;break e;case 7:Uy(r)?(we=0,sn=null,u_(e)):(we=0,sn=null,$r(t,e,r,7));break;case 5:var a=null;switch(le.tag){case 26:a=le.memoizedState;case 5:case 27:var l=le;if(!a||nb(a)){we=0,sn=null;var u=l.sibling;if(u!==null)le=u;else{var f=l.return;f!==null?(le=f,hh(f)):le=null}break t}}we=0,sn=null,$r(t,e,r,5);break;case 6:we=0,sn=null,$r(t,e,r,6);break;case 8:op(),We=6;break e;default:throw Error(P(462))}}yx();break}catch(m){M0(t,m)}while(!0);return mi=fr=null,te.H=i,te.A=s,Re=n,le!==null?0:(ke=null,me=0,sh(),We)}function yx(){for(;le!==null&&!Uw();)P0(le)}function P0(t){var e=d0(t.alternate,t,Ai);t.memoizedProps=t.pendingProps,e===null?hh(t):le=e}function u_(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=n_(n,e,e.pendingProps,e.type,void 0,me);break;case 11:e=n_(n,e,e.pendingProps,e.type.render,e.ref,me);break;case 5:Km(e);default:m0(n,e),e=le=mT(e,Ai),e=d0(n,e,Ai)}t.memoizedProps=t.pendingProps,e===null?hh(t):le=e}function $r(t,e,n,i){mi=fr=null,Km(e),sa=null,Xo=0;var s=e.return;try{if(ax(t,s,e,n,me)){We=1,gc(t,vn(n,t.current)),le=null;return}}catch(r){if(s!==null)throw le=s,r;We=1,gc(t,vn(n,t.current)),le=null;return}e.flags&32768?(_e||i===1?t=!0:Pa||me&536870912?t=!1:(ts=t=!0,(i===2||i===9||i===3||i===6)&&(i=bn.current,i!==null&&i.tag===13&&(i.flags|=16384))),L0(e,t)):hh(e)}function hh(t){var e=t;do{if(e.flags&32768){L0(e,ts);return}t=e.return;var n=lx(e.alternate,e,Ai);if(n!==null){le=n;return}if(e=e.sibling,e!==null){le=e;return}le=e=t}while(e!==null);We===0&&(We=5)}function L0(t,e){do{var n=ux(t.alternate,t);if(n!==null){n.flags&=32767,le=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){le=t;return}le=t=n}while(t!==null);We=6,le=null}function c_(t,e,n,i,s,r,a,l,u){t.cancelPendingCommit=null;do fh();while(Rt!==0);if(Re&6)throw Error(P(327));if(e!==null){if(e===t.current)throw Error(P(177));if(r=e.lanes|e.childLanes,r|=Mm,$w(t,n,r,a,l,u),t===ke&&(le=ke=null,me=0),va=e,ls=t,ra=n,Nd=r,Dd=s,D0=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,Tx(ic,function(){return H0(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=te.T,te.T=null,s=ve.p,ve.p=2,a=Re,Re|=4;try{cx(t,e,n)}finally{Re=a,ve.p=s,te.T=i}}Rt=1,U0(),z0(),B0()}}function U0(){if(Rt===1){Rt=0;var t=ls,e=va,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=te.T,te.T=null;var i=ve.p;ve.p=2;var s=Re;Re|=4;try{A0(e,t);var r=Pd,a=aT(t.containerInfo),l=r.focusedElem,u=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&rT(l.ownerDocument.documentElement,l)){if(u!==null&&Vm(l)){var f=u.start,m=u.end;if(m===void 0&&(m=f),"selectionStart"in l)l.selectionStart=f,l.selectionEnd=Math.min(m,l.value.length);else{var g=l.ownerDocument||document,p=g&&g.defaultView||window;if(p.getSelection){var _=p.getSelection(),C=l.textContent.length,O=Math.min(u.start,C),V=u.end===void 0?O:Math.min(u.end,C);!_.extend&&O>V&&(a=V,V=O,O=a);var A=Dy(l,O),E=Dy(l,V);if(A&&E&&(_.rangeCount!==1||_.anchorNode!==A.node||_.anchorOffset!==A.offset||_.focusNode!==E.node||_.focusOffset!==E.offset)){var x=g.createRange();x.setStart(A.node,A.offset),_.removeAllRanges(),O>V?(_.addRange(x),_.extend(E.node,E.offset)):(x.setEnd(E.node,E.offset),_.addRange(x))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Ic=!!jd,Pd=jd=null}finally{Re=s,ve.p=i,te.T=n}}t.current=e,Rt=2}}function z0(){if(Rt===2){Rt=0;var t=ls,e=va,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=te.T,te.T=null;var i=ve.p;ve.p=2;var s=Re;Re|=4;try{E0(t,e.alternate,e)}finally{Re=s,ve.p=i,te.T=n}}Rt=3}}function B0(){if(Rt===4||Rt===3){Rt=0,zw();var t=ls,e=va,n=ra,i=D0;e.subtreeFlags&10256||e.flags&10256?Rt=5:(Rt=0,va=ls=null,q0(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(os=null),xm(n),e=e.stateNode,ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(yl,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=te.T,s=ve.p,ve.p=2,te.T=null;try{for(var r=t.onRecoverableError,a=0;a<i.length;a++){var l=i[a];r(l.value,{componentStack:l.stack})}}finally{te.T=e,ve.p=s}}ra&3&&fh(),ei(t),s=t.pendingLanes,n&4194090&&s&42?t===Od?jo++:(jo=0,Od=t):jo=0,Cl(0)}}function q0(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Al(e)))}function fh(t){return U0(),z0(),B0(),H0()}function H0(){if(Rt!==5)return!1;var t=ls,e=Nd;Nd=0;var n=xm(ra),i=te.T,s=ve.p;try{ve.p=32>n?32:n,te.T=null,n=Dd,Dd=null;var r=ls,a=ra;if(Rt=0,va=ls=null,ra=0,Re&6)throw Error(P(331));var l=Re;if(Re|=4,C0(r.current),x0(r,r.current,a,n),Re=l,Cl(0,!1),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(yl,r)}catch{}return!0}finally{ve.p=s,te.T=i,q0(t,e)}}function h_(t,e,n){e=vn(n,e),e=wd(t.stateNode,e,2),t=as(t,e,2),t!==null&&(vl(t,2),ei(t))}function Me(t,e,n){if(t.tag===3)h_(t,t,n);else for(;e!==null;){if(e.tag===3){h_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(os===null||!os.has(i))){t=vn(n,t),n=a0(2),i=as(e,n,2),i!==null&&(o0(n,i,e,t),vl(i,2),ei(i));break}}e=e.return}}function Of(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new dx;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(sp=!0,s.add(n),t=_x.bind(null,t,e,n),e.then(t,t))}function _x(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ke===t&&(me&n)===n&&(We===4||We===3&&(me&62914560)===me&&300>qn()-ap?!(Re&2)&&Ea(t,0):rp|=n,_a===me&&(_a=0)),ei(t)}function F0(t,e){e===0&&(e=UE()),t=ja(t,e),t!==null&&(vl(t,e),ei(t))}function vx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),F0(t,n)}function Ex(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(P(314))}i!==null&&i.delete(e),F0(t,n)}function Tx(t,e){return Am(t,e)}var Tc=null,Or=null,Md=!1,bc=!1,Vf=!1,Ws=0;function ei(t){t!==Or&&t.next===null&&(Or===null?Tc=Or=t:Or=Or.next=t),bc=!0,Md||(Md=!0,Sx())}function Cl(t,e){if(!Vf&&bc){Vf=!0;do for(var n=!1,i=Tc;i!==null;){if(t!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,l=i.pingedLanes;r=(1<<31-un(42|t)+1)-1,r&=s&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,f_(i,r))}else r=me,r=eh(i,i===ke?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||_l(i,r)||(n=!0,f_(i,r));i=i.next}while(n);Vf=!1}}function bx(){G0()}function G0(){bc=Md=!1;var t=0;Ws!==0&&(Dx()&&(t=Ws),Ws=0);for(var e=qn(),n=null,i=Tc;i!==null;){var s=i.next,r=Q0(i,e);r===0?(i.next=null,n===null?Tc=s:n.next=s,s===null&&(Or=n)):(n=i,(t!==0||r&3)&&(bc=!0)),i=s}Cl(t)}function Q0(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var a=31-un(r),l=1<<a,u=s[a];u===-1?(!(l&n)||l&i)&&(s[a]=Yw(l,e)):u<=e&&(t.expiredLanes|=l),r&=~l}if(e=ke,n=me,n=eh(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(we===2||we===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&rf(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||_l(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&rf(i),xm(n)){case 2:case 8:n=jE;break;case 32:n=ic;break;case 268435456:n=PE;break;default:n=ic}return i=K0.bind(null,t),n=Am(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&rf(i),t.callbackPriority=2,t.callbackNode=null,2}function K0(t,e){if(Rt!==0&&Rt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(fh()&&t.callbackNode!==n)return null;var i=me;return i=eh(t,t===ke?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(V0(t,i,e),Q0(t,qn()),t.callbackNode!=null&&t.callbackNode===n?K0.bind(null,t):null)}function f_(t,e){if(fh())return null;V0(t,e,!0)}function Sx(){Vx(function(){Re&6?Am(kE,bx):G0()})}function lp(){return Ws===0&&(Ws=LE()),Ws}function d_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ou(""+t)}function m_(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function Ax(t,e,n,i,s){if(e==="submit"&&n&&n.stateNode===s){var r=d_((s[Xt]||null).action),a=i.submitter;a&&(e=(e=a[Xt]||null)?d_(e.formAction):a.getAttribute("formAction"),e!==null&&(r=e,a=null));var l=new th("action","action",null,i,s);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ws!==0){var u=a?m_(s,a):new FormData(s);Sd(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?m_(s,a):new FormData(s),Sd(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var Mf=0;Mf<hd.length;Mf++){var kf=hd[Mf],wx=kf.toLowerCase(),xx=kf[0].toUpperCase()+kf.slice(1);Vn(wx,"on"+xx)}Vn(lT,"onAnimationEnd");Vn(uT,"onAnimationIteration");Vn(cT,"onAnimationStart");Vn("dblclick","onDoubleClick");Vn("focusin","onFocus");Vn("focusout","onBlur");Vn(H1,"onTransitionRun");Vn(F1,"onTransitionStart");Vn(G1,"onTransitionCancel");Vn(hT,"onTransitionEnd");fa("onMouseEnter",["mouseout","mouseover"]);fa("onMouseLeave",["mouseout","mouseover"]);fa("onPointerEnter",["pointerout","pointerover"]);fa("onPointerLeave",["pointerout","pointerover"]);ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zo));function Y0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=f;try{r(s)}catch(m){pc(m)}s.currentTarget=null,r=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,f=l.currentTarget,l=l.listener,u!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=f;try{r(s)}catch(m){pc(m)}s.currentTarget=null,r=u}}}}function oe(t,e){var n=e[sd];n===void 0&&(n=e[sd]=new Set);var i=t+"__bubble";n.has(i)||($0(e,t,2,!1),n.add(i))}function jf(t,e,n){var i=0;e&&(i|=4),$0(n,t,i,e)}var Tu="_reactListening"+Math.random().toString(36).slice(2);function up(t){if(!t[Tu]){t[Tu]=!0,HE.forEach(function(n){n!=="selectionchange"&&(Rx.has(n)||jf(n,!1,t),jf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Tu]||(e[Tu]=!0,jf("selectionchange",!1,e))}}function $0(t,e,n,i){switch(ob(e)){case 2:var s=eR;break;case 8:s=tR;break;default:s=dp}n=s.bind(null,e,n,t),s=void 0,!ld||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Pf(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;l!==null;){if(a=zr(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=r=a;continue e}l=l.parentNode}}i=i.return}ZE(function(){var f=r,m=Cm(n),g=[];e:{var p=fT.get(t);if(p!==void 0){var _=th,C=t;switch(t){case"keypress":if(Mu(n)===0)break e;case"keydown":case"keyup":_=T1;break;case"focusin":C="focus",_=df;break;case"focusout":C="blur",_=df;break;case"beforeblur":case"afterblur":_=df;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Ty;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=u1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=A1;break;case lT:case uT:case cT:_=f1;break;case hT:_=x1;break;case"scroll":case"scrollend":_=o1;break;case"wheel":_=I1;break;case"copy":case"cut":case"paste":_=m1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Sy;break;case"toggle":case"beforetoggle":_=N1}var O=(e&4)!==0,V=!O&&(t==="scroll"||t==="scrollend"),A=O?p!==null?p+"Capture":null:p;O=[];for(var E=f,x;E!==null;){var D=E;if(x=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||x===null||A===null||(D=Go(E,A),D!=null&&O.push(Wo(E,D,x))),V)break;E=E.return}0<O.length&&(p=new _(p,C,null,n,m),g.push({event:p,listeners:O}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==od&&(C=n.relatedTarget||n.fromElement)&&(zr(C)||C[Ma]))break e;if((_||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,_?(C=n.relatedTarget||n.toElement,_=f,C=C?zr(C):null,C!==null&&(V=gl(C),O=C.tag,C!==V||O!==5&&O!==27&&O!==6)&&(C=null)):(_=null,C=f),_!==C)){if(O=Ty,D="onMouseLeave",A="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(O=Sy,D="onPointerLeave",A="onPointerEnter",E="pointer"),V=_==null?p:po(_),x=C==null?p:po(C),p=new O(D,E+"leave",_,n,m),p.target=V,p.relatedTarget=x,D=null,zr(m)===f&&(O=new O(A,E+"enter",C,n,m),O.target=x,O.relatedTarget=V,D=O),V=D,_&&C)t:{for(O=_,A=C,E=0,x=O;x;x=Ir(x))E++;for(x=0,D=A;D;D=Ir(D))x++;for(;0<E-x;)O=Ir(O),E--;for(;0<x-E;)A=Ir(A),x--;for(;E--;){if(O===A||A!==null&&O===A.alternate)break t;O=Ir(O),A=Ir(A)}O=null}else O=null;_!==null&&p_(g,p,_,O,!1),C!==null&&V!==null&&p_(g,V,C,O,!0)}}e:{if(p=f?po(f):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var U=Ry;else if(xy(p))if(iT)U=z1;else{U=L1;var F=P1}else _=p.nodeName,!_||_.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?f&&Im(f.elementType)&&(U=Ry):U=U1;if(U&&(U=U(t,f))){nT(g,U,n,m);break e}F&&F(t,p,f),t==="focusout"&&f&&p.type==="number"&&f.memoizedProps.value!=null&&ad(p,"number",p.value)}switch(F=f?po(f):window,t){case"focusin":(xy(F)||F.contentEditable==="true")&&(Hr=F,ud=f,xo=null);break;case"focusout":xo=ud=Hr=null;break;case"mousedown":cd=!0;break;case"contextmenu":case"mouseup":case"dragend":cd=!1,Oy(g,n,m);break;case"selectionchange":if(q1)break;case"keydown":case"keyup":Oy(g,n,m)}var T;if(Om)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else qr?eT(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(JE&&n.locale!=="ko"&&(qr||v!=="onCompositionStart"?v==="onCompositionEnd"&&qr&&(T=WE()):(es=m,Nm="value"in es?es.value:es.textContent,qr=!0)),F=Sc(f,v),0<F.length&&(v=new by(v,t,null,n,m),g.push({event:v,listeners:F}),T?v.data=T:(T=tT(n),T!==null&&(v.data=T)))),(T=O1?V1(t,n):M1(t,n))&&(v=Sc(f,"onBeforeInput"),0<v.length&&(F=new by("onBeforeInput","beforeinput",null,n,m),g.push({event:F,listeners:v}),F.data=T)),Ax(g,t,f,n,m)}Y0(g,e)})}function Wo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=Go(t,n),s!=null&&i.unshift(Wo(t,s,r)),s=Go(t,e),s!=null&&i.push(Wo(t,s,r))),t.tag===3)return i;t=t.return}return[]}function Ir(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function p_(t,e,n,i,s){for(var r=e._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,f=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||f===null||(u=f,s?(f=Go(n,r),f!=null&&a.unshift(Wo(n,f,u))):s||(f=Go(n,r),f!=null&&a.push(Wo(n,f,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Ix=/\r\n?/g,Cx=/\u0000|\uFFFD/g;function g_(t){return(typeof t=="string"?t:""+t).replace(Ix,`
`).replace(Cx,"")}function X0(t,e){return e=g_(e),g_(t)===e}function dh(){}function Ce(t,e,n,i,s,r){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||da(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&da(t,""+i);break;case"className":mu(t,"class",i);break;case"tabIndex":mu(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":mu(t,n,i);break;case"style":XE(t,i,r);break;case"data":if(e!=="object"){mu(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Ou(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&Ce(t,e,"name",s.name,s,null),Ce(t,e,"formEncType",s.formEncType,s,null),Ce(t,e,"formMethod",s.formMethod,s,null),Ce(t,e,"formTarget",s.formTarget,s,null)):(Ce(t,e,"encType",s.encType,s,null),Ce(t,e,"method",s.method,s,null),Ce(t,e,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Ou(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=dh);break;case"onScroll":i!=null&&oe("scroll",t);break;case"onScrollEnd":i!=null&&oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(P(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Ou(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":oe("beforetoggle",t),oe("toggle",t),Du(t,"popover",i);break;case"xlinkActuate":oi(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":oi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":oi(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":oi(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":oi(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":oi(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":oi(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":oi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":oi(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Du(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=r1.get(n)||n,Du(t,n,i))}}function kd(t,e,n,i,s,r){switch(n){case"style":XE(t,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(P(60));t.innerHTML=n}}break;case"children":typeof i=="string"?da(t,i):(typeof i=="number"||typeof i=="bigint")&&da(t,""+i);break;case"onScroll":i!=null&&oe("scroll",t);break;case"onScrollEnd":i!=null&&oe("scrollend",t);break;case"onClick":i!=null&&(t.onclick=dh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!FE.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),r=t[Xt]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,s);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Du(t,n,i)}}}function Nt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":oe("error",t),oe("load",t);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(P(137,e));default:Ce(t,e,r,a,n,null)}}s&&Ce(t,e,"srcSet",n.srcSet,n,null),i&&Ce(t,e,"src",n.src,n,null);return;case"input":oe("invalid",t);var l=r=a=s=null,u=null,f=null;for(i in n)if(n.hasOwnProperty(i)){var m=n[i];if(m!=null)switch(i){case"name":s=m;break;case"type":a=m;break;case"checked":u=m;break;case"defaultChecked":f=m;break;case"value":r=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(P(137,e));break;default:Ce(t,e,i,m,n,null)}}KE(t,r,l,u,f,a,s,!1),sc(t);return;case"select":oe("invalid",t),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Ce(t,e,s,l,n,null)}e=r,n=a,t.multiple=!!i,e!=null?Jr(t,!!i,e,!1):n!=null&&Jr(t,!!i,n,!0);return;case"textarea":oe("invalid",t),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(P(91));break;default:Ce(t,e,a,l,n,null)}$E(t,i,s,r),sc(t);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ce(t,e,u,i,n,null)}return;case"dialog":oe("beforetoggle",t),oe("toggle",t),oe("cancel",t),oe("close",t);break;case"iframe":case"object":oe("load",t);break;case"video":case"audio":for(i=0;i<Zo.length;i++)oe(Zo[i],t);break;case"image":oe("error",t),oe("load",t);break;case"details":oe("toggle",t);break;case"embed":case"source":case"link":oe("error",t),oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(f in n)if(n.hasOwnProperty(f)&&(i=n[f],i!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(P(137,e));default:Ce(t,e,f,i,n,null)}return;default:if(Im(e)){for(m in n)n.hasOwnProperty(m)&&(i=n[m],i!==void 0&&kd(t,e,m,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Ce(t,e,l,i,n,null))}function Nx(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,u=null,f=null,m=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||Ce(t,e,_,null,i,g)}}for(var p in i){var _=i[p];if(g=n[p],i.hasOwnProperty(p)&&(_!=null||g!=null))switch(p){case"type":r=_;break;case"name":s=_;break;case"checked":f=_;break;case"defaultChecked":m=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(P(137,e));break;default:_!==g&&Ce(t,e,p,_,i,g)}}rd(t,a,l,u,f,m,r,s);return;case"select":_=a=l=p=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(r)||Ce(t,e,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":p=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&Ce(t,e,s,r,i,u)}e=l,n=a,i=_,p!=null?Jr(t,!!n,p,!1):!!i!=!!n&&(e!=null?Jr(t,!!n,e,!0):Jr(t,!!n,n?[]:"",!1));return;case"textarea":_=p=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ce(t,e,l,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":p=s;break;case"defaultValue":_=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(P(91));break;default:s!==r&&Ce(t,e,a,s,i,r)}YE(t,p,_);return;case"option":for(var C in n)if(p=n[C],n.hasOwnProperty(C)&&p!=null&&!i.hasOwnProperty(C))switch(C){case"selected":t.selected=!1;break;default:Ce(t,e,C,null,i,p)}for(u in i)if(p=i[u],_=n[u],i.hasOwnProperty(u)&&p!==_&&(p!=null||_!=null))switch(u){case"selected":t.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Ce(t,e,u,p,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)p=n[O],n.hasOwnProperty(O)&&p!=null&&!i.hasOwnProperty(O)&&Ce(t,e,O,null,i,p);for(f in i)if(p=i[f],_=n[f],i.hasOwnProperty(f)&&p!==_&&(p!=null||_!=null))switch(f){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(P(137,e));break;default:Ce(t,e,f,p,i,_)}return;default:if(Im(e)){for(var V in n)p=n[V],n.hasOwnProperty(V)&&p!==void 0&&!i.hasOwnProperty(V)&&kd(t,e,V,void 0,i,p);for(m in i)p=i[m],_=n[m],!i.hasOwnProperty(m)||p===_||p===void 0&&_===void 0||kd(t,e,m,p,i,_);return}}for(var A in n)p=n[A],n.hasOwnProperty(A)&&p!=null&&!i.hasOwnProperty(A)&&Ce(t,e,A,null,i,p);for(g in i)p=i[g],_=n[g],!i.hasOwnProperty(g)||p===_||p==null&&_==null||Ce(t,e,g,p,i,_)}var jd=null,Pd=null;function Ac(t){return t.nodeType===9?t:t.ownerDocument}function y_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Z0(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Ld(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lf=null;function Dx(){var t=window.event;return t&&t.type==="popstate"?t===Lf?!1:(Lf=t,!0):(Lf=null,!1)}var W0=typeof setTimeout=="function"?setTimeout:void 0,Ox=typeof clearTimeout=="function"?clearTimeout:void 0,__=typeof Promise=="function"?Promise:void 0,Vx=typeof queueMicrotask=="function"?queueMicrotask:typeof __<"u"?function(t){return __.resolve(null).then(t).catch(Mx)}:W0;function Mx(t){setTimeout(function(){throw t})}function Is(t){return t==="head"}function v_(t,e){var n=e,i=0,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var a=t.ownerDocument;if(n&1&&Po(a.documentElement),n&2&&Po(a.body),n&4)for(n=a.head,Po(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[El]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(s===0){t.removeChild(r),il(e);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);il(e)}function Ud(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ud(n),Rm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function kx(t,e,n,i){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[El])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=Nn(t.nextSibling),t===null)break}return null}function jx(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Nn(t.nextSibling),t===null))return null;return t}function zd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Px(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function Nn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var Bd=null;function E_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function J0(t,e,n){switch(e=Ac(n),t){case"html":if(t=e.documentElement,!t)throw Error(P(452));return t;case"head":if(t=e.head,!t)throw Error(P(453));return t;case"body":if(t=e.body,!t)throw Error(P(454));return t;default:throw Error(P(451))}}function Po(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Rm(t)}var Sn=new Map,T_=new Set;function wc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ni=ve.d;ve.d={f:Lx,r:Ux,D:zx,C:Bx,L:qx,m:Hx,X:Gx,S:Fx,M:Qx};function Lx(){var t=Ni.f(),e=ch();return t||e}function Ux(t){var e=ka(t);e!==null&&e.tag===5&&e.type==="form"?QT(e):Ni.r(t)}var La=typeof document>"u"?null:document;function eb(t,e,n){var i=La;if(i&&typeof e=="string"&&e){var s=_n(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),T_.has(s)||(T_.add(s),t={rel:t,crossOrigin:n,href:e},i.querySelector(s)===null&&(e=i.createElement("link"),Nt(e,"link",t),yt(e),i.head.appendChild(e)))}}function zx(t){Ni.D(t),eb("dns-prefetch",t,null)}function Bx(t,e){Ni.C(t,e),eb("preconnect",t,e)}function qx(t,e,n){Ni.L(t,e,n);var i=La;if(i&&t&&e){var s='link[rel="preload"][as="'+_n(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+_n(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+_n(n.imageSizes)+'"]')):s+='[href="'+_n(t)+'"]';var r=s;switch(e){case"style":r=Ta(t);break;case"script":r=Ua(t)}Sn.has(r)||(t=Ue({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Sn.set(r,t),i.querySelector(s)!==null||e==="style"&&i.querySelector(Nl(r))||e==="script"&&i.querySelector(Dl(r))||(e=i.createElement("link"),Nt(e,"link",t),yt(e),i.head.appendChild(e)))}}function Hx(t,e){Ni.m(t,e);var n=La;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+_n(i)+'"][href="'+_n(t)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Ua(t)}if(!Sn.has(r)&&(t=Ue({rel:"modulepreload",href:t},e),Sn.set(r,t),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Dl(r)))return}i=n.createElement("link"),Nt(i,"link",t),yt(i),n.head.appendChild(i)}}}function Fx(t,e,n){Ni.S(t,e,n);var i=La;if(i&&t){var s=Wr(i).hoistableStyles,r=Ta(t);e=e||"default";var a=s.get(r);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Nl(r)))l.loading=5;else{t=Ue({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Sn.get(r))&&cp(t,n);var u=a=i.createElement("link");yt(u),Nt(u,"link",t),u._p=new Promise(function(f,m){u.onload=f,u.onerror=m}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Bu(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:l},s.set(r,a)}}}function Gx(t,e){Ni.X(t,e);var n=La;if(n&&t){var i=Wr(n).hoistableScripts,s=Ua(t),r=i.get(s);r||(r=n.querySelector(Dl(s)),r||(t=Ue({src:t,async:!0},e),(e=Sn.get(s))&&hp(t,e),r=n.createElement("script"),yt(r),Nt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function Qx(t,e){Ni.M(t,e);var n=La;if(n&&t){var i=Wr(n).hoistableScripts,s=Ua(t),r=i.get(s);r||(r=n.querySelector(Dl(s)),r||(t=Ue({src:t,async:!0,type:"module"},e),(e=Sn.get(s))&&hp(t,e),r=n.createElement("script"),yt(r),Nt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function b_(t,e,n,i){var s=(s=ss.current)?wc(s):null;if(!s)throw Error(P(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Ta(n.href),n=Wr(s).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Ta(n.href);var r=Wr(s).hoistableStyles,a=r.get(t);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,a),(r=s.querySelector(Nl(t)))&&!r._p&&(a.instance=r,a.state.loading=5),Sn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sn.set(t,n),r||Kx(s,t,n,a.state))),e&&i===null)throw Error(P(528,""));return a}if(e&&i!==null)throw Error(P(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Ua(n),n=Wr(s).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(P(444,t))}}function Ta(t){return'href="'+_n(t)+'"'}function Nl(t){return'link[rel="stylesheet"]['+t+"]"}function tb(t){return Ue({},t,{"data-precedence":t.precedence,precedence:null})}function Kx(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Nt(e,"link",n),yt(e),t.head.appendChild(e))}function Ua(t){return'[src="'+_n(t)+'"]'}function Dl(t){return"script[async]"+t}function S_(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+_n(n.href)+'"]');if(i)return e.instance=i,yt(i),i;var s=Ue({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),yt(i),Nt(i,"style",s),Bu(i,n.precedence,t),e.instance=i;case"stylesheet":s=Ta(n.href);var r=t.querySelector(Nl(s));if(r)return e.state.loading|=4,e.instance=r,yt(r),r;i=tb(n),(s=Sn.get(s))&&cp(i,s),r=(t.ownerDocument||t).createElement("link"),yt(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Nt(r,"link",i),e.state.loading|=4,Bu(r,n.precedence,t),e.instance=r;case"script":return r=Ua(n.src),(s=t.querySelector(Dl(r)))?(e.instance=s,yt(s),s):(i=n,(s=Sn.get(r))&&(i=Ue({},n),hp(i,s)),t=t.ownerDocument||t,s=t.createElement("script"),yt(s),Nt(s,"link",i),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(P(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Bu(i,n.precedence,t));return e.instance}function Bu(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===e)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function cp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function hp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var qu=null;function A_(t,e,n){if(qu===null){var i=new Map,s=qu=new Map;s.set(n,i)}else s=qu,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var r=n[s];if(!(r[El]||r[Pt]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(e)||"";a=t+a;var l=i.get(a);l?l.push(r):i.set(a,[r])}}return i}function w_(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Yx(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function nb(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Jo=null;function $x(){}function Xx(t,e,n){if(Jo===null)throw Error(P(475));var i=Jo;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var s=Ta(n.href),r=t.querySelector(Nl(s));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=xc.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=r,yt(r);return}r=t.ownerDocument||t,n=tb(n),(s=Sn.get(s))&&cp(n,s),r=r.createElement("link"),yt(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Nt(r,"link",n),e.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(i.count++,e=xc.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}function Zx(){if(Jo===null)throw Error(P(475));var t=Jo;return t.stylesheets&&t.count===0&&qd(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&qd(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function xc(){if(this.count--,this.count===0){if(this.stylesheets)qd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Rc=null;function qd(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Rc=new Map,e.forEach(Wx,t),Rc=null,xc.call(t))}function Wx(t,e){if(!(e.state.loading&4)){var n=Rc.get(t);if(n)var i=n.get(null);else{n=new Map,Rc.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=e.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=xc.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var el={$$typeof:hi,Provider:null,Consumer:null,_currentValue:Qs,_currentValue2:Qs,_threadCount:0};function Jx(t,e,n,i,s,r,a,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=af(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=af(0),this.hiddenUpdates=af(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function ib(t,e,n,i,s,r,a,l,u,f,m,g){return t=new Jx(t,e,n,a,l,u,f,g),e=1,r===!0&&(e|=24),r=rn(3,null,null,e),t.current=r,r.stateNode=t,e=Um(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:e},Bm(r),t}function sb(t){return t?(t=Qr,t):Qr}function rb(t,e,n,i,s,r){s=sb(s),i.context===null?i.context=s:i.pendingContext=s,i=rs(e),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=as(t,i,e),n!==null&&(hn(n,t,e),Co(n,t,e))}function x_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fp(t,e){x_(t,e),(t=t.alternate)&&x_(t,e)}function ab(t){if(t.tag===13){var e=ja(t,67108864);e!==null&&hn(e,t,67108864),fp(t,67108864)}}var Ic=!0;function eR(t,e,n,i){var s=te.T;te.T=null;var r=ve.p;try{ve.p=2,dp(t,e,n,i)}finally{ve.p=r,te.T=s}}function tR(t,e,n,i){var s=te.T;te.T=null;var r=ve.p;try{ve.p=8,dp(t,e,n,i)}finally{ve.p=r,te.T=s}}function dp(t,e,n,i){if(Ic){var s=Hd(i);if(s===null)Pf(t,e,i,Cc,n),R_(t,i);else if(iR(s,t,e,n,i))i.stopPropagation();else if(R_(t,i),e&4&&-1<nR.indexOf(t)){for(;s!==null;){var r=ka(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=Bs(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-un(a);l.entanglements[1]|=u,a&=~u}ei(r),!(Re&6)&&(vc=qn()+500,Cl(0))}}break;case 13:l=ja(r,2),l!==null&&hn(l,r,2),ch(),fp(r,2)}if(r=Hd(i),r===null&&Pf(t,e,i,Cc,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else Pf(t,e,i,null,n)}}function Hd(t){return t=Cm(t),mp(t)}var Cc=null;function mp(t){if(Cc=null,t=zr(t),t!==null){var e=gl(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=DE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Cc=t,null}function ob(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bw()){case kE:return 2;case jE:return 8;case ic:case qw:return 32;case PE:return 268435456;default:return 32}default:return 32}}var Fd=!1,us=null,cs=null,hs=null,tl=new Map,nl=new Map,Yi=[],nR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function R_(t,e){switch(t){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":tl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nl.delete(e.pointerId)}}function ho(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=ka(e),e!==null&&ab(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function iR(t,e,n,i,s){switch(e){case"focusin":return us=ho(us,t,e,n,i,s),!0;case"dragenter":return cs=ho(cs,t,e,n,i,s),!0;case"mouseover":return hs=ho(hs,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return tl.set(r,ho(tl.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,nl.set(r,ho(nl.get(r)||null,t,e,n,i,s)),!0}return!1}function lb(t){var e=zr(t.target);if(e!==null){var n=gl(e);if(n!==null){if(e=n.tag,e===13){if(e=DE(n),e!==null){t.blockedOn=e,Xw(t.priority,function(){if(n.tag===13){var i=cn();i=wm(i);var s=ja(n,i);s!==null&&hn(s,n,i),fp(n,i)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hd(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);od=i,n.target.dispatchEvent(i),od=null}else return e=ka(n),e!==null&&ab(e),t.blockedOn=n,!1;e.shift()}return!0}function I_(t,e,n){Hu(t)&&n.delete(e)}function sR(){Fd=!1,us!==null&&Hu(us)&&(us=null),cs!==null&&Hu(cs)&&(cs=null),hs!==null&&Hu(hs)&&(hs=null),tl.forEach(I_),nl.forEach(I_)}function bu(t,e){t.blockedOn===e&&(t.blockedOn=null,Fd||(Fd=!0,mt.unstable_scheduleCallback(mt.unstable_NormalPriority,sR)))}var Su=null;function C_(t){Su!==t&&(Su=t,mt.unstable_scheduleCallback(mt.unstable_NormalPriority,function(){Su===t&&(Su=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],s=t[e+2];if(typeof i!="function"){if(mp(i||n)===null)continue;break}var r=ka(n);r!==null&&(t.splice(e,3),e-=3,Sd(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function il(t){function e(u){return bu(u,t)}us!==null&&bu(us,t),cs!==null&&bu(cs,t),hs!==null&&bu(hs,t),tl.forEach(e),nl.forEach(e);for(var n=0;n<Yi.length;n++){var i=Yi[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Yi.length&&(n=Yi[0],n.blockedOn===null);)lb(n),n.blockedOn===null&&Yi.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[Xt]||null;if(typeof r=="function")a||C_(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[Xt]||null)l=a.formAction;else if(mp(s)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),C_(n)}}}function pp(t){this._internalRoot=t}mh.prototype.render=pp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));var n=e.current,i=cn();rb(n,i,t,e,null,null)};mh.prototype.unmount=pp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;rb(t.current,2,null,t,null,null),ch(),e[Ma]=null}};function mh(t){this._internalRoot=t}mh.prototype.unstable_scheduleHydration=function(t){if(t){var e=qE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yi.length&&e!==0&&e<Yi[n].priority;n++);Yi.splice(n,0,t),n===0&&lb(t)}};var N_=CE.version;if(N_!=="19.1.1")throw Error(P(527,N_,"19.1.1"));ve.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=Mw(e),t=t!==null?OE(t):null,t=t===null?null:t.stateNode,t};var rR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Au.isDisabled&&Au.supportsFiber)try{yl=Au.inject(rR),ln=Au}catch{}}Wc.createRoot=function(t,e){if(!NE(t))throw Error(P(299));var n=!1,i="",s=i0,r=s0,a=r0,l=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(l=e.unstable_transitionCallbacks)),e=ib(t,1,!1,null,null,n,i,s,r,a,l,null),t[Ma]=e.current,up(t),new pp(e)};Wc.hydrateRoot=function(t,e,n){if(!NE(t))throw Error(P(299));var i=!1,s="",r=i0,a=s0,l=r0,u=null,f=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(f=n.formState)),e=ib(t,1,!0,e,n??null,i,s,r,a,l,u,f),e.context=sb(null),n=e.current,i=cn(),i=wm(i),s=rs(i),s.callback=null,as(n,s,i),n=i,e.current.lanes=n,vl(e,n),ei(e),t[Ma]=e.current,up(t),new mh(e)};Wc.version="19.1.1";function ub(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ub)}catch(t){console.error(t)}}ub(),SE.exports=Wc;var aR=SE.exports;const oR=fE(aR),lR=()=>{};var D_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},uR=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const r=t[n++],a=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return e.join("")},hb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,f=u?t[s+2]:0,m=r>>2,g=(r&3)<<4|l>>4;let p=(l&15)<<2|f>>6,_=f&63;u||(_=64,a||(p=64)),i.push(n[m],n[g],n[p],n[_])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||l==null||f==null||g==null)throw new cR;const p=r<<2|l>>4;if(i.push(p),f!==64){const _=l<<4&240|f>>2;if(i.push(_),g!==64){const C=f<<6&192|g;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hR=function(t){const e=cb(t);return hb.encodeByteArray(e,!0)},Nc=function(t){return hR(t).replace(/\./g,"")},fb=function(t){try{return hb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=()=>fR().__FIREBASE_DEFAULTS__,mR=()=>{if(typeof process>"u"||typeof D_>"u")return;const t=D_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fb(t[1]);return e&&JSON.parse(e)},ph=()=>{try{return lR()||dR()||mR()||pR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},db=t=>{var e,n;return(n=(e=ph())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},gR=t=>{const e=db(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},mb=()=>{var t;return(t=ph())==null?void 0:t.config},pb=t=>{var e;return(e=ph())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Nc(JSON.stringify(n)),Nc(JSON.stringify(a)),""].join(".")}const Lo={};function vR(){const t={prod:[],emulator:[]};for(const e of Object.keys(Lo))Lo[e]?t.emulator.push(e):t.prod.push(e);return t}function ER(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let O_=!1;function yb(t,e){if(typeof window>"u"||typeof document>"u"||!za(window.location.host)||Lo[t]===e||Lo[t]||O_)return;Lo[t]=e;function n(p){return`__firebase__banner__${p}`}const i="__firebase__banner",r=vR().prod.length>0;function a(){const p=document.getElementById(i);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,_){p.setAttribute("width","24"),p.setAttribute("id",_),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function f(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{O_=!0,a()},p}function m(p,_){p.setAttribute("id",_),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function g(){const p=ER(i),_=n("text"),C=document.getElementById(_)||document.createElement("span"),O=n("learnmore"),V=document.getElementById(O)||document.createElement("a"),A=n("preprendIcon"),E=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;l(x),m(V,O);const D=f();u(E,A),x.append(E,C,V,D),document.body.appendChild(x)}r?(C.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function bR(){var e;const t=(e=ph())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xR(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RR(){return!bR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IR(){try{return typeof indexedDB=="object"}catch{return!1}}function CR(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="FirebaseError";class Di extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=NR,Object.setPrototypeOf(this,Di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ol.prototype.create)}}class Ol{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],a=r?DR(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Di(s,l,i)}}function DR(t,e){return t.replace(OR,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const OR=/\{\$([^}]+)}/g;function VR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wi(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],a=e[s];if(V_(r)&&V_(a)){if(!wi(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function V_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function yo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function _o(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MR(t,e){const n=new kR(t,e);return n.subscribe.bind(n)}class kR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");jR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Uf),s.error===void 0&&(s.error=Uf),s.complete===void 0&&(s.complete=Uf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Uf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t){return t&&t._delegate?t._delegate:t}class sr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new yR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UR(e))try{this.getOrInitializeService({instanceIdentifier:Fs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fs){return this.instances.has(e)}getOptions(e=Fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:LR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Fs){return this.component?this.component.multipleInstances?e:Fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LR(t){return t===Fs?void 0:t}function UR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new PR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const BR={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},qR=ue.INFO,HR={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},FR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=HR[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gp{constructor(e){this.name=e,this._logLevel=qR,this._logHandler=FR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const GR=(t,e)=>e.some(n=>t instanceof n);let M_,k_;function QR(){return M_||(M_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KR(){return k_||(k_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _b=new WeakMap,Gd=new WeakMap,vb=new WeakMap,zf=new WeakMap,yp=new WeakMap;function YR(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",a)},r=()=>{n(fs(t.result)),s()},a=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&_b.set(n,t)}).catch(()=>{}),yp.set(e,t),e}function $R(t){if(Gd.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",a),t.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",a),t.addEventListener("abort",a)});Gd.set(t,e)}let Qd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XR(t){Qd=t(Qd)}function ZR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Bf(this),e,...n);return vb.set(i,e.sort?e.sort():[e]),fs(i)}:KR().includes(t)?function(...e){return t.apply(Bf(this),e),fs(_b.get(this))}:function(...e){return fs(t.apply(Bf(this),e))}}function WR(t){return typeof t=="function"?ZR(t):(t instanceof IDBTransaction&&$R(t),GR(t,QR())?new Proxy(t,Qd):t)}function fs(t){if(t instanceof IDBRequest)return YR(t);if(zf.has(t))return zf.get(t);const e=WR(t);return e!==t&&(zf.set(t,e),yp.set(e,t)),e}const Bf=t=>yp.get(t);function JR(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(t,e),l=fs(a);return i&&a.addEventListener("upgradeneeded",u=>{i(fs(a.result),u.oldVersion,u.newVersion,fs(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const e2=["get","getKey","getAll","getAllKeys","count"],t2=["put","add","delete","clear"],qf=new Map;function j_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qf.get(e))return qf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=t2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||e2.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let f=u.store;return i&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&u.done]))[0]};return qf.set(e,r),r}XR(t=>({...t,get:(e,n,i)=>j_(e,n)||t.get(e,n,i),has:(e,n)=>!!j_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function i2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kd="@firebase/app",P_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new gp("@firebase/app"),s2="@firebase/app-compat",r2="@firebase/analytics-compat",a2="@firebase/analytics",o2="@firebase/app-check-compat",l2="@firebase/app-check",u2="@firebase/auth",c2="@firebase/auth-compat",h2="@firebase/database",f2="@firebase/data-connect",d2="@firebase/database-compat",m2="@firebase/functions",p2="@firebase/functions-compat",g2="@firebase/installations",y2="@firebase/installations-compat",_2="@firebase/messaging",v2="@firebase/messaging-compat",E2="@firebase/performance",T2="@firebase/performance-compat",b2="@firebase/remote-config",S2="@firebase/remote-config-compat",A2="@firebase/storage",w2="@firebase/storage-compat",x2="@firebase/firestore",R2="@firebase/ai",I2="@firebase/firestore-compat",C2="firebase",N2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="[DEFAULT]",D2={[Kd]:"fire-core",[s2]:"fire-core-compat",[a2]:"fire-analytics",[r2]:"fire-analytics-compat",[l2]:"fire-app-check",[o2]:"fire-app-check-compat",[u2]:"fire-auth",[c2]:"fire-auth-compat",[h2]:"fire-rtdb",[f2]:"fire-data-connect",[d2]:"fire-rtdb-compat",[m2]:"fire-fn",[p2]:"fire-fn-compat",[g2]:"fire-iid",[y2]:"fire-iid-compat",[_2]:"fire-fcm",[v2]:"fire-fcm-compat",[E2]:"fire-perf",[T2]:"fire-perf-compat",[b2]:"fire-rc",[S2]:"fire-rc-compat",[A2]:"fire-gcs",[w2]:"fire-gcs-compat",[x2]:"fire-fst",[I2]:"fire-fst-compat",[R2]:"fire-vertex","fire-js":"fire-js",[C2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new Map,O2=new Map,$d=new Map;function L_(t,e){try{t.container.addComponent(e)}catch(n){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ba(t){const e=t.name;if($d.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;$d.set(e,t);for(const n of Dc.values())L_(n,t);for(const n of O2.values())L_(n,t);return!0}function _p(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function En(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ds=new Ol("app","Firebase",V2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=N2;function Eb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Yd,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw ds.create("bad-app-name",{appName:String(s)});if(n||(n=mb()),!n)throw ds.create("no-options");const r=Dc.get(s);if(r){if(wi(n,r.options)&&wi(i,r.config))return r;throw ds.create("duplicate-app",{appName:s})}const a=new zR(s);for(const u of $d.values())a.addComponent(u);const l=new M2(n,i,a);return Dc.set(s,l),l}function Tb(t=Yd){const e=Dc.get(t);if(!e&&t===Yd&&mb())return Eb();if(!e)throw ds.create("no-app",{appName:t});return e}function ms(t,e,n){let i=D2[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xi.warn(a.join(" "));return}ba(new sr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="firebase-heartbeat-database",j2=1,sl="firebase-heartbeat-store";let Hf=null;function bb(){return Hf||(Hf=JR(k2,j2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ds.create("idb-open",{originalErrorMessage:t.message})})),Hf}async function P2(t){try{const n=(await bb()).transaction(sl),i=await n.objectStore(sl).get(Sb(t));return await n.done,i}catch(e){if(e instanceof Di)xi.warn(e.message);else{const n=ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xi.warn(n.message)}}}async function U_(t,e){try{const i=(await bb()).transaction(sl,"readwrite");await i.objectStore(sl).put(e,Sb(t)),await i.done}catch(n){if(n instanceof Di)xi.warn(n.message);else{const i=ds.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xi.warn(i.message)}}}function Sb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=1024,U2=30;class z2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new q2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=z_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>U2){const a=H2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){xi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=z_(),{heartbeatsToSend:i,unsentEntries:s}=B2(this._heartbeatsCache.heartbeats),r=Nc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return xi.warn(n),""}}}function z_(){return new Date().toISOString().substring(0,10)}function B2(t,e=L2){const n=[];let i=t.slice();for(const s of t){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),B_(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),B_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class q2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IR()?CR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await P2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return U_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return U_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function B_(t){return Nc(JSON.stringify({version:2,heartbeats:t})).length}function H2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(t){ba(new sr("platform-logger",e=>new n2(e),"PRIVATE")),ba(new sr("heartbeat",e=>new z2(e),"PRIVATE")),ms(Kd,P_,t),ms(Kd,P_,"esm2020"),ms("fire-js","")}F2("");var q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ps,Ab;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function b(){}b.prototype=v.prototype,T.D=v.prototype,T.prototype=new b,T.prototype.constructor=T,T.C=function(S,R,I){for(var w=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)w[Z-2]=arguments[Z];return v.prototype[R].apply(S,w)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,v,b){b||(b=0);var S=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)S[R]=v.charCodeAt(b++)|v.charCodeAt(b++)<<8|v.charCodeAt(b++)<<16|v.charCodeAt(b++)<<24;else for(R=0;16>R;++R)S[R]=v[b++]|v[b++]<<8|v[b++]<<16|v[b++]<<24;v=T.g[0],b=T.g[1],R=T.g[2];var I=T.g[3],w=v+(I^b&(R^I))+S[0]+3614090360&4294967295;v=b+(w<<7&4294967295|w>>>25),w=I+(R^v&(b^R))+S[1]+3905402710&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(b^I&(v^b))+S[2]+606105819&4294967295,R=I+(w<<17&4294967295|w>>>15),w=b+(v^R&(I^v))+S[3]+3250441966&4294967295,b=R+(w<<22&4294967295|w>>>10),w=v+(I^b&(R^I))+S[4]+4118548399&4294967295,v=b+(w<<7&4294967295|w>>>25),w=I+(R^v&(b^R))+S[5]+1200080426&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(b^I&(v^b))+S[6]+2821735955&4294967295,R=I+(w<<17&4294967295|w>>>15),w=b+(v^R&(I^v))+S[7]+4249261313&4294967295,b=R+(w<<22&4294967295|w>>>10),w=v+(I^b&(R^I))+S[8]+1770035416&4294967295,v=b+(w<<7&4294967295|w>>>25),w=I+(R^v&(b^R))+S[9]+2336552879&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(b^I&(v^b))+S[10]+4294925233&4294967295,R=I+(w<<17&4294967295|w>>>15),w=b+(v^R&(I^v))+S[11]+2304563134&4294967295,b=R+(w<<22&4294967295|w>>>10),w=v+(I^b&(R^I))+S[12]+1804603682&4294967295,v=b+(w<<7&4294967295|w>>>25),w=I+(R^v&(b^R))+S[13]+4254626195&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(b^I&(v^b))+S[14]+2792965006&4294967295,R=I+(w<<17&4294967295|w>>>15),w=b+(v^R&(I^v))+S[15]+1236535329&4294967295,b=R+(w<<22&4294967295|w>>>10),w=v+(R^I&(b^R))+S[1]+4129170786&4294967295,v=b+(w<<5&4294967295|w>>>27),w=I+(b^R&(v^b))+S[6]+3225465664&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^b&(I^v))+S[11]+643717713&4294967295,R=I+(w<<14&4294967295|w>>>18),w=b+(I^v&(R^I))+S[0]+3921069994&4294967295,b=R+(w<<20&4294967295|w>>>12),w=v+(R^I&(b^R))+S[5]+3593408605&4294967295,v=b+(w<<5&4294967295|w>>>27),w=I+(b^R&(v^b))+S[10]+38016083&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^b&(I^v))+S[15]+3634488961&4294967295,R=I+(w<<14&4294967295|w>>>18),w=b+(I^v&(R^I))+S[4]+3889429448&4294967295,b=R+(w<<20&4294967295|w>>>12),w=v+(R^I&(b^R))+S[9]+568446438&4294967295,v=b+(w<<5&4294967295|w>>>27),w=I+(b^R&(v^b))+S[14]+3275163606&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^b&(I^v))+S[3]+4107603335&4294967295,R=I+(w<<14&4294967295|w>>>18),w=b+(I^v&(R^I))+S[8]+1163531501&4294967295,b=R+(w<<20&4294967295|w>>>12),w=v+(R^I&(b^R))+S[13]+2850285829&4294967295,v=b+(w<<5&4294967295|w>>>27),w=I+(b^R&(v^b))+S[2]+4243563512&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^b&(I^v))+S[7]+1735328473&4294967295,R=I+(w<<14&4294967295|w>>>18),w=b+(I^v&(R^I))+S[12]+2368359562&4294967295,b=R+(w<<20&4294967295|w>>>12),w=v+(b^R^I)+S[5]+4294588738&4294967295,v=b+(w<<4&4294967295|w>>>28),w=I+(v^b^R)+S[8]+2272392833&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^b)+S[11]+1839030562&4294967295,R=I+(w<<16&4294967295|w>>>16),w=b+(R^I^v)+S[14]+4259657740&4294967295,b=R+(w<<23&4294967295|w>>>9),w=v+(b^R^I)+S[1]+2763975236&4294967295,v=b+(w<<4&4294967295|w>>>28),w=I+(v^b^R)+S[4]+1272893353&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^b)+S[7]+4139469664&4294967295,R=I+(w<<16&4294967295|w>>>16),w=b+(R^I^v)+S[10]+3200236656&4294967295,b=R+(w<<23&4294967295|w>>>9),w=v+(b^R^I)+S[13]+681279174&4294967295,v=b+(w<<4&4294967295|w>>>28),w=I+(v^b^R)+S[0]+3936430074&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^b)+S[3]+3572445317&4294967295,R=I+(w<<16&4294967295|w>>>16),w=b+(R^I^v)+S[6]+76029189&4294967295,b=R+(w<<23&4294967295|w>>>9),w=v+(b^R^I)+S[9]+3654602809&4294967295,v=b+(w<<4&4294967295|w>>>28),w=I+(v^b^R)+S[12]+3873151461&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^b)+S[15]+530742520&4294967295,R=I+(w<<16&4294967295|w>>>16),w=b+(R^I^v)+S[2]+3299628645&4294967295,b=R+(w<<23&4294967295|w>>>9),w=v+(R^(b|~I))+S[0]+4096336452&4294967295,v=b+(w<<6&4294967295|w>>>26),w=I+(b^(v|~R))+S[7]+1126891415&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~b))+S[14]+2878612391&4294967295,R=I+(w<<15&4294967295|w>>>17),w=b+(I^(R|~v))+S[5]+4237533241&4294967295,b=R+(w<<21&4294967295|w>>>11),w=v+(R^(b|~I))+S[12]+1700485571&4294967295,v=b+(w<<6&4294967295|w>>>26),w=I+(b^(v|~R))+S[3]+2399980690&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~b))+S[10]+4293915773&4294967295,R=I+(w<<15&4294967295|w>>>17),w=b+(I^(R|~v))+S[1]+2240044497&4294967295,b=R+(w<<21&4294967295|w>>>11),w=v+(R^(b|~I))+S[8]+1873313359&4294967295,v=b+(w<<6&4294967295|w>>>26),w=I+(b^(v|~R))+S[15]+4264355552&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~b))+S[6]+2734768916&4294967295,R=I+(w<<15&4294967295|w>>>17),w=b+(I^(R|~v))+S[13]+1309151649&4294967295,b=R+(w<<21&4294967295|w>>>11),w=v+(R^(b|~I))+S[4]+4149444226&4294967295,v=b+(w<<6&4294967295|w>>>26),w=I+(b^(v|~R))+S[11]+3174756917&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~b))+S[2]+718787259&4294967295,R=I+(w<<15&4294967295|w>>>17),w=b+(I^(R|~v))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(R+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+I&4294967295}i.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var b=v-this.blockSize,S=this.B,R=this.h,I=0;I<v;){if(R==0)for(;I<=b;)s(this,T,I),I+=this.blockSize;if(typeof T=="string"){for(;I<v;)if(S[R++]=T.charCodeAt(I++),R==this.blockSize){s(this,S),R=0;break}}else for(;I<v;)if(S[R++]=T[I++],R==this.blockSize){s(this,S),R=0;break}}this.h=R,this.o+=v},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var b=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=b&255,b/=256;for(this.u(T),T=Array(16),v=b=0;4>v;++v)for(var S=0;32>S;S+=8)T[b++]=this.g[v]>>>S&255;return T};function r(T,v){var b=l;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=v(T)}function a(T,v){this.h=v;for(var b=[],S=!0,R=T.length-1;0<=R;R--){var I=T[R]|0;S&&I==v||(b[R]=I,S=!1)}this.g=b}var l={};function u(T){return-128<=T&&128>T?r(T,function(v){return new a([v|0],0>v?-1:0)}):new a([T|0],0>T?-1:0)}function f(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return V(f(-T));for(var v=[],b=1,S=0;T>=b;S++)v[S]=T/b|0,b*=4294967296;return new a(v,0)}function m(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return V(m(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=f(Math.pow(v,8)),S=g,R=0;R<T.length;R+=8){var I=Math.min(8,T.length-R),w=parseInt(T.substring(R,R+I),v);8>I?(I=f(Math.pow(v,I)),S=S.j(I).add(f(w))):(S=S.j(b),S=S.add(f(w)))}return S}var g=u(0),p=u(1),_=u(16777216);t=a.prototype,t.m=function(){if(O(this))return-V(this).m();for(var T=0,v=1,b=0;b<this.g.length;b++){var S=this.i(b);T+=(0<=S?S:4294967296+S)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(O(this))return"-"+V(this).toString(T);for(var v=f(Math.pow(T,6)),b=this,S="";;){var R=D(b,v).g;b=A(b,R.j(v));var I=((0<b.g.length?b.g[0]:b.h)>>>0).toString(T);if(b=R,C(b))return I+S;for(;6>I.length;)I="0"+I;S=I+S}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function O(T){return T.h==-1}t.l=function(T){return T=A(this,T),O(T)?-1:C(T)?0:1};function V(T){for(var v=T.g.length,b=[],S=0;S<v;S++)b[S]=~T.g[S];return new a(b,~T.h).add(p)}t.abs=function(){return O(this)?V(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],S=0,R=0;R<=v;R++){var I=S+(this.i(R)&65535)+(T.i(R)&65535),w=(I>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);S=w>>>16,I&=65535,w&=65535,b[R]=w<<16|I}return new a(b,b[b.length-1]&-2147483648?-1:0)};function A(T,v){return T.add(V(v))}t.j=function(T){if(C(this)||C(T))return g;if(O(this))return O(T)?V(this).j(V(T)):V(V(this).j(T));if(O(T))return V(this.j(V(T)));if(0>this.l(_)&&0>T.l(_))return f(this.m()*T.m());for(var v=this.g.length+T.g.length,b=[],S=0;S<2*v;S++)b[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<T.g.length;R++){var I=this.i(S)>>>16,w=this.i(S)&65535,Z=T.i(R)>>>16,fe=T.i(R)&65535;b[2*S+2*R]+=w*fe,E(b,2*S+2*R),b[2*S+2*R+1]+=I*fe,E(b,2*S+2*R+1),b[2*S+2*R+1]+=w*Z,E(b,2*S+2*R+1),b[2*S+2*R+2]+=I*Z,E(b,2*S+2*R+2)}for(S=0;S<v;S++)b[S]=b[2*S+1]<<16|b[2*S];for(S=v;S<2*v;S++)b[S]=0;return new a(b,0)};function E(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function x(T,v){this.g=T,this.h=v}function D(T,v){if(C(v))throw Error("division by zero");if(C(T))return new x(g,g);if(O(T))return v=D(V(T),v),new x(V(v.g),V(v.h));if(O(v))return v=D(T,V(v)),new x(V(v.g),v.h);if(30<T.g.length){if(O(T)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var b=p,S=v;0>=S.l(T);)b=U(b),S=U(S);var R=F(b,1),I=F(S,1);for(S=F(S,2),b=F(b,2);!C(S);){var w=I.add(S);0>=w.l(T)&&(R=R.add(b),I=w),S=F(S,1),b=F(b,1)}return v=A(T,R.j(v)),new x(R,v)}for(R=g;0<=T.l(v);){for(b=Math.max(1,Math.floor(T.m()/v.m())),S=Math.ceil(Math.log(b)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),I=f(b),w=I.j(v);O(w)||0<w.l(T);)b-=S,I=f(b),w=I.j(v);C(I)&&(I=p),R=R.add(I),T=A(T,w)}return new x(R,T)}t.A=function(T){return D(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],S=0;S<v;S++)b[S]=this.i(S)&T.i(S);return new a(b,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],S=0;S<v;S++)b[S]=this.i(S)|T.i(S);return new a(b,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],S=0;S<v;S++)b[S]=this.i(S)^T.i(S);return new a(b,this.h^T.h)};function U(T){for(var v=T.g.length+1,b=[],S=0;S<v;S++)b[S]=T.i(S)<<1|T.i(S-1)>>>31;return new a(b,T.h)}function F(T,v){var b=v>>5;v%=32;for(var S=T.g.length-b,R=[],I=0;I<S;I++)R[I]=0<v?T.i(I+b)>>>v|T.i(I+b+1)<<32-v:T.i(I+b);return new a(R,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Ab=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,ps=a}).apply(typeof q_<"u"?q_:typeof self<"u"?self:typeof window<"u"?window:{});var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wb,vo,xb,Fu,Xd,Rb,Ib,Cb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,d){return o==Array.prototype||o==Object.prototype||(o[c]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof wu=="object"&&wu];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=n(this);function s(o,c){if(c)e:{var d=i;o=o.split(".");for(var y=0;y<o.length-1;y++){var N=o[y];if(!(N in d))break e;d=d[N]}o=o[o.length-1],y=d[o],c=c(y),c!=y&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}function r(o,c){o instanceof String&&(o+="");var d=0,y=!1,N={next:function(){if(!y&&d<o.length){var M=d++;return{value:c(M,o[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}s("Array.prototype.values",function(o){return o||function(){return r(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function f(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function m(o,c,d){return o.call.apply(o.bind,arguments)}function g(o,c,d){if(!o)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,y),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function p(o,c,d){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,p.apply(null,arguments)}function _(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var y=d.slice();return y.push.apply(y,arguments),o.apply(this,y)}}function C(o,c){function d(){}d.prototype=c.prototype,o.aa=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(y,N,M){for(var q=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)q[Ve-2]=arguments[Ve];return c.prototype[N].apply(y,q)}}function O(o){const c=o.length;if(0<c){const d=Array(c);for(let y=0;y<c;y++)d[y]=o[y];return d}return[]}function V(o,c){for(let d=1;d<arguments.length;d++){const y=arguments[d];if(u(y)){const N=o.length||0,M=y.length||0;o.length=N+M;for(let q=0;q<M;q++)o[N+q]=y[q]}else o.push(y)}}class A{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function x(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var U=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function F(o,c,d){for(const y in o)c.call(d,o[y],y,o)}function T(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function v(o){const c={};for(const d in o)c[d]=o[d];return c}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(o,c){let d,y;for(let N=1;N<arguments.length;N++){y=arguments[N];for(d in y)o[d]=y[d];for(let M=0;M<b.length;M++)d=b[M],Object.prototype.hasOwnProperty.call(y,d)&&(o[d]=y[d])}}function R(o){var c=1;o=o.split(":");const d=[];for(;0<c&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function I(o){l.setTimeout(()=>{throw o},0)}function w(){var o=ge;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Z{constructor(){this.h=this.g=null}add(c,d){const y=fe.get();y.set(c,d),this.h?this.h.next=y:this.g=y,this.h=y}}var fe=new A(()=>new z,o=>o.reset());class z{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,$=!1,ge=new Z,be=()=>{const o=l.Promise.resolve(void 0);Y=()=>{o.then(Wt)}};var Wt=()=>{for(var o;o=w();){try{o.h.call(o.g)}catch(d){I(d)}var c=fe;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}$=!1};function nt(){this.s=this.s,this.C=this.C}nt.prototype.s=!1,nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Ye=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return o}();function Tt(o,c){if(Se.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,y=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(U){e:{try{D(c.nodeName);var N=!0;break e}catch{}N=!1}N||(c=null)}}else d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement);this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Os[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Tt.aa.h.call(this)}}C(Tt,Se);var Os={2:"touch",3:"pen",4:"mouse"};Tt.prototype.h=function(){Tt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var it="closure_listenable_"+(1e6*Math.random()|0),An=0;function Gt(o,c,d,y,N){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!y,this.ha=N,this.key=++An,this.da=this.fa=!1}function Vi(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Ot(o){this.src=o,this.g={},this.h=0}Ot.prototype.add=function(o,c,d,y,N){var M=o.toString();o=this.g[M],o||(o=this.g[M]=[],this.h++);var q=Mn(o,c,y,N);return-1<q?(c=o[q],d||(c.fa=!1)):(c=new Gt(c,this.src,M,!!y,N),c.fa=d,o.push(c)),c};function Mi(o,c){var d=c.type;if(d in o.g){var y=o.g[d],N=Array.prototype.indexOf.call(y,c,void 0),M;(M=0<=N)&&Array.prototype.splice.call(y,N,1),M&&(Vi(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Mn(o,c,d,y){for(var N=0;N<o.length;++N){var M=o[N];if(!M.da&&M.listener==c&&M.capture==!!d&&M.ha==y)return N}return-1}var Vs="closure_lm_"+(1e6*Math.random()|0),ni={};function wn(o,c,d,y,N){if(Array.isArray(c)){for(var M=0;M<c.length;M++)wn(o,c[M],d,y,N);return null}return d=je(d),o&&o[it]?o.K(c,d,f(y)?!!y.capture:!1,N):vr(o,c,d,!1,y,N)}function vr(o,c,d,y,N,M){if(!c)throw Error("Invalid event type");var q=f(N)?!!N.capture:!!N,Ve=De(o);if(Ve||(o[Vs]=Ve=new Ot(o)),d=Ve.add(c,d,y,q,M),d.proxy)return d;if(y=Ya(),d.proxy=y,y.src=o,y.listener=d,o.addEventListener)Ye||(N=q),N===void 0&&(N=!1),o.addEventListener(c.toString(),y,N);else if(o.attachEvent)o.attachEvent(Q(c.toString()),y);else if(o.addListener&&o.removeListener)o.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Ya(){function o(d){return c.call(o.src,o.listener,d)}const c=se;return o}function kn(o,c,d,y,N){if(Array.isArray(c))for(var M=0;M<c.length;M++)kn(o,c[M],d,y,N);else y=f(y)?!!y.capture:!!y,d=je(d),o&&o[it]?(o=o.i,c=String(c).toString(),c in o.g&&(M=o.g[c],d=Mn(M,d,y,N),-1<d&&(Vi(M[d]),Array.prototype.splice.call(M,d,1),M.length==0&&(delete o.g[c],o.h--)))):o&&(o=De(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Mn(c,d,y,N)),(d=-1<o?c[o]:null)&&Ms(d))}function Ms(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[it])Mi(c.i,o);else{var d=o.type,y=o.proxy;c.removeEventListener?c.removeEventListener(d,y,o.capture):c.detachEvent?c.detachEvent(Q(d),y):c.addListener&&c.removeListener&&c.removeListener(y),(d=De(c))?(Mi(d,o),d.h==0&&(d.src=null,c[Vs]=null)):Vi(o)}}}function Q(o){return o in ni?ni[o]:ni[o]="on"+o}function se(o,c){if(o.da)o=!0;else{c=new Tt(c,this);var d=o.listener,y=o.ha||o.src;o.fa&&Ms(o),o=d.call(y,c)}return o}function De(o){return o=o[Vs],o instanceof Ot?o:null}var $e="__closure_events_fn_"+(1e9*Math.random()>>>0);function je(o){return typeof o=="function"?o:(o[$e]||(o[$e]=function(c){return o.handleEvent(c)}),o[$e])}function Ee(){nt.call(this),this.i=new Ot(this),this.M=this,this.F=null}C(Ee,nt),Ee.prototype[it]=!0,Ee.prototype.removeEventListener=function(o,c,d,y){kn(this,o,c,d,y)};function Ie(o,c){var d,y=o.F;if(y)for(d=[];y;y=y.F)d.push(y);if(o=o.M,y=c.type||c,typeof c=="string")c=new Se(c,o);else if(c instanceof Se)c.target=c.target||o;else{var N=c;c=new Se(y,o),S(c,N)}if(N=!0,d)for(var M=d.length-1;0<=M;M--){var q=c.g=d[M];N=xn(q,y,!0,c)&&N}if(q=c.g=o,N=xn(q,y,!0,c)&&N,N=xn(q,y,!1,c)&&N,d)for(M=0;M<d.length;M++)q=c.g=d[M],N=xn(q,y,!1,c)&&N}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var d=o.g[c],y=0;y<d.length;y++)Vi(d[y]);delete o.g[c],o.h--}}this.F=null},Ee.prototype.K=function(o,c,d,y){return this.i.add(String(o),c,!1,d,y)},Ee.prototype.L=function(o,c,d,y){return this.i.add(String(o),c,!0,d,y)};function xn(o,c,d,y){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,M=0;M<c.length;++M){var q=c[M];if(q&&!q.da&&q.capture==d){var Ve=q.listener,St=q.ha||q.src;q.fa&&Mi(o.i,q),N=Ve.call(St,y)!==!1&&N}}return N&&!y.defaultPrevented}function Er(o,c,d){if(typeof o=="function")d&&(o=p(o,d));else if(o&&typeof o.handleEvent=="function")o=p(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Jt(o){o.g=Er(()=>{o.g=null,o.i&&(o.i=!1,Jt(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class zh extends nt{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Jt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ks(o){nt.call(this),this.h=o,this.g={}}C(ks,nt);var Tr=[];function Ql(o){F(o.g,function(c,d){this.g.hasOwnProperty(d)&&Ms(c)},o),o.g={}}ks.prototype.N=function(){ks.aa.N.call(this),Ql(this)},ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $a=l.JSON.stringify,Kl=l.JSON.parse,Yl=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function br(){}br.prototype.h=null;function $l(o){return o.h||(o.h=o.i())}function Xl(){}var js={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function H(){Se.call(this,"d")}C(H,Se);function ee(){Se.call(this,"c")}C(ee,Se);var ie={},Te=null;function Oe(){return Te=Te||new Ee}ie.La="serverreachability";function Ae(o){Se.call(this,ie.La,o)}C(Ae,Se);function ze(o){const c=Oe();Ie(c,new Ae(c))}ie.STAT_EVENT="statevent";function bt(o,c){Se.call(this,ie.STAT_EVENT,o),this.stat=c}C(bt,Se);function st(o){const c=Oe();Ie(c,new bt(c,o))}ie.Ma="timingevent";function Sr(o,c){Se.call(this,ie.Ma,o),this.size=c}C(Sr,Se);function ii(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function jn(){this.g=!0}jn.prototype.xa=function(){this.g=!1};function Bh(o,c,d,y,N,M){o.info(function(){if(o.g)if(M)for(var q="",Ve=M.split("&"),St=0;St<Ve.length;St++){var ye=Ve[St].split("=");if(1<ye.length){var Vt=ye[0];ye=ye[1];var Mt=Vt.split("_");q=2<=Mt.length&&Mt[1]=="type"?q+(Vt+"="+ye+"&"):q+(Vt+"=redacted&")}}else q=null;else q=M;return"XMLHTTP REQ ("+y+") [attempt "+N+"]: "+c+`
`+d+`
`+q})}function qh(o,c,d,y,N,M,q){o.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+N+"]: "+c+`
`+d+`
`+M+" "+q})}function si(o,c,d,y){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Fh(o,d)+(y?" "+y:"")})}function Hh(o,c){o.info(function(){return"TIMEOUT: "+c})}jn.prototype.info=function(){};function Fh(o,c){if(!o.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var y=d[o];if(!(2>y.length)){var N=y[1];if(Array.isArray(N)&&!(1>N.length)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(var q=1;q<N.length;q++)N[q]=""}}}}return $a(d)}catch{return c}}var ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gh;function Zl(){}C(Zl,br),Zl.prototype.g=function(){return new XMLHttpRequest},Zl.prototype.i=function(){return{}},Gh=new Zl;function ji(o,c,d,y){this.j=o,this.i=c,this.l=d,this.R=y||1,this.U=new ks(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bg}function bg(){this.i=null,this.g="",this.h=!1}var Sg={},Qh={};function Kh(o,c,d){o.L=1,o.v=tu(ri(c)),o.m=d,o.P=!0,Ag(o,null)}function Ag(o,c){o.F=Date.now(),Wl(o),o.A=ri(o.v);var d=o.A,y=o.R;Array.isArray(y)||(y=[String(y)]),Lg(d.i,"t",y),o.C=0,d=o.j.J,o.h=new bg,o.g=ny(o.j,d?c:null,!o.m),0<o.O&&(o.M=new zh(p(o.Y,o,o.g),o.O)),c=o.U,d=o.g,y=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Tr[0]=N.toString()),N=Tr);for(var M=0;M<N.length;M++){var q=wn(d,N[M],y||c.handleEvent,!1,c.h||c);if(!q)break;c.g[q.key]=q}c=o.H?v(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),ze(),Bh(o.i,o.u,o.A,o.l,o.R,o.m)}ji.prototype.ca=function(o){o=o.target;const c=this.M;c&&ai(o)==3?c.j():this.Y(o)},ji.prototype.Y=function(o){try{if(o==this.g)e:{const Mt=ai(this.g);var c=this.g.Ba();const xr=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||Gg(this.g)))){this.J||Mt!=4||c==7||(c==8||0>=xr?ze(3):ze(2)),Yh(this);var d=this.g.Z();this.X=d;t:if(wg(this)){var y=Gg(this.g);o="";var N=y.length,M=ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ps(this),Xa(this);var q="";break t}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(y[c],{stream:!(M&&c==N-1)});y.length=0,this.h.g+=o,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=d==200,qh(this.i,this.u,this.A,this.l,this.R,Mt,d),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,St=this.g;if((Ve=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ve)){var ye=Ve;break t}}ye=null}if(d=ye)si(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$h(this,d);else{this.o=!1,this.s=3,st(12),Ps(this),Xa(this);break e}}if(this.P){d=!0;let Rn;for(;!this.J&&this.C<q.length;)if(Rn=QA(this,q),Rn==Qh){Mt==4&&(this.s=4,st(14),d=!1),si(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==Sg){this.s=4,st(15),si(this.i,this.l,q,"[Invalid Chunk]"),d=!1;break}else si(this.i,this.l,Rn,null),$h(this,Rn);if(wg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||q.length!=0||this.h.h||(this.s=1,st(16),d=!1),this.o=this.o&&d,!d)si(this.i,this.l,q,"[Invalid Chunked Response]"),Ps(this),Xa(this);else if(0<q.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),tf(Vt),Vt.M=!0,st(11))}}else si(this.i,this.l,q,null),$h(this,q);Mt==4&&Ps(this),this.o&&!this.J&&(Mt==4?Wg(this.j,this):(this.o=!1,Wl(this)))}else uw(this.g),d==400&&0<q.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),Ps(this),Xa(this)}}}catch{}finally{}};function wg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function QA(o,c){var d=o.C,y=c.indexOf(`
`,d);return y==-1?Qh:(d=Number(c.substring(d,y)),isNaN(d)?Sg:(y+=1,y+d>c.length?Qh:(c=c.slice(y,y+d),o.C=y+d,c)))}ji.prototype.cancel=function(){this.J=!0,Ps(this)};function Wl(o){o.S=Date.now()+o.I,xg(o,o.I)}function xg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ii(p(o.ba,o),c)}function Yh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}ji.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Hh(this.i,this.A),this.L!=2&&(ze(),st(17)),Ps(this),this.s=2,Xa(this)):xg(this,this.S-o)};function Xa(o){o.j.G==0||o.J||Wg(o.j,o)}function Ps(o){Yh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Ql(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function $h(o,c){try{var d=o.j;if(d.G!=0&&(d.g==o||Xh(d.h,o))){if(!o.K&&Xh(d.h,o)&&d.G==3){try{var y=d.Da.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var N=y;if(N[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)ou(d),ru(d);else break e;ef(d),st(18)}}else d.za=N[1],0<d.za-d.T&&37500>N[2]&&d.F&&d.v==0&&!d.C&&(d.C=ii(p(d.Za,d),6e3));if(1>=Cg(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Us(d,11)}else if((o.K||d.g==o)&&ou(d),!E(c))for(N=d.Da.g.parse(c),c=0;c<N.length;c++){let ye=N[c];if(d.T=ye[0],ye=ye[1],d.G==2)if(ye[0]=="c"){d.K=ye[1],d.ia=ye[2];const Vt=ye[3];Vt!=null&&(d.la=Vt,d.j.info("VER="+d.la));const Mt=ye[4];Mt!=null&&(d.Aa=Mt,d.j.info("SVER="+d.Aa));const xr=ye[5];xr!=null&&typeof xr=="number"&&0<xr&&(y=1.5*xr,d.L=y,d.j.info("backChannelRequestTimeoutMs_="+y)),y=d;const Rn=o.g;if(Rn){const uu=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uu){var M=y.h;M.g||uu.indexOf("spdy")==-1&&uu.indexOf("quic")==-1&&uu.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Zh(M,M.h),M.h=null))}if(y.D){const nf=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;nf&&(y.ya=nf,Pe(y.I,y.D,nf))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),y=d;var q=o;if(y.qa=ty(y,y.J?y.ia:null,y.W),q.K){Ng(y.h,q);var Ve=q,St=y.L;St&&(Ve.I=St),Ve.B&&(Yh(Ve),Wl(Ve)),y.g=q}else Xg(y);0<d.i.length&&au(d)}else ye[0]!="stop"&&ye[0]!="close"||Us(d,7);else d.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Us(d,7):Jh(d):ye[0]!="noop"&&d.l&&d.l.ta(ye),d.v=0)}}ze(4)}catch{}}var KA=class{constructor(o,c){this.g=o,this.map=c}};function Rg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ig(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Cg(o){return o.h?1:o.g?o.g.size:0}function Xh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Zh(o,c){o.g?o.g.add(c):o.h=c}function Ng(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Rg.prototype.cancel=function(){if(this.i=Dg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Dg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.D);return c}return O(o.i)}function YA(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],d=o.length,y=0;y<d;y++)c.push(o[y]);return c}c=[],d=0;for(y in o)c[d++]=o[y];return c}function $A(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var d=0;d<o;d++)c.push(d);return c}c=[],d=0;for(const y in o)c[d++]=y;return c}}}function Og(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var d=$A(o),y=YA(o),N=y.length,M=0;M<N;M++)c.call(void 0,y[M],d&&d[M],o)}var Vg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XA(o,c){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var y=o[d].indexOf("="),N=null;if(0<=y){var M=o[d].substring(0,y);N=o[d].substring(y+1)}else M=o[d];c(M,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Ls(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Ls){this.h=o.h,Jl(this,o.j),this.o=o.o,this.g=o.g,eu(this,o.s),this.l=o.l;var c=o.i,d=new Ja;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),Mg(this,d),this.m=o.m}else o&&(c=String(o).match(Vg))?(this.h=!1,Jl(this,c[1]||"",!0),this.o=Za(c[2]||""),this.g=Za(c[3]||"",!0),eu(this,c[4]),this.l=Za(c[5]||"",!0),Mg(this,c[6]||"",!0),this.m=Za(c[7]||"")):(this.h=!1,this.i=new Ja(null,this.h))}Ls.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Wa(c,kg,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Wa(c,kg,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Wa(d,d.charAt(0)=="/"?JA:WA,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Wa(d,tw)),o.join("")};function ri(o){return new Ls(o)}function Jl(o,c,d){o.j=d?Za(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function eu(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Mg(o,c,d){c instanceof Ja?(o.i=c,nw(o.i,o.h)):(d||(c=Wa(c,ew)),o.i=new Ja(c,o.h))}function Pe(o,c,d){o.i.set(c,d)}function tu(o){return Pe(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Za(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Wa(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,ZA),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function ZA(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var kg=/[#\/\?@]/g,WA=/[#\?:]/g,JA=/[#\?]/g,ew=/[#\?@]/g,tw=/#/g;function Ja(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Pi(o){o.g||(o.g=new Map,o.h=0,o.i&&XA(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=Ja.prototype,t.add=function(o,c){Pi(this),this.i=null,o=Ar(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function jg(o,c){Pi(o),c=Ar(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Pg(o,c){return Pi(o),c=Ar(o,c),o.g.has(c)}t.forEach=function(o,c){Pi(this),this.g.forEach(function(d,y){d.forEach(function(N){o.call(c,N,y,this)},this)},this)},t.na=function(){Pi(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let y=0;y<c.length;y++){const N=o[y];for(let M=0;M<N.length;M++)d.push(c[y])}return d},t.V=function(o){Pi(this);let c=[];if(typeof o=="string")Pg(this,o)&&(c=c.concat(this.g.get(Ar(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)c=c.concat(o[d])}return c},t.set=function(o,c){return Pi(this),this.i=null,o=Ar(this,o),Pg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Lg(o,c,d){jg(o,c),0<d.length&&(o.i=null,o.g.set(Ar(o,c),O(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var y=c[d];const M=encodeURIComponent(String(y)),q=this.V(y);for(y=0;y<q.length;y++){var N=M;q[y]!==""&&(N+="="+encodeURIComponent(String(q[y]))),o.push(N)}}return this.i=o.join("&")};function Ar(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function nw(o,c){c&&!o.j&&(Pi(o),o.i=null,o.g.forEach(function(d,y){var N=y.toLowerCase();y!=N&&(jg(this,y),Lg(this,N,d))},o)),o.j=c}function iw(o,c){const d=new jn;if(l.Image){const y=new Image;y.onload=_(Li,d,"TestLoadImage: loaded",!0,c,y),y.onerror=_(Li,d,"TestLoadImage: error",!1,c,y),y.onabort=_(Li,d,"TestLoadImage: abort",!1,c,y),y.ontimeout=_(Li,d,"TestLoadImage: timeout",!1,c,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=o}else c(!1)}function sw(o,c){const d=new jn,y=new AbortController,N=setTimeout(()=>{y.abort(),Li(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:y.signal}).then(M=>{clearTimeout(N),M.ok?Li(d,"TestPingServer: ok",!0,c):Li(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Li(d,"TestPingServer: error",!1,c)})}function Li(o,c,d,y,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),y(d)}catch{}}function rw(){this.g=new Yl}function aw(o,c,d){const y=d||"";try{Og(o,function(N,M){let q=N;f(N)&&(q=$a(N)),c.push(y+M+"="+encodeURIComponent(q))})}catch(N){throw c.push(y+"type="+encodeURIComponent("_badmap")),N}}function nu(o){this.l=o.Ub||null,this.j=o.eb||!1}C(nu,br),nu.prototype.g=function(){return new iu(this.l,this.j)},nu.prototype.i=function(o){return function(){return o}}({});function iu(o,c){Ee.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(iu,Ee),t=iu.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,to(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,eo(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,to(this)),this.g&&(this.readyState=3,to(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ug(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ug(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?eo(this):to(this),this.readyState==3&&Ug(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,eo(this))},t.Qa=function(o){this.g&&(this.response=o,eo(this))},t.ga=function(){this.g&&eo(this)};function eo(o){o.readyState=4,o.l=null,o.j=null,o.v=null,to(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function to(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function zg(o){let c="";return F(o,function(d,y){c+=y,c+=":",c+=d,c+=`\r
`}),c}function Wh(o,c,d){e:{for(y in d){var y=!1;break e}y=!0}y||(d=zg(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):Pe(o,c,d))}function Xe(o){Ee.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Xe,Ee);var ow=/^https?$/i,lw=["POST","PUT"];t=Xe.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,d,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gh.g(),this.v=this.o?$l(this.o):$l(Gh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(M){Bg(this,M);return}if(o=d||"",d=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var N in y)d.set(N,y[N]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())d.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(d.keys()).find(M=>M.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(lw,c,void 0))||y||N||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,q]of d)this.g.setRequestHeader(M,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fg(this),this.u=!0,this.g.send(o),this.u=!1}catch(M){Bg(this,M)}};function Bg(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,qg(o),su(o)}function qg(o){o.A||(o.A=!0,Ie(o,"complete"),Ie(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ie(this,"complete"),Ie(this,"abort"),su(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),su(this,!0)),Xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Hg(this):this.bb())},t.bb=function(){Hg(this)};function Hg(o){if(o.h&&typeof a<"u"&&(!o.v[1]||ai(o)!=4||o.Z()!=2)){if(o.u&&ai(o)==4)Er(o.Ea,0,o);else if(Ie(o,"readystatechange"),ai(o)==4){o.h=!1;try{const q=o.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var y;if(y=q===0){var N=String(o.D).match(Vg)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),y=!ow.test(N?N.toLowerCase():"")}d=y}if(d)Ie(o,"complete"),Ie(o,"success");else{o.m=6;try{var M=2<ai(o)?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.Z()+"]",qg(o)}}finally{su(o)}}}}function su(o,c){if(o.g){Fg(o);const d=o.g,y=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||Ie(o,"ready");try{d.onreadystatechange=y}catch{}}}function Fg(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function ai(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<ai(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Kl(c)}};function Gg(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function uw(o){const c={};o=(o.g&&2<=ai(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<o.length;y++){if(E(o[y]))continue;var d=R(o[y]);const N=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const M=c[N]||[];c[N]=M,M.push(d)}T(c,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function no(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function Qg(o){this.Aa=0,this.i=[],this.j=new jn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=no("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=no("baseRetryDelayMs",5e3,o),this.cb=no("retryDelaySeedMs",1e4,o),this.Wa=no("forwardChannelMaxRetries",2,o),this.wa=no("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Rg(o&&o.concurrentRequestLimit),this.Da=new rw,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Qg.prototype,t.la=8,t.G=1,t.connect=function(o,c,d,y){st(0),this.W=o,this.H=c||{},d&&y!==void 0&&(this.H.OSID=d,this.H.OAID=y),this.F=this.X,this.I=ty(this,null,this.W),au(this)};function Jh(o){if(Kg(o),o.G==3){var c=o.U++,d=ri(o.I);if(Pe(d,"SID",o.K),Pe(d,"RID",c),Pe(d,"TYPE","terminate"),io(o,d),c=new ji(o,o.j,c),c.L=2,c.v=tu(ri(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=ny(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Wl(c)}ey(o)}function ru(o){o.g&&(tf(o),o.g.cancel(),o.g=null)}function Kg(o){ru(o),o.u&&(l.clearTimeout(o.u),o.u=null),ou(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function au(o){if(!Ig(o.h)&&!o.s){o.s=!0;var c=o.Ga;Y||be(),$||(Y(),$=!0),ge.add(c,o),o.B=0}}function cw(o,c){return Cg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ii(p(o.Ga,o,c),Jg(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new ji(this,this.j,o);let M=this.o;if(this.S&&(M?(M=v(M),S(M,this.S)):M=this.S),this.m!==null||this.O||(N.H=M,M=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var y=this.i[d];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=$g(this,N,c),d=ri(this.I),Pe(d,"RID",o),Pe(d,"CVER",22),this.D&&Pe(d,"X-HTTP-Session-Id",this.D),io(this,d),M&&(this.O?c="headers="+encodeURIComponent(String(zg(M)))+"&"+c:this.m&&Wh(d,this.m,M)),Zh(this.h,N),this.Ua&&Pe(d,"TYPE","init"),this.P?(Pe(d,"$req",c),Pe(d,"SID","null"),N.T=!0,Kh(N,d,null)):Kh(N,d,c),this.G=2}}else this.G==3&&(o?Yg(this,o):this.i.length==0||Ig(this.h)||Yg(this))};function Yg(o,c){var d;c?d=c.l:d=o.U++;const y=ri(o.I);Pe(y,"SID",o.K),Pe(y,"RID",d),Pe(y,"AID",o.T),io(o,y),o.m&&o.o&&Wh(y,o.m,o.o),d=new ji(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),c&&(o.i=c.D.concat(o.i)),c=$g(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Zh(o.h,d),Kh(d,y,c)}function io(o,c){o.H&&F(o.H,function(d,y){Pe(c,y,d)}),o.l&&Og({},function(d,y){Pe(c,y,d)})}function $g(o,c,d){d=Math.min(o.i.length,d);var y=o.l?p(o.l.Na,o.l,o):null;e:{var N=o.i;let M=-1;for(;;){const q=["count="+d];M==-1?0<d?(M=N[0].g,q.push("ofs="+M)):M=0:q.push("ofs="+M);let Ve=!0;for(let St=0;St<d;St++){let ye=N[St].g;const Vt=N[St].map;if(ye-=M,0>ye)M=Math.max(0,N[St].g-100),Ve=!1;else try{aw(Vt,q,"req"+ye+"_")}catch{y&&y(Vt)}}if(Ve){y=q.join("&");break e}}}return o=o.i.splice(0,d),c.D=o,y}function Xg(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;Y||be(),$||(Y(),$=!0),ge.add(c,o),o.v=0}}function ef(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ii(p(o.Fa,o),Jg(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Zg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ii(p(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),ru(this),Zg(this))};function tf(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Zg(o){o.g=new ji(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=ri(o.qa);Pe(c,"RID","rpc"),Pe(c,"SID",o.K),Pe(c,"AID",o.T),Pe(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Pe(c,"TO",o.ja),Pe(c,"TYPE","xmlhttp"),io(o,c),o.m&&o.o&&Wh(c,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=tu(ri(c)),d.m=null,d.P=!0,Ag(d,o)}t.Za=function(){this.C!=null&&(this.C=null,ru(this),ef(this),st(19))};function ou(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Wg(o,c){var d=null;if(o.g==c){ou(o),tf(o),o.g=null;var y=2}else if(Xh(o.h,c))d=c.D,Ng(o.h,c),y=1;else return;if(o.G!=0){if(c.o)if(y==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;y=Oe(),Ie(y,new Sr(y,d)),au(o)}else Xg(o);else if(N=c.s,N==3||N==0&&0<c.X||!(y==1&&cw(o,c)||y==2&&ef(o)))switch(d&&0<d.length&&(c=o.h,c.i=c.i.concat(d)),N){case 1:Us(o,5);break;case 4:Us(o,10);break;case 3:Us(o,6);break;default:Us(o,2)}}}function Jg(o,c){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*c}function Us(o,c){if(o.j.info("Error code "+c),c==2){var d=p(o.fb,o),y=o.Xa;const N=!y;y=new Ls(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Jl(y,"https"),tu(y),N?iw(y.toString(),d):sw(y.toString(),d)}else st(2);o.G=0,o.l&&o.l.sa(c),ey(o),Kg(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function ey(o){if(o.G=0,o.ka=[],o.l){const c=Dg(o.h);(c.length!=0||o.i.length!=0)&&(V(o.ka,c),V(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function ty(o,c,d){var y=d instanceof Ls?ri(d):new Ls(d);if(y.g!="")c&&(y.g=c+"."+y.g),eu(y,y.s);else{var N=l.location;y=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var M=new Ls(null);y&&Jl(M,y),c&&(M.g=c),N&&eu(M,N),d&&(M.l=d),y=M}return d=o.D,c=o.ya,d&&c&&Pe(y,d,c),Pe(y,"VER",o.la),io(o,y),y}function ny(o,c,d){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Xe(new nu({eb:d})):new Xe(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function iy(){}t=iy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function lu(){}lu.prototype.g=function(o,c){return new en(o,c)};function en(o,c){Ee.call(this),this.g=new Qg(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new wr(this)}C(en,Ee),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Jh(this.g)},en.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=$a(o),o=d);c.i.push(new KA(c.Ya++,o)),c.G==3&&au(c)},en.prototype.N=function(){this.g.l=null,delete this.j,Jh(this.g),delete this.g,en.aa.N.call(this)};function sy(o){H.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}C(sy,H);function ry(){ee.call(this),this.status=1}C(ry,ee);function wr(o){this.g=o}C(wr,iy),wr.prototype.ua=function(){Ie(this.g,"a")},wr.prototype.ta=function(o){Ie(this.g,new sy(o))},wr.prototype.sa=function(o){Ie(this.g,new ry)},wr.prototype.ra=function(){Ie(this.g,"b")},lu.prototype.createWebChannel=lu.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,Cb=function(){return new lu},Ib=function(){return Oe()},Rb=ie,Xd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ki.NO_ERROR=0,ki.TIMEOUT=8,ki.HTTP_ERROR=6,Fu=ki,Tg.COMPLETE="complete",xb=Tg,Xl.EventType=js,js.OPEN="a",js.CLOSE="b",js.ERROR="c",js.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,vo=Xl,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,wb=Xe}).apply(typeof wu<"u"?wu:typeof self<"u"?self:typeof window<"u"?window:{});const H_="@firebase/firestore",F_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qa="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new gp("@firebase/firestore");function Vr(){return rr.logLevel}function G(t,...e){if(rr.logLevel<=ue.DEBUG){const n=e.map(vp);rr.debug(`Firestore (${qa}): ${t}`,...n)}}function Ri(t,...e){if(rr.logLevel<=ue.ERROR){const n=e.map(vp);rr.error(`Firestore (${qa}): ${t}`,...n)}}function Sa(t,...e){if(rr.logLevel<=ue.WARN){const n=e.map(vp);rr.warn(`Firestore (${qa}): ${t}`,...n)}}function vp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Nb(t,i,n)}function Nb(t,e,n){let i=`FIRESTORE (${qa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ri(i),new Error(i)}function pe(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||Nb(e,s,i)}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Di{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class G2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(jt.UNAUTHENTICATED))}shutdown(){}}class Q2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class K2{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new Fn;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Fn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Fn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pe(typeof i.accessToken=="string",31837,{l:i}),new Db(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new jt(e)}}class Y2{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $2{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new Y2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class G_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,En(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){pe(this.o===void 0,3512);const i=r=>{r.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,G("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new G_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new G_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=Z2(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%62))}return i}}function ce(t,e){return t<e?-1:t>e?1:0}function Zd(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),r=e.charAt(i);if(s!==r)return Ff(s)===Ff(r)?ce(s,r):Ff(s)?1:-1}return ce(t.length,e.length)}const W2=55296,J2=57343;function Ff(t){const e=t.charCodeAt(0);return e>=W2&&e<=J2}function Aa(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="__name__";class Ln{constructor(e,n,i){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&X(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ln.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ln?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=Ln.compareSegments(e.get(s),n.get(s));if(r!==0)return r}return ce(e.length,n.length)}static compareSegments(e,n){const i=Ln.isNumericId(e),s=Ln.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Ln.extractNumericId(e).compare(Ln.extractNumericId(n)):Zd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ps.fromString(e.substring(4,e.length-2))}}class xe extends Ln{construct(e,n,i){return new xe(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new B(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const eI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends Ln{construct(e,n,i){return new It(e,n,i)}static isValidIdentifier(e){return eI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Q_}static keyField(){return new It([Q_])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new B(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new B(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new B(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(xe.fromString(e))}static fromName(e){return new K(xe.fromString(e).popFirst(5))}static empty(){return new K(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new xe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(t,e,n){if(!n)throw new B(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tI(t,e,n,i){if(e===!0&&i===!0)throw new B(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function K_(t){if(!K.isDocumentKey(t))throw new B(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Y_(t){if(K.isDocumentKey(t))throw new B(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function Ht(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gh(t);throw new B(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ml(t,e){if(!Vb(t))throw new B(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,r="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new B(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=-62135596800,X_=1e6;class Le{static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*X_);return new Le(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$_)throw new B(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/X_}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ml(e,Le._jsonSchema))return new Le(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:ut("string",Le._jsonSchemaVersion),seconds:ut("number"),nanoseconds:ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{static fromTimestamp(e){return new W(e)}static min(){return new W(new Le(0,0))}static max(){return new W(new Le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=-1;function nI(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=W.fromTimestamp(i===1e9?new Le(n+1,0):new Le(n,i));return new Ts(s,K.empty(),e)}function iI(t){return new Ts(t.readTime,t.key,rl)}class Ts{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ts(W.min(),K.empty(),rl)}static max(){return new Ts(W.max(),K.empty(),rl)}}function sI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==rI)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,i)=>{n(e)})}static reject(e){return new j((n,i)=>{i(e)})}static waitFor(e){return new j((n,i)=>{let s=0,r=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(e){let n=j.resolve(!1);for(const i of e)n=n.next(s=>s?j.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new j((i,s)=>{const r=e.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const f=u;n(e[f]).next(m=>{a[f]=m,++l,l===r&&i(a)},m=>s(m))}})}static doWhile(e,n){return new j((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}function oI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}yh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp=-1;function kl(t){return t==null}function Oc(t){return t===0&&1/t==-1/0}function lI(t){return typeof t=="number"&&Number.isInteger(t)&&!Oc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="";function uI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Z_(e)),e=cI(t.get(n),e);return Z_(e)}function cI(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const r=t.charAt(s);switch(r){case"\0":n+="";break;case Mb:n+="";break;default:n+=r}}return n}function Z_(t){return t+Mb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xu(this.root,e,this.comparator,!0)}}class xu{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??xt.RED,this.left=s??xt.EMPTY,this.right=r??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new xt(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return xt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,i,s,r){return this}insert(e,n,i){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new J_(this.data.getIterator())}getIteratorFrom(e){return new J_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class J_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new on([])}unionWith(e){let n=new dt(It.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Aa(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new jb("Invalid base64 string: "+r):r}}(e);return new Dt(n)}static fromUint8Array(e){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(e);return new Dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const hI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(t){if(pe(!!t,39018),typeof t=="string"){let e=0;const n=hI.exec(t);if(pe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ss(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="server_timestamp",Lb="__type__",Ub="__previous_value__",zb="__local_write_time__";function _h(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Lb])==null?void 0:i.stringValue)===Pb}function vh(t){const e=t.mapValue.fields[Ub];return _h(e)?vh(e):e}function al(t){const e=bs(t.mapValue.fields[zb].timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n,i,s,r,a,l,u,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=m}}const Vc="(default)";class ol{constructor(e,n){this.projectId=e,this.database=n||Vc}static empty(){return new ol("","")}get isDefaultDatabase(){return this.database===Vc}isEqual(e){return e instanceof ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="__type__",dI="__max__",Ru={mapValue:{}},qb="__vector__",Mc="value";function As(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_h(t)?4:pI(t)?9007199254740991:mI(t)?10:11:X(28295,{value:t})}function Xn(t,e){if(t===e)return!0;const n=As(t);if(n!==As(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return al(t).isEqual(al(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=bs(s.timestampValue),l=bs(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Ss(s.bytesValue).isEqual(Ss(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return tt(s.geoPointValue.latitude)===tt(r.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return tt(s.integerValue)===tt(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=tt(s.doubleValue),l=tt(r.doubleValue);return a===l?Oc(a)===Oc(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Aa(t.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(W_(a)!==W_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Xn(a[u],l[u])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function ll(t,e){return(t.values||[]).find(n=>Xn(n,e))!==void 0}function wa(t,e){if(t===e)return 0;const n=As(t),i=As(e);if(n!==i)return ce(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(r,a){const l=tt(r.integerValue||r.doubleValue),u=tt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return ev(t.timestampValue,e.timestampValue);case 4:return ev(al(t),al(e));case 5:return Zd(t.stringValue,e.stringValue);case 6:return function(r,a){const l=Ss(r),u=Ss(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){const m=ce(l[f],u[f]);if(m!==0)return m}return ce(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,a){const l=ce(tt(r.latitude),tt(a.latitude));return l!==0?l:ce(tt(r.longitude),tt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tv(t.arrayValue,e.arrayValue);case 10:return function(r,a){var p,_,C,O;const l=r.fields||{},u=a.fields||{},f=(p=l[Mc])==null?void 0:p.arrayValue,m=(_=u[Mc])==null?void 0:_.arrayValue,g=ce(((C=f==null?void 0:f.values)==null?void 0:C.length)||0,((O=m==null?void 0:m.values)==null?void 0:O.length)||0);return g!==0?g:tv(f,m)}(t.mapValue,e.mapValue);case 11:return function(r,a){if(r===Ru.mapValue&&a===Ru.mapValue)return 0;if(r===Ru.mapValue)return 1;if(a===Ru.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),f=a.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const p=Zd(u[g],m[g]);if(p!==0)return p;const _=wa(l[u[g]],f[m[g]]);if(_!==0)return _}return ce(u.length,m.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function ev(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=bs(t),i=bs(e),s=ce(n.seconds,i.seconds);return s!==0?s:ce(n.nanos,i.nanos)}function tv(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=wa(n[s],i[s]);if(r)return r}return ce(n.length,i.length)}function xa(t){return Wd(t)}function Wd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=bs(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=Wd(r);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${Wd(n.fields[a])}`;return s+"}"}(t.mapValue):X(61005,{value:t})}function Gu(t){switch(As(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vh(t);return e?16+Gu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ss(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+Gu(r),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Cs(i.fields,(r,a)=>{s+=r.length+Gu(a)}),s}(t.mapValue);default:throw X(13486,{value:t})}}function kc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jd(t){return!!t&&"integerValue"in t}function bp(t){return!!t&&"arrayValue"in t}function nv(t){return!!t&&"nullValue"in t}function iv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qu(t){return!!t&&"mapValue"in t}function mI(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Bb])==null?void 0:i.stringValue)===qb}function Uo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Cs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Uo(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Uo(t.arrayValue.values[n]);return e}return{...t}}function pI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===dI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Qu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uo(n)}setAll(e){let n=It.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=Uo(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());Qu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Qu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Cs(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Bt(Uo(this.value))}}function Hb(t){const e=[];return Cs(t.fields,(n,i)=>{const s=new It([n]);if(Qu(i)){const r=Hb(i.mapValue).fields;if(r.length===0)e.push(s);else for(const a of r)e.push(s.child(a))}else e.push(s)}),new on(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,i,s,r,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(e){return new _t(e,0,W.min(),W.min(),W.min(),Bt.empty(),0)}static newFoundDocument(e,n,i,s){return new _t(e,1,n,W.min(),i,s,0)}static newNoDocument(e,n){return new _t(e,2,n,W.min(),W.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,W.min(),W.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n){this.position=e,this.inclusive=n}}function sv(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],a=t.position[s];if(r.field.isKeyField()?i=K.comparator(K.fromName(a.referenceValue),n.key):i=wa(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function rv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n="asc"){this.field=e,this.dir=n}}function gI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{}class lt extends Fb{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new _I(e,n,i):n==="array-contains"?new TI(e,i):n==="in"?new bI(e,i):n==="not-in"?new SI(e,i):n==="array-contains-any"?new AI(e,i):new lt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new vI(e,i):new EI(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(wa(n,this.value)):n!==null&&As(this.value)===As(n)&&this.matchesComparison(wa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends Fb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Dn(e,n)}matches(e){return Gb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Gb(t){return t.op==="and"}function Qb(t){return yI(t)&&Gb(t)}function yI(t){for(const e of t.filters)if(e instanceof Dn)return!1;return!0}function em(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+xa(t.value);if(Qb(t))return t.filters.map(e=>em(e)).join(",");{const e=t.filters.map(n=>em(n)).join(",");return`${t.op}(${e})`}}function Kb(t,e){return t instanceof lt?function(i,s){return s instanceof lt&&i.op===s.op&&i.field.isEqual(s.field)&&Xn(i.value,s.value)}(t,e):t instanceof Dn?function(i,s){return s instanceof Dn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&Kb(a,s.filters[l]),!0):!1}(t,e):void X(19439)}function Yb(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${xa(n.value)}`}(t):t instanceof Dn?function(n){return n.op.toString()+" {"+n.getFilters().map(Yb).join(" ,")+"}"}(t):"Filter"}class _I extends lt{constructor(e,n,i){super(e,n,i),this.key=K.fromName(i.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class vI extends lt{constructor(e,n){super(e,"in",n),this.keys=$b("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class EI extends lt{constructor(e,n){super(e,"not-in",n),this.keys=$b("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $b(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>K.fromName(i.referenceValue))}class TI extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bp(n)&&ll(n.arrayValue,this.value)}}class bI extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ll(this.value.arrayValue,n)}}class SI extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ll(this.value.arrayValue,n)}}class AI extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ll(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n=null,i=[],s=[],r=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function av(t,e=null,n=[],i=[],s=null,r=null,a=null){return new wI(t,e,n,i,s,r,a)}function Sp(t){const e=ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>em(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),kl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>xa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>xa(i)).join(",")),e.Te=n}return e.Te}function Ap(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Kb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rv(t.startAt,e.startAt)&&rv(t.endAt,e.endAt)}function tm(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n=null,i=[],s=[],r=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xI(t,e,n,i,s,r,a,l){return new dr(t,e,n,i,s,r,a,l)}function Eh(t){return new dr(t)}function ov(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wp(t){return t.collectionGroup!==null}function aa(t){const e=ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new dt(It.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new ul(r,i))}),n.has(It.keyField().canonicalString())||e.Ie.push(new ul(It.keyField(),i))}return e.Ie}function Gn(t){const e=ne(t);return e.Ee||(e.Ee=RI(e,aa(t))),e.Ee}function RI(t,e){if(t.limitType==="F")return av(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new ul(s.field,r)});const n=t.endAt?new Ra(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ra(t.startAt.position,t.startAt.inclusive):null;return av(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function nm(t,e){const n=t.filters.concat([e]);return new dr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jc(t,e,n){return new dr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Th(t,e){return Ap(Gn(t),Gn(e))&&t.limitType===e.limitType}function Xb(t){return`${Sp(Gn(t))}|lt:${t.limitType}`}function Mr(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>Yb(s)).join(", ")}]`),kl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>xa(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>xa(s)).join(",")),`Target(${i})`}(Gn(t))}; limitType=${t.limitType})`}function bh(t,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):K.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(t,e)&&function(i,s){for(const r of aa(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(a,l,u){const f=sv(a,l,u);return a.inclusive?f<=0:f<0}(i.startAt,aa(i),s)||i.endAt&&!function(a,l,u){const f=sv(a,l,u);return a.inclusive?f>=0:f>0}(i.endAt,aa(i),s))}(t,e)}function II(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Zb(t){return(e,n)=>{let i=!1;for(const s of aa(t)){const r=CI(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function CI(t,e,n){const i=t.field.isKeyField()?K.comparator(e.key,n.key):function(r,a,l){const u=a.data.field(r),f=l.data.field(r);return u!==null&&f!==null?wa(u,f):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return kb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=new Ke(K.comparator);function Ii(){return NI}const Wb=new Ke(K.comparator);function Eo(...t){let e=Wb;for(const n of t)e=e.insert(n.key,n);return e}function Jb(t){let e=Wb;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Gs(){return zo()}function eS(){return zo()}function zo(){return new mr(t=>t.toString(),(t,e)=>t.isEqual(e))}const DI=new Ke(K.comparator),OI=new dt(K.comparator);function he(...t){let e=OI;for(const n of t)e=e.add(n);return e}const VI=new dt(ce);function MI(){return VI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oc(e)?"-0":e}}function tS(t){return{integerValue:""+t}}function nS(t,e){return lI(e)?tS(e):xp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(){this._=void 0}}function kI(t,e,n){return t instanceof cl?function(s,r){const a={fields:{[Lb]:{stringValue:Pb},[zb]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&_h(r)&&(r=vh(r)),r&&(a.fields[Ub]=r),{mapValue:a}}(n,e):t instanceof Ia?sS(t,e):t instanceof Ca?rS(t,e):function(s,r){const a=iS(s,r),l=lv(a)+lv(s.Ae);return Jd(a)&&Jd(s.Ae)?tS(l):xp(s.serializer,l)}(t,e)}function jI(t,e,n){return t instanceof Ia?sS(t,e):t instanceof Ca?rS(t,e):n}function iS(t,e){return t instanceof hl?function(i){return Jd(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class cl extends Sh{}class Ia extends Sh{constructor(e){super(),this.elements=e}}function sS(t,e){const n=aS(e);for(const i of t.elements)n.some(s=>Xn(s,i))||n.push(i);return{arrayValue:{values:n}}}class Ca extends Sh{constructor(e){super(),this.elements=e}}function rS(t,e){let n=aS(e);for(const i of t.elements)n=n.filter(s=>!Xn(s,i));return{arrayValue:{values:n}}}class hl extends Sh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function lv(t){return tt(t.integerValue||t.doubleValue)}function aS(t){return bp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n){this.field=e,this.transform=n}}function PI(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Ia&&s instanceof Ia||i instanceof Ca&&s instanceof Ca?Aa(i.elements,s.elements,Xn):i instanceof hl&&s instanceof hl?Xn(i.Ae,s.Ae):i instanceof cl&&s instanceof cl}(t.transform,e.transform)}class LI{constructor(e,n){this.version=e,this.transformResults=n}}class Ct{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ct}static exists(e){return new Ct(void 0,e)}static updateTime(e){return new Ct(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ku(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wh{}function oS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xh(t.key,Ct.none()):new jl(t.key,t.data,Ct.none());{const n=t.data,i=Bt.empty();let s=new dt(It.comparator);for(let r of e.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new Ns(t.key,i,new on(s.toArray()),Ct.none())}}function UI(t,e,n){t instanceof jl?function(s,r,a){const l=s.value.clone(),u=cv(s.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ns?function(s,r,a){if(!Ku(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=cv(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(lS(s)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Bo(t,e,n,i){return t instanceof jl?function(r,a,l,u){if(!Ku(r.precondition,a))return l;const f=r.value.clone(),m=hv(r.fieldTransforms,u,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ns?function(r,a,l,u){if(!Ku(r.precondition,a))return l;const f=hv(r.fieldTransforms,u,a),m=a.data;return m.setAll(lS(r)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(r,a,l){return Ku(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function zI(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=iS(i.transform,s||null);r!=null&&(n===null&&(n=Bt.empty()),n.set(i.field,r))}return n||null}function uv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Aa(i,s,(r,a)=>PI(r,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jl extends wh{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ns extends wh{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function lS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function cv(t,e,n){const i=new Map;pe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const r=t[s],a=r.transform,l=e.data.field(r.field);i.set(r.field,jI(a,l,n[s]))}return i}function hv(t,e,n){const i=new Map;for(const s of t){const r=s.transform,a=n.data.field(s.field);i.set(s.field,kI(r,a,e))}return i}class xh extends wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uS extends wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&UI(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Bo(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Bo(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=eS();return this.mutations.forEach(s=>{const r=e.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const u=oS(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(W.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Aa(this.mutations,e.mutations,(n,i)=>uv(n,i))&&Aa(this.baseMutations,e.baseMutations,(n,i)=>uv(n,i))}}class Rp{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){pe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return DI}();const r=e.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new Rp(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt,de;function cS(t){switch(t){case k.OK:return X(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function hS(t){if(t===void 0)return Ri("GRPC error has no .code"),k.UNKNOWN;switch(t){case rt.OK:return k.OK;case rt.CANCELLED:return k.CANCELLED;case rt.UNKNOWN:return k.UNKNOWN;case rt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case rt.INTERNAL:return k.INTERNAL;case rt.UNAVAILABLE:return k.UNAVAILABLE;case rt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case rt.NOT_FOUND:return k.NOT_FOUND;case rt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case rt.ABORTED:return k.ABORTED;case rt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case rt.DATA_LOSS:return k.DATA_LOSS;default:return X(39323,{code:t})}}(de=rt||(rt={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=new ps([4294967295,4294967295],0);function fv(t){const e=FI().encode(t),n=new Ab;return n.update(e),new Uint8Array(n.digest())}function dv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new ps([n,i],0),new ps([s,r],0)]}class Ip{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new To(`Invalid padding: ${n}`);if(i<0)throw new To(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new To(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new To(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ps.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(ps.fromNumber(i)));return s.compare(GI)===1&&(s=new ps([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=fv(e),[i,s]=dv(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);if(!this.we(a))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),a=new Ip(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=fv(e),[i,s]=dv(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class To extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Pl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Rh(W.min(),s,new Ke(ce),Ii(),he())}}class Pl{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Pl(i,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class fS{constructor(e,n){this.targetId=e,this.Ce=n}}class dS{constructor(e,n,i=Dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class mv{constructor(){this.ve=0,this.Fe=pv(),this.Me=Dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=he(),n=he(),i=he();return this.Fe.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:X(38017,{changeType:r})}}),new Pl(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=pv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ii(),this.Je=Iu(),this.He=Iu(),this.Ye=new Ke(ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const r=s.target;if(tm(r))if(i===0){const a=new K(r.path);this.et(n,a,_t.newNoDocument(a,W.min()))}else pe(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=Ss(i).toUint8Array()}catch(u){if(u instanceof jb)return Sa("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Ip(a,s,r)}catch(u){return Sa(u instanceof To?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(l)||(this.et(n,r,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((r,a)=>{const l=this.ot(a);if(l){if(r.current&&tm(l.target)){const u=new K(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,_t.newNoDocument(u,e))}r.Be&&(n.set(a,r.ke()),r.qe())}});let i=he();this.He.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.je.forEach((r,a)=>a.setReadTime(e));const s=new Rh(e,n,this.Ye,this.je,i);return this.je=Ii(),this.Je=Iu(),this.He=Iu(),this.Ye=new Ke(ce),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new mv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new dt(ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new dt(ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Iu(){return new Ke(K.comparator)}function pv(){return new Ke(K.comparator)}const KI={asc:"ASCENDING",desc:"DESCENDING"},YI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$I={and:"AND",or:"OR"};class XI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function im(t,e){return t.useProto3Json||kl(e)?e:{value:e}}function Pc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZI(t,e){return Pc(t,e.toTimestamp())}function fn(t){return pe(!!t,49232),W.fromTimestamp(function(n){const i=bs(n);return new Le(i.seconds,i.nanos)}(t))}function Cp(t,e){return sm(t,e).canonicalString()}function sm(t,e){const n=function(s){return new xe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pS(t){const e=xe.fromString(t);return pe(TS(e),10190,{key:e.toString()}),e}function Lc(t,e){return Cp(t.databaseId,e.path)}function qo(t,e){const n=pS(e);if(n.get(1)!==t.databaseId.projectId)throw new B(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(yS(n))}function gS(t,e){return Cp(t.databaseId,e)}function WI(t){const e=pS(t);return e.length===4?xe.emptyPath():yS(e)}function rm(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yS(t){return pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gv(t,e,n){return{name:Lc(t,e),fields:n.value.mapValue.fields}}function JI(t,e){return"found"in e?function(i,s){pe(!!s.found,43571),s.found.name,s.found.updateTime;const r=qo(i,s.found.name),a=fn(s.found.updateTime),l=s.found.createTime?fn(s.found.createTime):W.min(),u=new Bt({mapValue:{fields:s.found.fields}});return _t.newFoundDocument(r,a,l,u)}(t,e):"missing"in e?function(i,s){pe(!!s.missing,3894),pe(!!s.readTime,22933);const r=qo(i,s.missing),a=fn(s.readTime);return _t.newNoDocument(r,a)}(t,e):X(7234,{result:e})}function eC(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:X(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(f,m){return f.useProto3Json?(pe(m===void 0||typeof m=="string",58123),Dt.fromBase64String(m||"")):(pe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Dt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(f){const m=f.code===void 0?k.UNKNOWN:hS(f.code);return new B(m,f.message||"")}(a);n=new dS(i,s,r,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=qo(t,i.document.name),r=fn(i.document.updateTime),a=i.document.createTime?fn(i.document.createTime):W.min(),l=new Bt({mapValue:{fields:i.document.fields}}),u=_t.newFoundDocument(s,r,a,l),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Yu(f,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=qo(t,i.document),r=i.readTime?fn(i.readTime):W.min(),a=_t.newNoDocument(s,r),l=i.removedTargetIds||[];n=new Yu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=qo(t,i.document),r=i.removedTargetIds||[];n=new Yu([],r,s,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new HI(s,r),l=i.targetId;n=new fS(l,a)}}return n}function _S(t,e){let n;if(e instanceof jl)n={update:gv(t,e.key,e.value)};else if(e instanceof xh)n={delete:Lc(t,e.key)};else if(e instanceof Ns)n={update:gv(t,e.key,e.data),updateMask:uC(e.fieldMask)};else{if(!(e instanceof uS))return X(16599,{Vt:e.type});n={verify:Lc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof cl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ia)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ca)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof hl)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw X(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:ZI(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:X(27497)}(t,e.precondition)),n}function tC(t,e){return t&&t.length>0?(pe(e!==void 0,14353),t.map(n=>function(s,r){let a=s.updateTime?fn(s.updateTime):fn(r);return a.isEqual(W.min())&&(a=fn(r)),new LI(a,s.transformResults||[])}(n,e))):[]}function nC(t,e){return{documents:[gS(t,e.path)]}}function iC(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=gS(t,s);const r=function(f){if(f.length!==0)return ES(Dn.create(f,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const a=function(f){if(f.length!==0)return f.map(m=>function(p){return{field:kr(p.field),direction:aC(p.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=im(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:s}}function sC(t){let e=WI(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){pe(i===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let r=[];n.where&&(r=function(g){const p=vS(g);return p instanceof Dn&&Qb(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(p=>function(C){return new ul(jr(C.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(g){let p;return p=typeof g=="object"?g.value:g,kl(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(g){const p=!!g.before,_=g.values||[];return new Ra(_,p)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const p=!g.before,_=g.values||[];return new Ra(_,p)}(n.endAt)),xI(e,s,a,r,l,"F",u,f)}function rC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=jr(n.unaryFilter.field);return lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=jr(n.unaryFilter.field);return lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=jr(n.unaryFilter.field);return lt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=jr(n.unaryFilter.field);return lt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return lt.create(jr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dn.create(n.compositeFilter.filters.map(i=>vS(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function aC(t){return KI[t]}function oC(t){return YI[t]}function lC(t){return $I[t]}function kr(t){return{fieldPath:t.canonicalString()}}function jr(t){return It.fromServerFormat(t.fieldPath)}function ES(t){return t instanceof lt?function(n){if(n.op==="=="){if(iv(n.value))return{unaryFilter:{field:kr(n.field),op:"IS_NAN"}};if(nv(n.value))return{unaryFilter:{field:kr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iv(n.value))return{unaryFilter:{field:kr(n.field),op:"IS_NOT_NAN"}};if(nv(n.value))return{unaryFilter:{field:kr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kr(n.field),op:oC(n.op),value:n.value}}}(t):t instanceof Dn?function(n){const i=n.getFilters().map(s=>ES(s));return i.length===1?i[0]:{compositeFilter:{op:lC(n.op),filters:i}}}(t):X(54877,{filter:t})}function uC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,i,s,r=W.min(),a=W.min(),l=Dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.yt=e}}function hC(t){const e=sC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.Cn=new dC}addToCollectionParentIndex(e,n){return this.Cn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Ts.min())}updateCollectionGroup(e,n,i){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class dC{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new dt(xe.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new dt(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bS=41943040;class $t{static withCacheSize(e){return new $t(e,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$t.DEFAULT_COLLECTION_PERCENTILE=10,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$t.DEFAULT=new $t(bS,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$t.DISABLED=new $t(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Na(0)}static cr(){return new Na(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="LruGarbageCollector",mC=1048576;function vv([t,e],[n,i]){const s=ce(t,n);return s===0?ce(e,i):s}class pC{constructor(e){this.Ir=e,this.buffer=new dt(vv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();vv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class gC{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){G(_v,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fa(n)?G(_v,"Ignoring IndexedDB error during garbage collection: ",n):await Ha(n)}await this.Vr(3e5)})}}class yC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return j.resolve(yh.ce);const i=new pC(n);return this.mr.forEachTarget(e,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(yv)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,r,a,l,u,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(e,s))).next(g=>(i=g,l=Date.now(),this.removeTargets(e,i,n))).next(g=>(r=g,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),Vr()<=ue.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(f-u)+`ms
Total Duration: ${f-m}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:g})))}}function _C(t,e){return new yC(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.changes=new mr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?j.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Bo(i.mutation,s,on.empty(),Le.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,he()).next(()=>i))}getLocalViewOfDocuments(e,n,i=he()){const s=Gs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let a=Eo();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,he()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,s){let r=Ii();const a=zo(),l=function(){return zo()}();return n.forEach((u,f)=>{const m=i.get(f.key);s.has(f.key)&&(m===void 0||m.mutation instanceof Ns)?r=r.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),Bo(m.mutation,f,m.mutation.getFieldMask(),Le.now())):a.set(f.key,on.empty())}),this.recalculateAndSaveOverlays(e,r).next(u=>(u.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>l.set(f,new EC(m,a.get(f)??null))),l))}recalculateAndSaveOverlays(e,n){const i=zo();let s=new Ke((a,l)=>a-l),r=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const f=n.get(u);if(f===null)return;let m=i.get(u)||on.empty();m=l.applyToLocalView(f,m),i.set(u,m);const g=(s.get(l.batchId)||he()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,m=u.value,g=eS();m.forEach(p=>{if(!r.has(p)){const _=oS(n.get(p),i.get(p));_!==null&&g.set(p,_),r=r.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return j.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(a){return K.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wp(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):j.resolve(Gs());let l=rl,u=r;return a.next(f=>j.forEach(f,(m,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),r.get(m)?j.resolve():this.remoteDocumentCache.getEntry(e,m).next(p=>{u=u.insert(m,p)}))).next(()=>this.populateOverlays(e,f,r)).next(()=>this.computeViews(e,u,f,he())).next(m=>({batchId:l,changes:Jb(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(i=>{let s=Eo();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const r=n.collectionGroup;let a=Eo();return this.indexManager.getCollectionParents(e,r).next(l=>j.forEach(l,u=>{const f=function(g,p){return new dr(p,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next(m=>{m.forEach((g,p)=>{a=a.insert(g,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r,s))).next(a=>{r.forEach((u,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,_t.newInvalidDocument(m)))});let l=Eo();return a.forEach((u,f)=>{const m=r.get(u);m!==void 0&&Bo(m.mutation,f,on.empty(),Le.now()),bh(n,f)&&(l=l.insert(u,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:fn(s.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:hC(s.bundledQuery),readTime:fn(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.overlays=new Ke(K.comparator),this.qr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Gs();return j.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.St(e,n,r)}),j.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),j.resolve()}getOverlaysForCollection(e,n,i){const s=Gs(),r=n.length+1,a=new K(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new Ke((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=r.get(f.largestBatchId);m===null&&(m=Gs(),r=r.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const l=Gs(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>l.set(f,m)),!(l.size()>=s)););return j.resolve(l)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new qI(n,i));let r=this.qr.get(n);r===void 0&&(r=he(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(){this.Qr=new dt(pt.$r),this.Ur=new dt(pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new pt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new pt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new K(new xe([])),i=new pt(n,e),s=new pt(n,e+1),r=[];return this.Ur.forEachInRange([i,s],a=>{this.Gr(a),r.push(a.key)}),r}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new K(new xe([])),i=new pt(n,e),s=new pt(n,e+1);let r=he();return this.Ur.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(e){const n=new pt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return K.comparator(e.key,n.key)||ce(e.Yr,n.Yr)}static Kr(e,n){return ce(e.Yr,n.Yr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new dt(pt.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new BI(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new pt(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return j.resolve(a)}lookupMutationBatch(e,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return j.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Tp:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new pt(n,0),s=new pt(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],a=>{const l=this.Xr(a.Yr);r.push(l)}),j.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new dt(ce);return n.forEach(s=>{const r=new pt(s,0),a=new pt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],l=>{i=i.add(l.Yr)})}),j.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;K.isDocumentKey(r)||(r=r.child(""));const a=new pt(new K(r),0);let l=new dt(ce);return this.Zr.forEachWhile(u=>{const f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(l=l.add(u.Yr)),!0)},a),j.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){pe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return j.forEach(n.mutations,s=>{const r=new pt(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new pt(n,0),s=this.Zr.firstAfterOrEqual(i);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.ri=e,this.docs=function(){return new Ke(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return j.resolve(i?i.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let i=Ii();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():_t.newInvalidDocument(s))}),j.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=Ii();const a=n.path,l=new K(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:m}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||sI(iI(m),i)<=0||(s.has(m.key)||bh(n,m))&&(r=r.insert(m.key,m.mutableCopy()))}return j.resolve(r)}getAllFromCollectionGroup(e,n,i,s){X(9500)}ii(e,n){return j.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new RC(this)}getSize(e){return j.resolve(this.size)}}class RC extends vC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)}),j.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.persistence=e,this.si=new mr(n=>Sp(n),Ap),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.oi=0,this._i=new Np,this.targetCount=0,this.ai=Na.ur()}forEachTarget(e,n){return this.si.forEach((i,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),j.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Na(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Pr(n),j.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),j.waitFor(r).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return j.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),j.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(e,a))}),j.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return j.resolve(i)}containsKey(e,n){return j.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n){this.ui={},this.overlays={},this.ci=new yh(0),this.li=!1,this.li=!0,this.hi=new AC,this.referenceDelegate=e(this),this.Pi=new IC(this),this.indexManager=new fC,this.remoteDocumentCache=function(s){return new xC(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new cC(n),this.Ii=new bC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new wC(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){G("MemoryPersistence","Starting transaction:",e);const s=new CC(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(e,n){return j.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class CC extends aI{constructor(e){super(),this.currentSequenceNumber=e}}class Dp{constructor(e){this.persistence=e,this.Ri=new Np,this.Vi=null}static mi(e){return new Dp(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),j.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,i=>{const s=K.fromPath(i);return this.gi(e,s).next(r=>{r||n.removeEntry(s,W.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Uc{constructor(e,n){this.persistence=e,this.pi=new mr(i=>uI(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=_C(this,n)}static mi(e,n){return new Uc(e,n)}Ei(){}di(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return j.forEach(this.pi,(i,s)=>this.br(e,i,s).next(r=>r?j.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(i++,r.removeEntry(a,W.min()))})).next(()=>r.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),j.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gu(e.data.value)),n}br(e,n,i){return j.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return j.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=he(),s=he();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Op(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return RR()?8:oI(Ut())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const r={result:null};return this.ys(e,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ws(e,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new NC;return this.Ss(e,n,a).next(l=>{if(r.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>r.result)}bs(e,n,i,s){return i.documentReadCount<this.fs?(Vr()<=ue.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Mr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Vr()<=ue.DEBUG&&G("QueryEngine","Query:",Mr(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Vr()<=ue.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Mr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gn(n))):j.resolve())}ys(e,n){if(ov(n))return j.resolve(null);let i=Gn(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=jc(n,null,"F"),i=Gn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const a=he(...r);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const f=this.Ds(n,l);return this.Cs(n,f,a,u.readTime)?this.ys(e,jc(n,null,"F")):this.vs(e,f,n,u)}))})))}ws(e,n,i,s){return ov(n)||s.isEqual(W.min())?j.resolve(null):this.ps.getDocuments(e,i).next(r=>{const a=this.Ds(n,r);return this.Cs(n,a,i,s)?j.resolve(null):(Vr()<=ue.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Mr(n)),this.vs(e,a,n,nI(s,rl)).next(l=>l))})}Ds(e,n){let i=new dt(Zb(e));return n.forEach((s,r)=>{bh(e,r)&&(i=i.add(r))}),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(e,n,i){return Vr()<=ue.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Mr(n)),this.ps.getDocumentsMatchingQuery(e,n,Ts.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="LocalStore",OC=3e8;class VC{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ke(ce),this.xs=new mr(r=>Sp(r),Ap),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function MC(t,e,n,i){return new VC(t,e,n,i)}async function AS(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let u=he();for(const f of s){a.push(f.batchId);for(const m of f.mutations)u=u.add(m.key)}for(const f of r){l.push(f.batchId);for(const m of f.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(i,u).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:l}))})})}function kC(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,f,m){const g=f.batch,p=g.keys();let _=j.resolve();return p.forEach(C=>{_=_.next(()=>m.getEntry(u,C)).next(O=>{const V=f.docVersions.get(C);pe(V!==null,48541),O.version.compareTo(V)<0&&(g.applyToRemoteDocument(O,f),O.isValidDocument()&&(O.setReadTime(f.commitVersion),m.addEntry(O)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,e,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=he();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function wS(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function jC(t,e){const n=ne(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((m,g)=>{const p=s.get(g);if(!p)return;l.push(n.Pi.removeMatchingKeys(r,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(r,m.addedDocuments,g)));let _=p.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(Dt.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):m.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(m.resumeToken,i)),s=s.insert(g,_),function(O,V,A){return O.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=OC?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(p,_,m)&&l.push(n.Pi.updateTargetData(r,_))});let u=Ii(),f=he();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,m))}),l.push(PC(r,a,e.documentUpdates).next(m=>{u=m.ks,f=m.qs})),!i.isEqual(W.min())){const m=n.Pi.getLastRemoteSnapshotVersion(r).next(g=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(m)}return j.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,f)).next(()=>u)}).then(r=>(n.Ms=s,r))}function PC(t,e,n){let i=he(),s=he();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let a=Ii();return n.forEach((l,u)=>{const f=r.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(W.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):G(Vp,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{ks:a,qs:s}})}function LC(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Tp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function UC(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,e).next(r=>r?(s=r,j.resolve(s)):n.Pi.allocateTargetId(i).next(a=>(s=new is(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function am(t,e,n){const i=ne(t),s=i.Ms.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Fa(a))throw a;G(Vp,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function Ev(t,e,n){const i=ne(t);let s=W.min(),r=he();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,f,m){const g=ne(u),p=g.xs.get(m);return p!==void 0?j.resolve(g.Ms.get(p)):g.Pi.getTargetData(f,m)}(i,a,Gn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?s:W.min(),n?r:he())).next(l=>(zC(i,II(e),l),{documents:l,Qs:r})))}function zC(t,e,n){let i=t.Os.get(e)||W.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.Os.set(e,i)}class Tv{constructor(){this.activeTargetIds=MI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BC{constructor(){this.Mo=new Tv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Tv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="ConnectivityMonitor";class Sv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){G(bv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){G(bv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cu=null;function om(){return Cu===null?Cu=function(){return 268435456+Math.round(2147483648*Math.random())}():Cu++,"0x"+Cu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="RestConnection",HC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Vc?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,r){const a=om(),l=this.zo(e,n.toUriEncodedString());G(Gf,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,r);const{host:f}=new URL(l),m=za(f);return this.Jo(e,l,u,i,m).then(g=>(G(Gf,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Sa(Gf,`RPC '${e}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(e,n,i,s,r,a){return this.Go(e,n,i,s,r)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}zo(e,n){const i=HC[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt="WebChannelConnection";class QC extends FC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,r){const a=om();return new Promise((l,u)=>{const f=new wb;f.setWithCredentials(!0),f.listenOnce(xb.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Fu.NO_ERROR:const g=f.getResponseJson();G(kt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),l(g);break;case Fu.TIMEOUT:G(kt,`RPC '${e}' ${a} timed out`),u(new B(k.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:const p=f.getStatus();if(G(kt,`RPC '${e}' ${a} failed with status:`,p,"response text:",f.getResponseText()),p>0){let _=f.getResponseJson();Array.isArray(_)&&(_=_[0]);const C=_==null?void 0:_.error;if(C&&C.status&&C.message){const O=function(A){const E=A.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(E)>=0?E:k.UNKNOWN}(C.status);u(new B(O,C.message))}else u(new B(k.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new B(k.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{G(kt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);G(kt,`RPC '${e}' ${a} sending request:`,s),f.send(n,"POST",m,i,15)})}T_(e,n,i){const s=om(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Cb(),l=Ib(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const m=r.join("");G(kt,`Creating RPC '${e}' stream ${s}: ${m}`,u);const g=a.createWebChannel(m,u);this.I_(g);let p=!1,_=!1;const C=new GC({Yo:V=>{_?G(kt,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(p||(G(kt,`Opening RPC '${e}' stream ${s} transport.`),g.open(),p=!0),G(kt,`RPC '${e}' stream ${s} sending:`,V),g.send(V))},Zo:()=>g.close()}),O=(V,A,E)=>{V.listen(A,x=>{try{E(x)}catch(D){setTimeout(()=>{throw D},0)}})};return O(g,vo.EventType.OPEN,()=>{_||(G(kt,`RPC '${e}' stream ${s} transport opened.`),C.o_())}),O(g,vo.EventType.CLOSE,()=>{_||(_=!0,G(kt,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(g))}),O(g,vo.EventType.ERROR,V=>{_||(_=!0,Sa(kt,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),C.a_(new B(k.UNAVAILABLE,"The operation could not be completed")))}),O(g,vo.EventType.MESSAGE,V=>{var A;if(!_){const E=V.data[0];pe(!!E,16349);const x=E,D=(x==null?void 0:x.error)||((A=x[0])==null?void 0:A.error);if(D){G(kt,`RPC '${e}' stream ${s} received error:`,D);const U=D.status;let F=function(b){const S=rt[b];if(S!==void 0)return hS(S)}(U),T=D.message;F===void 0&&(F=k.INTERNAL,T="Unknown error status: "+U+" with message "+D.message),_=!0,C.a_(new B(F,T)),g.close()}else G(kt,`RPC '${e}' stream ${s} received:`,E),C.u_(E)}}),O(l,Rb.STAT_EVENT,V=>{V.stat===Xd.PROXY?G(kt,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===Xd.NOPROXY&&G(kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Qf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t){return new XI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,i=1e3,s=1.5,r=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="PersistentStream";class xS{constructor(e,n,i,s,r,a,l,u){this.Mi=e,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Mp(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Ri(n.toString()),Ri("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{e(()=>{const s=new B(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return G(Av,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(G(Av,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KC extends xS{constructor(e,n,i,s,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=eC(this.serializer,e),i=function(r){if(!("targetChange"in r))return W.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?W.min():a.readTime?fn(a.readTime):W.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=rm(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=tm(u)?{documents:nC(r,u)}:{query:iC(r,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=mS(r,a.resumeToken);const f=im(r,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(W.min())>0){l.readTime=Pc(r,a.snapshotVersion.toTimestamp());const f=im(r,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);const i=rC(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=rm(this.serializer),n.removeTarget=e,this.q_(n)}}class YC extends xS{constructor(e,n,i,s,r,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=tC(e.writeResults,e.commitTime),i=fn(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=rm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>_S(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{}class XC extends $C{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new B(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Go(e,sm(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new B(k.UNKNOWN,r.toString())})}Ho(e,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,sm(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ZC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ri(n),this.aa=!1):G("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar="RemoteStore";class WC{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{pr(this)&&(G(ar,"Restarting streams for network reachability change."),await async function(u){const f=ne(u);f.Ea.add(4),await Ll(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Ch(f)}(this))})}),this.Ra=new ZC(i,s)}}async function Ch(t){if(pr(t))for(const e of t.da)await e(!0)}async function Ll(t){for(const e of t.da)await e(!1)}function RS(t,e){const n=ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Lp(n)?Pp(n):Ga(n).O_()&&jp(n,e))}function kp(t,e){const n=ne(t),i=Ga(n);n.Ia.delete(e),i.O_()&&IS(n,e),n.Ia.size===0&&(i.O_()?i.L_():pr(n)&&n.Ra.set("Unknown"))}function jp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ga(t).Y_(e)}function IS(t,e){t.Va.Ue(e),Ga(t).Z_(e)}function Pp(t){t.Va=new QI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ga(t).start(),t.Ra.ua()}function Lp(t){return pr(t)&&!Ga(t).x_()&&t.Ia.size>0}function pr(t){return ne(t).Ea.size===0}function CS(t){t.Va=void 0}async function JC(t){t.Ra.set("Online")}async function eN(t){t.Ia.forEach((e,n)=>{jp(t,e)})}async function tN(t,e){CS(t),Lp(t)?(t.Ra.ha(e),Pp(t)):t.Ra.set("Unknown")}async function nN(t,e,n){if(t.Ra.set("Online"),e instanceof dS&&e.state===2&&e.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(i){G(ar,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await zc(t,i)}else if(e instanceof Yu?t.Va.Ze(e):e instanceof fS?t.Va.st(e):t.Va.tt(e),!n.isEqual(W.min()))try{const i=await wS(t.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.Va.Tt(a);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const m=r.Ia.get(f);m&&r.Ia.set(f,m.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,f)=>{const m=r.Ia.get(u);if(!m)return;r.Ia.set(u,m.withResumeToken(Dt.EMPTY_BYTE_STRING,m.snapshotVersion)),IS(r,u);const g=new is(m.target,u,f,m.sequenceNumber);jp(r,g)}),r.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){G(ar,"Failed to raise snapshot:",i),await zc(t,i)}}async function zc(t,e,n){if(!Fa(e))throw e;t.Ea.add(1),await Ll(t),t.Ra.set("Offline"),n||(n=()=>wS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(ar,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ch(t)})}function NS(t,e){return e().catch(n=>zc(t,n,e))}async function Nh(t){const e=ne(t),n=ws(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Tp;for(;iN(e);)try{const s=await LC(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,sN(e,s)}catch(s){await zc(e,s)}DS(e)&&OS(e)}function iN(t){return pr(t)&&t.Ta.length<10}function sN(t,e){t.Ta.push(e);const n=ws(t);n.O_()&&n.X_&&n.ea(e.mutations)}function DS(t){return pr(t)&&!ws(t).x_()&&t.Ta.length>0}function OS(t){ws(t).start()}async function rN(t){ws(t).ra()}async function aN(t){const e=ws(t);for(const n of t.Ta)e.ea(n.mutations)}async function oN(t,e,n){const i=t.Ta.shift(),s=Rp.from(i,e,n);await NS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Nh(t)}async function lN(t,e){e&&ws(t).X_&&await async function(i,s){if(function(a){return cS(a)&&a!==k.ABORTED}(s.code)){const r=i.Ta.shift();ws(i).B_(),await NS(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Nh(i)}}(t,e),DS(t)&&OS(t)}async function wv(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),G(ar,"RemoteStore received new credentials");const i=pr(n);n.Ea.add(3),await Ll(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ch(n)}async function uN(t,e){const n=ne(t);e?(n.Ea.delete(2),await Ch(n)):e||(n.Ea.add(2),await Ll(n),n.Ra.set("Unknown"))}function Ga(t){return t.ma||(t.ma=function(n,i,s){const r=ne(n);return r.sa(),new KC(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:JC.bind(null,t),t_:eN.bind(null,t),r_:tN.bind(null,t),H_:nN.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Lp(t)?Pp(t):t.Ra.set("Unknown")):(await t.ma.stop(),CS(t))})),t.ma}function ws(t){return t.fa||(t.fa=function(n,i,s){const r=ne(n);return r.sa(),new YC(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:rN.bind(null,t),r_:lN.bind(null,t),ta:aN.bind(null,t),na:oN.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Nh(t)):(await t.fa.stop(),t.Ta.length>0&&(G(ar,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,r){const a=Date.now()+i,l=new Up(e,n,a,s,r);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zp(t,e){if(Ri("AsyncQueue",`${e}: ${t}`),Fa(t))return new B(k.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{static emptySet(e){return new oa(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||K.comparator(n.key,i.key):(n,i)=>K.comparator(n.key,i.key),this.keyedMap=Eo(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new oa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.ga=new Ke(K.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Da{constructor(e,n,i,s,r,a,l,u,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Da(e,n,oa.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class hN{constructor(){this.queries=Rv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=ne(n),r=s.queries;s.queries=Rv(),r.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new B(k.ABORTED,"Firestore shutting down"))}}function Rv(){return new mr(t=>Xb(t),Th)}async function Bp(t,e){const n=ne(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.ba()&&e.Da()&&(i=2):(r=new cN,i=e.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=zp(a,`Initialization of query '${Mr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,r),r.Sa.push(e),e.va(n.onlineState),r.wa&&e.Fa(r.wa)&&Hp(n)}async function qp(t,e){const n=ne(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const a=r.Sa.indexOf(e);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?s=e.Da()?0:1:!r.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function fN(t,e){const n=ne(t);let i=!1;for(const s of e){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.Sa)l.Fa(s)&&(i=!0);a.wa=s}}i&&Hp(n)}function dN(t,e,n){const i=ne(t),s=i.queries.get(e);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(e)}function Hp(t){t.Ca.forEach(e=>{e.next()})}var lm,Iv;(Iv=lm||(lm={})).Ma="default",Iv.Cache="cache";class Fp{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Da(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Da.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.key=e}}class MS{constructor(e){this.key=e}}class mN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=he(),this.mutatedKeys=he(),this.eu=Zb(e),this.tu=new oa(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new xv,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,g)=>{const p=s.get(m),_=bh(this.query,g)?g:null,C=!!p&&this.mutatedKeys.has(p.key),O=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let V=!1;p&&_?p.data.isEqual(_.data)?C!==O&&(i.track({type:3,doc:_}),V=!0):this.su(p,_)||(i.track({type:2,doc:_}),V=!0,(u&&this.eu(_,u)>0||f&&this.eu(_,f)<0)&&(l=!0)):!p&&_?(i.track({type:0,doc:_}),V=!0):p&&!_&&(i.track({type:1,doc:p}),V=!0,(u||f)&&(l=!0)),V&&(_?(a=a.add(_),r=O?r.add(m):r.delete(m)):(a=a.delete(m),r=r.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),r=r.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:l,mutatedKeys:r}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(_,C){const O=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:V})}};return O(_)-O(C)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,f=u!==this.Za;return this.Za=u,a.length!==0||f?{snapshot:new Da(this.query,e.tu,r,a,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=he(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new MS(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new VS(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=he();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Da.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gp="SyncEngine";class pN{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class gN{constructor(e){this.key=e,this.hu=!1}}class yN{constructor(e,n,i,s,r,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new mr(l=>Xb(l),Th),this.Iu=new Map,this.Eu=new Set,this.du=new Ke(K.comparator),this.Au=new Map,this.Ru=new Np,this.Vu={},this.mu=new Map,this.fu=Na.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _N(t,e,n=!0){const i=zS(t);let s;const r=i.Tu.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await kS(i,e,n,!0),s}async function vN(t,e){const n=zS(t);await kS(n,e,!0,!1)}async function kS(t,e,n,i){const s=await UC(t.localStore,Gn(e)),r=s.targetId,a=t.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await EN(t,e,r,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&RS(t.remoteStore,s),l}async function EN(t,e,n,i,s){t.pu=(g,p,_)=>async function(O,V,A,E){let x=V.view.ru(A);x.Cs&&(x=await Ev(O.localStore,V.query,!1).then(({documents:T})=>V.view.ru(T,x)));const D=E&&E.targetChanges.get(V.targetId),U=E&&E.targetMismatches.get(V.targetId)!=null,F=V.view.applyChanges(x,O.isPrimaryClient,D,U);return Nv(O,V.targetId,F.au),F.snapshot}(t,g,p,_);const r=await Ev(t.localStore,e,!0),a=new mN(e,r.Qs),l=a.ru(r.documents),u=Pl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),f=a.applyChanges(l,t.isPrimaryClient,u);Nv(t,n,f.au);const m=new pN(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function TN(t,e,n){const i=ne(t),s=i.Tu.get(e),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(a=>!Th(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await am(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&kp(i.remoteStore,s.targetId),um(i,s.targetId)}).catch(Ha)):(um(i,s.targetId),await am(i.localStore,s.targetId,!0))}async function bN(t,e){const n=ne(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),kp(n.remoteStore,i.targetId))}async function SN(t,e,n){const i=NN(t);try{const s=await function(a,l){const u=ne(a),f=Le.now(),m=l.reduce((_,C)=>_.add(C.key),he());let g,p;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let C=Ii(),O=he();return u.Ns.getEntries(_,m).next(V=>{C=V,C.forEach((A,E)=>{E.isValidDocument()||(O=O.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,C)).next(V=>{g=V;const A=[];for(const E of l){const x=zI(E,g.get(E.key).overlayedDocument);x!=null&&A.push(new Ns(E.key,x,Hb(x.value.mapValue),Ct.exists(!0)))}return u.mutationQueue.addMutationBatch(_,f,A,l)}).next(V=>{p=V;const A=V.applyToLocalDocumentSet(g,O);return u.documentOverlayCache.saveOverlays(_,V.batchId,A)})}).then(()=>({batchId:p.batchId,changes:Jb(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let f=a.Vu[a.currentUser.toKey()];f||(f=new Ke(ce)),f=f.insert(l,u),a.Vu[a.currentUser.toKey()]=f}(i,s.batchId,n),await Ul(i,s.changes),await Nh(i.remoteStore)}catch(s){const r=zp(s,"Failed to persist write");n.reject(r)}}async function jS(t,e){const n=ne(t);try{const i=await jC(n.localStore,e);e.targetChanges.forEach((s,r)=>{const a=n.Au.get(r);a&&(pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?pe(a.hu,14607):s.removedDocuments.size>0&&(pe(a.hu,42227),a.hu=!1))}),await Ul(n,i,e)}catch(i){await Ha(i)}}function Cv(t,e,n){const i=ne(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=ne(a);u.onlineState=l;let f=!1;u.queries.forEach((m,g)=>{for(const p of g.Sa)p.va(l)&&(f=!0)}),f&&Hp(u)}(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function AN(t,e,n){const i=ne(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),r=s&&s.key;if(r){let a=new Ke(K.comparator);a=a.insert(r,_t.newNoDocument(r,W.min()));const l=he().add(r),u=new Rh(W.min(),new Map,new Ke(ce),a,l);await jS(i,u),i.du=i.du.remove(r),i.Au.delete(e),Qp(i)}else await am(i.localStore,e,!1).then(()=>um(i,e,n)).catch(Ha)}async function wN(t,e){const n=ne(t),i=e.batch.batchId;try{const s=await kC(n.localStore,e);LS(n,i,null),PS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ul(n,s)}catch(s){await Ha(s)}}async function xN(t,e,n){const i=ne(t);try{const s=await function(a,l){const u=ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return u.mutationQueue.lookupMutationBatch(f,l).next(g=>(pe(g!==null,37113),m=g.keys(),u.mutationQueue.removeMutationBatch(f,g))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>u.localDocuments.getDocuments(f,m))})}(i.localStore,e);LS(i,e,n),PS(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ul(i,s)}catch(s){await Ha(s)}}function PS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function LS(t,e,n){const i=ne(t);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function um(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||US(t,i)})}function US(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(kp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Qp(t))}function Nv(t,e,n){for(const i of n)i instanceof VS?(t.Ru.addReference(i.key,e),RN(t,i)):i instanceof MS?(G(Gp,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||US(t,i.key)):X(19791,{wu:i})}function RN(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(G(Gp,"New document in limbo: "+n),t.Eu.add(i),Qp(t))}function Qp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(xe.fromString(e)),i=t.fu.next();t.Au.set(i,new gN(n)),t.du=t.du.insert(n,i),RS(t.remoteStore,new is(Gn(Eh(n.path)),i,"TargetPurposeLimboResolution",yh.ce))}}async function Ul(t,e,n){const i=ne(t),s=[],r=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(f){s.push(f);const g=Op.As(u.targetId,f);r.push(g)}}))}),await Promise.all(a),i.Pu.H_(s),await async function(u,f){const m=ne(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>j.forEach(f,p=>j.forEach(p.Es,_=>m.persistence.referenceDelegate.addReference(g,p.targetId,_)).next(()=>j.forEach(p.ds,_=>m.persistence.referenceDelegate.removeReference(g,p.targetId,_)))))}catch(g){if(!Fa(g))throw g;G(Vp,"Failed to update sequence numbers: "+g)}for(const g of f){const p=g.targetId;if(!g.fromCache){const _=m.Ms.get(p),C=_.snapshotVersion,O=_.withLastLimboFreeSnapshotVersion(C);m.Ms=m.Ms.insert(p,O)}}}(i.localStore,r))}async function IN(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){G(Gp,"User change. New user:",e.toKey());const i=await AS(n.localStore,e);n.currentUser=e,function(r,a){r.mu.forEach(l=>{l.forEach(u=>{u.reject(new B(k.CANCELLED,a))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ul(n,i.Ls)}}function CN(t,e){const n=ne(t),i=n.Au.get(e);if(i&&i.hu)return he().add(i.key);{let s=he();const r=n.Iu.get(e);if(!r)return s;for(const a of r){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function zS(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AN.bind(null,e),e.Pu.H_=fN.bind(null,e.eventManager),e.Pu.yu=dN.bind(null,e.eventManager),e}function NN(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xN.bind(null,e),e}class Bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ih(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return MC(this.persistence,new DC,e.initialUser,this.serializer)}Cu(e){return new SS(Dp.mi,this.serializer)}Du(e){return new BC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bc.provider={build:()=>new Bc};class DN extends Bc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){pe(this.persistence.referenceDelegate instanceof Uc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new gC(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new SS(i=>Uc.mi(i,n),this.serializer)}}class cm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Cv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=IN.bind(null,this.syncEngine),await uN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hN}()}createDatastore(e){const n=Ih(e.databaseInfo.databaseId),i=function(r){return new QC(r)}(e.databaseInfo);return function(r,a,l,u){return new XC(r,a,l,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,r,a,l){return new WC(i,s,r,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Cv(this.syncEngine,n,0),function(){return Sv.v()?new Sv:new qC}())}createSyncEngine(e,n){return function(s,r,a,l,u,f,m){const g=new yN(s,r,a,l,u,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const r=ne(s);G(ar,"RemoteStore shutting down."),r.Ea.add(5),await Ll(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}cm.provider={build:()=>new cm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ri("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,r){const a=ne(s),l={documents:r.map(g=>Lc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,xe.emptyPath(),l,r.length),f=new Map;u.forEach(g=>{const p=JI(a.serializer,g);f.set(p.key.toString(),p)});const m=[];return r.forEach(g=>{const p=f.get(g.toString());pe(!!p,55234,{key:g}),m.push(p)}),m}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new xh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const s=K.fromPath(i);this.mutations.push(new uS(s,this.precondition(s)))}),await async function(i,s){const r=ne(i),a={writes:s.map(l=>_S(r.serializer,l))};await r.Go("Commit",r.serializer.databaseId,xe.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X(50498,{Gu:e.constructor.name});n=W.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new B(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(W.min())?Ct.exists(!1):Ct.updateTime(n):Ct.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(W.min()))throw new B(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ct.updateTime(n)}return Ct.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n,i,s,r){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new Mp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new ON(this.datastore),n=this.Hu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Yu(s)}))}).catch(i=>{this.Yu(i)})})}Hu(e){try{const n=this.updateFunction(e);return!kl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!cS(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="FirestoreClient";class MN{constructor(e,n,i,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=jt.UNAUTHENTICATED,this.clientId=Ep.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{G(xs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(G(xs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=zp(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Kf(t,e){t.asyncQueue.verifyOperationInProgress(),G(xs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await AS(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Dv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await kN(t);G(xs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>wv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>wv(e.remoteStore,s)),t._onlineComponents=e}async function kN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(xs,"Using user provided OfflineComponentProvider");try{await Kf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===k.FAILED_PRECONDITION||s.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Sa("Error using user provided cache. Falling back to memory cache: "+n),await Kf(t,new Bc)}}else G(xs,"Using default OfflineComponentProvider"),await Kf(t,new DN(void 0));return t._offlineComponents}async function Yp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(xs,"Using user provided OnlineComponentProvider"),await Dv(t,t._uninitializedComponentsProvider._online)):(G(xs,"Using default OnlineComponentProvider"),await Dv(t,new cm))),t._onlineComponents}function jN(t){return Yp(t).then(e=>e.syncEngine)}function PN(t){return Yp(t).then(e=>e.datastore)}async function qc(t){const e=await Yp(t),n=e.eventManager;return n.onListen=_N.bind(null,e.syncEngine),n.onUnlisten=TN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bN.bind(null,e.syncEngine),n}function LN(t,e,n={}){const i=new Fn;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,f){const m=new Kp({next:p=>{m.Nu(),a.enqueueAndForget(()=>qp(r,g));const _=p.docs.has(l);!_&&p.fromCache?f.reject(new B(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&u&&u.source==="server"?f.reject(new B(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(p)},error:p=>f.reject(p)}),g=new Fp(Eh(l.path),m,{includeMetadataChanges:!0,qa:!0});return Bp(r,g)}(await qc(t),t.asyncQueue,e,n,i)),i.promise}function UN(t,e,n={}){const i=new Fn;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,f){const m=new Kp({next:p=>{m.Nu(),a.enqueueAndForget(()=>qp(r,g)),p.fromCache&&u.source==="server"?f.reject(new B(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(p)},error:p=>f.reject(p)}),g=new Fp(l,m,{includeMetadataChanges:!0,qa:!0});return Bp(r,g)}(await qc(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="firestore.googleapis.com",Vv=!0;class Mv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new B(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qS,this.ssl=Vv}else this.host=e.host,this.ssl=e.ssl??Vv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mC)throw new B(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BS(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dh{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new G2;switch(i.type){case"firstParty":return new $2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new B(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Ov.get(n);i&&(G("ComponentProvider","Removing Datastore"),Ov.delete(n),i.terminate())}(this),Promise.resolve()}}function zN(t,e,n,i={}){var f;t=Ht(t,Dh);const s=za(e),r=t._getSettings(),a={...r,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(gb(`https://${l}`),yb("Firestore",!0)),r.host!==qS&&r.host!==l&&Sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:l,ssl:s,emulatorOptions:i};if(!wi(u,a)&&(t._setSettings(u),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=jt.MOCK_USER;else{m=_R(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new B(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new jt(p)}t._authCredentials=new Q2(new Db(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ti(this.firestore,e,this._query)}}class Qe{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qe(this.firestore,e,this._key)}toJSON(){return{type:Qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ml(n,Qe._jsonSchema))return new Qe(e,i||null,new K(xe.fromString(n.referencePath)))}}Qe._jsonSchemaVersion="firestore/documentReference/1.0",Qe._jsonSchema={type:ut("string",Qe._jsonSchemaVersion),referencePath:ut("string")};class gs extends ti{constructor(e,n,i){super(e,n,Eh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qe(this.firestore,null,new K(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function hm(t,e,...n){if(t=Fe(t),Ob("collection","path",e),t instanceof Dh){const i=xe.fromString(e,...n);return Y_(i),new gs(t,null,i)}{if(!(t instanceof Qe||t instanceof gs))throw new B(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(xe.fromString(e,...n));return Y_(i),new gs(t.firestore,null,i)}}function At(t,e,...n){if(t=Fe(t),arguments.length===1&&(e=Ep.newId()),Ob("doc","path",e),t instanceof Dh){const i=xe.fromString(e,...n);return K_(i),new Qe(t,null,new K(i))}{if(!(t instanceof Qe||t instanceof gs))throw new B(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(xe.fromString(e,...n));return K_(i),new Qe(t.firestore,t instanceof gs?t.converter:null,new K(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="AsyncQueue";class jv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Mp(this,"async_queue_retry"),this._c=()=>{const i=Qf();i&&G(kv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Qf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Qf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Fn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fa(e))throw e;G(kv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Ri("INTERNAL UNHANDLED ERROR: ",Pv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Up.createAndSchedule(this,e,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&X(47125,{Pc:Pv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Pv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Zn extends Dh{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new jv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jv(e),this._firestoreClient=void 0,await e}}}function BN(t,e){const n=typeof t=="object"?t:Tb(),i=typeof t=="string"?t:Vc,s=_p(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=gR("firestore");r&&zN(s,...r)}return s}function zl(t){if(t._terminated)throw new B(k.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qN(t),t._firestoreClient}function qN(t){var i,s,r;const e=t._freezeSettings(),n=function(l,u,f,m){return new fI(l,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,BS(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((r=e.localCache)!=null&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new MN(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this._byteString=e}static fromBase64String(e){try{return new an(Dt.fromBase64String(e))}catch(n){throw new B(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new an(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:an._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ml(e,an._jsonSchema))return an.fromBase64String(e.bytes)}}an._jsonSchemaVersion="firestore/bytes/1.0",an._jsonSchema={type:ut("string",an._jsonSchemaVersion),bytes:ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qn._jsonSchemaVersion}}static fromJSON(e){if(Ml(e,Qn._jsonSchema))return new Qn(e.latitude,e.longitude)}}Qn._jsonSchemaVersion="firestore/geoPoint/1.0",Qn._jsonSchema={type:ut("string",Qn._jsonSchemaVersion),latitude:ut("number"),longitude:ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Kn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ml(e,Kn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Kn(e.vectorValues);throw new B(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kn._jsonSchemaVersion="firestore/vectorValue/1.0",Kn._jsonSchema={type:ut("string",Kn._jsonSchemaVersion),vectorValues:ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=/^__.*__$/;class FN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new jl(e,this.data,n,this.fieldTransforms)}}class HS{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function FS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class Oh{constructor(e,n,i,s,r,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Oh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(FS(this.Ac)&&HN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class GN{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Ih(e)}Cc(e,n,i,s=!1){return new Oh({Ac:e,methodName:n,Dc:i,path:It.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qa(t){const e=t._freezeSettings(),n=Ih(t._databaseId);return new GN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $p(t,e,n,i,s,r={}){const a=t.Cc(r.merge||r.mergeFields?2:0,e,n,s);eg("Data must be an object, but it was:",a,i);const l=$S(i,a);let u,f;if(r.merge)u=new on(a.fieldMask),f=a.fieldTransforms;else if(r.mergeFields){const m=[];for(const g of r.mergeFields){const p=fm(e,g,n);if(!a.contains(p))throw new B(k.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);ZS(m,p)||m.push(p)}u=new on(m),f=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,f=a.fieldTransforms;return new FN(new Bt(l),u,f)}class Vh extends gr{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vh}}function GS(t,e,n){return new Oh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Xp extends gr{_toFieldTransform(e){return new Ah(e.path,new cl)}isEqual(e){return e instanceof Xp}}class Zp extends gr{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=GS(this,e,!0),i=this.vc.map(r=>yr(r,n)),s=new Ia(i);return new Ah(e.path,s)}isEqual(e){return e instanceof Zp&&wi(this.vc,e.vc)}}class Wp extends gr{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=GS(this,e,!0),i=this.vc.map(r=>yr(r,n)),s=new Ca(i);return new Ah(e.path,s)}isEqual(e){return e instanceof Wp&&wi(this.vc,e.vc)}}class Jp extends gr{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new hl(e.serializer,nS(e.serializer,this.Fc));return new Ah(e.path,n)}isEqual(e){return e instanceof Jp&&this.Fc===e.Fc}}function QS(t,e,n,i){const s=t.Cc(1,e,n);eg("Data must be an object, but it was:",s,i);const r=[],a=Bt.empty();Cs(i,(u,f)=>{const m=tg(e,u,n);f=Fe(f);const g=s.yc(m);if(f instanceof Vh)r.push(m);else{const p=yr(f,g);p!=null&&(r.push(m),a.set(m,p))}});const l=new on(r);return new HS(a,l,s.fieldTransforms)}function KS(t,e,n,i,s,r){const a=t.Cc(1,e,n),l=[fm(e,i,n)],u=[s];if(r.length%2!=0)throw new B(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<r.length;p+=2)l.push(fm(e,r[p])),u.push(r[p+1]);const f=[],m=Bt.empty();for(let p=l.length-1;p>=0;--p)if(!ZS(f,l[p])){const _=l[p];let C=u[p];C=Fe(C);const O=a.yc(_);if(C instanceof Vh)f.push(_);else{const V=yr(C,O);V!=null&&(f.push(_),m.set(_,V))}}const g=new on(f);return new HS(m,g,a.fieldTransforms)}function YS(t,e,n,i=!1){return yr(n,t.Cc(i?4:3,e))}function yr(t,e){if(XS(t=Fe(t)))return eg("Unsupported field value:",e,t),$S(t,e);if(t instanceof gr)return function(i,s){if(!FS(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let u=yr(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(t,e)}return function(i,s){if((i=Fe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return nS(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Le.fromDate(i);return{timestampValue:Pc(s.serializer,r)}}if(i instanceof Le){const r=new Le(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Pc(s.serializer,r)}}if(i instanceof Qn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof an)return{bytesValue:mS(s.serializer,i._byteString)};if(i instanceof Qe){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Cp(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Kn)return function(a,l){return{mapValue:{fields:{[Bb]:{stringValue:qb},[Mc]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return xp(l.serializer,f)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${gh(i)}`)}(t,e)}function $S(t,e){const n={};return kb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(t,(i,s)=>{const r=yr(s,e.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function XS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof Qn||t instanceof an||t instanceof Qe||t instanceof gr||t instanceof Kn)}function eg(t,e,n){if(!XS(n)||!Vb(n)){const i=gh(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function fm(t,e,n){if((e=Fe(e))instanceof Bl)return e._internalPath;if(typeof e=="string")return tg(t,e);throw Hc("Field path arguments must be of type string or ",t,!1,void 0,n)}const QN=new RegExp("[~\\*/\\[\\]]");function tg(t,e,n){if(e.search(QN)>=0)throw Hc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bl(...e.split("."))._internalPath}catch{throw Hc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hc(t,e,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new B(k.INVALID_ARGUMENT,l+t+u)}function ZS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ng("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KN extends fl{data(){return super.data()}}function ng(t,e){return typeof e=="string"?tg(t,e):e instanceof Bl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ig{}class Mh extends ig{}function Uv(t,e,...n){let i=[];e instanceof ig&&i.push(e),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof rg).length,l=r.filter(u=>u instanceof sg).length;if(a>1||a>0&&l>0)throw new B(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class sg extends Mh{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new sg(e,n,i)}_apply(e){const n=this._parse(e);return JS(e._query,n),new ti(e.firestore,e.converter,nm(e._query,n))}_parse(e){const n=Qa(e.firestore);return function(r,a,l,u,f,m,g){let p;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new B(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Hv(g,m);const C=[];for(const O of g)C.push(qv(u,r,O));p={arrayValue:{values:C}}}else p=qv(u,r,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Hv(g,m),p=YS(l,a,g,m==="in"||m==="not-in");return lt.create(f,m,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class rg extends ig{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Dn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,r){let a=s;const l=r.getFlattenedFilters();for(const u of l)JS(a,u),a=nm(a,u)}(e._query,n),new ti(e.firestore,e.converter,nm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ag extends Mh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ag(e,n)}_apply(e){const n=function(s,r,a){if(s.startAt!==null)throw new B(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ul(r,a)}(e._query,this._field,this._direction);return new ti(e.firestore,e.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new dr(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function zv(t,e="asc"){const n=e,i=ng("orderBy",t);return ag._create(i,n)}class og extends Mh{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new og(e,n,i)}_apply(e){return new ti(e.firestore,e.converter,jc(e._query,this._limit,this._limitType))}}function Bv(t){return og._create("limit",t,"F")}class lg extends Mh{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new lg(e,n,i)}_apply(e){const n=$N(e,this.type,this._docOrFields,this._inclusive);return new ti(e.firestore,e.converter,function(s,r){return new dr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,r,s.endAt)}(e._query,n))}}function YN(...t){return lg._create("startAfter",t,!1)}function $N(t,e,n,i){if(n[0]=Fe(n[0]),n[0]instanceof fl)return function(r,a,l,u,f){if(!u)throw new B(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const m=[];for(const g of aa(r))if(g.field.isKeyField())m.push(kc(a,u.key));else{const p=u.data.field(g.field);if(_h(p))throw new B(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const _=g.field.canonicalString();throw new B(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}m.push(p)}return new Ra(m,f)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const s=Qa(t.firestore);return function(a,l,u,f,m,g){const p=a.explicitOrderBy;if(m.length>p.length)throw new B(k.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let C=0;C<m.length;C++){const O=m[C];if(p[C].field.isKeyField()){if(typeof O!="string")throw new B(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof O}`);if(!wp(a)&&O.indexOf("/")!==-1)throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${O}' contains a slash.`);const V=a.path.child(xe.fromString(O));if(!K.isDocumentKey(V))throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const A=new K(V);_.push(kc(l,A))}else{const V=YS(u,f,O);_.push(V)}}return new Ra(_,g)}(t._query,t.firestore._databaseId,s,e,n,i)}}function qv(t,e,n){if(typeof(n=Fe(n))=="string"){if(n==="")throw new B(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wp(e)&&n.indexOf("/")!==-1)throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(xe.fromString(n));if(!K.isDocumentKey(i))throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return kc(t,new K(i))}if(n instanceof Qe)return kc(t,n._key);throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gh(n)}.`)}function Hv(t,e){if(!Array.isArray(t)||t.length===0)throw new B(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JS(t,e){const n=function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class eA{convertValue(e,n="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Cs(e,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(e){var i,s,r;const n=(r=(s=(i=e.fields)==null?void 0:i[Mc].arrayValue)==null?void 0:s.values)==null?void 0:r.map(a=>tt(a.doubleValue));return new Kn(n)}convertGeoPoint(e){return new Qn(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=vh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(al(e));default:return null}}convertTimestamp(e){const n=bs(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=xe.fromString(e);pe(TS(i),9688,{name:e});const s=new ol(i.get(1),i.get(3)),r=new K(i.popFirst(5));return s.isEqual(n)||Ri(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class XN extends eA{constructor(e){super(),this.firestore=e}convertBytes(e){return new an(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,n)}}class Xr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ys extends fl{constructor(e,n,i,s,r,a){super(e,n,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ng("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ys._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:ut("string",ys._jsonSchemaVersion),bundleSource:ut("string","DocumentSnapshot"),bundleName:ut("string"),bundle:ut("string")};class $u extends ys{data(e={}){return super.data(e)}}class Js{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xr(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new $u(this._firestore,this._userDataWriter,i.key,i,new Xr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new $u(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new $u(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,m=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:ZN(l.type),doc:u,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Js._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ep.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(t){t=Ht(t,Qe);const e=Ht(t.firestore,Zn);return LN(zl(e),t._key).then(n=>tA(e,t,n))}Js._jsonSchemaVersion="firestore/querySnapshot/1.0",Js._jsonSchema={type:ut("string",Js._jsonSchemaVersion),bundleSource:ut("string","QuerySnapshot"),bundleName:ut("string"),bundle:ut("string")};class kh extends eA{constructor(e){super(),this.firestore=e}convertBytes(e){return new an(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,n)}}function Fc(t){t=Ht(t,ti);const e=Ht(t.firestore,Zn),n=zl(e),i=new kh(e);return WS(t._query),UN(n,t._query).then(s=>new Js(e,i,t,s))}function dl(t,e,n){t=Ht(t,Qe);const i=Ht(t.firestore,Zn),s=ug(t.converter,e,n);return jh(i,[$p(Qa(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ct.none())])}function WN(t,e,n,...i){t=Ht(t,Qe);const s=Ht(t.firestore,Zn),r=Qa(s);let a;return a=typeof(e=Fe(e))=="string"||e instanceof Bl?KS(r,"updateDoc",t._key,e,n,i):QS(r,"updateDoc",t._key,e),jh(s,[a.toMutation(t._key,Ct.exists(!0))])}function JN(t){return jh(Ht(t.firestore,Zn),[new xh(t._key,Ct.none())])}function eD(t,e){const n=Ht(t.firestore,Zn),i=At(t),s=ug(t.converter,e);return jh(n,[$p(Qa(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Ct.exists(!1))]).then(()=>i)}function tD(t,...e){var u,f,m;t=Fe(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Lv(e[i])||(n=e[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Lv(e[i])){const g=e[i];e[i]=(u=g.next)==null?void 0:u.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let r,a,l;if(t instanceof Qe)a=Ht(t.firestore,Zn),l=Eh(t._key.path),r={next:g=>{e[i]&&e[i](tA(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=Ht(t,ti);a=Ht(g.firestore,Zn),l=g._query;const p=new kh(a);r={next:_=>{e[i]&&e[i](new Js(a,p,g,_))},error:e[i+1],complete:e[i+2]},WS(t._query)}return function(p,_,C,O){const V=new Kp(O),A=new Fp(_,V,C);return p.asyncQueue.enqueueAndForget(async()=>Bp(await qc(p),A)),()=>{V.Nu(),p.asyncQueue.enqueueAndForget(async()=>qp(await qc(p),A))}}(zl(a),l,s,r)}function jh(t,e){return function(i,s){const r=new Fn;return i.asyncQueue.enqueueAndForget(async()=>SN(await jN(i),s,r)),r.promise}(zl(t),e)}function tA(t,e,n){const i=n.docs.get(e._key),s=new kh(t);return new ys(t,s,e._key,i,new Xr(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD={maxAttempts:5};function bo(t,e){if((t=Fe(t)).firestore!==e)throw new B(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Qa(e)}get(e){const n=bo(e,this._firestore),i=new XN(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return X(24041);const r=s[0];if(r.isFoundDocument())return new fl(this._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new fl(this._firestore,i,n._key,null,n.converter);throw X(18433,{doc:r})})}set(e,n,i){const s=bo(e,this._firestore),r=ug(s.converter,n,i),a=$p(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(e,n,i,...s){const r=bo(e,this._firestore);let a;return a=typeof(n=Fe(n))=="string"||n instanceof Bl?KS(this._dataReader,"Transaction.update",r._key,n,i,s):QS(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,a),this}delete(e){const n=bo(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD extends iD{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=bo(e,this._firestore),i=new kh(this._firestore);return super.get(e).then(s=>new ys(this._firestore,i,n._key,s._document,new Xr(!1,!1),n.converter))}}function Fv(t,e,n){t=Ht(t,Zn);const i={...nD,...n};return function(r){if(r.maxAttempts<1)throw new B(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,a,l){const u=new Fn;return r.asyncQueue.enqueueAndForget(async()=>{const f=await PN(r);new VN(r.asyncQueue,f,l,a,u).ju()}),u.promise}(zl(t),s=>e(new sD(t,s)),i)}function Gv(){return new Xp("serverTimestamp")}function rD(...t){return new Zp("arrayUnion",t)}function aD(...t){return new Wp("arrayRemove",t)}function oD(t){return new Jp("increment",t)}(function(e,n=!0){(function(s){qa=s})(Ba),ba(new sr("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new Zn(new K2(i.getProvider("auth-internal")),new X2(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new B(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ol(f.options.projectId,m)}(a,s),a);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),ms(H_,F_,e),ms(H_,F_,"esm2020")})();var lD="firebase",uD="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(lD,uD,"app");function nA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cD=nA,iA=new Ol("auth","Firebase",nA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new gp("@firebase/auth");function hD(t,...e){Gc.logLevel<=ue.WARN&&Gc.warn(`Auth (${Ba}): ${t}`,...e)}function Xu(t,...e){Gc.logLevel<=ue.ERROR&&Gc.error(`Auth (${Ba}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,...e){throw cg(t,...e)}function Yn(t,...e){return cg(t,...e)}function sA(t,e,n){const i={...cD(),[e]:n};return new Ol("auth","Firebase",i).create(e,{appName:t.name})}function Ei(t){return sA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return iA.create(t,...e)}function J(t,e,...n){if(!t)throw cg(e,...n)}function gi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xu(e),new Error(e)}function Ci(t,e){t||gi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function fD(){return Qv()==="http:"||Qv()==="https:"}function Qv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fD()||AR()||"connection"in navigator)?navigator.onLine:!0}function mD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ci(n>e,"Short delay should be less than long delay!"),this.isMobile=TR()||wR()}get(){return dD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t,e){Ci(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yD=new ql(3e4,6e4);function Ds(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Oi(t,e,n,i,s={}){return aA(t,s,async()=>{let r={},a={};i&&(e==="GET"?a=i:r={body:JSON.stringify(i)});const l=Vl({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:u,...r};return SR()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&za(t.emulatorConfig.host)&&(f.credentials="include"),rA.fetch()(await oA(t,t.config.apiHost,n,l),f)})}async function aA(t,e,n){t._canInitEmulator=!1;const i={...pD,...e};try{const s=new vD(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Nu(t,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,f]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nu(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Nu(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Nu(t,"user-disabled",a);const m=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw sA(t,m,f);On(t,m)}}catch(s){if(s instanceof Di)throw s;On(t,"network-request-failed",{message:String(s)})}}async function Hl(t,e,n,i,s={}){const r=await Oi(t,e,n,i,s);return"mfaPendingCredential"in r&&On(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function oA(t,e,n,i){const s=`${e}${n}?${i}`,r=t,a=r.config.emulator?hg(t.config,s):`${t.config.apiScheme}://${s}`;return gD.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}function _D(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Yn(this.auth,"network-request-failed")),yD.get())})}}function Nu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Yn(t,e,i);return s.customData._tokenResponse=n,s}function Kv(t){return t!==void 0&&t.enterprise!==void 0}class ED{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _D(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TD(t,e){return Oi(t,"GET","/v2/recaptchaConfig",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(t,e){return Oi(t,"POST","/v1/accounts:delete",e)}async function Qc(t,e){return Oi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SD(t,e=!1){const n=Fe(t),i=await n.getIdToken(e),s=fg(i);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Ho(Yf(s.auth_time)),issuedAtTime:Ho(Yf(s.iat)),expirationTime:Ho(Yf(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Yf(t){return Number(t)*1e3}function fg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Xu("JWT malformed, contained fewer than 3 sections"),null;try{const s=fb(n);return s?JSON.parse(s):(Xu("Failed to decode base64 JWT payload"),null)}catch(s){return Xu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Yv(t){const e=fg(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Di&&AD(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function AD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ho(this.lastLoginAt),this.creationTime=Ho(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(t){var g;const e=t.auth,n=await t.getIdToken(),i=await Oa(t,Qc(e,{idToken:n}));J(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const r=(g=s.providerUserInfo)!=null&&g.length?lA(s.providerUserInfo):[],a=RD(t.providerData,r),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),f=l?u:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new mm(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function xD(t){const e=Fe(t);await Kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RD(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function lA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(t,e){const n=await aA(t,{},async()=>{const i=Vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,a=await oA(t,s,"/v1/token",`key=${r}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return t.emulatorConfig&&za(t.emulatorConfig.host)&&(u.credentials="include"),rA.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CD(t,e){return Oi(t,"POST","/v2/accounts:revokeToken",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=Yv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await ID(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new la;return i&&(J(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(J(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),r&&(J(typeof r=="number","internal-error",{appName:e}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new la,this.toJSON())}_performRefresh(){return gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Cn{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new wD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Oa(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return SD(this,e)}reload(){return xD(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Cn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Kc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(En(this.auth.app))return Promise.reject(Ei(this.auth));const e=await this.getIdToken();return await Oa(this,bD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:p,isAnonymous:_,providerData:C,stsTokenManager:O}=n;J(g&&O,e,"internal-error");const V=la.fromJSON(this.name,O);J(typeof g=="string",e,"internal-error"),Bi(i,e.name),Bi(s,e.name),J(typeof p=="boolean",e,"internal-error"),J(typeof _=="boolean",e,"internal-error"),Bi(r,e.name),Bi(a,e.name),Bi(l,e.name),Bi(u,e.name),Bi(f,e.name),Bi(m,e.name);const A=new Cn({uid:g,auth:e,email:s,emailVerified:p,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:V,createdAt:f,lastLoginAt:m});return C&&Array.isArray(C)&&(A.providerData=C.map(E=>({...E}))),u&&(A._redirectEventId=u),A}static async _fromIdTokenResponse(e,n,i=!1){const s=new la;s.updateFromServerResponse(n);const r=new Cn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Kc(r),r}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];J(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?lA(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new la;l.updateFromIdToken(i);const u=new Cn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new mm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,f),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=new Map;function yi(t){Ci(t instanceof Function,"Expected a class definition");let e=$v.get(t);return e?(Ci(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$v.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uA.type="NONE";const Xv=uA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t,e,n){return`firebase:${t}:${e}:${n}`}class ua{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Zu(this.userKey,s.apiKey,r),this.fullPersistenceKey=Zu("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Qc(this.auth,{idToken:e}).catch(()=>{});return n?Cn._fromGetAccountInfoResponse(this.auth,n,e):null}return Cn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ua(yi(Xv),e,i);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let r=s[0]||yi(Xv);const a=Zu(i,e.config.apiKey,e.name);let l=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const p=await Qc(e,{idToken:m}).catch(()=>{});if(!p)break;g=await Cn._fromGetAccountInfoResponse(e,p,m)}else g=Cn._fromJSON(e,m);f!==r&&(l=g),r=f;break}}catch{}const u=s.filter(f=>f._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new ua(r,e,i):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==r)try{await f._remove(a)}catch{}})),new ua(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pA(e))return"Blackberry";if(gA(e))return"Webos";if(hA(e))return"Safari";if((e.includes("chrome/")||fA(e))&&!e.includes("edge/"))return"Chrome";if(mA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function cA(t=Ut()){return/firefox\//i.test(t)}function hA(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fA(t=Ut()){return/crios\//i.test(t)}function dA(t=Ut()){return/iemobile/i.test(t)}function mA(t=Ut()){return/android/i.test(t)}function pA(t=Ut()){return/blackberry/i.test(t)}function gA(t=Ut()){return/webos/i.test(t)}function dg(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ND(t=Ut()){var e;return dg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function DD(){return xR()&&document.documentMode===10}function yA(t=Ut()){return dg(t)||mA(t)||gA(t)||pA(t)||/windows phone/i.test(t)||dA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t,e=[]){let n;switch(t){case"Browser":n=Zv(Ut());break;case"Worker":n=`${Zv(Ut())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ba}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((a,l)=>{try{const u=e(r);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(t,e={}){return Oi(t,"GET","/v2/passwordPolicy",Ds(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=6;class kD{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??MD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wv(this),this.idTokenSubscription=new Wv(this),this.beforeStateQueue=new OD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yi(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await ua.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Qc(this,{idToken:e}),i=await Cn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(En(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(En(this.app))return Promise.reject(Ei(this));const n=e?Fe(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return En(this.app)?Promise.reject(Ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return En(this.app)?Promise.reject(Ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VD(this),n=new kD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ol("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await CD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yi(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await ua.create(this,[yi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_A(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&hD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function _r(t){return Fe(t)}class Wv{constructor(e){this.auth=e,this.observer=null,this.addObserver=MR(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PD(t){Ph=t}function vA(t){return Ph.loadJS(t)}function LD(){return Ph.recaptchaEnterpriseScript}function UD(){return Ph.gapiScript}function zD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class BD{constructor(){this.enterprise=new qD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class qD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const HD="recaptcha-enterprise",EA="NO_RECAPTCHA";class FD{constructor(e){this.type=HD,this.auth=_r(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,l)=>{TD(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const f=new ED(u);return r.tenantId==null?r._agentRecaptchaConfig=f:r._tenantRecaptchaConfigs[r.tenantId]=f,a(f.siteKey)}}).catch(u=>{l(u)})})}function s(r,a,l){const u=window.grecaptcha;Kv(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:e}).then(f=>{a(f)}).catch(()=>{a(EA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new BD().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{i(this.auth).then(l=>{if(!n&&Kv(window.grecaptcha))s(l,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=LD();u.length!==0&&(u+=l),vA(u).then(()=>{s(l,r,a)}).catch(f=>{a(f)})}}).catch(l=>{a(l)})})}}async function Jv(t,e,n,i=!1,s=!1){const r=new FD(t);let a;if(s)a=EA;else try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function pm(t,e,n,i,s){var r;if((r=t._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Jv(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Jv(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t,e){const n=_p(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(wi(r,e??{}))return s;On(s,"already-initialized")}return n.initialize({options:e})}function QD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(yi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function KD(t,e,n){const i=_r(t);J(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=TA(e),{host:a,port:l}=YD(e),u=l===null?"":`:${l}`,f={url:`${r}//${a}${u}/`},m=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){J(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),J(wi(f,i.config.emulator)&&wi(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,za(a)?(gb(`${r}//${a}${u}`),yb("Auth",!0)):$D()}function TA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function YD(t){const e=TA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:eE(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:eE(a)}}}function eE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $D(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gi("not implemented")}_getIdTokenResponse(e){return gi("not implemented")}_linkToIdToken(e,n){return gi("not implemented")}_getReauthenticationResolver(e){return gi("not implemented")}}async function XD(t,e){return Oi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZD(t,e){return Hl(t,"POST","/v1/accounts:signInWithPassword",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,e){return Hl(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}async function JD(t,e){return Hl(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends mg{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ml(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new ml(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pm(e,n,"signInWithPassword",ZD);case"emailLink":return WD(e,{email:this._email,oobCode:this._password});default:On(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pm(e,i,"signUpPassword",XD);case"emailLink":return JD(e,{idToken:n,email:this._email,oobCode:this._password});default:On(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(t,e){return Hl(t,"POST","/v1/accounts:signInWithIdp",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4="http://localhost";class or extends mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new or(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const a=new or(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ca(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ca(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ca(e,n)}buildRequest(){const e={requestUri:e4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function n4(t){const e=yo(_o(t)).link,n=e?yo(_o(e)).deep_link_id:null,i=yo(_o(t)).deep_link_id;return(i?yo(_o(i)).link:null)||i||n||e||t}class pg{constructor(e){const n=yo(_o(e)),i=n.apiKey??null,s=n.oobCode??null,r=t4(n.mode??null);J(i&&s&&r,"argument-error"),this.apiKey=i,this.operation=r,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=n4(e);try{return new pg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.providerId=Ka.PROVIDER_ID}static credential(e,n){return ml._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=pg.parseLink(n);return J(i,"argument-error"),ml._fromEmailAndCode(e,i.code,i.tenantId)}}Ka.PROVIDER_ID="password";Ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends bA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Fl{constructor(){super("facebook.com")}static credential(e){return or._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.FACEBOOK_SIGN_IN_METHOD="facebook.com";$i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return or._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Xi.credential(n,i)}catch{return null}}}Xi.GOOGLE_SIGN_IN_METHOD="google.com";Xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Fl{constructor(){super("github.com")}static credential(e){return or._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.GITHUB_SIGN_IN_METHOD="github.com";Zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Fl{constructor(){super("twitter.com")}static credential(e,n){return or._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Wi.credential(n,i)}catch{return null}}}Wi.TWITTER_SIGN_IN_METHOD="twitter.com";Wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(t,e){return Hl(t,"POST","/v1/accounts:signUp",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await Cn._fromIdTokenResponse(e,i,s),a=tE(i);return new lr({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=tE(i);return new lr({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function tE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends Di{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Yc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Yc(e,n,i,s)}}function SA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Yc._fromErrorAndOperation(t,r,e,i):r})}async function s4(t,e,n=!1){const i=await Oa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return lr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r4(t,e,n=!1){const{auth:i}=t;if(En(i.app))return Promise.reject(Ei(i));const s="reauthenticate";try{const r=await Oa(t,SA(i,s,e,t),n);J(r.idToken,i,"internal-error");const a=fg(r.idToken);J(a,i,"internal-error");const{sub:l}=a;return J(t.uid===l,i,"user-mismatch"),lr._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&On(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(t,e,n=!1){if(En(t.app))return Promise.reject(Ei(t));const i="signIn",s=await SA(t,i,e),r=await lr._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function a4(t,e){return AA(_r(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(t){const e=_r(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function o4(t,e,n){if(En(t.app))return Promise.reject(Ei(t));const i=_r(t),a=await pm(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",i4).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&wA(t),u}),l=await lr._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function l4(t,e,n){return En(t.app)?Promise.reject(Ei(t)):a4(Fe(t),Ka.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&wA(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(t,e){return Oi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Fe(t),r={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Oa(i,u4(i.auth,r));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const l=i.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(t,e){return Fe(t).setPersistence(e)}function f4(t,e,n,i){return Fe(t).onIdTokenChanged(e,n,i)}function d4(t,e,n){return Fe(t).beforeAuthStateChanged(e,n)}function m4(t,e,n,i){return Fe(t).onAuthStateChanged(e,n,i)}function p4(t){return Fe(t).signOut()}const $c="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($c,"1"),this.storage.removeItem($c),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=1e3,y4=10;class RA extends xA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);DD()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,y4):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},g4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RA.type="LOCAL";const IA=RA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA extends xA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CA.type="SESSION";const NA=CA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Lh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async f=>f(n.origin,r)),u=await _4(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const f=gg("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(g){const p=g;if(p.data.eventId===f)switch(p.data.status){case"ack":clearTimeout(m),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(p.data.response);break;default:clearTimeout(m),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(){return window}function E4(t){$n().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(){return typeof $n().WorkerGlobalScope<"u"&&typeof $n().importScripts=="function"}async function T4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function b4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function S4(){return DA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="firebaseLocalStorageDb",A4=1,Xc="firebaseLocalStorage",VA="fbase_key";class Gl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Uh(t,e){return t.transaction([Xc],e?"readwrite":"readonly").objectStore(Xc)}function w4(){const t=indexedDB.deleteDatabase(OA);return new Gl(t).toPromise()}function gm(){const t=indexedDB.open(OA,A4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Xc,{keyPath:VA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Xc)?e(i):(i.close(),await w4(),e(await gm()))})})}async function nE(t,e,n){const i=Uh(t,!0).put({[VA]:e,value:n});return new Gl(i).toPromise()}async function x4(t,e){const n=Uh(t,!1).get(e),i=await new Gl(n).toPromise();return i===void 0?null:i.value}function iE(t,e){const n=Uh(t,!0).delete(e);return new Gl(n).toPromise()}const R4=800,I4=3;class MA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>I4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lh._getInstance(S4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await T4(),!this.activeServiceWorker)return;this.sender=new v4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||b4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gm();return await nE(e,$c,"1"),await iE(e,$c),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>nE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>x4(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>iE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Uh(s,!1).getAll();return new Gl(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),R4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MA.type="LOCAL";const C4=MA;new ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(t,e){return e?yi(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg extends mg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ca(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ca(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function D4(t){return AA(t.auth,new yg(t),t.bypassAuthState)}function O4(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),r4(n,new yg(t),t.bypassAuthState)}async function V4(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),s4(n,new yg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D4;case"linkViaPopup":case"linkViaRedirect":return V4;case"reauthViaPopup":case"reauthViaRedirect":return O4;default:On(this.auth,"internal-error")}}resolve(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new ql(2e3,1e4);class Zr extends kA{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Zr.currentPopupAction&&Zr.currentPopupAction.cancel(),Zr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){Ci(this.filter.length===1,"Popup operations only handle one event");const e=gg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,M4.get())};e()}}Zr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4="pendingRedirect",Wu=new Map;class j4 extends kA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Wu.get(this.auth._key());if(!e){try{const i=await P4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Wu.set(this.auth._key(),e)}return this.bypassAuthState||Wu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function P4(t,e){const n=z4(e),i=U4(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function L4(t,e){Wu.set(t._key(),e)}function U4(t){return yi(t._redirectPersistence)}function z4(t){return Zu(k4,t.config.apiKey,t.name)}async function B4(t,e,n=!1){if(En(t.app))return Promise.reject(Ei(t));const i=_r(t),s=N4(i,e),a=await new j4(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=10*60*1e3;class H4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!F4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!jA(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Yn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=q4&&this.cachedEventUids.clear(),this.cachedEventUids.has(sE(e))}saveEventToCache(e){this.cachedEventUids.add(sE(e)),this.lastProcessedEventTime=Date.now()}}function sE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function F4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G4(t,e={}){return Oi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K4=/^https?/;async function Y4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await G4(t);for(const n of e)try{if($4(n))return}catch{}On(t,"unauthorized-domain")}function $4(t){const e=dm(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!K4.test(n))return!1;if(Q4.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=new ql(3e4,6e4);function rE(){const t=$n().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Z4(t){return new Promise((e,n)=>{var s,r,a;function i(){rE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rE(),n(Yn(t,"network-request-failed"))},timeout:X4.get()})}if((r=(s=$n().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((a=$n().gapi)!=null&&a.load)i();else{const l=zD("iframefcb");return $n()[l]=()=>{gapi.load?i():n(Yn(t,"network-request-failed"))},vA(`${UD()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Ju=null,e})}let Ju=null;function W4(t){return Ju=Ju||Z4(t),Ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new ql(5e3,15e3),eO="__/auth/iframe",tO="emulator/auth/iframe",nO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sO(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hg(e,tO):`https://${t.config.authDomain}/${eO}`,i={apiKey:e.apiKey,appName:t.name,v:Ba},s=iO.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Vl(i).slice(1)}`}async function rO(t){const e=await W4(t),n=$n().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:sO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nO,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=Yn(t,"network-request-failed"),l=$n().setTimeout(()=>{r(a)},J4.get());function u(){$n().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oO=500,lO=600,uO="_blank",cO="http://localhost";class aE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hO(t,e,n,i=oO,s=lO){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...aO,width:i.toString(),height:s.toString(),top:r,left:a},f=Ut().toLowerCase();n&&(l=fA(f)?uO:n),cA(f)&&(e=e||cO,u.scrollbars="yes");const m=Object.entries(u).reduce((p,[_,C])=>`${p}${_}=${C},`,"");if(ND(f)&&l!=="_self")return fO(e||"",l),new aE(null);const g=window.open(e||"",l,m);J(g,t,"popup-blocked");try{g.focus()}catch{}return new aE(g)}function fO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="__/auth/handler",mO="emulator/auth/handler",pO=encodeURIComponent("fac");async function oE(t,e,n,i,s,r){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ba,eventId:s};if(e instanceof bA){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",VR(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof Fl){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const u=await t._getAppCheckToken(),f=u?`#${pO}=${encodeURIComponent(u)}`:"";return`${gO(t)}?${Vl(l).slice(1)}${f}`}function gO({config:t}){return t.emulator?hg(t,mO):`https://${t.authDomain}/${dO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="webStorageSupport";class yO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NA,this._completeRedirectFn=B4,this._overrideRedirectResult=L4}async _openPopup(e,n,i,s){var a;Ci((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=await oE(e,n,i,dm(),s);return hO(e,r,gg())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await oE(e,n,i,dm(),s);return E4(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(Ci(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await rO(e),i=new H4(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($f,{type:$f},s=>{var a;const r=(a=s==null?void 0:s[0])==null?void 0:a[$f];r!==void 0&&n(!!r),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Y4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yA()||hA()||dg()}}const _O=yO;var lE="@firebase/auth",uE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TO(t){ba(new sr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_A(t)},f=new jD(i,s,r,u);return QD(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ba(new sr("auth-internal",e=>{const n=_r(e.getProvider("auth").getImmediate());return(i=>new vO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(lE,uE,EO(t)),ms(lE,uE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=5*60,SO=pb("authIdTokenMaxAge")||bO;let cE=null;const AO=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>SO)return;const s=n==null?void 0:n.token;cE!==s&&(cE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function wO(t=Tb()){const e=_p(t,"auth");if(e.isInitialized())return e.getImmediate();const n=GD(t,{popupRedirectResolver:_O,persistence:[C4,IA,NA]}),i=pb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=AO(r.toString());d4(n,a,()=>a(n.currentUser)),f4(n,l=>a(l))}}const s=db("auth");return s&&KD(n,`http://${s}`),n}function xO(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}PD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=Yn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",xO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TO("Browser");const RO={apiKey:"AIzaSyAhMZTS-LgXURFr19kmDvVG3mc_j68PkNI",authDomain:"tene-9f8c9.firebaseapp.com",projectId:"tene-9f8c9",storageBucket:"tene-9f8c9.firebasestorage.app",messagingSenderId:"1096524923335",appId:"1:1096524923335:web:a2662d6197b49fe3bbd9e2"},PA=Eb(RO),at=BN(PA),pl=wO(PA);h4(pl,IA).catch(t=>{console.error("Firebase Persistence Error:",t)});const LA=L.createContext(),IO=({children:t})=>{const[e,n]=L.useState(null),[i,s]=L.useState(!0);L.useEffect(()=>{const a=m4(pl,l=>{n(l),s(!1)});return()=>a()},[]);const r={user:e,loading:i};return h.jsx(LA.Provider,{value:r,children:!i&&t})},UA=()=>L.useContext(LA),CO=({onRegisterClick:t})=>{const[e,n]=L.useState(!1),[i,s]=L.useState(""),[r,a]=L.useState(""),[l,u]=L.useState(""),[f,m]=L.useState(""),g=async _=>{if(_.preventDefault(),m(""),e){if(!l.trim()){m("Пожалуйста, введите имя.");return}try{const C=await o4(pl,i,r);await c4(C.user,{displayName:l})}catch(C){m(p(C.code))}}else try{await l4(pl,i,r)}catch(C){m(p(C.code))}},p=_=>{switch(_){case"auth/invalid-email":return"Неверный формат электронной почты.";case"auth/user-not-found":case"auth/wrong-password":return"Неверный email или пароль.";case"auth/email-already-in-use":return"Этот email уже зарегистрирован.";case"auth/weak-password":return"Пароль слишком слабый. Используйте не менее 6 символов.";default:return"Произошла ошибка. Пожалуйста, попробуйте еще раз."}};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e&&h.jsx("input",{type:"text",value:l,onChange:_=>u(_.target.value),placeholder:"Ваше имя",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),h.jsx("input",{type:"email",value:i,onChange:_=>s(_.target.value),placeholder:"Email",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),h.jsx("input",{type:"password",value:r,onChange:_=>a(_.target.value),placeholder:"Пароль",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),f&&h.jsx("p",{className:"text-red-500 text-sm text-center",children:f}),h.jsx("button",{type:"submit",className:"w-full py-3 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-transform hover:scale-105",children:e?"Зарегистрироваться":"Войти"})]}),h.jsx("div",{className:"flex items-center justify-center",children:h.jsx("button",{onClick:()=>{!e&&t&&t(),n(!e),m("")},className:"text-sm text-accent hover:underline",children:e?"У меня уже есть аккаунт":"Создать новый аккаунт"})})]})},NO=({auth:t,onRegisterClick:e})=>h.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main p-4",children:h.jsxs("div",{className:"w-full max-w-sm text-center",children:[h.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Добро пожаловать"}),h.jsx("p",{className:"text-text-main/70 mb-8",children:"Войдите или создайте аккаунт, чтобы продолжить."}),h.jsx("div",{className:"bg-component-bg p-6 rounded-2xl border border-border-color shadow-lg",children:h.jsx(CO,{onRegisterClick:e})})]})}),DO=({className:t=""})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${t}`,children:h.jsx("path",{d:"m9 18 6-6-6-6"})}),zA=({className:t=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M19 12H5"}),h.jsx("polyline",{points:"12 19 5 12 12 5"})]}),BA=({className:t="",filled:e=!1})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),OO=({className:t=""})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),qA=({className:t="",filled:e=!1})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),HA=({className:t=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),h.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),FA=({className:t="",filled:e=!1})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),VO=({className:t="",filled:e=!1})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),h.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),MO=({className:t="",filled:e=!1})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M4 22h16"}),h.jsx("path",{d:"M7 22V2h10v20"}),h.jsx("path",{d:"M7 12h4"})]}),kO=({className:t=""})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"m15 18-6-6 6-6"})}),jO=({className:t=""})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"m9 18 6-6-6-6"})}),PO=({className:t=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),h.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),LO=({className:t=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),UO=({className:t=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),h.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),_g=({novels:t,onSelectNovel:e,bookmarks:n,onToggleBookmark:i})=>h.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:t.length>0?t.map((s,r)=>h.jsx("div",{onClick:()=>e(s),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${r*50}ms`},children:h.jsxs("div",{className:"relative transition-all duration-300",children:[h.jsx("button",{onClick:a=>{a.stopPropagation(),i(s.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(s.id)?"text-accent":""}`,children:h.jsx(FA,{filled:n.includes(s.id),width:"20",height:"20"})}),h.jsx("img",{src:`/${s.coverUrl}`,alt:s.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),h.jsxs("div",{className:"flex items-center justify-between mt-2 gap-2",children:[h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("h2",{className:"font-semibold text-xs truncate text-text-main",children:s.title})}),s.views>0&&h.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-60 flex-shrink-0",children:[h.jsx(UO,{className:"w-4 h-4"}),h.jsx("span",{children:s.views})]})]})]})},s.id)):h.jsx("p",{className:"col-span-3 text-center opacity-70",children:"Ничего не найдено."})}),GA=bE.memo(({comment:t,onReply:e,onLike:n,onEdit:i,onDelete:s,onUpdate:r,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:f,setEditingText:m,replyingTo:g,replyText:p,setReplyText:_,onCommentSubmit:C})=>{const O=V=>V!=null&&V.toDate?V.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[h.jsxs("div",{className:"flex justify-between items-center text-xs opacity-70 mb-1",children:[h.jsx("p",{className:"font-bold text-sm text-text-main opacity-100",children:t.userName}),h.jsx("span",{children:O(t.timestamp)})]}),u===t.id?h.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[h.jsx("input",{type:"text",value:f,autoFocus:!0,onChange:V=>m(V.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),h.jsx("button",{onClick:()=>r(t.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),h.jsx("button",{onClick:()=>i(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):h.jsx("p",{className:"text-sm mt-1 opacity-90",children:t.text}),h.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[h.jsxs("button",{onClick:()=>n(t.id),className:"flex items-center gap-1 text-xs text-gray-500",children:[h.jsx(qA,{filled:t.userHasLiked,className:`w-4 h-4 ${t.userHasLiked?"text-accent":""}`}),h.jsx("span",{children:t.likeCount||0})]}),h.jsx("button",{onClick:()=>e(t.id),className:"text-xs text-gray-500",children:"Ответить"}),(l===t.userId||a)&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>i(t),className:"text-xs text-gray-500",children:"Редактировать"}),h.jsx("button",{onClick:()=>s(t.id),className:"text-xs text-red-500",children:"Удалить"})]})]})]}),g===t.id&&h.jsxs("form",{onSubmit:V=>C(V,t.id),className:"flex items-center gap-2 mt-2",children:[h.jsx("input",{type:"text",value:p,autoFocus:!0,onChange:V=>_(V.target.value),placeholder:`Ответ для ${t.userName}...`,className:"w-full bg-background border border-border-color rounded-lg py-1 px-3 text-sm"}),h.jsx("button",{type:"submit",className:"p-1.5 rounded-full bg-accent text-white",children:h.jsx(HA,{className:"w-4 h-4"})})]}),t.replies&&t.replies.length>0&&h.jsx("div",{className:"mt-2 space-y-2 border-l-2 border-border-color pl-2",children:t.replies.map(V=>h.jsx(GA,{comment:V,onReply:e,onLike:n,onEdit:i,onDelete:s,onUpdate:r,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:f,setEditingText:m,replyingTo:g,replyText:p,setReplyText:_,onCommentSubmit:C},V.id))})]})}),zO=`
  @keyframes page-turn {
    0%, 100% { transform: rotateY(0deg); }
    50% { transform: rotateY(-180deg); }
  }

  .book-page {
    transform-origin: left center;
    animation: page-turn 1.8s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  }

  @keyframes dot-fade {
    0%, 100% { opacity: 0.2; }
    50% { opacity: 1; }
  }

  .dot-1 { animation: dot-fade 1.5s infinite; animation-delay: 0s; }
  .dot-2 { animation: dot-fade 1.5s infinite; animation-delay: 0.2s; }
  .dot-3 { animation: dot-fade 1.5s infinite; animation-delay: 0.4s; }
`,BO=()=>h.jsxs(h.Fragment,{children:[h.jsx("style",{children:zO}),h.jsxs("div",{className:"flex flex-col justify-center items-center h-screen bg-background text-text-main",children:[h.jsxs("div",{className:"relative w-20 h-16 mb-6",children:[h.jsx("div",{className:"absolute w-10 h-16 bg-component-bg border-2 border-border-color rounded-r-md left-1/2"}),h.jsx("div",{className:"absolute w-10 h-16 bg-component-bg border-2 border-border-color rounded-l-md right-1/2"}),h.jsx("div",{className:"book-page absolute w-10 h-16 bg-accent rounded-r-md left-1/2"})]}),h.jsxs("p",{className:"text-lg font-semibold text-text-main flex items-center",children:["Загрузка новелл",h.jsx("span",{className:"dot-1",children:"."}),h.jsx("span",{className:"dot-2",children:"."}),h.jsx("span",{className:"dot-3",children:"."})]})]})]}),vg=({onClose:t,onSelectPlan:e})=>{const n=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[h.jsx(OO,{className:"mx-auto mb-4 text-accent"}),h.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),h.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),h.jsx("div",{className:"space-y-3",children:n.map(i=>h.jsxs("button",{onClick:()=>e(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[h.jsx("p",{className:"font-bold",children:i.name}),h.jsxs("p",{className:"text-sm",children:[i.price," ₽"]})]},i.duration))}),h.jsx("button",{onClick:t,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},Eg=({onClose:t,onSelectMethod:e,plan:n})=>h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[h.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),h.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("button",{onClick:()=>e("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[h.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),h.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),h.jsxs("button",{onClick:()=>e("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[h.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),h.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),h.jsxs("button",{onClick:()=>e("boosty"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[h.jsx("p",{className:"font-bold",children:"🧡 Оплатить через Boosty"}),h.jsx("p",{className:"text-sm opacity-70",children:"Автоматическая активация через Telegram"})]}),h.jsx("div",{className:"text-center pt-2",children:h.jsx("button",{onClick:()=>e("boosty"),className:"text-sm text-accent hover:underline",children:"Уже есть подписка Boosty? Синхронизировать аккаунт"})})]}),h.jsx("button",{onClick:t,className:"w-full py-3 mt-6 rounded-lg border border-border-color hover:bg-white/5 transition-colors",children:"Назад"})]})}),qO=({activeTab:t,setActiveTab:e})=>{const n=[{id:"library",label:"Библиотека",icon:MO},{id:"search",label:"Поиск",icon:BA},{id:"bookmarks",label:"Закладки",icon:FA},{id:"profile",label:"Профиль",icon:VO}];return h.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:h.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>h.jsxs("button",{onClick:()=>e(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${t===i.id?"text-accent":"text-text-main opacity-60"}`,children:[h.jsx(i.icon,{filled:t===i.id}),h.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},HO=({onReadMore:t})=>{const[e,n]=L.useState([]),[i,s]=L.useState(0);L.useEffect(()=>{fetch("/data/news.json").then(u=>u.json()).then(n).catch(u=>console.error("Failed to fetch news",u))},[]);const r=()=>s(u=>(u+1)%e.length),a=()=>s(u=>(u-1+e.length)%e.length);if(e.length===0)return null;const l=e[i];return h.jsx("div",{className:"p-4",children:h.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[h.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-bold text-text-main",children:l.title}),h.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),h.jsx("button",{onClick:()=>t(l),className:"text-sm font-bold text-accent mt-1",children:"Читать далее"})]}),h.jsxs("div",{className:"flex flex-col",children:[h.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:h.jsx(kO,{className:"w-5 h-5"})}),h.jsx("button",{onClick:r,className:"p-1 rounded-full hover:bg-background",children:h.jsx(jO,{className:"w-5 h-5"})})]})]})})},FO=({newsItem:t,onClose:e})=>h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e,children:h.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main flex flex-col",onClick:n=>n.stopPropagation(),children:[h.jsx("h2",{className:"text-2xl font-bold mb-4 break-words",children:t.title}),h.jsx("div",{className:"prose prose-sm max-w-none text-text-main opacity-80 overflow-y-auto max-h-[60vh] ",dangerouslySetInnerHTML:{__html:t.fullText}}),h.jsx("button",{onClick:e,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})}),Wn=({title:t,onBack:e})=>h.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[e&&h.jsx("button",{onClick:e,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:h.jsx(zA,{})}),h.jsx("h1",{className:"text-xl font-bold",children:t})]}),GO=()=>h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold mb-2",children:"Что такое Tenebris Verbum?"}),h.jsx("p",{className:"opacity-80",children:"Tenebris Verbum — это веб-приложение, созданное для комфортного чтения новелл. Оно представляет собой цифровую библиотеку, доступную через Telegram, и оптимизировано для мобильных устройств."}),h.jsxs("div",{className:"mt-4 space-y-2 opacity-80",children:[h.jsx("p",{className:"font-semibold",children:"Ключевые возможности приложения:"}),h.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[h.jsxs("li",{children:[h.jsx("b",{children:"Библиотека новелл:"})," Главный экран, где вы можете просматривать доступные новеллы, их обложки и названия."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Подробная информация о новелле:"})," Нажав на новеллу, вы увидите детальную страницу с её описанием, автором, жанрами и списком глав."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Удобная читалка:"})," Приложение предлагает продуманный интерфейс для чтения глав с возможностью настройки размера шрифта."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Система закладок:"})," Вы можете добавлять понравившиеся новеллы в закладки для быстрого доступа."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Поиск и фильтрация:"})," Есть функция поиска по названию новеллы и возможность фильтрации по жанрам прямо из карточки новеллы."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Интерактивность:"})," Пользователи могут оставлять комментарии к главам, отвечать на комментарии других, ставить лайки главам и комментариям."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Персонализация:"})," В профиле можно переключаться между светлой и тёмной темами оформления."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Система подписок:"})," Для доступа к эксклюзивным (платным) главам в приложении реализована система подписок."]})]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold mb-2",children:"Руководство пользователя и правила"}),h.jsxs("div",{className:"space-y-4 opacity-80",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"1. Вход и Регистрация:"}),h.jsx("p",{children:"При первом входе в приложение вас встретит экран авторизации. Вы можете создать новый аккаунт, указав ваше имя, email и пароль, либо войти в уже существующий. Это необходимо для сохранения вашего прогресса, закладок и статуса подписки."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"2. Навигация:"}),h.jsx("p",{children:"В нижней части экрана расположена панель навигации с четырьмя основными разделами:"}),h.jsxs("ul",{className:"list-disc list-inside ml-4",children:[h.jsxs("li",{children:[h.jsx("b",{children:"Библиотека:"})," Ваш основной экран с каталогом всех новелл."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Поиск:"})," Раздел для поиска новелл по названию."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Закладки:"})," Здесь хранятся все новеллы, которые вы отметили."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Профиль:"})," Управление вашим аккаунтом и подпиской."]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"3. Чтение:"}),h.jsx("p",{children:"На странице новеллы выберите нужную главу из списка. Некоторые главы могут быть отмечены иконкой замка (🔒) — это платный контент, доступный по подписке. В режиме чтения вы можете:"}),h.jsxs("ul",{className:"list-disc list-inside ml-4",children:[h.jsx("li",{children:"Переключаться между главами с помощью стрелок внизу экрана."}),h.jsx("li",{children:"Открыть оглавление, чтобы быстро перейти к другой главе."}),h.jsx("li",{children:'Зайти в настройки (иконка шестерёнки) и изменить размер текста кнопками "+" и "-".'})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"4. Профиль:"}),h.jsxs("p",{children:["В этом разделе вы можете видеть ваш email и имя. Здесь находится кнопка для выхода из аккаунта. Тут же можно включить или выключить тёмную тему. ",h.jsx("b",{children:"Ваш ID для привязки:"})," Это уникальный идентификатор вашего аккаунта. Он понадобится для активации подписки через Telegram-бота. Его можно скопировать одним нажатием."]})]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold mb-2",children:"Активация подписок"}),h.jsx("p",{className:"opacity-80 mb-3",children:"Подписка открывает доступ ко всем платным главам во всех новеллах. Процесс оформления разделён на несколько шагов."}),h.jsxs("div",{className:"space-y-4 opacity-80",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"Шаг 1: Выбор тарифа"}),h.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[h.jsxs("li",{children:["Зайдите в раздел ",h.jsx("b",{children:'"Профиль"'}),"."]}),h.jsxs("li",{children:["Нажмите кнопку ",h.jsx("b",{children:'"Оформить подписку"'}),"."]}),h.jsxs("li",{children:["Во всплывающем окне выберите один из доступных тарифов:",h.jsxs("ul",{className:"list-disc list-inside ml-6",children:[h.jsxs("li",{children:[h.jsx("b",{children:"1 месяц"})," за 199 ₽"]}),h.jsxs("li",{children:[h.jsx("b",{children:"3 месяца"})," за 539 ₽"]}),h.jsxs("li",{children:[h.jsx("b",{children:"1 год"})," за 1899 ₽"]})]})]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"Шаг 2: Выбор способа оплаты"}),h.jsxs("p",{className:"mb-2",children:["После выбора тарифа вам будет предложено три способа оплаты. Каждый из них требует взаимодействия с Telegram-ботом ",h.jsx("b",{children:"tenebrisverbot"}),"."]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h5",{className:"font-semibold",children:"Способ 1: Boosty (Автоматическая активация)"}),h.jsx("p",{children:"Это самый быстрый и рекомендуемый способ."}),h.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[h.jsxs("li",{children:["В приложении, после выбора тарифа, нажмите ",h.jsx("b",{children:'"Оплатить через Boosty"'}),"."]}),h.jsx("li",{children:"Вас автоматически перенаправит в Telegram-бот, который привяжет ваш Telegram-аккаунт к вашему профилю в приложении."}),h.jsx("li",{children:"Бот пришлет вам ссылку на Boosty и дальнейшие инструкции."}),h.jsx("li",{children:"Перейдите по ссылке, оформите подписку на Boosty и вступите в приватную Telegram-группу (ссылку предоставит Boosty после оплаты)."}),h.jsx("li",{children:"Как только вы вступите в группу, вернитесь в бот и отправьте ему команду /check ВАШ_ID (скопируйте ID из профиля в приложении)."}),h.jsxs("li",{children:["Бот проверит ваше членство в группе и ",h.jsx("b",{children:"автоматически активирует подписку на 1 месяц"}),"."]})]}),h.jsx("h5",{className:"font-semibold pt-2",children:"Способы 2 и 3: Банковская карта или Донат через Tribut (Ручная проверка)"}),h.jsx("p",{children:"Эти способы требуют ручного подтверждения администратором."}),h.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[h.jsxs("li",{children:["В приложении выберите тариф, а затем — ",h.jsx("b",{children:'"Банковской картой"'})," или ",h.jsx("b",{children:'"Донат через tribut"'}),"."]}),h.jsx("li",{children:"Вас перенаправит в Telegram-бот."}),h.jsxs("li",{children:["Бот сгенерирует для вас ",h.jsx("b",{children:"уникальный код платежа"})," (например, SUB12345-6789) и пришлет реквизиты."]}),h.jsxs("li",{children:[h.jsx("b",{children:"ЭТО ВАЖНО:"})," Совершите перевод/донат, и в поле ",h.jsx("b",{children:'"комментарий"'})," или ",h.jsx("b",{children:'"сообщение к донату" ОБЯЗАТЕЛЬНО'})," укажите тот самый уникальный код, который прислал бот. Без этого кода администратор не сможет найти ваш платеж."]}),h.jsx("li",{children:"После получения оплаты администратор воспользуется специальной командой, чтобы активировать вашу подписку."}),h.jsx("li",{children:"Бот пришлет вам уведомление об успешной активации."})]})]})]})]})]})]}),QO=()=>h.jsxs("div",{className:"space-y-4 text-sm opacity-90",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Последнее обновление:"})," 17 сентября 2025 г."]}),h.jsx("p",{children:"Настоящее Пользовательское соглашение (далее – «Соглашение») регулирует отношения между Администрацией приложения Tenebris Verbum (далее – «Администрация», «Сервис») и пользователем сети Интернет (далее – «Пользователь»), возникающие при использовании Сервиса."}),h.jsx("p",{children:"Перед началом использования Сервиса, пожалуйста, внимательно ознакомьтесь с его условиями. Начало использования Сервиса означает ваше полное и безоговорочное принятие (Акцепт) настоящего Соглашения. Если вы не согласны с какими-либо из его положений, вы должны немедленно прекратить использование Сервиса."}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"1. Основные термины"}),h.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[h.jsxs("li",{children:[h.jsx("b",{children:"Сервис:"})," Веб-приложение Tenebris Verbum, предоставляющее доступ к художественным текстам (контенту) в режиме онлайн-чтения."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Пользователь:"})," Любое физическое лицо, достигшее 18 лет (или обладающее полной дееспособностью), которое осуществляет доступ к Сервису и принимает условия данного Соглашения."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Акцепт:"})," Полное и безоговорочное принятие Пользователем условий настоящего Соглашения, которое совершается путем продолжения использования Сервиса."]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"2. Предмет Соглашения"}),h.jsx("p",{children:"2.1. Администрация предоставляет Пользователю неисключительное, безвозмездное право на доступ к контенту, размещенному в Сервисе, исключительно для личного некоммерческого ознакомления путем чтения."}),h.jsx("p",{children:"2.2. Сервис не предоставляет технической возможности для скачивания, сохранения или любого другого способа копирования контента."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"3. Интеллектуальная собственность и правила использования контента"}),h.jsxs("p",{children:["3.1. ",h.jsx("b",{children:"Авторские права:"})," Все тексты, изображения и другие материалы, размещенные в Сервисе, являются объектами авторского права и защищены законодательством."]}),h.jsxs("div",{className:"mt-2",children:[h.jsxs("p",{children:["3.2. ",h.jsx("b",{children:"Запрещенные действия:"})," Пользователю категорически запрещается:"]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsx("li",{children:"Копировать, распространять, публично воспроизводить или иным образом использовать контент Сервиса в коммерческих или неличных целях."}),h.jsx("li",{children:"Использовать скрипты, боты или любые другие автоматизированные средства для сбора данных, массового скачивания или взаимодействия с Сервисом."}),h.jsx("li",{children:"Предпринимать попытки обойти технические ограничения, установленные Администрацией."})]})]}),h.jsxs("p",{className:"mt-2",children:["3.3. ",h.jsx("b",{children:"Процедура для правообладателей:"})," Если вы являетесь правообладателем и считаете, что ваши права нарушены, просим вас связаться с Администрацией через доступные каналы связи. Администрация обязуется рассмотреть ваше обращение и, в случае подтверждения нарушения, незамедлительно удалить соответствующий контент."]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"4. Правовой статус Сервиса и ограничение ответственности"}),h.jsxs("p",{children:["4.1. ",h.jsx("b",{children:"Информационный посредник:"})," В соответствии со ст. 1253.1 ГК РФ, Сервис является информационным посредником. Администрация предоставляет платформу для размещения материалов и не является инициатором их создания, не изменяет их содержание и не несет ответственности за него до момента получения обоснованного уведомления о нарушении."]}),h.jsxs("p",{children:["4.2. ",h.jsx("b",{children:"Ответственность за контент:"})," Ответственность за правомерность использования контента несут независимые подрядчики, предоставляющие материалы для размещения и гарантирующие наличие у них всех необходимых прав. Администрация не несет ответственности за недобросовестные действия таких подрядчиков."]}),h.jsxs("p",{children:["4.3. ",h.jsx("b",{children:"Соблюдение законодательства:"})," Администрация принимает меры для соблюдения законодательства РФ, включая добавление обязательной маркировки, установку возрастной маркировки («18+») и незамедлительное удаление запрещенных материалов."]}),h.jsxs("p",{children:["4.4. ",h.jsx("b",{children:"Ограничение ответственности:"})," Администрация не несет ответственности за технические сбои, содержание произведений и любой косвенный ущерб, который может быть причинен Пользователю."]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"5. Права и обязанности сторон"}),h.jsxs("div",{children:[h.jsxs("p",{children:["5.1. ",h.jsx("b",{children:"Администрация вправе:"})]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsx("li",{children:"В любое время изменять или удалять любой контент, изменять дизайн и функционал Сервиса."}),h.jsx("li",{children:"Применять технические средства защиты от вредоносных действий (например, блокировать IP-адреса, с которых исходит чрезмерное количество запросов или иная подозрительная активность)."}),h.jsx("li",{children:"Вносить изменения в настоящее Соглашение в одностороннем порядке. Новая редакция вступает в силу с момента ее публикации."})]})]}),h.jsxs("div",{className:"mt-2",children:[h.jsxs("p",{children:["5.2. ",h.jsx("b",{children:"Пользователь обязан:"})]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsx("li",{children:"Соблюдать условия настоящего Соглашения."}),h.jsx("li",{children:"Не использовать Сервис для распространения любой запрещенной информации."}),h.jsx("li",{children:"Соблюдать установленные возрастные ограничения."})]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"6. Разрешение споров"}),h.jsx("p",{children:"6.1. Все споры и разногласия подлежат разрешению в соответствии с действующим законодательством Российской Федерации."}),h.jsx("p",{children:"6.2. Местом разрешения споров в судебном порядке является суд по месту нахождения Администрации."})]})]}),KO=()=>h.jsxs("div",{className:"space-y-4 text-sm opacity-90",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Последнее обновление:"})," 17 сентября 2025 г."]}),h.jsx("p",{children:"Настоящая Политика конфиденциальности (далее – «Политика») является неотъемлемой частью Пользовательского соглашения и объясняет, какие данные мы собираем и для каких целей. Используя Сервис, вы выражаете безоговорочное согласие с настоящей Политикой."}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"1. Собираемая информация"}),h.jsxs("div",{children:[h.jsxs("p",{children:["1.1. ",h.jsx("b",{children:"Данные, предоставляемые Пользователем:"})]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsxs("li",{children:[h.jsx("b",{children:"При регистрации:"})," Ваше имя, адрес электронной почты (email) и пароль (хранится в зашифрованном виде)."]}),h.jsxs("li",{children:[h.jsx("b",{children:"При взаимодействии:"})," Комментарии, лайки, закладки."]}),h.jsxs("li",{children:[h.jsx("b",{children:"При оплате:"})," Ваш Telegram ID для привязки к аккаунту и проверки статуса подписки."]})]})]}),h.jsxs("div",{className:"mt-2",children:[h.jsxs("p",{children:["1.2. ",h.jsx("b",{children:"Технические данные, собираемые автоматически:"})]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsxs("li",{children:[h.jsx("b",{children:"IP-адрес:"})," Для обеспечения безопасности и предотвращения злоупотреблений."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Информация о браузере, ОС и типе устройства:"})," Для корректной и адаптивной работы Сервиса."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Данные о взаимодействии с Сервисом:"})," Время доступа и информация о посещенных страницах внутри Сервиса для ведения внутренней аналитики."]})]})]}),h.jsxs("p",{className:"mt-2",children:["1.3. ",h.jsx("b",{children:"Что мы НЕ собираем:"})," Сервис целенаправленно ",h.jsx("b",{children:"не собирает"})," и не обрабатывает ваши точные данные геолокации, историю просмотров вне нашего Сервиса и другие персональные данные, не указанные выше."]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"2. Цели обработки данных"}),h.jsxs("p",{children:["2.1. ",h.jsx("b",{children:"Обеспечение работы Сервиса:"})," Собранные данные необходимы для управления вашей учетной записью, предоставления доступа к функциям, обработки подписок и защиты от мошеннических действий."]}),h.jsxs("p",{children:["2.2. ",h.jsx("b",{children:"Аналитика и улучшение:"})," Обезличенные технические данные используются для анализа работы Сервиса, выявления проблем и его дальнейшего совершенствования."]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"3. Передача и хранение данных"}),h.jsxs("p",{children:["3.1. ",h.jsx("b",{children:"Хранение:"})," Данные хранятся на защищенных серверах в течение срока, необходимого для выполнения целей их обработки."]}),h.jsxs("div",{children:[h.jsxs("p",{children:["3.2. ",h.jsx("b",{children:"Передача третьим лицам:"})," Мы не продаем ваши данные. Передача возможна только:"]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsx("li",{children:"Техническим подрядчикам (например, хостинг-провайдерам), которые обеспечивают работу Сервиса."}),h.jsx("li",{children:"Государственным органам по законному и обоснованному запросу."})]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"4. Защита информации"}),h.jsx("p",{children:"Администрация принимает все необходимые и достаточные технические и организационные меры для защиты вашей информации от несанкционированного доступа, изменения или раскрытия."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"5. Изменение Политики"}),h.jsx("p",{children:"Администрация оставляет за собой право вносить изменения в настоящую Политику. Новая редакция вступает в силу с момента ее размещения в Сервисе. Продолжение использования Сервиса после внесения изменений означает ваше согласие с новой редакцией."})]})]}),hE=({onBack:t,onAccept:e})=>{const[n,i]=L.useState("guide"),s=[{id:"guide",title:"Руководство"},{id:"terms",title:"Соглашение"},{id:"privacy",title:"Политика"}];return h.jsxs("div",{className:"bg-background min-h-screen text-text-main pb-24",children:[" ",h.jsx(Wn,{title:"Справка и информация",onBack:e?void 0:t}),h.jsx("div",{className:"px-4 pt-4",children:h.jsx("div",{className:"flex space-x-1 rounded-lg bg-component-bg p-1 border border-border-color",children:s.map(r=>h.jsx("button",{onClick:()=>i(r.id),className:`w-full rounded-md py-2.5 text-sm font-medium transition-colors
                                ${n===r.id?"bg-accent text-white shadow":"text-text-main/70 hover:bg-background"}`,children:r.title},r.id))})}),h.jsxs("div",{className:"p-4",children:[n==="guide"&&h.jsx(GO,{}),n==="terms"&&h.jsx(QO,{}),n==="privacy"&&h.jsx(KO,{})]}),e&&h.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-sm border-t border-border-color shadow-lg",children:h.jsx("button",{onClick:e,className:"w-full bg-accent text-white font-bold py-3 px-4 rounded-lg hover:bg-accent/90 transition-colors",children:"Принять и продолжить"})})]})},YO=t=>t?typeof t.toDate=="function"?t.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"2-digit"}):(console.warn("Получен неожиданный формат даты:",t),""):"",$O=({novel:t,onSelectChapter:e,onGenreSelect:n,subscription:i,botUsername:s,userId:r,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:f})=>{const{user:m}=UA();if(!t)return h.jsxs("div",{children:[h.jsx(Wn,{title:"Загрузка...",onBack:f}),h.jsx("div",{className:"p-4 text-center",children:"Загрузка данных о новелле..."})]});L.useEffect(()=>{if(m&&t&&t.id){const Z=`viewed-${t.id}`;if(!sessionStorage.getItem(Z)){sessionStorage.setItem(Z,"true");const fe=At(at,"novel_stats",t.id.toString());dl(fe,{views:oD(1)},{merge:!0}).catch(z=>console.error("Ошибка обновления счетчика просмотров:",z))}}},[t,m]);const[g,p]=L.useState(!1),[_,C]=L.useState(null),[O,V]=L.useState("newest"),[A,E]=L.useState(!1),x=L.useRef(null),[D,U]=L.useState(!1),F=Array.isArray(t.genres)?t.genres:[],T=i&&i.expires_at&&typeof i.expires_at.toDate=="function"&&i.expires_at.toDate()>new Date,v=L.useMemo(()=>u&&t&&u[t.id]?u[t.id].chapterId:null,[u,t]);L.useEffect(()=>{x.current&&setTimeout(()=>{x.current&&U(x.current.scrollHeight>x.current.clientHeight)},100)},[t.description]);const b=L.useMemo(()=>{if(!Array.isArray(a))return[];const Z=[...a];return O==="newest"?Z.reverse():a},[a,O]),S=Z=>{!T&&Z.isPaid?p(!0):e(Z)},R=()=>{if(v){const Z=a.find(fe=>fe.id===v);Z&&e(Z)}},I=Z=>C(Z),w=async Z=>{var z;const fe=(z=window.Telegram)==null?void 0:z.WebApp;if(!fe||!r||!_){console.error("Telegram Web App, userId, or selectedPlan is not available."),fe&&fe.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}fe.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не реагирует после того, как вы выбрали тариф, не волнуйтесь! Попробуйте отправить команду /start еще раз.",async Y=>{if(!Y)return;const $=At(at,"users",r);try{await dl($,{pendingSubscription:{..._,method:Z,date:new Date().toISOString()}},{merge:!0}),fe.openTelegramLink(`https://t.me/${s}?start=${r}`),fe.close()}catch(ge){console.error("Ошибка записи в Firebase:",ge),fe.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};return console.log("Содержимое глав:",b),h.jsxs("div",{className:"text-text-main",children:[h.jsx(Wn,{title:t.title,onBack:f}),h.jsxs("div",{className:"relative h-64",children:[h.jsx("img",{src:`/${t.coverUrl}`,alt:t.title,className:"w-full h-full object-cover object-top absolute"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),h.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[h.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:t.title}),h.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:t.author})]})]}),h.jsxs("div",{className:"p-4",children:[h.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:F.map(Z=>{const z=`
            text-xs font-semibold px-3 py-1 rounded-full transition-colors 
            duration-200 bg-component-bg border hover:bg-border-color
            ${Z==="16+"||Z==="18+"?"border-genre-highlight-border text-genre-highlight-text":"border-border-color text-text-main"}
        `;return h.jsx("button",{onClick:()=>n(Z),className:z,children:Z},Z)})}),h.jsx("div",{ref:x,className:`relative overflow-hidden transition-all duration-500 ${A?"max-h-full":"max-h-24"}`,children:h.jsx("div",{className:"text-sm mb-2 opacity-80 font-body prose",dangerouslySetInnerHTML:{__html:t.description}})}),D&&h.jsx("div",{className:"text-right mt-2",children:h.jsx("button",{onClick:()=>E(!A),className:"text-sm font-semibold text-accent mb-4",children:A?"Скрыть":"Читать полностью..."})}),v&&h.jsxs("button",{onClick:R,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",v,")"]}),h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),h.jsx("button",{onClick:()=>V(Z=>Z==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:O==="newest"?"Сначала новые":"Сначала старые"})]}),T&&h.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",i.expires_at.toDate().toLocaleDateString()]}),l?h.jsx("p",{children:"Загрузка глав..."}):h.jsx("div",{className:"flex flex-col gap-3",children:b.map((Z,fe)=>{const z=!T&&Z.isPaid,Y=v===Z.id,$=O==="newest"?b.length-fe:fe+1;return h.jsxs("div",{onClick:()=>S(Z),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${z?"opacity-70":""}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[Y&&h.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),h.jsx("p",{className:"font-semibold",children:Z.title})]}),h.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[h.jsx("div",{className:"bg-accent rounded-full w-8 h-8 flex items-center justify-center ml-auto",children:h.jsx("span",{className:"text-white font-bold text-sm",children:$})}),h.jsx("p",{className:"text-text-main opacity-70 text-xs mt-1",children:YO(Z.published_at)})]})]},Z.id)})}),g&&h.jsx(vg,{onClose:()=>p(!1),onSelectPlan:I}),_&&h.jsx(Eg,{onClose:()=>C(null),onSelectMethod:w,plan:_})]})]})},XO=({chapter:t,novel:e,userId:n,userName:i,subscription:s,botUsername:r,onBack:a,isUserAdmin:l,allChapters:u,onSelectChapter:f,fontSize:m,onFontSizeChange:g,fontFamily:p,onFontFamilyChange:_,lineHeight:C,onLineHeightChange:O,textAlign:V,onTextAlignChange:A,textIndent:E,onTextIndentChange:x,paragraphSpacing:D,onParagraphSpacingChange:U})=>{if(!e||!t)return h.jsxs("div",{children:[h.jsx(Wn,{title:"Загрузка...",onBack:a}),h.jsx("div",{className:"p-4 text-center",children:"Подготовка главы..."})]});const[F,T]=L.useState([]),[v,b]=L.useState(new Set),[S,R]=L.useState(null),[I,w]=L.useState(!0),[Z,fe]=L.useState(!1),[z,Y]=L.useState(""),[$,ge]=L.useState(null),[be,Wt]=L.useState(""),[nt,Se]=L.useState(null),[Ye,Tt]=L.useState(""),[Os,it]=L.useState(0),[An,Gt]=L.useState(!1),[Vi,Ot]=L.useState(!1),[Mi,Mn]=L.useState(!1),[Vs,ni]=L.useState(!1),[wn,vr]=L.useState(null),[Ya,kn]=L.useState(""),[Ms,Q]=L.useState(!0),se=s&&s.expires_at&&typeof s.expires_at.toDate=="function"&&s.expires_at.toDate()>new Date,De=L.useMemo(()=>At(at,"chapters_metadata",`${e.id}_${t.id}`),[e.id,t.id]),$e=L.useMemo(()=>hm(at,`chapters_metadata/${e.id}_${t.id}/comments`),[e.id,t.id]),je=L.useCallback(async()=>{if(!(Z||!I||!S)){fe(!0);try{const H=Uv($e,zv("timestamp","desc"),YN(S),Bv(20)),ee=await Fc(H),ie=ee.docs.map(Oe=>({id:Oe.id,...Oe.data(),userHasLiked:v.has(Oe.id)}));T(Oe=>[...Oe,...ie]);const Te=ee.docs[ee.docs.length-1];R(Te||null),w(ee.docs.length>=20)}catch(H){console.error("Ошибка подгрузки комментариев: ",H)}finally{fe(!1)}}},[Z,I,S,$e,v]);L.useEffect(()=>{if(!n||!(e!=null&&e.id)||!(t!=null&&t.id)){T([]),fe(!1);return}(async()=>{var ee,ie,Te;fe(!0),T([]),R(null),w(!0);try{const Oe=Pr(De),Ae=Pr(At(at,`chapters_metadata/${e.id}_${t.id}/likes`,n)),ze=Pr(At(at,"user_comment_likes",n)),bt=Fc(Uv($e,zv("timestamp","desc"),Bv(20))),[st,Sr,ii,jn]=await Promise.all([Oe,Ae,ze,bt]);it(st.exists()&&st.data().likeCount||0),Gt((Sr==null?void 0:Sr.exists())??!1);const Bh=`${e.id}_${t.id}`,qh=((Te=(ie=(ee=ii==null?void 0:ii.data())==null?void 0:ee.chapters)==null?void 0:ie[Bh])==null?void 0:Te.likedCommentIds)||[],si=new Set(qh);b(si);const Hh=jn.docs.map(ki=>({id:ki.id,...ki.data(),userHasLiked:si.has(ki.id)}));T(Hh);const Fh=jn.docs[jn.docs.length-1];R(Fh||null),w(jn.docs.length>=20)}catch(Oe){console.error("Ошибка загрузки данных главы:",Oe),T([])}finally{fe(!1)}})()},[De,n,e.id,t.id,$e]),L.useEffect(()=>{(async()=>{if(Q(!0),kn(""),t.isPaid&&!se){Q(!1),kn(`### 🔒 Для доступа к этой главе необходима подписка.

Пожалуйста, оформите подписку в разделе "Профиль", чтобы продолжить чтение.`);return}try{const ee=At(at,"chapter_content",`${e.id}-${t.id}`),ie=await Pr(ee);ie.exists()?kn(ie.data().content):kn(`## Ошибка

Не удалось загрузить текст главы. Пожалуйста, попробуйте позже.`)}catch(ee){console.error("Ошибка загрузки главы:",ee),kn(`## Ошибка

Произошла ошибка при загрузке. Проверьте ваше интернет-соединение.`)}finally{Q(!1)}})()},[e.id,t.id,t.isPaid,se]);const Ee=L.useCallback(async(H,ee=null)=>{H.preventDefault();const ie=ee?Ye:z;if(!(!ie.trim()||!n))try{await dl(De,{},{merge:!0});const Te={userId:n,userName:i||"Аноним",text:ie,timestamp:Gv(),likeCount:0,novelTitle:e.title,chapterTitle:t.title,isNotified:!1};if(ee){Te.replyTo=ee;const Ae=await Pr(At($e,ee));Ae.exists()&&(Te.parentUserId=Ae.data().userId)}const Oe=await eD($e,Te);T(Ae=>[{...Te,id:Oe.id,userHasLiked:!1,timestamp:new Date},...Ae]),ee?(Se(null),Tt("")):Y("")}catch(Te){console.error("Ошибка добавления комментария:",Te)}},[n,i,z,Ye,De,e.title,t.title,$e]),Ie=L.useCallback(async H=>{if(!n)return;const ee=v.has(H);b(Ae=>{const ze=new Set(Ae);return ee?ze.delete(H):ze.add(H),ze}),T(Ae=>Ae.map(ze=>ze.id===H?{...ze,userHasLiked:!ee,likeCount:ee?(ze.likeCount||1)-1:(ze.likeCount||0)+1}:ze));const ie=At(at,`chapters_metadata/${e.id}_${t.id}/comments`,H),Te=At(at,"user_comment_likes",n),Oe=`${e.id}_${t.id}`;try{await Fv(at,async Ae=>{const ze=await Ae.get(ie);if(!ze.exists())return;const bt=ze.data().likeCount||0,st=`chapters.${Oe}.likedCommentIds`;ee?(Ae.update(ie,{likeCount:Math.max(0,bt-1)}),Ae.update(Te,{[st]:aD(H)})):(Ae.update(ie,{likeCount:bt+1}),Ae.set(Te,{chapters:{[Oe]:{likedCommentIds:rD(H)}}},{merge:!0}))})}catch(Ae){console.error("Ошибка при обновлении лайка комментария:",Ae),b(ze=>{const bt=new Set(ze);return ee?bt.add(H):bt.delete(H),bt}),T(ze=>ze.map(bt=>bt.id===H?{...bt,userHasLiked:ee,likeCount:ee?(bt.likeCount||0)+1:(bt.likeCount||1)-1}:bt))}},[n,e.id,t.id,v]),xn=L.useCallback(H=>{ge(H?H.id:null),Wt(H?H.text:"")},[]),Er=L.useCallback(async H=>{if(!be.trim())return;const ee=At(at,`chapters_metadata/${e.id}_${t.id}/comments`,H);await WN(ee,{text:be}),T(ie=>ie.map(Te=>Te.id===H?{...Te,text:be}:Te)),ge(null),Wt("")},[be,e.id,t.id]),Jt=L.useCallback(async H=>{const ee=At(at,`chapters_metadata/${e.id}_${t.id}/comments`,H);await JN(ee),T(ie=>ie.filter(Te=>Te.id!==H))},[e.id,t.id]),zh=L.useCallback(H=>{Se(ee=>ee===H?null:H),Tt("")},[]),ks=async()=>{if(!n)return;const H=An;Gt(!H),it(ie=>H?ie-1:ie+1);const ee=At(at,`chapters_metadata/${e.id}_${t.id}/likes`,n);try{await Fv(at,async ie=>{var Ae;const Oe=((Ae=(await ie.get(De)).data())==null?void 0:Ae.likeCount)||0;H?(ie.delete(ee),ie.set(De,{likeCount:Math.max(0,Oe-1)},{merge:!0})):(ie.set(ee,{timestamp:Gv()}),ie.set(De,{likeCount:Oe+1},{merge:!0}))})}catch(ie){console.error("Ошибка при обновлении лайка:",ie),Gt(H),it(Te=>H?Te+1:Te-1)}},Tr=H=>{H&&(!se&&H.isPaid?(Ot(!1),ni(!0)):(f(H),Ot(!1)))},Ql=H=>{vr(H),ni(!1)},$a=async H=>{var ie;const ee=(ie=window.Telegram)==null?void 0:ie.WebApp;ee&&n&&wn&&ee.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async Te=>{if(Te){const Oe=At(at,"users",n);try{await dl(Oe,{pendingSubscription:{...wn,method:H,date:new Date().toISOString()}},{merge:!0}),ee.openTelegramLink(`https://t.me/${r}?start=${n}`),ee.close()}catch(Ae){console.error("Ошибка записи в Firebase:",Ae),ee.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})},Kl=u.findIndex(H=>H.id===t.id),Yl=u[Kl-1],br=u[Kl+1],$l=H=>window.marked?`<div class="prose max-w-none">${window.marked.parse(H)}</div>`:H,Xl=L.useMemo(()=>[...F].sort((H,ee)=>{var Oe,Ae;const ie=(Oe=H.timestamp)!=null&&Oe.toDate?H.timestamp.toDate().getTime():0;return((Ae=ee.timestamp)!=null&&Ae.toDate?ee.timestamp.toDate().getTime():0)-ie}),[F]),js={fontSize:`${m}px`,fontFamily:p,lineHeight:C,textAlign:V};return h.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[h.jsx("style",{children:`
            .chapter-content p {
              text-indent: ${E}em;
              margin-bottom: ${D}em;
            }
          `}),h.jsx(Wn,{title:e.title,onBack:a}),h.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[h.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:t.title}),h.jsx("div",{className:"whitespace-normal chapter-content",style:js,dangerouslySetInnerHTML:{__html:Ms?'<p class="text-center">Загрузка текста главы...</p>':$l(Ya)}}),h.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"╚══ ≪ °❈° ≫ ══╝"}),h.jsxs("div",{className:"border-t border-border-color pt-8",children:[h.jsx("div",{className:"flex items-center gap-4 mb-8",children:h.jsxs("button",{onClick:ks,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[h.jsx(qA,{filled:An,className:An?"text-accent":""}),h.jsx("span",{className:"font-bold text-lg",children:Os})]})}),h.jsx("h3",{className:"text-xl font-bold mb-4",children:"Комментарии"}),h.jsxs("div",{className:"space-y-4 mb-6",children:[F.length>0?Xl.map(H=>h.jsx(GA,{comment:H,onReply:zh,onLike:Ie,onEdit:xn,onDelete:Jt,onUpdate:Er,isUserAdmin:l,currentUserId:n,editingCommentId:$,editingText:be,setEditingText:Wt,replyingTo:nt,replyText:Ye,setReplyText:Tt,onCommentSubmit:Ee},H.id)):!Z&&h.jsx("p",{className:"opacity-70 text-sm",children:"Комментариев пока нет. Будьте первым!"}),Z&&F.length===0&&h.jsx("p",{className:"text-center opacity-70",children:"Загрузка комментариев..."}),I&&!Z&&F.length>0&&h.jsx("div",{className:"text-center pt-4",children:h.jsx("button",{onClick:je,disabled:Z,className:"text-accent hover:underline font-semibold px-4 py-2 rounded-lg disabled:opacity-50",children:Z?"Загрузка...":"Загрузить ещё"})})]}),h.jsxs("form",{onSubmit:H=>Ee(H,null),className:"flex items-center gap-2",children:[h.jsx("input",{type:"text",value:z,onChange:H=>Y(H.target.value),placeholder:"Написать комментарий...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),h.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:h.jsx(HA,{className:"w-5 h-5"})})]})]})]}),h.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[h.jsx("button",{onClick:()=>Tr(Yl),disabled:!Yl,className:"p-2 disabled:opacity-50",children:h.jsx(zA,{})}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>Ot(!0),className:"px-4 py-2 rounded-lg bg-background",children:"Оглавление"}),h.jsx("button",{onClick:()=>Mn(!0),className:"p-2 rounded-lg bg-background",children:h.jsx(PO,{})})]}),h.jsx("button",{onClick:()=>Tr(br),disabled:!br,className:"p-2 disabled:opacity-50",children:h.jsx(DO,{className:"opacity-100"})})]}),Vi&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>Ot(!1),children:h.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:H=>H.stopPropagation(),children:[h.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:"Главы"}),h.jsx("div",{className:"overflow-y-auto",children:h.jsx("div",{className:"flex flex-col gap-2",children:u.map(H=>h.jsx("button",{onClick:()=>Tr(H),className:`p-2 text-left rounded-md ${H.id===t.id?"bg-accent text-white":"bg-background"}`,children:H.title},H.id))})})]})}),Mi&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>Mn(!1),children:h.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:H=>H.stopPropagation(),children:[h.jsx("h3",{className:"font-bold text-lg mb-4",children:"Настройки чтения"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Размер текста"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>g(-1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"-"}),h.jsx("span",{children:m}),h.jsx("button",{onClick:()=>g(1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"+"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Шрифт"}),h.jsxs("div",{className:"flex gap-2 flex-wrap",children:[h.jsx("button",{onClick:()=>_("'JetBrains Mono', monospace"),className:`px-3 py-1 rounded-md text-sm ${p&&p.includes("JetBrains Mono")?"bg-accent text-white":"bg-background"}`,children:"Стандарт"}),h.jsx("button",{onClick:()=>_("'Montserrat', sans-serif"),className:`px-3 py-1 rounded-md text-sm ${p&&p.includes("Montserrat")?"bg-accent text-white":"bg-background"}`,children:"Montserrat"}),h.jsx("button",{onClick:()=>_("'Lora', serif"),className:`px-3 py-1 rounded-md text-sm ${p&&p.includes("Lora")?"bg-accent text-white":"bg-background"}`,children:"Lora"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Интервал"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>O(-.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"-"}),h.jsx("span",{children:C.toFixed(1)}),h.jsx("button",{onClick:()=>O(.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"+"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Выравнивание"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>A("left"),className:`px-3 py-1 rounded-md ${V==="left"?"bg-accent text-white":"bg-background"}`,children:"По левому"}),h.jsx("button",{onClick:()=>A("justify"),className:`px-3 py-1 rounded-md ${V==="justify"?"bg-accent text-white":"bg-background"}`,children:"По ширине"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Красная строка"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>x(0),className:`px-3 py-1 rounded-md ${E===0?"bg-accent text-white":"bg-background"}`,children:"Нет"}),h.jsx("button",{onClick:()=>x(1.5),className:`px-3 py-1 rounded-md ${E===1.5?"bg-accent text-white":"bg-background"}`,children:"Да"}),h.jsx("button",{onClick:()=>x(3),className:`px-3 py-1 rounded-md ${E===3?"bg-accent text-white":"bg-background"}`,children:"Большая"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Отступ абзаца"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>U(-.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"-"}),h.jsx("span",{children:D.toFixed(1)}),h.jsx("button",{onClick:()=>U(.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"+"})]})]})]})]})}),Vs&&h.jsx(vg,{onClose:()=>ni(!1),onSelectPlan:Ql}),wn&&h.jsx(Eg,{onClose:()=>vr(null),onSelectMethod:$a,plan:wn})]})},ZO=({novels:t,onSelectNovel:e,bookmarks:n,onToggleBookmark:i})=>h.jsxs("div",{children:[h.jsx(Wn,{title:"Закладки"}),h.jsx(_g,{novels:t,onSelectNovel:e,bookmarks:n,onToggleBookmark:i})]}),WO=({user:t,subscription:e,onGetSubscriptionClick:n,userId:i,auth:s,onThemeToggle:r,currentTheme:a,onShowHelp:l})=>{const u=()=>{p4(s).catch(_=>{console.error("Ошибка выхода:",_)})},f=()=>{i&&navigator.clipboard.writeText(i).then(()=>console.log("Firebase UID скопирован в буфер обмена")).catch(_=>console.error("Не удалось скопировать UID: ",_))},g=e&&e.expires_at&&typeof e.expires_at.toDate=="function"?e.expires_at.toDate():null,p=g&&g>new Date;return h.jsxs("div",{children:[h.jsx(Wn,{title:"Профиль"}),h.jsx("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-bold text-lg",children:(t==null?void 0:t.displayName)||"Аноним"}),h.jsx("p",{className:"text-sm text-text-main/70",children:t==null?void 0:t.email})]}),h.jsx("button",{onClick:u,className:"p-2 rounded-full hover:bg-background transition-colors",children:h.jsx(LO,{})})]})}),h.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[h.jsx("h3",{className:"font-bold mb-2",children:"Настройки"}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Тёмная тема"}),h.jsx("button",{onClick:r,className:"w-14 h-7 rounded-full bg-background flex items-center transition-colors p-1",children:h.jsx("div",{className:`w-5 h-5 rounded-full bg-accent shadow-md transform transition-transform ${a==="dark"?"translate-x-7":""}`})})]})]}),h.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[h.jsx("h3",{className:"font-bold mb-2",children:"Подписка"}),p?h.jsxs("div",{children:[h.jsx("p",{className:"text-green-500",children:"Активна"}),h.jsxs("p",{className:"text-sm opacity-70",children:["Заканчивается: ",g.toLocaleDateString()]})]}):h.jsxs("div",{children:[h.jsx("p",{className:"text-red-500",children:"Неактивна"}),h.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Оформите подписку, чтобы получить доступ ко всем платным главам."}),h.jsx("button",{onClick:n,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:"Оформить подписку"})]})]}),h.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[h.jsx("h3",{className:"font-bold mb-2",children:"Ваш ID для привязки"}),h.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Этот ID нужен для связи вашего аккаунта с Telegram-ботом. Например, после подписки на Boosty."}),h.jsx("div",{className:"bg-background p-2 rounded-md text-xs break-all mb-3",children:h.jsx("code",{children:i||"Загрузка..."})}),h.jsx("button",{onClick:f,disabled:!i,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold transition-all hover:scale-105 disabled:opacity-50",children:"Копировать ID"})]}),h.jsx("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4",children:h.jsx("button",{onClick:l,className:"w-full text-left text-sm text-accent hover:underline",children:"Справка и правовая информация"})})]})},JO=({novels:t,onSelectNovel:e,bookmarks:n,onToggleBookmark:i})=>{const[s,r]=L.useState(""),a=L.useMemo(()=>t.filter(l=>l.title.toLowerCase().includes(s.toLowerCase())),[t,s]);return h.jsxs("div",{children:[h.jsx(Wn,{title:"Поиск"}),h.jsx("div",{className:"p-4",children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:h.jsx(BA,{className:"text-text-main opacity-50"})}),h.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:s,onChange:l=>r(l.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent"})]})}),s&&a.length===0?h.jsx("p",{className:"text-center text-text-main opacity-70 mt-8",children:"Ничего не найдено"}):h.jsx(_g,{novels:a,onSelectNovel:e,bookmarks:n,onToggleBookmark:i})]})};function eV(){const{user:t,loading:e}=UA(),[n,i]=L.useState(localStorage.getItem("theme")||"light"),[s,r]=L.useState("list"),[a,l]=L.useState("library"),[u,f]=L.useState([]),[m,g]=L.useState(null),[p,_]=L.useState(null),[C,O]=L.useState(null),[V,A]=L.useState(null),[E,x]=L.useState(!1),[D,U]=L.useState([]),[F,T]=L.useState(!0),[v,b]=L.useState({}),[S,R]=L.useState([]),[I,w]=L.useState(!0),[Z,fe]=L.useState(!1),[z,Y]=L.useState(null),[$,ge]=L.useState(null),[be,Wt]=L.useState(!1),[nt,Se]=L.useState(!1),[Ye,Tt]=L.useState(()=>{const Q=localStorage.getItem("readingSettings"),se={fontSize:16,fontFamily:"'JetBrains Mono', monospace",lineHeight:1.6,textAlign:"left",textIndent:1.5,paragraphSpacing:1};return Q?{...se,...JSON.parse(Q)}:se}),Os="tenebrisverbot",it=t==null?void 0:t.uid;L.useEffect(()=>{window.document.documentElement.classList.toggle("dark",n==="dark"),localStorage.setItem("theme",n)},[n]),L.useEffect(()=>{localStorage.setItem("readingSettings",JSON.stringify(Ye))},[Ye]),L.useEffect(()=>{if(e)return;if(!t){w(!1),f([]),A(null),R([]),b({}),Se(!1);return}w(!0);const Q=async()=>{try{const Ee=(await Fc(hm(at,"novels"))).docs.map(Jt=>({...Jt.data(),id:Jt.id})),Ie=await Fc(hm(at,"novel_stats")),xn=new Map;Ie.forEach(Jt=>xn.set(Jt.id,Jt.data().views));const Er=Ee.map(Jt=>({...Jt,views:xn.get(Jt.id)||0}));f(Er)}catch(je){console.error("Ошибка загрузки новелл или статистики:",je),f([])}},se=async()=>{try{const je=await t.getIdTokenResult();x(!!je.claims.admin)}catch(je){console.error("Ошибка проверки статуса администратора:",je),x(!1)}};Promise.all([Q(),se()]).finally(()=>{w(!1)});const De=At(at,"users",t.uid),$e=tD(De,je=>{if(je.exists()){const Ee=je.data();A(Ee.subscription||null),b(Ee.lastRead||{}),R(Ee.bookmarks||[]),Ee.settings&&Tt(Ie=>({...Ie,...Ee.settings})),Ee.policyAccepted?Se(!1):Se(!0)}else Se(!0)},je=>{console.error("Ошибка подписки на данные пользователя:",je)});return()=>$e()},[t,e]),L.useEffect(()=>{if(!m){U([]);return}T(!0),(async()=>{try{const se=At(at,"chapter_info",m.id),De=await Pr(se);if(De.exists()&&De.data()){const je=De.data().chapters||{},Ee=Object.keys(je).map(Ie=>({id:parseInt(Ie),title:`Глава ${Ie}`,isPaid:je[Ie].isPaid||!1,published_at:je[Ie].published_at||null})).sort((Ie,xn)=>Ie.id-xn.id);U(Ee)}else U([])}catch(se){console.error("Ошибка загрузки глав:",se),U([])}finally{T(!1)}})()},[m]);const An=L.useCallback(()=>{s==="reader"?(_(null),r("details")):s==="details"&&(g(null),O(null),r("list"))},[s]);L.useEffect(()=>{var se;const Q=(se=window.Telegram)==null?void 0:se.WebApp;if(Q)return Q.ready(),Q.expand(),Q.onEvent("backButtonClicked",An),s==="list"||nt?Q.BackButton.hide():Q.BackButton.show(),()=>Q.offEvent("backButtonClicked",An)},[s,An,nt]);const Gt=L.useCallback(async Q=>{it&&await dl(At(at,"users",it),Q,{merge:!0})},[it]),Vi=()=>i(Q=>Q==="light"?"dark":"light"),Ot=L.useCallback((Q,se)=>{Tt(De=>{const $e=typeof se=="function"?se(De[Q]):se;if(Q==="fontSize"&&($e<12||$e>28)||(Q==="lineHeight"||Q==="paragraphSpacing")&&($e<1||$e>2.5))return De;const je={...De,[Q]:$e};return Gt({settings:je}),je})},[Gt]),Mi=L.useCallback(async Q=>{if(_(Q),r("reader"),it&&m){const se={...v,[m.id]:{novelId:m.id,chapterId:Q.id,timestamp:new Date().toISOString()}};b(se),await Gt({lastRead:se})}},[it,m,v,Gt]),Mn=Q=>{g(Q),r("details")},Vs=Q=>{O(Q),r("list"),l("library")},ni=()=>O(null),wn=L.useCallback(async Q=>{const se=S.includes(Q)?S.filter(De=>De!==Q):[...S,Q];R(se),await Gt({bookmarks:se})},[S,Gt]),vr=Q=>{Y(Q),fe(!1)},Ya=async Q=>{var De;const se=(De=window.Telegram)==null?void 0:De.WebApp;if(!se||!it||!z){se&&se.showAlert("Произошла ошибка.");return}se.showConfirm("Вы будете перенаправлены в бот для завершения оплаты...",async $e=>{if($e)try{await Gt({pendingSubscription:{...z,method:Q,date:new Date().toISOString()}}),se.openTelegramLink(`https://t.me/${Os}?start=${it}`),se.close()}catch(je){console.error("Ошибка записи в Firebase:",je),se.showAlert("Не удалось сохранить ваш выбор.")}})},kn=async()=>{it&&(await Gt({policyAccepted:!0}),Se(!1))};if(e||I&&!nt)return h.jsx(BO,{});if(t&&nt)return h.jsx(hE,{onAccept:kn});if(be)return h.jsx(hE,{onBack:()=>Wt(!1)});if(!t)return h.jsx(NO,{});const Ms=()=>{if(s==="details")return h.jsx($O,{novel:m,onSelectChapter:Mi,onGenreSelect:Vs,subscription:V,botUsername:Os,userId:it,chapters:D,isLoadingChapters:F,lastReadData:v,onBack:An});if(s==="reader")return h.jsx(XO,{chapter:p,novel:m,userId:it,userName:(t==null?void 0:t.displayName)||"Аноним",allChapters:D,subscription:V,botUsername:Os,onBack:An,isUserAdmin:E,onSelectChapter:Mi,fontSize:Ye.fontSize,onFontSizeChange:Q=>Ot("fontSize",se=>se+Q),fontFamily:Ye.fontFamily,onFontFamilyChange:Q=>Ot("fontFamily",Q),lineHeight:Ye.lineHeight,onLineHeightChange:Q=>Ot("lineHeight",se=>se+Q),textAlign:Ye.textAlign,onTextAlignChange:Q=>Ot("textAlign",Q),textIndent:Ye.textIndent,onTextIndentChange:Q=>Ot("textIndent",Q),paragraphSpacing:Ye.paragraphSpacing,onParagraphSpacingChange:Q=>Ot("paragraphSpacing",se=>se+Q)});switch(a){case"library":return h.jsxs(h.Fragment,{children:[h.jsx(Wn,{title:"Библиотека"}),h.jsx(HO,{onReadMore:ge}),C&&h.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[h.jsxs("p",{className:"text-sm",children:[h.jsx("span",{className:"opacity-70",children:"Жанр:"}),h.jsx("strong",{className:"ml-2",children:C})]}),h.jsx("button",{onClick:ni,className:"text-xs font-bold text-accent hover:underline",children:"Сбросить"})]}),h.jsx(_g,{novels:u.filter(Q=>!C||Q.genres&&Q.genres.includes(C)),onSelectNovel:Mn,bookmarks:S,onToggleBookmark:wn})]});case"search":return h.jsx(JO,{novels:u,onSelectNovel:Mn,bookmarks:S,onToggleBookmark:wn});case"bookmarks":return h.jsx(ZO,{novels:u.filter(Q=>S.includes(Q.id)),onSelectNovel:Mn,bookmarks:S,onToggleBookmark:wn});case"profile":return h.jsx(WO,{user:t,subscription:V,onGetSubscriptionClick:()=>fe(!0),userId:it,auth:pl,onThemeToggle:Vi,currentTheme:n,onShowHelp:()=>Wt(!0)});default:return h.jsx(Wn,{title:"Библиотека"})}};return h.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${E?"":"no-select"}`,children:[h.jsx("div",{className:"pb-20",children:Ms()}),s==="list"&&h.jsx(qO,{activeTab:a,setActiveTab:l}),Z&&h.jsx(vg,{onClose:()=>fe(!1),onSelectPlan:vr}),z&&h.jsx(Eg,{onClose:()=>Y(null),onSelectMethod:Ya,plan:z}),$&&h.jsx(FO,{newsItem:$,onClose:()=>ge(null)})]})}oR.createRoot(document.getElementById("root")).render(h.jsx(bE.StrictMode,{children:h.jsx(IO,{children:h.jsx(eV,{})})}));
