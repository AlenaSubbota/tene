(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var xv={exports:{}},Ac={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O1=Symbol.for("react.transitional.element"),V1=Symbol.for("react.fragment");function Ov(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var s in t)s!=="key"&&(n[s]=t[s])}else n=t;return t=n.ref,{$$typeof:O1,type:e,key:i,ref:t!==void 0?t:null,props:n}}Ac.Fragment=V1;Ac.jsx=Ov;Ac.jsxs=Ov;xv.exports=Ac;var R=xv.exports,Vv={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zd=Symbol.for("react.transitional.element"),M1=Symbol.for("react.portal"),k1=Symbol.for("react.fragment"),P1=Symbol.for("react.strict_mode"),U1=Symbol.for("react.profiler"),L1=Symbol.for("react.consumer"),j1=Symbol.for("react.context"),z1=Symbol.for("react.forward_ref"),B1=Symbol.for("react.suspense"),q1=Symbol.for("react.memo"),Mv=Symbol.for("react.lazy"),Dp=Symbol.iterator;function H1(e){return e===null||typeof e!="object"?null:(e=Dp&&e[Dp]||e["@@iterator"],typeof e=="function"?e:null)}var kv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pv=Object.assign,Uv={};function sa(e,t,n){this.props=e,this.context=t,this.refs=Uv,this.updater=n||kv}sa.prototype.isReactComponent={};sa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Lv(){}Lv.prototype=sa.prototype;function Bd(e,t,n){this.props=e,this.context=t,this.refs=Uv,this.updater=n||kv}var qd=Bd.prototype=new Lv;qd.constructor=Bd;Pv(qd,sa.prototype);qd.isPureReactComponent=!0;var xp=Array.isArray,Vt={H:null,A:null,T:null,S:null,V:null},jv=Object.prototype.hasOwnProperty;function Hd(e,t,n,i,s,r){return n=r.ref,{$$typeof:zd,type:e,key:t,ref:n!==void 0?n:null,props:r}}function G1(e,t){return Hd(e.type,t,void 0,void 0,void 0,e.props)}function Gd(e){return typeof e=="object"&&e!==null&&e.$$typeof===zd}function F1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Op=/\/+/g;function wh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?F1(""+e.key):t.toString(36)}function Vp(){}function Q1(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Vp,Vp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function rr(e,t,n,i,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case zd:case M1:a=!0;break;case Mv:return a=e._init,rr(a(e._payload),t,n,i,s)}}if(a)return s=s(e),a=i===""?"."+wh(e,0):i,xp(s)?(n="",a!=null&&(n=a.replace(Op,"$&/")+"/"),rr(s,t,n,"",function(h){return h})):s!=null&&(Gd(s)&&(s=G1(s,n+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(Op,"$&/")+"/")+a)),t.push(s)),1;a=0;var l=i===""?".":i+":";if(xp(e))for(var u=0;u<e.length;u++)i=e[u],r=l+wh(i,u),a+=rr(i,t,n,r,s);else if(u=H1(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,r=l+wh(i,u++),a+=rr(i,t,n,r,s);else if(r==="object"){if(typeof e.then=="function")return rr(Q1(e),t,n,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function kl(e,t,n){if(e==null)return e;var i=[],s=0;return rr(e,i,"","",function(r){return t.call(n,r,s++)}),i}function $1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Mp=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Y1(){}nt.Children={map:kl,forEach:function(e,t,n){kl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return kl(e,function(){t++}),t},toArray:function(e){return kl(e,function(t){return t})||[]},only:function(e){if(!Gd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=sa;nt.Fragment=k1;nt.Profiler=U1;nt.PureComponent=Bd;nt.StrictMode=P1;nt.Suspense=B1;nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Vt;nt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Vt.H.useMemoCache(e)}};nt.cache=function(e){return function(){return e.apply(null,arguments)}};nt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=Pv({},e.props),s=e.key,r=void 0;if(t!=null)for(a in t.ref!==void 0&&(r=void 0),t.key!==void 0&&(s=""+t.key),t)!jv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Hd(e.type,s,void 0,void 0,r,i)};nt.createContext=function(e){return e={$$typeof:j1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:L1,_context:e},e};nt.createElement=function(e,t,n){var i,s={},r=null;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)jv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=t[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return Hd(e,r,void 0,void 0,null,s)};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:z1,render:e}};nt.isValidElement=Gd;nt.lazy=function(e){return{$$typeof:Mv,_payload:{_status:-1,_result:e},_init:$1}};nt.memo=function(e,t){return{$$typeof:q1,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=Vt.T,n={};Vt.T=n;try{var i=e(),s=Vt.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Y1,Mp)}catch(r){Mp(r)}finally{Vt.T=t}};nt.unstable_useCacheRefresh=function(){return Vt.H.useCacheRefresh()};nt.use=function(e){return Vt.H.use(e)};nt.useActionState=function(e,t,n){return Vt.H.useActionState(e,t,n)};nt.useCallback=function(e,t){return Vt.H.useCallback(e,t)};nt.useContext=function(e){return Vt.H.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e,t){return Vt.H.useDeferredValue(e,t)};nt.useEffect=function(e,t,n){var i=Vt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};nt.useId=function(){return Vt.H.useId()};nt.useImperativeHandle=function(e,t,n){return Vt.H.useImperativeHandle(e,t,n)};nt.useInsertionEffect=function(e,t){return Vt.H.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return Vt.H.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return Vt.H.useMemo(e,t)};nt.useOptimistic=function(e,t){return Vt.H.useOptimistic(e,t)};nt.useReducer=function(e,t,n){return Vt.H.useReducer(e,t,n)};nt.useRef=function(e){return Vt.H.useRef(e)};nt.useState=function(e){return Vt.H.useState(e)};nt.useSyncExternalStore=function(e,t,n){return Vt.H.useSyncExternalStore(e,t,n)};nt.useTransition=function(){return Vt.H.useTransition()};nt.version="19.1.1";Vv.exports=nt;var G=Vv.exports,zv={exports:{}},Sc={},Bv={exports:{}},qv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,K){var $=j.length;j.push(K);t:for(;0<$;){var dt=$-1>>>1,St=j[dt];if(0<s(St,K))j[dt]=K,j[$]=St,$=dt;else break t}}function n(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var K=j[0],$=j.pop();if($!==K){j[0]=$;t:for(var dt=0,St=j.length,Kt=St>>>1;dt<Kt;){var Xt=2*(dt+1)-1,vt=j[Xt],Me=Xt+1,ue=j[Me];if(0>s(vt,$))Me<St&&0>s(ue,vt)?(j[dt]=ue,j[Me]=$,dt=Me):(j[dt]=vt,j[Xt]=$,dt=Xt);else if(Me<St&&0>s(ue,$))j[dt]=ue,j[Me]=$,dt=Me;else break t}}return K}function s(j,K){var $=j.sortIndex-K.sortIndex;return $!==0?$:j.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,_=!1,x=!1,V=!1,k=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function D(j){for(var K=n(h);K!==null;){if(K.callback===null)i(h);else if(K.startTime<=j)i(h),K.sortIndex=K.expirationTime,t(u,K);else break;K=n(h)}}function L(j){if(V=!1,D(j),!x)if(n(u)!==null)x=!0,q||(q=!0,C());else{var K=n(h);K!==null&&Ct(L,K.startTime-j)}}var q=!1,E=-1,y=5,T=-1;function S(){return k?!0:!(e.unstable_now()-T<y)}function I(){if(k=!1,q){var j=e.unstable_now();T=j;var K=!0;try{t:{x=!1,V&&(V=!1,v(E),E=-1),_=!0;var $=m;try{e:{for(D(j),g=n(u);g!==null&&!(g.expirationTime>j&&S());){var dt=g.callback;if(typeof dt=="function"){g.callback=null,m=g.priorityLevel;var St=dt(g.expirationTime<=j);if(j=e.unstable_now(),typeof St=="function"){g.callback=St,D(j),K=!0;break e}g===n(u)&&i(u),D(j)}else i(u);g=n(u)}if(g!==null)K=!0;else{var Kt=n(h);Kt!==null&&Ct(L,Kt.startTime-j),K=!1}}break t}finally{g=null,m=$,_=!1}K=void 0}}finally{K?C():q=!1}}}var C;if(typeof w=="function")C=function(){w(I)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,Q=b.port2;b.port1.onmessage=I,C=function(){Q.postMessage(null)}}else C=function(){A(I,0)};function Ct(j,K){E=A(function(){j(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(j){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var $=m;m=K;try{return j()}finally{m=$}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(j,K){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var $=m;m=j;try{return K()}finally{m=$}},e.unstable_scheduleCallback=function(j,K,$){var dt=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?dt+$:dt):$=dt,j){case 1:var St=-1;break;case 2:St=250;break;case 5:St=1073741823;break;case 4:St=1e4;break;default:St=5e3}return St=$+St,j={id:d++,callback:K,priorityLevel:j,startTime:$,expirationTime:St,sortIndex:-1},$>dt?(j.sortIndex=$,t(h,j),n(u)===null&&j===n(h)&&(V?(v(E),E=-1):V=!0,Ct(L,$-dt))):(j.sortIndex=St,t(u,j),x||_||(x=!0,q||(q=!0,C()))),j},e.unstable_shouldYield=S,e.unstable_wrapCallback=function(j){var K=m;return function(){var $=m;m=K;try{return j.apply(this,arguments)}finally{m=$}}}})(qv);Bv.exports=qv;var K1=Bv.exports,Hv={exports:{}},Ve={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1=G;function Gv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ei(){}var Oe={d:{f:Ei,r:function(){throw Error(Gv(522))},D:Ei,C:Ei,L:Ei,m:Ei,X:Ei,S:Ei,M:Ei},p:0,findDOMNode:null},Z1=Symbol.for("react.portal");function W1(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z1,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Xa=X1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function bc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ve.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Oe;Ve.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Gv(299));return W1(e,t,null,n)};Ve.flushSync=function(e){var t=Xa.T,n=Oe.p;try{if(Xa.T=null,Oe.p=2,e)return e()}finally{Xa.T=t,Oe.p=n,Oe.d.f()}};Ve.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Oe.d.C(e,t))};Ve.prefetchDNS=function(e){typeof e=="string"&&Oe.d.D(e)};Ve.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=bc(n,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Oe.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&Oe.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ve.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=bc(t.as,t.crossOrigin);Oe.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Oe.d.M(e)};Ve.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=bc(n,t.crossOrigin);Oe.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ve.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=bc(t.as,t.crossOrigin);Oe.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Oe.d.m(e)};Ve.requestFormReset=function(e){Oe.d.r(e)};Ve.unstable_batchedUpdates=function(e,t){return e(t)};Ve.useFormState=function(e,t,n){return Xa.H.useFormState(e,t,n)};Ve.useFormStatus=function(){return Xa.H.useHostTransitionStatus()};Ve.version="19.1.1";function Fv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fv)}catch(e){console.error(e)}}Fv(),Hv.exports=Ve;var J1=Hv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var te=K1,Qv=G,tb=J1;function U(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function $v(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ho(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Yv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function kp(e){if(Ho(e)!==e)throw Error(U(188))}function eb(e){var t=e.alternate;if(!t){if(t=Ho(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return kp(s),e;if(r===i)return kp(s),t;r=r.sibling}throw Error(U(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function Kv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Kv(e),t!==null)return t;e=e.sibling}return null}var xt=Object.assign,nb=Symbol.for("react.element"),Pl=Symbol.for("react.transitional.element"),qa=Symbol.for("react.portal"),dr=Symbol.for("react.fragment"),Xv=Symbol.for("react.strict_mode"),_f=Symbol.for("react.profiler"),ib=Symbol.for("react.provider"),Zv=Symbol.for("react.consumer"),$n=Symbol.for("react.context"),Fd=Symbol.for("react.forward_ref"),vf=Symbol.for("react.suspense"),Ef=Symbol.for("react.suspense_list"),Qd=Symbol.for("react.memo"),bi=Symbol.for("react.lazy"),Tf=Symbol.for("react.activity"),sb=Symbol.for("react.memo_cache_sentinel"),Pp=Symbol.iterator;function Ma(e){return e===null||typeof e!="object"?null:(e=Pp&&e[Pp]||e["@@iterator"],typeof e=="function"?e:null)}var rb=Symbol.for("react.client.reference");function Af(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===rb?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case dr:return"Fragment";case _f:return"Profiler";case Xv:return"StrictMode";case vf:return"Suspense";case Ef:return"SuspenseList";case Tf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case qa:return"Portal";case $n:return(e.displayName||"Context")+".Provider";case Zv:return(e._context.displayName||"Context")+".Consumer";case Fd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qd:return t=e.displayName||null,t!==null?t:Af(e.type)||"Memo";case bi:t=e._payload,e=e._init;try{return Af(e(t))}catch{}}return null}var Ha=Array.isArray,Z=Qv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pt=tb.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Rs={pending:!1,data:null,method:null,action:null},Sf=[],mr=-1;function Ln(e){return{current:e}}function oe(e){0>mr||(e.current=Sf[mr],Sf[mr]=null,mr--)}function Mt(e,t){mr++,Sf[mr]=e.current,e.current=t}var Nn=Ln(null),vo=Ln(null),ji=Ln(null),wu=Ln(null);function Ru(e,t){switch(Mt(ji,t),Mt(vo,e),Mt(Nn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?By(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=By(t),e=m0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}oe(Nn),Mt(Nn,e)}function zr(){oe(Nn),oe(vo),oe(ji)}function bf(e){e.memoizedState!==null&&Mt(wu,e);var t=Nn.current,n=m0(t,e.type);t!==n&&(Mt(vo,e),Mt(Nn,n))}function Iu(e){vo.current===e&&(oe(Nn),oe(vo)),wu.current===e&&(oe(wu),No._currentValue=Rs)}var wf=Object.prototype.hasOwnProperty,$d=te.unstable_scheduleCallback,Rh=te.unstable_cancelCallback,ab=te.unstable_shouldYield,ob=te.unstable_requestPaint,Dn=te.unstable_now,lb=te.unstable_getCurrentPriorityLevel,Wv=te.unstable_ImmediatePriority,Jv=te.unstable_UserBlockingPriority,Cu=te.unstable_NormalPriority,ub=te.unstable_LowPriority,tE=te.unstable_IdlePriority,cb=te.log,hb=te.unstable_setDisableYieldValue,Go=null,Ze=null;function Mi(e){if(typeof cb=="function"&&hb(e),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(Go,e)}catch{}}var We=Math.clz32?Math.clz32:mb,fb=Math.log,db=Math.LN2;function mb(e){return e>>>=0,e===0?32:31-(fb(e)/db|0)|0}var Ul=256,Ll=4194304;function Ts(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function wc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var s=0,r=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~r,i!==0?s=Ts(i):(a&=l,a!==0?s=Ts(a):n||(n=l&~e,n!==0&&(s=Ts(n))))):(l=i&~r,l!==0?s=Ts(l):a!==0?s=Ts(a):n||(n=i&~e,n!==0&&(s=Ts(n)))),s===0?0:t!==0&&t!==s&&!(t&r)&&(r=s&-s,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:s}function Fo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function gb(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eE(){var e=Ul;return Ul<<=1,!(Ul&4194048)&&(Ul=256),e}function nE(){var e=Ll;return Ll<<=1,!(Ll&62914560)&&(Ll=4194304),e}function Ih(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function pb(e,t,n,i,s,r){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-We(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&iE(e,i,0),r!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=r&~(a&~t))}function iE(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-We(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function sE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-We(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}function Yd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Kd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function rE(){var e=pt.p;return e!==0?e:(e=window.event,e===void 0?32:b0(e.type))}function yb(e,t){var n=pt.p;try{return pt.p=e,t()}finally{pt.p=n}}var cs=Math.random().toString(36).slice(2),we="__reactFiber$"+cs,je="__reactProps$"+cs,ra="__reactContainer$"+cs,Rf="__reactEvents$"+cs,_b="__reactListeners$"+cs,vb="__reactHandles$"+cs,Up="__reactResources$"+cs,$o="__reactMarker$"+cs;function Xd(e){delete e[we],delete e[je],delete e[Rf],delete e[_b],delete e[vb]}function gr(e){var t=e[we];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ra]||n[we]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Gy(e);e!==null;){if(n=e[we])return n;e=Gy(e)}return t}e=n,n=e.parentNode}return null}function aa(e){if(e=e[we]||e[ra]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Ga(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(U(33))}function Ir(e){var t=e[Up];return t||(t=e[Up]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function se(e){e[$o]=!0}var aE=new Set,oE={};function Hs(e,t){Br(e,t),Br(e+"Capture",t)}function Br(e,t){for(oE[e]=t,e=0;e<t.length;e++)aE.add(t[e])}var Eb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lp={},jp={};function Tb(e){return wf.call(jp,e)?!0:wf.call(Lp,e)?!1:Eb.test(e)?jp[e]=!0:(Lp[e]=!0,!1)}function nu(e,t,n){if(Tb(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function jl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Hn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Ch,zp;function ar(e){if(Ch===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ch=t&&t[1]||"",zp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ch+e+zp}var Nh=!1;function Dh(e,t){if(!e||Nh)return"";Nh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var m=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){m=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){m=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<h.length&&!h[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===h.length)for(i=u.length-1,s=h.length-1;1<=i&&0<=s&&u[i]!==h[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==h[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==h[s]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=s);break}}}finally{Nh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ar(n):""}function Ab(e){switch(e.tag){case 26:case 27:case 5:return ar(e.type);case 16:return ar("Lazy");case 13:return ar("Suspense");case 19:return ar("SuspenseList");case 0:case 15:return Dh(e.type,!1);case 11:return Dh(e.type.render,!1);case 1:return Dh(e.type,!0);case 31:return ar("Activity");default:return""}}function Bp(e){try{var t="";do t+=Ab(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function on(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Sb(e){var t=lE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nu(e){e._valueTracker||(e._valueTracker=Sb(e))}function uE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=lE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Du(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var bb=/[\n"\\]/g;function cn(e){return e.replace(bb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function If(e,t,n,i,s,r,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+on(t)):e.value!==""+on(t)&&(e.value=""+on(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Cf(e,a,on(t)):n!=null?Cf(e,a,on(n)):i!=null&&e.removeAttribute("value"),s==null&&r!=null&&(e.defaultChecked=!!r),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+on(l):e.removeAttribute("name")}function cE(e,t,n,i,s,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;n=n!=null?""+on(n):"",t=t!=null?""+on(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Cf(e,t,n){t==="number"&&Du(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Cr(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+on(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function hE(e,t,n){if(t!=null&&(t=""+on(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+on(n):""}function fE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(U(92));if(Ha(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=on(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function qr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var wb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||wb.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function dE(e,t,n){if(t!=null&&typeof t!="object")throw Error(U(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&qp(e,s,i)}else for(var r in t)t.hasOwnProperty(r)&&qp(e,r,t[r])}function Zd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ib=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function iu(e){return Ib.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Nf=null;function Wd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pr=null,Nr=null;function Hp(e){var t=aa(e);if(t&&(e=t.stateNode)){var n=e[je]||null;t:switch(e=t.stateNode,t.type){case"input":if(If(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+cn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[je]||null;if(!s)throw Error(U(90));If(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&uE(i)}break t;case"textarea":hE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Cr(e,!!n.multiple,t,!1)}}}var xh=!1;function mE(e,t,n){if(xh)return e(t,n);xh=!0;try{var i=e(t);return i}finally{if(xh=!1,(pr!==null||Nr!==null)&&(kc(),pr&&(t=pr,e=Nr,Nr=pr=null,Hp(t),e)))for(t=0;t<e.length;t++)Hp(e[t])}}function Eo(e,t){var n=e.stateNode;if(n===null)return null;var i=n[je]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Df=!1;if(ii)try{var ka={};Object.defineProperty(ka,"passive",{get:function(){Df=!0}}),window.addEventListener("test",ka,ka),window.removeEventListener("test",ka,ka)}catch{Df=!1}var ki=null,Jd=null,su=null;function gE(){if(su)return su;var e,t=Jd,n=t.length,i,s="value"in ki?ki.value:ki.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===s[r-i];i++);return su=s.slice(e,1<i?1-i:void 0)}function ru(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zl(){return!0}function Gp(){return!1}function ze(e){function t(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?zl:Gp,this.isPropagationStopped=Gp,this}return xt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),t}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rc=ze(Gs),Yo=xt({},Gs,{view:0,detail:0}),Cb=ze(Yo),Oh,Vh,Pa,Ic=xt({},Yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pa&&(Pa&&e.type==="mousemove"?(Oh=e.screenX-Pa.screenX,Vh=e.screenY-Pa.screenY):Vh=Oh=0,Pa=e),Oh)},movementY:function(e){return"movementY"in e?e.movementY:Vh}}),Fp=ze(Ic),Nb=xt({},Ic,{dataTransfer:0}),Db=ze(Nb),xb=xt({},Yo,{relatedTarget:0}),Mh=ze(xb),Ob=xt({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),Vb=ze(Ob),Mb=xt({},Gs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kb=ze(Mb),Pb=xt({},Gs,{data:0}),Qp=ze(Pb),Ub={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jb[e])?!!t[e]:!1}function tm(){return zb}var Bb=xt({},Yo,{key:function(e){if(e.key){var t=Ub[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ru(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tm,charCode:function(e){return e.type==="keypress"?ru(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ru(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qb=ze(Bb),Hb=xt({},Ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$p=ze(Hb),Gb=xt({},Yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tm}),Fb=ze(Gb),Qb=xt({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),$b=ze(Qb),Yb=xt({},Ic,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kb=ze(Yb),Xb=xt({},Gs,{newState:0,oldState:0}),Zb=ze(Xb),Wb=[9,13,27,32],em=ii&&"CompositionEvent"in window,Za=null;ii&&"documentMode"in document&&(Za=document.documentMode);var Jb=ii&&"TextEvent"in window&&!Za,pE=ii&&(!em||Za&&8<Za&&11>=Za),Yp=" ",Kp=!1;function yE(e,t){switch(e){case"keyup":return Wb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _E(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yr=!1;function tw(e,t){switch(e){case"compositionend":return _E(t);case"keypress":return t.which!==32?null:(Kp=!0,Yp);case"textInput":return e=t.data,e===Yp&&Kp?null:e;default:return null}}function ew(e,t){if(yr)return e==="compositionend"||!em&&yE(e,t)?(e=gE(),su=Jd=ki=null,yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pE&&t.locale!=="ko"?null:t.data;default:return null}}var nw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nw[e.type]:t==="textarea"}function vE(e,t,n,i){pr?Nr?Nr.push(i):Nr=[i]:pr=i,t=Yu(t,"onChange"),0<t.length&&(n=new Rc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Wa=null,To=null;function iw(e){h0(e,0)}function Cc(e){var t=Ga(e);if(uE(t))return e}function Zp(e,t){if(e==="change")return t}var EE=!1;if(ii){var kh;if(ii){var Ph="oninput"in document;if(!Ph){var Wp=document.createElement("div");Wp.setAttribute("oninput","return;"),Ph=typeof Wp.oninput=="function"}kh=Ph}else kh=!1;EE=kh&&(!document.documentMode||9<document.documentMode)}function Jp(){Wa&&(Wa.detachEvent("onpropertychange",TE),To=Wa=null)}function TE(e){if(e.propertyName==="value"&&Cc(To)){var t=[];vE(t,To,e,Wd(e)),mE(iw,t)}}function sw(e,t,n){e==="focusin"?(Jp(),Wa=t,To=n,Wa.attachEvent("onpropertychange",TE)):e==="focusout"&&Jp()}function rw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cc(To)}function aw(e,t){if(e==="click")return Cc(t)}function ow(e,t){if(e==="input"||e==="change")return Cc(t)}function lw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rn=typeof Object.is=="function"?Object.is:lw;function Ao(e,t){if(rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!wf.call(t,s)||!rn(e[s],t[s]))return!1}return!0}function ty(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ey(e,t){var n=ty(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=ty(n)}}function AE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?AE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function SE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Du(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Du(e.document)}return t}function nm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var uw=ii&&"documentMode"in document&&11>=document.documentMode,_r=null,xf=null,Ja=null,Of=!1;function ny(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Of||_r==null||_r!==Du(i)||(i=_r,"selectionStart"in i&&nm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ja&&Ao(Ja,i)||(Ja=i,i=Yu(xf,"onSelect"),0<i.length&&(t=new Rc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=_r)))}function Es(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vr={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionrun:Es("Transition","TransitionRun"),transitionstart:Es("Transition","TransitionStart"),transitioncancel:Es("Transition","TransitionCancel"),transitionend:Es("Transition","TransitionEnd")},Uh={},bE={};ii&&(bE=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function Fs(e){if(Uh[e])return Uh[e];if(!vr[e])return e;var t=vr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bE)return Uh[e]=t[n];return e}var wE=Fs("animationend"),RE=Fs("animationiteration"),IE=Fs("animationstart"),cw=Fs("transitionrun"),hw=Fs("transitionstart"),fw=Fs("transitioncancel"),CE=Fs("transitionend"),NE=new Map,Vf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vf.push("scrollEnd");function Sn(e,t){NE.set(e,t),Hs(t,[e])}var iy=new WeakMap;function hn(e,t){if(typeof e=="object"&&e!==null){var n=iy.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Bp(t)},iy.set(e,t),t)}return{value:e,source:t,stack:Bp(t)}}var an=[],Er=0,im=0;function Nc(){for(var e=Er,t=im=Er=0;t<e;){var n=an[t];an[t++]=null;var i=an[t];an[t++]=null;var s=an[t];an[t++]=null;var r=an[t];if(an[t++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&DE(n,s,r)}}function Dc(e,t,n,i){an[Er++]=e,an[Er++]=t,an[Er++]=n,an[Er++]=i,im|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function sm(e,t,n,i){return Dc(e,t,n,i),xu(e)}function oa(e,t){return Dc(e,null,null,t),xu(e)}function DE(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=e.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(s=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,s&&t!==null&&(s=31-We(n),e=r.hiddenUpdates,i=e[s],i===null?e[s]=[t]:i.push(t),t.lane=n|536870912),r):null}function xu(e){if(50<uo)throw uo=0,td=null,Error(U(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Tr={};function dw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ye(e,t,n,i){return new dw(e,t,n,i)}function rm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ti(e,t){var n=e.alternate;return n===null?(n=Ye(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function xE(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function au(e,t,n,i,s,r){var a=0;if(i=e,typeof e=="function")rm(e)&&(a=1);else if(typeof e=="string")a=gR(e,n,Nn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Tf:return e=Ye(31,n,t,s),e.elementType=Tf,e.lanes=r,e;case dr:return Is(n.children,s,r,t);case Xv:a=8,s|=24;break;case _f:return e=Ye(12,n,t,s|2),e.elementType=_f,e.lanes=r,e;case vf:return e=Ye(13,n,t,s),e.elementType=vf,e.lanes=r,e;case Ef:return e=Ye(19,n,t,s),e.elementType=Ef,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ib:case $n:a=10;break t;case Zv:a=9;break t;case Fd:a=11;break t;case Qd:a=14;break t;case bi:a=16,i=null;break t}a=29,n=Error(U(130,e===null?"null":typeof e,"")),i=null}return t=Ye(a,n,t,s),t.elementType=e,t.type=i,t.lanes=r,t}function Is(e,t,n,i){return e=Ye(7,e,i,t),e.lanes=n,e}function Lh(e,t,n){return e=Ye(6,e,null,t),e.lanes=n,e}function jh(e,t,n){return t=Ye(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ar=[],Sr=0,Ou=null,Vu=0,ln=[],un=0,Cs=null,Yn=1,Kn="";function As(e,t){Ar[Sr++]=Vu,Ar[Sr++]=Ou,Ou=e,Vu=t}function OE(e,t,n){ln[un++]=Yn,ln[un++]=Kn,ln[un++]=Cs,Cs=e;var i=Yn;e=Kn;var s=32-We(i)-1;i&=~(1<<s),n+=1;var r=32-We(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Yn=1<<32-We(t)+s|n<<s|i,Kn=r+e}else Yn=1<<r|n<<s|i,Kn=e}function am(e){e.return!==null&&(As(e,1),OE(e,1,0))}function om(e){for(;e===Ou;)Ou=Ar[--Sr],Ar[Sr]=null,Vu=Ar[--Sr],Ar[Sr]=null;for(;e===Cs;)Cs=ln[--un],ln[un]=null,Kn=ln[--un],ln[un]=null,Yn=ln[--un],ln[un]=null}var De=null,jt=null,gt=!1,Ns=null,In=!1,Mf=Error(U(519));function Vs(e){var t=Error(U(418,""));throw So(hn(t,e)),Mf}function sy(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[we]=e,t[je]=i,n){case"dialog":st("cancel",t),st("close",t);break;case"iframe":case"object":case"embed":st("load",t);break;case"video":case"audio":for(n=0;n<Ro.length;n++)st(Ro[n],t);break;case"source":st("error",t);break;case"img":case"image":case"link":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"input":st("invalid",t),cE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Nu(t);break;case"select":st("invalid",t);break;case"textarea":st("invalid",t),fE(t,i.value,i.defaultValue,i.children),Nu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||d0(t.textContent,n)?(i.popover!=null&&(st("beforetoggle",t),st("toggle",t)),i.onScroll!=null&&st("scroll",t),i.onScrollEnd!=null&&st("scrollend",t),i.onClick!=null&&(t.onclick=Lc),t=!0):t=!1,t||Vs(e)}function ry(e){for(De=e.return;De;)switch(De.tag){case 5:case 13:In=!1;return;case 27:case 3:In=!0;return;default:De=De.return}}function Ua(e){if(e!==De)return!1;if(!gt)return ry(e),gt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||ad(e.type,e.memoizedProps)),n=!n),n&&jt&&Vs(e),ry(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){jt=Tn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}jt=null}}else t===27?(t=jt,hs(e.type)?(e=ud,ud=null,jt=e):jt=t):jt=De?Tn(e.stateNode.nextSibling):null;return!0}function Ko(){jt=De=null,gt=!1}function ay(){var e=Ns;return e!==null&&(Ue===null?Ue=e:Ue.push.apply(Ue,e),Ns=null),e}function So(e){Ns===null?Ns=[e]:Ns.push(e)}var kf=Ln(null),Qs=null,Xn=null;function Ri(e,t,n){Mt(kf,t._currentValue),t._currentValue=n}function ei(e){e._currentValue=kf.current,oe(kf)}function Pf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Uf(e,t,n,i){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;t:for(;r!==null;){var l=r;r=s;for(var u=0;u<t.length;u++)if(l.context===t[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),Pf(r.return,n,e),i||(a=null);break t}r=l.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(U(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),Pf(a,n,e),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function Xo(e,t,n,i){e=null;for(var s=t,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(U(387));if(a=a.memoizedProps,a!==null){var l=s.type;rn(s.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(s===wu.current){if(a=s.alternate,a===null)throw Error(U(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(No):e=[No])}s=s.return}e!==null&&Uf(t,e,n,i),t.flags|=262144}function Mu(e){for(e=e.firstContext;e!==null;){if(!rn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ms(e){Qs=e,Xn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Re(e){return VE(Qs,e)}function Bl(e,t){return Qs===null&&Ms(e),VE(e,t)}function VE(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Xn===null){if(e===null)throw Error(U(308));Xn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Xn=Xn.next=t;return n}var mw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},gw=te.unstable_scheduleCallback,pw=te.unstable_NormalPriority,Zt={$$typeof:$n,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lm(){return{controller:new mw,data:new Map,refCount:0}}function Zo(e){e.refCount--,e.refCount===0&&gw(pw,function(){e.controller.abort()})}var to=null,Lf=0,Hr=0,Dr=null;function yw(e,t){if(to===null){var n=to=[];Lf=0,Hr=xm(),Dr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Lf++,t.then(oy,oy),t}function oy(){if(--Lf===0&&to!==null){Dr!==null&&(Dr.status="fulfilled");var e=to;to=null,Hr=0,Dr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function _w(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var ly=Z.S;Z.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&yw(e,t),ly!==null&&ly(e,t)};var Ds=Ln(null);function um(){var e=Ds.current;return e!==null?e:It.pooledCache}function ou(e,t){t===null?Mt(Ds,Ds.current):Mt(Ds,t.pool)}function ME(){var e=um();return e===null?null:{parent:Zt._currentValue,pool:e}}var Wo=Error(U(460)),kE=Error(U(474)),xc=Error(U(542)),jf={then:function(){}};function uy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ql(){}function PE(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ql,ql),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,hy(e),e;default:if(typeof t.status=="string")t.then(ql,ql);else{if(e=It,e!==null&&100<e.shellSuspendCounter)throw Error(U(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=i}},function(i){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,hy(e),e}throw eo=t,Wo}}var eo=null;function cy(){if(eo===null)throw Error(U(459));var e=eo;return eo=null,e}function hy(e){if(e===Wo||e===xc)throw Error(U(483))}var wi=!1;function cm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function zi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Bi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,_t&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=xu(e),DE(e,null,n),t}return Dc(e,i,t,n),xu(e)}function no(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,sE(e,n)}}function zh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Bf=!1;function io(){if(Bf){var e=Dr;if(e!==null)throw e}}function so(e,t,n,i){Bf=!1;var s=e.updateQueue;wi=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?r=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(r!==null){var g=s.baseState;a=0,d=h=u=null,l=r;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(ct&m)===m:(i&m)===m){m!==0&&m===Hr&&(Bf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var x=e,V=l;m=t;var k=n;switch(V.tag){case 1:if(x=V.payload,typeof x=="function"){g=x.call(k,g,m);break t}g=x;break t;case 3:x.flags=x.flags&-65537|128;case 0:if(x=V.payload,m=typeof x=="function"?x.call(k,g,m):x,m==null)break t;g=xt({},g,m);break t;case 2:wi=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=s.callbacks,_===null?s.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=g):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);d===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=d,r===null&&(s.shared.lanes=0),ns|=a,e.lanes=a,e.memoizedState=g}}function UE(e,t){if(typeof e!="function")throw Error(U(191,e));e.call(t)}function LE(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)UE(n[e],t)}var Gr=Ln(null),ku=Ln(0);function fy(e,t){e=ai,Mt(ku,e),Mt(Gr,t),ai=e|t.baseLanes}function qf(){Mt(ku,ai),Mt(Gr,Gr.current)}function hm(){ai=ku.current,oe(Gr),oe(ku)}var ts=0,it=null,Tt=null,Ft=null,Pu=!1,xr=!1,ks=!1,Uu=0,bo=0,Or=null,vw=0;function Bt(){throw Error(U(321))}function fm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rn(e[n],t[n]))return!1;return!0}function dm(e,t,n,i,s,r){return ts=r,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Z.H=e===null||e.memoizedState===null?gT:pT,ks=!1,r=n(i,s),ks=!1,xr&&(r=zE(t,n,i,s)),jE(e),r}function jE(e){Z.H=Lu;var t=Tt!==null&&Tt.next!==null;if(ts=0,Ft=Tt=it=null,Pu=!1,bo=0,Or=null,t)throw Error(U(300));e===null||ae||(e=e.dependencies,e!==null&&Mu(e)&&(ae=!0))}function zE(e,t,n,i){it=e;var s=0;do{if(xr&&(Or=null),bo=0,xr=!1,25<=s)throw Error(U(301));if(s+=1,Ft=Tt=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}Z.H=Rw,r=t(n,i)}while(xr);return r}function Ew(){var e=Z.H,t=e.useState()[0];return t=typeof t.then=="function"?Jo(t):t,e=e.useState()[0],(Tt!==null?Tt.memoizedState:null)!==e&&(it.flags|=1024),t}function mm(){var e=Uu!==0;return Uu=0,e}function gm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function pm(e){if(Pu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Pu=!1}ts=0,Ft=Tt=it=null,xr=!1,bo=Uu=0,Or=null}function ke(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?it.memoizedState=Ft=e:Ft=Ft.next=e,Ft}function Yt(){if(Tt===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=Tt.next;var t=Ft===null?it.memoizedState:Ft.next;if(t!==null)Ft=t,Tt=e;else{if(e===null)throw it.alternate===null?Error(U(467)):Error(U(310));Tt=e,e={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Ft===null?it.memoizedState=Ft=e:Ft=Ft.next=e}return Ft}function ym(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jo(e){var t=bo;return bo+=1,Or===null&&(Or=[]),e=PE(Or,e,t),t=it,(Ft===null?t.memoizedState:Ft.next)===null&&(t=t.alternate,Z.H=t===null||t.memoizedState===null?gT:pT),e}function Oc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Jo(e);if(e.$$typeof===$n)return Re(e)}throw Error(U(438,String(e)))}function _m(e){var t=null,n=it.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=it.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=ym(),it.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=sb;return t.index++,n}function si(e,t){return typeof t=="function"?t(e):t}function lu(e){var t=Yt();return vm(t,Tt,e)}function vm(e,t,n){var i=e.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var s=e.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}t.baseQueue=s=r,i.pending=null}if(r=e.baseState,s===null)e.memoizedState=r;else{t=s.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(ct&g)===g:(ts&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Hr&&(d=!0);else if((ts&m)===m){h=h.next,m===Hr&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=r):u=u.next=g,it.lanes|=m,ns|=m;g=h.action,ks&&n(r,g),r=h.hasEagerState?h.eagerState:n(r,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=r):u=u.next=m,it.lanes|=g,ns|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=r:u.next=l,!rn(r,e.memoizedState)&&(ae=!0,d&&(n=Dr,n!==null)))throw n;e.memoizedState=r,e.baseState=a,e.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Bh(e){var t=Yt(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=e(r,a.action),a=a.next;while(a!==s);rn(r,t.memoizedState)||(ae=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function BE(e,t,n){var i=it,s=Yt(),r=gt;if(r){if(n===void 0)throw Error(U(407));n=n()}else n=t();var a=!rn((Tt||s).memoizedState,n);a&&(s.memoizedState=n,ae=!0),s=s.queue;var l=GE.bind(null,i,s,e);if(tl(2048,8,l,[e]),s.getSnapshot!==t||a||Ft!==null&&Ft.memoizedState.tag&1){if(i.flags|=2048,Fr(9,Vc(),HE.bind(null,i,s,n,t),null),It===null)throw Error(U(349));r||ts&124||qE(i,t,n)}return n}function qE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=it.updateQueue,t===null?(t=ym(),it.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function HE(e,t,n,i){t.value=n,t.getSnapshot=i,FE(t)&&QE(e)}function GE(e,t,n){return n(function(){FE(t)&&QE(e)})}function FE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rn(e,n)}catch{return!0}}function QE(e){var t=oa(e,2);t!==null&&tn(t,e,2)}function Hf(e){var t=ke();if(typeof e=="function"){var n=e;if(e=n(),ks){Mi(!0);try{n()}finally{Mi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:e},t}function $E(e,t,n,i){return e.baseState=n,vm(e,Tt,typeof i=="function"?i:si)}function Tw(e,t,n,i,s){if(Mc(e))throw Error(U(485));if(e=t.action,e!==null){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};Z.T!==null?n(!0):r.isTransition=!1,i(r),n=t.pending,n===null?(r.next=t.pending=r,YE(t,r)):(r.next=n.next,t.pending=n.next=r)}}function YE(e,t){var n=t.action,i=t.payload,s=e.state;if(t.isTransition){var r=Z.T,a={};Z.T=a;try{var l=n(s,i),u=Z.S;u!==null&&u(a,l),dy(e,t,l)}catch(h){Gf(e,t,h)}finally{Z.T=r}}else try{r=n(s,i),dy(e,t,r)}catch(h){Gf(e,t,h)}}function dy(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){my(e,t,i)},function(i){return Gf(e,t,i)}):my(e,t,n)}function my(e,t,n){t.status="fulfilled",t.value=n,KE(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,YE(e,n)))}function Gf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,KE(t),t=t.next;while(t!==i)}e.action=null}function KE(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function XE(e,t){return t}function gy(e,t){if(gt){var n=It.formState;if(n!==null){t:{var i=it;if(gt){if(jt){e:{for(var s=jt,r=In;s.nodeType!==8;){if(!r){s=null;break e}if(s=Tn(s.nextSibling),s===null){s=null;break e}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){jt=Tn(s.nextSibling),i=s.data==="F!";break t}}Vs(i)}i=!1}i&&(t=n[0])}}return n=ke(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:XE,lastRenderedState:t},n.queue=i,n=fT.bind(null,it,i),i.dispatch=n,i=Hf(!1),r=Sm.bind(null,it,!1,i.queue),i=ke(),s={state:t,dispatch:null,action:e,pending:null},i.queue=s,n=Tw.bind(null,it,s,r,n),s.dispatch=n,i.memoizedState=e,[t,n,!1]}function py(e){var t=Yt();return ZE(t,Tt,e)}function ZE(e,t,n){if(t=vm(e,t,XE)[0],e=lu(si)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Jo(t)}catch(a){throw a===Wo?xc:a}else i=t;t=Yt();var s=t.queue,r=s.dispatch;return n!==t.memoizedState&&(it.flags|=2048,Fr(9,Vc(),Aw.bind(null,s,n),null)),[i,r,e]}function Aw(e,t){e.action=t}function yy(e){var t=Yt(),n=Tt;if(n!==null)return ZE(t,n,e);Yt(),t=t.memoizedState,n=Yt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Fr(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=it.updateQueue,t===null&&(t=ym(),it.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Vc(){return{destroy:void 0,resource:void 0}}function WE(){return Yt().memoizedState}function uu(e,t,n,i){var s=ke();i=i===void 0?null:i,it.flags|=e,s.memoizedState=Fr(1|t,Vc(),n,i)}function tl(e,t,n,i){var s=Yt();i=i===void 0?null:i;var r=s.memoizedState.inst;Tt!==null&&i!==null&&fm(i,Tt.memoizedState.deps)?s.memoizedState=Fr(t,r,n,i):(it.flags|=e,s.memoizedState=Fr(1|t,r,n,i))}function _y(e,t){uu(8390656,8,e,t)}function JE(e,t){tl(2048,8,e,t)}function tT(e,t){return tl(4,2,e,t)}function eT(e,t){return tl(4,4,e,t)}function nT(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iT(e,t,n){n=n!=null?n.concat([e]):null,tl(4,4,nT.bind(null,t,e),n)}function Em(){}function sT(e,t){var n=Yt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&fm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function rT(e,t){var n=Yt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&fm(t,i[1]))return i[0];if(i=e(),ks){Mi(!0);try{e()}finally{Mi(!1)}}return n.memoizedState=[i,t],i}function Tm(e,t,n){return n===void 0||ts&1073741824?e.memoizedState=t:(e.memoizedState=n,e=KT(),it.lanes|=e,ns|=e,n)}function aT(e,t,n,i){return rn(n,t)?n:Gr.current!==null?(e=Tm(e,n,i),rn(e,t)||(ae=!0),e):ts&42?(e=KT(),it.lanes|=e,ns|=e,t):(ae=!0,e.memoizedState=n)}function oT(e,t,n,i,s){var r=pt.p;pt.p=r!==0&&8>r?r:8;var a=Z.T,l={};Z.T=l,Sm(e,!1,t,n);try{var u=s(),h=Z.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=_w(u,i);ro(e,t,d,Je(e))}else ro(e,t,i,Je(e))}catch(g){ro(e,t,{then:function(){},status:"rejected",reason:g},Je())}finally{pt.p=r,Z.T=a}}function Sw(){}function Ff(e,t,n,i){if(e.tag!==5)throw Error(U(476));var s=lT(e).queue;oT(e,s,t,Rs,n===null?Sw:function(){return uT(e),n(i)})}function lT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Rs,baseState:Rs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:Rs},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function uT(e){var t=lT(e).next.queue;ro(e,t,{},Je())}function Am(){return Re(No)}function cT(){return Yt().memoizedState}function hT(){return Yt().memoizedState}function bw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Je();e=zi(n);var i=Bi(t,e,n);i!==null&&(tn(i,t,n),no(i,t,n)),t={cache:lm()},e.payload=t;return}t=t.return}}function ww(e,t,n){var i=Je();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Mc(e)?dT(t,n):(n=sm(e,t,n,i),n!==null&&(tn(n,e,i),mT(n,t,i)))}function fT(e,t,n){var i=Je();ro(e,t,n,i)}function ro(e,t,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mc(e))dT(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var a=t.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,rn(l,a))return Dc(e,t,s,0),It===null&&Nc(),!1}catch{}finally{}if(n=sm(e,t,s,i),n!==null)return tn(n,e,i),mT(n,t,i),!0}return!1}function Sm(e,t,n,i){if(i={lane:2,revertLane:xm(),action:i,hasEagerState:!1,eagerState:null,next:null},Mc(e)){if(t)throw Error(U(479))}else t=sm(e,n,i,2),t!==null&&tn(t,e,2)}function Mc(e){var t=e.alternate;return e===it||t!==null&&t===it}function dT(e,t){xr=Pu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,sE(e,n)}}var Lu={readContext:Re,use:Oc,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt},gT={readContext:Re,use:Oc,useCallback:function(e,t){return ke().memoizedState=[e,t===void 0?null:t],e},useContext:Re,useEffect:_y,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,uu(4194308,4,nT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return uu(4194308,4,e,t)},useInsertionEffect:function(e,t){uu(4,2,e,t)},useMemo:function(e,t){var n=ke();t=t===void 0?null:t;var i=e();if(ks){Mi(!0);try{e()}finally{Mi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ke();if(n!==void 0){var s=n(t);if(ks){Mi(!0);try{n(t)}finally{Mi(!1)}}}else s=t;return i.memoizedState=i.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},i.queue=e,e=e.dispatch=ww.bind(null,it,e),[i.memoizedState,e]},useRef:function(e){var t=ke();return e={current:e},t.memoizedState=e},useState:function(e){e=Hf(e);var t=e.queue,n=fT.bind(null,it,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Em,useDeferredValue:function(e,t){var n=ke();return Tm(n,e,t)},useTransition:function(){var e=Hf(!1);return e=oT.bind(null,it,e.queue,!0,!1),ke().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=it,s=ke();if(gt){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),It===null)throw Error(U(349));ct&124||qE(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,_y(GE.bind(null,i,r,e),[e]),i.flags|=2048,Fr(9,Vc(),HE.bind(null,i,r,n,t),null),n},useId:function(){var e=ke(),t=It.identifierPrefix;if(gt){var n=Kn,i=Yn;n=(i&~(1<<32-We(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=Uu++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=vw++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Am,useFormState:gy,useActionState:gy,useOptimistic:function(e){var t=ke();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Sm.bind(null,it,!0,n),n.dispatch=t,[e,t]},useMemoCache:_m,useCacheRefresh:function(){return ke().memoizedState=bw.bind(null,it)}},pT={readContext:Re,use:Oc,useCallback:sT,useContext:Re,useEffect:JE,useImperativeHandle:iT,useInsertionEffect:tT,useLayoutEffect:eT,useMemo:rT,useReducer:lu,useRef:WE,useState:function(){return lu(si)},useDebugValue:Em,useDeferredValue:function(e,t){var n=Yt();return aT(n,Tt.memoizedState,e,t)},useTransition:function(){var e=lu(si)[0],t=Yt().memoizedState;return[typeof e=="boolean"?e:Jo(e),t]},useSyncExternalStore:BE,useId:cT,useHostTransitionStatus:Am,useFormState:py,useActionState:py,useOptimistic:function(e,t){var n=Yt();return $E(n,Tt,e,t)},useMemoCache:_m,useCacheRefresh:hT},Rw={readContext:Re,use:Oc,useCallback:sT,useContext:Re,useEffect:JE,useImperativeHandle:iT,useInsertionEffect:tT,useLayoutEffect:eT,useMemo:rT,useReducer:Bh,useRef:WE,useState:function(){return Bh(si)},useDebugValue:Em,useDeferredValue:function(e,t){var n=Yt();return Tt===null?Tm(n,e,t):aT(n,Tt.memoizedState,e,t)},useTransition:function(){var e=Bh(si)[0],t=Yt().memoizedState;return[typeof e=="boolean"?e:Jo(e),t]},useSyncExternalStore:BE,useId:cT,useHostTransitionStatus:Am,useFormState:yy,useActionState:yy,useOptimistic:function(e,t){var n=Yt();return Tt!==null?$E(n,Tt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:_m,useCacheRefresh:hT},Vr=null,wo=0;function Hl(e){var t=wo;return wo+=1,Vr===null&&(Vr=[]),PE(Vr,e,t)}function La(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Gl(e,t){throw t.$$typeof===nb?Error(U(525)):(e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function vy(e){var t=e._init;return t(e._payload)}function yT(e){function t(A,v){if(e){var w=A.deletions;w===null?(A.deletions=[v],A.flags|=16):w.push(v)}}function n(A,v){if(!e)return null;for(;v!==null;)t(A,v),v=v.sibling;return null}function i(A){for(var v=new Map;A!==null;)A.key!==null?v.set(A.key,A):v.set(A.index,A),A=A.sibling;return v}function s(A,v){return A=ti(A,v),A.index=0,A.sibling=null,A}function r(A,v,w){return A.index=w,e?(w=A.alternate,w!==null?(w=w.index,w<v?(A.flags|=67108866,v):w):(A.flags|=67108866,v)):(A.flags|=1048576,v)}function a(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function l(A,v,w,D){return v===null||v.tag!==6?(v=Lh(w,A.mode,D),v.return=A,v):(v=s(v,w),v.return=A,v)}function u(A,v,w,D){var L=w.type;return L===dr?d(A,v,w.props.children,D,w.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===bi&&vy(L)===v.type)?(v=s(v,w.props),La(v,w),v.return=A,v):(v=au(w.type,w.key,w.props,null,A.mode,D),La(v,w),v.return=A,v)}function h(A,v,w,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=jh(w,A.mode,D),v.return=A,v):(v=s(v,w.children||[]),v.return=A,v)}function d(A,v,w,D,L){return v===null||v.tag!==7?(v=Is(w,A.mode,D,L),v.return=A,v):(v=s(v,w),v.return=A,v)}function g(A,v,w){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=Lh(""+v,A.mode,w),v.return=A,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Pl:return w=au(v.type,v.key,v.props,null,A.mode,w),La(w,v),w.return=A,w;case qa:return v=jh(v,A.mode,w),v.return=A,v;case bi:var D=v._init;return v=D(v._payload),g(A,v,w)}if(Ha(v)||Ma(v))return v=Is(v,A.mode,w,null),v.return=A,v;if(typeof v.then=="function")return g(A,Hl(v),w);if(v.$$typeof===$n)return g(A,Bl(A,v),w);Gl(A,v)}return null}function m(A,v,w,D){var L=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return L!==null?null:l(A,v,""+w,D);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Pl:return w.key===L?u(A,v,w,D):null;case qa:return w.key===L?h(A,v,w,D):null;case bi:return L=w._init,w=L(w._payload),m(A,v,w,D)}if(Ha(w)||Ma(w))return L!==null?null:d(A,v,w,D,null);if(typeof w.then=="function")return m(A,v,Hl(w),D);if(w.$$typeof===$n)return m(A,v,Bl(A,w),D);Gl(A,w)}return null}function _(A,v,w,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return A=A.get(w)||null,l(v,A,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Pl:return A=A.get(D.key===null?w:D.key)||null,u(v,A,D,L);case qa:return A=A.get(D.key===null?w:D.key)||null,h(v,A,D,L);case bi:var q=D._init;return D=q(D._payload),_(A,v,w,D,L)}if(Ha(D)||Ma(D))return A=A.get(w)||null,d(v,A,D,L,null);if(typeof D.then=="function")return _(A,v,w,Hl(D),L);if(D.$$typeof===$n)return _(A,v,w,Bl(v,D),L);Gl(v,D)}return null}function x(A,v,w,D){for(var L=null,q=null,E=v,y=v=0,T=null;E!==null&&y<w.length;y++){E.index>y?(T=E,E=null):T=E.sibling;var S=m(A,E,w[y],D);if(S===null){E===null&&(E=T);break}e&&E&&S.alternate===null&&t(A,E),v=r(S,v,y),q===null?L=S:q.sibling=S,q=S,E=T}if(y===w.length)return n(A,E),gt&&As(A,y),L;if(E===null){for(;y<w.length;y++)E=g(A,w[y],D),E!==null&&(v=r(E,v,y),q===null?L=E:q.sibling=E,q=E);return gt&&As(A,y),L}for(E=i(E);y<w.length;y++)T=_(E,A,y,w[y],D),T!==null&&(e&&T.alternate!==null&&E.delete(T.key===null?y:T.key),v=r(T,v,y),q===null?L=T:q.sibling=T,q=T);return e&&E.forEach(function(I){return t(A,I)}),gt&&As(A,y),L}function V(A,v,w,D){if(w==null)throw Error(U(151));for(var L=null,q=null,E=v,y=v=0,T=null,S=w.next();E!==null&&!S.done;y++,S=w.next()){E.index>y?(T=E,E=null):T=E.sibling;var I=m(A,E,S.value,D);if(I===null){E===null&&(E=T);break}e&&E&&I.alternate===null&&t(A,E),v=r(I,v,y),q===null?L=I:q.sibling=I,q=I,E=T}if(S.done)return n(A,E),gt&&As(A,y),L;if(E===null){for(;!S.done;y++,S=w.next())S=g(A,S.value,D),S!==null&&(v=r(S,v,y),q===null?L=S:q.sibling=S,q=S);return gt&&As(A,y),L}for(E=i(E);!S.done;y++,S=w.next())S=_(E,A,y,S.value,D),S!==null&&(e&&S.alternate!==null&&E.delete(S.key===null?y:S.key),v=r(S,v,y),q===null?L=S:q.sibling=S,q=S);return e&&E.forEach(function(C){return t(A,C)}),gt&&As(A,y),L}function k(A,v,w,D){if(typeof w=="object"&&w!==null&&w.type===dr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Pl:t:{for(var L=w.key;v!==null;){if(v.key===L){if(L=w.type,L===dr){if(v.tag===7){n(A,v.sibling),D=s(v,w.props.children),D.return=A,A=D;break t}}else if(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===bi&&vy(L)===v.type){n(A,v.sibling),D=s(v,w.props),La(D,w),D.return=A,A=D;break t}n(A,v);break}else t(A,v);v=v.sibling}w.type===dr?(D=Is(w.props.children,A.mode,D,w.key),D.return=A,A=D):(D=au(w.type,w.key,w.props,null,A.mode,D),La(D,w),D.return=A,A=D)}return a(A);case qa:t:{for(L=w.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(A,v.sibling),D=s(v,w.children||[]),D.return=A,A=D;break t}else{n(A,v);break}else t(A,v);v=v.sibling}D=jh(w,A.mode,D),D.return=A,A=D}return a(A);case bi:return L=w._init,w=L(w._payload),k(A,v,w,D)}if(Ha(w))return x(A,v,w,D);if(Ma(w)){if(L=Ma(w),typeof L!="function")throw Error(U(150));return w=L.call(w),V(A,v,w,D)}if(typeof w.then=="function")return k(A,v,Hl(w),D);if(w.$$typeof===$n)return k(A,v,Bl(A,w),D);Gl(A,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,v!==null&&v.tag===6?(n(A,v.sibling),D=s(v,w),D.return=A,A=D):(n(A,v),D=Lh(w,A.mode,D),D.return=A,A=D),a(A)):n(A,v)}return function(A,v,w,D){try{wo=0;var L=k(A,v,w,D);return Vr=null,L}catch(E){if(E===Wo||E===xc)throw E;var q=Ye(29,E,null,A.mode);return q.lanes=D,q.return=A,q}finally{}}}var Qr=yT(!0),_T=yT(!1),dn=Ln(null),xn=null;function Ii(e){var t=e.alternate;Mt(Wt,Wt.current&1),Mt(dn,e),xn===null&&(t===null||Gr.current!==null||t.memoizedState!==null)&&(xn=e)}function vT(e){if(e.tag===22){if(Mt(Wt,Wt.current),Mt(dn,e),xn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(xn=e)}}else Ci()}function Ci(){Mt(Wt,Wt.current),Mt(dn,dn.current)}function Zn(e){oe(dn),xn===e&&(xn=null),oe(Wt)}var Wt=Ln(0);function ju(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||ld(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function qh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:xt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Qf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Je(),s=zi(i);s.payload=t,n!=null&&(s.callback=n),t=Bi(e,s,i),t!==null&&(tn(t,e,i),no(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Je(),s=zi(i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Bi(e,s,i),t!==null&&(tn(t,e,i),no(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Je(),i=zi(n);i.tag=2,t!=null&&(i.callback=t),t=Bi(e,i,n),t!==null&&(tn(t,e,n),no(t,e,n))}};function Ey(e,t,n,i,s,r,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,a):t.prototype&&t.prototype.isPureReactComponent?!Ao(n,i)||!Ao(s,r):!0}function Ty(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Qf.enqueueReplaceState(t,t.state,null)}function Ps(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=xt({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}var zu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function ET(e){zu(e)}function TT(e){console.error(e)}function AT(e){zu(e)}function Bu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Ay(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function $f(e,t,n){return n=zi(n),n.tag=3,n.payload={element:null},n.callback=function(){Bu(e,t)},n}function ST(e){return e=zi(e),e.tag=3,e}function bT(e,t,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;e.payload=function(){return s(r)},e.callback=function(){Ay(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){Ay(t,n,i),typeof s!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Iw(e,t,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Xo(t,n,s,!0),n=dn.current,n!==null){switch(n.tag){case 13:return xn===null?ed():n.alternate===null&&zt===0&&(zt=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===jf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Jh(e,i,s)),!1;case 22:return n.flags|=65536,i===jf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Jh(e,i,s)),!1}throw Error(U(435,n.tag))}return Jh(e,i,s),ed(),!1}if(gt)return t=dn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==Mf&&(e=Error(U(422),{cause:i}),So(hn(e,n)))):(i!==Mf&&(t=Error(U(423),{cause:i}),So(hn(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,i=hn(i,n),s=$f(e.stateNode,i,s),zh(e,s),zt!==4&&(zt=2)),!1;var r=Error(U(520),{cause:i});if(r=hn(r,n),lo===null?lo=[r]:lo.push(r),zt!==4&&(zt=2),t===null)return!0;i=hn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=$f(n.stateNode,i,e),zh(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(qi===null||!qi.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=ST(s),bT(s,e,n,i),zh(n,s),!1}n=n.return}while(n!==null);return!1}var wT=Error(U(461)),ae=!1;function fe(e,t,n,i){t.child=e===null?_T(t,null,n,i):Qr(t,e.child,n,i)}function Sy(e,t,n,i,s){n=n.render;var r=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Ms(t),i=dm(e,t,n,a,r,s),l=mm(),e!==null&&!ae?(gm(e,t,s),ri(e,t,s)):(gt&&l&&am(t),t.flags|=1,fe(e,t,i,s),t.child)}function by(e,t,n,i,s){if(e===null){var r=n.type;return typeof r=="function"&&!rm(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,RT(e,t,r,i,s)):(e=au(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!bm(e,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:Ao,n(a,i)&&e.ref===t.ref)return ri(e,t,s)}return t.flags|=1,e=ti(r,i),e.ref=t.ref,e.return=t,t.child=e}function RT(e,t,n,i,s){if(e!==null){var r=e.memoizedProps;if(Ao(r,i)&&e.ref===t.ref)if(ae=!1,t.pendingProps=i=r,bm(e,s))e.flags&131072&&(ae=!0);else return t.lanes=e.lanes,ri(e,t,s)}return Yf(e,t,n,i,s)}function IT(e,t,n){var i=t.pendingProps,s=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=r!==null?r.baseLanes|n:n,e!==null){for(s=t.child=e.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~i}else t.childLanes=0,t.child=null;return wy(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ou(t,r!==null?r.cachePool:null),r!==null?fy(t,r):qf(),vT(t);else return t.lanes=t.childLanes=536870912,wy(e,t,r!==null?r.baseLanes|n:n,n)}else r!==null?(ou(t,r.cachePool),fy(t,r),Ci(),t.memoizedState=null):(e!==null&&ou(t,null),qf(),Ci());return fe(e,t,s,n),t.child}function wy(e,t,n,i){var s=um();return s=s===null?null:{parent:Zt._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&ou(t,null),qf(),vT(t),e!==null&&Xo(e,t,i,!0),null}function cu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Yf(e,t,n,i,s){return Ms(t),n=dm(e,t,n,i,void 0,s),i=mm(),e!==null&&!ae?(gm(e,t,s),ri(e,t,s)):(gt&&i&&am(t),t.flags|=1,fe(e,t,n,s),t.child)}function Ry(e,t,n,i,s,r){return Ms(t),t.updateQueue=null,n=zE(t,i,n,s),jE(e),i=mm(),e!==null&&!ae?(gm(e,t,r),ri(e,t,r)):(gt&&i&&am(t),t.flags|=1,fe(e,t,n,r),t.child)}function Iy(e,t,n,i,s){if(Ms(t),t.stateNode===null){var r=Tr,a=n.contextType;typeof a=="object"&&a!==null&&(r=Re(a)),r=new n(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Qf,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},cm(t),a=n.contextType,r.context=typeof a=="object"&&a!==null?Re(a):Tr,r.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(qh(t,n,a,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&Qf.enqueueReplaceState(r,r.state,null),so(t,i,r,s),io(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var l=t.memoizedProps,u=Ps(n,l);r.props=u;var h=r.context,d=n.contextType;a=Tr,typeof d=="object"&&d!==null&&(a=Re(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||h!==a)&&Ty(t,r,i,a),wi=!1;var m=t.memoizedState;r.state=m,so(t,i,r,s),io(),h=t.memoizedState,l||m!==h||wi?(typeof g=="function"&&(qh(t,n,g,i),h=t.memoizedState),(u=wi||Ey(t,n,u,i,m,h,a))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),r.props=i,r.state=h,r.context=a,i=u):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,zf(e,t),a=t.memoizedProps,d=Ps(n,a),r.props=d,g=t.pendingProps,m=r.context,h=n.contextType,u=Tr,typeof h=="object"&&h!==null&&(u=Re(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==g||m!==u)&&Ty(t,r,i,u),wi=!1,m=t.memoizedState,r.state=m,so(t,i,r,s),io();var _=t.memoizedState;a!==g||m!==_||wi||e!==null&&e.dependencies!==null&&Mu(e.dependencies)?(typeof l=="function"&&(qh(t,n,l,i),_=t.memoizedState),(d=wi||Ey(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&Mu(e.dependencies))?(h||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,_,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,_,u)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),r.props=i,r.state=_,r.context=u,i=d):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,cu(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=Qr(t,e.child,null,s),t.child=Qr(t,null,n,s)):fe(e,t,n,s),t.memoizedState=r.state,e=t.child):e=ri(e,t,s),e}function Cy(e,t,n,i){return Ko(),t.flags|=256,fe(e,t,n,i),t.child}var Hh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gh(e){return{baseLanes:e,cachePool:ME()}}function Fh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=fn),e}function CT(e,t,n){var i=t.pendingProps,s=!1,r=(t.flags&128)!==0,a;if((a=r)||(a=e!==null&&e.memoizedState===null?!1:(Wt.current&2)!==0),a&&(s=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(gt){if(s?Ii(t):Ci(),gt){var l=jt,u;if(u=l){t:{for(u=l,l=In;u.nodeType!==8;){if(!l){l=null;break t}if(u=Tn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Cs!==null?{id:Yn,overflow:Kn}:null,retryLane:536870912,hydrationErrors:null},u=Ye(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,De=t,jt=null,u=!0):u=!1}u||Vs(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return ld(l)?t.lanes=32:t.lanes=536870912,null;Zn(t)}return l=i.children,i=i.fallback,s?(Ci(),s=t.mode,l=qu({mode:"hidden",children:l},s),i=Is(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,s=t.child,s.memoizedState=Gh(n),s.childLanes=Fh(e,a,n),t.memoizedState=Hh,i):(Ii(t),Kf(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(r)t.flags&256?(Ii(t),t.flags&=-257,t=Qh(e,t,n)):t.memoizedState!==null?(Ci(),t.child=e.child,t.flags|=128,t=null):(Ci(),s=i.fallback,l=t.mode,i=qu({mode:"visible",children:i.children},l),s=Is(s,l,n,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,Qr(t,e.child,null,n),i=t.child,i.memoizedState=Gh(n),i.childLanes=Fh(e,a,n),t.memoizedState=Hh,t=s);else if(Ii(t),ld(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(U(419)),i.stack="",i.digest=a,So({value:i,source:null,stack:null}),t=Qh(e,t,n)}else if(ae||Xo(e,t,n,!1),a=(n&e.childLanes)!==0,ae||a){if(a=It,a!==null&&(i=n&-n,i=i&42?1:Yd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,oa(e,i),tn(a,e,i),wT;l.data==="$?"||ed(),t=Qh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,jt=Tn(l.nextSibling),De=t,gt=!0,Ns=null,In=!1,e!==null&&(ln[un++]=Yn,ln[un++]=Kn,ln[un++]=Cs,Yn=e.id,Kn=e.overflow,Cs=t),t=Kf(t,i.children),t.flags|=4096);return t}return s?(Ci(),s=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=ti(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?s=ti(h,s):(s=Is(s,l,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=e.child.memoizedState,l===null?l=Gh(n):(u=l.cachePool,u!==null?(h=Zt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=ME(),l={baseLanes:l.baseLanes|n,cachePool:u}),s.memoizedState=l,s.childLanes=Fh(e,a,n),t.memoizedState=Hh,i):(Ii(t),n=e.child,e=n.sibling,n=ti(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Kf(e,t){return t=qu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function qu(e,t){return e=Ye(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Qh(e,t,n){return Qr(t,e.child,null,n),e=Kf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ny(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Pf(e.return,t,n)}function $h(e,t,n,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function NT(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(fe(e,t,i.children,n),i=Wt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ny(e,n,t);else if(e.tag===19)Ny(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Mt(Wt,i),s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ju(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),$h(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ju(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}$h(t,!0,n,null,r);break;case"together":$h(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ri(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ns|=t.lanes,!(n&t.childLanes))if(e!==null){if(Xo(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=ti(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ti(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function bm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Mu(e)))}function Cw(e,t,n){switch(t.tag){case 3:Ru(t,t.stateNode.containerInfo),Ri(t,Zt,e.memoizedState.cache),Ko();break;case 27:case 5:bf(t);break;case 4:Ru(t,t.stateNode.containerInfo);break;case 10:Ri(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ii(t),t.flags|=128,null):n&t.child.childLanes?CT(e,t,n):(Ii(t),e=ri(e,t,n),e!==null?e.sibling:null);Ii(t);break;case 19:var s=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Xo(e,t,n,!1),i=(n&t.childLanes)!==0),s){if(i)return NT(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Mt(Wt,Wt.current),i)break;return null;case 22:case 23:return t.lanes=0,IT(e,t,n);case 24:Ri(t,Zt,e.memoizedState.cache)}return ri(e,t,n)}function DT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ae=!0;else{if(!bm(e,n)&&!(t.flags&128))return ae=!1,Cw(e,t,n);ae=!!(e.flags&131072)}else ae=!1,gt&&t.flags&1048576&&OE(t,Vu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,typeof i=="function")rm(i)?(e=Ps(i,e),t.tag=1,t=Iy(null,t,i,e,n)):(t.tag=0,t=Yf(null,t,i,e,n));else{if(i!=null){if(s=i.$$typeof,s===Fd){t.tag=11,t=Sy(null,t,i,e,n);break t}else if(s===Qd){t.tag=14,t=by(null,t,i,e,n);break t}}throw t=Af(i)||i,Error(U(306,t,""))}}return t;case 0:return Yf(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,s=Ps(i,t.pendingProps),Iy(e,t,i,s,n);case 3:t:{if(Ru(t,t.stateNode.containerInfo),e===null)throw Error(U(387));i=t.pendingProps;var r=t.memoizedState;s=r.element,zf(e,t),so(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Ri(t,Zt,i),i!==r.cache&&Uf(t,[Zt],n,!0),io(),i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Cy(e,t,i,n);break t}else if(i!==s){s=hn(Error(U(424)),t),So(s),t=Cy(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(jt=Tn(e.firstChild),De=t,gt=!0,Ns=null,In=!0,n=_T(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ko(),i===s){t=ri(e,t,n);break t}fe(e,t,i,n)}t=t.child}return t;case 26:return cu(e,t),e===null?(n=Qy(t.type,null,t.pendingProps,null))?t.memoizedState=n:gt||(n=t.type,e=t.pendingProps,i=Ku(ji.current).createElement(n),i[we]=t,i[je]=e,ye(i,n,e),se(i),t.stateNode=i):t.memoizedState=Qy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return bf(t),e===null&&gt&&(i=t.stateNode=p0(t.type,t.pendingProps,ji.current),De=t,In=!0,s=jt,hs(t.type)?(ud=s,jt=Tn(i.firstChild)):jt=s),fe(e,t,t.pendingProps.children,n),cu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&gt&&((s=i=jt)&&(i=nR(i,t.type,t.pendingProps,In),i!==null?(t.stateNode=i,De=t,jt=Tn(i.firstChild),In=!1,s=!0):s=!1),s||Vs(t)),bf(t),s=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,i=r.children,ad(s,r)?i=null:a!==null&&ad(s,a)&&(t.flags|=32),t.memoizedState!==null&&(s=dm(e,t,Ew,null,null,n),No._currentValue=s),cu(e,t),fe(e,t,i,n),t.child;case 6:return e===null&&gt&&((e=n=jt)&&(n=iR(n,t.pendingProps,In),n!==null?(t.stateNode=n,De=t,jt=null,e=!0):e=!1),e||Vs(t)),null;case 13:return CT(e,t,n);case 4:return Ru(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Qr(t,null,i,n):fe(e,t,i,n),t.child;case 11:return Sy(e,t,t.type,t.pendingProps,n);case 7:return fe(e,t,t.pendingProps,n),t.child;case 8:return fe(e,t,t.pendingProps.children,n),t.child;case 12:return fe(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Ri(t,t.type,i.value),fe(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,Ms(t),s=Re(s),i=i(s),t.flags|=1,fe(e,t,i,n),t.child;case 14:return by(e,t,t.type,t.pendingProps,n);case 15:return RT(e,t,t.type,t.pendingProps,n);case 19:return NT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=qu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=ti(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return IT(e,t,n);case 24:return Ms(t),i=Re(Zt),e===null?(s=um(),s===null&&(s=It,r=lm(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),t.memoizedState={parent:i,cache:s},cm(t),Ri(t,Zt,s)):(e.lanes&n&&(zf(e,t),so(t,null,null,n),io()),s=e.memoizedState,r=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Ri(t,Zt,i)):(i=r.cache,Ri(t,Zt,i),i!==s.cache&&Uf(t,[Zt],n,!0))),fe(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(U(156,t.tag))}function Gn(e){e.flags|=4}function Dy(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!v0(t)){if(t=dn.current,t!==null&&((ct&4194048)===ct?xn!==null:(ct&62914560)!==ct&&!(ct&536870912)||t!==xn))throw eo=jf,kE;e.flags|=8192}}function Fl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?nE():536870912,e.lanes|=t,$r|=t)}function ja(e,t){if(!gt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Nw(e,t,n){var i=t.pendingProps;switch(om(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return kt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ei(Zt),zr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ua(t)?Gn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ay())),kt(t),null;case 26:return n=t.memoizedState,e===null?(Gn(t),n!==null?(kt(t),Dy(t,n)):(kt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Gn(t),kt(t),Dy(t,n)):(kt(t),t.flags&=-16777217):(e.memoizedProps!==i&&Gn(t),kt(t),t.flags&=-16777217),null;case 27:Iu(t),n=ji.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Gn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return kt(t),null}e=Nn.current,Ua(t)?sy(t):(e=p0(s,i,n),t.stateNode=e,Gn(t))}return kt(t),null;case 5:if(Iu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Gn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return kt(t),null}if(e=Nn.current,Ua(t))sy(t);else{switch(s=Ku(ji.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}e[we]=t,e[je]=i;t:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;t:switch(ye(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Gn(t)}}return kt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Gn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(e=ji.current,Ua(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,s=De,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}e[we]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||d0(e.nodeValue,n)),e||Vs(t)}else e=Ku(e).createTextNode(i),e[we]=t,t.stateNode=e}return kt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=Ua(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(U(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[we]=t}else Ko(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),s=!1}else s=ay(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Zn(t),t):(Zn(t),null)}if(Zn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Fl(t,t.updateQueue),kt(t),null;case 4:return zr(),e===null&&Om(t.stateNode.containerInfo),kt(t),null;case 10:return ei(t.type),kt(t),null;case 19:if(oe(Wt),s=t.memoizedState,s===null)return kt(t),null;if(i=(t.flags&128)!==0,r=s.rendering,r===null)if(i)ja(s,!1);else{if(zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=ju(e),r!==null){for(t.flags|=128,ja(s,!1),e=r.updateQueue,t.updateQueue=e,Fl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)xE(n,e),n=n.sibling;return Mt(Wt,Wt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Dn()>Gu&&(t.flags|=128,i=!0,ja(s,!1),t.lanes=4194304)}else{if(!i)if(e=ju(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Fl(t,e),ja(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!gt)return kt(t),null}else 2*Dn()-s.renderingStartTime>Gu&&n!==536870912&&(t.flags|=128,i=!0,ja(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Dn(),t.sibling=null,e=Wt.current,Mt(Wt,i?e&1|2:e&1),t):(kt(t),null);case 22:case 23:return Zn(t),hm(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),n=t.updateQueue,n!==null&&Fl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&oe(Ds),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ei(Zt),kt(t),null;case 25:return null;case 30:return null}throw Error(U(156,t.tag))}function Dw(e,t){switch(om(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ei(Zt),zr(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Iu(t),null;case 13:if(Zn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Ko()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return oe(Wt),null;case 4:return zr(),null;case 10:return ei(t.type),null;case 22:case 23:return Zn(t),hm(),e!==null&&oe(Ds),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ei(Zt),null;case 25:return null;default:return null}}function xT(e,t){switch(om(t),t.tag){case 3:ei(Zt),zr();break;case 26:case 27:case 5:Iu(t);break;case 4:zr();break;case 13:Zn(t);break;case 19:oe(Wt);break;case 10:ei(t.type);break;case 22:case 23:Zn(t),hm(),e!==null&&oe(Ds);break;case 24:ei(Zt)}}function el(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&e)===e){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(l){wt(t,t.return,l)}}function es(e,t,n){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,s=t;var u=n,h=l;try{h()}catch(d){wt(s,u,d)}}}i=i.next}while(i!==r)}}catch(d){wt(t,t.return,d)}}function OT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{LE(t,n)}catch(i){wt(e,e.return,i)}}}function VT(e,t,n){n.props=Ps(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){wt(e,t,i)}}function ao(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(s){wt(e,t,s)}}function Cn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){wt(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){wt(e,t,s)}else n.current=null}function MT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){wt(e,e.return,s)}}function Yh(e,t,n){try{var i=e.stateNode;Zw(i,e.type,n,t),i[je]=t}catch(s){wt(e,e.return,s)}}function kT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&hs(e.type)||e.tag===4}function Kh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||kT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&hs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Lc));else if(i!==4&&(i===27&&hs(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Xf(e,t,n),e=e.sibling;e!==null;)Xf(e,t,n),e=e.sibling}function Hu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&hs(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Hu(e,t,n),e=e.sibling;e!==null;)Hu(e,t,n),e=e.sibling}function PT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ye(t,i,n),t[we]=e,t[je]=n}catch(r){wt(e,e.return,r)}}var Qn=!1,qt=!1,Xh=!1,xy=typeof WeakSet=="function"?WeakSet:Set,ie=null;function xw(e,t){if(e=e.containerInfo,sd=Ju,e=SE(e),nm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var _;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==r||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break e;if(m===n&&++h===s&&(l=a),m===r&&++d===i&&(u=a),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(rd={focusedElem:e,selectionRange:n},Ju=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){switch(t=ie,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&r!==null){e=void 0,n=t,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var x=Ps(n.type,s,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(x,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(V){wt(n,n.return,V)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)od(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":od(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(U(163))}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}}function UT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ti(e,n),i&4&&el(5,n);break;case 1:if(Ti(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){wt(n,n.return,a)}else{var s=Ps(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){wt(n,n.return,a)}}i&64&&OT(n),i&512&&ao(n,n.return);break;case 3:if(Ti(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{LE(e,t)}catch(a){wt(n,n.return,a)}}break;case 27:t===null&&i&4&&PT(n);case 26:case 5:Ti(e,n),t===null&&i&4&&MT(n),i&512&&ao(n,n.return);break;case 12:Ti(e,n);break;case 13:Ti(e,n),i&4&&zT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=zw.bind(null,n),sR(e,n))));break;case 22:if(i=n.memoizedState!==null||Qn,!i){t=t!==null&&t.memoizedState!==null||qt,s=Qn;var r=qt;Qn=i,(qt=t)&&!r?Si(e,n,(n.subtreeFlags&8772)!==0):Ti(e,n),Qn=s,qt=r}break;case 30:break;default:Ti(e,n)}}function LT(e){var t=e.alternate;t!==null&&(e.alternate=null,LT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Xd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ot=null,Pe=!1;function Fn(e,t,n){for(n=n.child;n!==null;)jT(e,t,n),n=n.sibling}function jT(e,t,n){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(Go,n)}catch{}switch(n.tag){case 26:qt||Cn(n,t),Fn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:qt||Cn(n,t);var i=Ot,s=Pe;hs(n.type)&&(Ot=n.stateNode,Pe=!1),Fn(e,t,n),co(n.stateNode),Ot=i,Pe=s;break;case 5:qt||Cn(n,t);case 6:if(i=Ot,s=Pe,Ot=null,Fn(e,t,n),Ot=i,Pe=s,Ot!==null)if(Pe)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(n.stateNode)}catch(r){wt(n,t,r)}else try{Ot.removeChild(n.stateNode)}catch(r){wt(n,t,r)}break;case 18:Ot!==null&&(Pe?(e=Ot,Hy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Oo(e)):Hy(Ot,n.stateNode));break;case 4:i=Ot,s=Pe,Ot=n.stateNode.containerInfo,Pe=!0,Fn(e,t,n),Ot=i,Pe=s;break;case 0:case 11:case 14:case 15:qt||es(2,n,t),qt||es(4,n,t),Fn(e,t,n);break;case 1:qt||(Cn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&VT(n,t,i)),Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:qt=(i=qt)||n.memoizedState!==null,Fn(e,t,n),qt=i;break;default:Fn(e,t,n)}}function zT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Oo(e)}catch(n){wt(t,t.return,n)}}function Ow(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new xy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new xy),t;default:throw Error(U(435,e.tag))}}function Zh(e,t){var n=Ow(e);t.forEach(function(i){var s=Bw.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}function Ge(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(hs(l.type)){Ot=l.stateNode,Pe=!1;break t}break;case 5:Ot=l.stateNode,Pe=!1;break t;case 3:case 4:Ot=l.stateNode.containerInfo,Pe=!0;break t}l=l.return}if(Ot===null)throw Error(U(160));jT(r,a,s),Ot=null,Pe=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)BT(t,e),t=t.sibling}var yn=null;function BT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ge(t,e),Fe(e),i&4&&(es(3,e,e.return),el(3,e),es(5,e,e.return));break;case 1:Ge(t,e),Fe(e),i&512&&(qt||n===null||Cn(n,n.return)),i&64&&Qn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=yn;if(Ge(t,e),Fe(e),i&512&&(qt||n===null||Cn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;e:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[$o]||r[we]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),ye(r,i,n),r[we]=e,se(r),i=r;break t;case"link":var a=Yy("link","href",s).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}r=s.createElement(i),ye(r,i,n),s.head.appendChild(r);break;case"meta":if(a=Yy("meta","content",s).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}r=s.createElement(i),ye(r,i,n),s.head.appendChild(r);break;default:throw Error(U(468,i))}r[we]=e,se(r),i=r}e.stateNode=i}else Ky(s,e.type,e.stateNode);else e.stateNode=$y(s,i,e.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?Ky(s,e.type,e.stateNode):$y(s,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Yh(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ge(t,e),Fe(e),i&512&&(qt||n===null||Cn(n,n.return)),n!==null&&i&4&&Yh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ge(t,e),Fe(e),i&512&&(qt||n===null||Cn(n,n.return)),e.flags&32){s=e.stateNode;try{qr(s,"")}catch(_){wt(e,e.return,_)}}i&4&&e.stateNode!=null&&(s=e.memoizedProps,Yh(e,s,n!==null?n.memoizedProps:s)),i&1024&&(Xh=!0);break;case 6:if(Ge(t,e),Fe(e),i&4){if(e.stateNode===null)throw Error(U(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){wt(e,e.return,_)}}break;case 3:if(du=null,s=yn,yn=Xu(t.containerInfo),Ge(t,e),yn=s,Fe(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Oo(t.containerInfo)}catch(_){wt(e,e.return,_)}Xh&&(Xh=!1,qT(e));break;case 4:i=yn,yn=Xu(e.stateNode.containerInfo),Ge(t,e),Fe(e),yn=i;break;case 12:Ge(t,e),Fe(e);break;case 13:Ge(t,e),Fe(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Nm=Dn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Zh(e,i)));break;case 22:s=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Qn,d=qt;if(Qn=h||s,qt=d||u,Ge(t,e),qt=d,Qn=h,Fe(e),i&8192)t:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(n===null||u||Qn||qt||Ss(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(r=u.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){wt(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(_){wt(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Zh(e,n))));break;case 19:Ge(t,e),Fe(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Zh(e,i)));break;case 30:break;case 21:break;default:Ge(t,e),Fe(e)}}function Fe(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(kT(i)){n=i;break}i=i.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var s=n.stateNode,r=Kh(e);Hu(e,r,s);break;case 5:var a=n.stateNode;n.flags&32&&(qr(a,""),n.flags&=-33);var l=Kh(e);Hu(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Kh(e);Xf(e,h,u);break;default:throw Error(U(161))}}catch(d){wt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;qT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ti(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)UT(e,t.alternate,t),t=t.sibling}function Ss(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:es(4,t,t.return),Ss(t);break;case 1:Cn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&VT(t,t.return,n),Ss(t);break;case 27:co(t.stateNode);case 26:case 5:Cn(t,t.return),Ss(t);break;case 22:t.memoizedState===null&&Ss(t);break;case 30:Ss(t);break;default:Ss(t)}e=e.sibling}}function Si(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,s=e,r=t,a=r.flags;switch(r.tag){case 0:case 11:case 15:Si(s,r,n),el(4,r);break;case 1:if(Si(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(h){wt(i,i.return,h)}if(i=r,s=i.updateQueue,s!==null){var l=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)UE(u[s],l)}catch(h){wt(i,i.return,h)}}n&&a&64&&OT(r),ao(r,r.return);break;case 27:PT(r);case 26:case 5:Si(s,r,n),n&&i===null&&a&4&&MT(r),ao(r,r.return);break;case 12:Si(s,r,n);break;case 13:Si(s,r,n),n&&a&4&&zT(s,r);break;case 22:r.memoizedState===null&&Si(s,r,n),ao(r,r.return);break;case 30:break;default:Si(s,r,n)}t=t.sibling}}function wm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Zo(n))}function Rm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Zo(e))}function wn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)HT(e,t,n,i),t=t.sibling}function HT(e,t,n,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:wn(e,t,n,i),s&2048&&el(9,t);break;case 1:wn(e,t,n,i);break;case 3:wn(e,t,n,i),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Zo(e)));break;case 12:if(s&2048){wn(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){wt(t,t.return,u)}}else wn(e,t,n,i);break;case 13:wn(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,a=t.alternate,t.memoizedState!==null?r._visibility&2?wn(e,t,n,i):oo(e,t):r._visibility&2?wn(e,t,n,i):(r._visibility|=2,or(e,t,n,i,(t.subtreeFlags&10256)!==0)),s&2048&&wm(a,t);break;case 24:wn(e,t,n,i),s&2048&&Rm(t.alternate,t);break;default:wn(e,t,n,i)}}function or(e,t,n,i,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:or(r,a,l,u,s),el(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?or(r,a,l,u,s):oo(r,a):(d._visibility|=2,or(r,a,l,u,s)),s&&h&2048&&wm(a.alternate,a);break;case 24:or(r,a,l,u,s),s&&h&2048&&Rm(a.alternate,a);break;default:or(r,a,l,u,s)}t=t.sibling}}function oo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,s=i.flags;switch(i.tag){case 22:oo(n,i),s&2048&&wm(i.alternate,i);break;case 24:oo(n,i),s&2048&&Rm(i.alternate,i);break;default:oo(n,i)}t=t.sibling}}var Fa=8192;function ir(e){if(e.subtreeFlags&Fa)for(e=e.child;e!==null;)GT(e),e=e.sibling}function GT(e){switch(e.tag){case 26:ir(e),e.flags&Fa&&e.memoizedState!==null&&yR(yn,e.memoizedState,e.memoizedProps);break;case 5:ir(e);break;case 3:case 4:var t=yn;yn=Xu(e.stateNode.containerInfo),ir(e),yn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Fa,Fa=16777216,ir(e),Fa=t):ir(e));break;default:ir(e)}}function FT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function za(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ie=i,$T(i,e)}FT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)QT(e),e=e.sibling}function QT(e){switch(e.tag){case 0:case 11:case 15:za(e),e.flags&2048&&es(9,e,e.return);break;case 3:za(e);break;case 12:za(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,hu(e)):za(e);break;default:za(e)}}function hu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ie=i,$T(i,e)}FT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:es(8,t,t.return),hu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,hu(t));break;default:hu(t)}e=e.sibling}}function $T(e,t){for(;ie!==null;){var n=ie;switch(n.tag){case 0:case 11:case 15:es(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Zo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ie=i;else t:for(n=e;ie!==null;){i=ie;var s=i.sibling,r=i.return;if(LT(i),i===n){ie=null;break t}if(s!==null){s.return=r,ie=s;break t}ie=r}}}var Vw={getCacheForType:function(e){var t=Re(Zt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Mw=typeof WeakMap=="function"?WeakMap:Map,_t=0,It=null,rt=null,ct=0,yt=0,$e=null,Pi=!1,la=!1,Im=!1,ai=0,zt=0,ns=0,xs=0,Cm=0,fn=0,$r=0,lo=null,Ue=null,Zf=!1,Nm=0,Gu=1/0,Fu=null,qi=null,me=0,Hi=null,Yr=null,Mr=0,Wf=0,Jf=null,YT=null,uo=0,td=null;function Je(){if(_t&2&&ct!==0)return ct&-ct;if(Z.T!==null){var e=Hr;return e!==0?e:xm()}return rE()}function KT(){fn===0&&(fn=!(ct&536870912)||gt?eE():536870912);var e=dn.current;return e!==null&&(e.flags|=32),fn}function tn(e,t,n){(e===It&&(yt===2||yt===9)||e.cancelPendingCommit!==null)&&(Kr(e,0),Ui(e,ct,fn,!1)),Qo(e,n),(!(_t&2)||e!==It)&&(e===It&&(!(_t&2)&&(xs|=n),zt===4&&Ui(e,ct,fn,!1)),jn(e))}function XT(e,t,n){if(_t&6)throw Error(U(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Fo(e,t),s=i?Uw(e,t):Wh(e,t,!0),r=i;do{if(s===0){la&&!i&&Ui(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!kw(n)){s=Wh(e,t,!1),r=!1;continue}if(s===2){if(r=t,e.errorRecoveryDisabledLanes&r)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;s=lo;var u=l.current.memoizedState.isDehydrated;if(u&&(Kr(l,a).flags|=256),a=Wh(l,a,!1),a!==2){if(Im&&!u){l.errorRecoveryDisabledLanes|=r,xs|=r,s=4;break t}r=Ue,Ue=s,r!==null&&(Ue===null?Ue=r:Ue.push.apply(Ue,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){Kr(e,0),Ui(e,t,0,!0);break}t:{switch(i=e,r=s,r){case 0:case 1:throw Error(U(345));case 4:if((t&4194048)!==t)break;case 6:Ui(i,t,fn,!Pi);break t;case 2:Ue=null;break;case 3:case 5:break;default:throw Error(U(329))}if((t&62914560)===t&&(s=Nm+300-Dn(),10<s)){if(Ui(i,t,fn,!Pi),wc(i,0,!0)!==0)break t;i.timeoutHandle=g0(Oy.bind(null,i,n,Ue,Fu,Zf,t,fn,xs,$r,Pi,r,2,-0,0),s);break t}Oy(i,n,Ue,Fu,Zf,t,fn,xs,$r,Pi,r,0,-0,0)}}break}while(!0);jn(e)}function Oy(e,t,n,i,s,r,a,l,u,h,d,g,m,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(Co={stylesheets:null,count:0,unsuspend:pR},GT(t),g=_R(),g!==null)){e.cancelPendingCommit=g(My.bind(null,e,t,r,n,i,s,a,l,u,d,1,m,_)),Ui(e,r,a,!h);return}My(e,t,r,n,i,s,a,l,u)}function kw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!rn(r(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ui(e,t,n,i){t&=~Cm,t&=~xs,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var s=t;0<s;){var r=31-We(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&iE(e,n,t)}function kc(){return _t&6?!0:(nl(0),!1)}function Dm(){if(rt!==null){if(yt===0)var e=rt.return;else e=rt,Xn=Qs=null,pm(e),Vr=null,wo=0,e=rt;for(;e!==null;)xT(e.alternate,e),e=e.return;rt=null}}function Kr(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Jw(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Dm(),It=e,rt=n=ti(e.current,null),ct=t,yt=0,$e=null,Pi=!1,la=Fo(e,t),Im=!1,$r=fn=Cm=xs=ns=zt=0,Ue=lo=null,Zf=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var s=31-We(i),r=1<<s;t|=e[s],i&=~r}return ai=t,Nc(),n}function ZT(e,t){it=null,Z.H=Lu,t===Wo||t===xc?(t=cy(),yt=3):t===kE?(t=cy(),yt=4):yt=t===wT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,$e=t,rt===null&&(zt=1,Bu(e,hn(t,e.current)))}function WT(){var e=Z.H;return Z.H=Lu,e===null?Lu:e}function JT(){var e=Z.A;return Z.A=Vw,e}function ed(){zt=4,Pi||(ct&4194048)!==ct&&dn.current!==null||(la=!0),!(ns&134217727)&&!(xs&134217727)||It===null||Ui(It,ct,fn,!1)}function Wh(e,t,n){var i=_t;_t|=2;var s=WT(),r=JT();(It!==e||ct!==t)&&(Fu=null,Kr(e,t)),t=!1;var a=zt;t:do try{if(yt!==0&&rt!==null){var l=rt,u=$e;switch(yt){case 8:Dm(),a=6;break t;case 3:case 2:case 9:case 6:dn.current===null&&(t=!0);var h=yt;if(yt=0,$e=null,br(e,l,u,h),n&&la){a=0;break t}break;default:h=yt,yt=0,$e=null,br(e,l,u,h)}}Pw(),a=zt;break}catch(d){ZT(e,d)}while(!0);return t&&e.shellSuspendCounter++,Xn=Qs=null,_t=i,Z.H=s,Z.A=r,rt===null&&(It=null,ct=0,Nc()),a}function Pw(){for(;rt!==null;)t0(rt)}function Uw(e,t){var n=_t;_t|=2;var i=WT(),s=JT();It!==e||ct!==t?(Fu=null,Gu=Dn()+500,Kr(e,t)):la=Fo(e,t);t:do try{if(yt!==0&&rt!==null){t=rt;var r=$e;e:switch(yt){case 1:yt=0,$e=null,br(e,t,r,1);break;case 2:case 9:if(uy(r)){yt=0,$e=null,Vy(t);break}t=function(){yt!==2&&yt!==9||It!==e||(yt=7),jn(e)},r.then(t,t);break t;case 3:yt=7;break t;case 4:yt=5;break t;case 7:uy(r)?(yt=0,$e=null,Vy(t)):(yt=0,$e=null,br(e,t,r,7));break;case 5:var a=null;switch(rt.tag){case 26:a=rt.memoizedState;case 5:case 27:var l=rt;if(!a||v0(a)){yt=0,$e=null;var u=l.sibling;if(u!==null)rt=u;else{var h=l.return;h!==null?(rt=h,Pc(h)):rt=null}break e}}yt=0,$e=null,br(e,t,r,5);break;case 6:yt=0,$e=null,br(e,t,r,6);break;case 8:Dm(),zt=6;break t;default:throw Error(U(462))}}Lw();break}catch(d){ZT(e,d)}while(!0);return Xn=Qs=null,Z.H=i,Z.A=s,_t=n,rt!==null?0:(It=null,ct=0,Nc(),zt)}function Lw(){for(;rt!==null&&!ab();)t0(rt)}function t0(e){var t=DT(e.alternate,e,ai);e.memoizedProps=e.pendingProps,t===null?Pc(e):rt=t}function Vy(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ry(n,t,t.pendingProps,t.type,void 0,ct);break;case 11:t=Ry(n,t,t.pendingProps,t.type.render,t.ref,ct);break;case 5:pm(t);default:xT(n,t),t=rt=xE(t,ai),t=DT(n,t,ai)}e.memoizedProps=e.pendingProps,t===null?Pc(e):rt=t}function br(e,t,n,i){Xn=Qs=null,pm(t),Vr=null,wo=0;var s=t.return;try{if(Iw(e,s,t,n,ct)){zt=1,Bu(e,hn(n,e.current)),rt=null;return}}catch(r){if(s!==null)throw rt=s,r;zt=1,Bu(e,hn(n,e.current)),rt=null;return}t.flags&32768?(gt||i===1?e=!0:la||ct&536870912?e=!1:(Pi=e=!0,(i===2||i===9||i===3||i===6)&&(i=dn.current,i!==null&&i.tag===13&&(i.flags|=16384))),e0(t,e)):Pc(t)}function Pc(e){var t=e;do{if(t.flags&32768){e0(t,Pi);return}e=t.return;var n=Nw(t.alternate,t,ai);if(n!==null){rt=n;return}if(t=t.sibling,t!==null){rt=t;return}rt=t=e}while(t!==null);zt===0&&(zt=5)}function e0(e,t){do{var n=Dw(e.alternate,e);if(n!==null){n.flags&=32767,rt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){rt=e;return}rt=e=n}while(e!==null);zt=6,rt=null}function My(e,t,n,i,s,r,a,l,u){e.cancelPendingCommit=null;do Uc();while(me!==0);if(_t&6)throw Error(U(327));if(t!==null){if(t===e.current)throw Error(U(177));if(r=t.lanes|t.childLanes,r|=im,pb(e,n,r,a,l,u),e===It&&(rt=It=null,ct=0),Yr=t,Hi=e,Mr=n,Wf=r,Jf=s,YT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,qw(Cu,function(){return a0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Z.T,Z.T=null,s=pt.p,pt.p=2,a=_t,_t|=4;try{xw(e,t,n)}finally{_t=a,pt.p=s,Z.T=i}}me=1,n0(),i0(),s0()}}function n0(){if(me===1){me=0;var e=Hi,t=Yr,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Z.T,Z.T=null;var i=pt.p;pt.p=2;var s=_t;_t|=4;try{BT(t,e);var r=rd,a=SE(e.containerInfo),l=r.focusedElem,u=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&AE(l.ownerDocument.documentElement,l)){if(u!==null&&nm(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var _=m.getSelection(),x=l.textContent.length,V=Math.min(u.start,x),k=u.end===void 0?V:Math.min(u.end,x);!_.extend&&V>k&&(a=k,k=V,V=a);var A=ey(l,V),v=ey(l,k);if(A&&v&&(_.rangeCount!==1||_.anchorNode!==A.node||_.anchorOffset!==A.offset||_.focusNode!==v.node||_.focusOffset!==v.offset)){var w=g.createRange();w.setStart(A.node,A.offset),_.removeAllRanges(),V>k?(_.addRange(w),_.extend(v.node,v.offset)):(w.setEnd(v.node,v.offset),_.addRange(w))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Ju=!!sd,rd=sd=null}finally{_t=s,pt.p=i,Z.T=n}}e.current=t,me=2}}function i0(){if(me===2){me=0;var e=Hi,t=Yr,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Z.T,Z.T=null;var i=pt.p;pt.p=2;var s=_t;_t|=4;try{UT(e,t.alternate,t)}finally{_t=s,pt.p=i,Z.T=n}}me=3}}function s0(){if(me===4||me===3){me=0,ob();var e=Hi,t=Yr,n=Mr,i=YT;t.subtreeFlags&10256||t.flags&10256?me=5:(me=0,Yr=Hi=null,r0(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(qi=null),Kd(n),t=t.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(Go,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Z.T,s=pt.p,pt.p=2,Z.T=null;try{for(var r=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];r(l.value,{componentStack:l.stack})}}finally{Z.T=t,pt.p=s}}Mr&3&&Uc(),jn(e),s=e.pendingLanes,n&4194090&&s&42?e===td?uo++:(uo=0,td=e):uo=0,nl(0)}}function r0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Zo(t)))}function Uc(e){return n0(),i0(),s0(),a0()}function a0(){if(me!==5)return!1;var e=Hi,t=Wf;Wf=0;var n=Kd(Mr),i=Z.T,s=pt.p;try{pt.p=32>n?32:n,Z.T=null,n=Jf,Jf=null;var r=Hi,a=Mr;if(me=0,Yr=Hi=null,Mr=0,_t&6)throw Error(U(331));var l=_t;if(_t|=4,QT(r.current),HT(r,r.current,a,n),_t=l,nl(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(Go,r)}catch{}return!0}finally{pt.p=s,Z.T=i,r0(e,t)}}function ky(e,t,n){t=hn(n,t),t=$f(e.stateNode,t,2),e=Bi(e,t,2),e!==null&&(Qo(e,2),jn(e))}function wt(e,t,n){if(e.tag===3)ky(e,e,n);else for(;t!==null;){if(t.tag===3){ky(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(qi===null||!qi.has(i))){e=hn(n,e),n=ST(2),i=Bi(t,n,2),i!==null&&(bT(n,i,t,e),Qo(i,2),jn(i));break}}t=t.return}}function Jh(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Mw;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(Im=!0,s.add(n),e=jw.bind(null,e,t,n),t.then(e,e))}function jw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,It===e&&(ct&n)===n&&(zt===4||zt===3&&(ct&62914560)===ct&&300>Dn()-Nm?!(_t&2)&&Kr(e,0):Cm|=n,$r===ct&&($r=0)),jn(e)}function o0(e,t){t===0&&(t=nE()),e=oa(e,t),e!==null&&(Qo(e,t),jn(e))}function zw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),o0(e,n)}function Bw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(t),o0(e,n)}function qw(e,t){return $d(e,t)}var Qu=null,lr=null,nd=!1,$u=!1,tf=!1,Os=0;function jn(e){e!==lr&&e.next===null&&(lr===null?Qu=lr=e:lr=lr.next=e),$u=!0,nd||(nd=!0,Gw())}function nl(e,t){if(!tf&&$u){tf=!0;do for(var n=!1,i=Qu;i!==null;){if(e!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,l=i.pingedLanes;r=(1<<31-We(42|e)+1)-1,r&=s&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Py(i,r))}else r=ct,r=wc(i,i===It?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||Fo(i,r)||(n=!0,Py(i,r));i=i.next}while(n);tf=!1}}function Hw(){l0()}function l0(){$u=nd=!1;var e=0;Os!==0&&(Ww()&&(e=Os),Os=0);for(var t=Dn(),n=null,i=Qu;i!==null;){var s=i.next,r=u0(i,t);r===0?(i.next=null,n===null?Qu=s:n.next=s,s===null&&(lr=n)):(n=i,(e!==0||r&3)&&($u=!0)),i=s}nl(e)}function u0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var a=31-We(r),l=1<<a,u=s[a];u===-1?(!(l&n)||l&i)&&(s[a]=gb(l,t)):u<=t&&(e.expiredLanes|=l),r&=~l}if(t=It,n=ct,n=wc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(yt===2||yt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Rh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Fo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Rh(i),Kd(n)){case 2:case 8:n=Jv;break;case 32:n=Cu;break;case 268435456:n=tE;break;default:n=Cu}return i=c0.bind(null,e),n=$d(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Rh(i),e.callbackPriority=2,e.callbackNode=null,2}function c0(e,t){if(me!==0&&me!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Uc()&&e.callbackNode!==n)return null;var i=ct;return i=wc(e,e===It?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(XT(e,i,t),u0(e,Dn()),e.callbackNode!=null&&e.callbackNode===n?c0.bind(null,e):null)}function Py(e,t){if(Uc())return null;XT(e,t,!0)}function Gw(){tR(function(){_t&6?$d(Wv,Hw):l0()})}function xm(){return Os===0&&(Os=eE()),Os}function Uy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:iu(""+e)}function Ly(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Fw(e,t,n,i,s){if(t==="submit"&&n&&n.stateNode===s){var r=Uy((s[je]||null).action),a=i.submitter;a&&(t=(t=a[je]||null)?Uy(t.formAction):a.getAttribute("formAction"),t!==null&&(r=t,a=null));var l=new Rc("action","action",null,i,s);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Os!==0){var u=a?Ly(s,a):new FormData(s);Ff(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?Ly(s,a):new FormData(s),Ff(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var ef=0;ef<Vf.length;ef++){var nf=Vf[ef],Qw=nf.toLowerCase(),$w=nf[0].toUpperCase()+nf.slice(1);Sn(Qw,"on"+$w)}Sn(wE,"onAnimationEnd");Sn(RE,"onAnimationIteration");Sn(IE,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(cw,"onTransitionRun");Sn(hw,"onTransitionStart");Sn(fw,"onTransitionCancel");Sn(CE,"onTransitionEnd");Br("onMouseEnter",["mouseout","mouseover"]);Br("onMouseLeave",["mouseout","mouseover"]);Br("onPointerEnter",["pointerout","pointerover"]);Br("onPointerLeave",["pointerout","pointerover"]);Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ro));function h0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=h;try{r(s)}catch(d){zu(d)}s.currentTarget=null,r=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=h;try{r(s)}catch(d){zu(d)}s.currentTarget=null,r=u}}}}function st(e,t){var n=t[Rf];n===void 0&&(n=t[Rf]=new Set);var i=e+"__bubble";n.has(i)||(f0(t,e,2,!1),n.add(i))}function sf(e,t,n){var i=0;t&&(i|=4),f0(n,e,i,t)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function Om(e){if(!e[Ql]){e[Ql]=!0,aE.forEach(function(n){n!=="selectionchange"&&(Yw.has(n)||sf(n,!1,e),sf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ql]||(t[Ql]=!0,sf("selectionchange",!1,t))}}function f0(e,t,n,i){switch(b0(t)){case 2:var s=TR;break;case 8:s=AR;break;default:s=Pm}n=s.bind(null,t,n,e),s=void 0,!Df||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function rf(e,t,n,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;l!==null;){if(a=gr(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=r=a;continue t}l=l.parentNode}}i=i.return}mE(function(){var h=r,d=Wd(n),g=[];t:{var m=NE.get(e);if(m!==void 0){var _=Rc,x=e;switch(e){case"keypress":if(ru(n)===0)break t;case"keydown":case"keyup":_=qb;break;case"focusin":x="focus",_=Mh;break;case"focusout":x="blur",_=Mh;break;case"beforeblur":case"afterblur":_=Mh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=Db;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Fb;break;case wE:case RE:case IE:_=Vb;break;case CE:_=$b;break;case"scroll":case"scrollend":_=Cb;break;case"wheel":_=Kb;break;case"copy":case"cut":case"paste":_=kb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=$p;break;case"toggle":case"beforetoggle":_=Zb}var V=(t&4)!==0,k=!V&&(e==="scroll"||e==="scrollend"),A=V?m!==null?m+"Capture":null:m;V=[];for(var v=h,w;v!==null;){var D=v;if(w=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||w===null||A===null||(D=Eo(v,A),D!=null&&V.push(Io(v,D,w))),k)break;v=v.return}0<V.length&&(m=new _(m,x,null,n,d),g.push({event:m,listeners:V}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==Nf&&(x=n.relatedTarget||n.fromElement)&&(gr(x)||x[ra]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(x=n.relatedTarget||n.toElement,_=h,x=x?gr(x):null,x!==null&&(k=Ho(x),V=x.tag,x!==k||V!==5&&V!==27&&V!==6)&&(x=null)):(_=null,x=h),_!==x)){if(V=Fp,D="onMouseLeave",A="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(V=$p,D="onPointerLeave",A="onPointerEnter",v="pointer"),k=_==null?m:Ga(_),w=x==null?m:Ga(x),m=new V(D,v+"leave",_,n,d),m.target=k,m.relatedTarget=w,D=null,gr(d)===h&&(V=new V(A,v+"enter",x,n,d),V.target=w,V.relatedTarget=k,D=V),k=D,_&&x)e:{for(V=_,A=x,v=0,w=V;w;w=sr(w))v++;for(w=0,D=A;D;D=sr(D))w++;for(;0<v-w;)V=sr(V),v--;for(;0<w-v;)A=sr(A),w--;for(;v--;){if(V===A||A!==null&&V===A.alternate)break e;V=sr(V),A=sr(A)}V=null}else V=null;_!==null&&jy(g,m,_,V,!1),x!==null&&k!==null&&jy(g,k,x,V,!0)}}t:{if(m=h?Ga(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=Zp;else if(Xp(m))if(EE)L=ow;else{L=rw;var q=sw}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&Zd(h.elementType)&&(L=Zp):L=aw;if(L&&(L=L(e,h))){vE(g,L,n,d);break t}q&&q(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Cf(m,"number",m.value)}switch(q=h?Ga(h):window,e){case"focusin":(Xp(q)||q.contentEditable==="true")&&(_r=q,xf=h,Ja=null);break;case"focusout":Ja=xf=_r=null;break;case"mousedown":Of=!0;break;case"contextmenu":case"mouseup":case"dragend":Of=!1,ny(g,n,d);break;case"selectionchange":if(uw)break;case"keydown":case"keyup":ny(g,n,d)}var E;if(em)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else yr?yE(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(pE&&n.locale!=="ko"&&(yr||y!=="onCompositionStart"?y==="onCompositionEnd"&&yr&&(E=gE()):(ki=d,Jd="value"in ki?ki.value:ki.textContent,yr=!0)),q=Yu(h,y),0<q.length&&(y=new Qp(y,e,null,n,d),g.push({event:y,listeners:q}),E?y.data=E:(E=_E(n),E!==null&&(y.data=E)))),(E=Jb?tw(e,n):ew(e,n))&&(y=Yu(h,"onBeforeInput"),0<y.length&&(q=new Qp("onBeforeInput","beforeinput",null,n,d),g.push({event:q,listeners:y}),q.data=E)),Fw(g,e,h,n,d)}h0(g,t)})}function Io(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yu(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=Eo(e,n),s!=null&&i.unshift(Io(e,s,r)),s=Eo(e,t),s!=null&&i.push(Io(e,s,r))),e.tag===3)return i;e=e.return}return[]}function sr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function jy(e,t,n,i,s){for(var r=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,s?(h=Eo(n,r),h!=null&&a.unshift(Io(n,h,u))):s||(h=Eo(n,r),h!=null&&a.push(Io(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Kw=/\r\n?/g,Xw=/\u0000|\uFFFD/g;function zy(e){return(typeof e=="string"?e:""+e).replace(Kw,`
`).replace(Xw,"")}function d0(e,t){return t=zy(t),zy(e)===t}function Lc(){}function Et(e,t,n,i,s,r){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||qr(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&qr(e,""+i);break;case"className":jl(e,"class",i);break;case"tabIndex":jl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":jl(e,n,i);break;case"style":dE(e,i,r);break;case"data":if(t!=="object"){jl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=iu(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&Et(e,t,"name",s.name,s,null),Et(e,t,"formEncType",s.formEncType,s,null),Et(e,t,"formMethod",s.formMethod,s,null),Et(e,t,"formTarget",s.formTarget,s,null)):(Et(e,t,"encType",s.encType,s,null),Et(e,t,"method",s.method,s,null),Et(e,t,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=iu(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Lc);break;case"onScroll":i!=null&&st("scroll",e);break;case"onScrollEnd":i!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=iu(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":st("beforetoggle",e),st("toggle",e),nu(e,"popover",i);break;case"xlinkActuate":Hn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Hn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Hn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Hn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Hn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Hn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Hn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Hn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Hn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":nu(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Rb.get(n)||n,nu(e,n,i))}}function id(e,t,n,i,s,r){switch(n){case"style":dE(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"children":typeof i=="string"?qr(e,i):(typeof i=="number"||typeof i=="bigint")&&qr(e,""+i);break;case"onScroll":i!=null&&st("scroll",e);break;case"onScrollEnd":i!=null&&st("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Lc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oE.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),r=e[je]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):nu(e,n,i)}}}function ye(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:Et(e,t,r,a,n,null)}}s&&Et(e,t,"srcSet",n.srcSet,n,null),i&&Et(e,t,"src",n.src,n,null);return;case"input":st("invalid",e);var l=r=a=s=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,t));break;default:Et(e,t,i,d,n,null)}}cE(e,r,l,u,h,a,s,!1),Nu(e);return;case"select":st("invalid",e),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Et(e,t,s,l,n,null)}t=r,n=a,e.multiple=!!i,t!=null?Cr(e,!!i,t,!1):n!=null&&Cr(e,!!i,n,!0);return;case"textarea":st("invalid",e),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:Et(e,t,a,l,n,null)}fE(e,i,s,r),Nu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Et(e,t,u,i,n,null)}return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(i=0;i<Ro.length;i++)st(Ro[i],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:Et(e,t,h,i,n,null)}return;default:if(Zd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&id(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Et(e,t,l,i,n,null))}function Zw(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||Et(e,t,_,null,i,g)}}for(var m in i){var _=i[m];if(g=n[m],i.hasOwnProperty(m)&&(_!=null||g!=null))switch(m){case"type":r=_;break;case"name":s=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(U(137,t));break;default:_!==g&&Et(e,t,m,_,i,g)}}If(e,a,l,u,h,d,r,s);return;case"select":_=a=l=m=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(r)||Et(e,t,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":m=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&Et(e,t,s,r,i,u)}t=l,n=a,i=_,m!=null?Cr(e,!!n,m,!1):!!i!=!!n&&(t!=null?Cr(e,!!n,t,!0):Cr(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Et(e,t,l,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":m=s;break;case"defaultValue":_=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(U(91));break;default:s!==r&&Et(e,t,a,s,i,r)}hE(e,m,_);return;case"option":for(var x in n)if(m=n[x],n.hasOwnProperty(x)&&m!=null&&!i.hasOwnProperty(x))switch(x){case"selected":e.selected=!1;break;default:Et(e,t,x,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Et(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!=null&&!i.hasOwnProperty(V)&&Et(e,t,V,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,t));break;default:Et(e,t,h,m,i,_)}return;default:if(Zd(t)){for(var k in n)m=n[k],n.hasOwnProperty(k)&&m!==void 0&&!i.hasOwnProperty(k)&&id(e,t,k,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||id(e,t,d,m,i,_);return}}for(var A in n)m=n[A],n.hasOwnProperty(A)&&m!=null&&!i.hasOwnProperty(A)&&Et(e,t,A,null,i,m);for(g in i)m=i[g],_=n[g],!i.hasOwnProperty(g)||m===_||m==null&&_==null||Et(e,t,g,m,i,_)}var sd=null,rd=null;function Ku(e){return e.nodeType===9?e:e.ownerDocument}function By(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function ad(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var af=null;function Ww(){var e=window.event;return e&&e.type==="popstate"?e===af?!1:(af=e,!0):(af=null,!1)}var g0=typeof setTimeout=="function"?setTimeout:void 0,Jw=typeof clearTimeout=="function"?clearTimeout:void 0,qy=typeof Promise=="function"?Promise:void 0,tR=typeof queueMicrotask=="function"?queueMicrotask:typeof qy<"u"?function(e){return qy.resolve(null).then(e).catch(eR)}:g0;function eR(e){setTimeout(function(){throw e})}function hs(e){return e==="head"}function Hy(e,t){var n=t,i=0,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&co(a.documentElement),n&2&&co(a.body),n&4)for(n=a.head,co(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[$o]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(s===0){e.removeChild(r),Oo(t);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);Oo(t)}function od(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":od(n),Xd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function nR(e,t,n,i){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[$o])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Tn(e.nextSibling),e===null)break}return null}function iR(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Tn(e.nextSibling),e===null))return null;return e}function ld(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function sR(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Tn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var ud=null;function Gy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function p0(e,t,n){switch(t=Ku(n),e){case"html":if(e=t.documentElement,!e)throw Error(U(452));return e;case"head":if(e=t.head,!e)throw Error(U(453));return e;case"body":if(e=t.body,!e)throw Error(U(454));return e;default:throw Error(U(451))}}function co(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Xd(e)}var mn=new Map,Fy=new Set;function Xu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var di=pt.d;pt.d={f:rR,r:aR,D:oR,C:lR,L:uR,m:cR,X:fR,S:hR,M:dR};function rR(){var e=di.f(),t=kc();return e||t}function aR(e){var t=aa(e);t!==null&&t.tag===5&&t.type==="form"?uT(t):di.r(e)}var ua=typeof document>"u"?null:document;function y0(e,t,n){var i=ua;if(i&&typeof t=="string"&&t){var s=cn(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),Fy.has(s)||(Fy.add(s),e={rel:e,crossOrigin:n,href:t},i.querySelector(s)===null&&(t=i.createElement("link"),ye(t,"link",e),se(t),i.head.appendChild(t)))}}function oR(e){di.D(e),y0("dns-prefetch",e,null)}function lR(e,t){di.C(e,t),y0("preconnect",e,t)}function uR(e,t,n){di.L(e,t,n);var i=ua;if(i&&e&&t){var s='link[rel="preload"][as="'+cn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+cn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+cn(n.imageSizes)+'"]')):s+='[href="'+cn(e)+'"]';var r=s;switch(t){case"style":r=Xr(e);break;case"script":r=ca(e)}mn.has(r)||(e=xt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),mn.set(r,e),i.querySelector(s)!==null||t==="style"&&i.querySelector(il(r))||t==="script"&&i.querySelector(sl(r))||(t=i.createElement("link"),ye(t,"link",e),se(t),i.head.appendChild(t)))}}function cR(e,t){di.m(e,t);var n=ua;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+cn(i)+'"][href="'+cn(e)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=ca(e)}if(!mn.has(r)&&(e=xt({rel:"modulepreload",href:e},t),mn.set(r,e),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(sl(r)))return}i=n.createElement("link"),ye(i,"link",e),se(i),n.head.appendChild(i)}}}function hR(e,t,n){di.S(e,t,n);var i=ua;if(i&&e){var s=Ir(i).hoistableStyles,r=Xr(e);t=t||"default";var a=s.get(r);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(il(r)))l.loading=5;else{e=xt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=mn.get(r))&&Vm(e,n);var u=a=i.createElement("link");se(u),ye(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,fu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},s.set(r,a)}}}function fR(e,t){di.X(e,t);var n=ua;if(n&&e){var i=Ir(n).hoistableScripts,s=ca(e),r=i.get(s);r||(r=n.querySelector(sl(s)),r||(e=xt({src:e,async:!0},t),(t=mn.get(s))&&Mm(e,t),r=n.createElement("script"),se(r),ye(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function dR(e,t){di.M(e,t);var n=ua;if(n&&e){var i=Ir(n).hoistableScripts,s=ca(e),r=i.get(s);r||(r=n.querySelector(sl(s)),r||(e=xt({src:e,async:!0,type:"module"},t),(t=mn.get(s))&&Mm(e,t),r=n.createElement("script"),se(r),ye(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function Qy(e,t,n,i){var s=(s=ji.current)?Xu(s):null;if(!s)throw Error(U(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Xr(n.href),n=Ir(s).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Xr(n.href);var r=Ir(s).hoistableStyles,a=r.get(e);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,a),(r=s.querySelector(il(e)))&&!r._p&&(a.instance=r,a.state.loading=5),mn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},mn.set(e,n),r||mR(s,e,n,a.state))),t&&i===null)throw Error(U(528,""));return a}if(t&&i!==null)throw Error(U(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ca(n),n=Ir(s).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,e))}}function Xr(e){return'href="'+cn(e)+'"'}function il(e){return'link[rel="stylesheet"]['+e+"]"}function _0(e){return xt({},e,{"data-precedence":e.precedence,precedence:null})}function mR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),ye(t,"link",n),se(t),e.head.appendChild(t))}function ca(e){return'[src="'+cn(e)+'"]'}function sl(e){return"script[async]"+e}function $y(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+cn(n.href)+'"]');if(i)return t.instance=i,se(i),i;var s=xt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),se(i),ye(i,"style",s),fu(i,n.precedence,e),t.instance=i;case"stylesheet":s=Xr(n.href);var r=e.querySelector(il(s));if(r)return t.state.loading|=4,t.instance=r,se(r),r;i=_0(n),(s=mn.get(s))&&Vm(i,s),r=(e.ownerDocument||e).createElement("link"),se(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ye(r,"link",i),t.state.loading|=4,fu(r,n.precedence,e),t.instance=r;case"script":return r=ca(n.src),(s=e.querySelector(sl(r)))?(t.instance=s,se(s),s):(i=n,(s=mn.get(r))&&(i=xt({},n),Mm(i,s)),e=e.ownerDocument||e,s=e.createElement("script"),se(s),ye(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(U(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,fu(i,n.precedence,e));return t.instance}function fu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Vm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Mm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var du=null;function Yy(e,t,n){if(du===null){var i=new Map,s=du=new Map;s.set(n,i)}else s=du,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[$o]||r[we]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(r):i.set(a,[r])}}return i}function Ky(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function gR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function v0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Co=null;function pR(){}function yR(e,t,n){if(Co===null)throw Error(U(475));var i=Co;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=Xr(n.href),r=e.querySelector(il(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Zu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=r,se(r);return}r=e.ownerDocument||e,n=_0(n),(s=mn.get(s))&&Vm(n,s),r=r.createElement("link"),se(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ye(r,"link",n),t.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Zu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function _R(){if(Co===null)throw Error(U(475));var e=Co;return e.stylesheets&&e.count===0&&cd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&cd(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Zu(){if(this.count--,this.count===0){if(this.stylesheets)cd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wu=null;function cd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wu=new Map,t.forEach(vR,e),Wu=null,Zu.call(e))}function vR(e,t){if(!(t.state.loading&4)){var n=Wu.get(e);if(n)var i=n.get(null);else{n=new Map,Wu.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=t.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=Zu.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var No={$$typeof:$n,Provider:null,Consumer:null,_currentValue:Rs,_currentValue2:Rs,_threadCount:0};function ER(e,t,n,i,s,r,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ih(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ih(0),this.hiddenUpdates=Ih(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function E0(e,t,n,i,s,r,a,l,u,h,d,g){return e=new ER(e,t,n,a,l,u,h,g),t=1,r===!0&&(t|=24),r=Ye(3,null,null,t),e.current=r,r.stateNode=e,t=lm(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},cm(r),e}function T0(e){return e?(e=Tr,e):Tr}function A0(e,t,n,i,s,r){s=T0(s),i.context===null?i.context=s:i.pendingContext=s,i=zi(t),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=Bi(e,i,t),n!==null&&(tn(n,e,t),no(n,e,t))}function Xy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function km(e,t){Xy(e,t),(e=e.alternate)&&Xy(e,t)}function S0(e){if(e.tag===13){var t=oa(e,67108864);t!==null&&tn(t,e,67108864),km(e,67108864)}}var Ju=!0;function TR(e,t,n,i){var s=Z.T;Z.T=null;var r=pt.p;try{pt.p=2,Pm(e,t,n,i)}finally{pt.p=r,Z.T=s}}function AR(e,t,n,i){var s=Z.T;Z.T=null;var r=pt.p;try{pt.p=8,Pm(e,t,n,i)}finally{pt.p=r,Z.T=s}}function Pm(e,t,n,i){if(Ju){var s=hd(i);if(s===null)rf(e,t,i,tc,n),Zy(e,i);else if(bR(s,e,t,n,i))i.stopPropagation();else if(Zy(e,i),t&4&&-1<SR.indexOf(e)){for(;s!==null;){var r=aa(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=Ts(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-We(a);l.entanglements[1]|=u,a&=~u}jn(r),!(_t&6)&&(Gu=Dn()+500,nl(0))}}break;case 13:l=oa(r,2),l!==null&&tn(l,r,2),kc(),km(r,2)}if(r=hd(i),r===null&&rf(e,t,i,tc,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else rf(e,t,i,null,n)}}function hd(e){return e=Wd(e),Um(e)}var tc=null;function Um(e){if(tc=null,e=gr(e),e!==null){var t=Ho(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Yv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return tc=e,null}function b0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lb()){case Wv:return 2;case Jv:return 8;case Cu:case ub:return 32;case tE:return 268435456;default:return 32}default:return 32}}var fd=!1,Gi=null,Fi=null,Qi=null,Do=new Map,xo=new Map,Ni=[],SR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zy(e,t){switch(e){case"focusin":case"focusout":Gi=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":Do.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xo.delete(t.pointerId)}}function Ba(e,t,n,i,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=aa(t),t!==null&&S0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function bR(e,t,n,i,s){switch(t){case"focusin":return Gi=Ba(Gi,e,t,n,i,s),!0;case"dragenter":return Fi=Ba(Fi,e,t,n,i,s),!0;case"mouseover":return Qi=Ba(Qi,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return Do.set(r,Ba(Do.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,xo.set(r,Ba(xo.get(r)||null,e,t,n,i,s)),!0}return!1}function w0(e){var t=gr(e.target);if(t!==null){var n=Ho(t);if(n!==null){if(t=n.tag,t===13){if(t=Yv(n),t!==null){e.blockedOn=t,yb(e.priority,function(){if(n.tag===13){var i=Je();i=Yd(i);var s=oa(n,i);s!==null&&tn(s,n,i),km(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=hd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Nf=i,n.target.dispatchEvent(i),Nf=null}else return t=aa(n),t!==null&&S0(t),e.blockedOn=n,!1;t.shift()}return!0}function Wy(e,t,n){mu(e)&&n.delete(t)}function wR(){fd=!1,Gi!==null&&mu(Gi)&&(Gi=null),Fi!==null&&mu(Fi)&&(Fi=null),Qi!==null&&mu(Qi)&&(Qi=null),Do.forEach(Wy),xo.forEach(Wy)}function $l(e,t){e.blockedOn===t&&(e.blockedOn=null,fd||(fd=!0,te.unstable_scheduleCallback(te.unstable_NormalPriority,wR)))}var Yl=null;function Jy(e){Yl!==e&&(Yl=e,te.unstable_scheduleCallback(te.unstable_NormalPriority,function(){Yl===e&&(Yl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],s=e[t+2];if(typeof i!="function"){if(Um(i||n)===null)continue;break}var r=aa(n);r!==null&&(e.splice(t,3),t-=3,Ff(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Oo(e){function t(u){return $l(u,e)}Gi!==null&&$l(Gi,e),Fi!==null&&$l(Fi,e),Qi!==null&&$l(Qi,e),Do.forEach(t),xo.forEach(t);for(var n=0;n<Ni.length;n++){var i=Ni[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Ni.length&&(n=Ni[0],n.blockedOn===null);)w0(n),n.blockedOn===null&&Ni.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[je]||null;if(typeof r=="function")a||Jy(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[je]||null)l=a.formAction;else if(Um(s)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Jy(n)}}}function Lm(e){this._internalRoot=e}jc.prototype.render=Lm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));var n=t.current,i=Je();A0(n,i,e,t,null,null)};jc.prototype.unmount=Lm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;A0(e.current,2,null,e,null,null),kc(),t[ra]=null}};function jc(e){this._internalRoot=e}jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=rE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ni.length&&t!==0&&t<Ni[n].priority;n++);Ni.splice(n,0,e),n===0&&w0(e)}};var t_=Qv.version;if(t_!=="19.1.1")throw Error(U(527,t_,"19.1.1"));pt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=eb(t),e=e!==null?Kv(e):null,e=e===null?null:e.stateNode,e};var RR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kl.isDisabled&&Kl.supportsFiber)try{Go=Kl.inject(RR),Ze=Kl}catch{}}Sc.createRoot=function(e,t){if(!$v(e))throw Error(U(299));var n=!1,i="",s=ET,r=TT,a=AT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=E0(e,1,!1,null,null,n,i,s,r,a,l,null),e[ra]=t.current,Om(e),new Lm(t)};Sc.hydrateRoot=function(e,t,n){if(!$v(e))throw Error(U(299));var i=!1,s="",r=ET,a=TT,l=AT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=E0(e,1,!0,t,n??null,i,s,r,a,l,u,h),t.context=T0(null),n=t.current,i=Je(),i=Yd(i),s=zi(i),s.callback=null,Bi(n,s,i),n=i,t.current.lanes=n,Qo(t,n),jn(t),e[ra]=t.current,Om(e),new jc(t)};Sc.version="19.1.1";function R0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R0)}catch(e){console.error(e)}}R0(),zv.exports=Sc;var IR=zv.exports;const CR=()=>{};var e_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},NR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return t.join("")},C0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,h=u?e[s+2]:0,d=r>>2,g=(r&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[g],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(I0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):NR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const g=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||l==null||h==null||g==null)throw new DR;const m=r<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const x=h<<6&192|g;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class DR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xR=function(e){const t=I0(e);return C0.encodeByteArray(t,!0)},ec=function(e){return xR(e).replace(/\./g,"")},N0=function(e){try{return C0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=()=>OR().__FIREBASE_DEFAULTS__,MR=()=>{if(typeof process>"u"||typeof e_>"u")return;const e=e_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},kR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&N0(e[1]);return t&&JSON.parse(t)},zc=()=>{try{return CR()||VR()||MR()||kR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},D0=e=>{var t,n;return(n=(t=zc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},PR=e=>{const t=D0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},x0=()=>{var e;return(e=zc())==null?void 0:e.config},O0=e=>{var t;return(t=zc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function V0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ec(JSON.stringify(n)),ec(JSON.stringify(a)),""].join(".")}const ho={};function jR(){const e={prod:[],emulator:[]};for(const t of Object.keys(ho))ho[t]?e.emulator.push(t):e.prod.push(t);return e}function zR(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let n_=!1;function M0(e,t){if(typeof window>"u"||typeof document>"u"||!ha(window.location.host)||ho[e]===t||ho[e]||n_)return;ho[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",r=jR().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{n_=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=zR(i),_=n("text"),x=document.getElementById(_)||document.createElement("span"),V=n("learnmore"),k=document.getElementById(V)||document.createElement("a"),A=n("preprendIcon"),v=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const w=m.element;l(w),d(k,V);const D=h();u(v,A),w.append(v,x,k,D),document.body.appendChild(w)}r?(x.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function qR(){var t;const e=(t=zc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function FR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QR(){const e=Ie();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function $R(){return!qR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YR(){try{return typeof indexedDB=="object"}catch{return!1}}function KR(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)==null?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="FirebaseError";class mi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=XR,Object.setPrototypeOf(this,mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rl.prototype.create)}}class rl{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],a=r?ZR(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new mi(s,l,i)}}function ZR(e,t){return e.replace(WR,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const WR=/\{\$([^}]+)}/g;function JR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Us(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],a=t[s];if(i_(r)&&i_(a)){if(!Us(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function i_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function t2(e,t){const n=new e2(e,t);return n.subscribe.bind(n)}class e2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");n2(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=of),s.error===void 0&&(s.error=of),s.complete===void 0&&(s.complete=of);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function n2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function of(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(e){return e&&e._delegate?e._delegate:e}class Ls{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new UR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(r2(t))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=bs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=bs){return this.instances.has(t)}getOptions(t=bs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:s2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=bs){return this.component?this.component.multipleInstances?t:bs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function s2(e){return e===bs?void 0:e}function r2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new i2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(at||(at={}));const o2={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},l2=at.INFO,u2={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},c2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=u2[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class jm{constructor(t){this.name=t,this._logLevel=l2,this._logHandler=c2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in at))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?o2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...t),this._logHandler(this,at.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...t),this._logHandler(this,at.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,at.INFO,...t),this._logHandler(this,at.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,at.WARN,...t),this._logHandler(this,at.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...t),this._logHandler(this,at.ERROR,...t)}}const h2=(e,t)=>t.some(n=>e instanceof n);let s_,r_;function f2(){return s_||(s_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d2(){return r_||(r_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k0=new WeakMap,dd=new WeakMap,P0=new WeakMap,lf=new WeakMap,zm=new WeakMap;function m2(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{n($i(e.result)),s()},a=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&k0.set(n,e)}).catch(()=>{}),zm.set(t,e),t}function g2(e){if(dd.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});dd.set(e,t)}let md={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return dd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||P0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $i(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function p2(e){md=e(md)}function y2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(uf(this),t,...n);return P0.set(i,t.sort?t.sort():[t]),$i(i)}:d2().includes(e)?function(...t){return e.apply(uf(this),t),$i(k0.get(this))}:function(...t){return $i(e.apply(uf(this),t))}}function _2(e){return typeof e=="function"?y2(e):(e instanceof IDBTransaction&&g2(e),h2(e,f2())?new Proxy(e,md):e)}function $i(e){if(e instanceof IDBRequest)return m2(e);if(lf.has(e))return lf.get(e);const t=_2(e);return t!==e&&(lf.set(e,t),zm.set(t,e)),t}const uf=e=>zm.get(e);function v2(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),l=$i(a);return i&&a.addEventListener("upgradeneeded",u=>{i($i(a.result),u.oldVersion,u.newVersion,$i(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const E2=["get","getKey","getAll","getAllKeys","count"],T2=["put","add","delete","clear"],cf=new Map;function a_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(cf.get(t))return cf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=T2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||E2.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return cf.set(t,r),r}p2(e=>({...e,get:(t,n,i)=>a_(t,n)||e.get(t,n,i),has:(t,n)=>!!a_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(S2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function S2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const gd="@firebase/app",o_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=new jm("@firebase/app"),b2="@firebase/app-compat",w2="@firebase/analytics-compat",R2="@firebase/analytics",I2="@firebase/app-check-compat",C2="@firebase/app-check",N2="@firebase/auth",D2="@firebase/auth-compat",x2="@firebase/database",O2="@firebase/data-connect",V2="@firebase/database-compat",M2="@firebase/functions",k2="@firebase/functions-compat",P2="@firebase/installations",U2="@firebase/installations-compat",L2="@firebase/messaging",j2="@firebase/messaging-compat",z2="@firebase/performance",B2="@firebase/performance-compat",q2="@firebase/remote-config",H2="@firebase/remote-config-compat",G2="@firebase/storage",F2="@firebase/storage-compat",Q2="@firebase/firestore",$2="@firebase/ai",Y2="@firebase/firestore-compat",K2="firebase",X2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="[DEFAULT]",Z2={[gd]:"fire-core",[b2]:"fire-core-compat",[R2]:"fire-analytics",[w2]:"fire-analytics-compat",[C2]:"fire-app-check",[I2]:"fire-app-check-compat",[N2]:"fire-auth",[D2]:"fire-auth-compat",[x2]:"fire-rtdb",[O2]:"fire-data-connect",[V2]:"fire-rtdb-compat",[M2]:"fire-fn",[k2]:"fire-fn-compat",[P2]:"fire-iid",[U2]:"fire-iid-compat",[L2]:"fire-fcm",[j2]:"fire-fcm-compat",[z2]:"fire-perf",[B2]:"fire-perf-compat",[q2]:"fire-rc",[H2]:"fire-rc-compat",[G2]:"fire-gcs",[F2]:"fire-gcs-compat",[Q2]:"fire-fst",[Y2]:"fire-fst-compat",[$2]:"fire-vertex","fire-js":"fire-js",[K2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new Map,W2=new Map,yd=new Map;function l_(e,t){try{e.container.addComponent(t)}catch(n){oi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Zr(e){const t=e.name;if(yd.has(t))return oi.debug(`There were multiple attempts to register component ${t}.`),!1;yd.set(t,e);for(const n of nc.values())l_(n,e);for(const n of W2.values())l_(n,e);return!0}function Bm(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function vn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new rl("app","Firebase",J2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=X2;function U0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:pd,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw Yi.create("bad-app-name",{appName:String(s)});if(n||(n=x0()),!n)throw Yi.create("no-options");const r=nc.get(s);if(r){if(Us(n,r.options)&&Us(i,r.config))return r;throw Yi.create("duplicate-app",{appName:s})}const a=new a2(s);for(const u of yd.values())a.addComponent(u);const l=new tI(n,i,a);return nc.set(s,l),l}function L0(e=pd){const t=nc.get(e);if(!t&&e===pd&&x0())return U0();if(!t)throw Yi.create("no-app",{appName:e});return t}function Ki(e,t,n){let i=Z2[e]??e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),oi.warn(a.join(" "));return}Zr(new Ls(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="firebase-heartbeat-database",nI=1,Vo="firebase-heartbeat-store";let hf=null;function j0(){return hf||(hf=v2(eI,nI,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Vo)}catch(n){console.warn(n)}}}}).catch(e=>{throw Yi.create("idb-open",{originalErrorMessage:e.message})})),hf}async function iI(e){try{const n=(await j0()).transaction(Vo),i=await n.objectStore(Vo).get(z0(e));return await n.done,i}catch(t){if(t instanceof mi)oi.warn(t.message);else{const n=Yi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});oi.warn(n.message)}}}async function u_(e,t){try{const i=(await j0()).transaction(Vo,"readwrite");await i.objectStore(Vo).put(t,z0(e)),await i.done}catch(n){if(n instanceof mi)oi.warn(n.message);else{const i=Yi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});oi.warn(i.message)}}}function z0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=1024,rI=30;class aI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=c_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>rI){const a=uI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){oi.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=c_(),{heartbeatsToSend:i,unsentEntries:s}=oI(this._heartbeatsCache.heartbeats),r=ec(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return oi.warn(n),""}}}function c_(){return new Date().toISOString().substring(0,10)}function oI(e,t=sI){const n=[];let i=e.slice();for(const s of e){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),h_(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),h_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class lI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YR()?KR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return u_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return u_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function h_(e){return ec(JSON.stringify({version:2,heartbeats:e})).length}function uI(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(e){Zr(new Ls("platform-logger",t=>new A2(t),"PRIVATE")),Zr(new Ls("heartbeat",t=>new aI(t),"PRIVATE")),Ki(gd,o_,e),Ki(gd,o_,"esm2020"),Ki("fire-js","")}cI("");var hI="firebase",fI="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ki(hI,fI,"app");var f_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xi,B0;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,y){function T(){}T.prototype=y.prototype,E.D=y.prototype,E.prototype=new T,E.prototype.constructor=E,E.C=function(S,I,C){for(var b=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)b[Q-2]=arguments[Q];return y.prototype[I].apply(S,b)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,y,T){T||(T=0);var S=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)S[I]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(I=0;16>I;++I)S[I]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=E.g[0],T=E.g[1],I=E.g[2];var C=E.g[3],b=y+(C^T&(I^C))+S[0]+3614090360&4294967295;y=T+(b<<7&4294967295|b>>>25),b=C+(I^y&(T^I))+S[1]+3905402710&4294967295,C=y+(b<<12&4294967295|b>>>20),b=I+(T^C&(y^T))+S[2]+606105819&4294967295,I=C+(b<<17&4294967295|b>>>15),b=T+(y^I&(C^y))+S[3]+3250441966&4294967295,T=I+(b<<22&4294967295|b>>>10),b=y+(C^T&(I^C))+S[4]+4118548399&4294967295,y=T+(b<<7&4294967295|b>>>25),b=C+(I^y&(T^I))+S[5]+1200080426&4294967295,C=y+(b<<12&4294967295|b>>>20),b=I+(T^C&(y^T))+S[6]+2821735955&4294967295,I=C+(b<<17&4294967295|b>>>15),b=T+(y^I&(C^y))+S[7]+4249261313&4294967295,T=I+(b<<22&4294967295|b>>>10),b=y+(C^T&(I^C))+S[8]+1770035416&4294967295,y=T+(b<<7&4294967295|b>>>25),b=C+(I^y&(T^I))+S[9]+2336552879&4294967295,C=y+(b<<12&4294967295|b>>>20),b=I+(T^C&(y^T))+S[10]+4294925233&4294967295,I=C+(b<<17&4294967295|b>>>15),b=T+(y^I&(C^y))+S[11]+2304563134&4294967295,T=I+(b<<22&4294967295|b>>>10),b=y+(C^T&(I^C))+S[12]+1804603682&4294967295,y=T+(b<<7&4294967295|b>>>25),b=C+(I^y&(T^I))+S[13]+4254626195&4294967295,C=y+(b<<12&4294967295|b>>>20),b=I+(T^C&(y^T))+S[14]+2792965006&4294967295,I=C+(b<<17&4294967295|b>>>15),b=T+(y^I&(C^y))+S[15]+1236535329&4294967295,T=I+(b<<22&4294967295|b>>>10),b=y+(I^C&(T^I))+S[1]+4129170786&4294967295,y=T+(b<<5&4294967295|b>>>27),b=C+(T^I&(y^T))+S[6]+3225465664&4294967295,C=y+(b<<9&4294967295|b>>>23),b=I+(y^T&(C^y))+S[11]+643717713&4294967295,I=C+(b<<14&4294967295|b>>>18),b=T+(C^y&(I^C))+S[0]+3921069994&4294967295,T=I+(b<<20&4294967295|b>>>12),b=y+(I^C&(T^I))+S[5]+3593408605&4294967295,y=T+(b<<5&4294967295|b>>>27),b=C+(T^I&(y^T))+S[10]+38016083&4294967295,C=y+(b<<9&4294967295|b>>>23),b=I+(y^T&(C^y))+S[15]+3634488961&4294967295,I=C+(b<<14&4294967295|b>>>18),b=T+(C^y&(I^C))+S[4]+3889429448&4294967295,T=I+(b<<20&4294967295|b>>>12),b=y+(I^C&(T^I))+S[9]+568446438&4294967295,y=T+(b<<5&4294967295|b>>>27),b=C+(T^I&(y^T))+S[14]+3275163606&4294967295,C=y+(b<<9&4294967295|b>>>23),b=I+(y^T&(C^y))+S[3]+4107603335&4294967295,I=C+(b<<14&4294967295|b>>>18),b=T+(C^y&(I^C))+S[8]+1163531501&4294967295,T=I+(b<<20&4294967295|b>>>12),b=y+(I^C&(T^I))+S[13]+2850285829&4294967295,y=T+(b<<5&4294967295|b>>>27),b=C+(T^I&(y^T))+S[2]+4243563512&4294967295,C=y+(b<<9&4294967295|b>>>23),b=I+(y^T&(C^y))+S[7]+1735328473&4294967295,I=C+(b<<14&4294967295|b>>>18),b=T+(C^y&(I^C))+S[12]+2368359562&4294967295,T=I+(b<<20&4294967295|b>>>12),b=y+(T^I^C)+S[5]+4294588738&4294967295,y=T+(b<<4&4294967295|b>>>28),b=C+(y^T^I)+S[8]+2272392833&4294967295,C=y+(b<<11&4294967295|b>>>21),b=I+(C^y^T)+S[11]+1839030562&4294967295,I=C+(b<<16&4294967295|b>>>16),b=T+(I^C^y)+S[14]+4259657740&4294967295,T=I+(b<<23&4294967295|b>>>9),b=y+(T^I^C)+S[1]+2763975236&4294967295,y=T+(b<<4&4294967295|b>>>28),b=C+(y^T^I)+S[4]+1272893353&4294967295,C=y+(b<<11&4294967295|b>>>21),b=I+(C^y^T)+S[7]+4139469664&4294967295,I=C+(b<<16&4294967295|b>>>16),b=T+(I^C^y)+S[10]+3200236656&4294967295,T=I+(b<<23&4294967295|b>>>9),b=y+(T^I^C)+S[13]+681279174&4294967295,y=T+(b<<4&4294967295|b>>>28),b=C+(y^T^I)+S[0]+3936430074&4294967295,C=y+(b<<11&4294967295|b>>>21),b=I+(C^y^T)+S[3]+3572445317&4294967295,I=C+(b<<16&4294967295|b>>>16),b=T+(I^C^y)+S[6]+76029189&4294967295,T=I+(b<<23&4294967295|b>>>9),b=y+(T^I^C)+S[9]+3654602809&4294967295,y=T+(b<<4&4294967295|b>>>28),b=C+(y^T^I)+S[12]+3873151461&4294967295,C=y+(b<<11&4294967295|b>>>21),b=I+(C^y^T)+S[15]+530742520&4294967295,I=C+(b<<16&4294967295|b>>>16),b=T+(I^C^y)+S[2]+3299628645&4294967295,T=I+(b<<23&4294967295|b>>>9),b=y+(I^(T|~C))+S[0]+4096336452&4294967295,y=T+(b<<6&4294967295|b>>>26),b=C+(T^(y|~I))+S[7]+1126891415&4294967295,C=y+(b<<10&4294967295|b>>>22),b=I+(y^(C|~T))+S[14]+2878612391&4294967295,I=C+(b<<15&4294967295|b>>>17),b=T+(C^(I|~y))+S[5]+4237533241&4294967295,T=I+(b<<21&4294967295|b>>>11),b=y+(I^(T|~C))+S[12]+1700485571&4294967295,y=T+(b<<6&4294967295|b>>>26),b=C+(T^(y|~I))+S[3]+2399980690&4294967295,C=y+(b<<10&4294967295|b>>>22),b=I+(y^(C|~T))+S[10]+4293915773&4294967295,I=C+(b<<15&4294967295|b>>>17),b=T+(C^(I|~y))+S[1]+2240044497&4294967295,T=I+(b<<21&4294967295|b>>>11),b=y+(I^(T|~C))+S[8]+1873313359&4294967295,y=T+(b<<6&4294967295|b>>>26),b=C+(T^(y|~I))+S[15]+4264355552&4294967295,C=y+(b<<10&4294967295|b>>>22),b=I+(y^(C|~T))+S[6]+2734768916&4294967295,I=C+(b<<15&4294967295|b>>>17),b=T+(C^(I|~y))+S[13]+1309151649&4294967295,T=I+(b<<21&4294967295|b>>>11),b=y+(I^(T|~C))+S[4]+4149444226&4294967295,y=T+(b<<6&4294967295|b>>>26),b=C+(T^(y|~I))+S[11]+3174756917&4294967295,C=y+(b<<10&4294967295|b>>>22),b=I+(y^(C|~T))+S[2]+718787259&4294967295,I=C+(b<<15&4294967295|b>>>17),b=T+(C^(I|~y))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(I+(b<<21&4294967295|b>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+C&4294967295}i.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var T=y-this.blockSize,S=this.B,I=this.h,C=0;C<y;){if(I==0)for(;C<=T;)s(this,E,C),C+=this.blockSize;if(typeof E=="string"){for(;C<y;)if(S[I++]=E.charCodeAt(C++),I==this.blockSize){s(this,S),I=0;break}}else for(;C<y;)if(S[I++]=E[C++],I==this.blockSize){s(this,S),I=0;break}}this.h=I,this.o+=y},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var T=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=T&255,T/=256;for(this.u(E),E=Array(16),y=T=0;4>y;++y)for(var S=0;32>S;S+=8)E[T++]=this.g[y]>>>S&255;return E};function r(E,y){var T=l;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=y(E)}function a(E,y){this.h=y;for(var T=[],S=!0,I=E.length-1;0<=I;I--){var C=E[I]|0;S&&C==y||(T[I]=C,S=!1)}this.g=T}var l={};function u(E){return-128<=E&&128>E?r(E,function(y){return new a([y|0],0>y?-1:0)}):new a([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return k(h(-E));for(var y=[],T=1,S=0;E>=T;S++)y[S]=E/T|0,T*=4294967296;return new a(y,0)}function d(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return k(d(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(y,8)),S=g,I=0;I<E.length;I+=8){var C=Math.min(8,E.length-I),b=parseInt(E.substring(I,I+C),y);8>C?(C=h(Math.pow(y,C)),S=S.j(C).add(h(b))):(S=S.j(T),S=S.add(h(b)))}return S}var g=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(V(this))return-k(this).m();for(var E=0,y=1,T=0;T<this.g.length;T++){var S=this.i(T);E+=(0<=S?S:4294967296+S)*y,y*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(x(this))return"0";if(V(this))return"-"+k(this).toString(E);for(var y=h(Math.pow(E,6)),T=this,S="";;){var I=D(T,y).g;T=A(T,I.j(y));var C=((0<T.g.length?T.g[0]:T.h)>>>0).toString(E);if(T=I,x(T))return C+S;for(;6>C.length;)C="0"+C;S=C+S}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function x(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function V(E){return E.h==-1}e.l=function(E){return E=A(this,E),V(E)?-1:x(E)?0:1};function k(E){for(var y=E.g.length,T=[],S=0;S<y;S++)T[S]=~E.g[S];return new a(T,~E.h).add(m)}e.abs=function(){return V(this)?k(this):this},e.add=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0,I=0;I<=y;I++){var C=S+(this.i(I)&65535)+(E.i(I)&65535),b=(C>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);S=b>>>16,C&=65535,b&=65535,T[I]=b<<16|C}return new a(T,T[T.length-1]&-2147483648?-1:0)};function A(E,y){return E.add(k(y))}e.j=function(E){if(x(this)||x(E))return g;if(V(this))return V(E)?k(this).j(k(E)):k(k(this).j(E));if(V(E))return k(this.j(k(E)));if(0>this.l(_)&&0>E.l(_))return h(this.m()*E.m());for(var y=this.g.length+E.g.length,T=[],S=0;S<2*y;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var I=0;I<E.g.length;I++){var C=this.i(S)>>>16,b=this.i(S)&65535,Q=E.i(I)>>>16,Ct=E.i(I)&65535;T[2*S+2*I]+=b*Ct,v(T,2*S+2*I),T[2*S+2*I+1]+=C*Ct,v(T,2*S+2*I+1),T[2*S+2*I+1]+=b*Q,v(T,2*S+2*I+1),T[2*S+2*I+2]+=C*Q,v(T,2*S+2*I+2)}for(S=0;S<y;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=y;S<2*y;S++)T[S]=0;return new a(T,0)};function v(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function w(E,y){this.g=E,this.h=y}function D(E,y){if(x(y))throw Error("division by zero");if(x(E))return new w(g,g);if(V(E))return y=D(k(E),y),new w(k(y.g),k(y.h));if(V(y))return y=D(E,k(y)),new w(k(y.g),y.h);if(30<E.g.length){if(V(E)||V(y))throw Error("slowDivide_ only works with positive integers.");for(var T=m,S=y;0>=S.l(E);)T=L(T),S=L(S);var I=q(T,1),C=q(S,1);for(S=q(S,2),T=q(T,2);!x(S);){var b=C.add(S);0>=b.l(E)&&(I=I.add(T),C=b),S=q(S,1),T=q(T,1)}return y=A(E,I.j(y)),new w(I,y)}for(I=g;0<=E.l(y);){for(T=Math.max(1,Math.floor(E.m()/y.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),C=h(T),b=C.j(y);V(b)||0<b.l(E);)T-=S,C=h(T),b=C.j(y);x(C)&&(C=m),I=I.add(C),E=A(E,b)}return new w(I,E)}e.A=function(E){return D(this,E).h},e.and=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)&E.i(S);return new a(T,this.h&E.h)},e.or=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)|E.i(S);return new a(T,this.h|E.h)},e.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)^E.i(S);return new a(T,this.h^E.h)};function L(E){for(var y=E.g.length+1,T=[],S=0;S<y;S++)T[S]=E.i(S)<<1|E.i(S-1)>>>31;return new a(T,E.h)}function q(E,y){var T=y>>5;y%=32;for(var S=E.g.length-T,I=[],C=0;C<S;C++)I[C]=0<y?E.i(C+T)>>>y|E.i(C+T+1)<<32-y:E.i(C+T);return new a(I,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,B0=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Xi=a}).apply(typeof f_<"u"?f_:typeof self<"u"?self:typeof window<"u"?window:{});var Xl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q0,Qa,H0,gu,_d,G0,F0,Q0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xl=="object"&&Xl];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function s(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var N=o[p];if(!(N in f))break t;f=f[N]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function r(o,c){o instanceof String&&(o+="");var f=0,p=!1,N={next:function(){if(!p&&f<o.length){var O=f++;return{value:c(O,o[O]),done:!1}}return p=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}s("Array.prototype.values",function(o){return o||function(){return r(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,p),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function x(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,N,O){for(var z=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)z[bt-2]=arguments[bt];return c.prototype[N].apply(p,z)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function k(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const N=o.length||0,O=p.length||0;o.length=N+O;for(let z=0;z<O;z++)o[N+z]=p[z]}else o.push(p)}}class A{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function w(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var L=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function q(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function E(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(o,c){let f,p;for(let N=1;N<arguments.length;N++){p=arguments[N];for(f in p)o[f]=p[f];for(let O=0;O<T.length;O++)f=T[O],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function I(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function C(o){l.setTimeout(()=>{throw o},0)}function b(){var o=dt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Q{constructor(){this.h=this.g=null}add(c,f){const p=Ct.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var Ct=new A(()=>new j,o=>o.reset());class j{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let K,$=!1,dt=new Q,St=()=>{const o=l.Promise.resolve(void 0);K=()=>{o.then(Kt)}};var Kt=()=>{for(var o;o=b();){try{o.h.call(o.g)}catch(f){C(f)}var c=Ct;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}$=!1};function Xt(){this.s=this.s,this.C=this.C}Xt.prototype.s=!1,Xt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Xt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function vt(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}vt.prototype.h=function(){this.defaultPrevented=!0};var Me=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function ue(o,c){if(vt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{D(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Xs[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&ue.aa.h.call(this)}}x(ue,vt);var Xs={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var gn="closure_listenable_"+(1e6*Math.random()|0),tt=0;function Rt(o,c,f,p,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=N,this.key=++tt,this.da=this.fa=!1}function Be(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Ce(o){this.src=o,this.g={},this.h=0}Ce.prototype.add=function(o,c,f,p,N){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var z=qe(o,c,p,N);return-1<z?(c=o[z],f||(c.fa=!1)):(c=new Rt(c,this.src,O,!!p,N),c.fa=f,o.push(c)),c};function ce(o,c){var f=c.type;if(f in o.g){var p=o.g[f],N=Array.prototype.indexOf.call(p,c,void 0),O;(O=0<=N)&&Array.prototype.splice.call(p,N,1),O&&(Be(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function qe(o,c,f,p){for(var N=0;N<o.length;++N){var O=o[N];if(!O.da&&O.listener==c&&O.capture==!!f&&O.ha==p)return N}return-1}var va="closure_lm_"+(1e6*Math.random()|0),W={};function ft(o,c,f,p,N){if(Array.isArray(c)){for(var O=0;O<c.length;O++)ft(o,c[O],f,p,N);return null}return f=vl(f),o&&o[gn]?o.K(c,f,h(p)?!!p.capture:!1,N):ve(o,c,f,!1,p,N)}function ve(o,c,f,p,N,O){if(!c)throw Error("Invalid event type");var z=h(N)?!!N.capture:!!N,bt=pi(o);if(bt||(o[va]=bt=new Ce(o)),f=bt.add(c,f,p,z,O),f.proxy)return f;if(p=Zs(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)Me||(N=z),N===void 0&&(N=!1),o.addEventListener(c.toString(),p,N);else if(o.attachEvent)o.attachEvent(Ea(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Zs(){function o(f){return c.call(o.src,o.listener,f)}const c=zn;return o}function ms(o,c,f,p,N){if(Array.isArray(c))for(var O=0;O<c.length;O++)ms(o,c[O],f,p,N);else p=h(p)?!!p.capture:!!p,f=vl(f),o&&o[gn]?(o=o.i,c=String(c).toString(),c in o.g&&(O=o.g[c],f=qe(O,f,p,N),-1<f&&(Be(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete o.g[c],o.h--)))):o&&(o=pi(o))&&(c=o.g[c.toString()],o=-1,c&&(o=qe(c,f,p,N)),(f=-1<o?c[o]:null)&&gi(f))}function gi(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[gn])ce(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(Ea(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=pi(c))?(ce(f,o),f.h==0&&(f.src=null,c[va]=null)):Be(o)}}}function Ea(o){return o in W?W[o]:W[o]="on"+o}function zn(o,c){if(o.da)o=!0;else{c=new ue(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&gi(o),o=f.call(p,c)}return o}function pi(o){return o=o[va],o instanceof Ce?o:null}var Ws="__closure_events_fn_"+(1e9*Math.random()>>>0);function vl(o){return typeof o=="function"?o:(o[Ws]||(o[Ws]=function(c){return o.handleEvent(c)}),o[Ws])}function ee(){Xt.call(this),this.i=new Ce(this),this.M=this,this.F=null}x(ee,Xt),ee.prototype[gn]=!0,ee.prototype.removeEventListener=function(o,c,f,p){ms(this,o,c,f,p)};function Ee(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new vt(c,o);else if(c instanceof vt)c.target=c.target||o;else{var N=c;c=new vt(p,o),S(c,N)}if(N=!0,f)for(var O=f.length-1;0<=O;O--){var z=c.g=f[O];N=gs(z,p,!0,c)&&N}if(z=c.g=o,N=gs(z,p,!0,c)&&N,N=gs(z,p,!1,c)&&N,f)for(O=0;O<f.length;O++)z=c.g=f[O],N=gs(z,p,!1,c)&&N}ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)Be(f[p]);delete o.g[c],o.h--}}this.F=null},ee.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},ee.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function gs(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,O=0;O<c.length;++O){var z=c[O];if(z&&!z.da&&z.capture==f){var bt=z.listener,he=z.ha||z.src;z.fa&&ce(o.i,z),N=bt.call(he,p)!==!1&&N}}return N&&!p.defaultPrevented}function bn(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Pg(o){o.g=bn(()=>{o.g=null,o.i&&(o.i=!1,Pg(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class a1 extends Xt{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Pg(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ta(o){Xt.call(this),this.h=o,this.g={}}x(Ta,Xt);var Ug=[];function Lg(o){q(o.g,function(c,f){this.g.hasOwnProperty(f)&&gi(c)},o),o.g={}}Ta.prototype.N=function(){Ta.aa.N.call(this),Lg(this)},Ta.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uh=l.JSON.stringify,o1=l.JSON.parse,l1=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function ch(){}ch.prototype.h=null;function jg(o){return o.h||(o.h=o.i())}function zg(){}var Aa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hh(){vt.call(this,"d")}x(hh,vt);function fh(){vt.call(this,"c")}x(fh,vt);var ps={},Bg=null;function El(){return Bg=Bg||new ee}ps.La="serverreachability";function qg(o){vt.call(this,ps.La,o)}x(qg,vt);function Sa(o){const c=El();Ee(c,new qg(c))}ps.STAT_EVENT="statevent";function Hg(o,c){vt.call(this,ps.STAT_EVENT,o),this.stat=c}x(Hg,vt);function Ne(o){const c=El();Ee(c,new Hg(c,o))}ps.Ma="timingevent";function Gg(o,c){vt.call(this,ps.Ma,o),this.size=c}x(Gg,vt);function ba(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function wa(){this.g=!0}wa.prototype.xa=function(){this.g=!1};function u1(o,c,f,p,N,O){o.info(function(){if(o.g)if(O)for(var z="",bt=O.split("&"),he=0;he<bt.length;he++){var mt=bt[he].split("=");if(1<mt.length){var Te=mt[0];mt=mt[1];var Ae=Te.split("_");z=2<=Ae.length&&Ae[1]=="type"?z+(Te+"="+mt+"&"):z+(Te+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+p+") [attempt "+N+"]: "+c+`
`+f+`
`+z})}function c1(o,c,f,p,N,O,z){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+N+"]: "+c+`
`+f+`
`+O+" "+z})}function Js(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+f1(o,f)+(p?" "+p:"")})}function h1(o,c){o.info(function(){return"TIMEOUT: "+c})}wa.prototype.info=function(){};function f1(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var N=p[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return uh(f)}catch{return c}}var Tl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dh;function Al(){}x(Al,ch),Al.prototype.g=function(){return new XMLHttpRequest},Al.prototype.i=function(){return{}},dh=new Al;function yi(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new Ta(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qg}function Qg(){this.i=null,this.g="",this.h=!1}var $g={},mh={};function gh(o,c,f){o.L=1,o.v=Rl(Bn(c)),o.m=f,o.P=!0,Yg(o,null)}function Yg(o,c){o.F=Date.now(),Sl(o),o.A=Bn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),lp(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Qg,o.g=Rp(o.j,f?c:null,!o.m),0<o.O&&(o.M=new a1(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Ug[0]=N.toString()),N=Ug);for(var O=0;O<N.length;O++){var z=ft(f,N[O],p||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Sa(),u1(o.i,o.u,o.A,o.l,o.R,o.m)}yi.prototype.ca=function(o){o=o.target;const c=this.M;c&&qn(o)==3?c.j():this.Y(o)},yi.prototype.Y=function(o){try{if(o==this.g)t:{const Ae=qn(this.g);var c=this.g.Ba();const nr=this.g.Z();if(!(3>Ae)&&(Ae!=3||this.g&&(this.h.h||this.g.oa()||gp(this.g)))){this.J||Ae!=4||c==7||(c==8||0>=nr?Sa(3):Sa(2)),ph(this);var f=this.g.Z();this.X=f;e:if(Kg(this)){var p=gp(this.g);o="";var N=p.length,O=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ys(this),Ra(this);var z="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(O&&c==N-1)});p.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,c1(this.i,this.u,this.A,this.l,this.R,Ae,f),this.o){if(this.T&&!this.K){e:{if(this.g){var bt,he=this.g;if((bt=he.g?he.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(bt)){var mt=bt;break e}}mt=null}if(f=mt)Js(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yh(this,f);else{this.o=!1,this.s=3,Ne(12),ys(this),Ra(this);break t}}if(this.P){f=!0;let pn;for(;!this.J&&this.C<z.length;)if(pn=d1(this,z),pn==mh){Ae==4&&(this.s=4,Ne(14),f=!1),Js(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==$g){this.s=4,Ne(15),Js(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else Js(this.i,this.l,pn,null),yh(this,pn);if(Kg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||z.length!=0||this.h.h||(this.s=1,Ne(16),f=!1),this.o=this.o&&f,!f)Js(this.i,this.l,z,"[Invalid Chunked Response]"),ys(this),Ra(this);else if(0<z.length&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.ba&&!Te.M&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Sh(Te),Te.M=!0,Ne(11))}}else Js(this.i,this.l,z,null),yh(this,z);Ae==4&&ys(this),this.o&&!this.J&&(Ae==4?Ap(this.j,this):(this.o=!1,Sl(this)))}else D1(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),ys(this),Ra(this)}}}catch{}finally{}};function Kg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function d1(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?mh:(f=Number(c.substring(f,p)),isNaN(f)?$g:(p+=1,p+f>c.length?mh:(c=c.slice(p,p+f),o.C=p+f,c)))}yi.prototype.cancel=function(){this.J=!0,ys(this)};function Sl(o){o.S=Date.now()+o.I,Xg(o,o.I)}function Xg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ba(m(o.ba,o),c)}function ph(o){o.B&&(l.clearTimeout(o.B),o.B=null)}yi.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(h1(this.i,this.A),this.L!=2&&(Sa(),Ne(17)),ys(this),this.s=2,Ra(this)):Xg(this,this.S-o)};function Ra(o){o.j.G==0||o.J||Ap(o.j,o)}function ys(o){ph(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Lg(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function yh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||_h(f.h,o))){if(!o.K&&_h(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var N=p;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Ol(f),Dl(f);else break t;Ah(f),Ne(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=ba(m(f.Za,f),6e3));if(1>=Jg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else vs(f,11)}else if((o.K||f.g==o)&&Ol(f),!v(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let mt=N[c];if(f.T=mt[0],mt=mt[1],f.G==2)if(mt[0]=="c"){f.K=mt[1],f.ia=mt[2];const Te=mt[3];Te!=null&&(f.la=Te,f.j.info("VER="+f.la));const Ae=mt[4];Ae!=null&&(f.Aa=Ae,f.j.info("SVER="+f.Aa));const nr=mt[5];nr!=null&&typeof nr=="number"&&0<nr&&(p=1.5*nr,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const pn=o.g;if(pn){const Ml=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ml){var O=p.h;O.g||Ml.indexOf("spdy")==-1&&Ml.indexOf("quic")==-1&&Ml.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(vh(O,O.h),O.h=null))}if(p.D){const bh=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;bh&&(p.ya=bh,Nt(p.I,p.D,bh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var z=o;if(p.qa=wp(p,p.J?p.ia:null,p.W),z.K){tp(p.h,z);var bt=z,he=p.L;he&&(bt.I=he),bt.B&&(ph(bt),Sl(bt)),p.g=z}else Ep(p);0<f.i.length&&xl(f)}else mt[0]!="stop"&&mt[0]!="close"||vs(f,7);else f.G==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?vs(f,7):Th(f):mt[0]!="noop"&&f.l&&f.l.ta(mt),f.v=0)}}Sa(4)}catch{}}var m1=class{constructor(o,c){this.g=o,this.map=c}};function Zg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Jg(o){return o.h?1:o.g?o.g.size:0}function _h(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function vh(o,c){o.g?o.g.add(c):o.h=c}function tp(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Zg.prototype.cancel=function(){if(this.i=ep(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function ep(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function g1(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function p1(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function np(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=p1(o),p=g1(o),N=p.length,O=0;O<N;O++)c.call(void 0,p[O],f&&f[O],o)}var ip=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function y1(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),N=null;if(0<=p){var O=o[f].substring(0,p);N=o[f].substring(p+1)}else O=o[f];c(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function _s(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof _s){this.h=o.h,bl(this,o.j),this.o=o.o,this.g=o.g,wl(this,o.s),this.l=o.l;var c=o.i,f=new Na;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),sp(this,f),this.m=o.m}else o&&(c=String(o).match(ip))?(this.h=!1,bl(this,c[1]||"",!0),this.o=Ia(c[2]||""),this.g=Ia(c[3]||"",!0),wl(this,c[4]),this.l=Ia(c[5]||"",!0),sp(this,c[6]||"",!0),this.m=Ia(c[7]||"")):(this.h=!1,this.i=new Na(null,this.h))}_s.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Ca(c,rp,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Ca(c,rp,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Ca(f,f.charAt(0)=="/"?E1:v1,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Ca(f,A1)),o.join("")};function Bn(o){return new _s(o)}function bl(o,c,f){o.j=f?Ia(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function wl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function sp(o,c,f){c instanceof Na?(o.i=c,S1(o.i,o.h)):(f||(c=Ca(c,T1)),o.i=new Na(c,o.h))}function Nt(o,c,f){o.i.set(c,f)}function Rl(o){return Nt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ia(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ca(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,_1),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function _1(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var rp=/[#\/\?@]/g,v1=/[#\?:]/g,E1=/[#\?]/g,T1=/[#\?@]/g,A1=/#/g;function Na(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function _i(o){o.g||(o.g=new Map,o.h=0,o.i&&y1(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=Na.prototype,e.add=function(o,c){_i(this),this.i=null,o=tr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function ap(o,c){_i(o),c=tr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function op(o,c){return _i(o),c=tr(o,c),o.g.has(c)}e.forEach=function(o,c){_i(this),this.g.forEach(function(f,p){f.forEach(function(N){o.call(c,N,p,this)},this)},this)},e.na=function(){_i(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const N=o[p];for(let O=0;O<N.length;O++)f.push(c[p])}return f},e.V=function(o){_i(this);let c=[];if(typeof o=="string")op(this,o)&&(c=c.concat(this.g.get(tr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return _i(this),this.i=null,o=tr(this,o),op(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function lp(o,c,f){ap(o,c),0<f.length&&(o.i=null,o.g.set(tr(o,c),V(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const O=encodeURIComponent(String(p)),z=this.V(p);for(p=0;p<z.length;p++){var N=O;z[p]!==""&&(N+="="+encodeURIComponent(String(z[p]))),o.push(N)}}return this.i=o.join("&")};function tr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function S1(o,c){c&&!o.j&&(_i(o),o.i=null,o.g.forEach(function(f,p){var N=p.toLowerCase();p!=N&&(ap(this,p),lp(this,N,f))},o)),o.j=c}function b1(o,c){const f=new wa;if(l.Image){const p=new Image;p.onload=_(vi,f,"TestLoadImage: loaded",!0,c,p),p.onerror=_(vi,f,"TestLoadImage: error",!1,c,p),p.onabort=_(vi,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=_(vi,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function w1(o,c){const f=new wa,p=new AbortController,N=setTimeout(()=>{p.abort(),vi(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(O=>{clearTimeout(N),O.ok?vi(f,"TestPingServer: ok",!0,c):vi(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),vi(f,"TestPingServer: error",!1,c)})}function vi(o,c,f,p,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),p(f)}catch{}}function R1(){this.g=new l1}function I1(o,c,f){const p=f||"";try{np(o,function(N,O){let z=N;h(N)&&(z=uh(N)),c.push(p+O+"="+encodeURIComponent(z))})}catch(N){throw c.push(p+"type="+encodeURIComponent("_badmap")),N}}function Il(o){this.l=o.Ub||null,this.j=o.eb||!1}x(Il,ch),Il.prototype.g=function(){return new Cl(this.l,this.j)},Il.prototype.i=function(o){return function(){return o}}({});function Cl(o,c){ee.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Cl,ee),e=Cl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,xa(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Da(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,xa(this)),this.g&&(this.readyState=3,xa(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;up(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function up(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Da(this):xa(this),this.readyState==3&&up(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Da(this))},e.Qa=function(o){this.g&&(this.response=o,Da(this))},e.ga=function(){this.g&&Da(this)};function Da(o){o.readyState=4,o.l=null,o.j=null,o.v=null,xa(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function xa(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function cp(o){let c="";return q(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function Eh(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=cp(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Nt(o,c,f))}function Lt(o){ee.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Lt,ee);var C1=/^https?$/i,N1=["POST","PUT"];e=Lt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dh.g(),this.v=this.o?jg(this.o):jg(dh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(O){hp(this,O);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var N in p)f.set(N,p[N]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const O of p.keys())f.set(O,p.get(O));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(N1,c,void 0))||p||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of f)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mp(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){hp(this,O)}};function hp(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,fp(o),Nl(o)}function fp(o){o.A||(o.A=!0,Ee(o,"complete"),Ee(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ee(this,"complete"),Ee(this,"abort"),Nl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nl(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?dp(this):this.bb())},e.bb=function(){dp(this)};function dp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||qn(o)!=4||o.Z()!=2)){if(o.u&&qn(o)==4)bn(o.Ea,0,o);else if(Ee(o,"readystatechange"),qn(o)==4){o.h=!1;try{const z=o.Z();t:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=z===0){var N=String(o.D).match(ip)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),p=!C1.test(N?N.toLowerCase():"")}f=p}if(f)Ee(o,"complete"),Ee(o,"success");else{o.m=6;try{var O=2<qn(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",fp(o)}}finally{Nl(o)}}}}function Nl(o,c){if(o.g){mp(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||Ee(o,"ready");try{f.onreadystatechange=p}catch{}}}function mp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function qn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),o1(c)}};function gp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function D1(o){const c={};o=(o.g&&2<=qn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(v(o[p]))continue;var f=I(o[p]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=c[N]||[];c[N]=O,O.push(f)}E(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oa(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function pp(o){this.Aa=0,this.i=[],this.j=new wa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oa("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oa("baseRetryDelayMs",5e3,o),this.cb=Oa("retryDelaySeedMs",1e4,o),this.Wa=Oa("forwardChannelMaxRetries",2,o),this.wa=Oa("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Zg(o&&o.concurrentRequestLimit),this.Da=new R1,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=pp.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){Ne(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=wp(this,null,this.W),xl(this)};function Th(o){if(yp(o),o.G==3){var c=o.U++,f=Bn(o.I);if(Nt(f,"SID",o.K),Nt(f,"RID",c),Nt(f,"TYPE","terminate"),Va(o,f),c=new yi(o,o.j,c),c.L=2,c.v=Rl(Bn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Rp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Sl(c)}bp(o)}function Dl(o){o.g&&(Sh(o),o.g.cancel(),o.g=null)}function yp(o){Dl(o),o.u&&(l.clearTimeout(o.u),o.u=null),Ol(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function xl(o){if(!Wg(o.h)&&!o.s){o.s=!0;var c=o.Ga;K||St(),$||(K(),$=!0),dt.add(c,o),o.B=0}}function x1(o,c){return Jg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ba(m(o.Ga,o,c),Sp(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new yi(this,this.j,o);let O=this.o;if(this.S&&(O?(O=y(O),S(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=vp(this,N,c),f=Bn(this.I),Nt(f,"RID",o),Nt(f,"CVER",22),this.D&&Nt(f,"X-HTTP-Session-Id",this.D),Va(this,f),O&&(this.O?c="headers="+encodeURIComponent(String(cp(O)))+"&"+c:this.m&&Eh(f,this.m,O)),vh(this.h,N),this.Ua&&Nt(f,"TYPE","init"),this.P?(Nt(f,"$req",c),Nt(f,"SID","null"),N.T=!0,gh(N,f,null)):gh(N,f,c),this.G=2}}else this.G==3&&(o?_p(this,o):this.i.length==0||Wg(this.h)||_p(this))};function _p(o,c){var f;c?f=c.l:f=o.U++;const p=Bn(o.I);Nt(p,"SID",o.K),Nt(p,"RID",f),Nt(p,"AID",o.T),Va(o,p),o.m&&o.o&&Eh(p,o.m,o.o),f=new yi(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=vp(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),vh(o.h,f),gh(f,p,c)}function Va(o,c){o.H&&q(o.H,function(f,p){Nt(c,p,f)}),o.l&&np({},function(f,p){Nt(c,p,f)})}function vp(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let O=-1;for(;;){const z=["count="+f];O==-1?0<f?(O=N[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let bt=!0;for(let he=0;he<f;he++){let mt=N[he].g;const Te=N[he].map;if(mt-=O,0>mt)O=Math.max(0,N[he].g-100),bt=!1;else try{I1(Te,z,"req"+mt+"_")}catch{p&&p(Te)}}if(bt){p=z.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function Ep(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;K||St(),$||(K(),$=!0),dt.add(c,o),o.v=0}}function Ah(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ba(m(o.Fa,o),Sp(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Tp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ba(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),Dl(this),Tp(this))};function Sh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Tp(o){o.g=new yi(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Bn(o.qa);Nt(c,"RID","rpc"),Nt(c,"SID",o.K),Nt(c,"AID",o.T),Nt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Nt(c,"TO",o.ja),Nt(c,"TYPE","xmlhttp"),Va(o,c),o.m&&o.o&&Eh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Rl(Bn(c)),f.m=null,f.P=!0,Yg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Dl(this),Ah(this),Ne(19))};function Ol(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Ap(o,c){var f=null;if(o.g==c){Ol(o),Sh(o),o.g=null;var p=2}else if(_h(o.h,c))f=c.D,tp(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;p=El(),Ee(p,new Gg(p,f)),xl(o)}else Ep(o);else if(N=c.s,N==3||N==0&&0<c.X||!(p==1&&x1(o,c)||p==2&&Ah(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:vs(o,5);break;case 4:vs(o,10);break;case 3:vs(o,6);break;default:vs(o,2)}}}function Sp(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function vs(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const N=!p;p=new _s(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||bl(p,"https"),Rl(p),N?b1(p.toString(),f):w1(p.toString(),f)}else Ne(2);o.G=0,o.l&&o.l.sa(c),bp(o),yp(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))};function bp(o){if(o.G=0,o.ka=[],o.l){const c=ep(o.h);(c.length!=0||o.i.length!=0)&&(k(o.ka,c),k(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function wp(o,c,f){var p=f instanceof _s?Bn(f):new _s(f);if(p.g!="")c&&(p.g=c+"."+p.g),wl(p,p.s);else{var N=l.location;p=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var O=new _s(null);p&&bl(O,p),c&&(O.g=c),N&&wl(O,N),f&&(O.l=f),p=O}return f=o.D,c=o.ya,f&&c&&Nt(p,f,c),Nt(p,"VER",o.la),Va(o,p),p}function Rp(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Lt(new Il({eb:f})):new Lt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ip(){}e=Ip.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Vl(){}Vl.prototype.g=function(o,c){return new He(o,c)};function He(o,c){ee.call(this),this.g=new pp(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new er(this)}x(He,ee),He.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},He.prototype.close=function(){Th(this.g)},He.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=uh(o),o=f);c.i.push(new m1(c.Ya++,o)),c.G==3&&xl(c)},He.prototype.N=function(){this.g.l=null,delete this.j,Th(this.g),delete this.g,He.aa.N.call(this)};function Cp(o){hh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}x(Cp,hh);function Np(){fh.call(this),this.status=1}x(Np,fh);function er(o){this.g=o}x(er,Ip),er.prototype.ua=function(){Ee(this.g,"a")},er.prototype.ta=function(o){Ee(this.g,new Cp(o))},er.prototype.sa=function(o){Ee(this.g,new Np)},er.prototype.ra=function(){Ee(this.g,"b")},Vl.prototype.createWebChannel=Vl.prototype.g,He.prototype.send=He.prototype.o,He.prototype.open=He.prototype.m,He.prototype.close=He.prototype.close,Q0=function(){return new Vl},F0=function(){return El()},G0=ps,_d={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Tl.NO_ERROR=0,Tl.TIMEOUT=8,Tl.HTTP_ERROR=6,gu=Tl,Fg.COMPLETE="complete",H0=Fg,zg.EventType=Aa,Aa.OPEN="a",Aa.CLOSE="b",Aa.ERROR="c",Aa.MESSAGE="d",ee.prototype.listen=ee.prototype.K,Qa=zg,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,q0=Lt}).apply(typeof Xl<"u"?Xl:typeof self<"u"?self:typeof window<"u"?window:{});const d_="@firebase/firestore",m_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}be.UNAUTHENTICATED=new be(null),be.GOOGLE_CREDENTIALS=new be("google-credentials-uid"),be.FIRST_PARTY=new be("first-party-uid"),be.MOCK_USER=new be("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new jm("@firebase/firestore");function ur(){return js.logLevel}function H(e,...t){if(js.logLevel<=at.DEBUG){const n=t.map(qm);js.debug(`Firestore (${da}): ${e}`,...n)}}function li(e,...t){if(js.logLevel<=at.ERROR){const n=t.map(qm);js.error(`Firestore (${da}): ${e}`,...n)}}function Wr(e,...t){if(js.logLevel<=at.WARN){const n=t.map(qm);js.warn(`Firestore (${da}): ${e}`,...n)}}function qm(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,$0(e,i,n)}function $0(e,t,n){let i=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw li(i),new Error(i)}function ht(e,t,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,e||$0(t,s,i)}function et(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends mi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class dI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(be.UNAUTHENTICATED))}shutdown(){}}class mI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gI{constructor(t){this.t=t,this.currentUser=be.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ht(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ni,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ni)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ht(typeof i.accessToken=="string",31837,{l:i}),new Y0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ht(t===null||typeof t=="string",2055,{h:t}),new be(t)}}class pI{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=be.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yI{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new pI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(be.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class g_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _I{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ht(this.o===void 0,3512);const i=r=>{r.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new g_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new g_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=vI(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%62))}return i}}function ot(e,t){return e<t?-1:e>t?1:0}function vd(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.charAt(i),r=t.charAt(i);if(s!==r)return ff(s)===ff(r)?ot(s,r):ff(s)?1:-1}return ot(e.length,t.length)}const EI=55296,TI=57343;function ff(e){const t=e.charCodeAt(0);return t>=EI&&t<=TI}function Jr(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="__name__";class Rn{constructor(t,n,i){n===void 0?n=0:n>t.length&&Y(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Y(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Rn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Rn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=Rn.compareSegments(t.get(s),n.get(s));if(r!==0)return r}return ot(t.length,n.length)}static compareSegments(t,n){const i=Rn.isNumericId(t),s=Rn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Rn.extractNumericId(t).compare(Rn.extractNumericId(n)):vd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Xi.fromString(t.substring(4,t.length-2))}}class At extends Rn{construct(t,n,i){return new At(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new B(M.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new At(n)}static emptyPath(){return new At([])}}const AI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ge extends Rn{construct(t,n,i){return new ge(t,n,i)}static isValidIdentifier(t){return AI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ge.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===p_}static keyField(){return new ge([p_])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new B(M.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new B(M.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ge(n)}static emptyPath(){return new ge([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(t){this.path=t}static fromPath(t){return new F(At.fromString(t))}static fromName(t){return new F(At.fromString(t).popFirst(5))}static empty(){return new F(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&At.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return At.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new F(new At(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(e,t,n){if(!n)throw new B(M.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function SI(e,t,n,i){if(t===!0&&i===!0)throw new B(M.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function y_(e){if(!F.isDocumentKey(e))throw new B(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function __(e){if(F.isDocumentKey(e))throw new B(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function X0(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Bc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Y(12329,{type:typeof e})}function en(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new B(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bc(e);throw new B(M.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(e,t){const n={typeString:e};return t&&(n.value=t),n}function ol(e,t){if(!X0(e))throw new B(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const s=t[i].typeString,r="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new B(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=-62135596800,E_=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(t){return Dt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*E_);return new Dt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<v_)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/E_}_compareTo(t){return this.seconds===t.seconds?ot(this.nanoseconds,t.nanoseconds):ot(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ol(t,Dt._jsonSchema))return new Dt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-v_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dt._jsonSchemaVersion="firestore/timestamp/1.0",Dt._jsonSchema={type:$t("string",Dt._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(t){return new X(t)}static min(){return new X(new Dt(0,0))}static max(){return new X(new Dt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=-1;function bI(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=X.fromTimestamp(i===1e9?new Dt(n+1,0):new Dt(n,i));return new is(s,F.empty(),t)}function wI(e){return new is(e.readTime,e.key,Mo)}class is{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new is(X.min(),F.empty(),Mo)}static max(){return new is(X.max(),F.empty(),Mo)}}function RI(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=F.comparator(e.documentKey,t.documentKey),n!==0?n:ot(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(e){if(e.code!==M.FAILED_PRECONDITION||e.message!==II)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let s=0,r=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(s=>s?P.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new P((i,s)=>{const r=t.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===r&&i(a)},d=>s(d))}})}static doWhile(t,n){return new P((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function NI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ga(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}qc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=-1;function ll(e){return e==null}function ic(e){return e===0&&1/e==-1/0}function DI(e){return typeof e=="number"&&Number.isInteger(e)&&!ic(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="";function xI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=T_(t)),t=OI(e.get(n),t);return T_(t)}function OI(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const r=e.charAt(s);switch(r){case"\0":n+="";break;case Z0:n+="";break;default:n+=r}}return n}function T_(e){return e+Z0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function fs(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function W0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t,n){this.comparator=t,this.root=n||de.EMPTY}insert(t,n){return new Ut(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,de.BLACK,null,null))}remove(t){return new Ut(this.comparator,this.root.remove(t,this.comparator).copy(null,null,de.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Zl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Zl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Zl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Zl(this.root,t,this.comparator,!0)}}class Zl{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class de{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??de.RED,this.left=s??de.EMPTY,this.right=r??de.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new de(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return de.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return de.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,de.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,de.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Y(27949);return t+(this.isRed()?0:1)}}de.EMPTY=null,de.RED=!0,de.BLACK=!1;de.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(t,n,i,s,r){return this}insert(t,n,i){return new de(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t){this.comparator=t,this.data=new Ut(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new S_(this.data.getIterator())}getIteratorFrom(t){return new S_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Jt)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Jt(this.comparator);return n.data=t,n}}class S_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.fields=t,t.sort(ge.comparator)}static empty(){return new Xe([])}unionWith(t){let n=new Jt(ge.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Xe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Jr(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new J0("Invalid base64 string: "+r):r}}(t);return new _e(n)}static fromUint8Array(t){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(t);return new _e(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ot(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}_e.EMPTY_BYTE_STRING=new _e("");const VI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(e){if(ht(!!e,39018),typeof e=="string"){let t=0;const n=VI.exec(e);if(ht(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ht(e.seconds),nanos:Ht(e.nanos)}}function Ht(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function rs(e){return typeof e=="string"?_e.fromBase64String(e):_e.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="server_timestamp",eA="__type__",nA="__previous_value__",iA="__local_write_time__";function Fm(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[eA])==null?void 0:i.stringValue)===tA}function Hc(e){const t=e.mapValue.fields[nA];return Fm(t)?Hc(t):t}function ko(e){const t=ss(e.mapValue.fields[iA].timestampValue);return new Dt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(t,n,i,s,r,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const sc="(default)";class Po{constructor(t,n){this.projectId=t,this.database=n||sc}static empty(){return new Po("","")}get isDefaultDatabase(){return this.database===sc}isEqual(t){return t instanceof Po&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="__type__",kI="__max__",Wl={mapValue:{}},rA="__vector__",rc="value";function as(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Fm(e)?4:UI(e)?9007199254740991:PI(e)?10:11:Y(28295,{value:e})}function Un(e,t){if(e===t)return!0;const n=as(e);if(n!==as(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ko(e).isEqual(ko(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=ss(s.timestampValue),l=ss(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return rs(s.bytesValue).isEqual(rs(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return Ht(s.geoPointValue.latitude)===Ht(r.geoPointValue.latitude)&&Ht(s.geoPointValue.longitude)===Ht(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Ht(s.integerValue)===Ht(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=Ht(s.doubleValue),l=Ht(r.doubleValue);return a===l?ic(a)===ic(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return Jr(e.arrayValue.values||[],t.arrayValue.values||[],Un);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(A_(a)!==A_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Un(a[u],l[u])))return!1;return!0}(e,t);default:return Y(52216,{left:e})}}function Uo(e,t){return(e.values||[]).find(n=>Un(n,t))!==void 0}function ta(e,t){if(e===t)return 0;const n=as(e),i=as(t);if(n!==i)return ot(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(e.booleanValue,t.booleanValue);case 2:return function(r,a){const l=Ht(r.integerValue||r.doubleValue),u=Ht(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return b_(e.timestampValue,t.timestampValue);case 4:return b_(ko(e),ko(t));case 5:return vd(e.stringValue,t.stringValue);case 6:return function(r,a){const l=rs(r),u=rs(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=ot(l[h],u[h]);if(d!==0)return d}return ot(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,a){const l=ot(Ht(r.latitude),Ht(a.latitude));return l!==0?l:ot(Ht(r.longitude),Ht(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return w_(e.arrayValue,t.arrayValue);case 10:return function(r,a){var m,_,x,V;const l=r.fields||{},u=a.fields||{},h=(m=l[rc])==null?void 0:m.arrayValue,d=(_=u[rc])==null?void 0:_.arrayValue,g=ot(((x=h==null?void 0:h.values)==null?void 0:x.length)||0,((V=d==null?void 0:d.values)==null?void 0:V.length)||0);return g!==0?g:w_(h,d)}(e.mapValue,t.mapValue);case 11:return function(r,a){if(r===Wl.mapValue&&a===Wl.mapValue)return 0;if(r===Wl.mapValue)return 1;if(a===Wl.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=vd(u[g],d[g]);if(m!==0)return m;const _=ta(l[u[g]],h[d[g]]);if(_!==0)return _}return ot(u.length,d.length)}(e.mapValue,t.mapValue);default:throw Y(23264,{he:n})}}function b_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ot(e,t);const n=ss(e),i=ss(t),s=ot(n.seconds,i.seconds);return s!==0?s:ot(n.nanos,i.nanos)}function w_(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=ta(n[s],i[s]);if(r)return r}return ot(n.length,i.length)}function ea(e){return Ed(e)}function Ed(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=ss(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return rs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return F.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=Ed(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${Ed(n.fields[a])}`;return s+"}"}(e.mapValue):Y(61005,{value:e})}function pu(e){switch(as(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Hc(e);return t?16+pu(t):16;case 5:return 2*e.stringValue.length;case 6:return rs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+pu(r),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return fs(i.fields,(r,a)=>{s+=r.length+pu(a)}),s}(e.mapValue);default:throw Y(13486,{value:e})}}function R_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Td(e){return!!e&&"integerValue"in e}function Qm(e){return!!e&&"arrayValue"in e}function I_(e){return!!e&&"nullValue"in e}function C_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function yu(e){return!!e&&"mapValue"in e}function PI(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[sA])==null?void 0:i.stringValue)===rA}function fo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return fs(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=fo(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=fo(e.arrayValue.values[n]);return t}return{...e}}function UI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===kI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t){this.value=t}static empty(){return new xe({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!yu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=fo(n)}setAll(t){let n=ge.emptyPath(),i={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=fo(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());yu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Un(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];yu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){fs(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new xe(fo(this.value))}}function aA(e){const t=[];return fs(e.fields,(n,i)=>{const s=new ge([n]);if(yu(i)){const r=aA(i.mapValue).fields;if(r.length===0)t.push(s);else for(const a of r)t.push(s.child(a))}else t.push(s)}),new Xe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t,n,i,s,r,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(t){return new re(t,0,X.min(),X.min(),X.min(),xe.empty(),0)}static newFoundDocument(t,n,i,s){return new re(t,1,n,X.min(),i,s,0)}static newNoDocument(t,n){return new re(t,2,n,X.min(),X.min(),xe.empty(),0)}static newUnknownDocument(t,n){return new re(t,3,n,X.min(),X.min(),xe.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof re&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new re(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(t,n){this.position=t,this.inclusive=n}}function N_(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],a=e.position[s];if(r.field.isKeyField()?i=F.comparator(F.fromName(a.referenceValue),n.key):i=ta(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function D_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Un(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t,n="asc"){this.field=t,this.dir=n}}function LI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{}class Qt extends oA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new zI(t,n,i):n==="array-contains"?new HI(t,i):n==="in"?new GI(t,i):n==="not-in"?new FI(t,i):n==="array-contains-any"?new QI(t,i):new Qt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new BI(t,i):new qI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ta(n,this.value)):n!==null&&as(this.value)===as(n)&&this.matchesComparison(ta(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends oA{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new An(t,n)}matches(t){return lA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lA(e){return e.op==="and"}function uA(e){return jI(e)&&lA(e)}function jI(e){for(const t of e.filters)if(t instanceof An)return!1;return!0}function Ad(e){if(e instanceof Qt)return e.field.canonicalString()+e.op.toString()+ea(e.value);if(uA(e))return e.filters.map(t=>Ad(t)).join(",");{const t=e.filters.map(n=>Ad(n)).join(",");return`${e.op}(${t})`}}function cA(e,t){return e instanceof Qt?function(i,s){return s instanceof Qt&&i.op===s.op&&i.field.isEqual(s.field)&&Un(i.value,s.value)}(e,t):e instanceof An?function(i,s){return s instanceof An&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&cA(a,s.filters[l]),!0):!1}(e,t):void Y(19439)}function hA(e){return e instanceof Qt?function(n){return`${n.field.canonicalString()} ${n.op} ${ea(n.value)}`}(e):e instanceof An?function(n){return n.op.toString()+" {"+n.getFilters().map(hA).join(" ,")+"}"}(e):"Filter"}class zI extends Qt{constructor(t,n,i){super(t,n,i),this.key=F.fromName(i.referenceValue)}matches(t){const n=F.comparator(t.key,this.key);return this.matchesComparison(n)}}class BI extends Qt{constructor(t,n){super(t,"in",n),this.keys=fA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class qI extends Qt{constructor(t,n){super(t,"not-in",n),this.keys=fA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function fA(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>F.fromName(i.referenceValue))}class HI extends Qt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Qm(n)&&Uo(n.arrayValue,this.value)}}class GI extends Qt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Uo(this.value.arrayValue,n)}}class FI extends Qt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Uo(this.value.arrayValue,n)}}class QI extends Qt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Uo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(t,n=null,i=[],s=[],r=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function x_(e,t=null,n=[],i=[],s=null,r=null,a=null){return new $I(e,t,n,i,s,r,a)}function $m(e){const t=et(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Ad(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),ll(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>ea(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>ea(i)).join(",")),t.Te=n}return t.Te}function Ym(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!LI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!cA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!D_(e.startAt,t.startAt)&&D_(e.endAt,t.endAt)}function Sd(e){return F.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(t,n=null,i=[],s=[],r=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function YI(e,t,n,i,s,r,a,l){return new pa(e,t,n,i,s,r,a,l)}function Gc(e){return new pa(e)}function O_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function dA(e){return e.collectionGroup!==null}function mo(e){const t=et(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Jt(ge.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Lo(r,i))}),n.has(ge.keyField().canonicalString())||t.Ie.push(new Lo(ge.keyField(),i))}return t.Ie}function On(e){const t=et(e);return t.Ee||(t.Ee=KI(t,mo(e))),t.Ee}function KI(e,t){if(e.limitType==="F")return x_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Lo(s.field,r)});const n=e.endAt?new ac(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ac(e.startAt.position,e.startAt.inclusive):null;return x_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function bd(e,t){const n=e.filters.concat([t]);return new pa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function wd(e,t,n){return new pa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Fc(e,t){return Ym(On(e),On(t))&&e.limitType===t.limitType}function mA(e){return`${$m(On(e))}|lt:${e.limitType}`}function cr(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>hA(s)).join(", ")}]`),ll(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>ea(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>ea(s)).join(",")),`Target(${i})`}(On(e))}; limitType=${e.limitType})`}function Qc(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):F.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of mo(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(a,l,u){const h=N_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,mo(i),s)||i.endAt&&!function(a,l,u){const h=N_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,mo(i),s))}(e,t)}function XI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function gA(e){return(t,n)=>{let i=!1;for(const s of mo(e)){const r=ZI(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function ZI(e,t,n){const i=e.field.isKeyField()?F.comparator(t.key,n.key):function(r,a,l){const u=a.data.field(r),h=l.data.field(r);return u!==null&&h!==null?ta(u,h):Y(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Y(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){fs(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return W0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=new Ut(F.comparator);function ui(){return WI}const pA=new Ut(F.comparator);function $a(...e){let t=pA;for(const n of e)t=t.insert(n.key,n);return t}function yA(e){let t=pA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function ws(){return go()}function _A(){return go()}function go(){return new $s(e=>e.toString(),(e,t)=>e.isEqual(t))}const JI=new Ut(F.comparator),tC=new Jt(F.comparator);function lt(...e){let t=tC;for(const n of e)t=t.add(n);return t}const eC=new Jt(ot);function nC(){return eC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ic(t)?"-0":t}}function vA(e){return{integerValue:""+e}}function iC(e,t){return DI(t)?vA(t):Km(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(){this._=void 0}}function sC(e,t,n){return e instanceof jo?function(s,r){const a={fields:{[eA]:{stringValue:tA},[iA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Fm(r)&&(r=Hc(r)),r&&(a.fields[nA]=r),{mapValue:a}}(n,t):e instanceof zo?TA(e,t):e instanceof Bo?AA(e,t):function(s,r){const a=EA(s,r),l=V_(a)+V_(s.Ae);return Td(a)&&Td(s.Ae)?vA(l):Km(s.serializer,l)}(e,t)}function rC(e,t,n){return e instanceof zo?TA(e,t):e instanceof Bo?AA(e,t):n}function EA(e,t){return e instanceof oc?function(i){return Td(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class jo extends $c{}class zo extends $c{constructor(t){super(),this.elements=t}}function TA(e,t){const n=SA(t);for(const i of e.elements)n.some(s=>Un(s,i))||n.push(i);return{arrayValue:{values:n}}}class Bo extends $c{constructor(t){super(),this.elements=t}}function AA(e,t){let n=SA(t);for(const i of e.elements)n=n.filter(s=>!Un(s,i));return{arrayValue:{values:n}}}class oc extends $c{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function V_(e){return Ht(e.integerValue||e.doubleValue)}function SA(e){return Qm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(t,n){this.field=t,this.transform=n}}function oC(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof zo&&s instanceof zo||i instanceof Bo&&s instanceof Bo?Jr(i.elements,s.elements,Un):i instanceof oc&&s instanceof oc?Un(i.Ae,s.Ae):i instanceof jo&&s instanceof jo}(e.transform,t.transform)}class lC{constructor(t,n){this.version=t,this.transformResults=n}}class pe{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new pe}static exists(t){return new pe(void 0,t)}static updateTime(t){return new pe(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function _u(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Yc{}function bA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Kc(e.key,pe.none()):new ul(e.key,e.data,pe.none());{const n=e.data,i=xe.empty();let s=new Jt(ge.comparator);for(let r of t.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new ds(e.key,i,new Xe(s.toArray()),pe.none())}}function uC(e,t,n){e instanceof ul?function(s,r,a){const l=s.value.clone(),u=k_(s.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof ds?function(s,r,a){if(!_u(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=k_(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(wA(s)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function po(e,t,n,i){return e instanceof ul?function(r,a,l,u){if(!_u(r.precondition,a))return l;const h=r.value.clone(),d=P_(r.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof ds?function(r,a,l,u){if(!_u(r.precondition,a))return l;const h=P_(r.fieldTransforms,u,a),d=a.data;return d.setAll(wA(r)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(r,a,l){return _u(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function cC(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),r=EA(i.transform,s||null);r!=null&&(n===null&&(n=xe.empty()),n.set(i.field,r))}return n||null}function M_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Jr(i,s,(r,a)=>oC(r,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ul extends Yc{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ds extends Yc{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function wA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function k_(e,t,n){const i=new Map;ht(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const r=e[s],a=r.transform,l=t.data.field(r.field);i.set(r.field,rC(a,l,n[s]))}return i}function P_(e,t,n){const i=new Map;for(const s of e){const r=s.transform,a=n.data.field(s.field);i.set(s.field,sC(r,a,t))}return i}class Kc extends Yc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RA extends Yc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&uC(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=po(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=po(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=_A();return this.mutations.forEach(s=>{const r=t.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const u=bA(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(X.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),lt())}isEqual(t){return this.batchId===t.batchId&&Jr(this.mutations,t.mutations,(n,i)=>M_(n,i))&&Jr(this.baseMutations,t.baseMutations,(n,i)=>M_(n,i))}}class Xm{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){ht(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return JI}();const r=t.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new Xm(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,ut;function IA(e){switch(e){case M.OK:return Y(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return Y(15467,{code:e})}}function CA(e){if(e===void 0)return li("GRPC error has no .code"),M.UNKNOWN;switch(e){case Gt.OK:return M.OK;case Gt.CANCELLED:return M.CANCELLED;case Gt.UNKNOWN:return M.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return M.INTERNAL;case Gt.UNAVAILABLE:return M.UNAVAILABLE;case Gt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Gt.NOT_FOUND:return M.NOT_FOUND;case Gt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Gt.ABORTED:return M.ABORTED;case Gt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Gt.DATA_LOSS:return M.DATA_LOSS;default:return Y(39323,{code:e})}}(ut=Gt||(Gt={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new Xi([4294967295,4294967295],0);function U_(e){const t=mC().encode(e),n=new B0;return n.update(t),new Uint8Array(n.digest())}function L_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Xi([n,i],0),new Xi([s,r],0)]}class Zm{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ya(`Invalid padding: ${n}`);if(i<0)throw new Ya(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ya(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Ya(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Xi.fromNumber(this.ge)}ye(t,n,i){let s=t.add(n.multiply(Xi.fromNumber(i)));return s.compare(gC)===1&&(s=new Xi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=U_(t),[i,s]=L_(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);if(!this.we(a))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new Zm(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=U_(t),[i,s]=L_(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Ya extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,cl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Xc(X.min(),s,new Ut(ot),ui(),lt())}}class cl{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new cl(i,n,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t,n,i,s){this.be=t,this.removedTargetIds=n,this.key=i,this.De=s}}class NA{constructor(t,n){this.targetId=t,this.Ce=n}}class DA{constructor(t,n,i=_e.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class j_{constructor(){this.ve=0,this.Fe=z_(),this.Me=_e.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=lt(),n=lt(),i=lt();return this.Fe.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Y(38017,{changeType:r})}}),new cl(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=z_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class pC{constructor(t){this.Ge=t,this.ze=new Map,this.je=ui(),this.Je=Jl(),this.He=Jl(),this.Ye=new Ut(ot)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Y(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(t){const n=t.targetId,i=t.Ce.count,s=this.ot(n);if(s){const r=s.target;if(Sd(r))if(i===0){const a=new F(r.path);this.et(n,a,re.newNoDocument(a,X.min()))}else ht(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=rs(i).toUint8Array()}catch(u){if(u instanceof J0)return Wr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Zm(a,s,r)}catch(u){return Wr(u instanceof Ya?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(l)||(this.et(n,r,null),s++)}),s}Tt(t){const n=new Map;this.ze.forEach((r,a)=>{const l=this.ot(a);if(l){if(r.current&&Sd(l.target)){const u=new F(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,re.newNoDocument(u,t))}r.Be&&(n.set(a,r.ke()),r.qe())}});let i=lt();this.He.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.je.forEach((r,a)=>a.setReadTime(t));const s=new Xc(t,n,this.Ye,this.je,i);return this.je=ui(),this.Je=Jl(),this.He=Jl(),this.Ye=new Ut(ot),s}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new j_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Jt(ot),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Jt(ot),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new j_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Jl(){return new Ut(F.comparator)}function z_(){return new Ut(F.comparator)}const yC={asc:"ASCENDING",desc:"DESCENDING"},_C={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vC={and:"AND",or:"OR"};class EC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Rd(e,t){return e.useProto3Json||ll(t)?t:{value:t}}function lc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function xA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function TC(e,t){return lc(e,t.toTimestamp())}function nn(e){return ht(!!e,49232),X.fromTimestamp(function(n){const i=ss(n);return new Dt(i.seconds,i.nanos)}(e))}function Wm(e,t){return Id(e,t).canonicalString()}function Id(e,t){const n=function(s){return new At(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function OA(e){const t=At.fromString(e);return ht(LA(t),10190,{key:t.toString()}),t}function uc(e,t){return Wm(e.databaseId,t.path)}function yo(e,t){const n=OA(t);if(n.get(1)!==e.databaseId.projectId)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new F(MA(n))}function VA(e,t){return Wm(e.databaseId,t)}function AC(e){const t=OA(e);return t.length===4?At.emptyPath():MA(t)}function Cd(e){return new At(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function MA(e){return ht(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function B_(e,t,n){return{name:uc(e,t),fields:n.value.mapValue.fields}}function SC(e,t){return"found"in t?function(i,s){ht(!!s.found,43571),s.found.name,s.found.updateTime;const r=yo(i,s.found.name),a=nn(s.found.updateTime),l=s.found.createTime?nn(s.found.createTime):X.min(),u=new xe({mapValue:{fields:s.found.fields}});return re.newFoundDocument(r,a,l,u)}(e,t):"missing"in t?function(i,s){ht(!!s.missing,3894),ht(!!s.readTime,22933);const r=yo(i,s.missing),a=nn(s.readTime);return re.newNoDocument(r,a)}(e,t):Y(7234,{result:t})}function bC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(h,d){return h.useProto3Json?(ht(d===void 0||typeof d=="string",58123),_e.fromBase64String(d||"")):(ht(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),_e.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?M.UNKNOWN:CA(h.code);return new B(d,h.message||"")}(a);n=new DA(i,s,r,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=yo(e,i.document.name),r=nn(i.document.updateTime),a=i.document.createTime?nn(i.document.createTime):X.min(),l=new xe({mapValue:{fields:i.document.fields}}),u=re.newFoundDocument(s,r,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new vu(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=yo(e,i.document),r=i.readTime?nn(i.readTime):X.min(),a=re.newNoDocument(s,r),l=i.removedTargetIds||[];n=new vu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=yo(e,i.document),r=i.removedTargetIds||[];n=new vu([],r,s,null)}else{if(!("filter"in t))return Y(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new dC(s,r),l=i.targetId;n=new NA(l,a)}}return n}function kA(e,t){let n;if(t instanceof ul)n={update:B_(e,t.key,t.value)};else if(t instanceof Kc)n={delete:uc(e,t.key)};else if(t instanceof ds)n={update:B_(e,t.key,t.data),updateMask:VC(t.fieldMask)};else{if(!(t instanceof RA))return Y(16599,{Vt:t.type});n={verify:uc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof jo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof zo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Bo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof oc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:TC(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Y(27497)}(e,t.precondition)),n}function wC(e,t){return e&&e.length>0?(ht(t!==void 0,14353),e.map(n=>function(s,r){let a=s.updateTime?nn(s.updateTime):nn(r);return a.isEqual(X.min())&&(a=nn(r)),new lC(a,s.transformResults||[])}(n,t))):[]}function RC(e,t){return{documents:[VA(e,t.path)]}}function IC(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=VA(e,s);const r=function(h){if(h.length!==0)return UA(An.create(h,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:hr(m.field),direction:DC(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Rd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:s}}function CC(e){let t=AC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){ht(i===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let r=[];n.where&&(r=function(g){const m=PA(g);return m instanceof An&&uA(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(x){return new Lo(fr(x.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,ll(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,_=g.values||[];return new ac(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,_=g.values||[];return new ac(_,m)}(n.endAt)),YI(t,s,a,r,l,"F",u,h)}function NC(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function PA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=fr(n.unaryFilter.field);return Qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=fr(n.unaryFilter.field);return Qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=fr(n.unaryFilter.field);return Qt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=fr(n.unaryFilter.field);return Qt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(e):e.fieldFilter!==void 0?function(n){return Qt.create(fr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return An.create(n.compositeFilter.filters.map(i=>PA(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(e):Y(30097,{filter:e})}function DC(e){return yC[e]}function xC(e){return _C[e]}function OC(e){return vC[e]}function hr(e){return{fieldPath:e.canonicalString()}}function fr(e){return ge.fromServerFormat(e.fieldPath)}function UA(e){return e instanceof Qt?function(n){if(n.op==="=="){if(C_(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NAN"}};if(I_(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(C_(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NOT_NAN"}};if(I_(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hr(n.field),op:xC(n.op),value:n.value}}}(e):e instanceof An?function(n){const i=n.getFilters().map(s=>UA(s));return i.length===1?i[0]:{compositeFilter:{op:OC(n.op),filters:i}}}(e):Y(54877,{filter:e})}function VC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function LA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t,n,i,s,r=X.min(),a=X.min(),l=_e.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Li(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(t){this.yt=t}}function kC(e){const t=CC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?wd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.Cn=new UC}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(is.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(is.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class UC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new Jt(At.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new Jt(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jA=41943040;class Le{static withCacheSize(t){return new Le(t,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Le.DEFAULT_COLLECTION_PERCENTILE=10,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Le.DEFAULT=new Le(jA,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Le.DISABLED=new Le(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new na(0)}static cr(){return new na(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="LruGarbageCollector",LC=1048576;function G_([e,t],[n,i]){const s=ot(e,n);return s===0?ot(t,i):s}class jC{constructor(t){this.Ir=t,this.buffer=new Jt(G_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();G_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(H_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ga(n)?H(H_,"Ignoring IndexedDB error during garbage collection: ",n):await ma(n)}await this.Vr(3e5)})}}class BC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(qc.ce);const i=new jC(n);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(q_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),q_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,s,r,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(t,s))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(r=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),ur()<=at.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:g})))}}function qC(e,t){return new BC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.changes=new $s(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,re.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&po(i.mutation,s,Xe.empty(),Dt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,lt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=lt()){const s=ws();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let a=$a();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=ws();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,lt()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,s){let r=ui();const a=go(),l=function(){return go()}();return n.forEach((u,h)=>{const d=i.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof ds)?r=r.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),po(d.mutation,h,d.mutation.getFieldMask(),Dt.now())):a.set(h.key,Xe.empty())}),this.recalculateAndSaveOverlays(t,r).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new GC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=go();let s=new Ut((a,l)=>a-l),r=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||Xe.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(s.get(l.batchId)||lt()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=_A();d.forEach(m=>{if(!r.has(m)){const _=bA(n.get(m),i.get(m));_!==null&&g.set(m,_),r=r.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(a){return F.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):dA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):P.resolve(ws());let l=Mo,u=r;return a.next(h=>P.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),r.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,r)).next(()=>this.computeViews(t,u,h,lt())).next(d=>({batchId:l,changes:yA(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new F(n)).next(i=>{let s=$a();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let a=$a();return this.indexManager.getCollectionParents(t,r).next(l=>P.forEach(l,u=>{const h=function(g,m){return new pa(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(t,h,i,s).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(a=>{r.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,re.newInvalidDocument(d)))});let l=$a();return a.forEach((u,h)=>{const d=r.get(u);d!==void 0&&po(d.mutation,h,Xe.empty(),Dt.now()),Qc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:nn(s.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(s){return{name:s.name,query:kC(s.bundledQuery),readTime:nn(s.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.overlays=new Ut(F.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=ws();return P.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.St(t,n,r)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const s=ws(),r=n.length+1,a=new F(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return P.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Ut((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=r.get(h.largestBatchId);d===null&&(d=ws(),r=r.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=ws(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=s)););return P.resolve(l)}St(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new fC(n,i));let r=this.qr.get(n);r===void 0&&(r=lt(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.sessionToken=_e.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.Qr=new Jt(ne.$r),this.Ur=new Jt(ne.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new ne(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new ne(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new F(new At([])),i=new ne(n,t),s=new ne(n,t+1),r=[];return this.Ur.forEachInRange([i,s],a=>{this.Gr(a),r.push(a.key)}),r}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new F(new At([])),i=new ne(n,t),s=new ne(n,t+1);let r=lt();return this.Ur.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(t){const n=new ne(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class ne{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return F.comparator(t.key,n.key)||ot(t.Yr,n.Yr)}static Kr(t,n){return ot(t.Yr,n.Yr)||F.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(ne.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new hC(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new ne(l.key,r)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return P.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?Gm:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new ne(n,0),s=new ne(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],a=>{const l=this.Xr(a.Yr);r.push(l)}),P.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Jt(ot);return n.forEach(s=>{const r=new ne(s,0),a=new ne(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;F.isDocumentKey(r)||(r=r.child(""));const a=new ne(new F(r),0);let l=new Jt(ot);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){ht(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,s=>{const r=new ne(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new ne(n,0),s=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(t){this.ri=t,this.docs=function(){return new Ut(F.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():re.newInvalidDocument(n))}getEntries(t,n){let i=ui();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():re.newInvalidDocument(s))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=ui();const a=n.path,l=new F(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||RI(wI(d),i)<=0||(s.has(d.key)||Qc(n,d))&&(r=r.insert(d.key,d.mutableCopy()))}return P.resolve(r)}getAllFromCollectionGroup(t,n,i,s){Y(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new ZC(this)}getSize(t){return P.resolve(this.size)}}class ZC extends HC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(t){this.persistence=t,this.si=new $s(n=>$m(n),Ym),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.oi=0,this._i=new Jm,this.targetCount=0,this.ai=na.ur()}forEachTarget(t,n){return this.si.forEach((i,s)=>n(s)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new na(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),P.waitFor(r).next(()=>s)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(t,a))}),P.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(t,n){this.ui={},this.overlays={},this.ci=new qc(0),this.li=!1,this.li=!0,this.hi=new YC,this.referenceDelegate=t(this),this.Pi=new WC(this),this.indexManager=new PC,this.remoteDocumentCache=function(s){return new XC(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new MC(n),this.Ii=new QC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new $C,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new KC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){H("MemoryPersistence","Starting transaction:",t);const s=new JC(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class JC extends CI{constructor(t){super(),this.currentSequenceNumber=t}}class tg{constructor(t){this.persistence=t,this.Ri=new Jm,this.Vi=null}static mi(t){return new tg(t)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const s=F.fromPath(i);return this.gi(t,s).next(r=>{r||n.removeEntry(s,X.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class cc{constructor(t,n){this.persistence=t,this.pi=new $s(i=>xI(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=qC(this,n)}static mi(t,n){return new cc(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,s)=>this.br(t,i,s).next(r=>r?P.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,r.removeEntry(a,X.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=pu(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return P.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=s}static As(t,n){let i=lt(),s=lt();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new eg(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return $R()?8:NI(Ie())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.ys(t,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ws(t,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new tN;return this.Ss(t,n,a).next(l=>{if(r.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>r.result)}bs(t,n,i,s){return i.documentReadCount<this.fs?(ur()<=at.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",cr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(ur()<=at.DEBUG&&H("QueryEngine","Query:",cr(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(ur()<=at.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",cr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,On(n))):P.resolve())}ys(t,n){if(O_(n))return P.resolve(null);let i=On(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=wd(n,null,"F"),i=On(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const a=lt(...r);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,wd(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,s){return O_(n)||s.isEqual(X.min())?P.resolve(null):this.ps.getDocuments(t,i).next(r=>{const a=this.Ds(n,r);return this.Cs(n,a,i,s)?P.resolve(null):(ur()<=at.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),cr(n)),this.vs(t,a,n,bI(s,Mo)).next(l=>l))})}Ds(t,n){let i=new Jt(gA(t));return n.forEach((s,r)=>{Qc(t,r)&&(i=i.add(r))}),i}Cs(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(t,n,i){return ur()<=at.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",cr(n)),this.ps.getDocumentsMatchingQuery(t,n,is.min(),i)}vs(t,n,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="LocalStore",nN=3e8;class iN{constructor(t,n,i,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Ut(ot),this.xs=new $s(r=>$m(r),Ym),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new FC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function sN(e,t,n,i){return new iN(e,t,n,i)}async function BA(e,t){const n=et(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let u=lt();for(const h of s){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of r){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function rN(e,t){const n=et(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let _=P.resolve();return m.forEach(x=>{_=_.next(()=>d.getEntry(u,x)).next(V=>{const k=h.docVersions.get(x);ht(k!==null,48541),V.version.compareTo(k)<0&&(g.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=lt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function qA(e){const t=et(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function aN(e,t){const n=et(e),i=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=s.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(r,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(r,d.addedDocuments,g)));let _=m.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(_e.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),s=s.insert(g,_),function(V,k,A){return V.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=nN?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(r,_))});let u=ui(),h=lt();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,d))}),l.push(oN(r,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual(X.min())){const d=n.Pi.getLastRemoteSnapshotVersion(r).next(g=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,h)).next(()=>u)}).then(r=>(n.Ms=s,r))}function oN(e,t,n){let i=lt(),s=lt();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let a=ui();return n.forEach((l,u)=>{const h=r.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(X.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(ng,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:s}})}function lN(e,t){const n=et(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Gm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function uN(e,t){const n=et(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,t).next(r=>r?(s=r,P.resolve(s)):n.Pi.allocateTargetId(i).next(a=>(s=new Li(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Nd(e,t,n){const i=et(e),s=i.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ga(a))throw a;H(ng,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function F_(e,t,n){const i=et(e);let s=X.min(),r=lt();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=et(u),m=g.xs.get(d);return m!==void 0?P.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,On(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?s:X.min(),n?r:lt())).next(l=>(cN(i,XI(t),l),{documents:l,Qs:r})))}function cN(e,t,n){let i=e.Os.get(t)||X.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.Os.set(t,i)}class Q_{constructor(){this.activeTargetIds=nC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class hN{constructor(){this.Mo=new Q_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Q_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="ConnectivityMonitor";class Y_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H($_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H($_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu=null;function Dd(){return tu===null?tu=function(){return 268435456+Math.round(2147483648*Math.random())}():tu++,"0x"+tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="RestConnection",dN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===sc?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,n,i,s,r){const a=Dd(),l=this.zo(t,n.toUriEncodedString());H(df,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,r);const{host:h}=new URL(l),d=ha(h);return this.Jo(t,l,u,i,d).then(g=>(H(df,`Received RPC '${t}' ${a}: `,g),g),g=>{throw Wr(df,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,s,r,a){return this.Go(t,n,i,s,r)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+da}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}zo(t,n){const i=dN[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se="WebChannelConnection";class pN extends mN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,s,r){const a=Dd();return new Promise((l,u)=>{const h=new q0;h.setWithCredentials(!0),h.listenOnce(H0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case gu.NO_ERROR:const g=h.getResponseJson();H(Se,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case gu.TIMEOUT:H(Se,`RPC '${t}' ${a} timed out`),u(new B(M.DEADLINE_EXCEEDED,"Request time out"));break;case gu.HTTP_ERROR:const m=h.getStatus();if(H(Se,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const x=_==null?void 0:_.error;if(x&&x.status&&x.message){const V=function(A){const v=A.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(v)>=0?v:M.UNKNOWN}(x.status);u(new B(V,x.message))}else u(new B(M.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new B(M.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(Se,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(s);H(Se,`RPC '${t}' ${a} sending request:`,s),h.send(n,"POST",d,i,15)})}T_(t,n,i){const s=Dd(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Q0(),l=F0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=r.join("");H(Se,`Creating RPC '${t}' stream ${s}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,_=!1;const x=new gN({Yo:k=>{_?H(Se,`Not sending because RPC '${t}' stream ${s} is closed:`,k):(m||(H(Se,`Opening RPC '${t}' stream ${s} transport.`),g.open(),m=!0),H(Se,`RPC '${t}' stream ${s} sending:`,k),g.send(k))},Zo:()=>g.close()}),V=(k,A,v)=>{k.listen(A,w=>{try{v(w)}catch(D){setTimeout(()=>{throw D},0)}})};return V(g,Qa.EventType.OPEN,()=>{_||(H(Se,`RPC '${t}' stream ${s} transport opened.`),x.o_())}),V(g,Qa.EventType.CLOSE,()=>{_||(_=!0,H(Se,`RPC '${t}' stream ${s} transport closed`),x.a_(),this.E_(g))}),V(g,Qa.EventType.ERROR,k=>{_||(_=!0,Wr(Se,`RPC '${t}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),x.a_(new B(M.UNAVAILABLE,"The operation could not be completed")))}),V(g,Qa.EventType.MESSAGE,k=>{var A;if(!_){const v=k.data[0];ht(!!v,16349);const w=v,D=(w==null?void 0:w.error)||((A=w[0])==null?void 0:A.error);if(D){H(Se,`RPC '${t}' stream ${s} received error:`,D);const L=D.status;let q=function(T){const S=Gt[T];if(S!==void 0)return CA(S)}(L),E=D.message;q===void 0&&(q=M.INTERNAL,E="Unknown error status: "+L+" with message "+D.message),_=!0,x.a_(new B(q,E)),g.close()}else H(Se,`RPC '${t}' stream ${s} received:`,v),x.u_(v)}}),V(l,G0.STAT_EVENT,k=>{k.stat===_d.PROXY?H(Se,`RPC '${t}' stream ${s} detected buffering proxy`):k.stat===_d.NOPROXY&&H(Se,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function mf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(e){return new EC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(t,n,i=1e3,s=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="PersistentStream";class HA{constructor(t,n,i,s,r,a,l,u){this.Mi=t,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ig(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(li(n.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{t(()=>{const s=new B(M.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return H(K_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(H(K_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yN extends HA{constructor(t,n,i,s,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=bC(this.serializer,t),i=function(r){if(!("targetChange"in r))return X.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?X.min():a.readTime?nn(a.readTime):X.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Cd(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=Sd(u)?{documents:RC(r,u)}:{query:IC(r,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=xA(r,a.resumeToken);const h=Rd(r,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(X.min())>0){l.readTime=lc(r,a.snapshotVersion.toTimestamp());const h=Rd(r,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=NC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Cd(this.serializer),n.removeTarget=t,this.q_(n)}}class _N extends HA{constructor(t,n,i,s,r,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ht(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ht(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ht(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=wC(t.writeResults,t.commitTime),i=nn(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Cd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>kA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{}class EN extends vN{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Go(t,Id(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new B(M.UNKNOWN,r.toString())})}Ho(t,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Id(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(M.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class TN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(li(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="RemoteStore";class AN{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Ys(this)&&(H(zs,"Restarting streams for network reachability change."),await async function(u){const h=et(u);h.Ea.add(4),await hl(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Wc(h)}(this))})}),this.Ra=new TN(i,s)}}async function Wc(e){if(Ys(e))for(const t of e.da)await t(!0)}async function hl(e){for(const t of e.da)await t(!1)}function GA(e,t){const n=et(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),og(n)?ag(n):ya(n).O_()&&rg(n,t))}function sg(e,t){const n=et(e),i=ya(n);n.Ia.delete(t),i.O_()&&FA(n,t),n.Ia.size===0&&(i.O_()?i.L_():Ys(n)&&n.Ra.set("Unknown"))}function rg(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(X.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ya(e).Y_(t)}function FA(e,t){e.Va.Ue(t),ya(e).Z_(t)}function ag(e){e.Va=new pC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),ya(e).start(),e.Ra.ua()}function og(e){return Ys(e)&&!ya(e).x_()&&e.Ia.size>0}function Ys(e){return et(e).Ea.size===0}function QA(e){e.Va=void 0}async function SN(e){e.Ra.set("Online")}async function bN(e){e.Ia.forEach((t,n)=>{rg(e,t)})}async function wN(e,t){QA(e),og(e)?(e.Ra.ha(t),ag(e)):e.Ra.set("Unknown")}async function RN(e,t,n){if(e.Ra.set("Online"),t instanceof DA&&t.state===2&&t.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(e,t)}catch(i){H(zs,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await hc(e,i)}else if(t instanceof vu?e.Va.Ze(t):t instanceof NA?e.Va.st(t):e.Va.tt(t),!n.isEqual(X.min()))try{const i=await qA(e.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=r.Ia.get(h);d&&r.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=r.Ia.get(u);if(!d)return;r.Ia.set(u,d.withResumeToken(_e.EMPTY_BYTE_STRING,d.snapshotVersion)),FA(r,u);const g=new Li(d.target,u,h,d.sequenceNumber);rg(r,g)}),r.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){H(zs,"Failed to raise snapshot:",i),await hc(e,i)}}async function hc(e,t,n){if(!ga(t))throw t;e.Ea.add(1),await hl(e),e.Ra.set("Offline"),n||(n=()=>qA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{H(zs,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Wc(e)})}function $A(e,t){return t().catch(n=>hc(e,n,t))}async function Jc(e){const t=et(e),n=os(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Gm;for(;IN(t);)try{const s=await lN(t.localStore,i);if(s===null){t.Ta.length===0&&n.L_();break}i=s.batchId,CN(t,s)}catch(s){await hc(t,s)}YA(t)&&KA(t)}function IN(e){return Ys(e)&&e.Ta.length<10}function CN(e,t){e.Ta.push(t);const n=os(e);n.O_()&&n.X_&&n.ea(t.mutations)}function YA(e){return Ys(e)&&!os(e).x_()&&e.Ta.length>0}function KA(e){os(e).start()}async function NN(e){os(e).ra()}async function DN(e){const t=os(e);for(const n of e.Ta)t.ea(n.mutations)}async function xN(e,t,n){const i=e.Ta.shift(),s=Xm.from(i,t,n);await $A(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Jc(e)}async function ON(e,t){t&&os(e).X_&&await async function(i,s){if(function(a){return IA(a)&&a!==M.ABORTED}(s.code)){const r=i.Ta.shift();os(i).B_(),await $A(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Jc(i)}}(e,t),YA(e)&&KA(e)}async function X_(e,t){const n=et(e);n.asyncQueue.verifyOperationInProgress(),H(zs,"RemoteStore received new credentials");const i=Ys(n);n.Ea.add(3),await hl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Wc(n)}async function VN(e,t){const n=et(e);t?(n.Ea.delete(2),await Wc(n)):t||(n.Ea.add(2),await hl(n),n.Ra.set("Unknown"))}function ya(e){return e.ma||(e.ma=function(n,i,s){const r=et(n);return r.sa(),new yN(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:SN.bind(null,e),t_:bN.bind(null,e),r_:wN.bind(null,e),H_:RN.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),og(e)?ag(e):e.Ra.set("Unknown")):(await e.ma.stop(),QA(e))})),e.ma}function os(e){return e.fa||(e.fa=function(n,i,s){const r=et(n);return r.sa(),new _N(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:NN.bind(null,e),r_:ON.bind(null,e),ta:DN.bind(null,e),na:xN.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Jc(e)):(await e.fa.stop(),e.Ta.length>0&&(H(zs,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const a=Date.now()+i,l=new lg(t,n,a,s,r);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(M.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ug(e,t){if(li("AsyncQueue",`${t}: ${e}`),ga(e))return new B(M.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{static emptySet(t){return new kr(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||F.comparator(n.key,i.key):(n,i)=>F.comparator(n.key,i.key),this.keyedMap=$a(),this.sortedSet=new Ut(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof kr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new kr;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.ga=new Ut(F.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Y(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class ia{constructor(t,n,i,s,r,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ia(t,n,kr.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Fc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class kN{constructor(){this.queries=W_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=et(n),r=s.queries;s.queries=W_(),r.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new B(M.ABORTED,"Firestore shutting down"))}}function W_(){return new $s(e=>mA(e),Fc)}async function XA(e,t){const n=et(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.ba()&&t.Da()&&(i=2):(r=new MN,i=t.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=ug(a,`Initialization of query '${cr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&cg(n)}async function ZA(e,t){const n=et(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const a=r.Sa.indexOf(t);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?s=t.Da()?0:1:!r.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function PN(e,t){const n=et(e);let i=!1;for(const s of t){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.Sa)l.Fa(s)&&(i=!0);a.wa=s}}i&&cg(n)}function UN(e,t,n){const i=et(e),s=i.queries.get(t);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(t)}function cg(e){e.Ca.forEach(t=>{t.next()})}var xd,J_;(J_=xd||(xd={})).Ma="default",J_.Cache="cache";class WA{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new ia(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=ia.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==xd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(t){this.key=t}}class tS{constructor(t){this.key=t}}class LN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=lt(),this.mutatedKeys=lt(),this.eu=gA(t),this.tu=new kr(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new Z_,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,g)=>{const m=s.get(d),_=Qc(this.query,g)?g:null,x=!!m&&this.mutatedKeys.has(m.key),V=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let k=!1;m&&_?m.data.isEqual(_.data)?x!==V&&(i.track({type:3,doc:_}),k=!0):this.su(m,_)||(i.track({type:2,doc:_}),k=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),k=!0):m&&!_&&(i.track({type:1,doc:m}),k=!0,(u||h)&&(l=!0)),k&&(_?(a=a.add(_),r=V?r.add(d):r.delete(d)):(a=a.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),r=r.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(_,x){const V=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:k})}};return V(_)-V(x)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new ia(this.query,t.tu,r,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Z_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=lt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new tS(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new JA(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=lt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return ia.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hg="SyncEngine";class jN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class zN{constructor(t){this.key=t,this.hu=!1}}class BN{constructor(t,n,i,s,r,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new $s(l=>mA(l),Fc),this.Iu=new Map,this.Eu=new Set,this.du=new Ut(F.comparator),this.Au=new Map,this.Ru=new Jm,this.Vu={},this.mu=new Map,this.fu=na.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qN(e,t,n=!0){const i=aS(e);let s;const r=i.Tu.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await eS(i,t,n,!0),s}async function HN(e,t){const n=aS(e);await eS(n,t,!0,!1)}async function eS(e,t,n,i){const s=await uN(e.localStore,On(t)),r=s.targetId,a=e.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await GN(e,t,r,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&GA(e.remoteStore,s),l}async function GN(e,t,n,i,s){e.pu=(g,m,_)=>async function(V,k,A,v){let w=k.view.ru(A);w.Cs&&(w=await F_(V.localStore,k.query,!1).then(({documents:E})=>k.view.ru(E,w)));const D=v&&v.targetChanges.get(k.targetId),L=v&&v.targetMismatches.get(k.targetId)!=null,q=k.view.applyChanges(w,V.isPrimaryClient,D,L);return ev(V,k.targetId,q.au),q.snapshot}(e,g,m,_);const r=await F_(e.localStore,t,!0),a=new LN(t,r.Qs),l=a.ru(r.documents),u=cl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),h=a.applyChanges(l,e.isPrimaryClient,u);ev(e,n,h.au);const d=new jN(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function FN(e,t,n){const i=et(e),s=i.Tu.get(t),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(a=>!Fc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Nd(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&sg(i.remoteStore,s.targetId),Od(i,s.targetId)}).catch(ma)):(Od(i,s.targetId),await Nd(i.localStore,s.targetId,!0))}async function QN(e,t){const n=et(e),i=n.Tu.get(t),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),sg(n.remoteStore,i.targetId))}async function $N(e,t,n){const i=tD(e);try{const s=await function(a,l){const u=et(a),h=Dt.now(),d=l.reduce((_,x)=>_.add(x.key),lt());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let x=ui(),V=lt();return u.Ns.getEntries(_,d).next(k=>{x=k,x.forEach((A,v)=>{v.isValidDocument()||(V=V.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,x)).next(k=>{g=k;const A=[];for(const v of l){const w=cC(v,g.get(v.key).overlayedDocument);w!=null&&A.push(new ds(v.key,w,aA(w.value.mapValue),pe.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,A,l)}).next(k=>{m=k;const A=k.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(_,k.batchId,A)})}).then(()=>({batchId:m.batchId,changes:yA(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ut(ot)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,s.batchId,n),await fl(i,s.changes),await Jc(i.remoteStore)}catch(s){const r=ug(s,"Failed to persist write");n.reject(r)}}async function nS(e,t){const n=et(e);try{const i=await aN(n.localStore,t);t.targetChanges.forEach((s,r)=>{const a=n.Au.get(r);a&&(ht(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ht(a.hu,14607):s.removedDocuments.size>0&&(ht(a.hu,42227),a.hu=!1))}),await fl(n,i,t)}catch(i){await ma(i)}}function tv(e,t,n){const i=et(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=et(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&cg(u)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function YN(e,t,n){const i=et(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Au.get(t),r=s&&s.key;if(r){let a=new Ut(F.comparator);a=a.insert(r,re.newNoDocument(r,X.min()));const l=lt().add(r),u=new Xc(X.min(),new Map,new Ut(ot),a,l);await nS(i,u),i.du=i.du.remove(r),i.Au.delete(t),fg(i)}else await Nd(i.localStore,t,!1).then(()=>Od(i,t,n)).catch(ma)}async function KN(e,t){const n=et(e),i=t.batch.batchId;try{const s=await rN(n.localStore,t);sS(n,i,null),iS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await fl(n,s)}catch(s){await ma(s)}}async function XN(e,t,n){const i=et(e);try{const s=await function(a,l){const u=et(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ht(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);sS(i,t,n),iS(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await fl(i,s)}catch(s){await ma(s)}}function iS(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function sS(e,t,n){const i=et(e);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function Od(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||rS(e,i)})}function rS(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(sg(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),fg(e))}function ev(e,t,n){for(const i of n)i instanceof JA?(e.Ru.addReference(i.key,t),ZN(e,i)):i instanceof tS?(H(hg,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||rS(e,i.key)):Y(19791,{wu:i})}function ZN(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(H(hg,"New document in limbo: "+n),e.Eu.add(i),fg(e))}function fg(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new F(At.fromString(t)),i=e.fu.next();e.Au.set(i,new zN(n)),e.du=e.du.insert(n,i),GA(e.remoteStore,new Li(On(Gc(n.path)),i,"TargetPurposeLimboResolution",qc.ce))}}async function fl(e,t,n){const i=et(e),s=[],r=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=eg.As(u.targetId,h);r.push(g)}}))}),await Promise.all(a),i.Pu.H_(s),await async function(u,h){const d=et(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,m=>P.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>P.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!ga(g))throw g;H(ng,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const _=d.Ms.get(m),x=_.snapshotVersion,V=_.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(m,V)}}}(i.localStore,r))}async function WN(e,t){const n=et(e);if(!n.currentUser.isEqual(t)){H(hg,"User change. New user:",t.toKey());const i=await BA(n.localStore,t);n.currentUser=t,function(r,a){r.mu.forEach(l=>{l.forEach(u=>{u.reject(new B(M.CANCELLED,a))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await fl(n,i.Ls)}}function JN(e,t){const n=et(e),i=n.Au.get(t);if(i&&i.hu)return lt().add(i.key);{let s=lt();const r=n.Iu.get(t);if(!r)return s;for(const a of r){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function aS(e){const t=et(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=nS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=JN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=YN.bind(null,t),t.Pu.H_=PN.bind(null,t.eventManager),t.Pu.yu=UN.bind(null,t.eventManager),t}function tD(e){const t=et(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=KN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=XN.bind(null,t),t}class fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Zc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return sN(this.persistence,new eN,t.initialUser,this.serializer)}Cu(t){return new zA(tg.mi,this.serializer)}Du(t){return new hN}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fc.provider={build:()=>new fc};class eD extends fc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ht(this.persistence.referenceDelegate instanceof cc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new zC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Le.withCacheSize(this.cacheSizeBytes):Le.DEFAULT;return new zA(i=>cc.mi(i,n),this.serializer)}}class Vd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=WN.bind(null,this.syncEngine),await VN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new kN}()}createDatastore(t){const n=Zc(t.databaseInfo.databaseId),i=function(r){return new pN(r)}(t.databaseInfo);return function(r,a,l,u){return new EN(r,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,a,l){return new AN(i,s,r,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>tv(this.syncEngine,n,0),function(){return Y_.v()?new Y_:new fN}())}createSyncEngine(t,n){return function(s,r,a,l,u,h,d){const g=new BN(s,r,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=et(s);H(zs,"RemoteStore shutting down."),r.Ea.add(5),await hl(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Vd.provider={build:()=>new Vd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):li("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,r){const a=et(s),l={documents:r.map(g=>uc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,At.emptyPath(),l,r.length),h=new Map;u.forEach(g=>{const m=SC(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return r.forEach(g=>{const m=h.get(g.toString());ht(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Kc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const s=F.fromPath(i);this.mutations.push(new RA(s,this.precondition(s)))}),await async function(i,s){const r=et(i),a={writes:s.map(l=>kA(r.serializer,l))};await r.Go("Commit",r.serializer.databaseId,At.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Y(50498,{Gu:t.constructor.name});n=X.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new B(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(X.min())?pe.exists(!1):pe.updateTime(n):pe.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(X.min()))throw new B(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pe.updateTime(n)}return pe.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(t,n,i,s,r){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new ig(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new nD(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Yu(s)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!ll(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!IA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="FirestoreClient";class sD{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=be.UNAUTHENTICATED,this.clientId=Hm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{H(ls,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(ls,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=ug(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function gf(e,t){e.asyncQueue.verifyOperationInProgress(),H(ls,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await BA(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function nv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await rD(e);H(ls,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>X_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>X_(t.remoteStore,s)),e._onlineComponents=t}async function rD(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(ls,"Using user provided OfflineComponentProvider");try{await gf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Wr("Error using user provided cache. Falling back to memory cache: "+n),await gf(e,new fc)}}else H(ls,"Using default OfflineComponentProvider"),await gf(e,new eD(void 0));return e._offlineComponents}async function dg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(ls,"Using user provided OnlineComponentProvider"),await nv(e,e._uninitializedComponentsProvider._online)):(H(ls,"Using default OnlineComponentProvider"),await nv(e,new Vd))),e._onlineComponents}function aD(e){return dg(e).then(t=>t.syncEngine)}function oD(e){return dg(e).then(t=>t.datastore)}async function Md(e){const t=await dg(e),n=t.eventManager;return n.onListen=qN.bind(null,t.syncEngine),n.onUnlisten=FN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=HN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=QN.bind(null,t.syncEngine),n}function lD(e,t,n={}){const i=new ni;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,h){const d=new oS({next:m=>{d.Nu(),a.enqueueAndForget(()=>ZA(r,g));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new B(M.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new B(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new WA(Gc(l.path),d,{includeMetadataChanges:!0,qa:!0});return XA(r,g)}(await Md(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="firestore.googleapis.com",sv=!0;class rv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new B(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uS,this.ssl=sv}else this.host=t.host,this.ssl=t.ssl??sv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=jA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<LC)throw new B(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}SI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lS(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class th{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new B(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new dI;switch(i.type){case"firstParty":return new yI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new B(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=iv.get(n);i&&(H("ComponentProvider","Removing Datastore"),iv.delete(n),i.terminate())}(this),Promise.resolve()}}function uD(e,t,n,i={}){var h;e=en(e,th);const s=ha(t),r=e._getSettings(),a={...r,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(V0(`https://${l}`),M0("Firestore",!0)),r.host!==uS&&r.host!==l&&Wr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:l,ssl:s,emulatorOptions:i};if(!Us(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=be.MOCK_USER;else{d=LR(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new B(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new be(m)}e._authCredentials=new mI(new Y0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Ks(this.firestore,t,this._query)}}class Pt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Pt(this.firestore,t,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(ol(n,Pt._jsonSchema))return new Pt(t,i||null,new F(At.fromString(n.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:$t("string",Pt._jsonSchemaVersion),referencePath:$t("string")};class Zi extends Ks{constructor(t,n,i){super(t,n,Gc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Pt(this.firestore,null,new F(t))}withConverter(t){return new Zi(this.firestore,t,this._path)}}function av(e,t,...n){if(e=le(e),K0("collection","path",t),e instanceof th){const i=At.fromString(t,...n);return __(i),new Zi(e,null,i)}{if(!(e instanceof Pt||e instanceof Zi))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(At.fromString(t,...n));return __(i),new Zi(e.firestore,null,i)}}function _n(e,t,...n){if(e=le(e),arguments.length===1&&(t=Hm.newId()),K0("doc","path",t),e instanceof th){const i=At.fromString(t,...n);return y_(i),new Pt(e,null,new F(i))}{if(!(e instanceof Pt||e instanceof Zi))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(At.fromString(t,...n));return y_(i),new Pt(e.firestore,e instanceof Zi?e.converter:null,new F(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="AsyncQueue";class lv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ig(this,"async_queue_retry"),this._c=()=>{const i=mf();i&&H(ov,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=mf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=mf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ni;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ga(t))throw t;H(ov,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,li("INTERNAL UNHANDLED ERROR: ",uv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=lg.createAndSchedule(this,t,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&Y(47125,{Pc:uv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function uv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(e,["next","error","complete"])}class ci extends th{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new lv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new lv(t),this._firestoreClient=void 0,await t}}}function cD(e,t){const n=typeof e=="object"?e:L0(),i=typeof e=="string"?e:sc,s=Bm(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=PR("firestore");r&&uD(s,...r)}return s}function eh(e){if(e._terminated)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||hD(e),e._firestoreClient}function hD(e){var i,s,r;const t=e._freezeSettings(),n=function(l,u,h,d){return new MI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,lS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((r=t.localCache)!=null&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new sD(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ke(_e.fromBase64String(t))}catch(n){throw new B(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ke(_e.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ke._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ol(t,Ke._jsonSchema))return Ke.fromBase64String(t.bytes)}}Ke._jsonSchemaVersion="firestore/bytes/1.0",Ke._jsonSchema={type:$t("string",Ke._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new B(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ge(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new B(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new B(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ot(this._lat,t._lat)||ot(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vn._jsonSchemaVersion}}static fromJSON(t){if(ol(t,Vn._jsonSchema))return new Vn(t.latitude,t.longitude)}}Vn._jsonSchemaVersion="firestore/geoPoint/1.0",Vn._jsonSchema={type:$t("string",Vn._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Mn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ol(t,Mn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Mn(t.vectorValues);throw new B(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mn._jsonSchemaVersion="firestore/vectorValue/1.0",Mn._jsonSchema={type:$t("string",Mn._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=/^__.*__$/;class dD{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new ds(t,this.data,this.fieldMask,n,this.fieldTransforms):new ul(t,this.data,n,this.fieldTransforms)}}class cS{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new ds(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function hS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:e})}}class mg{constructor(t,n,i,s,r,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new mg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return dc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(hS(this.Ac)&&fD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class mD{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Zc(t)}Cc(t,n,i,s=!1){return new mg({Ac:t,methodName:n,Dc:i,path:ge.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ml(e){const t=e._freezeSettings(),n=Zc(e._databaseId);return new mD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gg(e,t,n,i,s,r={}){const a=e.Cc(r.merge||r.mergeFields?2:0,t,n,s);yg("Data must be an object, but it was:",a,i);const l=mS(i,a);let u,h;if(r.merge)u=new Xe(a.fieldMask),h=a.fieldTransforms;else if(r.mergeFields){const d=[];for(const g of r.mergeFields){const m=kd(t,g,n);if(!a.contains(m))throw new B(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);pS(d,m)||d.push(m)}u=new Xe(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new dD(new xe(l),u,h)}class ih extends nh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ih}}class pg extends nh{_toFieldTransform(t){return new aC(t.path,new jo)}isEqual(t){return t instanceof pg}}function fS(e,t,n,i){const s=e.Cc(1,t,n);yg("Data must be an object, but it was:",s,i);const r=[],a=xe.empty();fs(i,(u,h)=>{const d=_g(t,u,n);h=le(h);const g=s.yc(d);if(h instanceof ih)r.push(d);else{const m=gl(h,g);m!=null&&(r.push(d),a.set(d,m))}});const l=new Xe(r);return new cS(a,l,s.fieldTransforms)}function dS(e,t,n,i,s,r){const a=e.Cc(1,t,n),l=[kd(t,i,n)],u=[s];if(r.length%2!=0)throw new B(M.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<r.length;m+=2)l.push(kd(t,r[m])),u.push(r[m+1]);const h=[],d=xe.empty();for(let m=l.length-1;m>=0;--m)if(!pS(h,l[m])){const _=l[m];let x=u[m];x=le(x);const V=a.yc(_);if(x instanceof ih)h.push(_);else{const k=gl(x,V);k!=null&&(h.push(_),d.set(_,k))}}const g=new Xe(h);return new cS(d,g,a.fieldTransforms)}function gD(e,t,n,i=!1){return gl(n,e.Cc(i?4:3,t))}function gl(e,t){if(gS(e=le(e)))return yg("Unsupported field value:",t,e),mS(e,t);if(e instanceof nh)return function(i,s){if(!hS(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let u=gl(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=le(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return iC(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Dt.fromDate(i);return{timestampValue:lc(s.serializer,r)}}if(i instanceof Dt){const r=new Dt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:lc(s.serializer,r)}}if(i instanceof Vn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ke)return{bytesValue:xA(s.serializer,i._byteString)};if(i instanceof Pt){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Wm(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Mn)return function(a,l){return{mapValue:{fields:{[sA]:{stringValue:rA},[rc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Km(l.serializer,h)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${Bc(i)}`)}(e,t)}function mS(e,t){const n={};return W0(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):fs(e,(i,s)=>{const r=gl(s,t.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function gS(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Dt||e instanceof Vn||e instanceof Ke||e instanceof Pt||e instanceof nh||e instanceof Mn)}function yg(e,t,n){if(!gS(n)||!X0(n)){const i=Bc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function kd(e,t,n){if((t=le(t))instanceof dl)return t._internalPath;if(typeof t=="string")return _g(e,t);throw dc("Field path arguments must be of type string or ",e,!1,void 0,n)}const pD=new RegExp("[~\\*/\\[\\]]");function _g(e,t,n){if(t.search(pD)>=0)throw dc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new dl(...t.split("."))._internalPath}catch{throw dc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function dc(e,t,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new B(M.INVALID_ARGUMENT,l+e+u)}function pS(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new yD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(vg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yD extends mc{data(){return super.data()}}function vg(e,t){return typeof t=="string"?_g(e,t):t instanceof dl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new B(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Eg{}class yS extends Eg{}function vD(e,t,...n){let i=[];t instanceof Eg&&i.push(t),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof Ag).length,l=r.filter(u=>u instanceof Tg).length;if(a>1||a>0&&l>0)throw new B(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class Tg extends yS{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Tg(t,n,i)}_apply(t){const n=this._parse(t);return _S(t._query,n),new Ks(t.firestore,t.converter,bd(t._query,n))}_parse(t){const n=ml(t.firestore);return function(r,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){fv(g,d);const x=[];for(const V of g)x.push(hv(u,r,V));m={arrayValue:{values:x}}}else m=hv(u,r,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||fv(g,d),m=gD(l,a,g,d==="in"||d==="not-in");return Qt.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Ag extends Eg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Ag(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:An.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let a=s;const l=r.getFlattenedFilters();for(const u of l)_S(a,u),a=bd(a,u)}(t._query,n),new Ks(t.firestore,t.converter,bd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sg extends yS{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Sg(t,n)}_apply(t){const n=function(s,r,a){if(s.startAt!==null)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lo(r,a)}(t._query,this._field,this._direction);return new Ks(t.firestore,t.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new pa(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function ED(e,t="asc"){const n=t,i=vg("orderBy",e);return Sg._create(i,n)}function hv(e,t,n){if(typeof(n=le(n))=="string"){if(n==="")throw new B(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dA(t)&&n.indexOf("/")!==-1)throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(At.fromString(n));if(!F.isDocumentKey(i))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return R_(e,new F(i))}if(n instanceof Pt)return R_(e,n._key);throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bc(n)}.`)}function fv(e,t){if(!Array.isArray(e)||e.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function _S(e,t){const n=function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class vS{convertValue(t,n="none"){switch(as(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ht(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(rs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Y(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return fs(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var i,s,r;const n=(r=(s=(i=t.fields)==null?void 0:i[rc].arrayValue)==null?void 0:s.values)==null?void 0:r.map(a=>Ht(a.doubleValue));return new Mn(n)}convertGeoPoint(t){return new Vn(Ht(t.latitude),Ht(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Hc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ko(t));default:return null}}convertTimestamp(t){const n=ss(t);return new Dt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=At.fromString(t);ht(LA(i),9688,{name:t});const s=new Po(i.get(1),i.get(3)),r=new F(i.popFirst(5));return s.isEqual(n)||li(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class TD extends vS{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ke(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}class wr{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Wi extends mc{constructor(t,n,i,s,r,a){super(t,n,i,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(vg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Wi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Wi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wi._jsonSchema={type:$t("string",Wi._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class Eu extends Wi{data(t={}){return super.data(t)}}class Pr{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new wr(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Eu(this._firestore,this._userDataWriter,i.key,i,new wr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Eu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new wr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new Eu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new wr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:AD(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Pr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Hm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function AD(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(e){e=en(e,Pt);const t=en(e.firestore,ci);return lD(eh(t),e._key).then(n=>ES(t,e,n))}Pr._jsonSchemaVersion="firestore/querySnapshot/1.0",Pr._jsonSchema={type:$t("string",Pr._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class wg extends vS{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ke(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function gc(e,t,n){e=en(e,Pt);const i=en(e.firestore,ci),s=bg(e.converter,t,n);return sh(i,[gg(ml(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,pe.none())])}function bD(e,t,n,...i){e=en(e,Pt);const s=en(e.firestore,ci),r=ml(s);let a;return a=typeof(t=le(t))=="string"||t instanceof dl?dS(r,"updateDoc",e._key,t,n,i):fS(r,"updateDoc",e._key,t),sh(s,[a.toMutation(e._key,pe.exists(!0))])}function wD(e){return sh(en(e.firestore,ci),[new Kc(e._key,pe.none())])}function RD(e,t){const n=en(e.firestore,ci),i=_n(e),s=bg(e.converter,t);return sh(n,[gg(ml(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,pe.exists(!1))]).then(()=>i)}function Pd(e,...t){var u,h,d;e=le(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||cv(t[i])||(n=t[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(cv(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let r,a,l;if(e instanceof Pt)a=en(e.firestore,ci),l=Gc(e._key.path),r={next:g=>{t[i]&&t[i](ES(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=en(e,Ks);a=en(g.firestore,ci),l=g._query;const m=new wg(a);r={next:_=>{t[i]&&t[i](new Pr(a,m,g,_))},error:t[i+1],complete:t[i+2]},_D(e._query)}return function(m,_,x,V){const k=new oS(V),A=new WA(_,k,x);return m.asyncQueue.enqueueAndForget(async()=>XA(await Md(m),A)),()=>{k.Nu(),m.asyncQueue.enqueueAndForget(async()=>ZA(await Md(m),A))}}(eh(a),l,s,r)}function sh(e,t){return function(i,s){const r=new ni;return i.asyncQueue.enqueueAndForget(async()=>$N(await aD(i),s,r)),r.promise}(eh(e),t)}function ES(e,t,n){const i=n.docs.get(t._key),s=new wg(e);return new Wi(e,s,t._key,i,new wr(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID={maxAttempts:5};function Ka(e,t){if((e=le(e)).firestore!==t)throw new B(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=ml(t)}get(t){const n=Ka(t,this._firestore),i=new TD(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Y(24041);const r=s[0];if(r.isFoundDocument())return new mc(this._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new mc(this._firestore,i,n._key,null,n.converter);throw Y(18433,{doc:r})})}set(t,n,i){const s=Ka(t,this._firestore),r=bg(s.converter,n,i),a=gg(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,n,i,...s){const r=Ka(t,this._firestore);let a;return a=typeof(n=le(n))=="string"||n instanceof dl?dS(this._dataReader,"Transaction.update",r._key,n,i,s):fS(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,a),this}delete(t){const n=Ka(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND extends CD{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=Ka(t,this._firestore),i=new wg(this._firestore);return super.get(t).then(s=>new Wi(this._firestore,i,n._key,s._document,new wr(!1,!1),n.converter))}}function DD(e,t,n){e=en(e,ci);const i={...ID,...n};return function(r){if(r.maxAttempts<1)throw new B(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,a,l){const u=new ni;return r.asyncQueue.enqueueAndForget(async()=>{const h=await oD(r);new iD(r.asyncQueue,h,l,a,u).ju()}),u.promise}(eh(e),s=>t(new ND(e,s)),i)}function dv(){return new pg("serverTimestamp")}(function(t,n=!0){(function(s){da=s})(fa),Zr(new Ls("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new ci(new gI(i.getProvider("auth-internal")),new _I(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(h.options.projectId,d)}(a,s),a);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),Ki(d_,m_,t),Ki(d_,m_,"esm2020")})();function TS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xD=TS,AS=new rl("auth","Firebase",TS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=new jm("@firebase/auth");function OD(e,...t){pc.logLevel<=at.WARN&&pc.warn(`Auth (${fa}): ${e}`,...t)}function Tu(e,...t){pc.logLevel<=at.ERROR&&pc.error(`Auth (${fa}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(e,...t){throw Rg(e,...t)}function kn(e,...t){return Rg(e,...t)}function SS(e,t,n){const i={...xD(),[t]:n};return new rl("auth","Firebase",i).create(t,{appName:e.name})}function Ji(e){return SS(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rg(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return AS.create(e,...t)}function J(e,t,...n){if(!e)throw Rg(t,...n)}function Wn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Tu(t),new Error(t)}function fi(e,t){e||Wn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function VD(){return mv()==="http:"||mv()==="https:"}function mv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VD()||GR()||"connection"in navigator)?navigator.onLine:!0}function kD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(t,n){this.shortDelay=t,this.longDelay=n,fi(n>t,"Short delay should be less than long delay!"),this.isMobile=BR()||FR()}get(){return MD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(e,t){fi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LD=new pl(3e4,6e4);function rh(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function _a(e,t,n,i,s={}){return wS(e,s,async()=>{let r={},a={};i&&(t==="GET"?a=i:r={body:JSON.stringify(i)});const l=al({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...r};return HR()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&ha(e.emulatorConfig.host)&&(h.credentials="include"),bS.fetch()(await IS(e,e.config.apiHost,n,l),h)})}async function wS(e,t,n){e._canInitEmulator=!1;const i={...PD,...t};try{const s=new jD(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw eu(e,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw eu(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw eu(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw eu(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw SS(e,d,h);hi(e,d)}}catch(s){if(s instanceof mi)throw s;hi(e,"network-request-failed",{message:String(s)})}}async function RS(e,t,n,i,s={}){const r=await _a(e,t,n,i,s);return"mfaPendingCredential"in r&&hi(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function IS(e,t,n,i){const s=`${t}${n}?${i}`,r=e,a=r.config.emulator?Ig(e.config,s):`${e.config.apiScheme}://${s}`;return UD.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}class jD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(kn(this.auth,"network-request-failed")),LD.get())})}}function eu(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=kn(e,t,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zD(e,t){return _a(e,"POST","/v1/accounts:delete",t)}async function yc(e,t){return _a(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function BD(e,t=!1){const n=le(e),i=await n.getIdToken(t),s=Cg(i);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:_o(pf(s.auth_time)),issuedAtTime:_o(pf(s.iat)),expirationTime:_o(pf(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function pf(e){return Number(e)*1e3}function Cg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Tu("JWT malformed, contained fewer than 3 sections"),null;try{const s=N0(n);return s?JSON.parse(s):(Tu("Failed to decode base64 JWT payload"),null)}catch(s){return Tu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function gv(e){const t=Cg(e);return J(t,"internal-error"),J(typeof t.exp<"u","internal-error"),J(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof mi&&qD(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function qD({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_o(this.lastLoginAt),this.creationTime=_o(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(e){var g;const t=e.auth,n=await e.getIdToken(),i=await qo(e,yc(t,{idToken:n}));J(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const r=(g=s.providerUserInfo)!=null&&g.length?CS(s.providerUserInfo):[],a=FD(e.providerData,r),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ld(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function GD(e){const t=le(e);await _c(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function FD(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function CS(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(e,t){const n=await wS(e,{},async()=>{const i=al({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,a=await IS(e,s,"/v1/token",`key=${r}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&ha(e.emulatorConfig.host)&&(u.credentials="include"),bS.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $D(e,t){return _a(e,"POST","/v2/accounts:revokeToken",rh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){J(t.idToken,"internal-error"),J(typeof t.idToken<"u","internal-error"),J(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):gv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){J(t.length!==0,"internal-error");const n=gv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await QD(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new Ur;return i&&(J(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),s&&(J(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),r&&(J(typeof r=="number","internal-error",{appName:t}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ur,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(e,t){J(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class En{constructor({uid:t,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new HD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ld(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await qo(this,this.stsTokenManager.getToken(this.auth,t));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return BD(this,t)}reload(){return GD(this)}_assign(t){this!==t&&(J(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new En({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await _c(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(Ji(this.auth));const t=await this.getIdToken();return await qo(this,zD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:_,providerData:x,stsTokenManager:V}=n;J(g&&V,t,"internal-error");const k=Ur.fromJSON(this.name,V);J(typeof g=="string",t,"internal-error"),Ai(i,t.name),Ai(s,t.name),J(typeof m=="boolean",t,"internal-error"),J(typeof _=="boolean",t,"internal-error"),Ai(r,t.name),Ai(a,t.name),Ai(l,t.name),Ai(u,t.name),Ai(h,t.name),Ai(d,t.name);const A=new En({uid:g,auth:t,email:s,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:k,createdAt:h,lastLoginAt:d});return x&&Array.isArray(x)&&(A.providerData=x.map(v=>({...v}))),u&&(A._redirectEventId=u),A}static async _fromIdTokenResponse(t,n,i=!1){const s=new Ur;s.updateFromServerResponse(n);const r=new En({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await _c(r),r}static async _fromGetAccountInfoResponse(t,n,i){const s=n.users[0];J(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?CS(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new Ur;l.updateFromIdToken(i);const u=new En({uid:s.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Ld(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Map;function Jn(e){fi(e instanceof Function,"Expected a class definition");let t=pv.get(e);return t?(fi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,pv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}NS.type="NONE";const yv=NS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(e,t,n){return`firebase:${e}:${t}:${n}`}class Lr{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Au(this.userKey,s.apiKey,r),this.fullPersistenceKey=Au("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await yc(this.auth,{idToken:t}).catch(()=>{});return n?En._fromGetAccountInfoResponse(this.auth,n,t):null}return En._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Lr(Jn(yv),t,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=s[0]||Jn(yv);const a=Au(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await yc(t,{idToken:d}).catch(()=>{});if(!m)break;g=await En._fromGetAccountInfoResponse(t,m,d)}else g=En._fromJSON(t,d);h!==r&&(l=g),r=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new Lr(r,t,i):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==r)try{await h._remove(a)}catch{}})),new Lr(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(VS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(DS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(kS(t))return"Blackberry";if(PS(t))return"Webos";if(xS(t))return"Safari";if((t.includes("chrome/")||OS(t))&&!t.includes("edge/"))return"Chrome";if(MS(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function DS(e=Ie()){return/firefox\//i.test(e)}function xS(e=Ie()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function OS(e=Ie()){return/crios\//i.test(e)}function VS(e=Ie()){return/iemobile/i.test(e)}function MS(e=Ie()){return/android/i.test(e)}function kS(e=Ie()){return/blackberry/i.test(e)}function PS(e=Ie()){return/webos/i.test(e)}function Ng(e=Ie()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function YD(e=Ie()){var t;return Ng(e)&&!!((t=window.navigator)!=null&&t.standalone)}function KD(){return QR()&&document.documentMode===10}function US(e=Ie()){return Ng(e)||MS(e)||PS(e)||kS(e)||/windows phone/i.test(e)||VS(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(e,t=[]){let n;switch(e){case"Browser":n=_v(Ie());break;case"Worker":n=`${_v(Ie())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${fa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((a,l)=>{try{const u=t(r);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZD(e,t={}){return _a(e,"GET","/v2/passwordPolicy",rh(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=6;class JD{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??WD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vv(this),this.idTokenSubscription=new vv(this),this.beforeStateQueue=new XD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await Lr.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await yc(this,{idToken:t}),i=await En._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(vn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await _c(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=kD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(vn(this.app))return Promise.reject(Ji(this));const n=t?le(t):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&J(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(Ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return vn(this.app)?Promise.reject(Ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await ZD(this),n=new JD(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new rl("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await $D(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Jn(t)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Lr.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=LS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&OD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ah(e){return le(e)}class vv{constructor(t){this.auth=t,this.observer=null,this.addObserver=t2(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ex(e){Dg=e}function nx(e){return Dg.loadJS(e)}function ix(){return Dg.gapiScript}function sx(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(e,t){const n=Bm(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Us(r,t??{}))return s;hi(s,"already-initialized")}return n.initialize({options:t})}function ax(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Jn);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function ox(e,t,n){const i=ah(e);J(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,r=jS(t),{host:a,port:l}=lx(t),u=l===null?"":`:${l}`,h={url:`${r}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){J(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),J(Us(h,i.config.emulator)&&Us(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,ha(a)?(V0(`${r}//${a}${u}`),M0("Auth",!0)):ux()}function jS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function lx(e){const t=jS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:Ev(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:Ev(a)}}}function Ev(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function ux(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(t){return Wn("not implemented")}_linkToIdToken(t,n){return Wn("not implemented")}_getReauthenticationResolver(t){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jr(e,t){return RS(e,"POST","/v1/accounts:signInWithIdp",rh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="http://localhost";class Bs extends zS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Bs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):hi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const a=new Bs(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return jr(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,jr(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,jr(t,n)}buildRequest(){const t={requestUri:cx,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=al(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends BS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends yl{constructor(){super("facebook.com")}static credential(t){return Bs._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Di.credentialFromTaggedObject(t)}static credentialFromError(t){return Di.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Di.credential(t.oauthAccessToken)}catch{return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com";Di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends yl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Bs._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return xi.credentialFromTaggedObject(t)}static credentialFromError(t){return xi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return xi.credential(n,i)}catch{return null}}}xi.GOOGLE_SIGN_IN_METHOD="google.com";xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends yl{constructor(){super("github.com")}static credential(t){return Bs._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Oi.credentialFromTaggedObject(t)}static credentialFromError(t){return Oi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Oi.credential(t.oauthAccessToken)}catch{return null}}}Oi.GITHUB_SIGN_IN_METHOD="github.com";Oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends yl{constructor(){super("twitter.com")}static credential(t,n){return Bs._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Vi.credentialFromTaggedObject(t)}static credentialFromError(t){return Vi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Vi.credential(n,i)}catch{return null}}}Vi.TWITTER_SIGN_IN_METHOD="twitter.com";Vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(e,t){return RS(e,"POST","/v1/accounts:signUp",rh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await En._fromIdTokenResponse(t,i,s),a=Tv(i);return new us({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=Tv(i);return new us({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function Tv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fx(e){var s;if(vn(e.app))return Promise.reject(Ji(e));const t=ah(e);if(await t._initializationPromise,(s=t.currentUser)!=null&&s.isAnonymous)return new us({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await hx(t,{returnSecureToken:!0}),i=await us._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends mi{constructor(t,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,vc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new vc(t,n,i,s)}}function qS(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?vc._fromErrorAndOperation(e,r,t,i):r})}async function dx(e,t,n=!1){const i=await qo(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return us._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mx(e,t,n=!1){const{auth:i}=e;if(vn(i.app))return Promise.reject(Ji(i));const s="reauthenticate";try{const r=await qo(e,qS(i,s,t,e),n);J(r.idToken,i,"internal-error");const a=Cg(r.idToken);J(a,i,"internal-error");const{sub:l}=a;return J(e.uid===l,i,"user-mismatch"),us._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&hi(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(e,t,n=!1){if(vn(e.app))return Promise.reject(Ji(e));const i="signIn",s=await qS(e,i,t),r=await us._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}function px(e,t,n,i){return le(e).onIdTokenChanged(t,n,i)}function yx(e,t,n){return le(e).beforeAuthStateChanged(t,n)}const Ec="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ec,"1"),this.storage.removeItem(Ec),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=1e3,vx=10;class GS extends HS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=US(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);KD()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,vx):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},_x)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}GS.type="LOCAL";const Ex=GS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS extends HS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}FS.type="SESSION";const QS=FS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new oh(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async h=>h(n.origin,r)),u=await Tx(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const h=xg("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(m.data.response);break;default:clearTimeout(d),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return window}function Sx(e){Pn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(){return typeof Pn().WorkerGlobalScope<"u"&&typeof Pn().importScripts=="function"}async function bx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wx(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function Rx(){return $S()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="firebaseLocalStorageDb",Ix=1,Tc="firebaseLocalStorage",KS="fbase_key";class _l{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lh(e,t){return e.transaction([Tc],t?"readwrite":"readonly").objectStore(Tc)}function Cx(){const e=indexedDB.deleteDatabase(YS);return new _l(e).toPromise()}function jd(){const e=indexedDB.open(YS,Ix);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Tc,{keyPath:KS})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Tc)?t(i):(i.close(),await Cx(),t(await jd()))})})}async function Av(e,t,n){const i=lh(e,!0).put({[KS]:t,value:n});return new _l(i).toPromise()}async function Nx(e,t){const n=lh(e,!1).get(t),i=await new _l(n).toPromise();return i===void 0?null:i.value}function Sv(e,t){const n=lh(e,!0).delete(t);return new _l(n).toPromise()}const Dx=800,xx=3;class XS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>xx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $S()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=oh._getInstance(Rx()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await bx(),!this.activeServiceWorker)return;this.sender=new Ax(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||wx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await jd();return await Av(t,Ec,"1"),await Sv(t,Ec),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Av(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>Nx(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=lh(s,!1).getAll();return new _l(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Dx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XS.type="LOCAL";const Ox=XS;new pl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(e,t){return t?Jn(t):(J(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends zS{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return jr(t,this._buildIdpRequest())}_linkToIdToken(t,n){return jr(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return jr(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Mx(e){return gx(e.auth,new Og(e),e.bypassAuthState)}function kx(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),mx(n,new Og(e),e.bypassAuthState)}async function Px(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),dx(n,new Og(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Mx;case"linkViaPopup":case"linkViaRedirect":return Px;case"reauthViaPopup":case"reauthViaRedirect":return kx;default:hi(this.auth,"internal-error")}}resolve(t){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=new pl(2e3,1e4);class Rr extends ZS{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Rr.currentPopupAction&&Rr.currentPopupAction.cancel(),Rr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return J(t,this.auth,"internal-error"),t}async onExecution(){fi(this.filter.length===1,"Popup operations only handle one event");const t=xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Ux.get())};t()}}Rr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="pendingRedirect",Su=new Map;class jx extends ZS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Su.get(this.auth._key());if(!t){try{const i=await zx(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Su.set(this.auth._key(),t)}return this.bypassAuthState||Su.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zx(e,t){const n=Hx(t),i=qx(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function Bx(e,t){Su.set(e._key(),t)}function qx(e){return Jn(e._redirectPersistence)}function Hx(e){return Au(Lx,e.config.apiKey,e.name)}async function Gx(e,t,n=!1){if(vn(e.app))return Promise.reject(Ji(e));const i=ah(e),s=Vx(i,t),a=await new jx(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=10*60*1e3;class Qx{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!$x(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!WS(t)){const s=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(kn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Fx&&this.cachedEventUids.clear(),this.cachedEventUids.has(bv(t))}saveEventToCache(t){this.cachedEventUids.add(bv(t)),this.lastProcessedEventTime=Date.now()}}function bv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function WS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function $x(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(e,t={}){return _a(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xx=/^https?/;async function Zx(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Yx(e);for(const n of t)try{if(Wx(n))return}catch{}hi(e,"unauthorized-domain")}function Wx(e){const t=Ud(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!Xx.test(n))return!1;if(Kx.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=new pl(3e4,6e4);function wv(){const e=Pn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function t4(e){return new Promise((t,n)=>{var s,r,a;function i(){wv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{wv(),n(kn(e,"network-request-failed"))},timeout:Jx.get()})}if((r=(s=Pn().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)t(gapi.iframes.getContext());else if((a=Pn().gapi)!=null&&a.load)i();else{const l=sx("iframefcb");return Pn()[l]=()=>{gapi.load?i():n(kn(e,"network-request-failed"))},nx(`${ix()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw bu=null,t})}let bu=null;function e4(e){return bu=bu||t4(e),bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=new pl(5e3,15e3),i4="__/auth/iframe",s4="emulator/auth/iframe",r4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function o4(e){const t=e.config;J(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ig(t,s4):`https://${e.config.authDomain}/${i4}`,i={apiKey:t.apiKey,appName:e.name,v:fa},s=a4.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${al(i).slice(1)}`}async function l4(e){const t=await e4(e),n=Pn().gapi;return J(n,e,"internal-error"),t.open({where:document.body,url:o4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r4,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=kn(e,"network-request-failed"),l=Pn().setTimeout(()=>{r(a)},n4.get());function u(){Pn().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c4=500,h4=600,f4="_blank",d4="http://localhost";class Rv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function m4(e,t,n,i=c4,s=h4){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...u4,width:i.toString(),height:s.toString(),top:r,left:a},h=Ie().toLowerCase();n&&(l=OS(h)?f4:n),DS(h)&&(t=t||d4,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,x])=>`${m}${_}=${x},`,"");if(YD(h)&&l!=="_self")return g4(t||"",l),new Rv(null);const g=window.open(t||"",l,d);J(g,e,"popup-blocked");try{g.focus()}catch{}return new Rv(g)}function g4(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="__/auth/handler",y4="emulator/auth/handler",_4=encodeURIComponent("fac");async function Iv(e,t,n,i,s,r){J(e.config.authDomain,e,"auth-domain-config-required"),J(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:fa,eventId:s};if(t instanceof BS){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",JR(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof yl){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${_4}=${encodeURIComponent(u)}`:"";return`${v4(e)}?${al(l).slice(1)}${h}`}function v4({config:e}){return e.emulator?Ig(e,y4):`https://${e.authDomain}/${p4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="webStorageSupport";class E4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QS,this._completeRedirectFn=Gx,this._overrideRedirectResult=Bx}async _openPopup(t,n,i,s){var a;fi((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=await Iv(t,n,i,Ud(),s);return m4(t,r,xg())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await Iv(t,n,i,Ud(),s);return Sx(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(fi(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await l4(t),i=new Qx(t);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(yf,{type:yf},s=>{var a;const r=(a=s==null?void 0:s[0])==null?void 0:a[yf];r!==void 0&&n(!!r),hi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Zx(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return US()||xS()||Ng()}}const T4=E4;var Cv="@firebase/auth",Nv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function b4(e){Zr(new Ls("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LS(e)},h=new tx(i,s,r,u);return ax(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Zr(new Ls("auth-internal",t=>{const n=ah(t.getProvider("auth").getImmediate());return(i=>new A4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ki(Cv,Nv,S4(e)),Ki(Cv,Nv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=5*60,R4=O0("authIdTokenMaxAge")||w4;let Dv=null;const I4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>R4)return;const s=n==null?void 0:n.token;Dv!==s&&(Dv=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function C4(e=L0()){const t=Bm(e,"auth");if(t.isInitialized())return t.getImmediate();const n=rx(e,{popupRedirectResolver:T4,persistence:[Ox,Ex,QS]}),i=O0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=I4(r.toString());yx(n,a,()=>a(n.currentUser)),px(n,l=>a(l))}}const s=D0("auth");return s&&ox(n,`http://${s}`),n}function N4(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}ex({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=kn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",N4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});b4("Browser");const D4={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},JS=U0(D4),Qe=cD(JS),x4=C4(JS),t1="417641827",e1=({className:e=""})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:R.jsx("path",{d:"m9 18 6-6-6-6"})}),O4=({className:e=""})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[R.jsx("circle",{cx:"12",cy:"12",r:"4"}),R.jsx("path",{d:"M12 2v2"}),R.jsx("path",{d:"M12 20v2"}),R.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),R.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),R.jsx("path",{d:"M2 12h2"}),R.jsx("path",{d:"M20 12h2"}),R.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),R.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),V4=({className:e=""})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:R.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),M4=({className:e="",filled:t=!1})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[R.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),R.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),n1=({className:e=""})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[R.jsx("path",{d:"M19 12H5"}),R.jsx("polyline",{points:"12 19 5 12 12 5"})]}),i1=({className:e="",filled:t=!1})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[R.jsx("circle",{cx:"11",cy:"11",r:"8"}),R.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),k4=({className:e=""})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[R.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),R.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),P4=({className:e=""})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:R.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),s1=({className:e="",filled:t=!1})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:R.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),U4=({className:e=""})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[R.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),R.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),r1=({className:e="",filled:t=!1})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:R.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),L4=({className:e="",filled:t=!1})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[R.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),R.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),j4=({theme:e})=>{const t=sn[e];return R.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.bg}`,children:[R.jsx(s1,{className:"animate-pulse-heart text-pink-400",filled:!0}),R.jsx("p",{className:`mt-4 text-lg ${t.text} opacity-70`,children:"Загрузка новелл..."})]})},sn={light:{bg:"bg-stone-100",text:"text-stone-800",componentBg:"bg-white",componentText:"text-stone-700",border:"border-stone-200",searchBg:"bg-white",searchPlaceholder:"placeholder-stone-400",searchRing:"focus:ring-pink-400",tgBg:"#f8f7f5",tgHeader:"#FFFFFF",accent:"pink-500",accentHover:"pink-400",commentBg:"bg-stone-50",commentText:"text-stone-800"},dark:{bg:"bg-gray-900",text:"text-gray-100",componentBg:"bg-gray-800",componentText:"text-gray-200",border:"border-gray-700",searchBg:"bg-gray-800",searchPlaceholder:"placeholder-gray-500",searchRing:"focus:ring-pink-500",tgBg:"#111827",tgHeader:"#1f2937",accent:"pink-500",accentHover:"pink-400",commentBg:"bg-gray-700",commentText:"text-gray-100"}},Vg=({onClose:e,onSelectPlan:t,theme:n})=>{const i=sn[n],s=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return R.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:R.jsxs("div",{className:`w-full max-w-sm rounded-2xl p-6 shadow-lg ${i.componentBg} ${i.text}`,children:[R.jsx(P4,{className:`mx-auto mb-4 text-${i.accent}`}),R.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),R.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),R.jsx("div",{className:"space-y-3",children:s.map(r=>R.jsxs("button",{onClick:()=>t(r),className:`relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${i.border} ${i.componentBg} hover:border-${i.accentHover}`,children:[R.jsx("p",{className:"font-bold",children:r.name}),R.jsxs("p",{className:"text-sm",children:[r.price," ₽"]})]},r.duration))}),R.jsx("button",{onClick:e,className:`w-full py-3 mt-4 rounded-lg border ${i.border}`,children:"Не сейчас"})]})})},Mg=({onClose:e,onSelectMethod:t,theme:n,plan:i})=>{const s=sn[n];return R.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:R.jsxs("div",{className:`w-full max-w-sm rounded-2xl p-6 shadow-lg ${s.componentBg} ${s.text}`,children:[R.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),R.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",i.name," (",i.price," ₽)"]}),R.jsxs("div",{className:"space-y-3",children:[R.jsxs("button",{onClick:()=>t("card"),className:`w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${s.border} ${s.componentBg} hover:border-${s.accentHover}`,children:[R.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),R.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),R.jsxs("button",{onClick:()=>t("tribut"),className:`w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${s.border} ${s.componentBg} hover:border-${s.accentHover}`,children:[R.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),R.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]})]}),R.jsx("button",{onClick:e,className:`w-full py-3 mt-4 rounded-lg border ${s.border}`,children:"Назад"})]})})},qs=({title:e,onBack:t,theme:n})=>{const i=sn[n];return R.jsxs("div",{className:`sticky top-0 ${i.componentBg} z-20 py-3 px-4 flex items-center border-b ${i.border} shadow-sm`,children:[t&&R.jsx("button",{onClick:t,className:`mr-4 p-2 -ml-2 rounded-full hover:${i.bg}`,children:R.jsx(n1,{})}),R.jsx("h1",{className:"text-xl font-bold",children:e})]})},kg=({novels:e,onSelectNovel:t,theme:n,bookmarks:i,onToggleBookmark:s})=>{const r=sn[n];return R.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4",children:e.length>0?e.map((a,l)=>R.jsx("div",{onClick:()=>t(a),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${l*50}ms`},children:R.jsxs("div",{className:"relative filter drop-shadow-md group-hover:drop-shadow-pink transition-all duration-300",children:[R.jsx("button",{onClick:u=>{u.stopPropagation(),s(a.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${i.includes(a.id)?"text-pink-400":""}`,children:R.jsx(r1,{filled:i.includes(a.id),width:"20",height:"20"})}),R.jsx("img",{src:a.coverUrl,alt:a.title,className:`w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 ${r.border} border`}),R.jsx("h2",{className:`mt-2 font-semibold text-xs truncate ${r.text}`,children:a.title})]})},a.id)):R.jsx("p",{className:`col-span-3 text-center ${r.text} opacity-70`,children:"Ничего не найдено."})})},z4=({novel:e,onSelectChapter:t,onGenreSelect:n,theme:i,subscription:s,botUsername:r,userId:a,chaptersCache:l,lastReadData:u,onBack:h})=>{const d=sn[i],[g,m]=G.useState([]),[_,x]=G.useState(!0),[V,k]=G.useState(!1),[A,v]=G.useState(null),[w,D]=G.useState("newest"),[L,q]=G.useState(!1),E=s&&new Date(s.expires_at)>new Date,y=G.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);G.useEffect(()=>{l[e.id]?(m(l[e.id]),x(!1)):(x(!0),fetch(`./data/chapters/${e.id}.json`).then(Q=>Q.json()).then(Q=>{m(Q.chapters||[]),x(!1)}).catch(Q=>{console.error(Q),m([]),x(!1)}))},[e.id,l]);const T=G.useMemo(()=>{const Q=[...g];return w==="newest"?Q.reverse():g},[g,w]),S=Q=>{!E&&Q.isPaid?k(!0):t(Q)},I=()=>{if(y){const Q=g.find(Ct=>Ct.id===y);Q&&t(Q)}},C=Q=>v(Q),b=async Q=>{var j;const Ct=(j=window.Telegram)==null?void 0:j.WebApp;Ct&&a&&A&&Ct.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async K=>{if(K){const $=_n(Qe,"users",a);try{await gc($,{pendingSubscription:{...A,method:Q,date:new Date().toISOString()}},{merge:!0}),Ct.openTelegramLink(`https://t.me/${r}?start=true`),Ct.close()}catch(dt){console.error("Ошибка записи в Firebase:",dt),Ct.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})};return R.jsxs("div",{className:d.text,children:[R.jsx(qs,{title:e.title,onBack:h,theme:i}),R.jsxs("div",{className:"relative h-64",children:[R.jsx("img",{src:e.coverUrl,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),R.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${i==="dark"?"from-gray-900 via-gray-900/80":"from-stone-100 via-stone-100/80"} to-transparent`}),R.jsxs("div",{className:"absolute bottom-4 left-4",children:[R.jsx("h1",{className:"text-3xl font-bold font-sans text-white drop-shadow-pink",children:e.title}),R.jsx("p",{className:"text-sm font-sans text-white",children:e.author})]})]}),R.jsxs("div",{className:"p-4",children:[R.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(Q=>R.jsx("button",{onClick:()=>n(Q),className:`text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 ${i==="dark"?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:Q},Q))}),R.jsx("div",{className:`relative overflow-hidden transition-all duration-500 ${L?"max-h-full":"max-h-24"}`,children:R.jsx("p",{className:`text-sm mb-2 ${i==="dark"?"text-gray-300":"text-stone-600"} font-body`,children:e.description})}),R.jsx("button",{onClick:()=>q(!L),className:`text-sm font-semibold text-${d.accent} mb-4`,children:L?"Скрыть":"Читать полностью..."}),y&&R.jsxs("button",{onClick:I,className:"w-full py-3 mb-4 rounded-lg bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold shadow-lg shadow-pink-500/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",y,")"]}),R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),R.jsx("button",{onClick:()=>D(Q=>Q==="newest"?"oldest":"newest"),className:`text-sm font-semibold text-${d.accent}`,children:w==="newest"?"Сначала новые":"Сначала старые"})]}),E&&R.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",new Date(s.expires_at).toLocaleDateString()]}),_?R.jsx("p",{className:d.text,children:"Загрузка глав..."}):R.jsx("div",{className:"flex flex-col gap-3",children:T.map(Q=>{const Ct=!E&&Q.isPaid,j=y===Q.id;return R.jsxs("div",{onClick:()=>S(Q),className:`p-4 ${d.componentBg} rounded-xl cursor-pointer transition-all duration-200 hover:border-pink-400 hover:bg-pink-500/10 border ${d.border} flex items-center justify-between shadow-sm hover:shadow-md ${Ct?"opacity-70":""}`,children:[R.jsxs("div",{className:"flex items-center gap-3",children:[j&&R.jsx("span",{className:"w-2 h-2 rounded-full bg-pink-400"}),R.jsx("p",{className:`font-semibold ${d.componentText}`,children:Q.title})]}),Ct?R.jsx(k4,{className:d.text}):R.jsx(e1,{className:d.text})]},Q.id)})}),V&&R.jsx(Vg,{onClose:()=>k(!1),onSelectPlan:C,theme:i}),A&&R.jsx(Mg,{onClose:()=>v(null),onSelectMethod:b,theme:i,plan:A})]})]})},B4=({chapter:e,novel:t,theme:n,fontSize:i,userId:s,userName:r,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,botUsername:d,onBack:g})=>{const m=sn[n],[_,x]=G.useState([]),[V,k]=G.useState(""),[A,v]=G.useState(null),[w,D]=G.useState(""),[L,q]=G.useState(0),[E,y]=G.useState(!1),[T,S]=G.useState(!1),[I,C]=G.useState(!1),[b,Q]=G.useState(null),Ct=h&&new Date(h.expires_at)>new Date,j=G.useMemo(()=>_n(Qe,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);G.useEffect(()=>{const tt=Pd(j,Ce=>{var ce;q(((ce=Ce.data())==null?void 0:ce.likeCount)||0)}),Rt=vD(av(Qe,`chapters_metadata/${t.id}_${e.id}/comments`),ED("timestamp","asc")),Be=Pd(Rt,Ce=>{const ce=Ce.docs.map(qe=>({id:qe.id,...qe.data()}));x(ce)});if(s&&s!=="guest_user"){const Ce=_n(Qe,`chapters_metadata/${t.id}_${e.id}/likes`,s);SD(Ce).then(ce=>y(ce.exists()))}return()=>{tt(),Be()}},[j,t.id,e.id,s]);const K=async tt=>{if(tt.preventDefault(),!V.trim()||!s||s==="guest_user")return;const Rt=av(Qe,`chapters_metadata/${t.id}_${e.id}/comments`);await RD(Rt,{userId:s,userName:r||"Аноним",text:V,timestamp:dv()}),k("")},$=tt=>{v(tt.id),D(tt.text)},dt=async tt=>{if(!w.trim())return;const Rt=_n(Qe,`chapters_metadata/${t.id}_${e.id}/comments`,tt);await bD(Rt,{text:w}),v(null),D("")},St=async tt=>{const Rt=_n(Qe,`chapters_metadata/${t.id}_${e.id}/comments`,tt);await wD(Rt)},Kt=async()=>{if(!s||s==="guest_user")return;const tt=_n(Qe,`chapters_metadata/${t.id}_${e.id}/likes`,s);await DD(Qe,async Rt=>{var qe;const Be=await Rt.get(tt),ce=((qe=(await Rt.get(j)).data())==null?void 0:qe.likeCount)||0;Be.exists()?(Rt.delete(tt),Rt.set(j,{likeCount:Math.max(0,ce-1)},{merge:!0}),y(!1)):(Rt.set(tt,{timestamp:dv()}),Rt.set(j,{likeCount:ce+1},{merge:!0}),y(!0))})},Xt=tt=>{tt&&(!Ct&&tt.isPaid?(S(!1),C(!0)):(l(tt),S(!1)))},vt=tt=>{Q(tt),C(!1)},Me=async tt=>{var Be;const Rt=(Be=window.Telegram)==null?void 0:Be.WebApp;Rt&&s&&b&&Rt.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async Ce=>{if(Ce){const ce=_n(Qe,"users",s);try{await gc(ce,{pendingSubscription:{...b,method:tt,date:new Date().toISOString()}},{merge:!0}),Rt.openTelegramLink(`https://t.me/${d}?start=true`),Rt.close()}catch(qe){console.error("Ошибка записи в Firebase:",qe),Rt.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})},ue=u.findIndex(tt=>tt.id===e.id),Xs=u[ue-1],gn=u[ue+1];return R.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${m.bg}`,children:[R.jsx(qs,{title:t.title,onBack:g,theme:n}),R.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[R.jsx("h2",{className:`text-lg sm:text-xl mb-8 text-center opacity-80 font-sans ${m.text}`,children:e.title}),R.jsx("div",{className:`whitespace-pre-wrap leading-relaxed ${m.text} ${a}`,style:{fontSize:`${i}px`},children:e.content}),R.jsxs("div",{className:"mt-12 border-t pt-8",children:[R.jsx("div",{className:"flex items-center gap-4 mb-8",children:R.jsxs("button",{onClick:Kt,className:`flex items-center gap-2 text-${m.accentHover} transition-transform hover:scale-110`,children:[R.jsx(s1,{filled:E,className:E?`text-${m.accent}`:""}),R.jsx("span",{className:"font-bold text-lg",children:L})]})}),R.jsx("h3",{className:`text-2xl font-bold mb-4 ${m.text}`,children:"Комментарии"}),R.jsxs("div",{className:"space-y-4 mb-6",children:[_.map(tt=>R.jsxs("div",{className:`p-3 rounded-lg ${m.commentBg}`,children:[R.jsx("p",{className:`font-bold text-sm ${m.commentText}`,children:tt.userName}),A===tt.id?R.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[R.jsx("input",{type:"text",value:w,onChange:Rt=>D(Rt.target.value),className:`w-full ${m.searchBg} ${m.border} border rounded-lg py-1 px-2 ${m.commentText}`}),R.jsx("button",{onClick:()=>dt(tt.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),R.jsx("button",{onClick:()=>v(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):R.jsx("p",{className:`text-md mt-1 ${m.commentText}`,children:tt.text}),(s===tt.userId||s===t1)&&R.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[R.jsx("button",{onClick:()=>$(tt),className:"text-xs text-gray-500",children:"Редактировать"}),R.jsx("button",{onClick:()=>St(tt.id),className:"text-xs text-red-500",children:"Удалить"})]})]},tt.id)),_.length===0&&R.jsx("p",{className:`opacity-70 ${m.text}`,children:"Комментариев пока нет. Будьте первым!"})]}),R.jsxs("form",{onSubmit:K,className:"flex items-center gap-2",children:[R.jsx("input",{type:"text",value:V,onChange:tt=>k(tt.target.value),placeholder:"Написать комментарий...",className:`w-full ${m.searchBg} ${m.border} border rounded-lg py-2 px-4 ${m.commentText} ${m.searchPlaceholder} focus:outline-none focus:ring-2 ${m.searchRing}`}),R.jsx("button",{type:"submit",className:`p-2 rounded-full bg-${m.accent} text-white`,children:R.jsx(U4,{})})]})]})]}),R.jsxs("div",{className:`fixed bottom-0 left-0 right-0 p-2 border-t ${m.border} ${m.componentBg} flex justify-between items-center z-10`,children:[R.jsx("button",{onClick:()=>Xt(Xs),disabled:!Xs,className:"p-2 disabled:opacity-50",children:R.jsx(n1,{})}),R.jsx("button",{onClick:()=>S(!0),className:`px-4 py-2 rounded-lg ${m.bg}`,children:"Оглавление"}),R.jsx("button",{onClick:()=>Xt(gn),disabled:!gn,className:"p-2 disabled:opacity-50",children:R.jsx(e1,{className:"opacity-100"})})]}),T&&R.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>S(!1),children:R.jsxs("div",{className:`absolute bottom-0 left-0 right-0 max-h-1/2 p-4 rounded-t-2xl ${m.componentBg} overflow-y-auto`,onClick:tt=>tt.stopPropagation(),children:[R.jsx("h3",{className:"font-bold text-lg mb-4",children:"Главы"}),R.jsx("div",{className:"flex flex-col gap-2",children:u.map(tt=>R.jsx("button",{onClick:()=>Xt(tt),className:`p-2 text-left rounded-md ${tt.id===e.id?`bg-${m.accent} text-white`:m.bg}`,children:tt.title},tt.id))})]})}),I&&R.jsx(Vg,{onClose:()=>C(!1),onSelectPlan:vt,theme:n}),b&&R.jsx(Mg,{onClose:()=>Q(null),onSelectMethod:Me,theme:n,plan:b})]})},q4=({novels:e,onSelectNovel:t,theme:n,bookmarks:i,onToggleBookmark:s})=>{const r=sn[n],[a,l]=G.useState(""),u=G.useMemo(()=>a?e.filter(h=>h.title.toLowerCase().includes(a.toLowerCase())):e,[e,a]);return R.jsxs("div",{children:[R.jsx(qs,{title:"Поиск",theme:n}),R.jsxs("div",{className:"p-4",children:[R.jsxs("div",{className:"relative mb-6",children:[R.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:R.jsx(i1,{className:`${r.text} opacity-50`})}),R.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:a,onChange:h=>l(h.target.value),className:`w-full ${r.searchBg} ${r.border} border rounded-lg py-2 pl-10 pr-4 ${r.text} ${r.searchPlaceholder} focus:outline-none focus:ring-2 ${r.searchRing} transition-shadow duration-300`})]}),R.jsx(kg,{novels:u,onSelectNovel:t,theme:n,bookmarks:i,onToggleBookmark:s})]})]})},H4=({novels:e,onSelectNovel:t,theme:n,bookmarks:i,onToggleBookmark:s})=>R.jsxs("div",{children:[R.jsx(qs,{title:"Закладки",theme:n}),R.jsx(kg,{novels:e,onSelectNovel:t,theme:n,bookmarks:i,onToggleBookmark:s})]}),G4=({theme:e,subscription:t,onThemeChange:n,onGetSubscriptionClick:i})=>{const s=sn[e],r=t&&new Date(t.expires_at)>new Date;return R.jsxs("div",{children:[R.jsx(qs,{title:"Профиль",theme:e}),R.jsxs("div",{className:"p-4 space-y-4",children:[R.jsxs("div",{className:`p-4 rounded-lg ${s.componentBg} border ${s.border}`,children:[R.jsx("h3",{className:"font-bold mb-2",children:"Подписка"}),r?R.jsxs("div",{children:[R.jsx("p",{className:"text-green-500",children:"Активна"}),R.jsxs("p",{className:`text-sm ${s.text} opacity-70`,children:["Заканчивается: ",new Date(t.expires_at).toLocaleDateString()]})]}):R.jsxs("div",{children:[R.jsx("p",{className:"text-red-500",children:"Неактивна"}),R.jsx("p",{className:`text-sm ${s.text} opacity-70 mb-3`,children:"Оформите подписку, чтобы получить доступ ко всем платным главам."}),R.jsx("button",{onClick:i,className:"w-full py-2 rounded-lg bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold shadow-lg shadow-pink-500/30 transition-all hover:scale-105",children:"Оформить подписку"})]})]}),R.jsxs("div",{className:`p-4 rounded-lg ${s.componentBg} border ${s.border}`,children:[R.jsx("h3",{className:"font-bold mb-2",children:"Настройки"}),R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("span",{children:"Тема"}),R.jsx("button",{onClick:n,className:`w-12 h-12 rounded-full ${s.bg} flex items-center justify-center border ${s.border}`,children:e==="dark"?R.jsx(O4,{}):R.jsx(V4,{})})]})]})]})]})},F4=({activeTab:e,setActiveTab:t,theme:n})=>{const i=sn[n],s=[{id:"library",label:"Библиотека",icon:M4},{id:"search",label:"Поиск",icon:i1},{id:"bookmarks",label:"Закладки",icon:r1},{id:"profile",label:"Профиль",icon:L4}];return R.jsx("div",{className:`fixed bottom-0 left-0 right-0 border-t ${i.border} ${i.componentBg} z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]`,children:R.jsx("div",{className:"flex justify-around items-center h-16",children:s.map(r=>R.jsxs("button",{onClick:()=>t(r.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===r.id?`text-${i.accent}`:`${i.text} opacity-60`}`,children:[R.jsx(r.icon,{filled:e===r.id}),R.jsx("span",{className:"text-xs mt-1",children:r.label})]},r.id))})})};function Q4(){const[e,t]=G.useState("light"),[n,i]=G.useState(18),[s,r]=G.useState("font-sans"),[a,l]=G.useState("list"),[u,h]=G.useState("library"),[d,g]=G.useState([]),[m,_]=G.useState(null),[x,V]=G.useState(null),[k,A]=G.useState(null),[v,w]=G.useState(null),[D,L]=G.useState(null),[q,E]=G.useState(null),[y,T]=G.useState(!0),[S,I]=G.useState({}),[C,b]=G.useState(null),[Q,Ct]=G.useState([]),[j,K]=G.useState(!1),[$,dt]=G.useState(null),St="tenebrisverbot",Kt=G.useCallback(async W=>{if(D&&D!=="guest_user"){const ft=_n(Qe,"users",D);try{await gc(ft,W,{merge:!0})}catch(ve){console.error("Не удалось обновить данные пользователя:",ve)}}},[D]),Xt=G.useCallback(W=>{t(W),Kt({settings:{theme:W,fontSize:n,fontClass:s}})},[n,s,Kt]);G.useCallback(W=>{i(ft=>{const ve=Math.max(12,Math.min(32,ft+W));return Kt({settings:{theme:e,fontSize:ve,fontClass:s}}),ve})},[e,s,Kt]),G.useCallback(W=>{r(W),Kt({settings:{theme:e,fontSize:n,fontClass:W}})},[e,n,Kt]),G.useEffect(()=>{(async()=>{var ft,ve,Zs,ms,gi,Ea;try{const zn=(ft=window.Telegram)==null?void 0:ft.WebApp;let pi="guest_user";if(zn&&(zn.ready(),zn.expand(),pi=((ms=(Zs=(ve=zn.initDataUnsafe)==null?void 0:ve.user)==null?void 0:Zs.id)==null?void 0:ms.toString())||"guest_user",E(((Ea=(gi=zn.initDataUnsafe)==null?void 0:gi.user)==null?void 0:Ea.first_name)||null)),L(pi),await fx(x4),pi!=="guest_user"){const ee=_n(Qe,"users",pi),Ee=Pd(ee,gs=>{if(gs.exists()){const bn=gs.data();w(bn.subscription||null),b(bn.lastRead||null),Ct(bn.bookmarks||[]),bn.settings&&(t(bn.settings.theme||"light"),i(bn.settings.fontSize||18),r(bn.settings.fontClass||"font-sans"))}})}const Ws=await fetch("./data/novels.json");if(!Ws.ok)throw new Error("Failed to fetch novels");const vl=await Ws.json();g(vl.novels)}catch(zn){console.error("Ошибка инициализации:",zn)}finally{T(!1)}})()},[]),G.useEffect(()=>{d.length>0&&d.forEach(W=>{fetch(`./data/chapters/${W.id}.json`).then(ft=>ft.json()).then(ft=>I(ve=>({...ve,[W.id]:ft.chapters||[]}))).catch(ft=>console.error(`Не удалось предзагрузить главы для ${W.title}:`,ft))})},[d]),G.useEffect(()=>{document.documentElement.className=e},[e]);const vt=G.useCallback(()=>{a==="reader"?l("details"):a==="details"&&(l("list"),A(null))},[a]);G.useEffect(()=>{var ft;const W=(ft=window.Telegram)==null?void 0:ft.WebApp;if(W)return W.onEvent("backButtonClicked",vt),a==="list"?W.BackButton.hide():W.BackButton.show(),()=>W.offEvent("backButtonClicked",vt)},[a,vt]),G.useEffect(()=>{var ft;const W=(ft=window.Telegram)==null?void 0:ft.WebApp;W&&(W.setHeaderColor(sn[e].tgHeader),W.setBackgroundColor(sn[e].tgBg))},[e]);const Me=G.useCallback(async W=>{if(V(W),l("reader"),D&&D!=="guest_user"&&m){const ft={...C||{},[m.id]:{novelId:m.id,chapterId:W.id,timestamp:new Date().toISOString()}};b(ft),await Kt({lastRead:ft})}},[D,m,C,Kt]),ue=W=>{_(W),l("details")},Xs=W=>{A(W),l("list"),h("library")},gn=G.useCallback(async W=>{const ft=Q.includes(W)?Q.filter(ve=>ve!==W):[...Q,W];Ct(ft),await Kt({bookmarks:ft})},[Q,Kt]),tt=G.useMemo(()=>d.filter(W=>Q.includes(W.id)),[d,Q]),Rt=()=>{K(!0)},Be=W=>{dt(W),K(!1)},Ce=async W=>{var ve;const ft=(ve=window.Telegram)==null?void 0:ve.WebApp;ft&&D&&$&&ft.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async Zs=>{if(Zs){const ms=_n(Qe,"users",D);try{await gc(ms,{pendingSubscription:{...$,method:W,date:new Date().toISOString()}},{merge:!0}),ft.openTelegramLink(`https://t.me/${St}?start=true`),ft.close()}catch(gi){console.error("Ошибка записи в Firebase:",gi),ft.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})};if(y)return R.jsx(j4,{theme:e});const ce=sn[e],qe=D===t1,va=()=>{if(a==="details")return R.jsx(z4,{novel:m,onSelectChapter:Me,onGenreSelect:Xs,theme:e,subscription:v,botUsername:St,userId:D,chaptersCache:S,lastReadData:C,onBack:vt});if(a==="reader")return R.jsx(B4,{chapter:x,novel:m,theme:e,fontSize:n,userId:D,userName:q,currentFontClass:s,onSelectChapter:Me,allChapters:S[m.id]||[],subscription:v,botUsername:St,onBack:vt});switch(u){case"library":return R.jsxs(R.Fragment,{children:[R.jsx(qs,{title:"Библиотека",theme:e}),R.jsx(kg,{novels:d.filter(W=>!k||W.genres.includes(k)),onSelectNovel:ue,theme:e,bookmarks:Q,onToggleBookmark:gn})]});case"search":return R.jsx(q4,{novels:d,onSelectNovel:ue,theme:e,bookmarks:Q,onToggleBookmark:gn});case"bookmarks":return R.jsx(H4,{novels:tt,onSelectNovel:ue,theme:e,bookmarks:Q,onToggleBookmark:gn});case"profile":return R.jsx(G4,{theme:e,subscription:v,onThemeChange:()=>Xt(e==="dark"?"light":"dark"),onGetSubscriptionClick:Rt});default:return R.jsx(qs,{title:"Библиотека",theme:e})}};return R.jsxs("main",{className:`${ce.bg} min-h-screen font-sans ${qe?"":"no-select"}`,children:[R.jsx("div",{className:"pb-20",children:va()}),a==="list"&&R.jsx(F4,{activeTab:u,setActiveTab:h,theme:e}),j&&R.jsx(Vg,{onClose:()=>K(!1),onSelectPlan:Be,theme:e}),$&&R.jsx(Mg,{onClose:()=>dt(null),onSelectMethod:Ce,theme:e,plan:$})]})}IR.createRoot(document.getElementById("root")).render(R.jsx(G.StrictMode,{children:R.jsx(Q4,{})}));
