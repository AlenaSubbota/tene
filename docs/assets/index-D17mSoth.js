(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function MS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mv={exports:{}},Rc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kS=Symbol.for("react.transitional.element"),PS=Symbol.for("react.fragment");function kv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:kS,type:e,key:i,ref:t!==void 0?t:null,props:n}}Rc.Fragment=PS;Rc.jsx=kv;Rc.jsxs=kv;Mv.exports=Rc;var E=Mv.exports,Pv={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gd=Symbol.for("react.transitional.element"),US=Symbol.for("react.portal"),LS=Symbol.for("react.fragment"),jS=Symbol.for("react.strict_mode"),zS=Symbol.for("react.profiler"),BS=Symbol.for("react.consumer"),qS=Symbol.for("react.context"),HS=Symbol.for("react.forward_ref"),FS=Symbol.for("react.suspense"),GS=Symbol.for("react.memo"),Uv=Symbol.for("react.lazy"),Vp=Symbol.iterator;function QS(e){return e===null||typeof e!="object"?null:(e=Vp&&e[Vp]||e["@@iterator"],typeof e=="function"?e:null)}var Lv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jv=Object.assign,zv={};function ca(e,t,n){this.props=e,this.context=t,this.refs=zv,this.updater=n||Lv}ca.prototype.isReactComponent={};ca.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ca.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Bv(){}Bv.prototype=ca.prototype;function Qd(e,t,n){this.props=e,this.context=t,this.refs=zv,this.updater=n||Lv}var Yd=Qd.prototype=new Bv;Yd.constructor=Qd;jv(Yd,ca.prototype);Yd.isPureReactComponent=!0;var Mp=Array.isArray,Ut={H:null,A:null,T:null,S:null,V:null},qv=Object.prototype.hasOwnProperty;function Kd(e,t,n,i,r,s){return n=s.ref,{$$typeof:Gd,type:e,key:t,ref:n!==void 0?n:null,props:s}}function YS(e,t){return Kd(e.type,t,void 0,void 0,void 0,e.props)}function Xd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gd}function KS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var kp=/\/+/g;function Nh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?KS(""+e.key):t.toString(36)}function Pp(){}function XS(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Pp,Pp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function cs(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Gd:case US:a=!0;break;case Uv:return a=e._init,cs(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+Nh(e,0):i,Mp(r)?(n="",a!=null&&(n=a.replace(kp,"$&/")+"/"),cs(r,t,n,"",function(h){return h})):r!=null&&(Xd(r)&&(r=YS(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(kp,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(Mp(e))for(var u=0;u<e.length;u++)i=e[u],s=l+Nh(i,u),a+=cs(i,t,n,s,r);else if(u=QS(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+Nh(i,u++),a+=cs(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return cs(XS(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function jl(e,t,n){if(e==null)return e;var i=[],r=0;return cs(e,i,"","",function(s){return t.call(n,s,r++)}),i}function $S(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Up=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function ZS(){}nt.Children={map:jl,forEach:function(e,t,n){jl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return jl(e,function(){t++}),t},toArray:function(e){return jl(e,function(t){return t})||[]},only:function(e){if(!Xd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=ca;nt.Fragment=LS;nt.Profiler=zS;nt.PureComponent=Qd;nt.StrictMode=jS;nt.Suspense=FS;nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ut;nt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Ut.H.useMemoCache(e)}};nt.cache=function(e){return function(){return e.apply(null,arguments)}};nt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=jv({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!qv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Kd(e.type,r,void 0,void 0,s,i)};nt.createContext=function(e){return e={$$typeof:qS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:BS,_context:e},e};nt.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)qv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return Kd(e,s,void 0,void 0,null,r)};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:HS,render:e}};nt.isValidElement=Xd;nt.lazy=function(e){return{$$typeof:Uv,_payload:{_status:-1,_result:e},_init:$S}};nt.memo=function(e,t){return{$$typeof:GS,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=Ut.T,n={};Ut.T=n;try{var i=e(),r=Ut.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(ZS,Up)}catch(s){Up(s)}finally{Ut.T=t}};nt.unstable_useCacheRefresh=function(){return Ut.H.useCacheRefresh()};nt.use=function(e){return Ut.H.use(e)};nt.useActionState=function(e,t,n){return Ut.H.useActionState(e,t,n)};nt.useCallback=function(e,t){return Ut.H.useCallback(e,t)};nt.useContext=function(e){return Ut.H.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e,t){return Ut.H.useDeferredValue(e,t)};nt.useEffect=function(e,t,n){var i=Ut.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};nt.useId=function(){return Ut.H.useId()};nt.useImperativeHandle=function(e,t,n){return Ut.H.useImperativeHandle(e,t,n)};nt.useInsertionEffect=function(e,t){return Ut.H.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return Ut.H.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return Ut.H.useMemo(e,t)};nt.useOptimistic=function(e,t){return Ut.H.useOptimistic(e,t)};nt.useReducer=function(e,t,n){return Ut.H.useReducer(e,t,n)};nt.useRef=function(e){return Ut.H.useRef(e)};nt.useState=function(e){return Ut.H.useState(e)};nt.useSyncExternalStore=function(e,t,n){return Ut.H.useSyncExternalStore(e,t,n)};nt.useTransition=function(){return Ut.H.useTransition()};nt.version="19.1.1";Pv.exports=nt;var F=Pv.exports;const WS=MS(F);var Hv={exports:{}},Ic={},Fv={exports:{}},Gv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,X){var $=j.length;j.push(X);t:for(;0<$;){var ht=$-1>>>1,Et=j[ht];if(0<r(Et,X))j[ht]=X,j[$]=Et,$=ht;else break t}}function n(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var X=j[0],$=j.pop();if($!==X){j[0]=$;t:for(var ht=0,Et=j.length,mn=Et>>>1;ht<mn;){var qt=2*(ht+1)-1,Dt=j[qt],me=qt+1,Qt=j[me];if(0>r(Dt,$))me<Et&&0>r(Qt,Dt)?(j[ht]=Qt,j[me]=$,ht=me):(j[ht]=Dt,j[qt]=$,ht=qt);else if(me<Et&&0>r(Qt,$))j[ht]=Qt,j[me]=$,ht=me;else break t}}return X}function r(j,X){var $=j.sortIndex-X.sortIndex;return $!==0?$:j.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,_=!1,x=!1,O=!1,M=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(j){for(var X=n(h);X!==null;){if(X.callback===null)i(h);else if(X.startTime<=j)i(h),X.sortIndex=X.expirationTime,t(u,X);else break;X=n(h)}}function L(j){if(O=!1,D(j),!x)if(n(u)!==null)x=!0,q||(q=!0,C());else{var X=n(h);X!==null&&be(L,X.startTime-j)}}var q=!1,T=-1,y=5,b=-1;function w(){return M?!0:!(e.unstable_now()-b<y)}function I(){if(M=!1,q){var j=e.unstable_now();b=j;var X=!0;try{t:{x=!1,O&&(O=!1,v(T),T=-1),_=!0;var $=m;try{e:{for(D(j),g=n(u);g!==null&&!(g.expirationTime>j&&w());){var ht=g.callback;if(typeof ht=="function"){g.callback=null,m=g.priorityLevel;var Et=ht(g.expirationTime<=j);if(j=e.unstable_now(),typeof Et=="function"){g.callback=Et,D(j),X=!0;break e}g===n(u)&&i(u),D(j)}else i(u);g=n(u)}if(g!==null)X=!0;else{var mn=n(h);mn!==null&&be(L,mn.startTime-j),X=!1}}break t}finally{g=null,m=$,_=!1}X=void 0}}finally{X?C():q=!1}}}var C;if(typeof R=="function")C=function(){R(I)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,xt=S.port2;S.port1.onmessage=I,C=function(){xt.postMessage(null)}}else C=function(){A(I,0)};function be(j,X){T=A(function(){j(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(j){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var $=m;m=X;try{return j()}finally{m=$}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(j,X){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var $=m;m=j;try{return X()}finally{m=$}},e.unstable_scheduleCallback=function(j,X,$){var ht=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ht+$:ht):$=ht,j){case 1:var Et=-1;break;case 2:Et=250;break;case 5:Et=1073741823;break;case 4:Et=1e4;break;default:Et=5e3}return Et=$+Et,j={id:d++,callback:X,priorityLevel:j,startTime:$,expirationTime:Et,sortIndex:-1},$>ht?(j.sortIndex=$,t(h,j),n(u)===null&&j===n(h)&&(O?(v(T),T=-1):O=!0,be(L,$-ht))):(j.sortIndex=Et,t(u,j),x||_||(x=!0,q||(q=!0,C()))),j},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(j){var X=m;return function(){var $=m;m=X;try{return j.apply(this,arguments)}finally{m=$}}}})(Gv);Fv.exports=Gv;var JS=Fv.exports,Qv={exports:{}},Pe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1=F;function Yv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Si(){}var ke={d:{f:Si,r:function(){throw Error(Yv(522))},D:Si,C:Si,L:Si,m:Si,X:Si,S:Si,M:Si},p:0,findDOMNode:null},e1=Symbol.for("react.portal");function n1(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:e1,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var eo=t1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Cc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Pe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ke;Pe.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Yv(299));return n1(e,t,null,n)};Pe.flushSync=function(e){var t=eo.T,n=ke.p;try{if(eo.T=null,ke.p=2,e)return e()}finally{eo.T=t,ke.p=n,ke.d.f()}};Pe.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,ke.d.C(e,t))};Pe.prefetchDNS=function(e){typeof e=="string"&&ke.d.D(e)};Pe.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Cc(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?ke.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&ke.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Pe.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Cc(t.as,t.crossOrigin);ke.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&ke.d.M(e)};Pe.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Cc(n,t.crossOrigin);ke.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Pe.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Cc(t.as,t.crossOrigin);ke.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else ke.d.m(e)};Pe.requestFormReset=function(e){ke.d.r(e)};Pe.unstable_batchedUpdates=function(e,t){return e(t)};Pe.useFormState=function(e,t,n){return eo.H.useFormState(e,t,n)};Pe.useFormStatus=function(){return eo.H.useHostTransitionStatus()};Pe.version="19.1.1";function Kv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kv)}catch(e){console.error(e)}}Kv(),Qv.exports=Pe;var i1=Qv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ae=JS,Xv=F,r1=i1;function U(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function $v(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ko(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Zv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lp(e){if(Ko(e)!==e)throw Error(U(188))}function s1(e){var t=e.alternate;if(!t){if(t=Ko(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Lp(r),e;if(s===i)return Lp(r),t;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function Wv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Wv(e),t!==null)return t;e=e.sibling}return null}var Mt=Object.assign,a1=Symbol.for("react.element"),zl=Symbol.for("react.transitional.element"),Ya=Symbol.for("react.portal"),_s=Symbol.for("react.fragment"),Jv=Symbol.for("react.strict_mode"),bf=Symbol.for("react.profiler"),o1=Symbol.for("react.provider"),tE=Symbol.for("react.consumer"),Xn=Symbol.for("react.context"),$d=Symbol.for("react.forward_ref"),Sf=Symbol.for("react.suspense"),wf=Symbol.for("react.suspense_list"),Zd=Symbol.for("react.memo"),Ci=Symbol.for("react.lazy"),Rf=Symbol.for("react.activity"),l1=Symbol.for("react.memo_cache_sentinel"),jp=Symbol.iterator;function ja(e){return e===null||typeof e!="object"?null:(e=jp&&e[jp]||e["@@iterator"],typeof e=="function"?e:null)}var u1=Symbol.for("react.client.reference");function If(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===u1?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _s:return"Fragment";case bf:return"Profiler";case Jv:return"StrictMode";case Sf:return"Suspense";case wf:return"SuspenseList";case Rf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Ya:return"Portal";case Xn:return(e.displayName||"Context")+".Provider";case tE:return(e._context.displayName||"Context")+".Consumer";case $d:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zd:return t=e.displayName||null,t!==null?t:If(e.type)||"Memo";case Ci:t=e._payload,e=e._init;try{return If(e(t))}catch{}}return null}var Ka=Array.isArray,W=Xv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_t=r1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Or={pending:!1,data:null,method:null,action:null},Cf=[],vs=-1;function Ln(e){return{current:e}}function fe(e){0>vs||(e.current=Cf[vs],Cf[vs]=null,vs--)}function Lt(e,t){vs++,Cf[vs]=e.current,e.current=t}var Nn=Ln(null),So=Ln(null),Hi=Ln(null),xu=Ln(null);function Du(e,t){switch(Lt(Hi,t),Lt(So,e),Lt(Nn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Fy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Fy(t),e=y0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}fe(Nn),Lt(Nn,e)}function Qs(){fe(Nn),fe(So),fe(Hi)}function Nf(e){e.memoizedState!==null&&Lt(xu,e);var t=Nn.current,n=y0(t,e.type);t!==n&&(Lt(So,e),Lt(Nn,n))}function Ou(e){So.current===e&&(fe(Nn),fe(So)),xu.current===e&&(fe(xu),Mo._currentValue=Or)}var xf=Object.prototype.hasOwnProperty,Wd=ae.unstable_scheduleCallback,xh=ae.unstable_cancelCallback,c1=ae.unstable_shouldYield,h1=ae.unstable_requestPaint,xn=ae.unstable_now,f1=ae.unstable_getCurrentPriorityLevel,eE=ae.unstable_ImmediatePriority,nE=ae.unstable_UserBlockingPriority,Vu=ae.unstable_NormalPriority,d1=ae.unstable_LowPriority,iE=ae.unstable_IdlePriority,m1=ae.log,g1=ae.unstable_setDisableYieldValue,Xo=null,Ze=null;function Li(e){if(typeof m1=="function"&&g1(e),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(Xo,e)}catch{}}var We=Math.clz32?Math.clz32:_1,p1=Math.log,y1=Math.LN2;function _1(e){return e>>>=0,e===0?32:31-(p1(e)/y1|0)|0}var Bl=256,ql=4194304;function Ir(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Nc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=Ir(i):(a&=l,a!==0?r=Ir(a):n||(n=l&~e,n!==0&&(r=Ir(n))))):(l=i&~s,l!==0?r=Ir(l):a!==0?r=Ir(a):n||(n=i&~e,n!==0&&(r=Ir(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function $o(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function v1(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rE(){var e=Bl;return Bl<<=1,!(Bl&4194048)&&(Bl=256),e}function sE(){var e=ql;return ql<<=1,!(ql&62914560)&&(ql=4194304),e}function Dh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Zo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function E1(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-We(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&aE(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function aE(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-We(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function oE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-We(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Jd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function tm(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function lE(){var e=_t.p;return e!==0?e:(e=window.event,e===void 0?32:I0(e.type))}function T1(e,t){var n=_t.p;try{return _t.p=e,t()}finally{_t.p=n}}var mr=Math.random().toString(36).slice(2),Ne="__reactFiber$"+mr,Be="__reactProps$"+mr,ha="__reactContainer$"+mr,Df="__reactEvents$"+mr,A1="__reactListeners$"+mr,b1="__reactHandles$"+mr,zp="__reactResources$"+mr,Wo="__reactMarker$"+mr;function em(e){delete e[Ne],delete e[Be],delete e[Df],delete e[A1],delete e[b1]}function Es(e){var t=e[Ne];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ha]||n[Ne]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Yy(e);e!==null;){if(n=e[Ne])return n;e=Yy(e)}return t}e=n,n=e.parentNode}return null}function fa(e){if(e=e[Ne]||e[ha]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Xa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(U(33))}function Os(e){var t=e[zp];return t||(t=e[zp]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ue(e){e[Wo]=!0}var uE=new Set,cE={};function Xr(e,t){Ys(e,t),Ys(e+"Capture",t)}function Ys(e,t){for(cE[e]=t,e=0;e<t.length;e++)uE.add(t[e])}var S1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bp={},qp={};function w1(e){return xf.call(qp,e)?!0:xf.call(Bp,e)?!1:S1.test(e)?qp[e]=!0:(Bp[e]=!0,!1)}function au(e,t,n){if(w1(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Hl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Gn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Oh,Hp;function hs(e){if(Oh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Oh=t&&t[1]||"",Hp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oh+e+Hp}var Vh=!1;function Mh(e,t){if(!e||Vh)return"";Vh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var m=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){m=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){m=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{Vh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?hs(n):""}function R1(e){switch(e.tag){case 26:case 27:case 5:return hs(e.type);case 16:return hs("Lazy");case 13:return hs("Suspense");case 19:return hs("SuspenseList");case 0:case 15:return Mh(e.type,!1);case 11:return Mh(e.type.render,!1);case 1:return Mh(e.type,!0);case 31:return hs("Activity");default:return""}}function Fp(e){try{var t="";do t+=R1(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function an(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function I1(e){var t=hE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mu(e){e._valueTracker||(e._valueTracker=I1(e))}function fE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=hE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function ku(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var C1=/[\n"\\]/g;function un(e){return e.replace(C1,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Of(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+an(t)):e.value!==""+an(t)&&(e.value=""+an(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Vf(e,a,an(t)):n!=null?Vf(e,a,an(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+an(l):e.removeAttribute("name")}function dE(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+an(n):"",t=t!=null?""+an(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Vf(e,t,n){t==="number"&&ku(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Vs(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+an(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function mE(e,t,n){if(t!=null&&(t=""+an(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+an(n):""}function gE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(U(92));if(Ka(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=an(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Ks(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var N1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||N1.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function pE(e,t,n){if(t!=null&&typeof t!="object")throw Error(U(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Gp(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&Gp(e,s,t[s])}function nm(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var x1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),D1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ou(e){return D1.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Mf=null;function im(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ts=null,Ms=null;function Qp(e){var t=fa(e);if(t&&(e=t.stateNode)){var n=e[Be]||null;t:switch(e=t.stateNode,t.type){case"input":if(Of(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+un(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Be]||null;if(!r)throw Error(U(90));Of(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&fE(i)}break t;case"textarea":mE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Vs(e,!!n.multiple,t,!1)}}}var kh=!1;function yE(e,t,n){if(kh)return e(t,n);kh=!0;try{var i=e(t);return i}finally{if(kh=!1,(Ts!==null||Ms!==null)&&(jc(),Ts&&(t=Ts,e=Ms,Ms=Ts=null,Qp(t),e)))for(t=0;t<e.length;t++)Qp(e[t])}}function wo(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Be]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kf=!1;if(si)try{var za={};Object.defineProperty(za,"passive",{get:function(){kf=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{kf=!1}var ji=null,rm=null,lu=null;function _E(){if(lu)return lu;var e,t=rm,n=t.length,i,r="value"in ji?ji.value:ji.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return lu=r.slice(e,1<i?1-i:void 0)}function uu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fl(){return!0}function Yp(){return!1}function qe(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fl:Yp,this.isPropagationStopped=Yp,this}return Mt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),t}var $r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xc=qe($r),Jo=Mt({},$r,{view:0,detail:0}),O1=qe(Jo),Ph,Uh,Ba,Dc=Mt({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ba&&(Ba&&e.type==="mousemove"?(Ph=e.screenX-Ba.screenX,Uh=e.screenY-Ba.screenY):Uh=Ph=0,Ba=e),Ph)},movementY:function(e){return"movementY"in e?e.movementY:Uh}}),Kp=qe(Dc),V1=Mt({},Dc,{dataTransfer:0}),M1=qe(V1),k1=Mt({},Jo,{relatedTarget:0}),Lh=qe(k1),P1=Mt({},$r,{animationName:0,elapsedTime:0,pseudoElement:0}),U1=qe(P1),L1=Mt({},$r,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),j1=qe(L1),z1=Mt({},$r,{data:0}),Xp=qe(z1),B1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=H1[e])?!!t[e]:!1}function sm(){return F1}var G1=Mt({},Jo,{key:function(e){if(e.key){var t=B1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=uu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?q1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sm,charCode:function(e){return e.type==="keypress"?uu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?uu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Q1=qe(G1),Y1=Mt({},Dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$p=qe(Y1),K1=Mt({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sm}),X1=qe(K1),$1=Mt({},$r,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z1=qe($1),W1=Mt({},Dc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),J1=qe(W1),tw=Mt({},$r,{newState:0,oldState:0}),ew=qe(tw),nw=[9,13,27,32],am=si&&"CompositionEvent"in window,no=null;si&&"documentMode"in document&&(no=document.documentMode);var iw=si&&"TextEvent"in window&&!no,vE=si&&(!am||no&&8<no&&11>=no),Zp=" ",Wp=!1;function EE(e,t){switch(e){case"keyup":return nw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var As=!1;function rw(e,t){switch(e){case"compositionend":return TE(t);case"keypress":return t.which!==32?null:(Wp=!0,Zp);case"textInput":return e=t.data,e===Zp&&Wp?null:e;default:return null}}function sw(e,t){if(As)return e==="compositionend"||!am&&EE(e,t)?(e=_E(),lu=rm=ji=null,As=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vE&&t.locale!=="ko"?null:t.data;default:return null}}var aw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!aw[e.type]:t==="textarea"}function AE(e,t,n,i){Ts?Ms?Ms.push(i):Ms=[i]:Ts=i,t=Ju(t,"onChange"),0<t.length&&(n=new xc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var io=null,Ro=null;function ow(e){m0(e,0)}function Oc(e){var t=Xa(e);if(fE(t))return e}function ty(e,t){if(e==="change")return t}var bE=!1;if(si){var jh;if(si){var zh="oninput"in document;if(!zh){var ey=document.createElement("div");ey.setAttribute("oninput","return;"),zh=typeof ey.oninput=="function"}jh=zh}else jh=!1;bE=jh&&(!document.documentMode||9<document.documentMode)}function ny(){io&&(io.detachEvent("onpropertychange",SE),Ro=io=null)}function SE(e){if(e.propertyName==="value"&&Oc(Ro)){var t=[];AE(t,Ro,e,im(e)),yE(ow,t)}}function lw(e,t,n){e==="focusin"?(ny(),io=t,Ro=n,io.attachEvent("onpropertychange",SE)):e==="focusout"&&ny()}function uw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Oc(Ro)}function cw(e,t){if(e==="click")return Oc(t)}function hw(e,t){if(e==="input"||e==="change")return Oc(t)}function fw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rn=typeof Object.is=="function"?Object.is:fw;function Io(e,t){if(rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!xf.call(t,r)||!rn(e[r],t[r]))return!1}return!0}function iy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ry(e,t){var n=iy(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=iy(n)}}function wE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function RE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ku(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ku(e.document)}return t}function om(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var dw=si&&"documentMode"in document&&11>=document.documentMode,bs=null,Pf=null,ro=null,Uf=!1;function sy(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uf||bs==null||bs!==ku(i)||(i=bs,"selectionStart"in i&&om(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ro&&Io(ro,i)||(ro=i,i=Ju(Pf,"onSelect"),0<i.length&&(t=new xc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=bs)))}function Rr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ss={animationend:Rr("Animation","AnimationEnd"),animationiteration:Rr("Animation","AnimationIteration"),animationstart:Rr("Animation","AnimationStart"),transitionrun:Rr("Transition","TransitionRun"),transitionstart:Rr("Transition","TransitionStart"),transitioncancel:Rr("Transition","TransitionCancel"),transitionend:Rr("Transition","TransitionEnd")},Bh={},IE={};si&&(IE=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function Zr(e){if(Bh[e])return Bh[e];if(!Ss[e])return e;var t=Ss[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in IE)return Bh[e]=t[n];return e}var CE=Zr("animationend"),NE=Zr("animationiteration"),xE=Zr("animationstart"),mw=Zr("transitionrun"),gw=Zr("transitionstart"),pw=Zr("transitioncancel"),DE=Zr("transitionend"),OE=new Map,Lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lf.push("scrollEnd");function bn(e,t){OE.set(e,t),Xr(t,[e])}var ay=new WeakMap;function cn(e,t){if(typeof e=="object"&&e!==null){var n=ay.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Fp(t)},ay.set(e,t),t)}return{value:e,source:t,stack:Fp(t)}}var sn=[],ws=0,lm=0;function Vc(){for(var e=ws,t=lm=ws=0;t<e;){var n=sn[t];sn[t++]=null;var i=sn[t];sn[t++]=null;var r=sn[t];sn[t++]=null;var s=sn[t];if(sn[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&VE(n,r,s)}}function Mc(e,t,n,i){sn[ws++]=e,sn[ws++]=t,sn[ws++]=n,sn[ws++]=i,lm|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function um(e,t,n,i){return Mc(e,t,n,i),Pu(e)}function da(e,t){return Mc(e,null,null,t),Pu(e)}function VE(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-We(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function Pu(e){if(50<go)throw go=0,sd=null,Error(U(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Rs={};function yw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ke(e,t,n,i){return new yw(e,t,n,i)}function cm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ni(e,t){var n=e.alternate;return n===null?(n=Ke(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ME(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function cu(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")cm(e)&&(a=1);else if(typeof e=="string")a=vR(e,n,Nn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Rf:return e=Ke(31,n,t,r),e.elementType=Rf,e.lanes=s,e;case _s:return Vr(n.children,r,s,t);case Jv:a=8,r|=24;break;case bf:return e=Ke(12,n,t,r|2),e.elementType=bf,e.lanes=s,e;case Sf:return e=Ke(13,n,t,r),e.elementType=Sf,e.lanes=s,e;case wf:return e=Ke(19,n,t,r),e.elementType=wf,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case o1:case Xn:a=10;break t;case tE:a=9;break t;case $d:a=11;break t;case Zd:a=14;break t;case Ci:a=16,i=null;break t}a=29,n=Error(U(130,e===null?"null":typeof e,"")),i=null}return t=Ke(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Vr(e,t,n,i){return e=Ke(7,e,i,t),e.lanes=n,e}function qh(e,t,n){return e=Ke(6,e,null,t),e.lanes=n,e}function Hh(e,t,n){return t=Ke(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Is=[],Cs=0,Uu=null,Lu=0,on=[],ln=0,Mr=null,$n=1,Zn="";function Cr(e,t){Is[Cs++]=Lu,Is[Cs++]=Uu,Uu=e,Lu=t}function kE(e,t,n){on[ln++]=$n,on[ln++]=Zn,on[ln++]=Mr,Mr=e;var i=$n;e=Zn;var r=32-We(i)-1;i&=~(1<<r),n+=1;var s=32-We(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,$n=1<<32-We(t)+r|n<<r|i,Zn=s+e}else $n=1<<s|n<<r|i,Zn=e}function hm(e){e.return!==null&&(Cr(e,1),kE(e,1,0))}function fm(e){for(;e===Uu;)Uu=Is[--Cs],Is[Cs]=null,Lu=Is[--Cs],Is[Cs]=null;for(;e===Mr;)Mr=on[--ln],on[ln]=null,Zn=on[--ln],on[ln]=null,$n=on[--ln],on[ln]=null}var Ve=null,Ft=null,yt=!1,kr=null,In=!1,jf=Error(U(519));function jr(e){var t=Error(U(418,""));throw Co(cn(t,e)),jf}function oy(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ne]=e,t[Be]=i,n){case"dialog":st("cancel",t),st("close",t);break;case"iframe":case"object":case"embed":st("load",t);break;case"video":case"audio":for(n=0;n<Do.length;n++)st(Do[n],t);break;case"source":st("error",t);break;case"img":case"image":case"link":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"input":st("invalid",t),dE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Mu(t);break;case"select":st("invalid",t);break;case"textarea":st("invalid",t),gE(t,i.value,i.defaultValue,i.children),Mu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||p0(t.textContent,n)?(i.popover!=null&&(st("beforetoggle",t),st("toggle",t)),i.onScroll!=null&&st("scroll",t),i.onScrollEnd!=null&&st("scrollend",t),i.onClick!=null&&(t.onclick=qc),t=!0):t=!1,t||jr(e)}function ly(e){for(Ve=e.return;Ve;)switch(Ve.tag){case 5:case 13:In=!1;return;case 27:case 3:In=!0;return;default:Ve=Ve.return}}function qa(e){if(e!==Ve)return!1;if(!yt)return ly(e),yt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||hd(e.type,e.memoizedProps)),n=!n),n&&Ft&&jr(e),ly(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Ft=Tn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Ft=null}}else t===27?(t=Ft,gr(e.type)?(e=md,md=null,Ft=e):Ft=t):Ft=Ve?Tn(e.stateNode.nextSibling):null;return!0}function tl(){Ft=Ve=null,yt=!1}function uy(){var e=kr;return e!==null&&(je===null?je=e:je.push.apply(je,e),kr=null),e}function Co(e){kr===null?kr=[e]:kr.push(e)}var zf=Ln(null),Wr=null,Wn=null;function xi(e,t,n){Lt(zf,t._currentValue),t._currentValue=n}function ii(e){e._currentValue=zf.current,fe(zf)}function Bf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function qf(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Bf(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(U(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Bf(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function el(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(U(387));if(a=a.memoizedProps,a!==null){var l=r.type;rn(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===xu.current){if(a=r.alternate,a===null)throw Error(U(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Mo):e=[Mo])}r=r.return}e!==null&&qf(t,e,n,i),t.flags|=262144}function ju(e){for(e=e.firstContext;e!==null;){if(!rn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function zr(e){Wr=e,Wn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function xe(e){return PE(Wr,e)}function Gl(e,t){return Wr===null&&zr(e),PE(e,t)}function PE(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Wn===null){if(e===null)throw Error(U(308));Wn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Wn=Wn.next=t;return n}var _w=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},vw=ae.unstable_scheduleCallback,Ew=ae.unstable_NormalPriority,ie={$$typeof:Xn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dm(){return{controller:new _w,data:new Map,refCount:0}}function nl(e){e.refCount--,e.refCount===0&&vw(Ew,function(){e.controller.abort()})}var so=null,Hf=0,Xs=0,ks=null;function Tw(e,t){if(so===null){var n=so=[];Hf=0,Xs=Pm(),ks={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Hf++,t.then(cy,cy),t}function cy(){if(--Hf===0&&so!==null){ks!==null&&(ks.status="fulfilled");var e=so;so=null,Xs=0,ks=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Aw(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var hy=W.S;W.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Tw(e,t),hy!==null&&hy(e,t)};var Pr=Ln(null);function mm(){var e=Pr.current;return e!==null?e:Nt.pooledCache}function hu(e,t){t===null?Lt(Pr,Pr.current):Lt(Pr,t.pool)}function UE(){var e=mm();return e===null?null:{parent:ie._currentValue,pool:e}}var il=Error(U(460)),LE=Error(U(474)),kc=Error(U(542)),Ff={then:function(){}};function fy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ql(){}function jE(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ql,Ql),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,my(e),e;default:if(typeof t.status=="string")t.then(Ql,Ql);else{if(e=Nt,e!==null&&100<e.shellSuspendCounter)throw Error(U(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,my(e),e}throw ao=t,il}}var ao=null;function dy(){if(ao===null)throw Error(U(459));var e=ao;return ao=null,e}function my(e){if(e===il||e===kc)throw Error(U(483))}var Ni=!1;function gm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Fi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Gi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,At&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Pu(e),VE(e,null,n),t}return Mc(e,i,t,n),Pu(e)}function oo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,oE(e,n)}}function Fh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Qf=!1;function lo(){if(Qf){var e=ks;if(e!==null)throw e}}function uo(e,t,n,i){Qf=!1;var r=e.updateQueue;Ni=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(mt&m)===m:(i&m)===m){m!==0&&m===Xs&&(Qf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var x=e,O=l;m=t;var M=n;switch(O.tag){case 1:if(x=O.payload,typeof x=="function"){g=x.call(M,g,m);break t}g=x;break t;case 3:x.flags=x.flags&-65537|128;case 0:if(x=O.payload,m=typeof x=="function"?x.call(M,g,m):x,m==null)break t;g=Mt({},g,m);break t;case 2:Ni=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=r.callbacks,_===null?r.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=g):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);d===null&&(u=g),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),ar|=a,e.lanes=a,e.memoizedState=g}}function zE(e,t){if(typeof e!="function")throw Error(U(191,e));e.call(t)}function BE(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)zE(n[e],t)}var $s=Ln(null),zu=Ln(0);function gy(e,t){e=li,Lt(zu,e),Lt($s,t),li=e|t.baseLanes}function Yf(){Lt(zu,li),Lt($s,$s.current)}function pm(){li=zu.current,fe($s),fe(zu)}var rr=0,rt=null,St=null,Wt=null,Bu=!1,Ps=!1,Br=!1,qu=0,No=0,Us=null,bw=0;function Kt(){throw Error(U(321))}function ym(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rn(e[n],t[n]))return!1;return!0}function _m(e,t,n,i,r,s){return rr=s,rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,W.H=e===null||e.memoizedState===null?_T:vT,Br=!1,s=n(i,r),Br=!1,Ps&&(s=HE(t,n,i,r)),qE(e),s}function qE(e){W.H=Hu;var t=St!==null&&St.next!==null;if(rr=0,Wt=St=rt=null,Bu=!1,No=0,Us=null,t)throw Error(U(300));e===null||he||(e=e.dependencies,e!==null&&ju(e)&&(he=!0))}function HE(e,t,n,i){rt=e;var r=0;do{if(Ps&&(Us=null),No=0,Ps=!1,25<=r)throw Error(U(301));if(r+=1,Wt=St=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}W.H=xw,s=t(n,i)}while(Ps);return s}function Sw(){var e=W.H,t=e.useState()[0];return t=typeof t.then=="function"?rl(t):t,e=e.useState()[0],(St!==null?St.memoizedState:null)!==e&&(rt.flags|=1024),t}function vm(){var e=qu!==0;return qu=0,e}function Em(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Tm(e){if(Bu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Bu=!1}rr=0,Wt=St=rt=null,Ps=!1,No=qu=0,Us=null}function Ue(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?rt.memoizedState=Wt=e:Wt=Wt.next=e,Wt}function ee(){if(St===null){var e=rt.alternate;e=e!==null?e.memoizedState:null}else e=St.next;var t=Wt===null?rt.memoizedState:Wt.next;if(t!==null)Wt=t,St=e;else{if(e===null)throw rt.alternate===null?Error(U(467)):Error(U(310));St=e,e={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Wt===null?rt.memoizedState=Wt=e:Wt=Wt.next=e}return Wt}function Am(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rl(e){var t=No;return No+=1,Us===null&&(Us=[]),e=jE(Us,e,t),t=rt,(Wt===null?t.memoizedState:Wt.next)===null&&(t=t.alternate,W.H=t===null||t.memoizedState===null?_T:vT),e}function Pc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return rl(e);if(e.$$typeof===Xn)return xe(e)}throw Error(U(438,String(e)))}function bm(e){var t=null,n=rt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=rt.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Am(),rt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=l1;return t.index++,n}function ai(e,t){return typeof t=="function"?t(e):t}function fu(e){var t=ee();return Sm(t,St,e)}function Sm(e,t,n){var i=e.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(mt&g)===g:(rr&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Xs&&(d=!0);else if((rr&m)===m){h=h.next,m===Xs&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=s):u=u.next=g,rt.lanes|=m,ar|=m;g=h.action,Br&&n(s,g),s=h.hasEagerState?h.eagerState:n(s,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,rt.lanes|=g,ar|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!rn(s,e.memoizedState)&&(he=!0,d&&(n=ks,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Gh(e){var t=ee(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);rn(s,t.memoizedState)||(he=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function FE(e,t,n){var i=rt,r=ee(),s=yt;if(s){if(n===void 0)throw Error(U(407));n=n()}else n=t();var a=!rn((St||r).memoizedState,n);a&&(r.memoizedState=n,he=!0),r=r.queue;var l=YE.bind(null,i,r,e);if(sl(2048,8,l,[e]),r.getSnapshot!==t||a||Wt!==null&&Wt.memoizedState.tag&1){if(i.flags|=2048,Zs(9,Uc(),QE.bind(null,i,r,n,t),null),Nt===null)throw Error(U(349));s||rr&124||GE(i,t,n)}return n}function GE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=rt.updateQueue,t===null?(t=Am(),rt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function QE(e,t,n,i){t.value=n,t.getSnapshot=i,KE(t)&&XE(e)}function YE(e,t,n){return n(function(){KE(t)&&XE(e)})}function KE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rn(e,n)}catch{return!0}}function XE(e){var t=da(e,2);t!==null&&tn(t,e,2)}function Kf(e){var t=Ue();if(typeof e=="function"){var n=e;if(e=n(),Br){Li(!0);try{n()}finally{Li(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:e},t}function $E(e,t,n,i){return e.baseState=n,Sm(e,St,typeof i=="function"?i:ai)}function ww(e,t,n,i,r){if(Lc(e))throw Error(U(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};W.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,ZE(t,s)):(s.next=n.next,t.pending=n.next=s)}}function ZE(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=W.T,a={};W.T=a;try{var l=n(r,i),u=W.S;u!==null&&u(a,l),py(e,t,l)}catch(h){Xf(e,t,h)}finally{W.T=s}}else try{s=n(r,i),py(e,t,s)}catch(h){Xf(e,t,h)}}function py(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){yy(e,t,i)},function(i){return Xf(e,t,i)}):yy(e,t,n)}function yy(e,t,n){t.status="fulfilled",t.value=n,WE(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,ZE(e,n)))}function Xf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,WE(t),t=t.next;while(t!==i)}e.action=null}function WE(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function JE(e,t){return t}function _y(e,t){if(yt){var n=Nt.formState;if(n!==null){t:{var i=rt;if(yt){if(Ft){e:{for(var r=Ft,s=In;r.nodeType!==8;){if(!s){r=null;break e}if(r=Tn(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Ft=Tn(r.nextSibling),i=r.data==="F!";break t}}jr(i)}i=!1}i&&(t=n[0])}}return n=Ue(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:JE,lastRenderedState:t},n.queue=i,n=gT.bind(null,rt,i),i.dispatch=n,i=Kf(!1),s=Cm.bind(null,rt,!1,i.queue),i=Ue(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=ww.bind(null,rt,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function vy(e){var t=ee();return tT(t,St,e)}function tT(e,t,n){if(t=Sm(e,t,JE)[0],e=fu(ai)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=rl(t)}catch(a){throw a===il?kc:a}else i=t;t=ee();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(rt.flags|=2048,Zs(9,Uc(),Rw.bind(null,r,n),null)),[i,s,e]}function Rw(e,t){e.action=t}function Ey(e){var t=ee(),n=St;if(n!==null)return tT(t,n,e);ee(),t=t.memoizedState,n=ee();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Zs(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=rt.updateQueue,t===null&&(t=Am(),rt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Uc(){return{destroy:void 0,resource:void 0}}function eT(){return ee().memoizedState}function du(e,t,n,i){var r=Ue();i=i===void 0?null:i,rt.flags|=e,r.memoizedState=Zs(1|t,Uc(),n,i)}function sl(e,t,n,i){var r=ee();i=i===void 0?null:i;var s=r.memoizedState.inst;St!==null&&i!==null&&ym(i,St.memoizedState.deps)?r.memoizedState=Zs(t,s,n,i):(rt.flags|=e,r.memoizedState=Zs(1|t,s,n,i))}function Ty(e,t){du(8390656,8,e,t)}function nT(e,t){sl(2048,8,e,t)}function iT(e,t){return sl(4,2,e,t)}function rT(e,t){return sl(4,4,e,t)}function sT(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function aT(e,t,n){n=n!=null?n.concat([e]):null,sl(4,4,sT.bind(null,t,e),n)}function wm(){}function oT(e,t){var n=ee();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&ym(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function lT(e,t){var n=ee();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&ym(t,i[1]))return i[0];if(i=e(),Br){Li(!0);try{e()}finally{Li(!1)}}return n.memoizedState=[i,t],i}function Rm(e,t,n){return n===void 0||rr&1073741824?e.memoizedState=t:(e.memoizedState=n,e=WT(),rt.lanes|=e,ar|=e,n)}function uT(e,t,n,i){return rn(n,t)?n:$s.current!==null?(e=Rm(e,n,i),rn(e,t)||(he=!0),e):rr&42?(e=WT(),rt.lanes|=e,ar|=e,t):(he=!0,e.memoizedState=n)}function cT(e,t,n,i,r){var s=_t.p;_t.p=s!==0&&8>s?s:8;var a=W.T,l={};W.T=l,Cm(e,!1,t,n);try{var u=r(),h=W.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=Aw(u,i);co(e,t,d,Je(e))}else co(e,t,i,Je(e))}catch(g){co(e,t,{then:function(){},status:"rejected",reason:g},Je())}finally{_t.p=s,W.T=a}}function Iw(){}function $f(e,t,n,i){if(e.tag!==5)throw Error(U(476));var r=hT(e).queue;cT(e,r,t,Or,n===null?Iw:function(){return fT(e),n(i)})}function hT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Or,baseState:Or,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:Or},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function fT(e){var t=hT(e).next.queue;co(e,t,{},Je())}function Im(){return xe(Mo)}function dT(){return ee().memoizedState}function mT(){return ee().memoizedState}function Cw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Je();e=Fi(n);var i=Gi(t,e,n);i!==null&&(tn(i,t,n),oo(i,t,n)),t={cache:dm()},e.payload=t;return}t=t.return}}function Nw(e,t,n){var i=Je();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Lc(e)?pT(t,n):(n=um(e,t,n,i),n!==null&&(tn(n,e,i),yT(n,t,i)))}function gT(e,t,n){var i=Je();co(e,t,n,i)}function co(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lc(e))pT(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,rn(l,a))return Mc(e,t,r,0),Nt===null&&Vc(),!1}catch{}finally{}if(n=um(e,t,r,i),n!==null)return tn(n,e,i),yT(n,t,i),!0}return!1}function Cm(e,t,n,i){if(i={lane:2,revertLane:Pm(),action:i,hasEagerState:!1,eagerState:null,next:null},Lc(e)){if(t)throw Error(U(479))}else t=um(e,n,i,2),t!==null&&tn(t,e,2)}function Lc(e){var t=e.alternate;return e===rt||t!==null&&t===rt}function pT(e,t){Ps=Bu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function yT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,oE(e,n)}}var Hu={readContext:xe,use:Pc,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useLayoutEffect:Kt,useInsertionEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useSyncExternalStore:Kt,useId:Kt,useHostTransitionStatus:Kt,useFormState:Kt,useActionState:Kt,useOptimistic:Kt,useMemoCache:Kt,useCacheRefresh:Kt},_T={readContext:xe,use:Pc,useCallback:function(e,t){return Ue().memoizedState=[e,t===void 0?null:t],e},useContext:xe,useEffect:Ty,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,du(4194308,4,sT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return du(4194308,4,e,t)},useInsertionEffect:function(e,t){du(4,2,e,t)},useMemo:function(e,t){var n=Ue();t=t===void 0?null:t;var i=e();if(Br){Li(!0);try{e()}finally{Li(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Ue();if(n!==void 0){var r=n(t);if(Br){Li(!0);try{n(t)}finally{Li(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Nw.bind(null,rt,e),[i.memoizedState,e]},useRef:function(e){var t=Ue();return e={current:e},t.memoizedState=e},useState:function(e){e=Kf(e);var t=e.queue,n=gT.bind(null,rt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:wm,useDeferredValue:function(e,t){var n=Ue();return Rm(n,e,t)},useTransition:function(){var e=Kf(!1);return e=cT.bind(null,rt,e.queue,!0,!1),Ue().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=rt,r=Ue();if(yt){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),Nt===null)throw Error(U(349));mt&124||GE(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Ty(YE.bind(null,i,s,e),[e]),i.flags|=2048,Zs(9,Uc(),QE.bind(null,i,s,n,t),null),n},useId:function(){var e=Ue(),t=Nt.identifierPrefix;if(yt){var n=Zn,i=$n;n=(i&~(1<<32-We(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=qu++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=bw++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Im,useFormState:_y,useActionState:_y,useOptimistic:function(e){var t=Ue();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Cm.bind(null,rt,!0,n),n.dispatch=t,[e,t]},useMemoCache:bm,useCacheRefresh:function(){return Ue().memoizedState=Cw.bind(null,rt)}},vT={readContext:xe,use:Pc,useCallback:oT,useContext:xe,useEffect:nT,useImperativeHandle:aT,useInsertionEffect:iT,useLayoutEffect:rT,useMemo:lT,useReducer:fu,useRef:eT,useState:function(){return fu(ai)},useDebugValue:wm,useDeferredValue:function(e,t){var n=ee();return uT(n,St.memoizedState,e,t)},useTransition:function(){var e=fu(ai)[0],t=ee().memoizedState;return[typeof e=="boolean"?e:rl(e),t]},useSyncExternalStore:FE,useId:dT,useHostTransitionStatus:Im,useFormState:vy,useActionState:vy,useOptimistic:function(e,t){var n=ee();return $E(n,St,e,t)},useMemoCache:bm,useCacheRefresh:mT},xw={readContext:xe,use:Pc,useCallback:oT,useContext:xe,useEffect:nT,useImperativeHandle:aT,useInsertionEffect:iT,useLayoutEffect:rT,useMemo:lT,useReducer:Gh,useRef:eT,useState:function(){return Gh(ai)},useDebugValue:wm,useDeferredValue:function(e,t){var n=ee();return St===null?Rm(n,e,t):uT(n,St.memoizedState,e,t)},useTransition:function(){var e=Gh(ai)[0],t=ee().memoizedState;return[typeof e=="boolean"?e:rl(e),t]},useSyncExternalStore:FE,useId:dT,useHostTransitionStatus:Im,useFormState:Ey,useActionState:Ey,useOptimistic:function(e,t){var n=ee();return St!==null?$E(n,St,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:bm,useCacheRefresh:mT},Ls=null,xo=0;function Yl(e){var t=xo;return xo+=1,Ls===null&&(Ls=[]),jE(Ls,e,t)}function Ha(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Kl(e,t){throw t.$$typeof===a1?Error(U(525)):(e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ay(e){var t=e._init;return t(e._payload)}function ET(e){function t(A,v){if(e){var R=A.deletions;R===null?(A.deletions=[v],A.flags|=16):R.push(v)}}function n(A,v){if(!e)return null;for(;v!==null;)t(A,v),v=v.sibling;return null}function i(A){for(var v=new Map;A!==null;)A.key!==null?v.set(A.key,A):v.set(A.index,A),A=A.sibling;return v}function r(A,v){return A=ni(A,v),A.index=0,A.sibling=null,A}function s(A,v,R){return A.index=R,e?(R=A.alternate,R!==null?(R=R.index,R<v?(A.flags|=67108866,v):R):(A.flags|=67108866,v)):(A.flags|=1048576,v)}function a(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function l(A,v,R,D){return v===null||v.tag!==6?(v=qh(R,A.mode,D),v.return=A,v):(v=r(v,R),v.return=A,v)}function u(A,v,R,D){var L=R.type;return L===_s?d(A,v,R.props.children,D,R.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ci&&Ay(L)===v.type)?(v=r(v,R.props),Ha(v,R),v.return=A,v):(v=cu(R.type,R.key,R.props,null,A.mode,D),Ha(v,R),v.return=A,v)}function h(A,v,R,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==R.containerInfo||v.stateNode.implementation!==R.implementation?(v=Hh(R,A.mode,D),v.return=A,v):(v=r(v,R.children||[]),v.return=A,v)}function d(A,v,R,D,L){return v===null||v.tag!==7?(v=Vr(R,A.mode,D,L),v.return=A,v):(v=r(v,R),v.return=A,v)}function g(A,v,R){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=qh(""+v,A.mode,R),v.return=A,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case zl:return R=cu(v.type,v.key,v.props,null,A.mode,R),Ha(R,v),R.return=A,R;case Ya:return v=Hh(v,A.mode,R),v.return=A,v;case Ci:var D=v._init;return v=D(v._payload),g(A,v,R)}if(Ka(v)||ja(v))return v=Vr(v,A.mode,R,null),v.return=A,v;if(typeof v.then=="function")return g(A,Yl(v),R);if(v.$$typeof===Xn)return g(A,Gl(A,v),R);Kl(A,v)}return null}function m(A,v,R,D){var L=v!==null?v.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return L!==null?null:l(A,v,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case zl:return R.key===L?u(A,v,R,D):null;case Ya:return R.key===L?h(A,v,R,D):null;case Ci:return L=R._init,R=L(R._payload),m(A,v,R,D)}if(Ka(R)||ja(R))return L!==null?null:d(A,v,R,D,null);if(typeof R.then=="function")return m(A,v,Yl(R),D);if(R.$$typeof===Xn)return m(A,v,Gl(A,R),D);Kl(A,R)}return null}function _(A,v,R,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return A=A.get(R)||null,l(v,A,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case zl:return A=A.get(D.key===null?R:D.key)||null,u(v,A,D,L);case Ya:return A=A.get(D.key===null?R:D.key)||null,h(v,A,D,L);case Ci:var q=D._init;return D=q(D._payload),_(A,v,R,D,L)}if(Ka(D)||ja(D))return A=A.get(R)||null,d(v,A,D,L,null);if(typeof D.then=="function")return _(A,v,R,Yl(D),L);if(D.$$typeof===Xn)return _(A,v,R,Gl(v,D),L);Kl(v,D)}return null}function x(A,v,R,D){for(var L=null,q=null,T=v,y=v=0,b=null;T!==null&&y<R.length;y++){T.index>y?(b=T,T=null):b=T.sibling;var w=m(A,T,R[y],D);if(w===null){T===null&&(T=b);break}e&&T&&w.alternate===null&&t(A,T),v=s(w,v,y),q===null?L=w:q.sibling=w,q=w,T=b}if(y===R.length)return n(A,T),yt&&Cr(A,y),L;if(T===null){for(;y<R.length;y++)T=g(A,R[y],D),T!==null&&(v=s(T,v,y),q===null?L=T:q.sibling=T,q=T);return yt&&Cr(A,y),L}for(T=i(T);y<R.length;y++)b=_(T,A,y,R[y],D),b!==null&&(e&&b.alternate!==null&&T.delete(b.key===null?y:b.key),v=s(b,v,y),q===null?L=b:q.sibling=b,q=b);return e&&T.forEach(function(I){return t(A,I)}),yt&&Cr(A,y),L}function O(A,v,R,D){if(R==null)throw Error(U(151));for(var L=null,q=null,T=v,y=v=0,b=null,w=R.next();T!==null&&!w.done;y++,w=R.next()){T.index>y?(b=T,T=null):b=T.sibling;var I=m(A,T,w.value,D);if(I===null){T===null&&(T=b);break}e&&T&&I.alternate===null&&t(A,T),v=s(I,v,y),q===null?L=I:q.sibling=I,q=I,T=b}if(w.done)return n(A,T),yt&&Cr(A,y),L;if(T===null){for(;!w.done;y++,w=R.next())w=g(A,w.value,D),w!==null&&(v=s(w,v,y),q===null?L=w:q.sibling=w,q=w);return yt&&Cr(A,y),L}for(T=i(T);!w.done;y++,w=R.next())w=_(T,A,y,w.value,D),w!==null&&(e&&w.alternate!==null&&T.delete(w.key===null?y:w.key),v=s(w,v,y),q===null?L=w:q.sibling=w,q=w);return e&&T.forEach(function(C){return t(A,C)}),yt&&Cr(A,y),L}function M(A,v,R,D){if(typeof R=="object"&&R!==null&&R.type===_s&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case zl:t:{for(var L=R.key;v!==null;){if(v.key===L){if(L=R.type,L===_s){if(v.tag===7){n(A,v.sibling),D=r(v,R.props.children),D.return=A,A=D;break t}}else if(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ci&&Ay(L)===v.type){n(A,v.sibling),D=r(v,R.props),Ha(D,R),D.return=A,A=D;break t}n(A,v);break}else t(A,v);v=v.sibling}R.type===_s?(D=Vr(R.props.children,A.mode,D,R.key),D.return=A,A=D):(D=cu(R.type,R.key,R.props,null,A.mode,D),Ha(D,R),D.return=A,A=D)}return a(A);case Ya:t:{for(L=R.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===R.containerInfo&&v.stateNode.implementation===R.implementation){n(A,v.sibling),D=r(v,R.children||[]),D.return=A,A=D;break t}else{n(A,v);break}else t(A,v);v=v.sibling}D=Hh(R,A.mode,D),D.return=A,A=D}return a(A);case Ci:return L=R._init,R=L(R._payload),M(A,v,R,D)}if(Ka(R))return x(A,v,R,D);if(ja(R)){if(L=ja(R),typeof L!="function")throw Error(U(150));return R=L.call(R),O(A,v,R,D)}if(typeof R.then=="function")return M(A,v,Yl(R),D);if(R.$$typeof===Xn)return M(A,v,Gl(A,R),D);Kl(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,v!==null&&v.tag===6?(n(A,v.sibling),D=r(v,R),D.return=A,A=D):(n(A,v),D=qh(R,A.mode,D),D.return=A,A=D),a(A)):n(A,v)}return function(A,v,R,D){try{xo=0;var L=M(A,v,R,D);return Ls=null,L}catch(T){if(T===il||T===kc)throw T;var q=Ke(29,T,null,A.mode);return q.lanes=D,q.return=A,q}finally{}}}var Ws=ET(!0),TT=ET(!1),fn=Ln(null),Dn=null;function Di(e){var t=e.alternate;Lt(re,re.current&1),Lt(fn,e),Dn===null&&(t===null||$s.current!==null||t.memoizedState!==null)&&(Dn=e)}function AT(e){if(e.tag===22){if(Lt(re,re.current),Lt(fn,e),Dn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Dn=e)}}else Oi()}function Oi(){Lt(re,re.current),Lt(fn,fn.current)}function Jn(e){fe(fn),Dn===e&&(Dn=null),fe(re)}var re=Ln(0);function Fu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||dd(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Qh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Mt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Zf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Je(),r=Fi(i);r.payload=t,n!=null&&(r.callback=n),t=Gi(e,r,i),t!==null&&(tn(t,e,i),oo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Je(),r=Fi(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Gi(e,r,i),t!==null&&(tn(t,e,i),oo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Je(),i=Fi(n);i.tag=2,t!=null&&(i.callback=t),t=Gi(e,i,n),t!==null&&(tn(t,e,n),oo(t,e,n))}};function by(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!Io(n,i)||!Io(r,s):!0}function Sy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Zf.enqueueReplaceState(t,t.state,null)}function qr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Mt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var Gu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function bT(e){Gu(e)}function ST(e){console.error(e)}function wT(e){Gu(e)}function Qu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function wy(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Wf(e,t,n){return n=Fi(n),n.tag=3,n.payload={element:null},n.callback=function(){Qu(e,t)},n}function RT(e){return e=Fi(e),e.tag=3,e}function IT(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){wy(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){wy(t,n,i),typeof r!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Dw(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&el(t,n,r,!0),n=fn.current,n!==null){switch(n.tag){case 13:return Dn===null?ad():n.alternate===null&&Gt===0&&(Gt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Ff?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),rf(e,i,r)),!1;case 22:return n.flags|=65536,i===Ff?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),rf(e,i,r)),!1}throw Error(U(435,n.tag))}return rf(e,i,r),ad(),!1}if(yt)return t=fn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==jf&&(e=Error(U(422),{cause:i}),Co(cn(e,n)))):(i!==jf&&(t=Error(U(423),{cause:i}),Co(cn(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=cn(i,n),r=Wf(e.stateNode,i,r),Fh(e,r),Gt!==4&&(Gt=2)),!1;var s=Error(U(520),{cause:i});if(s=cn(s,n),mo===null?mo=[s]:mo.push(s),Gt!==4&&(Gt=2),t===null)return!0;i=cn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Wf(n.stateNode,i,e),Fh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Qi===null||!Qi.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=RT(r),IT(r,e,n,i),Fh(n,r),!1}n=n.return}while(n!==null);return!1}var CT=Error(U(461)),he=!1;function pe(e,t,n,i){t.child=e===null?TT(t,null,n,i):Ws(t,e.child,n,i)}function Ry(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return zr(t),i=_m(e,t,n,a,s,r),l=vm(),e!==null&&!he?(Em(e,t,r),oi(e,t,r)):(yt&&l&&hm(t),t.flags|=1,pe(e,t,i,r),t.child)}function Iy(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!cm(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,NT(e,t,s,i,r)):(e=cu(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Nm(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Io,n(a,i)&&e.ref===t.ref)return oi(e,t,r)}return t.flags|=1,e=ni(s,i),e.ref=t.ref,e.return=t,t.child=e}function NT(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(Io(s,i)&&e.ref===t.ref)if(he=!1,t.pendingProps=i=s,Nm(e,r))e.flags&131072&&(he=!0);else return t.lanes=e.lanes,oi(e,t,r)}return Jf(e,t,n,i,r)}function xT(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return Cy(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&hu(t,s!==null?s.cachePool:null),s!==null?gy(t,s):Yf(),AT(t);else return t.lanes=t.childLanes=536870912,Cy(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(hu(t,s.cachePool),gy(t,s),Oi(),t.memoizedState=null):(e!==null&&hu(t,null),Yf(),Oi());return pe(e,t,r,n),t.child}function Cy(e,t,n,i){var r=mm();return r=r===null?null:{parent:ie._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&hu(t,null),Yf(),AT(t),e!==null&&el(e,t,i,!0),null}function mu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Jf(e,t,n,i,r){return zr(t),n=_m(e,t,n,i,void 0,r),i=vm(),e!==null&&!he?(Em(e,t,r),oi(e,t,r)):(yt&&i&&hm(t),t.flags|=1,pe(e,t,n,r),t.child)}function Ny(e,t,n,i,r,s){return zr(t),t.updateQueue=null,n=HE(t,i,n,r),qE(e),i=vm(),e!==null&&!he?(Em(e,t,s),oi(e,t,s)):(yt&&i&&hm(t),t.flags|=1,pe(e,t,n,s),t.child)}function xy(e,t,n,i,r){if(zr(t),t.stateNode===null){var s=Rs,a=n.contextType;typeof a=="object"&&a!==null&&(s=xe(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Zf,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},gm(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?xe(a):Rs,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Qh(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Zf.enqueueReplaceState(s,s.state,null),uo(t,i,s,r),lo(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=qr(n,l);s.props=u;var h=s.context,d=n.contextType;a=Rs,typeof d=="object"&&d!==null&&(a=xe(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&Sy(t,s,i,a),Ni=!1;var m=t.memoizedState;s.state=m,uo(t,i,s,r),lo(),h=t.memoizedState,l||m!==h||Ni?(typeof g=="function"&&(Qh(t,n,g,i),h=t.memoizedState),(u=Ni||by(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Gf(e,t),a=t.memoizedProps,d=qr(n,a),s.props=d,g=t.pendingProps,m=s.context,h=n.contextType,u=Rs,typeof h=="object"&&h!==null&&(u=xe(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==g||m!==u)&&Sy(t,s,i,u),Ni=!1,m=t.memoizedState,s.state=m,uo(t,i,s,r),lo();var _=t.memoizedState;a!==g||m!==_||Ni||e!==null&&e.dependencies!==null&&ju(e.dependencies)?(typeof l=="function"&&(Qh(t,n,l,i),_=t.memoizedState),(d=Ni||by(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&ju(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),s.props=i,s.state=_,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,mu(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=Ws(t,e.child,null,r),t.child=Ws(t,null,n,r)):pe(e,t,n,r),t.memoizedState=s.state,e=t.child):e=oi(e,t,r),e}function Dy(e,t,n,i){return tl(),t.flags|=256,pe(e,t,n,i),t.child}var Yh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kh(e){return{baseLanes:e,cachePool:UE()}}function Xh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=hn),e}function DT(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(re.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(yt){if(r?Di(t):Oi(),yt){var l=Ft,u;if(u=l){t:{for(u=l,l=In;u.nodeType!==8;){if(!l){l=null;break t}if(u=Tn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Mr!==null?{id:$n,overflow:Zn}:null,retryLane:536870912,hydrationErrors:null},u=Ke(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Ve=t,Ft=null,u=!0):u=!1}u||jr(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return dd(l)?t.lanes=32:t.lanes=536870912,null;Jn(t)}return l=i.children,i=i.fallback,r?(Oi(),r=t.mode,l=Yu({mode:"hidden",children:l},r),i=Vr(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=Kh(n),r.childLanes=Xh(e,a,n),t.memoizedState=Yh,i):(Di(t),td(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(Di(t),t.flags&=-257,t=$h(e,t,n)):t.memoizedState!==null?(Oi(),t.child=e.child,t.flags|=128,t=null):(Oi(),r=i.fallback,l=t.mode,i=Yu({mode:"visible",children:i.children},l),r=Vr(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Ws(t,e.child,null,n),i=t.child,i.memoizedState=Kh(n),i.childLanes=Xh(e,a,n),t.memoizedState=Yh,t=r);else if(Di(t),dd(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(U(419)),i.stack="",i.digest=a,Co({value:i,source:null,stack:null}),t=$h(e,t,n)}else if(he||el(e,t,n,!1),a=(n&e.childLanes)!==0,he||a){if(a=Nt,a!==null&&(i=n&-n,i=i&42?1:Jd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,da(e,i),tn(a,e,i),CT;l.data==="$?"||ad(),t=$h(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Ft=Tn(l.nextSibling),Ve=t,yt=!0,kr=null,In=!1,e!==null&&(on[ln++]=$n,on[ln++]=Zn,on[ln++]=Mr,$n=e.id,Zn=e.overflow,Mr=t),t=td(t,i.children),t.flags|=4096);return t}return r?(Oi(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=ni(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=ni(h,r):(r=Vr(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=Kh(n):(u=l.cachePool,u!==null?(h=ie._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=UE(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=Xh(e,a,n),t.memoizedState=Yh,i):(Di(t),n=e.child,e=n.sibling,n=ni(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function td(e,t){return t=Yu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Yu(e,t){return e=Ke(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function $h(e,t,n){return Ws(t,e.child,null,n),e=td(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Oy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Bf(e.return,t,n)}function Zh(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function OT(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(pe(e,t,i.children,n),i=re.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Oy(e,n,t);else if(e.tag===19)Oy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Lt(re,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Fu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Zh(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Fu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Zh(t,!0,n,null,s);break;case"together":Zh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function oi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ar|=t.lanes,!(n&t.childLanes))if(e!==null){if(el(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=ni(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ni(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Nm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&ju(e)))}function Ow(e,t,n){switch(t.tag){case 3:Du(t,t.stateNode.containerInfo),xi(t,ie,e.memoizedState.cache),tl();break;case 27:case 5:Nf(t);break;case 4:Du(t,t.stateNode.containerInfo);break;case 10:xi(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Di(t),t.flags|=128,null):n&t.child.childLanes?DT(e,t,n):(Di(t),e=oi(e,t,n),e!==null?e.sibling:null);Di(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(el(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return OT(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Lt(re,re.current),i)break;return null;case 22:case 23:return t.lanes=0,xT(e,t,n);case 24:xi(t,ie,e.memoizedState.cache)}return oi(e,t,n)}function VT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)he=!0;else{if(!Nm(e,n)&&!(t.flags&128))return he=!1,Ow(e,t,n);he=!!(e.flags&131072)}else he=!1,yt&&t.flags&1048576&&kE(t,Lu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")cm(i)?(e=qr(i,e),t.tag=1,t=xy(null,t,i,e,n)):(t.tag=0,t=Jf(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===$d){t.tag=11,t=Ry(null,t,i,e,n);break t}else if(r===Zd){t.tag=14,t=Iy(null,t,i,e,n);break t}}throw t=If(i)||i,Error(U(306,t,""))}}return t;case 0:return Jf(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=qr(i,t.pendingProps),xy(e,t,i,r,n);case 3:t:{if(Du(t,t.stateNode.containerInfo),e===null)throw Error(U(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,Gf(e,t),uo(t,i,null,n);var a=t.memoizedState;if(i=a.cache,xi(t,ie,i),i!==s.cache&&qf(t,[ie],n,!0),lo(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Dy(e,t,i,n);break t}else if(i!==r){r=cn(Error(U(424)),t),Co(r),t=Dy(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ft=Tn(e.firstChild),Ve=t,yt=!0,kr=null,In=!0,n=TT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(tl(),i===r){t=oi(e,t,n);break t}pe(e,t,i,n)}t=t.child}return t;case 26:return mu(e,t),e===null?(n=Xy(t.type,null,t.pendingProps,null))?t.memoizedState=n:yt||(n=t.type,e=t.pendingProps,i=tc(Hi.current).createElement(n),i[Ne]=t,i[Be]=e,Te(i,n,e),ue(i),t.stateNode=i):t.memoizedState=Xy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Nf(t),e===null&&yt&&(i=t.stateNode=v0(t.type,t.pendingProps,Hi.current),Ve=t,In=!0,r=Ft,gr(t.type)?(md=r,Ft=Tn(i.firstChild)):Ft=r),pe(e,t,t.pendingProps.children,n),mu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&yt&&((r=i=Ft)&&(i=aR(i,t.type,t.pendingProps,In),i!==null?(t.stateNode=i,Ve=t,Ft=Tn(i.firstChild),In=!1,r=!0):r=!1),r||jr(t)),Nf(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,hd(r,s)?i=null:a!==null&&hd(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=_m(e,t,Sw,null,null,n),Mo._currentValue=r),mu(e,t),pe(e,t,i,n),t.child;case 6:return e===null&&yt&&((e=n=Ft)&&(n=oR(n,t.pendingProps,In),n!==null?(t.stateNode=n,Ve=t,Ft=null,e=!0):e=!1),e||jr(t)),null;case 13:return DT(e,t,n);case 4:return Du(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ws(t,null,i,n):pe(e,t,i,n),t.child;case 11:return Ry(e,t,t.type,t.pendingProps,n);case 7:return pe(e,t,t.pendingProps,n),t.child;case 8:return pe(e,t,t.pendingProps.children,n),t.child;case 12:return pe(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,xi(t,t.type,i.value),pe(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,zr(t),r=xe(r),i=i(r),t.flags|=1,pe(e,t,i,n),t.child;case 14:return Iy(e,t,t.type,t.pendingProps,n);case 15:return NT(e,t,t.type,t.pendingProps,n);case 19:return OT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Yu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=ni(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return xT(e,t,n);case 24:return zr(t),i=xe(ie),e===null?(r=mm(),r===null&&(r=Nt,s=dm(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},gm(t),xi(t,ie,r)):(e.lanes&n&&(Gf(e,t),uo(t,null,null,n),lo()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),xi(t,ie,i)):(i=s.cache,xi(t,ie,i),i!==r.cache&&qf(t,[ie],n,!0))),pe(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(U(156,t.tag))}function Qn(e){e.flags|=4}function Vy(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!A0(t)){if(t=fn.current,t!==null&&((mt&4194048)===mt?Dn!==null:(mt&62914560)!==mt&&!(mt&536870912)||t!==Dn))throw ao=Ff,LE;e.flags|=8192}}function Xl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?sE():536870912,e.lanes|=t,Js|=t)}function Fa(e,t){if(!yt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function jt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Vw(e,t,n){var i=t.pendingProps;switch(fm(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(t),null;case 1:return jt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ii(ie),Qs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(qa(t)?Qn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,uy())),jt(t),null;case 26:return n=t.memoizedState,e===null?(Qn(t),n!==null?(jt(t),Vy(t,n)):(jt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Qn(t),jt(t),Vy(t,n)):(jt(t),t.flags&=-16777217):(e.memoizedProps!==i&&Qn(t),jt(t),t.flags&=-16777217),null;case 27:Ou(t),n=Hi.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return jt(t),null}e=Nn.current,qa(t)?oy(t):(e=v0(r,i,n),t.stateNode=e,Qn(t))}return jt(t),null;case 5:if(Ou(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return jt(t),null}if(e=Nn.current,qa(t))oy(t);else{switch(r=tc(Hi.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Ne]=t,e[Be]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(Te(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Qn(t)}}return jt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(e=Hi.current,qa(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Ve,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Ne]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||p0(e.nodeValue,n)),e||jr(t)}else e=tc(e).createTextNode(i),e[Ne]=t,t.stateNode=e}return jt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=qa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(U(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(U(317));r[Ne]=t}else tl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;jt(t),r=!1}else r=uy(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Jn(t),t):(Jn(t),null)}if(Jn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Xl(t,t.updateQueue),jt(t),null;case 4:return Qs(),e===null&&Um(t.stateNode.containerInfo),jt(t),null;case 10:return ii(t.type),jt(t),null;case 19:if(fe(re),r=t.memoizedState,r===null)return jt(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)Fa(r,!1);else{if(Gt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Fu(e),s!==null){for(t.flags|=128,Fa(r,!1),e=s.updateQueue,t.updateQueue=e,Xl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)ME(n,e),n=n.sibling;return Lt(re,re.current&1|2),t.child}e=e.sibling}r.tail!==null&&xn()>Xu&&(t.flags|=128,i=!0,Fa(r,!1),t.lanes=4194304)}else{if(!i)if(e=Fu(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Xl(t,e),Fa(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!yt)return jt(t),null}else 2*xn()-r.renderingStartTime>Xu&&n!==536870912&&(t.flags|=128,i=!0,Fa(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=xn(),t.sibling=null,e=re.current,Lt(re,i?e&1|2:e&1),t):(jt(t),null);case 22:case 23:return Jn(t),pm(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(jt(t),t.subtreeFlags&6&&(t.flags|=8192)):jt(t),n=t.updateQueue,n!==null&&Xl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&fe(Pr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ii(ie),jt(t),null;case 25:return null;case 30:return null}throw Error(U(156,t.tag))}function Mw(e,t){switch(fm(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ii(ie),Qs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ou(t),null;case 13:if(Jn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));tl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fe(re),null;case 4:return Qs(),null;case 10:return ii(t.type),null;case 22:case 23:return Jn(t),pm(),e!==null&&fe(Pr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ii(ie),null;case 25:return null;default:return null}}function MT(e,t){switch(fm(t),t.tag){case 3:ii(ie),Qs();break;case 26:case 27:case 5:Ou(t);break;case 4:Qs();break;case 13:Jn(t);break;case 19:fe(re);break;case 10:ii(t.type);break;case 22:case 23:Jn(t),pm(),e!==null&&fe(Pr);break;case 24:ii(ie)}}function al(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){It(t,t.return,l)}}function sr(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){It(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){It(t,t.return,d)}}function kT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{BE(t,n)}catch(i){It(e,e.return,i)}}}function PT(e,t,n){n.props=qr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){It(e,t,i)}}function ho(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){It(e,t,r)}}function Cn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){It(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){It(e,t,r)}else n.current=null}function UT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){It(e,e.return,r)}}function Wh(e,t,n){try{var i=e.stateNode;eR(i,e.type,n,t),i[Be]=t}catch(r){It(e,e.return,r)}}function LT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&gr(e.type)||e.tag===4}function Jh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||LT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&gr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ed(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=qc));else if(i!==4&&(i===27&&gr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(ed(e,t,n),e=e.sibling;e!==null;)ed(e,t,n),e=e.sibling}function Ku(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&gr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Ku(e,t,n),e=e.sibling;e!==null;)Ku(e,t,n),e=e.sibling}function jT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Te(t,i,n),t[Ne]=e,t[Be]=n}catch(s){It(e,e.return,s)}}var Kn=!1,Xt=!1,tf=!1,My=typeof WeakSet=="function"?WeakSet:Set,le=null;function kw(e,t){if(e=e.containerInfo,ud=rc,e=RE(e),om(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var _;g!==n||r!==0&&g.nodeType!==3||(l=a+r),g!==s||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(cd={focusedElem:e,selectionRange:n},rc=!1,le=t;le!==null;)if(t=le,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,le=e;else for(;le!==null;){switch(t=le,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var x=qr(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(x,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(O){It(n,n.return,O)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)fd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(U(163))}if(e=t.sibling,e!==null){e.return=t.return,le=e;break}le=t.return}}function zT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:wi(e,n),i&4&&al(5,n);break;case 1:if(wi(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){It(n,n.return,a)}else{var r=qr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){It(n,n.return,a)}}i&64&&kT(n),i&512&&ho(n,n.return);break;case 3:if(wi(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{BE(e,t)}catch(a){It(n,n.return,a)}}break;case 27:t===null&&i&4&&jT(n);case 26:case 5:wi(e,n),t===null&&i&4&&UT(n),i&512&&ho(n,n.return);break;case 12:wi(e,n);break;case 13:wi(e,n),i&4&&HT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Fw.bind(null,n),lR(e,n))));break;case 22:if(i=n.memoizedState!==null||Kn,!i){t=t!==null&&t.memoizedState!==null||Xt,r=Kn;var s=Xt;Kn=i,(Xt=t)&&!s?Ii(e,n,(n.subtreeFlags&8772)!==0):wi(e,n),Kn=r,Xt=s}break;case 30:break;default:wi(e,n)}}function BT(e){var t=e.alternate;t!==null&&(e.alternate=null,BT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&em(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pt=null,Le=!1;function Yn(e,t,n){for(n=n.child;n!==null;)qT(e,t,n),n=n.sibling}function qT(e,t,n){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(Xo,n)}catch{}switch(n.tag){case 26:Xt||Cn(n,t),Yn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Xt||Cn(n,t);var i=Pt,r=Le;gr(n.type)&&(Pt=n.stateNode,Le=!1),Yn(e,t,n),po(n.stateNode),Pt=i,Le=r;break;case 5:Xt||Cn(n,t);case 6:if(i=Pt,r=Le,Pt=null,Yn(e,t,n),Pt=i,Le=r,Pt!==null)if(Le)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(n.stateNode)}catch(s){It(n,t,s)}else try{Pt.removeChild(n.stateNode)}catch(s){It(n,t,s)}break;case 18:Pt!==null&&(Le?(e=Pt,Qy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Uo(e)):Qy(Pt,n.stateNode));break;case 4:i=Pt,r=Le,Pt=n.stateNode.containerInfo,Le=!0,Yn(e,t,n),Pt=i,Le=r;break;case 0:case 11:case 14:case 15:Xt||sr(2,n,t),Xt||sr(4,n,t),Yn(e,t,n);break;case 1:Xt||(Cn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&PT(n,t,i)),Yn(e,t,n);break;case 21:Yn(e,t,n);break;case 22:Xt=(i=Xt)||n.memoizedState!==null,Yn(e,t,n),Xt=i;break;default:Yn(e,t,n)}}function HT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Uo(e)}catch(n){It(t,t.return,n)}}function Pw(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new My),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new My),t;default:throw Error(U(435,e.tag))}}function ef(e,t){var n=Pw(e);t.forEach(function(i){var r=Gw.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Ge(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(gr(l.type)){Pt=l.stateNode,Le=!1;break t}break;case 5:Pt=l.stateNode,Le=!1;break t;case 3:case 4:Pt=l.stateNode.containerInfo,Le=!0;break t}l=l.return}if(Pt===null)throw Error(U(160));qT(s,a,r),Pt=null,Le=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)FT(t,e),t=t.sibling}var _n=null;function FT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ge(t,e),Qe(e),i&4&&(sr(3,e,e.return),al(3,e),sr(5,e,e.return));break;case 1:Ge(t,e),Qe(e),i&512&&(Xt||n===null||Cn(n,n.return)),i&64&&Kn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=_n;if(Ge(t,e),Qe(e),i&512&&(Xt||n===null||Cn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Wo]||s[Ne]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Te(s,i,n),s[Ne]=e,ue(s),i=s;break t;case"link":var a=Zy("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),Te(s,i,n),r.head.appendChild(s);break;case"meta":if(a=Zy("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),Te(s,i,n),r.head.appendChild(s);break;default:throw Error(U(468,i))}s[Ne]=e,ue(s),i=s}e.stateNode=i}else Wy(r,e.type,e.stateNode);else e.stateNode=$y(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?Wy(r,e.type,e.stateNode):$y(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Wh(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ge(t,e),Qe(e),i&512&&(Xt||n===null||Cn(n,n.return)),n!==null&&i&4&&Wh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ge(t,e),Qe(e),i&512&&(Xt||n===null||Cn(n,n.return)),e.flags&32){r=e.stateNode;try{Ks(r,"")}catch(_){It(e,e.return,_)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,Wh(e,r,n!==null?n.memoizedProps:r)),i&1024&&(tf=!0);break;case 6:if(Ge(t,e),Qe(e),i&4){if(e.stateNode===null)throw Error(U(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){It(e,e.return,_)}}break;case 3:if(yu=null,r=_n,_n=ec(t.containerInfo),Ge(t,e),_n=r,Qe(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Uo(t.containerInfo)}catch(_){It(e,e.return,_)}tf&&(tf=!1,GT(e));break;case 4:i=_n,_n=ec(e.stateNode.containerInfo),Ge(t,e),Qe(e),_n=i;break;case 12:Ge(t,e),Qe(e);break;case 13:Ge(t,e),Qe(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Mm=xn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,ef(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Kn,d=Xt;if(Kn=h||r,Xt=d||u,Ge(t,e),Xt=d,Kn=h,Qe(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||Kn||Xt||Nr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){It(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(_){It(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,ef(e,n))));break;case 19:Ge(t,e),Qe(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,ef(e,i)));break;case 30:break;case 21:break;default:Ge(t,e),Qe(e)}}function Qe(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(LT(i)){n=i;break}i=i.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var r=n.stateNode,s=Jh(e);Ku(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Ks(a,""),n.flags&=-33);var l=Jh(e);Ku(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Jh(e);ed(e,h,u);break;default:throw Error(U(161))}}catch(d){It(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function GT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;GT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function wi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)zT(e,t.alternate,t),t=t.sibling}function Nr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sr(4,t,t.return),Nr(t);break;case 1:Cn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&PT(t,t.return,n),Nr(t);break;case 27:po(t.stateNode);case 26:case 5:Cn(t,t.return),Nr(t);break;case 22:t.memoizedState===null&&Nr(t);break;case 30:Nr(t);break;default:Nr(t)}e=e.sibling}}function Ii(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Ii(r,s,n),al(4,s);break;case 1:if(Ii(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){It(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)zE(u[r],l)}catch(h){It(i,i.return,h)}}n&&a&64&&kT(s),ho(s,s.return);break;case 27:jT(s);case 26:case 5:Ii(r,s,n),n&&i===null&&a&4&&UT(s),ho(s,s.return);break;case 12:Ii(r,s,n);break;case 13:Ii(r,s,n),n&&a&4&&HT(r,s);break;case 22:s.memoizedState===null&&Ii(r,s,n),ho(s,s.return);break;case 30:break;default:Ii(r,s,n)}t=t.sibling}}function xm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&nl(n))}function Dm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&nl(e))}function wn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)QT(e,t,n,i),t=t.sibling}function QT(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:wn(e,t,n,i),r&2048&&al(9,t);break;case 1:wn(e,t,n,i);break;case 3:wn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&nl(e)));break;case 12:if(r&2048){wn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){It(t,t.return,u)}}else wn(e,t,n,i);break;case 13:wn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?wn(e,t,n,i):fo(e,t):s._visibility&2?wn(e,t,n,i):(s._visibility|=2,fs(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&xm(a,t);break;case 24:wn(e,t,n,i),r&2048&&Dm(t.alternate,t);break;default:wn(e,t,n,i)}}function fs(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:fs(s,a,l,u,r),al(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?fs(s,a,l,u,r):fo(s,a):(d._visibility|=2,fs(s,a,l,u,r)),r&&h&2048&&xm(a.alternate,a);break;case 24:fs(s,a,l,u,r),r&&h&2048&&Dm(a.alternate,a);break;default:fs(s,a,l,u,r)}t=t.sibling}}function fo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:fo(n,i),r&2048&&xm(i.alternate,i);break;case 24:fo(n,i),r&2048&&Dm(i.alternate,i);break;default:fo(n,i)}t=t.sibling}}var $a=8192;function ls(e){if(e.subtreeFlags&$a)for(e=e.child;e!==null;)YT(e),e=e.sibling}function YT(e){switch(e.tag){case 26:ls(e),e.flags&$a&&e.memoizedState!==null&&TR(_n,e.memoizedState,e.memoizedProps);break;case 5:ls(e);break;case 3:case 4:var t=_n;_n=ec(e.stateNode.containerInfo),ls(e),_n=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=$a,$a=16777216,ls(e),$a=t):ls(e));break;default:ls(e)}}function KT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ga(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];le=i,$T(i,e)}KT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)XT(e),e=e.sibling}function XT(e){switch(e.tag){case 0:case 11:case 15:Ga(e),e.flags&2048&&sr(9,e,e.return);break;case 3:Ga(e);break;case 12:Ga(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,gu(e)):Ga(e);break;default:Ga(e)}}function gu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];le=i,$T(i,e)}KT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:sr(8,t,t.return),gu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,gu(t));break;default:gu(t)}e=e.sibling}}function $T(e,t){for(;le!==null;){var n=le;switch(n.tag){case 0:case 11:case 15:sr(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:nl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,le=i;else t:for(n=e;le!==null;){i=le;var r=i.sibling,s=i.return;if(BT(i),i===n){le=null;break t}if(r!==null){r.return=s,le=r;break t}le=s}}}var Uw={getCacheForType:function(e){var t=xe(ie),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Lw=typeof WeakMap=="function"?WeakMap:Map,At=0,Nt=null,at=null,mt=0,Tt=0,Ye=null,zi=!1,ma=!1,Om=!1,li=0,Gt=0,ar=0,Ur=0,Vm=0,hn=0,Js=0,mo=null,je=null,nd=!1,Mm=0,Xu=1/0,$u=null,Qi=null,_e=0,Yi=null,ta=null,js=0,id=0,rd=null,ZT=null,go=0,sd=null;function Je(){if(At&2&&mt!==0)return mt&-mt;if(W.T!==null){var e=Xs;return e!==0?e:Pm()}return lE()}function WT(){hn===0&&(hn=!(mt&536870912)||yt?rE():536870912);var e=fn.current;return e!==null&&(e.flags|=32),hn}function tn(e,t,n){(e===Nt&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)&&(ea(e,0),Bi(e,mt,hn,!1)),Zo(e,n),(!(At&2)||e!==Nt)&&(e===Nt&&(!(At&2)&&(Ur|=n),Gt===4&&Bi(e,mt,hn,!1)),jn(e))}function JT(e,t,n){if(At&6)throw Error(U(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||$o(e,t),r=i?Bw(e,t):nf(e,t,!0),s=i;do{if(r===0){ma&&!i&&Bi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!jw(n)){r=nf(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=mo;var u=l.current.memoizedState.isDehydrated;if(u&&(ea(l,a).flags|=256),a=nf(l,a,!1),a!==2){if(Om&&!u){l.errorRecoveryDisabledLanes|=s,Ur|=s,r=4;break t}s=je,je=r,s!==null&&(je===null?je=s:je.push.apply(je,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){ea(e,0),Bi(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(U(345));case 4:if((t&4194048)!==t)break;case 6:Bi(i,t,hn,!zi);break t;case 2:je=null;break;case 3:case 5:break;default:throw Error(U(329))}if((t&62914560)===t&&(r=Mm+300-xn(),10<r)){if(Bi(i,t,hn,!zi),Nc(i,0,!0)!==0)break t;i.timeoutHandle=_0(ky.bind(null,i,n,je,$u,nd,t,hn,Ur,Js,zi,s,2,-0,0),r);break t}ky(i,n,je,$u,nd,t,hn,Ur,Js,zi,s,0,-0,0)}}break}while(!0);jn(e)}function ky(e,t,n,i,r,s,a,l,u,h,d,g,m,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(Vo={stylesheets:null,count:0,unsuspend:ER},YT(t),g=AR(),g!==null)){e.cancelPendingCommit=g(Uy.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,_)),Bi(e,s,a,!h);return}Uy(e,t,s,n,i,r,a,l,u)}function jw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!rn(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bi(e,t,n,i){t&=~Vm,t&=~Ur,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-We(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&aE(e,n,t)}function jc(){return At&6?!0:(ol(0),!1)}function km(){if(at!==null){if(Tt===0)var e=at.return;else e=at,Wn=Wr=null,Tm(e),Ls=null,xo=0,e=at;for(;e!==null;)MT(e.alternate,e),e=e.return;at=null}}function ea(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,iR(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),km(),Nt=e,at=n=ni(e.current,null),mt=t,Tt=0,Ye=null,zi=!1,ma=$o(e,t),Om=!1,Js=hn=Vm=Ur=ar=Gt=0,je=mo=null,nd=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-We(i),s=1<<r;t|=e[r],i&=~s}return li=t,Vc(),n}function t0(e,t){rt=null,W.H=Hu,t===il||t===kc?(t=dy(),Tt=3):t===LE?(t=dy(),Tt=4):Tt=t===CT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ye=t,at===null&&(Gt=1,Qu(e,cn(t,e.current)))}function e0(){var e=W.H;return W.H=Hu,e===null?Hu:e}function n0(){var e=W.A;return W.A=Uw,e}function ad(){Gt=4,zi||(mt&4194048)!==mt&&fn.current!==null||(ma=!0),!(ar&134217727)&&!(Ur&134217727)||Nt===null||Bi(Nt,mt,hn,!1)}function nf(e,t,n){var i=At;At|=2;var r=e0(),s=n0();(Nt!==e||mt!==t)&&($u=null,ea(e,t)),t=!1;var a=Gt;t:do try{if(Tt!==0&&at!==null){var l=at,u=Ye;switch(Tt){case 8:km(),a=6;break t;case 3:case 2:case 9:case 6:fn.current===null&&(t=!0);var h=Tt;if(Tt=0,Ye=null,Ns(e,l,u,h),n&&ma){a=0;break t}break;default:h=Tt,Tt=0,Ye=null,Ns(e,l,u,h)}}zw(),a=Gt;break}catch(d){t0(e,d)}while(!0);return t&&e.shellSuspendCounter++,Wn=Wr=null,At=i,W.H=r,W.A=s,at===null&&(Nt=null,mt=0,Vc()),a}function zw(){for(;at!==null;)i0(at)}function Bw(e,t){var n=At;At|=2;var i=e0(),r=n0();Nt!==e||mt!==t?($u=null,Xu=xn()+500,ea(e,t)):ma=$o(e,t);t:do try{if(Tt!==0&&at!==null){t=at;var s=Ye;e:switch(Tt){case 1:Tt=0,Ye=null,Ns(e,t,s,1);break;case 2:case 9:if(fy(s)){Tt=0,Ye=null,Py(t);break}t=function(){Tt!==2&&Tt!==9||Nt!==e||(Tt=7),jn(e)},s.then(t,t);break t;case 3:Tt=7;break t;case 4:Tt=5;break t;case 7:fy(s)?(Tt=0,Ye=null,Py(t)):(Tt=0,Ye=null,Ns(e,t,s,7));break;case 5:var a=null;switch(at.tag){case 26:a=at.memoizedState;case 5:case 27:var l=at;if(!a||A0(a)){Tt=0,Ye=null;var u=l.sibling;if(u!==null)at=u;else{var h=l.return;h!==null?(at=h,zc(h)):at=null}break e}}Tt=0,Ye=null,Ns(e,t,s,5);break;case 6:Tt=0,Ye=null,Ns(e,t,s,6);break;case 8:km(),Gt=6;break t;default:throw Error(U(462))}}qw();break}catch(d){t0(e,d)}while(!0);return Wn=Wr=null,W.H=i,W.A=r,At=n,at!==null?0:(Nt=null,mt=0,Vc(),Gt)}function qw(){for(;at!==null&&!c1();)i0(at)}function i0(e){var t=VT(e.alternate,e,li);e.memoizedProps=e.pendingProps,t===null?zc(e):at=t}function Py(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ny(n,t,t.pendingProps,t.type,void 0,mt);break;case 11:t=Ny(n,t,t.pendingProps,t.type.render,t.ref,mt);break;case 5:Tm(t);default:MT(n,t),t=at=ME(t,li),t=VT(n,t,li)}e.memoizedProps=e.pendingProps,t===null?zc(e):at=t}function Ns(e,t,n,i){Wn=Wr=null,Tm(t),Ls=null,xo=0;var r=t.return;try{if(Dw(e,r,t,n,mt)){Gt=1,Qu(e,cn(n,e.current)),at=null;return}}catch(s){if(r!==null)throw at=r,s;Gt=1,Qu(e,cn(n,e.current)),at=null;return}t.flags&32768?(yt||i===1?e=!0:ma||mt&536870912?e=!1:(zi=e=!0,(i===2||i===9||i===3||i===6)&&(i=fn.current,i!==null&&i.tag===13&&(i.flags|=16384))),r0(t,e)):zc(t)}function zc(e){var t=e;do{if(t.flags&32768){r0(t,zi);return}e=t.return;var n=Vw(t.alternate,t,li);if(n!==null){at=n;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);Gt===0&&(Gt=5)}function r0(e,t){do{var n=Mw(e.alternate,e);if(n!==null){n.flags&=32767,at=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){at=e;return}at=e=n}while(e!==null);Gt=6,at=null}function Uy(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do Bc();while(_e!==0);if(At&6)throw Error(U(327));if(t!==null){if(t===e.current)throw Error(U(177));if(s=t.lanes|t.childLanes,s|=lm,E1(e,n,s,a,l,u),e===Nt&&(at=Nt=null,mt=0),ta=t,Yi=e,js=n,id=s,rd=r,ZT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Qw(Vu,function(){return u0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=W.T,W.T=null,r=_t.p,_t.p=2,a=At,At|=4;try{kw(e,t,n)}finally{At=a,_t.p=r,W.T=i}}_e=1,s0(),a0(),o0()}}function s0(){if(_e===1){_e=0;var e=Yi,t=ta,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=W.T,W.T=null;var i=_t.p;_t.p=2;var r=At;At|=4;try{FT(t,e);var s=cd,a=RE(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&wE(l.ownerDocument.documentElement,l)){if(u!==null&&om(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var _=m.getSelection(),x=l.textContent.length,O=Math.min(u.start,x),M=u.end===void 0?O:Math.min(u.end,x);!_.extend&&O>M&&(a=M,M=O,O=a);var A=ry(l,O),v=ry(l,M);if(A&&v&&(_.rangeCount!==1||_.anchorNode!==A.node||_.anchorOffset!==A.offset||_.focusNode!==v.node||_.focusOffset!==v.offset)){var R=g.createRange();R.setStart(A.node,A.offset),_.removeAllRanges(),O>M?(_.addRange(R),_.extend(v.node,v.offset)):(R.setEnd(v.node,v.offset),_.addRange(R))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}rc=!!ud,cd=ud=null}finally{At=r,_t.p=i,W.T=n}}e.current=t,_e=2}}function a0(){if(_e===2){_e=0;var e=Yi,t=ta,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=W.T,W.T=null;var i=_t.p;_t.p=2;var r=At;At|=4;try{zT(e,t.alternate,t)}finally{At=r,_t.p=i,W.T=n}}_e=3}}function o0(){if(_e===4||_e===3){_e=0,h1();var e=Yi,t=ta,n=js,i=ZT;t.subtreeFlags&10256||t.flags&10256?_e=5:(_e=0,ta=Yi=null,l0(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Qi=null),tm(n),t=t.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(Xo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=W.T,r=_t.p,_t.p=2,W.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{W.T=t,_t.p=r}}js&3&&Bc(),jn(e),r=e.pendingLanes,n&4194090&&r&42?e===sd?go++:(go=0,sd=e):go=0,ol(0)}}function l0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,nl(t)))}function Bc(e){return s0(),a0(),o0(),u0()}function u0(){if(_e!==5)return!1;var e=Yi,t=id;id=0;var n=tm(js),i=W.T,r=_t.p;try{_t.p=32>n?32:n,W.T=null,n=rd,rd=null;var s=Yi,a=js;if(_e=0,ta=Yi=null,js=0,At&6)throw Error(U(331));var l=At;if(At|=4,XT(s.current),QT(s,s.current,a,n),At=l,ol(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(Xo,s)}catch{}return!0}finally{_t.p=r,W.T=i,l0(e,t)}}function Ly(e,t,n){t=cn(n,t),t=Wf(e.stateNode,t,2),e=Gi(e,t,2),e!==null&&(Zo(e,2),jn(e))}function It(e,t,n){if(e.tag===3)Ly(e,e,n);else for(;t!==null;){if(t.tag===3){Ly(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Qi===null||!Qi.has(i))){e=cn(n,e),n=RT(2),i=Gi(t,n,2),i!==null&&(IT(n,i,t,e),Zo(i,2),jn(i));break}}t=t.return}}function rf(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Lw;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Om=!0,r.add(n),e=Hw.bind(null,e,t,n),t.then(e,e))}function Hw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Nt===e&&(mt&n)===n&&(Gt===4||Gt===3&&(mt&62914560)===mt&&300>xn()-Mm?!(At&2)&&ea(e,0):Vm|=n,Js===mt&&(Js=0)),jn(e)}function c0(e,t){t===0&&(t=sE()),e=da(e,t),e!==null&&(Zo(e,t),jn(e))}function Fw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),c0(e,n)}function Gw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(t),c0(e,n)}function Qw(e,t){return Wd(e,t)}var Zu=null,ds=null,od=!1,Wu=!1,sf=!1,Lr=0;function jn(e){e!==ds&&e.next===null&&(ds===null?Zu=ds=e:ds=ds.next=e),Wu=!0,od||(od=!0,Kw())}function ol(e,t){if(!sf&&Wu){sf=!0;do for(var n=!1,i=Zu;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-We(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,jy(i,s))}else s=mt,s=Nc(i,i===Nt?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||$o(i,s)||(n=!0,jy(i,s));i=i.next}while(n);sf=!1}}function Yw(){h0()}function h0(){Wu=od=!1;var e=0;Lr!==0&&(nR()&&(e=Lr),Lr=0);for(var t=xn(),n=null,i=Zu;i!==null;){var r=i.next,s=f0(i,t);s===0?(i.next=null,n===null?Zu=r:n.next=r,r===null&&(ds=n)):(n=i,(e!==0||s&3)&&(Wu=!0)),i=r}ol(e)}function f0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-We(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=v1(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=Nt,n=mt,n=Nc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&xh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||$o(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&xh(i),tm(n)){case 2:case 8:n=nE;break;case 32:n=Vu;break;case 268435456:n=iE;break;default:n=Vu}return i=d0.bind(null,e),n=Wd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&xh(i),e.callbackPriority=2,e.callbackNode=null,2}function d0(e,t){if(_e!==0&&_e!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Bc()&&e.callbackNode!==n)return null;var i=mt;return i=Nc(e,e===Nt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(JT(e,i,t),f0(e,xn()),e.callbackNode!=null&&e.callbackNode===n?d0.bind(null,e):null)}function jy(e,t){if(Bc())return null;JT(e,t,!0)}function Kw(){rR(function(){At&6?Wd(eE,Yw):h0()})}function Pm(){return Lr===0&&(Lr=rE()),Lr}function zy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ou(""+e)}function By(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Xw(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=zy((r[Be]||null).action),a=i.submitter;a&&(t=(t=a[Be]||null)?zy(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new xc("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Lr!==0){var u=a?By(r,a):new FormData(r);$f(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?By(r,a):new FormData(r),$f(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var af=0;af<Lf.length;af++){var of=Lf[af],$w=of.toLowerCase(),Zw=of[0].toUpperCase()+of.slice(1);bn($w,"on"+Zw)}bn(CE,"onAnimationEnd");bn(NE,"onAnimationIteration");bn(xE,"onAnimationStart");bn("dblclick","onDoubleClick");bn("focusin","onFocus");bn("focusout","onBlur");bn(mw,"onTransitionRun");bn(gw,"onTransitionStart");bn(pw,"onTransitionCancel");bn(DE,"onTransitionEnd");Ys("onMouseEnter",["mouseout","mouseover"]);Ys("onMouseLeave",["mouseout","mouseover"]);Ys("onPointerEnter",["pointerout","pointerover"]);Ys("onPointerLeave",["pointerout","pointerover"]);Xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ww=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Do));function m0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Gu(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Gu(d)}r.currentTarget=null,s=u}}}}function st(e,t){var n=t[Df];n===void 0&&(n=t[Df]=new Set);var i=e+"__bubble";n.has(i)||(g0(t,e,2,!1),n.add(i))}function lf(e,t,n){var i=0;t&&(i|=4),g0(n,e,i,t)}var $l="_reactListening"+Math.random().toString(36).slice(2);function Um(e){if(!e[$l]){e[$l]=!0,uE.forEach(function(n){n!=="selectionchange"&&(Ww.has(n)||lf(n,!1,e),lf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$l]||(t[$l]=!0,lf("selectionchange",!1,t))}}function g0(e,t,n,i){switch(I0(t)){case 2:var r=wR;break;case 8:r=RR;break;default:r=Bm}n=r.bind(null,t,n,e),r=void 0,!kf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function uf(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=Es(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}yE(function(){var h=s,d=im(n),g=[];t:{var m=OE.get(e);if(m!==void 0){var _=xc,x=e;switch(e){case"keypress":if(uu(n)===0)break t;case"keydown":case"keyup":_=Q1;break;case"focusin":x="focus",_=Lh;break;case"focusout":x="blur",_=Lh;break;case"beforeblur":case"afterblur":_=Lh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=M1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=X1;break;case CE:case NE:case xE:_=U1;break;case DE:_=Z1;break;case"scroll":case"scrollend":_=O1;break;case"wheel":_=J1;break;case"copy":case"cut":case"paste":_=j1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=$p;break;case"toggle":case"beforetoggle":_=ew}var O=(t&4)!==0,M=!O&&(e==="scroll"||e==="scrollend"),A=O?m!==null?m+"Capture":null:m;O=[];for(var v=h,R;v!==null;){var D=v;if(R=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||R===null||A===null||(D=wo(v,A),D!=null&&O.push(Oo(v,D,R))),M)break;v=v.return}0<O.length&&(m=new _(m,x,null,n,d),g.push({event:m,listeners:O}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==Mf&&(x=n.relatedTarget||n.fromElement)&&(Es(x)||x[ha]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(x=n.relatedTarget||n.toElement,_=h,x=x?Es(x):null,x!==null&&(M=Ko(x),O=x.tag,x!==M||O!==5&&O!==27&&O!==6)&&(x=null)):(_=null,x=h),_!==x)){if(O=Kp,D="onMouseLeave",A="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(O=$p,D="onPointerLeave",A="onPointerEnter",v="pointer"),M=_==null?m:Xa(_),R=x==null?m:Xa(x),m=new O(D,v+"leave",_,n,d),m.target=M,m.relatedTarget=R,D=null,Es(d)===h&&(O=new O(A,v+"enter",x,n,d),O.target=R,O.relatedTarget=M,D=O),M=D,_&&x)e:{for(O=_,A=x,v=0,R=O;R;R=us(R))v++;for(R=0,D=A;D;D=us(D))R++;for(;0<v-R;)O=us(O),v--;for(;0<R-v;)A=us(A),R--;for(;v--;){if(O===A||A!==null&&O===A.alternate)break e;O=us(O),A=us(A)}O=null}else O=null;_!==null&&qy(g,m,_,O,!1),x!==null&&M!==null&&qy(g,M,x,O,!0)}}t:{if(m=h?Xa(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=ty;else if(Jp(m))if(bE)L=hw;else{L=uw;var q=lw}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&nm(h.elementType)&&(L=ty):L=cw;if(L&&(L=L(e,h))){AE(g,L,n,d);break t}q&&q(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Vf(m,"number",m.value)}switch(q=h?Xa(h):window,e){case"focusin":(Jp(q)||q.contentEditable==="true")&&(bs=q,Pf=h,ro=null);break;case"focusout":ro=Pf=bs=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,sy(g,n,d);break;case"selectionchange":if(dw)break;case"keydown":case"keyup":sy(g,n,d)}var T;if(am)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else As?EE(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(vE&&n.locale!=="ko"&&(As||y!=="onCompositionStart"?y==="onCompositionEnd"&&As&&(T=_E()):(ji=d,rm="value"in ji?ji.value:ji.textContent,As=!0)),q=Ju(h,y),0<q.length&&(y=new Xp(y,e,null,n,d),g.push({event:y,listeners:q}),T?y.data=T:(T=TE(n),T!==null&&(y.data=T)))),(T=iw?rw(e,n):sw(e,n))&&(y=Ju(h,"onBeforeInput"),0<y.length&&(q=new Xp("onBeforeInput","beforeinput",null,n,d),g.push({event:q,listeners:y}),q.data=T)),Xw(g,e,h,n,d)}m0(g,t)})}function Oo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ju(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=wo(e,n),r!=null&&i.unshift(Oo(e,r,s)),r=wo(e,t),r!=null&&i.push(Oo(e,r,s))),e.tag===3)return i;e=e.return}return[]}function us(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function qy(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=wo(n,s),h!=null&&a.unshift(Oo(n,h,u))):r||(h=wo(n,s),h!=null&&a.push(Oo(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Jw=/\r\n?/g,tR=/\u0000|\uFFFD/g;function Hy(e){return(typeof e=="string"?e:""+e).replace(Jw,`
`).replace(tR,"")}function p0(e,t){return t=Hy(t),Hy(e)===t}function qc(){}function bt(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Ks(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Ks(e,""+i);break;case"className":Hl(e,"class",i);break;case"tabIndex":Hl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Hl(e,n,i);break;case"style":pE(e,i,s);break;case"data":if(t!=="object"){Hl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=ou(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&bt(e,t,"name",r.name,r,null),bt(e,t,"formEncType",r.formEncType,r,null),bt(e,t,"formMethod",r.formMethod,r,null),bt(e,t,"formTarget",r.formTarget,r,null)):(bt(e,t,"encType",r.encType,r,null),bt(e,t,"method",r.method,r,null),bt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=ou(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=qc);break;case"onScroll":i!=null&&st("scroll",e);break;case"onScrollEnd":i!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=ou(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":st("beforetoggle",e),st("toggle",e),au(e,"popover",i);break;case"xlinkActuate":Gn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Gn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Gn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Gn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Gn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Gn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":au(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=x1.get(n)||n,au(e,n,i))}}function ld(e,t,n,i,r,s){switch(n){case"style":pE(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Ks(e,i):(typeof i=="number"||typeof i=="bigint")&&Ks(e,""+i);break;case"onScroll":i!=null&&st("scroll",e);break;case"onScrollEnd":i!=null&&st("scrollend",e);break;case"onClick":i!=null&&(e.onclick=qc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cE.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Be]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):au(e,n,i)}}}function Te(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:bt(e,t,s,a,n,null)}}r&&bt(e,t,"srcSet",n.srcSet,n,null),i&&bt(e,t,"src",n.src,n,null);return;case"input":st("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,t));break;default:bt(e,t,i,d,n,null)}}dE(e,s,l,u,h,a,r,!1),Mu(e);return;case"select":st("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:bt(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?Vs(e,!!i,t,!1):n!=null&&Vs(e,!!i,n,!0);return;case"textarea":st("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:bt(e,t,a,l,n,null)}gE(e,i,r,s),Mu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:bt(e,t,u,i,n,null)}return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(i=0;i<Do.length;i++)st(Do[i],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:bt(e,t,h,i,n,null)}return;default:if(nm(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&ld(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&bt(e,t,l,i,n,null))}function eR(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||bt(e,t,_,null,i,g)}}for(var m in i){var _=i[m];if(g=n[m],i.hasOwnProperty(m)&&(_!=null||g!=null))switch(m){case"type":s=_;break;case"name":r=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(U(137,t));break;default:_!==g&&bt(e,t,m,_,i,g)}}Of(e,a,l,u,h,d,s,r);return;case"select":_=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(s)||bt(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&bt(e,t,r,s,i,u)}t=l,n=a,i=_,m!=null?Vs(e,!!n,m,!1):!!i!=!!n&&(t!=null?Vs(e,!!n,t,!0):Vs(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:bt(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":_=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(U(91));break;default:r!==s&&bt(e,t,a,r,i,s)}mE(e,m,_);return;case"option":for(var x in n)if(m=n[x],n.hasOwnProperty(x)&&m!=null&&!i.hasOwnProperty(x))switch(x){case"selected":e.selected=!1;break;default:bt(e,t,x,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:bt(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)m=n[O],n.hasOwnProperty(O)&&m!=null&&!i.hasOwnProperty(O)&&bt(e,t,O,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,t));break;default:bt(e,t,h,m,i,_)}return;default:if(nm(t)){for(var M in n)m=n[M],n.hasOwnProperty(M)&&m!==void 0&&!i.hasOwnProperty(M)&&ld(e,t,M,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||ld(e,t,d,m,i,_);return}}for(var A in n)m=n[A],n.hasOwnProperty(A)&&m!=null&&!i.hasOwnProperty(A)&&bt(e,t,A,null,i,m);for(g in i)m=i[g],_=n[g],!i.hasOwnProperty(g)||m===_||m==null&&_==null||bt(e,t,g,m,i,_)}var ud=null,cd=null;function tc(e){return e.nodeType===9?e:e.ownerDocument}function Fy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function y0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function hd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cf=null;function nR(){var e=window.event;return e&&e.type==="popstate"?e===cf?!1:(cf=e,!0):(cf=null,!1)}var _0=typeof setTimeout=="function"?setTimeout:void 0,iR=typeof clearTimeout=="function"?clearTimeout:void 0,Gy=typeof Promise=="function"?Promise:void 0,rR=typeof queueMicrotask=="function"?queueMicrotask:typeof Gy<"u"?function(e){return Gy.resolve(null).then(e).catch(sR)}:_0;function sR(e){setTimeout(function(){throw e})}function gr(e){return e==="head"}function Qy(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&po(a.documentElement),n&2&&po(a.body),n&4)for(n=a.head,po(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[Wo]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),Uo(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);Uo(t)}function fd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fd(n),em(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function aR(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Wo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Tn(e.nextSibling),e===null)break}return null}function oR(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Tn(e.nextSibling),e===null))return null;return e}function dd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function lR(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Tn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var md=null;function Yy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function v0(e,t,n){switch(t=tc(n),e){case"html":if(e=t.documentElement,!e)throw Error(U(452));return e;case"head":if(e=t.head,!e)throw Error(U(453));return e;case"body":if(e=t.body,!e)throw Error(U(454));return e;default:throw Error(U(451))}}function po(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);em(e)}var dn=new Map,Ky=new Set;function ec(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var gi=_t.d;_t.d={f:uR,r:cR,D:hR,C:fR,L:dR,m:mR,X:pR,S:gR,M:yR};function uR(){var e=gi.f(),t=jc();return e||t}function cR(e){var t=fa(e);t!==null&&t.tag===5&&t.type==="form"?fT(t):gi.r(e)}var ga=typeof document>"u"?null:document;function E0(e,t,n){var i=ga;if(i&&typeof t=="string"&&t){var r=un(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Ky.has(r)||(Ky.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),Te(t,"link",e),ue(t),i.head.appendChild(t)))}}function hR(e){gi.D(e),E0("dns-prefetch",e,null)}function fR(e,t){gi.C(e,t),E0("preconnect",e,t)}function dR(e,t,n){gi.L(e,t,n);var i=ga;if(i&&e&&t){var r='link[rel="preload"][as="'+un(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+un(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+un(n.imageSizes)+'"]')):r+='[href="'+un(e)+'"]';var s=r;switch(t){case"style":s=na(e);break;case"script":s=pa(e)}dn.has(s)||(e=Mt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),dn.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(ll(s))||t==="script"&&i.querySelector(ul(s))||(t=i.createElement("link"),Te(t,"link",e),ue(t),i.head.appendChild(t)))}}function mR(e,t){gi.m(e,t);var n=ga;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+un(i)+'"][href="'+un(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=pa(e)}if(!dn.has(s)&&(e=Mt({rel:"modulepreload",href:e},t),dn.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ul(s)))return}i=n.createElement("link"),Te(i,"link",e),ue(i),n.head.appendChild(i)}}}function gR(e,t,n){gi.S(e,t,n);var i=ga;if(i&&e){var r=Os(i).hoistableStyles,s=na(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(ll(s)))l.loading=5;else{e=Mt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=dn.get(s))&&Lm(e,n);var u=a=i.createElement("link");ue(u),Te(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,pu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function pR(e,t){gi.X(e,t);var n=ga;if(n&&e){var i=Os(n).hoistableScripts,r=pa(e),s=i.get(r);s||(s=n.querySelector(ul(r)),s||(e=Mt({src:e,async:!0},t),(t=dn.get(r))&&jm(e,t),s=n.createElement("script"),ue(s),Te(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function yR(e,t){gi.M(e,t);var n=ga;if(n&&e){var i=Os(n).hoistableScripts,r=pa(e),s=i.get(r);s||(s=n.querySelector(ul(r)),s||(e=Mt({src:e,async:!0,type:"module"},t),(t=dn.get(r))&&jm(e,t),s=n.createElement("script"),ue(s),Te(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Xy(e,t,n,i){var r=(r=Hi.current)?ec(r):null;if(!r)throw Error(U(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=na(n.href),n=Os(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=na(n.href);var s=Os(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(ll(e)))&&!s._p&&(a.instance=s,a.state.loading=5),dn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},dn.set(e,n),s||_R(r,e,n,a.state))),t&&i===null)throw Error(U(528,""));return a}if(t&&i!==null)throw Error(U(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=pa(n),n=Os(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,e))}}function na(e){return'href="'+un(e)+'"'}function ll(e){return'link[rel="stylesheet"]['+e+"]"}function T0(e){return Mt({},e,{"data-precedence":e.precedence,precedence:null})}function _R(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Te(t,"link",n),ue(t),e.head.appendChild(t))}function pa(e){return'[src="'+un(e)+'"]'}function ul(e){return"script[async]"+e}function $y(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+un(n.href)+'"]');if(i)return t.instance=i,ue(i),i;var r=Mt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ue(i),Te(i,"style",r),pu(i,n.precedence,e),t.instance=i;case"stylesheet":r=na(n.href);var s=e.querySelector(ll(r));if(s)return t.state.loading|=4,t.instance=s,ue(s),s;i=T0(n),(r=dn.get(r))&&Lm(i,r),s=(e.ownerDocument||e).createElement("link"),ue(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Te(s,"link",i),t.state.loading|=4,pu(s,n.precedence,e),t.instance=s;case"script":return s=pa(n.src),(r=e.querySelector(ul(s)))?(t.instance=r,ue(r),r):(i=n,(r=dn.get(s))&&(i=Mt({},n),jm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),ue(r),Te(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(U(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,pu(i,n.precedence,e));return t.instance}function pu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Lm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function jm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var yu=null;function Zy(e,t,n){if(yu===null){var i=new Map,r=yu=new Map;r.set(n,i)}else r=yu,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Wo]||s[Ne]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function Wy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function vR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function A0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Vo=null;function ER(){}function TR(e,t,n){if(Vo===null)throw Error(U(475));var i=Vo;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=na(n.href),s=e.querySelector(ll(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=nc.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,ue(s);return}s=e.ownerDocument||e,n=T0(n),(r=dn.get(r))&&Lm(n,r),s=s.createElement("link"),ue(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Te(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=nc.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function AR(){if(Vo===null)throw Error(U(475));var e=Vo;return e.stylesheets&&e.count===0&&gd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&gd(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function nc(){if(this.count--,this.count===0){if(this.stylesheets)gd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ic=null;function gd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ic=new Map,t.forEach(bR,e),ic=null,nc.call(e))}function bR(e,t){if(!(t.state.loading&4)){var n=ic.get(e);if(n)var i=n.get(null);else{n=new Map,ic.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=nc.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Mo={$$typeof:Xn,Provider:null,Consumer:null,_currentValue:Or,_currentValue2:Or,_threadCount:0};function SR(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dh(0),this.hiddenUpdates=Dh(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function b0(e,t,n,i,r,s,a,l,u,h,d,g){return e=new SR(e,t,n,a,l,u,h,g),t=1,s===!0&&(t|=24),s=Ke(3,null,null,t),e.current=s,s.stateNode=e,t=dm(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},gm(s),e}function S0(e){return e?(e=Rs,e):Rs}function w0(e,t,n,i,r,s){r=S0(r),i.context===null?i.context=r:i.pendingContext=r,i=Fi(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Gi(e,i,t),n!==null&&(tn(n,e,t),oo(n,e,t))}function Jy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zm(e,t){Jy(e,t),(e=e.alternate)&&Jy(e,t)}function R0(e){if(e.tag===13){var t=da(e,67108864);t!==null&&tn(t,e,67108864),zm(e,67108864)}}var rc=!0;function wR(e,t,n,i){var r=W.T;W.T=null;var s=_t.p;try{_t.p=2,Bm(e,t,n,i)}finally{_t.p=s,W.T=r}}function RR(e,t,n,i){var r=W.T;W.T=null;var s=_t.p;try{_t.p=8,Bm(e,t,n,i)}finally{_t.p=s,W.T=r}}function Bm(e,t,n,i){if(rc){var r=pd(i);if(r===null)uf(e,t,i,sc,n),t_(e,i);else if(CR(r,e,t,n,i))i.stopPropagation();else if(t_(e,i),t&4&&-1<IR.indexOf(e)){for(;r!==null;){var s=fa(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=Ir(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-We(a);l.entanglements[1]|=u,a&=~u}jn(s),!(At&6)&&(Xu=xn()+500,ol(0))}}break;case 13:l=da(s,2),l!==null&&tn(l,s,2),jc(),zm(s,2)}if(s=pd(i),s===null&&uf(e,t,i,sc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else uf(e,t,i,null,n)}}function pd(e){return e=im(e),qm(e)}var sc=null;function qm(e){if(sc=null,e=Es(e),e!==null){var t=Ko(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Zv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sc=e,null}function I0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(f1()){case eE:return 2;case nE:return 8;case Vu:case d1:return 32;case iE:return 268435456;default:return 32}default:return 32}}var yd=!1,Ki=null,Xi=null,$i=null,ko=new Map,Po=new Map,Vi=[],IR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function t_(e,t){switch(e){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":ko.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(t.pointerId)}}function Qa(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=fa(t),t!==null&&R0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function CR(e,t,n,i,r){switch(t){case"focusin":return Ki=Qa(Ki,e,t,n,i,r),!0;case"dragenter":return Xi=Qa(Xi,e,t,n,i,r),!0;case"mouseover":return $i=Qa($i,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return ko.set(s,Qa(ko.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Po.set(s,Qa(Po.get(s)||null,e,t,n,i,r)),!0}return!1}function C0(e){var t=Es(e.target);if(t!==null){var n=Ko(t);if(n!==null){if(t=n.tag,t===13){if(t=Zv(n),t!==null){e.blockedOn=t,T1(e.priority,function(){if(n.tag===13){var i=Je();i=Jd(i);var r=da(n,i);r!==null&&tn(r,n,i),zm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _u(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=pd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Mf=i,n.target.dispatchEvent(i),Mf=null}else return t=fa(n),t!==null&&R0(t),e.blockedOn=n,!1;t.shift()}return!0}function e_(e,t,n){_u(e)&&n.delete(t)}function NR(){yd=!1,Ki!==null&&_u(Ki)&&(Ki=null),Xi!==null&&_u(Xi)&&(Xi=null),$i!==null&&_u($i)&&($i=null),ko.forEach(e_),Po.forEach(e_)}function Zl(e,t){e.blockedOn===t&&(e.blockedOn=null,yd||(yd=!0,ae.unstable_scheduleCallback(ae.unstable_NormalPriority,NR)))}var Wl=null;function n_(e){Wl!==e&&(Wl=e,ae.unstable_scheduleCallback(ae.unstable_NormalPriority,function(){Wl===e&&(Wl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(qm(i||n)===null)continue;break}var s=fa(n);s!==null&&(e.splice(t,3),t-=3,$f(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Uo(e){function t(u){return Zl(u,e)}Ki!==null&&Zl(Ki,e),Xi!==null&&Zl(Xi,e),$i!==null&&Zl($i,e),ko.forEach(t),Po.forEach(t);for(var n=0;n<Vi.length;n++){var i=Vi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Vi.length&&(n=Vi[0],n.blockedOn===null);)C0(n),n.blockedOn===null&&Vi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Be]||null;if(typeof s=="function")a||n_(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Be]||null)l=a.formAction;else if(qm(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),n_(n)}}}function Hm(e){this._internalRoot=e}Hc.prototype.render=Hm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));var n=t.current,i=Je();w0(n,i,e,t,null,null)};Hc.prototype.unmount=Hm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;w0(e.current,2,null,e,null,null),jc(),t[ha]=null}};function Hc(e){this._internalRoot=e}Hc.prototype.unstable_scheduleHydration=function(e){if(e){var t=lE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Vi.length&&t!==0&&t<Vi[n].priority;n++);Vi.splice(n,0,e),n===0&&C0(e)}};var i_=Xv.version;if(i_!=="19.1.1")throw Error(U(527,i_,"19.1.1"));_t.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=s1(t),e=e!==null?Wv(e):null,e=e===null?null:e.stateNode,e};var xR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jl.isDisabled&&Jl.supportsFiber)try{Xo=Jl.inject(xR),Ze=Jl}catch{}}Ic.createRoot=function(e,t){if(!$v(e))throw Error(U(299));var n=!1,i="",r=bT,s=ST,a=wT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=b0(e,1,!1,null,null,n,i,r,s,a,l,null),e[ha]=t.current,Um(e),new Hm(t)};Ic.hydrateRoot=function(e,t,n){if(!$v(e))throw Error(U(299));var i=!1,r="",s=bT,a=ST,l=wT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=b0(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=S0(null),n=t.current,i=Je(),i=Jd(i),r=Fi(i),r.callback=null,Gi(n,r,i),n=i,t.current.lanes=n,Zo(t,n),jn(t),e[ha]=t.current,Um(e),new Hc(t)};Ic.version="19.1.1";function N0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N0)}catch(e){console.error(e)}}N0(),Hv.exports=Ic;var DR=Hv.exports;const OR=()=>{};var r_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},VR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},D0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[g],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(x0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):VR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const g=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||g==null)throw new MR;const m=s<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const x=h<<6&192|g;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class MR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kR=function(e){const t=x0(e);return D0.encodeByteArray(t,!0)},ac=function(e){return kR(e).replace(/\./g,"")},O0=function(e){try{return D0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=()=>PR().__FIREBASE_DEFAULTS__,LR=()=>{if(typeof process>"u"||typeof r_>"u")return;const e=r_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},jR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&O0(e[1]);return t&&JSON.parse(t)},Fc=()=>{try{return OR()||UR()||LR()||jR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},V0=e=>{var t,n;return(n=(t=Fc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},zR=e=>{const t=V0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},M0=()=>{var e;return(e=Fc())==null?void 0:e.config},k0=e=>{var t;return(t=Fc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function P0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ac(JSON.stringify(n)),ac(JSON.stringify(a)),""].join(".")}const yo={};function HR(){const e={prod:[],emulator:[]};for(const t of Object.keys(yo))yo[t]?e.emulator.push(t):e.prod.push(t);return e}function FR(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let s_=!1;function U0(e,t){if(typeof window>"u"||typeof document>"u"||!ya(window.location.host)||yo[e]===t||yo[e]||s_)return;yo[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=HR().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{s_=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=FR(i),_=n("text"),x=document.getElementById(_)||document.createElement("span"),O=n("learnmore"),M=document.getElementById(O)||document.createElement("a"),A=n("preprendIcon"),v=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(M,O);const D=h();u(v,A),R.append(v,x,M,D),document.body.appendChild(R)}s?(x.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(De())}function QR(){var t;const e=(t=Fc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function XR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $R(){const e=De();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ZR(){return!QR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WR(){try{return typeof indexedDB=="object"}catch{return!1}}function JR(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="FirebaseError";class pi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=t2,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?e2(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new pi(r,l,i)}}function e2(e,t){return e.replace(n2,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const n2=/\{\$([^}]+)}/g;function i2(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Hr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(a_(s)&&a_(a)){if(!Hr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function a_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function r2(e,t){const n=new s2(e,t);return n.subscribe.bind(n)}class s2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");a2(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=hf),r.error===void 0&&(r.error=hf),r.complete===void 0&&(r.complete=hf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function a2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function hf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(e){return e&&e._delegate?e._delegate:e}class Fr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new BR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(u2(t))try{this.getOrInitializeService({instanceIdentifier:xr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=xr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=xr){return this.instances.has(t)}getOptions(t=xr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:l2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=xr){return this.component?this.component.multipleInstances?t:xr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function l2(e){return e===xr?void 0:e}function u2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new o2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));const h2={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},f2=ot.INFO,d2={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},m2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=d2[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Fm{constructor(t){this.name=t,this._logLevel=f2,this._logHandler=m2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?h2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...t),this._logHandler(this,ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...t),this._logHandler(this,ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...t),this._logHandler(this,ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...t),this._logHandler(this,ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...t),this._logHandler(this,ot.ERROR,...t)}}const g2=(e,t)=>t.some(n=>e instanceof n);let o_,l_;function p2(){return o_||(o_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function y2(){return l_||(l_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L0=new WeakMap,_d=new WeakMap,j0=new WeakMap,ff=new WeakMap,Gm=new WeakMap;function _2(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(Zi(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&L0.set(n,e)}).catch(()=>{}),Gm.set(t,e),t}function v2(e){if(_d.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});_d.set(e,t)}let vd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return _d.get(e);if(t==="objectStoreNames")return e.objectStoreNames||j0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function E2(e){vd=e(vd)}function T2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(df(this),t,...n);return j0.set(i,t.sort?t.sort():[t]),Zi(i)}:y2().includes(e)?function(...t){return e.apply(df(this),t),Zi(L0.get(this))}:function(...t){return Zi(e.apply(df(this),t))}}function A2(e){return typeof e=="function"?T2(e):(e instanceof IDBTransaction&&v2(e),g2(e,p2())?new Proxy(e,vd):e)}function Zi(e){if(e instanceof IDBRequest)return _2(e);if(ff.has(e))return ff.get(e);const t=A2(e);return t!==e&&(ff.set(e,t),Gm.set(t,e)),t}const df=e=>Gm.get(e);function b2(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=Zi(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Zi(a.result),u.oldVersion,u.newVersion,Zi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const S2=["get","getKey","getAll","getAllKeys","count"],w2=["put","add","delete","clear"],mf=new Map;function u_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(mf.get(t))return mf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=w2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||S2.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return mf.set(t,s),s}E2(e=>({...e,get:(t,n,i)=>u_(t,n)||e.get(t,n,i),has:(t,n)=>!!u_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(I2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function I2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ed="@firebase/app",c_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new Fm("@firebase/app"),C2="@firebase/app-compat",N2="@firebase/analytics-compat",x2="@firebase/analytics",D2="@firebase/app-check-compat",O2="@firebase/app-check",V2="@firebase/auth",M2="@firebase/auth-compat",k2="@firebase/database",P2="@firebase/data-connect",U2="@firebase/database-compat",L2="@firebase/functions",j2="@firebase/functions-compat",z2="@firebase/installations",B2="@firebase/installations-compat",q2="@firebase/messaging",H2="@firebase/messaging-compat",F2="@firebase/performance",G2="@firebase/performance-compat",Q2="@firebase/remote-config",Y2="@firebase/remote-config-compat",K2="@firebase/storage",X2="@firebase/storage-compat",$2="@firebase/firestore",Z2="@firebase/ai",W2="@firebase/firestore-compat",J2="firebase",tI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td="[DEFAULT]",eI={[Ed]:"fire-core",[C2]:"fire-core-compat",[x2]:"fire-analytics",[N2]:"fire-analytics-compat",[O2]:"fire-app-check",[D2]:"fire-app-check-compat",[V2]:"fire-auth",[M2]:"fire-auth-compat",[k2]:"fire-rtdb",[P2]:"fire-data-connect",[U2]:"fire-rtdb-compat",[L2]:"fire-fn",[j2]:"fire-fn-compat",[z2]:"fire-iid",[B2]:"fire-iid-compat",[q2]:"fire-fcm",[H2]:"fire-fcm-compat",[F2]:"fire-perf",[G2]:"fire-perf-compat",[Q2]:"fire-rc",[Y2]:"fire-rc-compat",[K2]:"fire-gcs",[X2]:"fire-gcs-compat",[$2]:"fire-fst",[W2]:"fire-fst-compat",[Z2]:"fire-vertex","fire-js":"fire-js",[J2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new Map,nI=new Map,Ad=new Map;function h_(e,t){try{e.container.addComponent(t)}catch(n){ui.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ia(e){const t=e.name;if(Ad.has(t))return ui.debug(`There were multiple attempts to register component ${t}.`),!1;Ad.set(t,e);for(const n of oc.values())h_(n,e);for(const n of nI.values())h_(n,e);return!0}function Qm(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function vn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wi=new cl("app","Firebase",iI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=tI;function z0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:Td,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Wi.create("bad-app-name",{appName:String(r)});if(n||(n=M0()),!n)throw Wi.create("no-options");const s=oc.get(r);if(s){if(Hr(n,s.options)&&Hr(i,s.config))return s;throw Wi.create("duplicate-app",{appName:r})}const a=new c2(r);for(const u of Ad.values())a.addComponent(u);const l=new rI(n,i,a);return oc.set(r,l),l}function B0(e=Td){const t=oc.get(e);if(!t&&e===Td&&M0())return z0();if(!t)throw Wi.create("no-app",{appName:e});return t}function Ji(e,t,n){let i=eI[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ui.warn(a.join(" "));return}ia(new Fr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="firebase-heartbeat-database",aI=1,Lo="firebase-heartbeat-store";let gf=null;function q0(){return gf||(gf=b2(sI,aI,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Lo)}catch(n){console.warn(n)}}}}).catch(e=>{throw Wi.create("idb-open",{originalErrorMessage:e.message})})),gf}async function oI(e){try{const n=(await q0()).transaction(Lo),i=await n.objectStore(Lo).get(H0(e));return await n.done,i}catch(t){if(t instanceof pi)ui.warn(t.message);else{const n=Wi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ui.warn(n.message)}}}async function f_(e,t){try{const i=(await q0()).transaction(Lo,"readwrite");await i.objectStore(Lo).put(t,H0(e)),await i.done}catch(n){if(n instanceof pi)ui.warn(n.message);else{const i=Wi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ui.warn(i.message)}}}function H0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=1024,uI=30;class cI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=d_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>uI){const a=dI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ui.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=d_(),{heartbeatsToSend:i,unsentEntries:r}=hI(this._heartbeatsCache.heartbeats),s=ac(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ui.warn(n),""}}}function d_(){return new Date().toISOString().substring(0,10)}function hI(e,t=lI){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),m_(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),m_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class fI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WR()?JR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return f_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return f_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function m_(e){return ac(JSON.stringify({version:2,heartbeats:e})).length}function dI(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(e){ia(new Fr("platform-logger",t=>new R2(t),"PRIVATE")),ia(new Fr("heartbeat",t=>new cI(t),"PRIVATE")),Ji(Ed,c_,e),Ji(Ed,c_,"esm2020"),Ji("fire-js","")}mI("");var gI="firebase",pI="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ji(gI,pI,"app");var g_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tr,F0;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,y){function b(){}b.prototype=y.prototype,T.D=y.prototype,T.prototype=new b,T.prototype.constructor=T,T.C=function(w,I,C){for(var S=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)S[xt-2]=arguments[xt];return y.prototype[I].apply(w,S)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,y,b){b||(b=0);var w=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)w[I]=y.charCodeAt(b++)|y.charCodeAt(b++)<<8|y.charCodeAt(b++)<<16|y.charCodeAt(b++)<<24;else for(I=0;16>I;++I)w[I]=y[b++]|y[b++]<<8|y[b++]<<16|y[b++]<<24;y=T.g[0],b=T.g[1],I=T.g[2];var C=T.g[3],S=y+(C^b&(I^C))+w[0]+3614090360&4294967295;y=b+(S<<7&4294967295|S>>>25),S=C+(I^y&(b^I))+w[1]+3905402710&4294967295,C=y+(S<<12&4294967295|S>>>20),S=I+(b^C&(y^b))+w[2]+606105819&4294967295,I=C+(S<<17&4294967295|S>>>15),S=b+(y^I&(C^y))+w[3]+3250441966&4294967295,b=I+(S<<22&4294967295|S>>>10),S=y+(C^b&(I^C))+w[4]+4118548399&4294967295,y=b+(S<<7&4294967295|S>>>25),S=C+(I^y&(b^I))+w[5]+1200080426&4294967295,C=y+(S<<12&4294967295|S>>>20),S=I+(b^C&(y^b))+w[6]+2821735955&4294967295,I=C+(S<<17&4294967295|S>>>15),S=b+(y^I&(C^y))+w[7]+4249261313&4294967295,b=I+(S<<22&4294967295|S>>>10),S=y+(C^b&(I^C))+w[8]+1770035416&4294967295,y=b+(S<<7&4294967295|S>>>25),S=C+(I^y&(b^I))+w[9]+2336552879&4294967295,C=y+(S<<12&4294967295|S>>>20),S=I+(b^C&(y^b))+w[10]+4294925233&4294967295,I=C+(S<<17&4294967295|S>>>15),S=b+(y^I&(C^y))+w[11]+2304563134&4294967295,b=I+(S<<22&4294967295|S>>>10),S=y+(C^b&(I^C))+w[12]+1804603682&4294967295,y=b+(S<<7&4294967295|S>>>25),S=C+(I^y&(b^I))+w[13]+4254626195&4294967295,C=y+(S<<12&4294967295|S>>>20),S=I+(b^C&(y^b))+w[14]+2792965006&4294967295,I=C+(S<<17&4294967295|S>>>15),S=b+(y^I&(C^y))+w[15]+1236535329&4294967295,b=I+(S<<22&4294967295|S>>>10),S=y+(I^C&(b^I))+w[1]+4129170786&4294967295,y=b+(S<<5&4294967295|S>>>27),S=C+(b^I&(y^b))+w[6]+3225465664&4294967295,C=y+(S<<9&4294967295|S>>>23),S=I+(y^b&(C^y))+w[11]+643717713&4294967295,I=C+(S<<14&4294967295|S>>>18),S=b+(C^y&(I^C))+w[0]+3921069994&4294967295,b=I+(S<<20&4294967295|S>>>12),S=y+(I^C&(b^I))+w[5]+3593408605&4294967295,y=b+(S<<5&4294967295|S>>>27),S=C+(b^I&(y^b))+w[10]+38016083&4294967295,C=y+(S<<9&4294967295|S>>>23),S=I+(y^b&(C^y))+w[15]+3634488961&4294967295,I=C+(S<<14&4294967295|S>>>18),S=b+(C^y&(I^C))+w[4]+3889429448&4294967295,b=I+(S<<20&4294967295|S>>>12),S=y+(I^C&(b^I))+w[9]+568446438&4294967295,y=b+(S<<5&4294967295|S>>>27),S=C+(b^I&(y^b))+w[14]+3275163606&4294967295,C=y+(S<<9&4294967295|S>>>23),S=I+(y^b&(C^y))+w[3]+4107603335&4294967295,I=C+(S<<14&4294967295|S>>>18),S=b+(C^y&(I^C))+w[8]+1163531501&4294967295,b=I+(S<<20&4294967295|S>>>12),S=y+(I^C&(b^I))+w[13]+2850285829&4294967295,y=b+(S<<5&4294967295|S>>>27),S=C+(b^I&(y^b))+w[2]+4243563512&4294967295,C=y+(S<<9&4294967295|S>>>23),S=I+(y^b&(C^y))+w[7]+1735328473&4294967295,I=C+(S<<14&4294967295|S>>>18),S=b+(C^y&(I^C))+w[12]+2368359562&4294967295,b=I+(S<<20&4294967295|S>>>12),S=y+(b^I^C)+w[5]+4294588738&4294967295,y=b+(S<<4&4294967295|S>>>28),S=C+(y^b^I)+w[8]+2272392833&4294967295,C=y+(S<<11&4294967295|S>>>21),S=I+(C^y^b)+w[11]+1839030562&4294967295,I=C+(S<<16&4294967295|S>>>16),S=b+(I^C^y)+w[14]+4259657740&4294967295,b=I+(S<<23&4294967295|S>>>9),S=y+(b^I^C)+w[1]+2763975236&4294967295,y=b+(S<<4&4294967295|S>>>28),S=C+(y^b^I)+w[4]+1272893353&4294967295,C=y+(S<<11&4294967295|S>>>21),S=I+(C^y^b)+w[7]+4139469664&4294967295,I=C+(S<<16&4294967295|S>>>16),S=b+(I^C^y)+w[10]+3200236656&4294967295,b=I+(S<<23&4294967295|S>>>9),S=y+(b^I^C)+w[13]+681279174&4294967295,y=b+(S<<4&4294967295|S>>>28),S=C+(y^b^I)+w[0]+3936430074&4294967295,C=y+(S<<11&4294967295|S>>>21),S=I+(C^y^b)+w[3]+3572445317&4294967295,I=C+(S<<16&4294967295|S>>>16),S=b+(I^C^y)+w[6]+76029189&4294967295,b=I+(S<<23&4294967295|S>>>9),S=y+(b^I^C)+w[9]+3654602809&4294967295,y=b+(S<<4&4294967295|S>>>28),S=C+(y^b^I)+w[12]+3873151461&4294967295,C=y+(S<<11&4294967295|S>>>21),S=I+(C^y^b)+w[15]+530742520&4294967295,I=C+(S<<16&4294967295|S>>>16),S=b+(I^C^y)+w[2]+3299628645&4294967295,b=I+(S<<23&4294967295|S>>>9),S=y+(I^(b|~C))+w[0]+4096336452&4294967295,y=b+(S<<6&4294967295|S>>>26),S=C+(b^(y|~I))+w[7]+1126891415&4294967295,C=y+(S<<10&4294967295|S>>>22),S=I+(y^(C|~b))+w[14]+2878612391&4294967295,I=C+(S<<15&4294967295|S>>>17),S=b+(C^(I|~y))+w[5]+4237533241&4294967295,b=I+(S<<21&4294967295|S>>>11),S=y+(I^(b|~C))+w[12]+1700485571&4294967295,y=b+(S<<6&4294967295|S>>>26),S=C+(b^(y|~I))+w[3]+2399980690&4294967295,C=y+(S<<10&4294967295|S>>>22),S=I+(y^(C|~b))+w[10]+4293915773&4294967295,I=C+(S<<15&4294967295|S>>>17),S=b+(C^(I|~y))+w[1]+2240044497&4294967295,b=I+(S<<21&4294967295|S>>>11),S=y+(I^(b|~C))+w[8]+1873313359&4294967295,y=b+(S<<6&4294967295|S>>>26),S=C+(b^(y|~I))+w[15]+4264355552&4294967295,C=y+(S<<10&4294967295|S>>>22),S=I+(y^(C|~b))+w[6]+2734768916&4294967295,I=C+(S<<15&4294967295|S>>>17),S=b+(C^(I|~y))+w[13]+1309151649&4294967295,b=I+(S<<21&4294967295|S>>>11),S=y+(I^(b|~C))+w[4]+4149444226&4294967295,y=b+(S<<6&4294967295|S>>>26),S=C+(b^(y|~I))+w[11]+3174756917&4294967295,C=y+(S<<10&4294967295|S>>>22),S=I+(y^(C|~b))+w[2]+718787259&4294967295,I=C+(S<<15&4294967295|S>>>17),S=b+(C^(I|~y))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(I+(S<<21&4294967295|S>>>11))&4294967295,T.g[2]=T.g[2]+I&4294967295,T.g[3]=T.g[3]+C&4294967295}i.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var b=y-this.blockSize,w=this.B,I=this.h,C=0;C<y;){if(I==0)for(;C<=b;)r(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<y;)if(w[I++]=T.charCodeAt(C++),I==this.blockSize){r(this,w),I=0;break}}else for(;C<y;)if(w[I++]=T[C++],I==this.blockSize){r(this,w),I=0;break}}this.h=I,this.o+=y},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var b=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=b&255,b/=256;for(this.u(T),T=Array(16),y=b=0;4>y;++y)for(var w=0;32>w;w+=8)T[b++]=this.g[y]>>>w&255;return T};function s(T,y){var b=l;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=y(T)}function a(T,y){this.h=y;for(var b=[],w=!0,I=T.length-1;0<=I;I--){var C=T[I]|0;w&&C==y||(b[I]=C,w=!1)}this.g=b}var l={};function u(T){return-128<=T&&128>T?s(T,function(y){return new a([y|0],0>y?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return M(h(-T));for(var y=[],b=1,w=0;T>=b;w++)y[w]=T/b|0,b*=4294967296;return new a(y,0)}function d(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return M(d(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=h(Math.pow(y,8)),w=g,I=0;I<T.length;I+=8){var C=Math.min(8,T.length-I),S=parseInt(T.substring(I,I+C),y);8>C?(C=h(Math.pow(y,C)),w=w.j(C).add(h(S))):(w=w.j(b),w=w.add(h(S)))}return w}var g=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(O(this))return-M(this).m();for(var T=0,y=1,b=0;b<this.g.length;b++){var w=this.i(b);T+=(0<=w?w:4294967296+w)*y,y*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(x(this))return"0";if(O(this))return"-"+M(this).toString(T);for(var y=h(Math.pow(T,6)),b=this,w="";;){var I=D(b,y).g;b=A(b,I.j(y));var C=((0<b.g.length?b.g[0]:b.h)>>>0).toString(T);if(b=I,x(b))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function x(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function O(T){return T.h==-1}e.l=function(T){return T=A(this,T),O(T)?-1:x(T)?0:1};function M(T){for(var y=T.g.length,b=[],w=0;w<y;w++)b[w]=~T.g[w];return new a(b,~T.h).add(m)}e.abs=function(){return O(this)?M(this):this},e.add=function(T){for(var y=Math.max(this.g.length,T.g.length),b=[],w=0,I=0;I<=y;I++){var C=w+(this.i(I)&65535)+(T.i(I)&65535),S=(C>>>16)+(this.i(I)>>>16)+(T.i(I)>>>16);w=S>>>16,C&=65535,S&=65535,b[I]=S<<16|C}return new a(b,b[b.length-1]&-2147483648?-1:0)};function A(T,y){return T.add(M(y))}e.j=function(T){if(x(this)||x(T))return g;if(O(this))return O(T)?M(this).j(M(T)):M(M(this).j(T));if(O(T))return M(this.j(M(T)));if(0>this.l(_)&&0>T.l(_))return h(this.m()*T.m());for(var y=this.g.length+T.g.length,b=[],w=0;w<2*y;w++)b[w]=0;for(w=0;w<this.g.length;w++)for(var I=0;I<T.g.length;I++){var C=this.i(w)>>>16,S=this.i(w)&65535,xt=T.i(I)>>>16,be=T.i(I)&65535;b[2*w+2*I]+=S*be,v(b,2*w+2*I),b[2*w+2*I+1]+=C*be,v(b,2*w+2*I+1),b[2*w+2*I+1]+=S*xt,v(b,2*w+2*I+1),b[2*w+2*I+2]+=C*xt,v(b,2*w+2*I+2)}for(w=0;w<y;w++)b[w]=b[2*w+1]<<16|b[2*w];for(w=y;w<2*y;w++)b[w]=0;return new a(b,0)};function v(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function R(T,y){this.g=T,this.h=y}function D(T,y){if(x(y))throw Error("division by zero");if(x(T))return new R(g,g);if(O(T))return y=D(M(T),y),new R(M(y.g),M(y.h));if(O(y))return y=D(T,M(y)),new R(M(y.g),y.h);if(30<T.g.length){if(O(T)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var b=m,w=y;0>=w.l(T);)b=L(b),w=L(w);var I=q(b,1),C=q(w,1);for(w=q(w,2),b=q(b,2);!x(w);){var S=C.add(w);0>=S.l(T)&&(I=I.add(b),C=S),w=q(w,1),b=q(b,1)}return y=A(T,I.j(y)),new R(I,y)}for(I=g;0<=T.l(y);){for(b=Math.max(1,Math.floor(T.m()/y.m())),w=Math.ceil(Math.log(b)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=h(b),S=C.j(y);O(S)||0<S.l(T);)b-=w,C=h(b),S=C.j(y);x(C)&&(C=m),I=I.add(C),T=A(T,S)}return new R(I,T)}e.A=function(T){return D(this,T).h},e.and=function(T){for(var y=Math.max(this.g.length,T.g.length),b=[],w=0;w<y;w++)b[w]=this.i(w)&T.i(w);return new a(b,this.h&T.h)},e.or=function(T){for(var y=Math.max(this.g.length,T.g.length),b=[],w=0;w<y;w++)b[w]=this.i(w)|T.i(w);return new a(b,this.h|T.h)},e.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),b=[],w=0;w<y;w++)b[w]=this.i(w)^T.i(w);return new a(b,this.h^T.h)};function L(T){for(var y=T.g.length+1,b=[],w=0;w<y;w++)b[w]=T.i(w)<<1|T.i(w-1)>>>31;return new a(b,T.h)}function q(T,y){var b=y>>5;y%=32;for(var w=T.g.length-b,I=[],C=0;C<w;C++)I[C]=0<y?T.i(C+b)>>>y|T.i(C+b+1)<<32-y:T.i(C+b);return new a(I,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,F0=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,tr=a}).apply(typeof g_<"u"?g_:typeof self<"u"?self:typeof window<"u"?window:{});var tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var G0,Za,Q0,vu,bd,Y0,K0,X0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof tu=="object"&&tu];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var N=o[p];if(!(N in f))break t;f=f[N]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,p=!1,N={next:function(){if(!p&&f<o.length){var V=f++;return{value:c(V,o[V]),done:!1}}return p=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,p),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function x(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,N,V){for(var z=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)z[Rt-2]=arguments[Rt];return c.prototype[N].apply(p,z)}}function O(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function M(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const N=o.length||0,V=p.length||0;o.length=N+V;for(let z=0;z<V;z++)o[N+z]=p[z]}else o.push(p)}}class A{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var L=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function q(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function T(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,c){let f,p;for(let N=1;N<arguments.length;N++){p=arguments[N];for(f in p)o[f]=p[f];for(let V=0;V<b.length;V++)f=b[V],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function I(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function C(o){l.setTimeout(()=>{throw o},0)}function S(){var o=ht;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class xt{constructor(){this.h=this.g=null}add(c,f){const p=be.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var be=new A(()=>new j,o=>o.reset());class j{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let X,$=!1,ht=new xt,Et=()=>{const o=l.Promise.resolve(void 0);X=()=>{o.then(mn)}};var mn=()=>{for(var o;o=S();){try{o.h.call(o.g)}catch(f){C(f)}var c=be;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}$=!1};function qt(){this.s=this.s,this.C=this.C}qt.prototype.s=!1,qt.prototype.ma=function(){this.s||(this.s=!0,this.N())},qt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Dt(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Dt.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function Qt(o,c){if(Dt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{D(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Sn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Qt.aa.h.call(this)}}x(Qt,Dt);var Sn={2:"touch",3:"pen",4:"mouse"};Qt.prototype.h=function(){Qt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var He="closure_listenable_"+(1e6*Math.random()|0),ns=0;function _r(o,c,f,p,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=N,this.key=++ns,this.da=this.fa=!1}function yi(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function _i(o){this.src=o,this.g={},this.h=0}_i.prototype.add=function(o,c,f,p,N){var V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);var z=Bn(o,c,p,N);return-1<z?(c=o[z],f||(c.fa=!1)):(c=new _r(c,this.src,V,!!p,N),c.fa=f,o.push(c)),c};function zn(o,c){var f=c.type;if(f in o.g){var p=o.g[f],N=Array.prototype.indexOf.call(p,c,void 0),V;(V=0<=N)&&Array.prototype.splice.call(p,N,1),V&&(yi(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Bn(o,c,f,p){for(var N=0;N<o.length;++N){var V=o[N];if(!V.da&&V.listener==c&&V.capture==!!f&&V.ha==p)return N}return-1}var vr="closure_lm_"+(1e6*Math.random()|0),Er={};function Tr(o,c,f,p,N){if(Array.isArray(c)){for(var V=0;V<c.length;V++)Tr(o,c[V],f,p,N);return null}return f=Ct(f),o&&o[He]?o.K(c,f,h(p)?!!p.capture:!1,N):is(o,c,f,!1,p,N)}function is(o,c,f,p,N,V){if(!c)throw Error("Invalid event type");var z=h(N)?!!N.capture:!!N,Rt=vt(o);if(Rt||(o[vr]=Rt=new _i(o)),f=Rt.add(c,f,p,z,V),f.proxy)return f;if(p=it(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)me||(N=z),N===void 0&&(N=!1),o.addEventListener(c.toString(),p,N);else if(o.attachEvent)o.attachEvent(G(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function it(){function o(f){return c.call(o.src,o.listener,f)}const c=K;return o}function ct(o,c,f,p,N){if(Array.isArray(c))for(var V=0;V<c.length;V++)ct(o,c[V],f,p,N);else p=h(p)?!!p.capture:!!p,f=Ct(f),o&&o[He]?(o=o.i,c=String(c).toString(),c in o.g&&(V=o.g[c],f=Bn(V,f,p,N),-1<f&&(yi(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete o.g[c],o.h--)))):o&&(o=vt(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Bn(c,f,p,N)),(f=-1<o?c[o]:null)&&Yt(f))}function Yt(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[He])zn(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(G(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=vt(c))?(zn(f,o),f.h==0&&(f.src=null,c[vr]=null)):yi(o)}}}function G(o){return o in Er?Er[o]:Er[o]="on"+o}function K(o,c){if(o.da)o=!0;else{c=new Qt(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&Yt(o),o=f.call(p,c)}return o}function vt(o){return o=o[vr],o instanceof _i?o:null}var et="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(o){return typeof o=="function"?o:(o[et]||(o[et]=function(c){return o.handleEvent(c)}),o[et])}function ft(){qt.call(this),this.i=new _i(this),this.M=this,this.F=null}x(ft,qt),ft.prototype[He]=!0,ft.prototype.removeEventListener=function(o,c,f,p){ct(this,o,c,f,p)};function kt(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new Dt(c,o);else if(c instanceof Dt)c.target=c.target||o;else{var N=c;c=new Dt(p,o),w(c,N)}if(N=!0,f)for(var V=f.length-1;0<=V;V--){var z=c.g=f[V];N=gn(z,p,!0,c)&&N}if(z=c.g=o,N=gn(z,p,!0,c)&&N,N=gn(z,p,!1,c)&&N,f)for(V=0;V<f.length;V++)z=c.g=f[V],N=gn(z,p,!1,c)&&N}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)yi(f[p]);delete o.g[c],o.h--}}this.F=null},ft.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},ft.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function gn(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,V=0;V<c.length;++V){var z=c[V];if(z&&!z.da&&z.capture==f){var Rt=z.listener,ge=z.ha||z.src;z.fa&&zn(o.i,z),N=Rt.call(ge,p)!==!1&&N}}return N&&!p.defaultPrevented}function pn(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function vi(o){o.g=pn(()=>{o.g=null,o.i&&(o.i=!1,vi(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class wa extends qt{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:vi(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ei(o){qt.call(this),this.h=o,this.g={}}x(Ei,qt);var Ra=[];function qn(o){q(o.g,function(c,f){this.g.hasOwnProperty(f)&&Yt(c)},o),o.g={}}Ei.prototype.N=function(){Ei.aa.N.call(this),qn(this)},Ei.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dh=l.JSON.stringify,uS=l.JSON.parse,cS=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function mh(){}mh.prototype.h=null;function qg(o){return o.h||(o.h=o.i())}function Hg(){}var Ia={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gh(){Dt.call(this,"d")}x(gh,Dt);function ph(){Dt.call(this,"c")}x(ph,Dt);var Ar={},Fg=null;function Sl(){return Fg=Fg||new ft}Ar.La="serverreachability";function Gg(o){Dt.call(this,Ar.La,o)}x(Gg,Dt);function Ca(o){const c=Sl();kt(c,new Gg(c))}Ar.STAT_EVENT="statevent";function Qg(o,c){Dt.call(this,Ar.STAT_EVENT,o),this.stat=c}x(Qg,Dt);function Oe(o){const c=Sl();kt(c,new Qg(c,o))}Ar.Ma="timingevent";function Yg(o,c){Dt.call(this,Ar.Ma,o),this.size=c}x(Yg,Dt);function Na(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function xa(){this.g=!0}xa.prototype.xa=function(){this.g=!1};function hS(o,c,f,p,N,V){o.info(function(){if(o.g)if(V)for(var z="",Rt=V.split("&"),ge=0;ge<Rt.length;ge++){var pt=Rt[ge].split("=");if(1<pt.length){var Se=pt[0];pt=pt[1];var we=Se.split("_");z=2<=we.length&&we[1]=="type"?z+(Se+"="+pt+"&"):z+(Se+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+p+") [attempt "+N+"]: "+c+`
`+f+`
`+z})}function fS(o,c,f,p,N,V,z){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+N+"]: "+c+`
`+f+`
`+V+" "+z})}function rs(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+mS(o,f)+(p?" "+p:"")})}function dS(o,c){o.info(function(){return"TIMEOUT: "+c})}xa.prototype.info=function(){};function mS(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var N=p[1];if(Array.isArray(N)&&!(1>N.length)){var V=N[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return dh(f)}catch{return c}}var wl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yh;function Rl(){}x(Rl,mh),Rl.prototype.g=function(){return new XMLHttpRequest},Rl.prototype.i=function(){return{}},yh=new Rl;function Ti(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new Ei(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xg}function Xg(){this.i=null,this.g="",this.h=!1}var $g={},_h={};function vh(o,c,f){o.L=1,o.v=xl(Hn(c)),o.m=f,o.P=!0,Zg(o,null)}function Zg(o,c){o.F=Date.now(),Il(o),o.A=Hn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),hp(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Xg,o.g=Np(o.j,f?c:null,!o.m),0<o.O&&(o.M=new wa(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Ra[0]=N.toString()),N=Ra);for(var V=0;V<N.length;V++){var z=Tr(f,N[V],p||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Ca(),hS(o.i,o.u,o.A,o.l,o.R,o.m)}Ti.prototype.ca=function(o){o=o.target;const c=this.M;c&&Fn(o)==3?c.j():this.Y(o)},Ti.prototype.Y=function(o){try{if(o==this.g)t:{const we=Fn(this.g);var c=this.g.Ba();const os=this.g.Z();if(!(3>we)&&(we!=3||this.g&&(this.h.h||this.g.oa()||_p(this.g)))){this.J||we!=4||c==7||(c==8||0>=os?Ca(3):Ca(2)),Eh(this);var f=this.g.Z();this.X=f;e:if(Wg(this)){var p=_p(this.g);o="";var N=p.length,V=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){br(this),Da(this);var z="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(V&&c==N-1)});p.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,fS(this.i,this.u,this.A,this.l,this.R,we,f),this.o){if(this.T&&!this.K){e:{if(this.g){var Rt,ge=this.g;if((Rt=ge.g?ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Rt)){var pt=Rt;break e}}pt=null}if(f=pt)rs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Th(this,f);else{this.o=!1,this.s=3,Oe(12),br(this),Da(this);break t}}if(this.P){f=!0;let yn;for(;!this.J&&this.C<z.length;)if(yn=gS(this,z),yn==_h){we==4&&(this.s=4,Oe(14),f=!1),rs(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==$g){this.s=4,Oe(15),rs(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else rs(this.i,this.l,yn,null),Th(this,yn);if(Wg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||z.length!=0||this.h.h||(this.s=1,Oe(16),f=!1),this.o=this.o&&f,!f)rs(this.i,this.l,z,"[Invalid Chunked Response]"),br(this),Da(this);else if(0<z.length&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.ba&&!Se.M&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Ih(Se),Se.M=!0,Oe(11))}}else rs(this.i,this.l,z,null),Th(this,z);we==4&&br(this),this.o&&!this.J&&(we==4?wp(this.j,this):(this.o=!1,Il(this)))}else OS(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),br(this),Da(this)}}}catch{}finally{}};function Wg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function gS(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?_h:(f=Number(c.substring(f,p)),isNaN(f)?$g:(p+=1,p+f>c.length?_h:(c=c.slice(p,p+f),o.C=p+f,c)))}Ti.prototype.cancel=function(){this.J=!0,br(this)};function Il(o){o.S=Date.now()+o.I,Jg(o,o.I)}function Jg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Na(m(o.ba,o),c)}function Eh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Ti.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(dS(this.i,this.A),this.L!=2&&(Ca(),Oe(17)),br(this),this.s=2,Da(this)):Jg(this,this.S-o)};function Da(o){o.j.G==0||o.J||wp(o.j,o)}function br(o){Eh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,qn(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Th(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||Ah(f.h,o))){if(!o.K&&Ah(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var N=p;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Pl(f),Ml(f);else break t;Rh(f),Oe(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=Na(m(f.Za,f),6e3));if(1>=np(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else wr(f,11)}else if((o.K||f.g==o)&&Pl(f),!v(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let pt=N[c];if(f.T=pt[0],pt=pt[1],f.G==2)if(pt[0]=="c"){f.K=pt[1],f.ia=pt[2];const Se=pt[3];Se!=null&&(f.la=Se,f.j.info("VER="+f.la));const we=pt[4];we!=null&&(f.Aa=we,f.j.info("SVER="+f.Aa));const os=pt[5];os!=null&&typeof os=="number"&&0<os&&(p=1.5*os,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const yn=o.g;if(yn){const Ll=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ll){var V=p.h;V.g||Ll.indexOf("spdy")==-1&&Ll.indexOf("quic")==-1&&Ll.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(bh(V,V.h),V.h=null))}if(p.D){const Ch=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ch&&(p.ya=Ch,Ot(p.I,p.D,Ch))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var z=o;if(p.qa=Cp(p,p.J?p.ia:null,p.W),z.K){ip(p.h,z);var Rt=z,ge=p.L;ge&&(Rt.I=ge),Rt.B&&(Eh(Rt),Il(Rt)),p.g=z}else bp(p);0<f.i.length&&kl(f)}else pt[0]!="stop"&&pt[0]!="close"||wr(f,7);else f.G==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?wr(f,7):wh(f):pt[0]!="noop"&&f.l&&f.l.ta(pt),f.v=0)}}Ca(4)}catch{}}var pS=class{constructor(o,c){this.g=o,this.map=c}};function tp(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ep(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function np(o){return o.h?1:o.g?o.g.size:0}function Ah(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function bh(o,c){o.g?o.g.add(c):o.h=c}function ip(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}tp.prototype.cancel=function(){if(this.i=rp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function rp(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return O(o.i)}function yS(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function _S(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function sp(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=_S(o),p=yS(o),N=p.length,V=0;V<N;V++)c.call(void 0,p[V],f&&f[V],o)}var ap=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vS(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),N=null;if(0<=p){var V=o[f].substring(0,p);N=o[f].substring(p+1)}else V=o[f];c(V,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Sr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Sr){this.h=o.h,Cl(this,o.j),this.o=o.o,this.g=o.g,Nl(this,o.s),this.l=o.l;var c=o.i,f=new Ma;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),op(this,f),this.m=o.m}else o&&(c=String(o).match(ap))?(this.h=!1,Cl(this,c[1]||"",!0),this.o=Oa(c[2]||""),this.g=Oa(c[3]||"",!0),Nl(this,c[4]),this.l=Oa(c[5]||"",!0),op(this,c[6]||"",!0),this.m=Oa(c[7]||"")):(this.h=!1,this.i=new Ma(null,this.h))}Sr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Va(c,lp,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Va(c,lp,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Va(f,f.charAt(0)=="/"?AS:TS,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Va(f,SS)),o.join("")};function Hn(o){return new Sr(o)}function Cl(o,c,f){o.j=f?Oa(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Nl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function op(o,c,f){c instanceof Ma?(o.i=c,wS(o.i,o.h)):(f||(c=Va(c,bS)),o.i=new Ma(c,o.h))}function Ot(o,c,f){o.i.set(c,f)}function xl(o){return Ot(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Oa(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Va(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,ES),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function ES(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var lp=/[#\/\?@]/g,TS=/[#\?:]/g,AS=/[#\?]/g,bS=/[#\?@]/g,SS=/#/g;function Ma(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Ai(o){o.g||(o.g=new Map,o.h=0,o.i&&vS(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=Ma.prototype,e.add=function(o,c){Ai(this),this.i=null,o=ss(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function up(o,c){Ai(o),c=ss(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function cp(o,c){return Ai(o),c=ss(o,c),o.g.has(c)}e.forEach=function(o,c){Ai(this),this.g.forEach(function(f,p){f.forEach(function(N){o.call(c,N,p,this)},this)},this)},e.na=function(){Ai(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const N=o[p];for(let V=0;V<N.length;V++)f.push(c[p])}return f},e.V=function(o){Ai(this);let c=[];if(typeof o=="string")cp(this,o)&&(c=c.concat(this.g.get(ss(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return Ai(this),this.i=null,o=ss(this,o),cp(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function hp(o,c,f){up(o,c),0<f.length&&(o.i=null,o.g.set(ss(o,c),O(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const V=encodeURIComponent(String(p)),z=this.V(p);for(p=0;p<z.length;p++){var N=V;z[p]!==""&&(N+="="+encodeURIComponent(String(z[p]))),o.push(N)}}return this.i=o.join("&")};function ss(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function wS(o,c){c&&!o.j&&(Ai(o),o.i=null,o.g.forEach(function(f,p){var N=p.toLowerCase();p!=N&&(up(this,p),hp(this,N,f))},o)),o.j=c}function RS(o,c){const f=new xa;if(l.Image){const p=new Image;p.onload=_(bi,f,"TestLoadImage: loaded",!0,c,p),p.onerror=_(bi,f,"TestLoadImage: error",!1,c,p),p.onabort=_(bi,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=_(bi,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function IS(o,c){const f=new xa,p=new AbortController,N=setTimeout(()=>{p.abort(),bi(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(V=>{clearTimeout(N),V.ok?bi(f,"TestPingServer: ok",!0,c):bi(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),bi(f,"TestPingServer: error",!1,c)})}function bi(o,c,f,p,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),p(f)}catch{}}function CS(){this.g=new cS}function NS(o,c,f){const p=f||"";try{sp(o,function(N,V){let z=N;h(N)&&(z=dh(N)),c.push(p+V+"="+encodeURIComponent(z))})}catch(N){throw c.push(p+"type="+encodeURIComponent("_badmap")),N}}function Dl(o){this.l=o.Ub||null,this.j=o.eb||!1}x(Dl,mh),Dl.prototype.g=function(){return new Ol(this.l,this.j)},Dl.prototype.i=function(o){return function(){return o}}({});function Ol(o,c){ft.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ol,ft),e=Ol.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Pa(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ka(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Pa(this)),this.g&&(this.readyState=3,Pa(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fp(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function fp(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?ka(this):Pa(this),this.readyState==3&&fp(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,ka(this))},e.Qa=function(o){this.g&&(this.response=o,ka(this))},e.ga=function(){this.g&&ka(this)};function ka(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Pa(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Pa(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function dp(o){let c="";return q(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function Sh(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=dp(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Ot(o,c,f))}function Ht(o){ft.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ht,ft);var xS=/^https?$/i,DS=["POST","PUT"];e=Ht.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yh.g(),this.v=this.o?qg(this.o):qg(yh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(V){mp(this,V);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var N in p)f.set(N,p[N]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const V of p.keys())f.set(V,p.get(V));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(DS,c,void 0))||p||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of f)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yp(this),this.u=!0,this.g.send(o),this.u=!1}catch(V){mp(this,V)}};function mp(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,gp(o),Vl(o)}function gp(o){o.A||(o.A=!0,kt(o,"complete"),kt(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,kt(this,"complete"),kt(this,"abort"),Vl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vl(this,!0)),Ht.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?pp(this):this.bb())},e.bb=function(){pp(this)};function pp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Fn(o)!=4||o.Z()!=2)){if(o.u&&Fn(o)==4)pn(o.Ea,0,o);else if(kt(o,"readystatechange"),Fn(o)==4){o.h=!1;try{const z=o.Z();t:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=z===0){var N=String(o.D).match(ap)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),p=!xS.test(N?N.toLowerCase():"")}f=p}if(f)kt(o,"complete"),kt(o,"success");else{o.m=6;try{var V=2<Fn(o)?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.Z()+"]",gp(o)}}finally{Vl(o)}}}}function Vl(o,c){if(o.g){yp(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||kt(o,"ready");try{f.onreadystatechange=p}catch{}}}function yp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Fn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),uS(c)}};function _p(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function OS(o){const c={};o=(o.g&&2<=Fn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(v(o[p]))continue;var f=I(o[p]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=c[N]||[];c[N]=V,V.push(f)}T(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ua(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function vp(o){this.Aa=0,this.i=[],this.j=new xa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ua("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ua("baseRetryDelayMs",5e3,o),this.cb=Ua("retryDelaySeedMs",1e4,o),this.Wa=Ua("forwardChannelMaxRetries",2,o),this.wa=Ua("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new tp(o&&o.concurrentRequestLimit),this.Da=new CS,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=vp.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){Oe(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=Cp(this,null,this.W),kl(this)};function wh(o){if(Ep(o),o.G==3){var c=o.U++,f=Hn(o.I);if(Ot(f,"SID",o.K),Ot(f,"RID",c),Ot(f,"TYPE","terminate"),La(o,f),c=new Ti(o,o.j,c),c.L=2,c.v=xl(Hn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Np(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Il(c)}Ip(o)}function Ml(o){o.g&&(Ih(o),o.g.cancel(),o.g=null)}function Ep(o){Ml(o),o.u&&(l.clearTimeout(o.u),o.u=null),Pl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function kl(o){if(!ep(o.h)&&!o.s){o.s=!0;var c=o.Ga;X||Et(),$||(X(),$=!0),ht.add(c,o),o.B=0}}function VS(o,c){return np(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Na(m(o.Ga,o,c),Rp(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new Ti(this,this.j,o);let V=this.o;if(this.S&&(V?(V=y(V),w(V,this.S)):V=this.S),this.m!==null||this.O||(N.H=V,V=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=Ap(this,N,c),f=Hn(this.I),Ot(f,"RID",o),Ot(f,"CVER",22),this.D&&Ot(f,"X-HTTP-Session-Id",this.D),La(this,f),V&&(this.O?c="headers="+encodeURIComponent(String(dp(V)))+"&"+c:this.m&&Sh(f,this.m,V)),bh(this.h,N),this.Ua&&Ot(f,"TYPE","init"),this.P?(Ot(f,"$req",c),Ot(f,"SID","null"),N.T=!0,vh(N,f,null)):vh(N,f,c),this.G=2}}else this.G==3&&(o?Tp(this,o):this.i.length==0||ep(this.h)||Tp(this))};function Tp(o,c){var f;c?f=c.l:f=o.U++;const p=Hn(o.I);Ot(p,"SID",o.K),Ot(p,"RID",f),Ot(p,"AID",o.T),La(o,p),o.m&&o.o&&Sh(p,o.m,o.o),f=new Ti(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Ap(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),bh(o.h,f),vh(f,p,c)}function La(o,c){o.H&&q(o.H,function(f,p){Ot(c,p,f)}),o.l&&sp({},function(f,p){Ot(c,p,f)})}function Ap(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let V=-1;for(;;){const z=["count="+f];V==-1?0<f?(V=N[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let Rt=!0;for(let ge=0;ge<f;ge++){let pt=N[ge].g;const Se=N[ge].map;if(pt-=V,0>pt)V=Math.max(0,N[ge].g-100),Rt=!1;else try{NS(Se,z,"req"+pt+"_")}catch{p&&p(Se)}}if(Rt){p=z.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function bp(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;X||Et(),$||(X(),$=!0),ht.add(c,o),o.v=0}}function Rh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Na(m(o.Fa,o),Rp(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Sp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Na(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),Ml(this),Sp(this))};function Ih(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Sp(o){o.g=new Ti(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Hn(o.qa);Ot(c,"RID","rpc"),Ot(c,"SID",o.K),Ot(c,"AID",o.T),Ot(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ot(c,"TO",o.ja),Ot(c,"TYPE","xmlhttp"),La(o,c),o.m&&o.o&&Sh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=xl(Hn(c)),f.m=null,f.P=!0,Zg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Ml(this),Rh(this),Oe(19))};function Pl(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function wp(o,c){var f=null;if(o.g==c){Pl(o),Ih(o),o.g=null;var p=2}else if(Ah(o.h,c))f=c.D,ip(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;p=Sl(),kt(p,new Yg(p,f)),kl(o)}else bp(o);else if(N=c.s,N==3||N==0&&0<c.X||!(p==1&&VS(o,c)||p==2&&Rh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:wr(o,5);break;case 4:wr(o,10);break;case 3:wr(o,6);break;default:wr(o,2)}}}function Rp(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function wr(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const N=!p;p=new Sr(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Cl(p,"https"),xl(p),N?RS(p.toString(),f):IS(p.toString(),f)}else Oe(2);o.G=0,o.l&&o.l.sa(c),Ip(o),Ep(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Ip(o){if(o.G=0,o.ka=[],o.l){const c=rp(o.h);(c.length!=0||o.i.length!=0)&&(M(o.ka,c),M(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function Cp(o,c,f){var p=f instanceof Sr?Hn(f):new Sr(f);if(p.g!="")c&&(p.g=c+"."+p.g),Nl(p,p.s);else{var N=l.location;p=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var V=new Sr(null);p&&Cl(V,p),c&&(V.g=c),N&&Nl(V,N),f&&(V.l=f),p=V}return f=o.D,c=o.ya,f&&c&&Ot(p,f,c),Ot(p,"VER",o.la),La(o,p),p}function Np(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ht(new Dl({eb:f})):new Ht(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function xp(){}e=xp.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ul(){}Ul.prototype.g=function(o,c){return new Fe(o,c)};function Fe(o,c){ft.call(this),this.g=new vp(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new as(this)}x(Fe,ft),Fe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fe.prototype.close=function(){wh(this.g)},Fe.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=dh(o),o=f);c.i.push(new pS(c.Ya++,o)),c.G==3&&kl(c)},Fe.prototype.N=function(){this.g.l=null,delete this.j,wh(this.g),delete this.g,Fe.aa.N.call(this)};function Dp(o){gh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}x(Dp,gh);function Op(){ph.call(this),this.status=1}x(Op,ph);function as(o){this.g=o}x(as,xp),as.prototype.ua=function(){kt(this.g,"a")},as.prototype.ta=function(o){kt(this.g,new Dp(o))},as.prototype.sa=function(o){kt(this.g,new Op)},as.prototype.ra=function(){kt(this.g,"b")},Ul.prototype.createWebChannel=Ul.prototype.g,Fe.prototype.send=Fe.prototype.o,Fe.prototype.open=Fe.prototype.m,Fe.prototype.close=Fe.prototype.close,X0=function(){return new Ul},K0=function(){return Sl()},Y0=Ar,bd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wl.NO_ERROR=0,wl.TIMEOUT=8,wl.HTTP_ERROR=6,vu=wl,Kg.COMPLETE="complete",Q0=Kg,Hg.EventType=Ia,Ia.OPEN="a",Ia.CLOSE="b",Ia.ERROR="c",Ia.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Za=Hg,Ht.prototype.listenOnce=Ht.prototype.L,Ht.prototype.getLastError=Ht.prototype.Ka,Ht.prototype.getLastErrorCode=Ht.prototype.Ba,Ht.prototype.getStatus=Ht.prototype.Z,Ht.prototype.getResponseJson=Ht.prototype.Oa,Ht.prototype.getResponseText=Ht.prototype.oa,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Ha,G0=Ht}).apply(typeof tu<"u"?tu:typeof self<"u"?self:typeof window<"u"?window:{});const p_="@firebase/firestore",y_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ce.UNAUTHENTICATED=new Ce(null),Ce.GOOGLE_CREDENTIALS=new Ce("google-credentials-uid"),Ce.FIRST_PARTY=new Ce("first-party-uid"),Ce.MOCK_USER=new Ce("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let va="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new Fm("@firebase/firestore");function ms(){return Gr.logLevel}function H(e,...t){if(Gr.logLevel<=ot.DEBUG){const n=t.map(Ym);Gr.debug(`Firestore (${va}): ${e}`,...n)}}function ci(e,...t){if(Gr.logLevel<=ot.ERROR){const n=t.map(Ym);Gr.error(`Firestore (${va}): ${e}`,...n)}}function ra(e,...t){if(Gr.logLevel<=ot.WARN){const n=t.map(Ym);Gr.warn(`Firestore (${va}): ${e}`,...n)}}function Ym(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,$0(e,i,n)}function $0(e,t,n){let i=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ci(i),new Error(i)}function gt(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||$0(t,r,i)}function tt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends pi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class yI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ce.UNAUTHENTICATED))}shutdown(){}}class _I{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vI{constructor(t){this.t=t,this.currentUser=Ce.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){gt(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ri,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ri)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(gt(typeof i.accessToken=="string",31837,{l:i}),new Z0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return gt(t===null||typeof t=="string",2055,{h:t}),new Ce(t)}}class EI{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Ce.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TI{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new EI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Ce.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class __{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){gt(this.o===void 0,3512);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new __(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(gt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new __(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=bI(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function lt(e,t){return e<t?-1:e>t?1:0}function Sd(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return pf(r)===pf(s)?lt(r,s):pf(r)?1:-1}return lt(e.length,t.length)}const SI=55296,wI=57343;function pf(e){const t=e.charCodeAt(0);return t>=SI&&t<=wI}function sa(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="__name__";class Rn{constructor(t,n,i){n===void 0?n=0:n>t.length&&Y(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Y(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Rn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Rn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=Rn.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return lt(t.length,n.length)}static compareSegments(t,n){const i=Rn.isNumericId(t),r=Rn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Rn.extractNumericId(t).compare(Rn.extractNumericId(n)):Sd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return tr.fromString(t.substring(4,t.length-2))}}class wt extends Rn{construct(t,n,i){return new wt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new B(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new wt(n)}static emptyPath(){return new wt([])}}const RI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ve extends Rn{construct(t,n,i){return new ve(t,n,i)}static isValidIdentifier(t){return RI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ve.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v_}static keyField(){return new ve([v_])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new B(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new B(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new B(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ve(n)}static emptyPath(){return new ve([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.path=t}static fromPath(t){return new Q(wt.fromString(t))}static fromName(t){return new Q(wt.fromString(t).popFirst(5))}static empty(){return new Q(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&wt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return wt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Q(new wt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(e,t,n){if(!n)throw new B(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function II(e,t,n,i){if(t===!0&&i===!0)throw new B(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function E_(e){if(!Q.isDocumentKey(e))throw new B(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function T_(e){if(Q.isDocumentKey(e))throw new B(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function J0(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Gc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Y(12329,{type:typeof e})}function en(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new B(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gc(e);throw new B(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(e,t){const n={typeString:e};return t&&(n.value=t),n}function fl(e,t){if(!J0(e))throw new B(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new B(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=-62135596800,b_=1e6;class Vt{static now(){return Vt.fromMillis(Date.now())}static fromDate(t){return Vt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*b_);return new Vt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new B(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<A_)throw new B(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new B(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/b_}_compareTo(t){return this.seconds===t.seconds?lt(this.nanoseconds,t.nanoseconds):lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(fl(t,Vt._jsonSchema))return new Vt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-A_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Vt._jsonSchemaVersion="firestore/timestamp/1.0",Vt._jsonSchema={type:te("string",Vt._jsonSchemaVersion),seconds:te("number"),nanoseconds:te("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(t){return new Z(t)}static min(){return new Z(new Vt(0,0))}static max(){return new Z(new Vt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=-1;function CI(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(i===1e9?new Vt(n+1,0):new Vt(n,i));return new or(r,Q.empty(),t)}function NI(e){return new or(e.readTime,e.key,jo)}class or{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new or(Z.min(),Q.empty(),jo)}static max(){return new or(Z.max(),Q.empty(),jo)}}function xI(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Q.comparator(e.documentKey,t.documentKey),n!==0?n:lt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==DI)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(r=>r?P.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new P((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new P((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function VI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ta(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Qc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=-1;function dl(e){return e==null}function lc(e){return e===0&&1/e==-1/0}function MI(e){return typeof e=="number"&&Number.isInteger(e)&&!lc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="";function kI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=S_(t)),t=PI(e.get(n),t);return S_(t)}function PI(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case tA:n+="";break;default:n+=s}}return n}function S_(e){return e+tA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function pr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function eA(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t,n){this.comparator=t,this.root=n||ye.EMPTY}insert(t,n){return new Bt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ye.BLACK,null,null))}remove(t){return new Bt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ye.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new eu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new eu(this.root,t,this.comparator,!1)}getReverseIterator(){return new eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new eu(this.root,t,this.comparator,!0)}}class eu{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ye{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??ye.RED,this.left=r??ye.EMPTY,this.right=s??ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new ye(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ye.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ye.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Y(27949);return t+(this.isRed()?0:1)}}ye.EMPTY=null,ye.RED=!0,ye.BLACK=!1;ye.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new ye(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t){this.comparator=t,this.data=new Bt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new R_(this.data.getIterator())}getIteratorFrom(t){return new R_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof se)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new se(this.comparator);return n.data=t,n}}class R_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.fields=t,t.sort(ve.comparator)}static empty(){return new $e([])}unionWith(t){let n=new se(ve.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new $e(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return sa(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nA("Invalid base64 string: "+s):s}}(t);return new Ae(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new Ae(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ae.EMPTY_BYTE_STRING=new Ae("");const UI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(e){if(gt(!!e,39018),typeof e=="string"){let t=0;const n=UI.exec(e);if(gt(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:$t(e.seconds),nanos:$t(e.nanos)}}function $t(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ur(e){return typeof e=="string"?Ae.fromBase64String(e):Ae.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="server_timestamp",rA="__type__",sA="__previous_value__",aA="__local_write_time__";function $m(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[rA])==null?void 0:i.stringValue)===iA}function Yc(e){const t=e.mapValue.fields[sA];return $m(t)?Yc(t):t}function zo(e){const t=lr(e.mapValue.fields[aA].timestampValue);return new Vt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const uc="(default)";class Bo{constructor(t,n){this.projectId=t,this.database=n||uc}static empty(){return new Bo("","")}get isDefaultDatabase(){return this.database===uc}isEqual(t){return t instanceof Bo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="__type__",jI="__max__",nu={mapValue:{}},lA="__vector__",cc="value";function cr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?$m(e)?4:BI(e)?9007199254740991:zI(e)?10:11:Y(28295,{value:e})}function Un(e,t){if(e===t)return!0;const n=cr(e);if(n!==cr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zo(e).isEqual(zo(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=lr(r.timestampValue),l=lr(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return ur(r.bytesValue).isEqual(ur(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return $t(r.geoPointValue.latitude)===$t(s.geoPointValue.latitude)&&$t(r.geoPointValue.longitude)===$t(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return $t(r.integerValue)===$t(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=$t(r.doubleValue),l=$t(s.doubleValue);return a===l?lc(a)===lc(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return sa(e.arrayValue.values||[],t.arrayValue.values||[],Un);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(w_(a)!==w_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Un(a[u],l[u])))return!1;return!0}(e,t);default:return Y(52216,{left:e})}}function qo(e,t){return(e.values||[]).find(n=>Un(n,t))!==void 0}function aa(e,t){if(e===t)return 0;const n=cr(e),i=cr(t);if(n!==i)return lt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=$t(s.integerValue||s.doubleValue),u=$t(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return I_(e.timestampValue,t.timestampValue);case 4:return I_(zo(e),zo(t));case 5:return Sd(e.stringValue,t.stringValue);case 6:return function(s,a){const l=ur(s),u=ur(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=lt(l[h],u[h]);if(d!==0)return d}return lt(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=lt($t(s.latitude),$t(a.latitude));return l!==0?l:lt($t(s.longitude),$t(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return C_(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,_,x,O;const l=s.fields||{},u=a.fields||{},h=(m=l[cc])==null?void 0:m.arrayValue,d=(_=u[cc])==null?void 0:_.arrayValue,g=lt(((x=h==null?void 0:h.values)==null?void 0:x.length)||0,((O=d==null?void 0:d.values)==null?void 0:O.length)||0);return g!==0?g:C_(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===nu.mapValue&&a===nu.mapValue)return 0;if(s===nu.mapValue)return 1;if(a===nu.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=Sd(u[g],d[g]);if(m!==0)return m;const _=aa(l[u[g]],h[d[g]]);if(_!==0)return _}return lt(u.length,d.length)}(e.mapValue,t.mapValue);default:throw Y(23264,{he:n})}}function I_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return lt(e,t);const n=lr(e),i=lr(t),r=lt(n.seconds,i.seconds);return r!==0?r:lt(n.nanos,i.nanos)}function C_(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=aa(n[r],i[r]);if(s)return s}return lt(n.length,i.length)}function oa(e){return wd(e)}function wd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=lr(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ur(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Q.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=wd(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${wd(n.fields[a])}`;return r+"}"}(e.mapValue):Y(61005,{value:e})}function Eu(e){switch(cr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Yc(e);return t?16+Eu(t):16;case 5:return 2*e.stringValue.length;case 6:return ur(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Eu(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return pr(i.fields,(s,a)=>{r+=s.length+Eu(a)}),r}(e.mapValue);default:throw Y(13486,{value:e})}}function N_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Rd(e){return!!e&&"integerValue"in e}function Zm(e){return!!e&&"arrayValue"in e}function x_(e){return!!e&&"nullValue"in e}function D_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Tu(e){return!!e&&"mapValue"in e}function zI(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[oA])==null?void 0:i.stringValue)===lA}function _o(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return pr(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=_o(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=_o(e.arrayValue.values[n]);return t}return{...e}}function BI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===jI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.value=t}static empty(){return new Me({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Tu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=_o(n)}setAll(t){let n=ve.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=_o(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());Tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Un(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];Tu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){pr(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Me(_o(this.value))}}function uA(e){const t=[];return pr(e.fields,(n,i)=>{const r=new ve([n]);if(Tu(i)){const s=uA(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new $e(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ce(t,0,Z.min(),Z.min(),Z.min(),Me.empty(),0)}static newFoundDocument(t,n,i,r){return new ce(t,1,n,Z.min(),i,r,0)}static newNoDocument(t,n){return new ce(t,2,n,Z.min(),Z.min(),Me.empty(),0)}static newUnknownDocument(t,n){return new ce(t,3,n,Z.min(),Z.min(),Me.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Me.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Me.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ce&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ce(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,n){this.position=t,this.inclusive=n}}function O_(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=Q.comparator(Q.fromName(a.referenceValue),n.key):i=aa(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function V_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Un(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(t,n="asc"){this.field=t,this.dir=n}}function qI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{}class Jt extends cA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new FI(t,n,i):n==="array-contains"?new YI(t,i):n==="in"?new KI(t,i):n==="not-in"?new XI(t,i):n==="array-contains-any"?new $I(t,i):new Jt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new GI(t,i):new QI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(aa(n,this.value)):n!==null&&cr(this.value)===cr(n)&&this.matchesComparison(aa(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends cA{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new An(t,n)}matches(t){return hA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hA(e){return e.op==="and"}function fA(e){return HI(e)&&hA(e)}function HI(e){for(const t of e.filters)if(t instanceof An)return!1;return!0}function Id(e){if(e instanceof Jt)return e.field.canonicalString()+e.op.toString()+oa(e.value);if(fA(e))return e.filters.map(t=>Id(t)).join(",");{const t=e.filters.map(n=>Id(n)).join(",");return`${e.op}(${t})`}}function dA(e,t){return e instanceof Jt?function(i,r){return r instanceof Jt&&i.op===r.op&&i.field.isEqual(r.field)&&Un(i.value,r.value)}(e,t):e instanceof An?function(i,r){return r instanceof An&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&dA(a,r.filters[l]),!0):!1}(e,t):void Y(19439)}function mA(e){return e instanceof Jt?function(n){return`${n.field.canonicalString()} ${n.op} ${oa(n.value)}`}(e):e instanceof An?function(n){return n.op.toString()+" {"+n.getFilters().map(mA).join(" ,")+"}"}(e):"Filter"}class FI extends Jt{constructor(t,n,i){super(t,n,i),this.key=Q.fromName(i.referenceValue)}matches(t){const n=Q.comparator(t.key,this.key);return this.matchesComparison(n)}}class GI extends Jt{constructor(t,n){super(t,"in",n),this.keys=gA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class QI extends Jt{constructor(t,n){super(t,"not-in",n),this.keys=gA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function gA(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class YI extends Jt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Zm(n)&&qo(n.arrayValue,this.value)}}class KI extends Jt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&qo(this.value.arrayValue,n)}}class XI extends Jt{constructor(t,n){super(t,"not-in",n)}matches(t){if(qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qo(this.value.arrayValue,n)}}class $I extends Jt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Zm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>qo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function M_(e,t=null,n=[],i=[],r=null,s=null,a=null){return new ZI(e,t,n,i,r,s,a)}function Wm(e){const t=tt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Id(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),dl(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>oa(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>oa(i)).join(",")),t.Te=n}return t.Te}function Jm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!qI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!dA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!V_(e.startAt,t.startAt)&&V_(e.endAt,t.endAt)}function Cd(e){return Q.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function WI(e,t,n,i,r,s,a,l){return new Aa(e,t,n,i,r,s,a,l)}function Kc(e){return new Aa(e)}function k_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function pA(e){return e.collectionGroup!==null}function vo(e){const t=tt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new se(ve.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Ho(s,i))}),n.has(ve.keyField().canonicalString())||t.Ie.push(new Ho(ve.keyField(),i))}return t.Ie}function On(e){const t=tt(e);return t.Ee||(t.Ee=JI(t,vo(e))),t.Ee}function JI(e,t){if(e.limitType==="F")return M_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Ho(r.field,s)});const n=e.endAt?new hc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new hc(e.startAt.position,e.startAt.inclusive):null;return M_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Nd(e,t){const n=e.filters.concat([t]);return new Aa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function xd(e,t,n){return new Aa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Xc(e,t){return Jm(On(e),On(t))&&e.limitType===t.limitType}function yA(e){return`${Wm(On(e))}|lt:${e.limitType}`}function gs(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>mA(r)).join(", ")}]`),dl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>oa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>oa(r)).join(",")),`Target(${i})`}(On(e))}; limitType=${e.limitType})`}function $c(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of vo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=O_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,vo(i),r)||i.endAt&&!function(a,l,u){const h=O_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,vo(i),r))}(e,t)}function tC(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function _A(e){return(t,n)=>{let i=!1;for(const r of vo(e)){const s=eC(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function eC(e,t,n){const i=e.field.isKeyField()?Q.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?aa(u,h):Y(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Y(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){pr(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return eA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=new Bt(Q.comparator);function hi(){return nC}const vA=new Bt(Q.comparator);function Wa(...e){let t=vA;for(const n of e)t=t.insert(n.key,n);return t}function EA(e){let t=vA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Dr(){return Eo()}function TA(){return Eo()}function Eo(){return new Jr(e=>e.toString(),(e,t)=>e.isEqual(t))}const iC=new Bt(Q.comparator),rC=new se(Q.comparator);function ut(...e){let t=rC;for(const n of e)t=t.add(n);return t}const sC=new se(lt);function aC(){return sC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lc(t)?"-0":t}}function AA(e){return{integerValue:""+e}}function oC(e,t){return MI(t)?AA(t):tg(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this._=void 0}}function lC(e,t,n){return e instanceof Fo?function(r,s){const a={fields:{[rA]:{stringValue:iA},[aA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&$m(s)&&(s=Yc(s)),s&&(a.fields[sA]=s),{mapValue:a}}(n,t):e instanceof Go?SA(e,t):e instanceof Qo?wA(e,t):function(r,s){const a=bA(r,s),l=P_(a)+P_(r.Ae);return Rd(a)&&Rd(r.Ae)?AA(l):tg(r.serializer,l)}(e,t)}function uC(e,t,n){return e instanceof Go?SA(e,t):e instanceof Qo?wA(e,t):n}function bA(e,t){return e instanceof fc?function(i){return Rd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class Fo extends Zc{}class Go extends Zc{constructor(t){super(),this.elements=t}}function SA(e,t){const n=RA(t);for(const i of e.elements)n.some(r=>Un(r,i))||n.push(i);return{arrayValue:{values:n}}}class Qo extends Zc{constructor(t){super(),this.elements=t}}function wA(e,t){let n=RA(t);for(const i of e.elements)n=n.filter(r=>!Un(r,i));return{arrayValue:{values:n}}}class fc extends Zc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function P_(e){return $t(e.integerValue||e.doubleValue)}function RA(e){return Zm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(t,n){this.field=t,this.transform=n}}function hC(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Go&&r instanceof Go||i instanceof Qo&&r instanceof Qo?sa(i.elements,r.elements,Un):i instanceof fc&&r instanceof fc?Un(i.Ae,r.Ae):i instanceof Fo&&r instanceof Fo}(e.transform,t.transform)}class fC{constructor(t,n){this.version=t,this.transformResults=n}}class Ee{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ee}static exists(t){return new Ee(void 0,t)}static updateTime(t){return new Ee(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Au(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Wc{}function IA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Jc(e.key,Ee.none()):new ml(e.key,e.data,Ee.none());{const n=e.data,i=Me.empty();let r=new se(ve.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new yr(e.key,i,new $e(r.toArray()),Ee.none())}}function dC(e,t,n){e instanceof ml?function(r,s,a){const l=r.value.clone(),u=L_(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof yr?function(r,s,a){if(!Au(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=L_(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(CA(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function To(e,t,n,i){return e instanceof ml?function(s,a,l,u){if(!Au(s.precondition,a))return l;const h=s.value.clone(),d=j_(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof yr?function(s,a,l,u){if(!Au(s.precondition,a))return l;const h=j_(s.fieldTransforms,u,a),d=a.data;return d.setAll(CA(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(s,a,l){return Au(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function mC(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=bA(i.transform,r||null);s!=null&&(n===null&&(n=Me.empty()),n.set(i.field,s))}return n||null}function U_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&sa(i,r,(s,a)=>hC(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ml extends Wc{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class yr extends Wc{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function CA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function L_(e,t,n){const i=new Map;gt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,uC(a,l,n[r]))}return i}function j_(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,lC(s,a,t))}return i}class Jc extends Wc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NA extends Wc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&dC(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=To(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=To(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=TA();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=IA(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ut())}isEqual(t){return this.batchId===t.batchId&&sa(this.mutations,t.mutations,(n,i)=>U_(n,i))&&sa(this.baseMutations,t.baseMutations,(n,i)=>U_(n,i))}}class eg{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){gt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return iC}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new eg(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,dt;function xA(e){switch(e){case k.OK:return Y(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return Y(15467,{code:e})}}function DA(e){if(e===void 0)return ci("GRPC error has no .code"),k.UNKNOWN;switch(e){case Zt.OK:return k.OK;case Zt.CANCELLED:return k.CANCELLED;case Zt.UNKNOWN:return k.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return k.INTERNAL;case Zt.UNAVAILABLE:return k.UNAVAILABLE;case Zt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Zt.NOT_FOUND:return k.NOT_FOUND;case Zt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Zt.ABORTED:return k.ABORTED;case Zt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Zt.DATA_LOSS:return k.DATA_LOSS;default:return Y(39323,{code:e})}}(dt=Zt||(Zt={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new tr([4294967295,4294967295],0);function z_(e){const t=_C().encode(e),n=new F0;return n.update(t),new Uint8Array(n.digest())}function B_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new tr([n,i],0),new tr([r,s],0)]}class ng{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ja(`Invalid padding: ${n}`);if(i<0)throw new Ja(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ja(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Ja(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=tr.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(tr.fromNumber(i)));return r.compare(vC)===1&&(r=new tr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=z_(t),[i,r]=B_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new ng(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=z_(t),[i,r]=B_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,gl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new th(Z.min(),r,new Bt(lt),hi(),ut())}}class gl{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new gl(i,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class OA{constructor(t,n){this.targetId=t,this.Ce=n}}class VA{constructor(t,n,i=Ae.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class q_{constructor(){this.ve=0,this.Fe=H_(),this.Me=Ae.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ut(),n=ut(),i=ut();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Y(38017,{changeType:s})}}),new gl(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=H_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EC{constructor(t){this.Ge=t,this.ze=new Map,this.je=hi(),this.Je=iu(),this.He=iu(),this.Ye=new Bt(lt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Y(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(Cd(s))if(i===0){const a=new Q(s.path);this.et(n,a,ce.newNoDocument(a,Z.min()))}else gt(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=ur(i).toUint8Array()}catch(u){if(u instanceof nA)return ra("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new ng(a,r,s)}catch(u){return ra(u instanceof Ja?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&Cd(l.target)){const u=new Q(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,ce.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ut();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new th(t,n,this.Ye,this.je,i);return this.je=hi(),this.Je=iu(),this.He=iu(),this.Ye=new Bt(lt),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new q_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new se(lt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new se(lt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new q_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function iu(){return new Bt(Q.comparator)}function H_(){return new Bt(Q.comparator)}const TC={asc:"ASCENDING",desc:"DESCENDING"},AC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bC={and:"AND",or:"OR"};class SC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Dd(e,t){return e.useProto3Json||dl(t)?t:{value:t}}function dc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function MA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function wC(e,t){return dc(e,t.toTimestamp())}function nn(e){return gt(!!e,49232),Z.fromTimestamp(function(n){const i=lr(n);return new Vt(i.seconds,i.nanos)}(e))}function ig(e,t){return Od(e,t).canonicalString()}function Od(e,t){const n=function(r){return new wt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function kA(e){const t=wt.fromString(e);return gt(BA(t),10190,{key:t.toString()}),t}function mc(e,t){return ig(e.databaseId,t.path)}function Ao(e,t){const n=kA(t);if(n.get(1)!==e.databaseId.projectId)throw new B(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new B(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Q(UA(n))}function PA(e,t){return ig(e.databaseId,t)}function RC(e){const t=kA(e);return t.length===4?wt.emptyPath():UA(t)}function Vd(e){return new wt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function UA(e){return gt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function F_(e,t,n){return{name:mc(e,t),fields:n.value.mapValue.fields}}function IC(e,t){return"found"in t?function(i,r){gt(!!r.found,43571),r.found.name,r.found.updateTime;const s=Ao(i,r.found.name),a=nn(r.found.updateTime),l=r.found.createTime?nn(r.found.createTime):Z.min(),u=new Me({mapValue:{fields:r.found.fields}});return ce.newFoundDocument(s,a,l,u)}(e,t):"missing"in t?function(i,r){gt(!!r.missing,3894),gt(!!r.readTime,22933);const s=Ao(i,r.missing),a=nn(r.readTime);return ce.newNoDocument(s,a)}(e,t):Y(7234,{result:t})}function CC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(gt(d===void 0||typeof d=="string",58123),Ae.fromBase64String(d||"")):(gt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ae.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?k.UNKNOWN:DA(h.code);return new B(d,h.message||"")}(a);n=new VA(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ao(e,i.document.name),s=nn(i.document.updateTime),a=i.document.createTime?nn(i.document.createTime):Z.min(),l=new Me({mapValue:{fields:i.document.fields}}),u=ce.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new bu(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Ao(e,i.document),s=i.readTime?nn(i.readTime):Z.min(),a=ce.newNoDocument(r,s),l=i.removedTargetIds||[];n=new bu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Ao(e,i.document),s=i.removedTargetIds||[];n=new bu([],s,r,null)}else{if(!("filter"in t))return Y(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new yC(r,s),l=i.targetId;n=new OA(l,a)}}return n}function LA(e,t){let n;if(t instanceof ml)n={update:F_(e,t.key,t.value)};else if(t instanceof Jc)n={delete:mc(e,t.key)};else if(t instanceof yr)n={update:F_(e,t.key,t.data),updateMask:UC(t.fieldMask)};else{if(!(t instanceof NA))return Y(16599,{Vt:t.type});n={verify:mc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Fo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Go)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Qo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof fc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:wC(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y(27497)}(e,t.precondition)),n}function NC(e,t){return e&&e.length>0?(gt(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?nn(r.updateTime):nn(s);return a.isEqual(Z.min())&&(a=nn(s)),new fC(a,r.transformResults||[])}(n,t))):[]}function xC(e,t){return{documents:[PA(e,t.path)]}}function DC(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=PA(e,r);const s=function(h){if(h.length!==0)return zA(An.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:ps(m.field),direction:MC(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Dd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function OC(e){let t=RC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){gt(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(g){const m=jA(g);return m instanceof An&&fA(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(x){return new Ho(ys(x.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,dl(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,_=g.values||[];return new hc(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,_=g.values||[];return new hc(_,m)}(n.endAt)),WI(t,r,a,s,l,"F",u,h)}function VC(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function jA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ys(n.unaryFilter.field);return Jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ys(n.unaryFilter.field);return Jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ys(n.unaryFilter.field);return Jt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ys(n.unaryFilter.field);return Jt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(e):e.fieldFilter!==void 0?function(n){return Jt.create(ys(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return An.create(n.compositeFilter.filters.map(i=>jA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(e):Y(30097,{filter:e})}function MC(e){return TC[e]}function kC(e){return AC[e]}function PC(e){return bC[e]}function ps(e){return{fieldPath:e.canonicalString()}}function ys(e){return ve.fromServerFormat(e.fieldPath)}function zA(e){return e instanceof Jt?function(n){if(n.op==="=="){if(D_(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NAN"}};if(x_(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(D_(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NOT_NAN"}};if(x_(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ps(n.field),op:kC(n.op),value:n.value}}}(e):e instanceof An?function(n){const i=n.getFilters().map(r=>zA(r));return i.length===1?i[0]:{compositeFilter:{op:PC(n.op),filters:i}}}(e):Y(54877,{filter:e})}function UC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function BA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(t,n,i,r,s=Z.min(),a=Z.min(),l=Ae.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new qi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(t){this.yt=t}}function jC(e){const t=OC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?xd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.Cn=new BC}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(or.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(or.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class BC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new se(wt.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new se(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qA=41943040;class ze{static withCacheSize(t){return new ze(t,ze.DEFAULT_COLLECTION_PERCENTILE,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ze.DEFAULT_COLLECTION_PERCENTILE=10,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ze.DEFAULT=new ze(qA,ze.DEFAULT_COLLECTION_PERCENTILE,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ze.DISABLED=new ze(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new la(0)}static cr(){return new la(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="LruGarbageCollector",qC=1048576;function Y_([e,t],[n,i]){const r=lt(e,n);return r===0?lt(t,i):r}class HC{constructor(t){this.Ir=t,this.buffer=new se(Y_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Y_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(Q_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ta(n)?H(Q_,"Ignoring IndexedDB error during garbage collection: ",n):await Ea(n)}await this.Vr(3e5)})}}class GC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(Qc.ce);const i=new HC(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(G_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),G_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(t,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),ms()<=ot.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function QC(e,t){return new GC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.changes=new Jr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ce.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&To(i.mutation,r,$e.empty(),Vt.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ut()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ut()){const r=Dr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=Wa();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=Dr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ut()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=hi();const a=Eo(),l=function(){return Eo()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof yr)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),To(d.mutation,h,d.mutation.getFieldMask(),Vt.now())):a.set(h.key,$e.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new KC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=Eo();let r=new Bt((a,l)=>a-l),s=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||$e.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(r.get(l.batchId)||ut()).add(u);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=TA();d.forEach(m=>{if(!s.has(m)){const _=IA(n.get(m),i.get(m));_!==null&&g.set(m,_),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):pA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):P.resolve(Dr());let l=jo,u=s;return a.next(h=>P.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,ut())).next(d=>({batchId:l,changes:EA(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Q(n)).next(i=>{let r=Wa();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=Wa();return this.indexManager.getCollectionParents(t,s).next(l=>P.forEach(l,u=>{const h=function(g,m){return new Aa(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,ce.newInvalidDocument(d)))});let l=Wa();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&To(d.mutation,h,$e.empty(),Vt.now()),$c(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:nn(r.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:jC(r.bundledQuery),readTime:nn(r.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.overlays=new Bt(Q.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Dr();return P.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const r=Dr(),s=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return P.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Bt((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=Dr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Dr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return P.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new pC(n,i));let s=this.qr.get(n);s===void 0&&(s=ut(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.sessionToken=Ae.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(){this.Qr=new se(oe.$r),this.Ur=new se(oe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new oe(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new oe(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new Q(new wt([])),i=new oe(n,t),r=new oe(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Q(new wt([])),i=new oe(n,t),r=new oe(n,t+1);let s=ut();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new oe(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class oe{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Q.comparator(t.key,n.key)||lt(t.Yr,n.Yr)}static Kr(t,n){return lt(t.Yr,n.Yr)||Q.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new se(oe.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new gC(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new oe(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?Xm:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new oe(n,0),r=new oe(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new se(lt);return n.forEach(r=>{const s=new oe(r,0),a=new oe(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;Q.isDocumentKey(s)||(s=s.child(""));const a=new oe(new Q(s),0);let l=new se(lt);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){gt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,r=>{const s=new oe(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new oe(n,0),r=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(t){this.ri=t,this.docs=function(){return new Bt(Q.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():ce.newInvalidDocument(n))}getEntries(t,n){let i=hi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ce.newInvalidDocument(r))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=hi();const a=n.path,l=new Q(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||xI(NI(d),i)<=0||(r.has(d.key)||$c(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(t,n,i,r){Y(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new eN(this)}getSize(t){return P.resolve(this.size)}}class eN extends YC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(t){this.persistence=t,this.si=new Jr(n=>Wm(n),Jm),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new rg,this.targetCount=0,this.ai=la.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new la(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),P.waitFor(s).next(()=>r)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(t,n){this.ui={},this.overlays={},this.ci=new Qc(0),this.li=!1,this.li=!0,this.hi=new WC,this.referenceDelegate=t(this),this.Pi=new nN(this),this.indexManager=new zC,this.remoteDocumentCache=function(r){return new tN(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new LC(n),this.Ii=new $C(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new ZC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new JC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){H("MemoryPersistence","Starting transaction:",t);const r=new iN(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class iN extends OI{constructor(t){super(),this.currentSequenceNumber=t}}class sg{constructor(t){this.persistence=t,this.Ri=new rg,this.Vi=null}static mi(t){return new sg(t)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const r=Q.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,Z.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class gc{constructor(t,n){this.persistence=t,this.pi=new Jr(i=>kI(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=QC(this,n)}static mi(t,n){return new gc(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?P.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,Z.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Eu(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return P.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=ut(),r=ut();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ag(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ZR()?8:VI(De())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new rN;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(ms()<=ot.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(ms()<=ot.DEBUG&&H("QueryEngine","Query:",gs(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(ms()<=ot.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,On(n))):P.resolve())}ys(t,n){if(k_(n))return P.resolve(null);let i=On(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=xd(n,null,"F"),i=On(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=ut(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,xd(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return k_(n)||r.isEqual(Z.min())?P.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?P.resolve(null):(ms()<=ot.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gs(n)),this.vs(t,a,n,CI(r,jo)).next(l=>l))})}Ds(t,n){let i=new se(_A(t));return n.forEach((r,s)=>{$c(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return ms()<=ot.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",gs(n)),this.ps.getDocumentsMatchingQuery(t,n,or.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="LocalStore",aN=3e8;class oN{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Bt(lt),this.xs=new Jr(s=>Wm(s),Jm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new XC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function lN(e,t,n,i){return new oN(e,t,n,i)}async function FA(e,t){const n=tt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=ut();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function uN(e,t){const n=tt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let _=P.resolve();return m.forEach(x=>{_=_.next(()=>d.getEntry(u,x)).next(O=>{const M=h.docVersions.get(x);gt(M!==null,48541),O.version.compareTo(M)<0&&(g.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),d.addEntry(O)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ut();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function GA(e){const t=tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function cN(e,t){const n=tt(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=r.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,g)));let _=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(Ae.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(g,_),function(O,M,A){return O.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=aN?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(s,_))});let u=hi(),h=ut();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(hN(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual(Z.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(g=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function hN(e,t,n){let i=ut(),r=ut();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=hi();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(og,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function fN(e,t){const n=tt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Xm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function dN(e,t){const n=tt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,P.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new qi(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Md(e,t,n){const i=tt(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Ta(a))throw a;H(og,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function K_(e,t,n){const i=tt(e);let r=Z.min(),s=ut();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=tt(u),m=g.xs.get(d);return m!==void 0?P.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,On(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:Z.min(),n?s:ut())).next(l=>(mN(i,tC(t),l),{documents:l,Qs:s})))}function mN(e,t,n){let i=e.Os.get(t)||Z.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class X_{constructor(){this.activeTargetIds=aC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class gN{constructor(){this.Mo=new X_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new X_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="ConnectivityMonitor";class Z_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H($_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H($_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru=null;function kd(){return ru===null?ru=function(){return 268435456+Math.round(2147483648*Math.random())}():ru++,"0x"+ru.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="RestConnection",yN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _N{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===uc?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=kd(),l=this.zo(t,n.toUriEncodedString());H(yf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=ya(h);return this.Jo(t,l,u,i,d).then(g=>(H(yf,`Received RPC '${t}' ${a}: `,g),g),g=>{throw ra(yf,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+va}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=yN[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re="WebChannelConnection";class EN extends _N{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=kd();return new Promise((l,u)=>{const h=new G0;h.setWithCredentials(!0),h.listenOnce(Q0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case vu.NO_ERROR:const g=h.getResponseJson();H(Re,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case vu.TIMEOUT:H(Re,`RPC '${t}' ${a} timed out`),u(new B(k.DEADLINE_EXCEEDED,"Request time out"));break;case vu.HTTP_ERROR:const m=h.getStatus();if(H(Re,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const x=_==null?void 0:_.error;if(x&&x.status&&x.message){const O=function(A){const v=A.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(v)>=0?v:k.UNKNOWN}(x.status);u(new B(O,x.message))}else u(new B(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new B(k.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(Re,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);H(Re,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=kd(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=X0(),l=K0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");H(Re,`Creating RPC '${t}' stream ${r}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,_=!1;const x=new vN({Yo:M=>{_?H(Re,`Not sending because RPC '${t}' stream ${r} is closed:`,M):(m||(H(Re,`Opening RPC '${t}' stream ${r} transport.`),g.open(),m=!0),H(Re,`RPC '${t}' stream ${r} sending:`,M),g.send(M))},Zo:()=>g.close()}),O=(M,A,v)=>{M.listen(A,R=>{try{v(R)}catch(D){setTimeout(()=>{throw D},0)}})};return O(g,Za.EventType.OPEN,()=>{_||(H(Re,`RPC '${t}' stream ${r} transport opened.`),x.o_())}),O(g,Za.EventType.CLOSE,()=>{_||(_=!0,H(Re,`RPC '${t}' stream ${r} transport closed`),x.a_(),this.E_(g))}),O(g,Za.EventType.ERROR,M=>{_||(_=!0,ra(Re,`RPC '${t}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),x.a_(new B(k.UNAVAILABLE,"The operation could not be completed")))}),O(g,Za.EventType.MESSAGE,M=>{var A;if(!_){const v=M.data[0];gt(!!v,16349);const R=v,D=(R==null?void 0:R.error)||((A=R[0])==null?void 0:A.error);if(D){H(Re,`RPC '${t}' stream ${r} received error:`,D);const L=D.status;let q=function(b){const w=Zt[b];if(w!==void 0)return DA(w)}(L),T=D.message;q===void 0&&(q=k.INTERNAL,T="Unknown error status: "+L+" with message "+D.message),_=!0,x.a_(new B(q,T)),g.close()}else H(Re,`RPC '${t}' stream ${r} received:`,v),x.u_(v)}}),O(l,Y0.STAT_EVENT,M=>{M.stat===bd.PROXY?H(Re,`RPC '${t}' stream ${r} detected buffering proxy`):M.stat===bd.NOPROXY&&H(Re,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function _f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(e){return new SC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="PersistentStream";class QA{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lg(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(ci(n.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new B(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return H(W_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(H(W_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TN extends QA{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=CC(this.serializer,t),i=function(s){if(!("targetChange"in s))return Z.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?nn(a.readTime):Z.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Vd(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Cd(u)?{documents:xC(s,u)}:{query:DC(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=MA(s,a.resumeToken);const h=Dd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Z.min())>0){l.readTime=dc(s,a.snapshotVersion.toTimestamp());const h=Dd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=VC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Vd(this.serializer),n.removeTarget=t,this.q_(n)}}class AN extends QA{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return gt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,gt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){gt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=NC(t.writeResults,t.commitTime),i=nn(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Vd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>LA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{}class SN extends bN{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new B(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,Od(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(k.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Od(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class wN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ci(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="RemoteStore";class RN{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{ts(this)&&(H(Qr,"Restarting streams for network reachability change."),await async function(u){const h=tt(u);h.Ea.add(4),await pl(h),h.Ra.set("Unknown"),h.Ea.delete(4),await nh(h)}(this))})}),this.Ra=new wN(i,r)}}async function nh(e){if(ts(e))for(const t of e.da)await t(!0)}async function pl(e){for(const t of e.da)await t(!1)}function YA(e,t){const n=tt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),fg(n)?hg(n):ba(n).O_()&&cg(n,t))}function ug(e,t){const n=tt(e),i=ba(n);n.Ia.delete(t),i.O_()&&KA(n,t),n.Ia.size===0&&(i.O_()?i.L_():ts(n)&&n.Ra.set("Unknown"))}function cg(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Z.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ba(e).Y_(t)}function KA(e,t){e.Va.Ue(t),ba(e).Z_(t)}function hg(e){e.Va=new EC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),ba(e).start(),e.Ra.ua()}function fg(e){return ts(e)&&!ba(e).x_()&&e.Ia.size>0}function ts(e){return tt(e).Ea.size===0}function XA(e){e.Va=void 0}async function IN(e){e.Ra.set("Online")}async function CN(e){e.Ia.forEach((t,n)=>{cg(e,t)})}async function NN(e,t){XA(e),fg(e)?(e.Ra.ha(t),hg(e)):e.Ra.set("Unknown")}async function xN(e,t,n){if(e.Ra.set("Online"),t instanceof VA&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){H(Qr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await pc(e,i)}else if(t instanceof bu?e.Va.Ze(t):t instanceof OA?e.Va.st(t):e.Va.tt(t),!n.isEqual(Z.min()))try{const i=await GA(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(Ae.EMPTY_BYTE_STRING,d.snapshotVersion)),KA(s,u);const g=new qi(d.target,u,h,d.sequenceNumber);cg(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){H(Qr,"Failed to raise snapshot:",i),await pc(e,i)}}async function pc(e,t,n){if(!Ta(t))throw t;e.Ea.add(1),await pl(e),e.Ra.set("Offline"),n||(n=()=>GA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{H(Qr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await nh(e)})}function $A(e,t){return t().catch(n=>pc(e,n,t))}async function ih(e){const t=tt(e),n=hr(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Xm;for(;DN(t);)try{const r=await fN(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,ON(t,r)}catch(r){await pc(t,r)}ZA(t)&&WA(t)}function DN(e){return ts(e)&&e.Ta.length<10}function ON(e,t){e.Ta.push(t);const n=hr(e);n.O_()&&n.X_&&n.ea(t.mutations)}function ZA(e){return ts(e)&&!hr(e).x_()&&e.Ta.length>0}function WA(e){hr(e).start()}async function VN(e){hr(e).ra()}async function MN(e){const t=hr(e);for(const n of e.Ta)t.ea(n.mutations)}async function kN(e,t,n){const i=e.Ta.shift(),r=eg.from(i,t,n);await $A(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await ih(e)}async function PN(e,t){t&&hr(e).X_&&await async function(i,r){if(function(a){return xA(a)&&a!==k.ABORTED}(r.code)){const s=i.Ta.shift();hr(i).B_(),await $A(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await ih(i)}}(e,t),ZA(e)&&WA(e)}async function J_(e,t){const n=tt(e);n.asyncQueue.verifyOperationInProgress(),H(Qr,"RemoteStore received new credentials");const i=ts(n);n.Ea.add(3),await pl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await nh(n)}async function UN(e,t){const n=tt(e);t?(n.Ea.delete(2),await nh(n)):t||(n.Ea.add(2),await pl(n),n.Ra.set("Unknown"))}function ba(e){return e.ma||(e.ma=function(n,i,r){const s=tt(n);return s.sa(),new TN(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:IN.bind(null,e),t_:CN.bind(null,e),r_:NN.bind(null,e),H_:xN.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),fg(e)?hg(e):e.Ra.set("Unknown")):(await e.ma.stop(),XA(e))})),e.ma}function hr(e){return e.fa||(e.fa=function(n,i,r){const s=tt(n);return s.sa(),new AN(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:VN.bind(null,e),r_:PN.bind(null,e),ta:MN.bind(null,e),na:kN.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await ih(e)):(await e.fa.stop(),e.Ta.length>0&&(H(Qr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new dg(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mg(e,t){if(ci("AsyncQueue",`${t}: ${e}`),Ta(e))return new B(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{static emptySet(t){return new zs(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=Wa(),this.sortedSet=new Bt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof zs)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new zs;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this.ga=new Bt(Q.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Y(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class ua{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ua(t,n,zs.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Xc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class jN{constructor(){this.queries=ev(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=tt(n),s=r.queries;r.queries=ev(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new B(k.ABORTED,"Firestore shutting down"))}}function ev(){return new Jr(e=>yA(e),Xc)}async function JA(e,t){const n=tt(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new LN,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=mg(a,`Initialization of query '${gs(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&gg(n)}async function tb(e,t){const n=tt(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function zN(e,t){const n=tt(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&gg(n)}function BN(e,t,n){const i=tt(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function gg(e){e.Ca.forEach(t=>{t.next()})}var Pd,nv;(nv=Pd||(Pd={})).Ma="default",nv.Cache="cache";class eb{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new ua(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=ua.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Pd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(t){this.key=t}}class ib{constructor(t){this.key=t}}class qN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=_A(t),this.tu=new zs(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new tv,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,g)=>{const m=r.get(d),_=$c(this.query,g)?g:null,x=!!m&&this.mutatedKeys.has(m.key),O=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let M=!1;m&&_?m.data.isEqual(_.data)?x!==O&&(i.track({type:3,doc:_}),M=!0):this.su(m,_)||(i.track({type:2,doc:_}),M=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),M=!0):m&&!_&&(i.track({type:1,doc:m}),M=!0,(u||h)&&(l=!0)),M&&(_?(a=a.add(_),s=O?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(_,x){const O=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:M})}};return O(_)-O(x)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new ua(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ut(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new ib(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new nb(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ut();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return ua.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pg="SyncEngine";class HN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class FN{constructor(t){this.key=t,this.hu=!1}}class GN{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Jr(l=>yA(l),Xc),this.Iu=new Map,this.Eu=new Set,this.du=new Bt(Q.comparator),this.Au=new Map,this.Ru=new rg,this.Vu={},this.mu=new Map,this.fu=la.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function QN(e,t,n=!0){const i=ub(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await rb(i,t,n,!0),r}async function YN(e,t){const n=ub(e);await rb(n,t,!0,!1)}async function rb(e,t,n,i){const r=await dN(e.localStore,On(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await KN(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&YA(e.remoteStore,r),l}async function KN(e,t,n,i,r){e.pu=(g,m,_)=>async function(O,M,A,v){let R=M.view.ru(A);R.Cs&&(R=await K_(O.localStore,M.query,!1).then(({documents:T})=>M.view.ru(T,R)));const D=v&&v.targetChanges.get(M.targetId),L=v&&v.targetMismatches.get(M.targetId)!=null,q=M.view.applyChanges(R,O.isPrimaryClient,D,L);return rv(O,M.targetId,q.au),q.snapshot}(e,g,m,_);const s=await K_(e.localStore,t,!0),a=new qN(t,s.Qs),l=a.ru(s.documents),u=gl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);rv(e,n,h.au);const d=new HN(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function XN(e,t,n){const i=tt(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!Xc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Md(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&ug(i.remoteStore,r.targetId),Ud(i,r.targetId)}).catch(Ea)):(Ud(i,r.targetId),await Md(i.localStore,r.targetId,!0))}async function $N(e,t){const n=tt(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),ug(n.remoteStore,i.targetId))}async function ZN(e,t,n){const i=rx(e);try{const r=await function(a,l){const u=tt(a),h=Vt.now(),d=l.reduce((_,x)=>_.add(x.key),ut());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let x=hi(),O=ut();return u.Ns.getEntries(_,d).next(M=>{x=M,x.forEach((A,v)=>{v.isValidDocument()||(O=O.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,x)).next(M=>{g=M;const A=[];for(const v of l){const R=mC(v,g.get(v.key).overlayedDocument);R!=null&&A.push(new yr(v.key,R,uA(R.value.mapValue),Ee.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,A,l)}).next(M=>{m=M;const A=M.applyToLocalDocumentSet(g,O);return u.documentOverlayCache.saveOverlays(_,M.batchId,A)})}).then(()=>({batchId:m.batchId,changes:EA(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Bt(lt)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await yl(i,r.changes),await ih(i.remoteStore)}catch(r){const s=mg(r,"Failed to persist write");n.reject(s)}}async function sb(e,t){const n=tt(e);try{const i=await cN(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(gt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?gt(a.hu,14607):r.removedDocuments.size>0&&(gt(a.hu,42227),a.hu=!1))}),await yl(n,i,t)}catch(i){await Ea(i)}}function iv(e,t,n){const i=tt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=tt(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&gg(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function WN(e,t,n){const i=tt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Bt(Q.comparator);a=a.insert(s,ce.newNoDocument(s,Z.min()));const l=ut().add(s),u=new th(Z.min(),new Map,new Bt(lt),a,l);await sb(i,u),i.du=i.du.remove(s),i.Au.delete(t),yg(i)}else await Md(i.localStore,t,!1).then(()=>Ud(i,t,n)).catch(Ea)}async function JN(e,t){const n=tt(e),i=t.batch.batchId;try{const r=await uN(n.localStore,t);ob(n,i,null),ab(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await yl(n,r)}catch(r){await Ea(r)}}async function tx(e,t,n){const i=tt(e);try{const r=await function(a,l){const u=tt(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(gt(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);ob(i,t,n),ab(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await yl(i,r)}catch(r){await Ea(r)}}function ab(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function ob(e,t,n){const i=tt(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Ud(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||lb(e,i)})}function lb(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(ug(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),yg(e))}function rv(e,t,n){for(const i of n)i instanceof nb?(e.Ru.addReference(i.key,t),ex(e,i)):i instanceof ib?(H(pg,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||lb(e,i.key)):Y(19791,{wu:i})}function ex(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(H(pg,"New document in limbo: "+n),e.Eu.add(i),yg(e))}function yg(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Q(wt.fromString(t)),i=e.fu.next();e.Au.set(i,new FN(n)),e.du=e.du.insert(n,i),YA(e.remoteStore,new qi(On(Kc(n.path)),i,"TargetPurposeLimboResolution",Qc.ce))}}async function yl(e,t,n){const i=tt(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){r.push(h);const g=ag.As(u.targetId,h);s.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=tt(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,m=>P.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>P.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!Ta(g))throw g;H(og,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const _=d.Ms.get(m),x=_.snapshotVersion,O=_.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(m,O)}}}(i.localStore,s))}async function nx(e,t){const n=tt(e);if(!n.currentUser.isEqual(t)){H(pg,"User change. New user:",t.toKey());const i=await FA(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new B(k.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await yl(n,i.Ls)}}function ix(e,t){const n=tt(e),i=n.Au.get(t);if(i&&i.hu)return ut().add(i.key);{let r=ut();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function ub(e){const t=tt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=sb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ix.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=WN.bind(null,t),t.Pu.H_=zN.bind(null,t.eventManager),t.Pu.yu=BN.bind(null,t.eventManager),t}function rx(e){const t=tt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=JN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tx.bind(null,t),t}class yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=eh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return lN(this.persistence,new sN,t.initialUser,this.serializer)}Cu(t){return new HA(sg.mi,this.serializer)}Du(t){return new gN}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yc.provider={build:()=>new yc};class sx extends yc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){gt(this.persistence.referenceDelegate instanceof gc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new FC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?ze.withCacheSize(this.cacheSizeBytes):ze.DEFAULT;return new HA(i=>gc.mi(i,n),this.serializer)}}class Ld{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>iv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nx.bind(null,this.syncEngine),await UN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new jN}()}createDatastore(t){const n=eh(t.databaseInfo.databaseId),i=function(s){return new EN(s)}(t.databaseInfo);return function(s,a,l,u){return new SN(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new RN(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>iv(this.syncEngine,n,0),function(){return Z_.v()?new Z_:new pN}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const g=new GN(r,s,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=tt(r);H(Qr,"RemoteStore shutting down."),s.Ea.add(5),await pl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Ld.provider={build:()=>new Ld};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ci("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=tt(r),l={documents:s.map(g=>mc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,wt.emptyPath(),l,s.length),h=new Map;u.forEach(g=>{const m=IC(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return s.forEach(g=>{const m=h.get(g.toString());gt(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Jc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=Q.fromPath(i);this.mutations.push(new NA(r,this.precondition(r)))}),await async function(i,r){const s=tt(i),a={writes:r.map(l=>LA(s.serializer,l))};await s.Go("Commit",s.serializer.databaseId,wt.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Y(50498,{Gu:t.constructor.name});n=Z.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new B(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Z.min())?Ee.exists(!1):Ee.updateTime(n):Ee.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Z.min()))throw new B(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ee.updateTime(n)}return Ee.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new lg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new ax(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!dl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!xA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="FirestoreClient";class lx{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ce.UNAUTHENTICATED,this.clientId=Km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{H(fr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(fr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=mg(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function vf(e,t){e.asyncQueue.verifyOperationInProgress(),H(fr,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await FA(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function sv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ux(e);H(fr,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>J_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>J_(t.remoteStore,r)),e._onlineComponents=t}async function ux(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(fr,"Using user provided OfflineComponentProvider");try{await vf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===k.FAILED_PRECONDITION||r.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;ra("Error using user provided cache. Falling back to memory cache: "+n),await vf(e,new yc)}}else H(fr,"Using default OfflineComponentProvider"),await vf(e,new sx(void 0));return e._offlineComponents}async function _g(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(fr,"Using user provided OnlineComponentProvider"),await sv(e,e._uninitializedComponentsProvider._online)):(H(fr,"Using default OnlineComponentProvider"),await sv(e,new Ld))),e._onlineComponents}function cx(e){return _g(e).then(t=>t.syncEngine)}function hx(e){return _g(e).then(t=>t.datastore)}async function jd(e){const t=await _g(e),n=t.eventManager;return n.onListen=QN.bind(null,t.syncEngine),n.onUnlisten=XN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=YN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=$N.bind(null,t.syncEngine),n}function fx(e,t,n={}){const i=new ri;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new cb({next:m=>{d.Nu(),a.enqueueAndForget(()=>tb(s,g));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new B(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new B(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new eb(Kc(l.path),d,{includeMetadataChanges:!0,qa:!0});return JA(s,g)}(await jd(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="firestore.googleapis.com",ov=!0;class lv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new B(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fb,this.ssl=ov}else this.host=t.host,this.ssl=t.ssl??ov;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=qA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<qC)throw new B(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}II("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hb(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rh{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new B(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new yI;switch(i.type){case"firstParty":return new TI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new B(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=av.get(n);i&&(H("ComponentProvider","Removing Datastore"),av.delete(n),i.terminate())}(this),Promise.resolve()}}function dx(e,t,n,i={}){var h;e=en(e,rh);const r=ya(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(P0(`https://${l}`),U0("Firestore",!0)),s.host!==fb&&s.host!==l&&ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!Hr(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=Ce.MOCK_USER;else{d=qR(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new B(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ce(m)}e._authCredentials=new _I(new Z0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new es(this.firestore,t,this._query)}}class zt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new er(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new zt(this.firestore,t,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(fl(n,zt._jsonSchema))return new zt(t,i||null,new Q(wt.fromString(n.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:te("string",zt._jsonSchemaVersion),referencePath:te("string")};class er extends es{constructor(t,n,i){super(t,n,Kc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new zt(this.firestore,null,new Q(t))}withConverter(t){return new er(this.firestore,t,this._path)}}function uv(e,t,...n){if(e=de(e),W0("collection","path",t),e instanceof rh){const i=wt.fromString(t,...n);return T_(i),new er(e,null,i)}{if(!(e instanceof zt||e instanceof er))throw new B(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(wt.fromString(t,...n));return T_(i),new er(e.firestore,null,i)}}function Ie(e,t,...n){if(e=de(e),arguments.length===1&&(t=Km.newId()),W0("doc","path",t),e instanceof rh){const i=wt.fromString(t,...n);return E_(i),new zt(e,null,new Q(i))}{if(!(e instanceof zt||e instanceof er))throw new B(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(wt.fromString(t,...n));return E_(i),new zt(e.firestore,e instanceof er?e.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="AsyncQueue";class hv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lg(this,"async_queue_retry"),this._c=()=>{const i=_f();i&&H(cv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=_f();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=_f();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ri;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Ta(t))throw t;H(cv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,ci("INTERNAL UNHANDLED ERROR: ",fv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=dg.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&Y(47125,{Pc:fv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function fv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class fi extends rh{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new hv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new hv(t),this._firestoreClient=void 0,await t}}}function mx(e,t){const n=typeof e=="object"?e:B0(),i=typeof e=="string"?e:uc,r=Qm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=zR("firestore");s&&dx(r,...s)}return r}function sh(e){if(e._terminated)throw new B(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||gx(e),e._firestoreClient}function gx(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new LI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,hb(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new lx(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Xe(Ae.fromBase64String(t))}catch(n){throw new B(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Xe(Ae.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Xe._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(fl(t,Xe._jsonSchema))return Xe.fromBase64String(t.bytes)}}Xe._jsonSchemaVersion="firestore/bytes/1.0",Xe._jsonSchema={type:te("string",Xe._jsonSchemaVersion),bytes:te("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new B(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ve(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new B(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new B(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return lt(this._lat,t._lat)||lt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vn._jsonSchemaVersion}}static fromJSON(t){if(fl(t,Vn._jsonSchema))return new Vn(t.latitude,t.longitude)}}Vn._jsonSchemaVersion="firestore/geoPoint/1.0",Vn._jsonSchema={type:te("string",Vn._jsonSchemaVersion),latitude:te("number"),longitude:te("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Mn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(fl(t,Mn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Mn(t.vectorValues);throw new B(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mn._jsonSchemaVersion="firestore/vectorValue/1.0",Mn._jsonSchema={type:te("string",Mn._jsonSchemaVersion),vectorValues:te("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=/^__.*__$/;class yx{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new yr(t,this.data,this.fieldMask,n,this.fieldTransforms):new ml(t,this.data,n,this.fieldTransforms)}}class db{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new yr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function mb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:e})}}class vg{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new vg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return _c(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(mb(this.Ac)&&px.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class _x{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||eh(t)}Cc(t,n,i,r=!1){return new vg({Ac:t,methodName:n,Dc:i,path:ve.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vl(e){const t=e._freezeSettings(),n=eh(e._databaseId);return new _x(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Eg(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);Ag("Data must be an object, but it was:",a,i);const l=yb(i,a);let u,h;if(s.merge)u=new $e(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=zd(t,g,n);if(!a.contains(m))throw new B(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);vb(d,m)||d.push(m)}u=new $e(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new yx(new Me(l),u,h)}class oh extends ah{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof oh}}class Tg extends ah{_toFieldTransform(t){return new cC(t.path,new Fo)}isEqual(t){return t instanceof Tg}}function gb(e,t,n,i){const r=e.Cc(1,t,n);Ag("Data must be an object, but it was:",r,i);const s=[],a=Me.empty();pr(i,(u,h)=>{const d=bg(t,u,n);h=de(h);const g=r.yc(d);if(h instanceof oh)s.push(d);else{const m=El(h,g);m!=null&&(s.push(d),a.set(d,m))}});const l=new $e(s);return new db(a,l,r.fieldTransforms)}function pb(e,t,n,i,r,s){const a=e.Cc(1,t,n),l=[zd(t,i,n)],u=[r];if(s.length%2!=0)throw new B(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(zd(t,s[m])),u.push(s[m+1]);const h=[],d=Me.empty();for(let m=l.length-1;m>=0;--m)if(!vb(h,l[m])){const _=l[m];let x=u[m];x=de(x);const O=a.yc(_);if(x instanceof oh)h.push(_);else{const M=El(x,O);M!=null&&(h.push(_),d.set(_,M))}}const g=new $e(h);return new db(d,g,a.fieldTransforms)}function vx(e,t,n,i=!1){return El(n,e.Cc(i?4:3,t))}function El(e,t){if(_b(e=de(e)))return Ag("Unsupported field value:",t,e),yb(e,t);if(e instanceof ah)return function(i,r){if(!mb(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=El(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=de(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return oC(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Vt.fromDate(i);return{timestampValue:dc(r.serializer,s)}}if(i instanceof Vt){const s=new Vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:dc(r.serializer,s)}}if(i instanceof Vn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xe)return{bytesValue:MA(r.serializer,i._byteString)};if(i instanceof zt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ig(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Mn)return function(a,l){return{mapValue:{fields:{[oA]:{stringValue:lA},[cc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return tg(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Gc(i)}`)}(e,t)}function yb(e,t){const n={};return eA(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):pr(e,(i,r)=>{const s=El(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function _b(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Vt||e instanceof Vn||e instanceof Xe||e instanceof zt||e instanceof ah||e instanceof Mn)}function Ag(e,t,n){if(!_b(n)||!J0(n)){const i=Gc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function zd(e,t,n){if((t=de(t))instanceof _l)return t._internalPath;if(typeof t=="string")return bg(e,t);throw _c("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ex=new RegExp("[~\\*/\\[\\]]");function bg(e,t,n){if(t.search(Ex)>=0)throw _c(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new _l(...t.split("."))._internalPath}catch{throw _c(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function _c(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new B(k.INVALID_ARGUMENT,l+e+u)}function vb(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Tx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Sg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Tx extends vc{data(){return super.data()}}function Sg(e,t){return typeof t=="string"?bg(e,t):t instanceof _l?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new B(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wg{}class Eb extends wg{}function bx(e,t,...n){let i=[];t instanceof wg&&i.push(t),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof Ig).length,l=s.filter(u=>u instanceof Rg).length;if(a>1||a>0&&l>0)throw new B(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class Rg extends Eb{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Rg(t,n,i)}_apply(t){const n=this._parse(t);return Tb(t._query,n),new es(t.firestore,t.converter,Nd(t._query,n))}_parse(t){const n=vl(t.firestore);return function(s,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){gv(g,d);const x=[];for(const O of g)x.push(mv(u,s,O));m={arrayValue:{values:x}}}else m=mv(u,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||gv(g,d),m=vx(l,a,g,d==="in"||d==="not-in");return Jt.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Ig extends wg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Ig(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:An.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)Tb(a,u),a=Nd(a,u)}(t._query,n),new es(t.firestore,t.converter,Nd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cg extends Eb{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Cg(t,n)}_apply(t){const n=function(r,s,a){if(r.startAt!==null)throw new B(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new B(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ho(s,a)}(t._query,this._field,this._direction);return new es(t.firestore,t.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new Aa(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}}function Sx(e,t="asc"){const n=t,i=Sg("orderBy",e);return Cg._create(i,n)}function mv(e,t,n){if(typeof(n=de(n))=="string"){if(n==="")throw new B(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pA(t)&&n.indexOf("/")!==-1)throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(wt.fromString(n));if(!Q.isDocumentKey(i))throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return N_(e,new Q(i))}if(n instanceof zt)return N_(e,n._key);throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gc(n)}.`)}function gv(e,t){if(!Array.isArray(e)||e.length===0)throw new B(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Tb(e,t){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new B(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new B(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Ab{convertValue(t,n="none"){switch(cr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $t(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ur(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Y(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return pr(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[cc].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>$t(a.doubleValue));return new Mn(n)}convertGeoPoint(t){return new Vn($t(t.latitude),$t(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Yc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(zo(t));default:return null}}convertTimestamp(t){const n=lr(t);return new Vt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=wt.fromString(t);gt(BA(i),9688,{name:t});const r=new Bo(i.get(1),i.get(3)),s=new Q(i.popFirst(5));return r.isEqual(n)||ci(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class wx extends Ab{constructor(t){super(),this.firestore=t}convertBytes(t){return new Xe(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new zt(this.firestore,null,n)}}class xs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class nr extends vc{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(Sg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=nr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}nr._jsonSchemaVersion="firestore/documentSnapshot/1.0",nr._jsonSchema={type:te("string",nr._jsonSchemaVersion),bundleSource:te("string","DocumentSnapshot"),bundleName:te("string"),bundle:te("string")};class Su extends nr{data(t={}){return super.data(t)}}class Bs{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new xs(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Su(this._firestore,this._userDataWriter,i.key,i,new xs(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new Su(r._firestore,r._userDataWriter,l.doc.key,l.doc,new xs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Su(r._firestore,r._userDataWriter,l.doc.key,l.doc,new xs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:Rx(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Bs._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Km.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Rx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(e){e=en(e,zt);const t=en(e.firestore,fi);return fx(sh(t),e._key).then(n=>bb(t,e,n))}Bs._jsonSchemaVersion="firestore/querySnapshot/1.0",Bs._jsonSchema={type:te("string",Bs._jsonSchemaVersion),bundleSource:te("string","QuerySnapshot"),bundleName:te("string"),bundle:te("string")};class xg extends Ab{constructor(t){super(),this.firestore=t}convertBytes(t){return new Xe(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new zt(this.firestore,null,n)}}function qs(e,t,n){e=en(e,zt);const i=en(e.firestore,fi),r=Ng(e.converter,t,n);return lh(i,[Eg(vl(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,Ee.none())])}function Ix(e,t,n,...i){e=en(e,zt);const r=en(e.firestore,fi),s=vl(r);let a;return a=typeof(t=de(t))=="string"||t instanceof _l?pb(s,"updateDoc",e._key,t,n,i):gb(s,"updateDoc",e._key,t),lh(r,[a.toMutation(e._key,Ee.exists(!0))])}function Cx(e){return lh(en(e.firestore,fi),[new Jc(e._key,Ee.none())])}function Nx(e,t){const n=en(e.firestore,fi),i=Ie(e),r=Ng(e.converter,t);return lh(n,[Eg(vl(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,Ee.exists(!1))]).then(()=>i)}function wu(e,...t){var u,h,d;e=de(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||dv(t[i])||(n=t[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(dv(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let s,a,l;if(e instanceof zt)a=en(e.firestore,fi),l=Kc(e._key.path),s={next:g=>{t[i]&&t[i](bb(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=en(e,es);a=en(g.firestore,fi),l=g._query;const m=new xg(a);s={next:_=>{t[i]&&t[i](new Bs(a,m,g,_))},error:t[i+1],complete:t[i+2]},Ax(e._query)}return function(m,_,x,O){const M=new cb(O),A=new eb(_,M,x);return m.asyncQueue.enqueueAndForget(async()=>JA(await jd(m),A)),()=>{M.Nu(),m.asyncQueue.enqueueAndForget(async()=>tb(await jd(m),A))}}(sh(a),l,r,s)}function lh(e,t){return function(i,r){const s=new ri;return i.asyncQueue.enqueueAndForget(async()=>ZN(await cx(i),r,s)),s.promise}(sh(e),t)}function bb(e,t,n){const i=n.docs.get(t._key),r=new xg(e);return new nr(e,r,t._key,i,new xs(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx={maxAttempts:5};function to(e,t){if((e=de(e)).firestore!==t)throw new B(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=vl(t)}get(t){const n=to(t,this._firestore),i=new wx(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return Y(24041);const s=r[0];if(s.isFoundDocument())return new vc(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new vc(this._firestore,i,n._key,null,n.converter);throw Y(18433,{doc:s})})}set(t,n,i){const r=to(t,this._firestore),s=Ng(r.converter,n,i),a=Eg(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(t,n,i,...r){const s=to(t,this._firestore);let a;return a=typeof(n=de(n))=="string"||n instanceof _l?pb(this._dataReader,"Transaction.update",s._key,n,i,r):gb(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(t){const n=to(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox extends Dx{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=to(t,this._firestore),i=new xg(this._firestore);return super.get(t).then(r=>new nr(this._firestore,i,n._key,r._document,new xs(!1,!1),n.converter))}}function pv(e,t,n){e=en(e,fi);const i={...xx,...n};return function(s){if(s.maxAttempts<1)throw new B(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,l){const u=new ri;return s.asyncQueue.enqueueAndForget(async()=>{const h=await hx(s);new ox(s.asyncQueue,h,l,a,u).ju()}),u.promise}(sh(e),r=>t(new Ox(e,r)),i)}function Ef(){return new Tg("serverTimestamp")}(function(t,n=!0){(function(r){va=r})(_a),ia(new Fr("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new fi(new vI(i.getProvider("auth-internal")),new AI(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bo(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ji(p_,y_,t),Ji(p_,y_,"esm2020")})();function Sb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Vx=Sb,wb=new cl("auth","Firebase",Sb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new Fm("@firebase/auth");function Mx(e,...t){Ec.logLevel<=ot.WARN&&Ec.warn(`Auth (${_a}): ${e}`,...t)}function Ru(e,...t){Ec.logLevel<=ot.ERROR&&Ec.error(`Auth (${_a}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(e,...t){throw Dg(e,...t)}function kn(e,...t){return Dg(e,...t)}function Rb(e,t,n){const i={...Vx(),[t]:n};return new cl("auth","Firebase",i).create(t,{appName:e.name})}function ir(e){return Rb(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dg(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return wb.create(e,...t)}function J(e,t,...n){if(!e)throw Dg(t,...n)}function ti(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ru(t),new Error(t)}function mi(e,t){e||ti(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function kx(){return yv()==="http:"||yv()==="https:"}function yv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kx()||KR()||"connection"in navigator)?navigator.onLine:!0}function Ux(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t,n){this.shortDelay=t,this.longDelay=n,mi(n>t,"Short delay should be less than long delay!"),this.isMobile=GR()||XR()}get(){return Px()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(e,t){mi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zx=new Tl(3e4,6e4);function uh(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Sa(e,t,n,i,r={}){return Cb(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=hl({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return YR()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&ya(e.emulatorConfig.host)&&(h.credentials="include"),Ib.fetch()(await xb(e,e.config.apiHost,n,l),h)})}async function Cb(e,t,n){e._canInitEmulator=!1;const i={...Lx,...t};try{const r=new Bx(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw su(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw su(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw su(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw su(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Rb(e,d,h);di(e,d)}}catch(r){if(r instanceof pi)throw r;di(e,"network-request-failed",{message:String(r)})}}async function Nb(e,t,n,i,r={}){const s=await Sa(e,t,n,i,r);return"mfaPendingCredential"in s&&di(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function xb(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?Og(e.config,r):`${e.config.apiScheme}://${r}`;return jx.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class Bx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(kn(this.auth,"network-request-failed")),zx.get())})}}function su(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=kn(e,t,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qx(e,t){return Sa(e,"POST","/v1/accounts:delete",t)}async function Tc(e,t){return Sa(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Hx(e,t=!1){const n=de(e),i=await n.getIdToken(t),r=Vg(i);J(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:bo(Tf(r.auth_time)),issuedAtTime:bo(Tf(r.iat)),expirationTime:bo(Tf(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Tf(e){return Number(e)*1e3}function Vg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Ru("JWT malformed, contained fewer than 3 sections"),null;try{const r=O0(n);return r?JSON.parse(r):(Ru("Failed to decode base64 JWT payload"),null)}catch(r){return Ru("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function _v(e){const t=Vg(e);return J(t,"internal-error"),J(typeof t.exp<"u","internal-error"),J(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof pi&&Fx(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function Fx({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bo(this.lastLoginAt),this.creationTime=bo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(e){var g;const t=e.auth,n=await e.getIdToken(),i=await Yo(e,Tc(t,{idToken:n}));J(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(g=r.providerUserInfo)!=null&&g.length?Db(r.providerUserInfo):[],a=Yx(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Hd(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function Qx(e){const t=de(e);await Ac(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Yx(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function Db(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kx(e,t){const n=await Cb(e,{},async()=>{const i=hl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await xb(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&ya(e.emulatorConfig.host)&&(u.credentials="include"),Ib.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Xx(e,t){return Sa(e,"POST","/v2/accounts:revokeToken",uh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){J(t.idToken,"internal-error"),J(typeof t.idToken<"u","internal-error"),J(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):_v(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){J(t.length!==0,"internal-error");const n=_v(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await Kx(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Hs;return i&&(J(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(J(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(J(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Hs,this.toJSON())}_performRefresh(){return ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(e,t){J(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class En{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Gx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Hd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Yo(this,this.stsTokenManager.getToken(this.auth,t));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Hx(this,t)}reload(){return Qx(this)}_assign(t){this!==t&&(J(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new En({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Ac(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(ir(this.auth));const t=await this.getIdToken();return await Yo(this,qx(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:_,providerData:x,stsTokenManager:O}=n;J(g&&O,t,"internal-error");const M=Hs.fromJSON(this.name,O);J(typeof g=="string",t,"internal-error"),Ri(i,t.name),Ri(r,t.name),J(typeof m=="boolean",t,"internal-error"),J(typeof _=="boolean",t,"internal-error"),Ri(s,t.name),Ri(a,t.name),Ri(l,t.name),Ri(u,t.name),Ri(h,t.name),Ri(d,t.name);const A=new En({uid:g,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:M,createdAt:h,lastLoginAt:d});return x&&Array.isArray(x)&&(A.providerData=x.map(v=>({...v}))),u&&(A._redirectEventId=u),A}static async _fromIdTokenResponse(t,n,i=!1){const r=new Hs;r.updateFromServerResponse(n);const s=new En({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Ac(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];J(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?Db(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new Hs;l.updateFromIdToken(i);const u=new En({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Hd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=new Map;function ei(e){mi(e instanceof Function,"Expected a class definition");let t=vv.get(e);return t?(mi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Ob.type="NONE";const Ev=Ob;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(e,t,n){return`firebase:${e}:${t}:${n}`}class Fs{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Iu(this.userKey,r.apiKey,s),this.fullPersistenceKey=Iu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Tc(this.auth,{idToken:t}).catch(()=>{});return n?En._fromGetAccountInfoResponse(this.auth,n,t):null}return En._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Fs(ei(Ev),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||ei(Ev);const a=Iu(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await Tc(t,{idToken:d}).catch(()=>{});if(!m)break;g=await En._fromGetAccountInfoResponse(t,m,d)}else g=En._fromJSON(t,d);h!==s&&(l=g),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Fs(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Fs(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Pb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Vb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Lb(t))return"Blackberry";if(jb(t))return"Webos";if(Mb(t))return"Safari";if((t.includes("chrome/")||kb(t))&&!t.includes("edge/"))return"Chrome";if(Ub(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Vb(e=De()){return/firefox\//i.test(e)}function Mb(e=De()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function kb(e=De()){return/crios\//i.test(e)}function Pb(e=De()){return/iemobile/i.test(e)}function Ub(e=De()){return/android/i.test(e)}function Lb(e=De()){return/blackberry/i.test(e)}function jb(e=De()){return/webos/i.test(e)}function Mg(e=De()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function $x(e=De()){var t;return Mg(e)&&!!((t=window.navigator)!=null&&t.standalone)}function Zx(){return $R()&&document.documentMode===10}function zb(e=De()){return Mg(e)||Ub(e)||jb(e)||Lb(e)||/windows phone/i.test(e)||Pb(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(e,t=[]){let n;switch(e){case"Browser":n=Tv(De());break;case"Worker":n=`${Tv(De())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${_a}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jx(e,t={}){return Sa(e,"GET","/v2/passwordPolicy",uh(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=6;class eD{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??tD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Av(this),this.idTokenSubscription=new Av(this),this.beforeStateQueue=new Wx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ei(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Fs.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Tc(this,{idToken:t}),i=await En._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(vn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Ac(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Ux()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(vn(this.app))return Promise.reject(ir(this));const n=t?de(t):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&J(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return vn(this.app)?Promise.reject(ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ei(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Jx(this),n=new eD(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new cl("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Xx(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ei(t)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Fs.create(this,[ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Bb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&Mx(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ch(e){return de(e)}class Av{constructor(t){this.auth=t,this.observer=null,this.addObserver=r2(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iD(e){kg=e}function rD(e){return kg.loadJS(e)}function sD(){return kg.gapiScript}function aD(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(e,t){const n=Qm(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Hr(s,t??{}))return r;di(r,"already-initialized")}return n.initialize({options:t})}function lD(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ei);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function uD(e,t,n){const i=ch(e);J(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=qb(t),{host:a,port:l}=cD(t),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){J(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),J(Hr(h,i.config.emulator)&&Hr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,ya(a)?(P0(`${s}//${a}${u}`),U0("Auth",!0)):hD()}function qb(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function cD(e){const t=qb(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:bv(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:bv(a)}}}function bv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function hD(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ti("not implemented")}_getIdTokenResponse(t){return ti("not implemented")}_linkToIdToken(t,n){return ti("not implemented")}_getReauthenticationResolver(t){return ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(e,t){return Nb(e,"POST","/v1/accounts:signInWithIdp",uh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="http://localhost";class Yr extends Hb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Yr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):di("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new Yr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Gs(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Gs(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Gs(t,n)}buildRequest(){const t={requestUri:fD,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=hl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends Fb{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Al{constructor(){super("facebook.com")}static credential(t){return Yr._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Mi.credentialFromTaggedObject(t)}static credentialFromError(t){return Mi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Mi.credential(t.oauthAccessToken)}catch{return null}}}Mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Al{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Yr._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return ki.credentialFromTaggedObject(t)}static credentialFromError(t){return ki.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return ki.credential(n,i)}catch{return null}}}ki.GOOGLE_SIGN_IN_METHOD="google.com";ki.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Al{constructor(){super("github.com")}static credential(t){return Yr._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Pi.credentialFromTaggedObject(t)}static credentialFromError(t){return Pi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Pi.credential(t.oauthAccessToken)}catch{return null}}}Pi.GITHUB_SIGN_IN_METHOD="github.com";Pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Al{constructor(){super("twitter.com")}static credential(t,n){return Yr._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ui.credentialFromTaggedObject(t)}static credentialFromError(t){return Ui.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Ui.credential(n,i)}catch{return null}}}Ui.TWITTER_SIGN_IN_METHOD="twitter.com";Ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(e,t){return Nb(e,"POST","/v1/accounts:signUp",uh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await En._fromIdTokenResponse(t,i,r),a=Sv(i);return new dr({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=Sv(i);return new dr({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function Sv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(e){var r;if(vn(e.app))return Promise.reject(ir(e));const t=ch(e);if(await t._initializationPromise,(r=t.currentUser)!=null&&r.isAnonymous)return new dr({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await dD(t,{returnSecureToken:!0}),i=await dr._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends pi{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,bc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new bc(t,n,i,r)}}function Gb(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?bc._fromErrorAndOperation(e,s,t,i):s})}async function gD(e,t,n=!1){const i=await Yo(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return dr._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(e,t,n=!1){const{auth:i}=e;if(vn(i.app))return Promise.reject(ir(i));const r="reauthenticate";try{const s=await Yo(e,Gb(i,r,t,e),n);J(s.idToken,i,"internal-error");const a=Vg(s.idToken);J(a,i,"internal-error");const{sub:l}=a;return J(e.uid===l,i,"user-mismatch"),dr._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&di(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(e,t,n=!1){if(vn(e.app))return Promise.reject(ir(e));const i="signIn",r=await Gb(e,i,t),s=await dr._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}function _D(e,t,n,i){return de(e).onIdTokenChanged(t,n,i)}function vD(e,t,n){return de(e).beforeAuthStateChanged(t,n)}const Sc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sc,"1"),this.storage.removeItem(Sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=1e3,TD=10;class Yb extends Qb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Zx()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,TD):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},ED)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Yb.type="LOCAL";const AD=Yb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb extends Qb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Kb.type="SESSION";const Xb=Kb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new hh(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await bD(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=Pg("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return window}function wD(e){Pn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(){return typeof Pn().WorkerGlobalScope<"u"&&typeof Pn().importScripts=="function"}async function RD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ID(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function CD(){return $b()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="firebaseLocalStorageDb",ND=1,wc="firebaseLocalStorage",Wb="fbase_key";class bl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fh(e,t){return e.transaction([wc],t?"readwrite":"readonly").objectStore(wc)}function xD(){const e=indexedDB.deleteDatabase(Zb);return new bl(e).toPromise()}function Fd(){const e=indexedDB.open(Zb,ND);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(wc,{keyPath:Wb})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(wc)?t(i):(i.close(),await xD(),t(await Fd()))})})}async function wv(e,t,n){const i=fh(e,!0).put({[Wb]:t,value:n});return new bl(i).toPromise()}async function DD(e,t){const n=fh(e,!1).get(t),i=await new bl(n).toPromise();return i===void 0?null:i.value}function Rv(e,t){const n=fh(e,!0).delete(t);return new bl(n).toPromise()}const OD=800,VD=3;class Jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>VD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $b()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hh._getInstance(CD()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await RD(),!this.activeServiceWorker)return;this.sender=new SD(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||ID()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Fd();return await wv(t,Sc,"1"),await Rv(t,Sc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>wv(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>DD(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Rv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=fh(r,!1).getAll();return new bl(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jb.type="LOCAL";const MD=Jb;new Tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(e,t){return t?ei(t):(J(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends Hb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Gs(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Gs(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Gs(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function PD(e){return yD(e.auth,new Ug(e),e.bypassAuthState)}function UD(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),pD(n,new Ug(e),e.bypassAuthState)}async function LD(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),gD(n,new Ug(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return PD;case"linkViaPopup":case"linkViaRedirect":return LD;case"reauthViaPopup":case"reauthViaRedirect":return UD;default:di(this.auth,"internal-error")}}resolve(t){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=new Tl(2e3,1e4);class Ds extends tS{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ds.currentPopupAction&&Ds.currentPopupAction.cancel(),Ds.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return J(t,this.auth,"internal-error"),t}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const t=Pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ds.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,jD.get())};t()}}Ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD="pendingRedirect",Cu=new Map;class BD extends tS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Cu.get(this.auth._key());if(!t){try{const i=await qD(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Cu.set(this.auth._key(),t)}return this.bypassAuthState||Cu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qD(e,t){const n=GD(t),i=FD(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function HD(e,t){Cu.set(e._key(),t)}function FD(e){return ei(e._redirectPersistence)}function GD(e){return Iu(zD,e.config.apiKey,e.name)}async function QD(e,t,n=!1){if(vn(e.app))return Promise.reject(ir(e));const i=ch(e),r=kD(i,t),a=await new BD(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=10*60*1e3;class KD{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!XD(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!eS(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(kn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=YD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iv(t))}saveEventToCache(t){this.cachedEventUids.add(Iv(t)),this.lastProcessedEventTime=Date.now()}}function Iv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function eS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function XD(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(e,t={}){return Sa(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WD=/^https?/;async function JD(e){if(e.config.emulator)return;const{authorizedDomains:t}=await $D(e);for(const n of t)try{if(t4(n))return}catch{}di(e,"unauthorized-domain")}function t4(e){const t=qd(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!WD.test(n))return!1;if(ZD.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=new Tl(3e4,6e4);function Cv(){const e=Pn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function n4(e){return new Promise((t,n)=>{var r,s,a;function i(){Cv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Cv(),n(kn(e,"network-request-failed"))},timeout:e4.get()})}if((s=(r=Pn().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=Pn().gapi)!=null&&a.load)i();else{const l=aD("iframefcb");return Pn()[l]=()=>{gapi.load?i():n(kn(e,"network-request-failed"))},rD(`${sD()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Nu=null,t})}let Nu=null;function i4(e){return Nu=Nu||n4(e),Nu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=new Tl(5e3,15e3),s4="__/auth/iframe",a4="emulator/auth/iframe",o4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u4(e){const t=e.config;J(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Og(t,a4):`https://${e.config.authDomain}/${s4}`,i={apiKey:t.apiKey,appName:e.name,v:_a},r=l4.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${hl(i).slice(1)}`}async function c4(e){const t=await i4(e),n=Pn().gapi;return J(n,e,"internal-error"),t.open({where:document.body,url:u4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o4,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=kn(e,"network-request-failed"),l=Pn().setTimeout(()=>{s(a)},r4.get());function u(){Pn().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f4=500,d4=600,m4="_blank",g4="http://localhost";class Nv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p4(e,t,n,i=f4,r=d4){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...h4,width:i.toString(),height:r.toString(),top:s,left:a},h=De().toLowerCase();n&&(l=kb(h)?m4:n),Vb(h)&&(t=t||g4,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,x])=>`${m}${_}=${x},`,"");if($x(h)&&l!=="_self")return y4(t||"",l),new Nv(null);const g=window.open(t||"",l,d);J(g,e,"popup-blocked");try{g.focus()}catch{}return new Nv(g)}function y4(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="__/auth/handler",v4="emulator/auth/handler",E4=encodeURIComponent("fac");async function xv(e,t,n,i,r,s){J(e.config.authDomain,e,"auth-domain-config-required"),J(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:_a,eventId:r};if(t instanceof Fb){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",i2(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof Al){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${E4}=${encodeURIComponent(u)}`:"";return`${T4(e)}?${hl(l).slice(1)}${h}`}function T4({config:e}){return e.emulator?Og(e,v4):`https://${e.authDomain}/${_4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="webStorageSupport";class A4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xb,this._completeRedirectFn=QD,this._overrideRedirectResult=HD}async _openPopup(t,n,i,r){var a;mi((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await xv(t,n,i,qd(),r);return p4(t,s,Pg())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await xv(t,n,i,qd(),r);return wD(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(mi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await c4(t),i=new KD(t);return n.register("authEvent",r=>(J(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Af,{type:Af},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[Af];s!==void 0&&n(!!s),di(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JD(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return zb()||Mb()||Mg()}}const b4=A4;var Dv="@firebase/auth",Ov="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R4(e){ia(new Fr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bb(e)},h=new nD(i,r,s,u);return lD(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),ia(new Fr("auth-internal",t=>{const n=ch(t.getProvider("auth").getImmediate());return(i=>new S4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ji(Dv,Ov,w4(e)),Ji(Dv,Ov,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=5*60,C4=k0("authIdTokenMaxAge")||I4;let Vv=null;const N4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>C4)return;const r=n==null?void 0:n.token;Vv!==r&&(Vv=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function x4(e=B0()){const t=Qm(e,"auth");if(t.isInitialized())return t.getImmediate();const n=oD(e,{popupRedirectResolver:b4,persistence:[MD,AD,Xb]}),i=k0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=N4(s.toString());vD(n,a,()=>a(n.currentUser)),_D(n,l=>a(l))}}const r=V0("auth");return r&&uD(n,`http://${r}`),n}function D4(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}iD({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=kn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",D4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R4("Browser");const O4={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},nS=z0(O4),ne=mx(nS),V4=x4(nS),iS=({className:e=""})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:E.jsx("path",{d:"m9 18 6-6-6-6"})}),rS=({className:e=""})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[E.jsx("path",{d:"M19 12H5"}),E.jsx("polyline",{points:"12 19 5 12 12 5"})]}),sS=({className:e="",filled:t=!1})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[E.jsx("circle",{cx:"11",cy:"11",r:"8"}),E.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),M4=({className:e=""})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[E.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),E.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),k4=({className:e=""})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:E.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),Lg=({className:e="",filled:t=!1})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:E.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),aS=({className:e=""})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[E.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),E.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),oS=({className:e="",filled:t=!1})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:E.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),P4=({className:e="",filled:t=!1})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[E.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),E.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),U4=({className:e="",filled:t=!1})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[E.jsx("path",{d:"M4 22h16"}),E.jsx("path",{d:"M7 22V2h10v20"}),E.jsx("path",{d:"M7 12h4"})]}),L4=({className:e=""})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:E.jsx("path",{d:"m15 18-6-6 6-6"})}),j4=({className:e=""})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:E.jsx("path",{d:"m9 18 6-6-6-6"})}),z4=({className:e=""})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[E.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),E.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),B4=()=>E.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main",children:[E.jsx(Lg,{className:"animate-pulse-heart text-accent",filled:!0}),E.jsx("p",{className:"mt-4 text-lg opacity-70",children:"Загрузка..."})]}),jg=({onClose:e,onSelectPlan:t})=>{const n=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return E.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:E.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[E.jsx(k4,{className:"mx-auto mb-4 text-accent"}),E.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),E.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),E.jsx("div",{className:"space-y-3",children:n.map(i=>E.jsxs("button",{onClick:()=>t(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[E.jsx("p",{className:"font-bold",children:i.name}),E.jsxs("p",{className:"text-sm",children:[i.price," ₽"]})]},i.duration))}),E.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},zg=({onClose:e,onSelectMethod:t,plan:n})=>E.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:E.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[E.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),E.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),E.jsxs("div",{className:"space-y-3",children:[E.jsxs("button",{onClick:()=>t("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[E.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),E.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),E.jsxs("button",{onClick:()=>t("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[E.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),E.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]})]}),E.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Назад"})]})}),Kr=({title:e,onBack:t})=>E.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[t&&E.jsx("button",{onClick:t,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:E.jsx(rS,{})}),E.jsx("h1",{className:"text-xl font-bold",children:e})]}),Bg=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>E.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:e.length>0?e.map((r,s)=>E.jsx("div",{onClick:()=>t(r),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${s*50}ms`},children:E.jsxs("div",{className:"relative transition-all duration-300",children:[E.jsx("button",{onClick:a=>{a.stopPropagation(),i(r.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(r.id)?"text-accent":""}`,children:E.jsx(oS,{filled:n.includes(r.id),width:"20",height:"20"})}),E.jsx("img",{src:`/tene/${r.coverUrl}`,alt:r.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),E.jsx("h2",{className:"mt-2 font-semibold text-xs truncate",children:r.title})]})},r.id)):E.jsx("p",{className:"col-span-3 text-center opacity-70",children:"Ничего не найдено."})}),q4=({novel:e,onSelectChapter:t,onGenreSelect:n,subscription:i,botUsername:r,userId:s,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:h})=>{const[d,g]=F.useState(!1),[m,_]=F.useState(null),[x,O]=F.useState("newest"),[M,A]=F.useState(!1),v=F.useRef(null),[R,D]=F.useState(!1),L=i&&new Date(i.expires_at)>new Date,q=F.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);F.useEffect(()=>{v.current&&setTimeout(()=>{v.current&&D(v.current.scrollHeight>v.current.clientHeight)},100)},[e.description]);const T=F.useMemo(()=>{const C=[...a];return x==="newest"?C.reverse():a},[a,x]),y=C=>{!L&&C.isPaid?g(!0):t(C)},b=()=>{if(q){const C=a.find(S=>S.id===q);C&&t(C)}},w=C=>_(C),I=async C=>{var xt;const S=(xt=window.Telegram)==null?void 0:xt.WebApp;if(!S||!s||!m){console.error("Telegram Web App, userId, or selectedPlan is not available."),S&&S.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}S.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не реагирует после того, как вы выбрали тариф, не волнуйтесь! Попробуйте отправить команду /start еще раз.",async be=>{if(!be)return;const j=Ie(ne,"users",s);try{await qs(j,{pendingSubscription:{...m,method:C,date:new Date().toISOString()}},{merge:!0}),S.openTelegramLink(`https://t.me/${r}?start=${s}`),S.close()}catch(X){console.error("Ошибка записи в Firebase:",X),S.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};return E.jsxs("div",{className:"text-text-main",children:[E.jsx(Kr,{title:e.title,onBack:h}),E.jsxs("div",{className:"relative h-64",children:[E.jsx("img",{src:`/tene/${e.coverUrl}`,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),E.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[E.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:e.title}),E.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:e.author})]})]}),E.jsxs("div",{className:"p-4",children:[E.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(C=>E.jsx("button",{onClick:()=>n(C),className:"text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 bg-component-bg text-text-main border border-border-color hover:bg-border-color",children:C},C))}),E.jsx("div",{ref:v,className:`relative overflow-hidden transition-all duration-500 ${M?"max-h-full":"max-h-24"}`,children:E.jsx("p",{className:"text-sm mb-2 opacity-80 font-body",children:e.description})}),R&&E.jsx("div",{className:"text-right",children:E.jsx("button",{onClick:()=>A(!M),className:"text-sm font-semibold text-accent mb-4",children:M?"Скрыть":"Читать полностью..."})}),q&&E.jsxs("button",{onClick:b,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",q,")"]}),E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),E.jsx("button",{onClick:()=>O(C=>C==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:x==="newest"?"Сначала новые":"Сначала старые"})]}),L&&E.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",new Date(i.expires_at).toLocaleDateString()]}),l?E.jsx("p",{children:"Загрузка глав..."}):E.jsx("div",{className:"flex flex-col gap-3",children:T.map(C=>{const S=!L&&C.isPaid,xt=q===C.id;return E.jsxs("div",{onClick:()=>y(C),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${S?"opacity-70":""}`,children:[E.jsxs("div",{className:"flex items-center gap-3",children:[xt&&E.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),E.jsx("p",{className:"font-semibold",children:C.title})]}),S?E.jsx(M4,{}):E.jsx(iS,{})]},C.id)})}),d&&E.jsx(jg,{onClose:()=>g(!1),onSelectPlan:w}),m&&E.jsx(zg,{onClose:()=>_(null),onSelectMethod:I,plan:m})]})]})},lS=WS.memo(({comment:e,level:t=0,onReply:n,onLike:i,onEdit:r,onDelete:s,onUpdate:a,isUserAdmin:l,currentUserId:u,editingCommentId:h,editingText:d,setEditingText:g,replyingTo:m,replyText:_,setReplyText:x,onCommentSubmit:O})=>{const M=A=>A!=null&&A.toDate?A.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return E.jsxs("div",{style:{marginLeft:`${t*16}px`},className:"flex flex-col",children:[E.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[E.jsxs("div",{className:"flex justify-between items-center text-xs opacity-70 mb-1",children:[E.jsx("p",{className:"font-bold text-sm text-text-main opacity-100",children:e.userName}),E.jsx("span",{children:M(e.timestamp)})]}),h===e.id?E.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[E.jsx("input",{type:"text",value:d,autoFocus:!0,onChange:A=>g(A.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),E.jsx("button",{onClick:()=>a(e.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),E.jsx("button",{onClick:()=>r(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):E.jsx("p",{className:"text-sm mt-1 opacity-90",children:e.text}),E.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[E.jsxs("button",{onClick:()=>i(e.id),className:"flex items-center gap-1 text-xs text-gray-500",children:[E.jsx(Lg,{filled:e.userHasLiked,className:`w-4 h-4 ${e.userHasLiked?"text-accent":""}`}),E.jsx("span",{children:e.likeCount||0})]}),E.jsx("button",{onClick:()=>n(e.id),className:"text-xs text-gray-500",children:"Ответить"}),(u===e.userId||l)&&E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:()=>r(e),className:"text-xs text-gray-500",children:"Редактировать"}),E.jsx("button",{onClick:()=>s(e.id),className:"text-xs text-red-500",children:"Удалить"})]})]})]}),m===e.id&&E.jsxs("form",{onSubmit:A=>O(A,e.id),className:"flex items-center gap-2 mt-2",children:[E.jsx("input",{type:"text",value:_,autoFocus:!0,onChange:A=>x(A.target.value),placeholder:`Ответ для ${e.userName}...`,className:"w-full bg-background border border-border-color rounded-lg py-1 px-3 text-sm"}),E.jsx("button",{type:"submit",className:"p-1.5 rounded-full bg-accent text-white",children:E.jsx(aS,{className:"w-4 h-4"})})]}),e.replies&&e.replies.length>0&&E.jsx("div",{className:"mt-2 space-y-2 border-l-2 border-border-color pl-2",children:e.replies.map(A=>E.jsx(lS,{comment:A,onReply:n,onLike:i,onEdit:r,onDelete:s,onUpdate:a,isUserAdmin:l,currentUserId:u,editingCommentId:h,editingText:d,setEditingText:g,replyingTo:m,replyText:_,setReplyText:x,onCommentSubmit:O},A.id))})]})}),H4=({chapter:e,novel:t,fontSize:n,onFontSizeChange:i,userId:r,userName:s,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,botUsername:d,onBack:g,isUserAdmin:m})=>{const[_,x]=F.useState([]),[O,M]=F.useState(""),[A,v]=F.useState(null),[R,D]=F.useState(""),[L,q]=F.useState(null),[T,y]=F.useState(""),[b,w]=F.useState(0),[I,C]=F.useState(!1),[S,xt]=F.useState(!1),[be,j]=F.useState(!1),[X,$]=F.useState(!1),[ht,Et]=F.useState(null),[mn,qt]=F.useState(""),[Dt,me]=F.useState(!0),Qt=h&&new Date(h.expires_at)>new Date,Sn=F.useMemo(()=>Ie(ne,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);F.useEffect(()=>{const G=wu(Sn,Ct=>{var ft;w(((ft=Ct.data())==null?void 0:ft.likeCount)||0)}),K=bx(uv(ne,`chapters_metadata/${t.id}_${e.id}/comments`),Sx("timestamp","asc")),vt=wu(K,async Ct=>{const ft=Ct.docs.map(kt=>({id:kt.id,...kt.data()}));if(r){const kt=ft.map(async pn=>{const vi=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments/${pn.id}/likes`,r),wa=await Bd(vi);return{...pn,userHasLiked:wa.exists()}}),gn=await Promise.all(kt);x(gn)}else x(ft)});let et=()=>{};if(r){const Ct=Ie(ne,`chapters_metadata/${t.id}_${e.id}/likes`,r);et=wu(Ct,ft=>{C(ft.exists())})}return()=>{G(),vt(),et()}},[Sn,t.id,e.id,r]),F.useEffect(()=>{(async()=>{if(me(!0),qt(""),e.isPaid&&!Qt){me(!1),qt(`### 🔒 Для доступа к этой главе необходима подписка.

Пожалуйста, оформите подписку в разделе "Профиль", чтобы продолжить чтение.`);return}try{const K=Ie(ne,"chapter_content",`${t.id}-${e.id}`),vt=await Bd(K);vt.exists()?qt(vt.data().content):qt(`## Ошибка

Не удалось загрузить текст главы. Пожалуйста, попробуйте позже.`)}catch(K){console.error("Ошибка загрузки главы:",K),qt(`## Ошибка

Произошла ошибка при загрузке. Проверьте ваше интернет-соединение.`)}finally{me(!1)}})()},[t.id,e.id,Qt]);const He=async(G,K=null)=>{G.preventDefault();const vt=K?T:O;if(!(!vt.trim()||!r))try{await qs(Sn,{},{merge:!0});const et=uv(ne,`chapters_metadata/${t.id}_${e.id}/comments`),Ct={userId:r,userName:s||"Аноним",text:vt,timestamp:Ef(),likeCount:0};K&&(Ct.replyTo=K),await Nx(et,Ct),K?(q(null),y("")):M("")}catch(et){console.error("Ошибка добавления комментария:",et)}},ns=async G=>{if(!r)return;const K=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments`,G),vt=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments/${G}/likes`,r);try{await pv(ne,async et=>{const Ct=await et.get(vt),ft=await et.get(K);if(!ft.exists())return;const kt=ft.data().likeCount||0;Ct.exists()?(et.delete(vt),et.update(K,{likeCount:Math.max(0,kt-1)})):(et.set(vt,{timestamp:Ef()}),et.update(K,{likeCount:kt+1}))})}catch(et){console.error("Ошибка при обновлении лайка комментария:",et)}},_r=G=>{G?(v(G.id),D(G.text)):(v(null),D(""))},yi=async G=>{if(!R.trim())return;const K=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments`,G);await Ix(K,{text:R}),v(null),D("")},_i=async G=>{const K=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments`,G);await Cx(K)},zn=async()=>{if(!r)return;const G=Ie(ne,`chapters_metadata/${t.id}_${e.id}/likes`,r);try{await pv(ne,async K=>{var ft;const vt=await K.get(G),Ct=((ft=(await K.get(Sn)).data())==null?void 0:ft.likeCount)||0;vt.exists()?(K.delete(G),K.set(Sn,{likeCount:Math.max(0,Ct-1)},{merge:!0})):(K.set(G,{timestamp:Ef()}),K.set(Sn,{likeCount:Ct+1},{merge:!0}))})}catch(K){console.error("Ошибка при обновлении лайка:",K)}},Bn=G=>{G&&(!Qt&&G.isPaid?(xt(!1),$(!0)):(l(G),xt(!1)))},vr=G=>{Et(G),$(!1)},Er=async G=>{var vt;const K=(vt=window.Telegram)==null?void 0:vt.WebApp;K&&r&&ht&&K.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async et=>{if(et){const Ct=Ie(ne,"users",r);try{await qs(Ct,{pendingSubscription:{...ht,method:G,date:new Date().toISOString()}},{merge:!0}),K.openTelegramLink(`https://t.me/${d}?start=${r}`),K.close()}catch(ft){console.error("Ошибка записи в Firebase:",ft),K.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})},Tr=u.findIndex(G=>G.id===e.id),is=u[Tr-1],it=u[Tr+1],ct=G=>window.marked?`<div class="prose">${window.marked.parse(G)}</div>`:G,Yt=G=>{const K={},vt=[];return G.forEach(et=>{K[et.id]={...et,replies:[]}}),G.forEach(et=>{et.replyTo&&K[et.replyTo]?K[et.replyTo].replies.push(K[et.id]):vt.push(K[et.id])}),vt};return E.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[E.jsx(Kr,{title:t.title,onBack:g}),E.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[E.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:e.title}),E.jsx("div",{className:`whitespace-normal leading-relaxed ${a}`,style:{fontSize:`${n}px`},dangerouslySetInnerHTML:{__html:Dt?"<p>Загрузка...</p>":ct(mn)}}),E.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"╚══ ≪ °❈° ≫ ══╝"}),E.jsxs("div",{className:"border-t border-border-color pt-8",children:[E.jsx("div",{className:"flex items-center gap-4 mb-8",children:E.jsxs("button",{onClick:zn,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[E.jsx(Lg,{filled:I,className:I?"text-accent":""}),E.jsx("span",{className:"font-bold text-lg",children:b})]})}),E.jsx("h3",{className:"text-xl font-bold mb-4",children:"Комментарии"}),E.jsx("div",{className:"space-y-4 mb-6",children:_.length>0?Yt(_).map(G=>E.jsx(lS,{comment:G,onReply:K=>{q(K),y("")},onLike:ns,onEdit:_r,onDelete:_i,onUpdate:yi,isUserAdmin:m,currentUserId:r,editingCommentId:A,editingText:R,setEditingText:D,replyingTo:L,replyText:T,setReplyText:y,onCommentSubmit:He},G.id)):E.jsx("p",{className:"opacity-70 text-sm",children:"Комментариев пока нет. Будьте первым!"})}),E.jsxs("form",{onSubmit:G=>He(G,null),className:"flex items-center gap-2",children:[E.jsx("input",{type:"text",value:O,onChange:G=>M(G.target.value),placeholder:"Написать комментарий...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),E.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:E.jsx(aS,{className:"w-5 h-5"})})]})]})]}),E.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[E.jsx("button",{onClick:()=>Bn(is),disabled:!is,className:"p-2 disabled:opacity-50",children:E.jsx(rS,{})}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("button",{onClick:()=>xt(!0),className:"px-4 py-2 rounded-lg bg-background",children:"Оглавление"}),E.jsx("button",{onClick:()=>j(!0),className:"p-2 rounded-lg bg-background",children:E.jsx(z4,{})})]}),E.jsx("button",{onClick:()=>Bn(it),disabled:!it,className:"p-2 disabled:opacity-50",children:E.jsx(iS,{className:"opacity-100"})})]}),S&&E.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>xt(!1),children:E.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:G=>G.stopPropagation(),children:[E.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:"Главы"}),E.jsx("div",{className:"overflow-y-auto",children:E.jsx("div",{className:"flex flex-col gap-2",children:u.map(G=>E.jsx("button",{onClick:()=>Bn(G),className:`p-2 text-left rounded-md ${G.id===e.id?"bg-accent text-white":"bg-background"}`,children:G.title},G.id))})})]})}),be&&E.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>j(!1),children:E.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:G=>G.stopPropagation(),children:[E.jsx("h3",{className:"font-bold text-lg mb-4",children:"Настройки чтения"}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{children:"Размер текста"}),E.jsxs("div",{className:"w-28 h-12 rounded-full bg-background flex items-center justify-around border border-border-color",children:[E.jsx("button",{onClick:()=>i(-1),className:"text-2xl font-bold",children:"-"}),E.jsx("button",{onClick:()=>i(1),className:"text-2xl font-bold",children:"+"})]})]})]})}),X&&E.jsx(jg,{onClose:()=>$(!1),onSelectPlan:vr}),ht&&E.jsx(zg,{onClose:()=>Et(null),onSelectMethod:Er,plan:ht})]})},F4=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>{const[r,s]=F.useState(""),a=F.useMemo(()=>r?e.filter(l=>l.title.toLowerCase().includes(r.toLowerCase())):[],[e,r]);return E.jsxs("div",{children:[E.jsx(Kr,{title:"Поиск"}),E.jsxs("div",{className:"p-4",children:[E.jsxs("div",{className:"relative mb-6",children:[E.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:E.jsx(sS,{className:"text-text-main opacity-50"})}),E.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:r,onChange:l=>s(l.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent transition-shadow duration-300"})]}),E.jsx(Bg,{novels:a,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]})]})},G4=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>E.jsxs("div",{children:[E.jsx(Kr,{title:"Закладки"}),E.jsx(Bg,{novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]}),Q4=({subscription:e,onGetSubscriptionClick:t,userId:n})=>{const i=e&&new Date(e.expires_at)>new Date,r=()=>{n&&navigator.clipboard.writeText(n).then(()=>{console.log("Firebase UID скопирован в буфер обмена")}).catch(s=>{console.error("Не удалось скопировать UID: ",s)})};return E.jsxs("div",{children:[E.jsx(Kr,{title:"Профиль"}),E.jsxs("div",{className:"p-4 space-y-4",children:[E.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[E.jsx("h3",{className:"font-bold mb-2",children:"Подписка"}),i?E.jsxs("div",{children:[E.jsx("p",{className:"text-green-500",children:"Активна"}),E.jsxs("p",{className:"text-sm opacity-70",children:["Заканчивается: ",new Date(e.expires_at).toLocaleDateString()]})]}):E.jsxs("div",{children:[E.jsx("p",{className:"text-red-500",children:"Неактивна"}),E.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Оформите подписку, чтобы получить доступ ко всем платным главам."}),E.jsx("button",{onClick:t,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:"Оформить подписку"})]})]}),E.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[E.jsx("h3",{className:"font-bold mb-2",children:"Ваш ID для администрирования"}),E.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Этот ID нужен для назначения прав администратора через Telegram-бота."}),E.jsx("div",{className:"bg-background p-2 rounded-md text-xs break-all mb-3",children:E.jsx("code",{children:n||"Загрузка..."})}),E.jsx("button",{onClick:r,disabled:!n,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold transition-all hover:scale-105 disabled:opacity-50",children:"Копировать ID"})]})]})]})},Y4=({activeTab:e,setActiveTab:t})=>{const n=[{id:"library",label:"Библиотека",icon:U4},{id:"search",label:"Поиск",icon:sS},{id:"bookmarks",label:"Закладки",icon:oS},{id:"profile",label:"Профиль",icon:P4}];return E.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:E.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>E.jsxs("button",{onClick:()=>t(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===i.id?"text-accent":"text-text-main opacity-60"}`,children:[E.jsx(i.icon,{filled:e===i.id}),E.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},K4=({onReadMore:e})=>{const[t,n]=F.useState([]),[i,r]=F.useState(0);F.useEffect(()=>{fetch("/tene/data/news.json").then(u=>u.json()).then(n).catch(u=>console.error("Failed to fetch news",u))},[]);const s=()=>r(u=>(u+1)%t.length),a=()=>r(u=>(u-1+t.length)%t.length);if(t.length===0)return null;const l=t[i];return E.jsx("div",{className:"p-4",children:E.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[E.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),E.jsxs("div",{className:"flex-1",children:[E.jsx("h3",{className:"font-bold text-text-main",children:l.title}),E.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),E.jsx("button",{onClick:()=>e(l),className:"text-sm font-bold text-accent mt-1",children:"Читать далее"})]}),E.jsxs("div",{className:"flex flex-col",children:[E.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:E.jsx(L4,{className:"w-5 h-5"})}),E.jsx("button",{onClick:s,className:"p-1 rounded-full hover:bg-background",children:E.jsx(j4,{className:"w-5 h-5"})})]})]})})},X4=({newsItem:e,onClose:t})=>E.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:E.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main",onClick:n=>n.stopPropagation(),children:[E.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title}),E.jsx("p",{className:"whitespace-pre-wrap opacity-80",children:e.fullText}),E.jsx("button",{onClick:t,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})});function $4(){const[e,t]=F.useState(16),[n,i]=F.useState("font-sans"),[r,s]=F.useState("list"),[a,l]=F.useState("library"),[u,h]=F.useState([]),[d,g]=F.useState(null),[m,_]=F.useState(null),[x,O]=F.useState(null),[M,A]=F.useState(null),[v,R]=F.useState(null),[D,L]=F.useState(null),[q,T]=F.useState(!0),[y,b]=F.useState(!1),[w,I]=F.useState([]),[C,S]=F.useState(!0),[xt,be]=F.useState(null),[j,X]=F.useState([]),[$,ht]=F.useState(!1),[Et,mn]=F.useState(null),[qt,Dt]=F.useState(null),me="tenebrisverbot",Qt=F.useCallback(async it=>{if(v){const ct=Ie(ne,"users",v);try{await qs(ct,it,{merge:!0})}catch(Yt){console.error("Не удалось обновить данные пользователя:",Yt)}}},[v]),Sn=F.useCallback(it=>{t(ct=>{const Yt=Math.max(12,Math.min(32,ct+it));return Qt({settings:{fontSize:Yt,fontClass:n}}),Yt})},[n,Qt]);F.useEffect(()=>{(async()=>{var ct,Yt,G,K,vt,et;try{const Ct=await fetch("/tene/data/novels.json");if(!Ct.ok)throw console.error("Ошибка загрузки novels.json. Статус:",Ct.status),new Error("Failed to fetch novels");const ft=await Ct.json();h(ft.novels);const gn=(await mD(V4)).user,pn=(ct=window.Telegram)==null?void 0:ct.WebApp;let vi=null;pn?(pn.ready(),pn.expand(),L(((G=(Yt=pn.initDataUnsafe)==null?void 0:Yt.user)==null?void 0:G.first_name)||"Аноним"),vi=(et=(vt=(K=pn.initDataUnsafe)==null?void 0:K.user)==null?void 0:vt.id)==null?void 0:et.toString()):L("Аноним"),R(gn.uid);const wa=await gn.getIdTokenResult();if(b(!!wa.claims.admin),gn.uid){const Ei=Ie(ne,"users",gn.uid);vi&&await qs(Ei,{telegramId:vi},{merge:!0}),wu(Ei,Ra=>{if(Ra.exists()){const qn=Ra.data();A(qn.subscription||null),be(qn.lastRead||null),X(qn.bookmarks||[]),qn.settings&&(t(qn.settings.fontSize||16),i(qn.settings.fontClass||"font-sans"))}})}}catch(Ct){console.error("Критическая ошибка инициализации:",Ct)}finally{T(!1)}})()},[]),F.useEffect(()=>{if(!d){I([]);return}(async()=>{S(!0);try{const ct=Ie(ne,"chapter_info",d.id.toString()),Yt=await Bd(ct);if(Yt.exists()){const K=Yt.data().chapters||{},vt=Object.keys(K).map(et=>({id:parseInt(et),title:`Глава ${et}`,isPaid:K[et].isPaid||!1})).sort((et,Ct)=>et.id-Ct.id);I(vt)}else console.log("Документ с главами не найден в chapter_info!"),I([])}catch(ct){console.error("Ошибка загрузки глав из Firebase:",ct),I([])}finally{S(!1)}})()},[d]);const He=F.useCallback(()=>{r==="reader"?s("details"):r==="details"&&(s("list"),O(null))},[r]);F.useEffect(()=>{var ct;const it=(ct=window.Telegram)==null?void 0:ct.WebApp;if(it)return it.onEvent("backButtonClicked",He),r==="list"?it.BackButton.hide():it.BackButton.show(),()=>it.offEvent("backButtonClicked",He)},[r,He]),F.useEffect(()=>{var ct;const it=(ct=window.Telegram)==null?void 0:ct.WebApp;it&&(it.setHeaderColor("#FFFFFF"),it.setBackgroundColor("#F5F1ED"))},[]);const ns=F.useCallback(async it=>{if(_(it),s("reader"),v&&d){const ct={...xt||{},[d.id]:{novelId:d.id,chapterId:it.id,timestamp:new Date().toISOString()}};be(ct),await Qt({lastRead:ct})}},[v,d,xt,Qt]),_r=it=>{g(it),s("details")},yi=it=>{O(it),s("list"),l("library")},_i=()=>{O(null)},zn=F.useCallback(async it=>{const ct=j.includes(it)?j.filter(Yt=>Yt!==it):[...j,it];X(ct),await Qt({bookmarks:ct})},[j,Qt]),Bn=F.useMemo(()=>u.filter(it=>j.includes(it.id)),[u,j]),vr=()=>{ht(!0)},Er=it=>{mn(it),ht(!1)},Tr=async it=>{var Yt;const ct=(Yt=window.Telegram)==null?void 0:Yt.WebApp;if(!ct||!v||!Et){console.error("Telegram Web App, userId, or selectedPlan is not available."),ct&&ct.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}ct.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не реагирует после того, как вы выбрали тариф, не волнуйтесь! Попробуйте отправить команду /start еще раз.",async G=>{if(!G)return;const K=Ie(ne,"users",v);try{await qs(K,{pendingSubscription:{...Et,method:it,date:new Date().toISOString()}},{merge:!0}),ct.openTelegramLink(`https://t.me/${me}?start=true`),ct.close()}catch(vt){console.error("Ошибка записи в Firebase:",vt),ct.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};if(q)return E.jsx(B4,{});const is=()=>{if(r==="details")return E.jsx(q4,{novel:d,onSelectChapter:ns,onGenreSelect:yi,subscription:M,botUsername:me,userId:v,chapters:w,isLoadingChapters:C,lastReadData:xt,onBack:He});if(r==="reader")return E.jsx(H4,{chapter:m,novel:d,fontSize:e,onFontSizeChange:Sn,userId:v,userName:D,currentFontClass:n,onSelectChapter:ns,allChapters:w,subscription:M,botUsername:me,onBack:He,isUserAdmin:y});switch(a){case"library":return E.jsxs(E.Fragment,{children:[E.jsx(Kr,{title:"Библиотека"}),E.jsx(K4,{onReadMore:Dt}),x&&E.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[E.jsxs("p",{className:"text-sm",children:[E.jsx("span",{className:"opacity-70",children:"Жанр:"}),E.jsx("strong",{className:"ml-2",children:x})]}),E.jsx("button",{onClick:_i,className:"text-xs font-bold text-accent hover:underline",children:"Сбросить"})]}),E.jsx(Bg,{novels:u.filter(it=>!x||it.genres.includes(x)),onSelectNovel:_r,bookmarks:j,onToggleBookmark:zn})]});case"search":return E.jsx(F4,{novels:u,onSelectNovel:_r,bookmarks:j,onToggleBookmark:zn});case"bookmarks":return E.jsx(G4,{novels:Bn,onSelectNovel:_r,bookmarks:j,onToggleBookmark:zn});case"profile":return E.jsx(Q4,{subscription:M,onGetSubscriptionClick:vr,userId:v});default:return E.jsx(Kr,{title:"Библиотека"})}};return E.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${y?"":"no-select"}`,children:[E.jsx("div",{className:"pb-20",children:is()}),r==="list"&&E.jsx(Y4,{activeTab:a,setActiveTab:l}),$&&E.jsx(jg,{onClose:()=>ht(!1),onSelectPlan:Er}),Et&&E.jsx(zg,{onClose:()=>mn(null),onSelectMethod:Tr,plan:Et}),qt&&E.jsx(X4,{newsItem:qt,onClose:()=>Dt(null)})]})}DR.createRoot(document.getElementById("root")).render(E.jsx(F.StrictMode,{children:E.jsx($4,{})}));
